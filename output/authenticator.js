"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/isexe/windows.js
var require_windows = __commonJS({
  "node_modules/isexe/windows.js"(exports2, module2) {
    module2.exports = isexe;
    isexe.sync = sync;
    var fs = require("fs");
    function checkPathExt(path3, options) {
      var pathext = options.pathExt !== void 0 ? options.pathExt : process.env.PATHEXT;
      if (!pathext) {
        return true;
      }
      pathext = pathext.split(";");
      if (pathext.indexOf("") !== -1) {
        return true;
      }
      for (var i = 0; i < pathext.length; i++) {
        var p = pathext[i].toLowerCase();
        if (p && path3.substr(-p.length).toLowerCase() === p) {
          return true;
        }
      }
      return false;
    }
    function checkStat(stat, path3, options) {
      if (!stat.isSymbolicLink() && !stat.isFile()) {
        return false;
      }
      return checkPathExt(path3, options);
    }
    function isexe(path3, options, cb) {
      fs.stat(path3, function(er, stat) {
        cb(er, er ? false : checkStat(stat, path3, options));
      });
    }
    function sync(path3, options) {
      return checkStat(fs.statSync(path3), path3, options);
    }
  }
});

// node_modules/isexe/mode.js
var require_mode = __commonJS({
  "node_modules/isexe/mode.js"(exports2, module2) {
    module2.exports = isexe;
    isexe.sync = sync;
    var fs = require("fs");
    function isexe(path3, options, cb) {
      fs.stat(path3, function(er, stat) {
        cb(er, er ? false : checkStat(stat, options));
      });
    }
    function sync(path3, options) {
      return checkStat(fs.statSync(path3), options);
    }
    function checkStat(stat, options) {
      return stat.isFile() && checkMode(stat, options);
    }
    function checkMode(stat, options) {
      var mod = stat.mode;
      var uid = stat.uid;
      var gid = stat.gid;
      var myUid = options.uid !== void 0 ? options.uid : process.getuid && process.getuid();
      var myGid = options.gid !== void 0 ? options.gid : process.getgid && process.getgid();
      var u = parseInt("100", 8);
      var g = parseInt("010", 8);
      var o = parseInt("001", 8);
      var ug = u | g;
      var ret = mod & o || mod & g && gid === myGid || mod & u && uid === myUid || mod & ug && myUid === 0;
      return ret;
    }
  }
});

// node_modules/isexe/index.js
var require_isexe = __commonJS({
  "node_modules/isexe/index.js"(exports2, module2) {
    var fs = require("fs");
    var core;
    if (process.platform === "win32" || global.TESTING_WINDOWS) {
      core = require_windows();
    } else {
      core = require_mode();
    }
    module2.exports = isexe;
    isexe.sync = sync;
    function isexe(path3, options, cb) {
      if (typeof options === "function") {
        cb = options;
        options = {};
      }
      if (!cb) {
        if (typeof Promise !== "function") {
          throw new TypeError("callback not provided");
        }
        return new Promise(function(resolve, reject) {
          isexe(path3, options || {}, function(er, is) {
            if (er) {
              reject(er);
            } else {
              resolve(is);
            }
          });
        });
      }
      core(path3, options || {}, function(er, is) {
        if (er) {
          if (er.code === "EACCES" || options && options.ignoreErrors) {
            er = null;
            is = false;
          }
        }
        cb(er, is);
      });
    }
    function sync(path3, options) {
      try {
        return core.sync(path3, options || {});
      } catch (er) {
        if (options && options.ignoreErrors || er.code === "EACCES") {
          return false;
        } else {
          throw er;
        }
      }
    }
  }
});

// node_modules/which/which.js
var require_which = __commonJS({
  "node_modules/which/which.js"(exports2, module2) {
    var isWindows = process.platform === "win32" || process.env.OSTYPE === "cygwin" || process.env.OSTYPE === "msys";
    var path3 = require("path");
    var COLON = isWindows ? ";" : ":";
    var isexe = require_isexe();
    var getNotFoundError = (cmd) => Object.assign(new Error(`not found: ${cmd}`), { code: "ENOENT" });
    var getPathInfo = (cmd, opt) => {
      const colon = opt.colon || COLON;
      const pathEnv = cmd.match(/\//) || isWindows && cmd.match(/\\/) ? [""] : [
        // windows always checks the cwd first
        ...isWindows ? [process.cwd()] : [],
        ...(opt.path || process.env.PATH || /* istanbul ignore next: very unusual */
        "").split(colon)
      ];
      const pathExtExe = isWindows ? opt.pathExt || process.env.PATHEXT || ".EXE;.CMD;.BAT;.COM" : "";
      const pathExt = isWindows ? pathExtExe.split(colon) : [""];
      if (isWindows) {
        if (cmd.indexOf(".") !== -1 && pathExt[0] !== "")
          pathExt.unshift("");
      }
      return {
        pathEnv,
        pathExt,
        pathExtExe
      };
    };
    var which = (cmd, opt, cb) => {
      if (typeof opt === "function") {
        cb = opt;
        opt = {};
      }
      if (!opt)
        opt = {};
      const { pathEnv, pathExt, pathExtExe } = getPathInfo(cmd, opt);
      const found = [];
      const step = (i) => new Promise((resolve, reject) => {
        if (i === pathEnv.length)
          return opt.all && found.length ? resolve(found) : reject(getNotFoundError(cmd));
        const ppRaw = pathEnv[i];
        const pathPart = /^".*"$/.test(ppRaw) ? ppRaw.slice(1, -1) : ppRaw;
        const pCmd = path3.join(pathPart, cmd);
        const p = !pathPart && /^\.[\\\/]/.test(cmd) ? cmd.slice(0, 2) + pCmd : pCmd;
        resolve(subStep(p, i, 0));
      });
      const subStep = (p, i, ii) => new Promise((resolve, reject) => {
        if (ii === pathExt.length)
          return resolve(step(i + 1));
        const ext = pathExt[ii];
        isexe(p + ext, { pathExt: pathExtExe }, (er, is) => {
          if (!er && is) {
            if (opt.all)
              found.push(p + ext);
            else
              return resolve(p + ext);
          }
          return resolve(subStep(p, i, ii + 1));
        });
      });
      return cb ? step(0).then((res) => cb(null, res), cb) : step(0);
    };
    var whichSync = (cmd, opt) => {
      opt = opt || {};
      const { pathEnv, pathExt, pathExtExe } = getPathInfo(cmd, opt);
      const found = [];
      for (let i = 0; i < pathEnv.length; i++) {
        const ppRaw = pathEnv[i];
        const pathPart = /^".*"$/.test(ppRaw) ? ppRaw.slice(1, -1) : ppRaw;
        const pCmd = path3.join(pathPart, cmd);
        const p = !pathPart && /^\.[\\\/]/.test(cmd) ? cmd.slice(0, 2) + pCmd : pCmd;
        for (let j = 0; j < pathExt.length; j++) {
          const cur = p + pathExt[j];
          try {
            const is = isexe.sync(cur, { pathExt: pathExtExe });
            if (is) {
              if (opt.all)
                found.push(cur);
              else
                return cur;
            }
          } catch (ex) {
          }
        }
      }
      if (opt.all && found.length)
        return found;
      if (opt.nothrow)
        return null;
      throw getNotFoundError(cmd);
    };
    module2.exports = which;
    which.sync = whichSync;
  }
});

// node_modules/path-key/index.js
var require_path_key = __commonJS({
  "node_modules/path-key/index.js"(exports2, module2) {
    "use strict";
    var pathKey2 = (options = {}) => {
      const environment8 = options.env || process.env;
      const platform2 = options.platform || process.platform;
      if (platform2 !== "win32") {
        return "PATH";
      }
      return Object.keys(environment8).reverse().find((key) => key.toUpperCase() === "PATH") || "Path";
    };
    module2.exports = pathKey2;
    module2.exports.default = pathKey2;
  }
});

// node_modules/cross-spawn/lib/util/resolveCommand.js
var require_resolveCommand = __commonJS({
  "node_modules/cross-spawn/lib/util/resolveCommand.js"(exports2, module2) {
    "use strict";
    var path3 = require("path");
    var which = require_which();
    var getPathKey = require_path_key();
    function resolveCommandAttempt(parsed, withoutPathExt) {
      const env = parsed.options.env || process.env;
      const cwd = process.cwd();
      const hasCustomCwd = parsed.options.cwd != null;
      const shouldSwitchCwd = hasCustomCwd && process.chdir !== void 0 && !process.chdir.disabled;
      if (shouldSwitchCwd) {
        try {
          process.chdir(parsed.options.cwd);
        } catch (err) {
        }
      }
      let resolved;
      try {
        resolved = which.sync(parsed.command, {
          path: env[getPathKey({ env })],
          pathExt: withoutPathExt ? path3.delimiter : void 0
        });
      } catch (e) {
      } finally {
        if (shouldSwitchCwd) {
          process.chdir(cwd);
        }
      }
      if (resolved) {
        resolved = path3.resolve(hasCustomCwd ? parsed.options.cwd : "", resolved);
      }
      return resolved;
    }
    function resolveCommand(parsed) {
      return resolveCommandAttempt(parsed) || resolveCommandAttempt(parsed, true);
    }
    module2.exports = resolveCommand;
  }
});

// node_modules/cross-spawn/lib/util/escape.js
var require_escape = __commonJS({
  "node_modules/cross-spawn/lib/util/escape.js"(exports2, module2) {
    "use strict";
    var metaCharsRegExp = /([()\][%!^"`<>&|;, *?])/g;
    function escapeCommand(arg) {
      arg = arg.replace(metaCharsRegExp, "^$1");
      return arg;
    }
    function escapeArgument(arg, doubleEscapeMetaChars) {
      arg = `${arg}`;
      arg = arg.replace(/(?=(\\+?)?)\1"/g, '$1$1\\"');
      arg = arg.replace(/(?=(\\+?)?)\1$/, "$1$1");
      arg = `"${arg}"`;
      arg = arg.replace(metaCharsRegExp, "^$1");
      if (doubleEscapeMetaChars) {
        arg = arg.replace(metaCharsRegExp, "^$1");
      }
      return arg;
    }
    module2.exports.command = escapeCommand;
    module2.exports.argument = escapeArgument;
  }
});

// node_modules/shebang-regex/index.js
var require_shebang_regex = __commonJS({
  "node_modules/shebang-regex/index.js"(exports2, module2) {
    "use strict";
    module2.exports = /^#!(.*)/;
  }
});

// node_modules/shebang-command/index.js
var require_shebang_command = __commonJS({
  "node_modules/shebang-command/index.js"(exports2, module2) {
    "use strict";
    var shebangRegex = require_shebang_regex();
    module2.exports = (string = "") => {
      const match = string.match(shebangRegex);
      if (!match) {
        return null;
      }
      const [path3, argument] = match[0].replace(/#! ?/, "").split(" ");
      const binary = path3.split("/").pop();
      if (binary === "env") {
        return argument;
      }
      return argument ? `${binary} ${argument}` : binary;
    };
  }
});

// node_modules/cross-spawn/lib/util/readShebang.js
var require_readShebang = __commonJS({
  "node_modules/cross-spawn/lib/util/readShebang.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var shebangCommand = require_shebang_command();
    function readShebang(command) {
      const size = 150;
      const buffer = Buffer.alloc(size);
      let fd;
      try {
        fd = fs.openSync(command, "r");
        fs.readSync(fd, buffer, 0, size, 0);
        fs.closeSync(fd);
      } catch (e) {
      }
      return shebangCommand(buffer.toString());
    }
    module2.exports = readShebang;
  }
});

// node_modules/cross-spawn/lib/parse.js
var require_parse = __commonJS({
  "node_modules/cross-spawn/lib/parse.js"(exports2, module2) {
    "use strict";
    var path3 = require("path");
    var resolveCommand = require_resolveCommand();
    var escape = require_escape();
    var readShebang = require_readShebang();
    var isWin = process.platform === "win32";
    var isExecutableRegExp = /\.(?:com|exe)$/i;
    var isCmdShimRegExp = /node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;
    function detectShebang(parsed) {
      parsed.file = resolveCommand(parsed);
      const shebang = parsed.file && readShebang(parsed.file);
      if (shebang) {
        parsed.args.unshift(parsed.file);
        parsed.command = shebang;
        return resolveCommand(parsed);
      }
      return parsed.file;
    }
    function parseNonShell(parsed) {
      if (!isWin) {
        return parsed;
      }
      const commandFile = detectShebang(parsed);
      const needsShell = !isExecutableRegExp.test(commandFile);
      if (parsed.options.forceShell || needsShell) {
        const needsDoubleEscapeMetaChars = isCmdShimRegExp.test(commandFile);
        parsed.command = path3.normalize(parsed.command);
        parsed.command = escape.command(parsed.command);
        parsed.args = parsed.args.map((arg) => escape.argument(arg, needsDoubleEscapeMetaChars));
        const shellCommand = [parsed.command].concat(parsed.args).join(" ");
        parsed.args = ["/d", "/s", "/c", `"${shellCommand}"`];
        parsed.command = process.env.comspec || "cmd.exe";
        parsed.options.windowsVerbatimArguments = true;
      }
      return parsed;
    }
    function parse(command, args, options) {
      if (args && !Array.isArray(args)) {
        options = args;
        args = null;
      }
      args = args ? args.slice(0) : [];
      options = Object.assign({}, options);
      const parsed = {
        command,
        args,
        options,
        file: void 0,
        original: {
          command,
          args
        }
      };
      return options.shell ? parsed : parseNonShell(parsed);
    }
    module2.exports = parse;
  }
});

// node_modules/cross-spawn/lib/enoent.js
var require_enoent = __commonJS({
  "node_modules/cross-spawn/lib/enoent.js"(exports2, module2) {
    "use strict";
    var isWin = process.platform === "win32";
    function notFoundError(original, syscall) {
      return Object.assign(new Error(`${syscall} ${original.command} ENOENT`), {
        code: "ENOENT",
        errno: "ENOENT",
        syscall: `${syscall} ${original.command}`,
        path: original.command,
        spawnargs: original.args
      });
    }
    function hookChildProcess(cp, parsed) {
      if (!isWin) {
        return;
      }
      const originalEmit = cp.emit;
      cp.emit = function(name, arg1) {
        if (name === "exit") {
          const err = verifyENOENT(arg1, parsed);
          if (err) {
            return originalEmit.call(cp, "error", err);
          }
        }
        return originalEmit.apply(cp, arguments);
      };
    }
    function verifyENOENT(status, parsed) {
      if (isWin && status === 1 && !parsed.file) {
        return notFoundError(parsed.original, "spawn");
      }
      return null;
    }
    function verifyENOENTSync(status, parsed) {
      if (isWin && status === 1 && !parsed.file) {
        return notFoundError(parsed.original, "spawnSync");
      }
      return null;
    }
    module2.exports = {
      hookChildProcess,
      verifyENOENT,
      verifyENOENTSync,
      notFoundError
    };
  }
});

// node_modules/cross-spawn/index.js
var require_cross_spawn = __commonJS({
  "node_modules/cross-spawn/index.js"(exports2, module2) {
    "use strict";
    var cp = require("child_process");
    var parse = require_parse();
    var enoent = require_enoent();
    function spawn(command, args, options) {
      const parsed = parse(command, args, options);
      const spawned = cp.spawn(parsed.command, parsed.args, parsed.options);
      enoent.hookChildProcess(spawned, parsed);
      return spawned;
    }
    function spawnSync(command, args, options) {
      const parsed = parse(command, args, options);
      const result = cp.spawnSync(parsed.command, parsed.args, parsed.options);
      result.error = result.error || enoent.verifyENOENTSync(result.status, parsed);
      return result;
    }
    module2.exports = spawn;
    module2.exports.spawn = spawn;
    module2.exports.sync = spawnSync;
    module2.exports._parse = parse;
    module2.exports._enoent = enoent;
  }
});

// node_modules/signal-exit/signals.js
var require_signals = __commonJS({
  "node_modules/signal-exit/signals.js"(exports2, module2) {
    module2.exports = [
      "SIGABRT",
      "SIGALRM",
      "SIGHUP",
      "SIGINT",
      "SIGTERM"
    ];
    if (process.platform !== "win32") {
      module2.exports.push(
        "SIGVTALRM",
        "SIGXCPU",
        "SIGXFSZ",
        "SIGUSR2",
        "SIGTRAP",
        "SIGSYS",
        "SIGQUIT",
        "SIGIOT"
        // should detect profiler and enable/disable accordingly.
        // see #21
        // 'SIGPROF'
      );
    }
    if (process.platform === "linux") {
      module2.exports.push(
        "SIGIO",
        "SIGPOLL",
        "SIGPWR",
        "SIGSTKFLT",
        "SIGUNUSED"
      );
    }
  }
});

// node_modules/signal-exit/index.js
var require_signal_exit = __commonJS({
  "node_modules/signal-exit/index.js"(exports2, module2) {
    var process4 = global.process;
    var processOk = function(process5) {
      return process5 && typeof process5 === "object" && typeof process5.removeListener === "function" && typeof process5.emit === "function" && typeof process5.reallyExit === "function" && typeof process5.listeners === "function" && typeof process5.kill === "function" && typeof process5.pid === "number" && typeof process5.on === "function";
    };
    if (!processOk(process4)) {
      module2.exports = function() {
        return function() {
        };
      };
    } else {
      assert = require("assert");
      signals = require_signals();
      isWin = /^win/i.test(process4.platform);
      EE = require("events");
      if (typeof EE !== "function") {
        EE = EE.EventEmitter;
      }
      if (process4.__signal_exit_emitter__) {
        emitter = process4.__signal_exit_emitter__;
      } else {
        emitter = process4.__signal_exit_emitter__ = new EE();
        emitter.count = 0;
        emitter.emitted = {};
      }
      if (!emitter.infinite) {
        emitter.setMaxListeners(Infinity);
        emitter.infinite = true;
      }
      module2.exports = function(cb, opts) {
        if (!processOk(global.process)) {
          return function() {
          };
        }
        assert.equal(typeof cb, "function", "a callback must be provided for exit handler");
        if (loaded === false) {
          load();
        }
        var ev = "exit";
        if (opts && opts.alwaysLast) {
          ev = "afterexit";
        }
        var remove = function() {
          emitter.removeListener(ev, cb);
          if (emitter.listeners("exit").length === 0 && emitter.listeners("afterexit").length === 0) {
            unload();
          }
        };
        emitter.on(ev, cb);
        return remove;
      };
      unload = function unload2() {
        if (!loaded || !processOk(global.process)) {
          return;
        }
        loaded = false;
        signals.forEach(function(sig) {
          try {
            process4.removeListener(sig, sigListeners[sig]);
          } catch (er) {
          }
        });
        process4.emit = originalProcessEmit;
        process4.reallyExit = originalProcessReallyExit;
        emitter.count -= 1;
      };
      module2.exports.unload = unload;
      emit = function emit2(event, code, signal) {
        if (emitter.emitted[event]) {
          return;
        }
        emitter.emitted[event] = true;
        emitter.emit(event, code, signal);
      };
      sigListeners = {};
      signals.forEach(function(sig) {
        sigListeners[sig] = function listener() {
          if (!processOk(global.process)) {
            return;
          }
          var listeners = process4.listeners(sig);
          if (listeners.length === emitter.count) {
            unload();
            emit("exit", null, sig);
            emit("afterexit", null, sig);
            if (isWin && sig === "SIGHUP") {
              sig = "SIGINT";
            }
            process4.kill(process4.pid, sig);
          }
        };
      });
      module2.exports.signals = function() {
        return signals;
      };
      loaded = false;
      load = function load2() {
        if (loaded || !processOk(global.process)) {
          return;
        }
        loaded = true;
        emitter.count += 1;
        signals = signals.filter(function(sig) {
          try {
            process4.on(sig, sigListeners[sig]);
            return true;
          } catch (er) {
            return false;
          }
        });
        process4.emit = processEmit;
        process4.reallyExit = processReallyExit;
      };
      module2.exports.load = load;
      originalProcessReallyExit = process4.reallyExit;
      processReallyExit = function processReallyExit2(code) {
        if (!processOk(global.process)) {
          return;
        }
        process4.exitCode = code || /* istanbul ignore next */
        0;
        emit("exit", process4.exitCode, null);
        emit("afterexit", process4.exitCode, null);
        originalProcessReallyExit.call(process4, process4.exitCode);
      };
      originalProcessEmit = process4.emit;
      processEmit = function processEmit2(ev, arg) {
        if (ev === "exit" && processOk(global.process)) {
          if (arg !== void 0) {
            process4.exitCode = arg;
          }
          var ret = originalProcessEmit.apply(this, arguments);
          emit("exit", process4.exitCode, null);
          emit("afterexit", process4.exitCode, null);
          return ret;
        } else {
          return originalProcessEmit.apply(this, arguments);
        }
      };
    }
    var assert;
    var signals;
    var isWin;
    var EE;
    var emitter;
    var unload;
    var emit;
    var sigListeners;
    var loaded;
    var load;
    var originalProcessReallyExit;
    var processReallyExit;
    var originalProcessEmit;
    var processEmit;
  }
});

// node_modules/get-stream/buffer-stream.js
var require_buffer_stream = __commonJS({
  "node_modules/get-stream/buffer-stream.js"(exports2, module2) {
    "use strict";
    var { PassThrough: PassThroughStream } = require("stream");
    module2.exports = (options) => {
      options = { ...options };
      const { array } = options;
      let { encoding } = options;
      const isBuffer = encoding === "buffer";
      let objectMode = false;
      if (array) {
        objectMode = !(encoding || isBuffer);
      } else {
        encoding = encoding || "utf8";
      }
      if (isBuffer) {
        encoding = null;
      }
      const stream = new PassThroughStream({ objectMode });
      if (encoding) {
        stream.setEncoding(encoding);
      }
      let length = 0;
      const chunks = [];
      stream.on("data", (chunk) => {
        chunks.push(chunk);
        if (objectMode) {
          length = chunks.length;
        } else {
          length += chunk.length;
        }
      });
      stream.getBufferedValue = () => {
        if (array) {
          return chunks;
        }
        return isBuffer ? Buffer.concat(chunks, length) : chunks.join("");
      };
      stream.getBufferedLength = () => length;
      return stream;
    };
  }
});

// node_modules/get-stream/index.js
var require_get_stream = __commonJS({
  "node_modules/get-stream/index.js"(exports2, module2) {
    "use strict";
    var { constants: BufferConstants } = require("buffer");
    var stream = require("stream");
    var { promisify: promisify3 } = require("util");
    var bufferStream = require_buffer_stream();
    var streamPipelinePromisified = promisify3(stream.pipeline);
    var MaxBufferError = class extends Error {
      constructor() {
        super("maxBuffer exceeded");
        this.name = "MaxBufferError";
      }
    };
    async function getStream2(inputStream, options) {
      if (!inputStream) {
        throw new Error("Expected a stream");
      }
      options = {
        maxBuffer: Infinity,
        ...options
      };
      const { maxBuffer } = options;
      const stream2 = bufferStream(options);
      await new Promise((resolve, reject) => {
        const rejectPromise = (error) => {
          if (error && stream2.getBufferedLength() <= BufferConstants.MAX_LENGTH) {
            error.bufferedData = stream2.getBufferedValue();
          }
          reject(error);
        };
        (async () => {
          try {
            await streamPipelinePromisified(inputStream, stream2);
            resolve();
          } catch (error) {
            rejectPromise(error);
          }
        })();
        stream2.on("data", () => {
          if (stream2.getBufferedLength() > maxBuffer) {
            rejectPromise(new MaxBufferError());
          }
        });
      });
      return stream2.getBufferedValue();
    }
    module2.exports = getStream2;
    module2.exports.buffer = (stream2, options) => getStream2(stream2, { ...options, encoding: "buffer" });
    module2.exports.array = (stream2, options) => getStream2(stream2, { ...options, array: true });
    module2.exports.MaxBufferError = MaxBufferError;
  }
});

// node_modules/merge-stream/index.js
var require_merge_stream = __commonJS({
  "node_modules/merge-stream/index.js"(exports2, module2) {
    "use strict";
    var { PassThrough } = require("stream");
    module2.exports = function() {
      var sources = [];
      var output = new PassThrough({ objectMode: true });
      output.setMaxListeners(0);
      output.add = add;
      output.isEmpty = isEmpty;
      output.on("unpipe", remove);
      Array.prototype.slice.call(arguments).forEach(add);
      return output;
      function add(source) {
        if (Array.isArray(source)) {
          source.forEach(add);
          return this;
        }
        sources.push(source);
        source.once("end", remove.bind(null, source));
        source.once("error", output.emit.bind(output, "error"));
        source.pipe(output, { end: false });
        return this;
      }
      function isEmpty() {
        return sources.length == 0;
      }
      function remove(source) {
        sources = sources.filter(function(it) {
          return it !== source;
        });
        if (!sources.length && output.readable) {
          output.end();
        }
      }
    };
  }
});

// node_modules/node-stream-zip/node_stream_zip.js
var require_node_stream_zip = __commonJS({
  "node_modules/node-stream-zip/node_stream_zip.js"(exports2, module2) {
    var fs = require("fs");
    var util = require("util");
    var path3 = require("path");
    var events = require("events");
    var zlib = require("zlib");
    var stream = require("stream");
    var consts = {
      /* The local file header */
      LOCHDR: 30,
      // LOC header size
      LOCSIG: 67324752,
      // "PK\003\004"
      LOCVER: 4,
      // version needed to extract
      LOCFLG: 6,
      // general purpose bit flag
      LOCHOW: 8,
      // compression method
      LOCTIM: 10,
      // modification time (2 bytes time, 2 bytes date)
      LOCCRC: 14,
      // uncompressed file crc-32 value
      LOCSIZ: 18,
      // compressed size
      LOCLEN: 22,
      // uncompressed size
      LOCNAM: 26,
      // filename length
      LOCEXT: 28,
      // extra field length
      /* The Data descriptor */
      EXTSIG: 134695760,
      // "PK\007\008"
      EXTHDR: 16,
      // EXT header size
      EXTCRC: 4,
      // uncompressed file crc-32 value
      EXTSIZ: 8,
      // compressed size
      EXTLEN: 12,
      // uncompressed size
      /* The central directory file header */
      CENHDR: 46,
      // CEN header size
      CENSIG: 33639248,
      // "PK\001\002"
      CENVEM: 4,
      // version made by
      CENVER: 6,
      // version needed to extract
      CENFLG: 8,
      // encrypt, decrypt flags
      CENHOW: 10,
      // compression method
      CENTIM: 12,
      // modification time (2 bytes time, 2 bytes date)
      CENCRC: 16,
      // uncompressed file crc-32 value
      CENSIZ: 20,
      // compressed size
      CENLEN: 24,
      // uncompressed size
      CENNAM: 28,
      // filename length
      CENEXT: 30,
      // extra field length
      CENCOM: 32,
      // file comment length
      CENDSK: 34,
      // volume number start
      CENATT: 36,
      // internal file attributes
      CENATX: 38,
      // external file attributes (host system dependent)
      CENOFF: 42,
      // LOC header offset
      /* The entries in the end of central directory */
      ENDHDR: 22,
      // END header size
      ENDSIG: 101010256,
      // "PK\005\006"
      ENDSIGFIRST: 80,
      ENDSUB: 8,
      // number of entries on this disk
      ENDTOT: 10,
      // total number of entries
      ENDSIZ: 12,
      // central directory size in bytes
      ENDOFF: 16,
      // offset of first CEN header
      ENDCOM: 20,
      // zip file comment length
      MAXFILECOMMENT: 65535,
      /* The entries in the end of ZIP64 central directory locator */
      ENDL64HDR: 20,
      // ZIP64 end of central directory locator header size
      ENDL64SIG: 117853008,
      // ZIP64 end of central directory locator signature
      ENDL64SIGFIRST: 80,
      ENDL64OFS: 8,
      // ZIP64 end of central directory offset
      /* The entries in the end of ZIP64 central directory */
      END64HDR: 56,
      // ZIP64 end of central directory header size
      END64SIG: 101075792,
      // ZIP64 end of central directory signature
      END64SIGFIRST: 80,
      END64SUB: 24,
      // number of entries on this disk
      END64TOT: 32,
      // total number of entries
      END64SIZ: 40,
      END64OFF: 48,
      /* Compression methods */
      STORED: 0,
      // no compression
      SHRUNK: 1,
      // shrunk
      REDUCED1: 2,
      // reduced with compression factor 1
      REDUCED2: 3,
      // reduced with compression factor 2
      REDUCED3: 4,
      // reduced with compression factor 3
      REDUCED4: 5,
      // reduced with compression factor 4
      IMPLODED: 6,
      // imploded
      // 7 reserved
      DEFLATED: 8,
      // deflated
      ENHANCED_DEFLATED: 9,
      // deflate64
      PKWARE: 10,
      // PKWare DCL imploded
      // 11 reserved
      BZIP2: 12,
      //  compressed using BZIP2
      // 13 reserved
      LZMA: 14,
      // LZMA
      // 15-17 reserved
      IBM_TERSE: 18,
      // compressed using IBM TERSE
      IBM_LZ77: 19,
      //IBM LZ77 z
      /* General purpose bit flag */
      FLG_ENC: 0,
      // encrypted file
      FLG_COMP1: 1,
      // compression option
      FLG_COMP2: 2,
      // compression option
      FLG_DESC: 4,
      // data descriptor
      FLG_ENH: 8,
      // enhanced deflation
      FLG_STR: 16,
      // strong encryption
      FLG_LNG: 1024,
      // language encoding
      FLG_MSK: 4096,
      // mask header values
      FLG_ENTRY_ENC: 1,
      /* 4.5 Extensible data fields */
      EF_ID: 0,
      EF_SIZE: 2,
      /* Header IDs */
      ID_ZIP64: 1,
      ID_AVINFO: 7,
      ID_PFS: 8,
      ID_OS2: 9,
      ID_NTFS: 10,
      ID_OPENVMS: 12,
      ID_UNIX: 13,
      ID_FORK: 14,
      ID_PATCH: 15,
      ID_X509_PKCS7: 20,
      ID_X509_CERTID_F: 21,
      ID_X509_CERTID_C: 22,
      ID_STRONGENC: 23,
      ID_RECORD_MGT: 24,
      ID_X509_PKCS7_RL: 25,
      ID_IBM1: 101,
      ID_IBM2: 102,
      ID_POSZIP: 18064,
      EF_ZIP64_OR_32: 4294967295,
      EF_ZIP64_OR_16: 65535
    };
    var StreamZip = function(config) {
      let fd, fileSize, chunkSize, op, centralDirectory, closed;
      const ready = false, that = this, entries = config.storeEntries !== false ? {} : null, fileName = config.file, textDecoder = config.nameEncoding ? new TextDecoder(config.nameEncoding) : null;
      open2();
      function open2() {
        if (config.fd) {
          fd = config.fd;
          readFile();
        } else {
          fs.open(fileName, "r", (err, f) => {
            if (err) {
              return that.emit("error", err);
            }
            fd = f;
            readFile();
          });
        }
      }
      function readFile() {
        fs.fstat(fd, (err, stat) => {
          if (err) {
            return that.emit("error", err);
          }
          fileSize = stat.size;
          chunkSize = config.chunkSize || Math.round(fileSize / 1e3);
          chunkSize = Math.max(
            Math.min(chunkSize, Math.min(128 * 1024, fileSize)),
            Math.min(1024, fileSize)
          );
          readCentralDirectory();
        });
      }
      function readUntilFoundCallback(err, bytesRead) {
        if (err || !bytesRead) {
          return that.emit("error", err || new Error("Archive read error"));
        }
        let pos = op.lastPos;
        let bufferPosition = pos - op.win.position;
        const buffer = op.win.buffer;
        const minPos = op.minPos;
        while (--pos >= minPos && --bufferPosition >= 0) {
          if (buffer.length - bufferPosition >= 4 && buffer[bufferPosition] === op.firstByte) {
            if (buffer.readUInt32LE(bufferPosition) === op.sig) {
              op.lastBufferPosition = bufferPosition;
              op.lastBytesRead = bytesRead;
              op.complete();
              return;
            }
          }
        }
        if (pos === minPos) {
          return that.emit("error", new Error("Bad archive"));
        }
        op.lastPos = pos + 1;
        op.chunkSize *= 2;
        if (pos <= minPos) {
          return that.emit("error", new Error("Bad archive"));
        }
        const expandLength = Math.min(op.chunkSize, pos - minPos);
        op.win.expandLeft(expandLength, readUntilFoundCallback);
      }
      function readCentralDirectory() {
        const totalReadLength = Math.min(consts.ENDHDR + consts.MAXFILECOMMENT, fileSize);
        op = {
          win: new FileWindowBuffer(fd),
          totalReadLength,
          minPos: fileSize - totalReadLength,
          lastPos: fileSize,
          chunkSize: Math.min(1024, chunkSize),
          firstByte: consts.ENDSIGFIRST,
          sig: consts.ENDSIG,
          complete: readCentralDirectoryComplete
        };
        op.win.read(fileSize - op.chunkSize, op.chunkSize, readUntilFoundCallback);
      }
      function readCentralDirectoryComplete() {
        const buffer = op.win.buffer;
        const pos = op.lastBufferPosition;
        try {
          centralDirectory = new CentralDirectoryHeader();
          centralDirectory.read(buffer.slice(pos, pos + consts.ENDHDR));
          centralDirectory.headerOffset = op.win.position + pos;
          if (centralDirectory.commentLength) {
            that.comment = buffer.slice(
              pos + consts.ENDHDR,
              pos + consts.ENDHDR + centralDirectory.commentLength
            ).toString();
          } else {
            that.comment = null;
          }
          that.entriesCount = centralDirectory.volumeEntries;
          that.centralDirectory = centralDirectory;
          if (centralDirectory.volumeEntries === consts.EF_ZIP64_OR_16 && centralDirectory.totalEntries === consts.EF_ZIP64_OR_16 || centralDirectory.size === consts.EF_ZIP64_OR_32 || centralDirectory.offset === consts.EF_ZIP64_OR_32) {
            readZip64CentralDirectoryLocator();
          } else {
            op = {};
            readEntries();
          }
        } catch (err) {
          that.emit("error", err);
        }
      }
      function readZip64CentralDirectoryLocator() {
        const length = consts.ENDL64HDR;
        if (op.lastBufferPosition > length) {
          op.lastBufferPosition -= length;
          readZip64CentralDirectoryLocatorComplete();
        } else {
          op = {
            win: op.win,
            totalReadLength: length,
            minPos: op.win.position - length,
            lastPos: op.win.position,
            chunkSize: op.chunkSize,
            firstByte: consts.ENDL64SIGFIRST,
            sig: consts.ENDL64SIG,
            complete: readZip64CentralDirectoryLocatorComplete
          };
          op.win.read(op.lastPos - op.chunkSize, op.chunkSize, readUntilFoundCallback);
        }
      }
      function readZip64CentralDirectoryLocatorComplete() {
        const buffer = op.win.buffer;
        const locHeader = new CentralDirectoryLoc64Header();
        locHeader.read(
          buffer.slice(op.lastBufferPosition, op.lastBufferPosition + consts.ENDL64HDR)
        );
        const readLength = fileSize - locHeader.headerOffset;
        op = {
          win: op.win,
          totalReadLength: readLength,
          minPos: locHeader.headerOffset,
          lastPos: op.lastPos,
          chunkSize: op.chunkSize,
          firstByte: consts.END64SIGFIRST,
          sig: consts.END64SIG,
          complete: readZip64CentralDirectoryComplete
        };
        op.win.read(fileSize - op.chunkSize, op.chunkSize, readUntilFoundCallback);
      }
      function readZip64CentralDirectoryComplete() {
        const buffer = op.win.buffer;
        const zip64cd = new CentralDirectoryZip64Header();
        zip64cd.read(buffer.slice(op.lastBufferPosition, op.lastBufferPosition + consts.END64HDR));
        that.centralDirectory.volumeEntries = zip64cd.volumeEntries;
        that.centralDirectory.totalEntries = zip64cd.totalEntries;
        that.centralDirectory.size = zip64cd.size;
        that.centralDirectory.offset = zip64cd.offset;
        that.entriesCount = zip64cd.volumeEntries;
        op = {};
        readEntries();
      }
      function readEntries() {
        op = {
          win: new FileWindowBuffer(fd),
          pos: centralDirectory.offset,
          chunkSize,
          entriesLeft: centralDirectory.volumeEntries
        };
        op.win.read(op.pos, Math.min(chunkSize, fileSize - op.pos), readEntriesCallback);
      }
      function readEntriesCallback(err, bytesRead) {
        if (err || !bytesRead) {
          return that.emit("error", err || new Error("Entries read error"));
        }
        let bufferPos = op.pos - op.win.position;
        let entry = op.entry;
        const buffer = op.win.buffer;
        const bufferLength = buffer.length;
        try {
          while (op.entriesLeft > 0) {
            if (!entry) {
              entry = new ZipEntry();
              entry.readHeader(buffer, bufferPos);
              entry.headerOffset = op.win.position + bufferPos;
              op.entry = entry;
              op.pos += consts.CENHDR;
              bufferPos += consts.CENHDR;
            }
            const entryHeaderSize = entry.fnameLen + entry.extraLen + entry.comLen;
            const advanceBytes = entryHeaderSize + (op.entriesLeft > 1 ? consts.CENHDR : 0);
            if (bufferLength - bufferPos < advanceBytes) {
              op.win.moveRight(chunkSize, readEntriesCallback, bufferPos);
              op.move = true;
              return;
            }
            entry.read(buffer, bufferPos, textDecoder);
            if (!config.skipEntryNameValidation) {
              entry.validateName();
            }
            if (entries) {
              entries[entry.name] = entry;
            }
            that.emit("entry", entry);
            op.entry = entry = null;
            op.entriesLeft--;
            op.pos += entryHeaderSize;
            bufferPos += entryHeaderSize;
          }
          that.emit("ready");
        } catch (err2) {
          that.emit("error", err2);
        }
      }
      function checkEntriesExist() {
        if (!entries) {
          throw new Error("storeEntries disabled");
        }
      }
      Object.defineProperty(this, "ready", {
        get() {
          return ready;
        }
      });
      this.entry = function(name) {
        checkEntriesExist();
        return entries[name];
      };
      this.entries = function() {
        checkEntriesExist();
        return entries;
      };
      this.stream = function(entry, callback) {
        return this.openEntry(
          entry,
          (err, entry2) => {
            if (err) {
              return callback(err);
            }
            const offset = dataOffset(entry2);
            let entryStream = new EntryDataReaderStream(fd, offset, entry2.compressedSize);
            if (entry2.method === consts.STORED) {
            } else if (entry2.method === consts.DEFLATED) {
              entryStream = entryStream.pipe(zlib.createInflateRaw());
            } else {
              return callback(new Error("Unknown compression method: " + entry2.method));
            }
            if (canVerifyCrc(entry2)) {
              entryStream = entryStream.pipe(
                new EntryVerifyStream(entryStream, entry2.crc, entry2.size)
              );
            }
            callback(null, entryStream);
          },
          false
        );
      };
      this.entryDataSync = function(entry) {
        let err = null;
        this.openEntry(
          entry,
          (e, en) => {
            err = e;
            entry = en;
          },
          true
        );
        if (err) {
          throw err;
        }
        let data = Buffer.alloc(entry.compressedSize);
        new FsRead(fd, data, 0, entry.compressedSize, dataOffset(entry), (e) => {
          err = e;
        }).read(true);
        if (err) {
          throw err;
        }
        if (entry.method === consts.STORED) {
        } else if (entry.method === consts.DEFLATED || entry.method === consts.ENHANCED_DEFLATED) {
          data = zlib.inflateRawSync(data);
        } else {
          throw new Error("Unknown compression method: " + entry.method);
        }
        if (data.length !== entry.size) {
          throw new Error("Invalid size");
        }
        if (canVerifyCrc(entry)) {
          const verify = new CrcVerify(entry.crc, entry.size);
          verify.data(data);
        }
        return data;
      };
      this.openEntry = function(entry, callback, sync) {
        if (typeof entry === "string") {
          checkEntriesExist();
          entry = entries[entry];
          if (!entry) {
            return callback(new Error("Entry not found"));
          }
        }
        if (!entry.isFile) {
          return callback(new Error("Entry is not file"));
        }
        if (!fd) {
          return callback(new Error("Archive closed"));
        }
        const buffer = Buffer.alloc(consts.LOCHDR);
        new FsRead(fd, buffer, 0, buffer.length, entry.offset, (err) => {
          if (err) {
            return callback(err);
          }
          let readEx;
          try {
            entry.readDataHeader(buffer);
            if (entry.encrypted) {
              readEx = new Error("Entry encrypted");
            }
          } catch (ex) {
            readEx = ex;
          }
          callback(readEx, entry);
        }).read(sync);
      };
      function dataOffset(entry) {
        return entry.offset + consts.LOCHDR + entry.fnameLen + entry.extraLen;
      }
      function canVerifyCrc(entry) {
        return (entry.flags & 8) !== 8;
      }
      function extract(entry, outPath, callback) {
        that.stream(entry, (err, stm) => {
          if (err) {
            callback(err);
          } else {
            let fsStm, errThrown;
            stm.on("error", (err2) => {
              errThrown = err2;
              if (fsStm) {
                stm.unpipe(fsStm);
                fsStm.close(() => {
                  callback(err2);
                });
              }
            });
            fs.open(outPath, "w", (err2, fdFile) => {
              if (err2) {
                return callback(err2);
              }
              if (errThrown) {
                fs.close(fd, () => {
                  callback(errThrown);
                });
                return;
              }
              fsStm = fs.createWriteStream(outPath, { fd: fdFile });
              fsStm.on("finish", () => {
                that.emit("extract", entry, outPath);
                if (!errThrown) {
                  callback();
                }
              });
              stm.pipe(fsStm);
            });
          }
        });
      }
      function createDirectories(baseDir, dirs, callback) {
        if (!dirs.length) {
          return callback();
        }
        let dir = dirs.shift();
        dir = path3.join(baseDir, path3.join(...dir));
        fs.mkdir(dir, { recursive: true }, (err) => {
          if (err && err.code !== "EEXIST") {
            return callback(err);
          }
          createDirectories(baseDir, dirs, callback);
        });
      }
      function extractFiles(baseDir, baseRelPath, files, callback, extractedCount) {
        if (!files.length) {
          return callback(null, extractedCount);
        }
        const file = files.shift();
        const targetPath = path3.join(baseDir, file.name.replace(baseRelPath, ""));
        extract(file, targetPath, (err) => {
          if (err) {
            return callback(err, extractedCount);
          }
          extractFiles(baseDir, baseRelPath, files, callback, extractedCount + 1);
        });
      }
      this.extract = function(entry, outPath, callback) {
        let entryName = entry || "";
        if (typeof entry === "string") {
          entry = this.entry(entry);
          if (entry) {
            entryName = entry.name;
          } else {
            if (entryName.length && entryName[entryName.length - 1] !== "/") {
              entryName += "/";
            }
          }
        }
        if (!entry || entry.isDirectory) {
          const files = [], dirs = [], allDirs = {};
          for (const e in entries) {
            if (Object.prototype.hasOwnProperty.call(entries, e) && e.lastIndexOf(entryName, 0) === 0) {
              let relPath = e.replace(entryName, "");
              const childEntry = entries[e];
              if (childEntry.isFile) {
                files.push(childEntry);
                relPath = path3.dirname(relPath);
              }
              if (relPath && !allDirs[relPath] && relPath !== ".") {
                allDirs[relPath] = true;
                let parts = relPath.split("/").filter((f) => {
                  return f;
                });
                if (parts.length) {
                  dirs.push(parts);
                }
                while (parts.length > 1) {
                  parts = parts.slice(0, parts.length - 1);
                  const partsPath = parts.join("/");
                  if (allDirs[partsPath] || partsPath === ".") {
                    break;
                  }
                  allDirs[partsPath] = true;
                  dirs.push(parts);
                }
              }
            }
          }
          dirs.sort((x, y) => {
            return x.length - y.length;
          });
          if (dirs.length) {
            createDirectories(outPath, dirs, (err) => {
              if (err) {
                callback(err);
              } else {
                extractFiles(outPath, entryName, files, callback, 0);
              }
            });
          } else {
            extractFiles(outPath, entryName, files, callback, 0);
          }
        } else {
          fs.stat(outPath, (err, stat) => {
            if (stat && stat.isDirectory()) {
              extract(entry, path3.join(outPath, path3.basename(entry.name)), callback);
            } else {
              extract(entry, outPath, callback);
            }
          });
        }
      };
      this.close = function(callback) {
        if (closed || !fd) {
          closed = true;
          if (callback) {
            callback();
          }
        } else {
          closed = true;
          fs.close(fd, (err) => {
            fd = null;
            if (callback) {
              callback(err);
            }
          });
        }
      };
      const originalEmit = events.EventEmitter.prototype.emit;
      this.emit = function(...args) {
        if (!closed) {
          return originalEmit.call(this, ...args);
        }
      };
    };
    StreamZip.setFs = function(customFs) {
      fs = customFs;
    };
    StreamZip.debugLog = (...args) => {
      if (StreamZip.debug) {
        console.log(...args);
      }
    };
    util.inherits(StreamZip, events.EventEmitter);
    var propZip = Symbol("zip");
    StreamZip.async = class StreamZipAsync extends events.EventEmitter {
      constructor(config) {
        super();
        const zip = new StreamZip(config);
        zip.on("entry", (entry) => this.emit("entry", entry));
        zip.on("extract", (entry, outPath) => this.emit("extract", entry, outPath));
        this[propZip] = new Promise((resolve, reject) => {
          zip.on("ready", () => {
            zip.removeListener("error", reject);
            resolve(zip);
          });
          zip.on("error", reject);
        });
      }
      get entriesCount() {
        return this[propZip].then((zip) => zip.entriesCount);
      }
      get comment() {
        return this[propZip].then((zip) => zip.comment);
      }
      async entry(name) {
        const zip = await this[propZip];
        return zip.entry(name);
      }
      async entries() {
        const zip = await this[propZip];
        return zip.entries();
      }
      async stream(entry) {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.stream(entry, (err, stm) => {
            if (err) {
              reject(err);
            } else {
              resolve(stm);
            }
          });
        });
      }
      async entryData(entry) {
        const stm = await this.stream(entry);
        return new Promise((resolve, reject) => {
          const data = [];
          stm.on("data", (chunk) => data.push(chunk));
          stm.on("end", () => {
            resolve(Buffer.concat(data));
          });
          stm.on("error", (err) => {
            stm.removeAllListeners("end");
            reject(err);
          });
        });
      }
      async extract(entry, outPath) {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.extract(entry, outPath, (err, res) => {
            if (err) {
              reject(err);
            } else {
              resolve(res);
            }
          });
        });
      }
      async close() {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.close((err) => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
      }
    };
    var CentralDirectoryHeader = class {
      read(data) {
        if (data.length !== consts.ENDHDR || data.readUInt32LE(0) !== consts.ENDSIG) {
          throw new Error("Invalid central directory");
        }
        this.volumeEntries = data.readUInt16LE(consts.ENDSUB);
        this.totalEntries = data.readUInt16LE(consts.ENDTOT);
        this.size = data.readUInt32LE(consts.ENDSIZ);
        this.offset = data.readUInt32LE(consts.ENDOFF);
        this.commentLength = data.readUInt16LE(consts.ENDCOM);
      }
    };
    var CentralDirectoryLoc64Header = class {
      read(data) {
        if (data.length !== consts.ENDL64HDR || data.readUInt32LE(0) !== consts.ENDL64SIG) {
          throw new Error("Invalid zip64 central directory locator");
        }
        this.headerOffset = readUInt64LE(data, consts.ENDSUB);
      }
    };
    var CentralDirectoryZip64Header = class {
      read(data) {
        if (data.length !== consts.END64HDR || data.readUInt32LE(0) !== consts.END64SIG) {
          throw new Error("Invalid central directory");
        }
        this.volumeEntries = readUInt64LE(data, consts.END64SUB);
        this.totalEntries = readUInt64LE(data, consts.END64TOT);
        this.size = readUInt64LE(data, consts.END64SIZ);
        this.offset = readUInt64LE(data, consts.END64OFF);
      }
    };
    var ZipEntry = class {
      readHeader(data, offset) {
        if (data.length < offset + consts.CENHDR || data.readUInt32LE(offset) !== consts.CENSIG) {
          throw new Error("Invalid entry header");
        }
        this.verMade = data.readUInt16LE(offset + consts.CENVEM);
        this.version = data.readUInt16LE(offset + consts.CENVER);
        this.flags = data.readUInt16LE(offset + consts.CENFLG);
        this.method = data.readUInt16LE(offset + consts.CENHOW);
        const timebytes = data.readUInt16LE(offset + consts.CENTIM);
        const datebytes = data.readUInt16LE(offset + consts.CENTIM + 2);
        this.time = parseZipTime(timebytes, datebytes);
        this.crc = data.readUInt32LE(offset + consts.CENCRC);
        this.compressedSize = data.readUInt32LE(offset + consts.CENSIZ);
        this.size = data.readUInt32LE(offset + consts.CENLEN);
        this.fnameLen = data.readUInt16LE(offset + consts.CENNAM);
        this.extraLen = data.readUInt16LE(offset + consts.CENEXT);
        this.comLen = data.readUInt16LE(offset + consts.CENCOM);
        this.diskStart = data.readUInt16LE(offset + consts.CENDSK);
        this.inattr = data.readUInt16LE(offset + consts.CENATT);
        this.attr = data.readUInt32LE(offset + consts.CENATX);
        this.offset = data.readUInt32LE(offset + consts.CENOFF);
      }
      readDataHeader(data) {
        if (data.readUInt32LE(0) !== consts.LOCSIG) {
          throw new Error("Invalid local header");
        }
        this.version = data.readUInt16LE(consts.LOCVER);
        this.flags = data.readUInt16LE(consts.LOCFLG);
        this.method = data.readUInt16LE(consts.LOCHOW);
        const timebytes = data.readUInt16LE(consts.LOCTIM);
        const datebytes = data.readUInt16LE(consts.LOCTIM + 2);
        this.time = parseZipTime(timebytes, datebytes);
        this.crc = data.readUInt32LE(consts.LOCCRC) || this.crc;
        const compressedSize = data.readUInt32LE(consts.LOCSIZ);
        if (compressedSize && compressedSize !== consts.EF_ZIP64_OR_32) {
          this.compressedSize = compressedSize;
        }
        const size = data.readUInt32LE(consts.LOCLEN);
        if (size && size !== consts.EF_ZIP64_OR_32) {
          this.size = size;
        }
        this.fnameLen = data.readUInt16LE(consts.LOCNAM);
        this.extraLen = data.readUInt16LE(consts.LOCEXT);
      }
      read(data, offset, textDecoder) {
        const nameData = data.slice(offset, offset += this.fnameLen);
        this.name = textDecoder ? textDecoder.decode(new Uint8Array(nameData)) : nameData.toString("utf8");
        const lastChar = data[offset - 1];
        this.isDirectory = lastChar === 47 || lastChar === 92;
        if (this.extraLen) {
          this.readExtra(data, offset);
          offset += this.extraLen;
        }
        this.comment = this.comLen ? data.slice(offset, offset + this.comLen).toString() : null;
      }
      validateName() {
        if (/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name)) {
          throw new Error("Malicious entry: " + this.name);
        }
      }
      readExtra(data, offset) {
        let signature, size;
        const maxPos = offset + this.extraLen;
        while (offset < maxPos) {
          signature = data.readUInt16LE(offset);
          offset += 2;
          size = data.readUInt16LE(offset);
          offset += 2;
          if (consts.ID_ZIP64 === signature) {
            this.parseZip64Extra(data, offset, size);
          }
          offset += size;
        }
      }
      parseZip64Extra(data, offset, length) {
        if (length >= 8 && this.size === consts.EF_ZIP64_OR_32) {
          this.size = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 8 && this.compressedSize === consts.EF_ZIP64_OR_32) {
          this.compressedSize = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 8 && this.offset === consts.EF_ZIP64_OR_32) {
          this.offset = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 4 && this.diskStart === consts.EF_ZIP64_OR_16) {
          this.diskStart = data.readUInt32LE(offset);
        }
      }
      get encrypted() {
        return (this.flags & consts.FLG_ENTRY_ENC) === consts.FLG_ENTRY_ENC;
      }
      get isFile() {
        return !this.isDirectory;
      }
    };
    var FsRead = class {
      constructor(fd, buffer, offset, length, position, callback) {
        this.fd = fd;
        this.buffer = buffer;
        this.offset = offset;
        this.length = length;
        this.position = position;
        this.callback = callback;
        this.bytesRead = 0;
        this.waiting = false;
      }
      read(sync) {
        StreamZip.debugLog("read", this.position, this.bytesRead, this.length, this.offset);
        this.waiting = true;
        let err;
        if (sync) {
          let bytesRead = 0;
          try {
            bytesRead = fs.readSync(
              this.fd,
              this.buffer,
              this.offset + this.bytesRead,
              this.length - this.bytesRead,
              this.position + this.bytesRead
            );
          } catch (e) {
            err = e;
          }
          this.readCallback(sync, err, err ? bytesRead : null);
        } else {
          fs.read(
            this.fd,
            this.buffer,
            this.offset + this.bytesRead,
            this.length - this.bytesRead,
            this.position + this.bytesRead,
            this.readCallback.bind(this, sync)
          );
        }
      }
      readCallback(sync, err, bytesRead) {
        if (typeof bytesRead === "number") {
          this.bytesRead += bytesRead;
        }
        if (err || !bytesRead || this.bytesRead === this.length) {
          this.waiting = false;
          return this.callback(err, this.bytesRead);
        } else {
          this.read(sync);
        }
      }
    };
    var FileWindowBuffer = class {
      constructor(fd) {
        this.position = 0;
        this.buffer = Buffer.alloc(0);
        this.fd = fd;
        this.fsOp = null;
      }
      checkOp() {
        if (this.fsOp && this.fsOp.waiting) {
          throw new Error("Operation in progress");
        }
      }
      read(pos, length, callback) {
        this.checkOp();
        if (this.buffer.length < length) {
          this.buffer = Buffer.alloc(length);
        }
        this.position = pos;
        this.fsOp = new FsRead(this.fd, this.buffer, 0, length, this.position, callback).read();
      }
      expandLeft(length, callback) {
        this.checkOp();
        this.buffer = Buffer.concat([Buffer.alloc(length), this.buffer]);
        this.position -= length;
        if (this.position < 0) {
          this.position = 0;
        }
        this.fsOp = new FsRead(this.fd, this.buffer, 0, length, this.position, callback).read();
      }
      expandRight(length, callback) {
        this.checkOp();
        const offset = this.buffer.length;
        this.buffer = Buffer.concat([this.buffer, Buffer.alloc(length)]);
        this.fsOp = new FsRead(
          this.fd,
          this.buffer,
          offset,
          length,
          this.position + offset,
          callback
        ).read();
      }
      moveRight(length, callback, shift) {
        this.checkOp();
        if (shift) {
          this.buffer.copy(this.buffer, 0, shift);
        } else {
          shift = 0;
        }
        this.position += shift;
        this.fsOp = new FsRead(
          this.fd,
          this.buffer,
          this.buffer.length - shift,
          shift,
          this.position + this.buffer.length - shift,
          callback
        ).read();
      }
    };
    var EntryDataReaderStream = class extends stream.Readable {
      constructor(fd, offset, length) {
        super();
        this.fd = fd;
        this.offset = offset;
        this.length = length;
        this.pos = 0;
        this.readCallback = this.readCallback.bind(this);
      }
      _read(n) {
        const buffer = Buffer.alloc(Math.min(n, this.length - this.pos));
        if (buffer.length) {
          fs.read(this.fd, buffer, 0, buffer.length, this.offset + this.pos, this.readCallback);
        } else {
          this.push(null);
        }
      }
      readCallback(err, bytesRead, buffer) {
        this.pos += bytesRead;
        if (err) {
          this.emit("error", err);
          this.push(null);
        } else if (!bytesRead) {
          this.push(null);
        } else {
          if (bytesRead !== buffer.length) {
            buffer = buffer.slice(0, bytesRead);
          }
          this.push(buffer);
        }
      }
    };
    var EntryVerifyStream = class extends stream.Transform {
      constructor(baseStm, crc, size) {
        super();
        this.verify = new CrcVerify(crc, size);
        baseStm.on("error", (e) => {
          this.emit("error", e);
        });
      }
      _transform(data, encoding, callback) {
        let err;
        try {
          this.verify.data(data);
        } catch (e) {
          err = e;
        }
        callback(err, data);
      }
    };
    var CrcVerify = class _CrcVerify {
      constructor(crc, size) {
        this.crc = crc;
        this.size = size;
        this.state = {
          crc: ~0,
          size: 0
        };
      }
      data(data) {
        const crcTable = _CrcVerify.getCrcTable();
        let crc = this.state.crc;
        let off = 0;
        let len = data.length;
        while (--len >= 0) {
          crc = crcTable[(crc ^ data[off++]) & 255] ^ crc >>> 8;
        }
        this.state.crc = crc;
        this.state.size += data.length;
        if (this.state.size >= this.size) {
          const buf = Buffer.alloc(4);
          buf.writeInt32LE(~this.state.crc & 4294967295, 0);
          crc = buf.readUInt32LE(0);
          if (crc !== this.crc) {
            throw new Error("Invalid CRC");
          }
          if (this.state.size !== this.size) {
            throw new Error("Invalid size");
          }
        }
      }
      static getCrcTable() {
        let crcTable = _CrcVerify.crcTable;
        if (!crcTable) {
          _CrcVerify.crcTable = crcTable = [];
          const b = Buffer.alloc(4);
          for (let n = 0; n < 256; n++) {
            let c = n;
            for (let k = 8; --k >= 0; ) {
              if ((c & 1) !== 0) {
                c = 3988292384 ^ c >>> 1;
              } else {
                c = c >>> 1;
              }
            }
            if (c < 0) {
              b.writeInt32LE(c, 0);
              c = b.readUInt32LE(0);
            }
            crcTable[n] = c;
          }
        }
        return crcTable;
      }
    };
    function parseZipTime(timebytes, datebytes) {
      const timebits = toBits(timebytes, 16);
      const datebits = toBits(datebytes, 16);
      const mt = {
        h: parseInt(timebits.slice(0, 5).join(""), 2),
        m: parseInt(timebits.slice(5, 11).join(""), 2),
        s: parseInt(timebits.slice(11, 16).join(""), 2) * 2,
        Y: parseInt(datebits.slice(0, 7).join(""), 2) + 1980,
        M: parseInt(datebits.slice(7, 11).join(""), 2),
        D: parseInt(datebits.slice(11, 16).join(""), 2)
      };
      const dt_str = [mt.Y, mt.M, mt.D].join("-") + " " + [mt.h, mt.m, mt.s].join(":") + " GMT+0";
      return new Date(dt_str).getTime();
    }
    function toBits(dec, size) {
      let b = (dec >>> 0).toString(2);
      while (b.length < size) {
        b = "0" + b;
      }
      return b.split("");
    }
    function readUInt64LE(buffer, offset) {
      return buffer.readUInt32LE(offset + 4) * 4294967296 + buffer.readUInt32LE(offset);
    }
    module2.exports = StreamZip;
  }
});

// node_modules/graphemesplit/types.js
var require_types = __commonJS({
  "node_modules/graphemesplit/types.js"(exports2, module2) {
    module2.exports = {
      Other: 0,
      CR: 1 << 0,
      LF: 1 << 1,
      Control: 1 << 2,
      Extend: 1 << 3,
      ZWJ: 1 << 4,
      Regional_Indicator: 1 << 5,
      Prepend: 1 << 6,
      SpacingMark: 1 << 7,
      L: 1 << 8,
      V: 1 << 9,
      T: 1 << 10,
      LV: 1 << 11,
      LVT: 1 << 12,
      Extended_Pictographic: 1 << 13,
      InCB_Linker: 1 << 14,
      InCB_Consonant: 1 << 15,
      InCB_Extend: 1 << 16
    };
  }
});

// node_modules/graphemesplit/typeTrie.json
var require_typeTrie = __commonJS({
  "node_modules/graphemesplit/typeTrie.json"(exports2, module2) {
    module2.exports = { data: "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" };
  }
});

// node_modules/graphemesplit/extPict.json
var require_extPict = __commonJS({
  "node_modules/graphemesplit/extPict.json"(exports2, module2) {
    module2.exports = { data: "AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs=" };
  }
});

// node_modules/graphemesplit/inCB.json
var require_inCB = __commonJS({
  "node_modules/graphemesplit/inCB.json"(exports2, module2) {
    module2.exports = { data: "AAgOAAAAAABQfgAAAWMGnPntmm2IVUUYx+dyb2ezXXtBiSCLsKDIiKIIoYINciGwQHrRL2Ufii0qMsv7QVBuQkXhkmW5gksQRhRFSBslbkllHyy3L2XllkXrB3uhF0tQ0Kj+xzN3d3buzJx5PeesOw/8mDNvz/PMnOc8s/fs6asTcgu4A9wF+mjdV9kEa8FqsE5j/DPgeUX/JvASeBW8Bd4GO8CHYDcz7nPwFRgD4+An8Cf4AxwBx0G9QcjrYBt4p5HN/YDqGEF9F7gW3AC6wU1gCVgK5oDlYA8YBXvBGOgHD4FzwSo6fg24EDwBxsEB8Cu1N4ByI1gA/gbfo+0wyuO0vgW8DK5i+tN5tVOyMmUWrs9k6nNxPY/WL0B5Mb2+HOU14HrwY2Ny/CLUbwa3gzsZPT7ZGECnDvdiPQ+ARyhpWxPlWnr9JLfeAdS/43S8qNiTIdq3FeUb9HolOEj7h9H2LtgJPgHr0TZKx31Jy30C/T+g7aDCbpPiuj/fStrTNfQGioWIHr9z+z8iiAEfdg4zdo7Gex6JRCKRSCQSiUQikYrzL367HmLq8zV+yyYJIbOTzva5aJtH2y9CuYBebwdX4PoYyv107ELUe5PsPWBavzHJ3tMtFuhluTWnPxKJRCKRSCQy/TjQCKt/XX3y/+o6HPJs35XNszPO0WQf+FnQfsnpU+vLUN8MdgNyRtZ2Ncp7wBDYDn4D47MIOes0QpaADeDUWsYe5pql3k3IZd3iPp4H6bjnUI6Cf8B1PYQ0wWCPno5IJBKJnJx83eN2fi7NeYd0jKsvr+A7p3749KzkXd2Ap+9R7qfrflhz/ava45m2I7Rcw+lI3/WtAO+Bx5PsG6+nk+xbv7Q/fWe4gc7ZRPu3oNzK6Hktmfy2r036vc82On44yb4ZHKFzPkL5aZJ9f9hH7Y8y+nbheq9irWOpf0z/L8nUWPmL6TuK6/8Uuhpd6r3sRv8cbszZXZm981HOB5fS/itzdIlYyMzpTa85HYtRv422LTPQ/yjd+/SZudvCr1DcV5Iv6W+HFRXaB988Rte2ugJrHKTPW4vx5akK+MWzvoI++Sb9zvKFriy/m8wbwpxXQL/gDNs5Tb+zTPfiza6sHEa5A3w8jWLgM/j6BePvoOBcM33+v6Hj9zvuQ978lR5ihl/bedM0DvN4vwI+NOvy7/SbCkze51WVRfXaCaJEmdlSm+H4lKLsVE3Kvoe2950tZdcnu5T1rISQKuaHovZNZw26/aKxvn0tS6oUG1WWmbAPvtbGjzPU2WvgV4uoEc7PkQ77MhHoYu1K7YvOVhv7uuJ7/QpdLcKtX2ZPthc1A/tEcK/zbAW+/0rbnqRVAlPuk0gC5b5cv1Q+BbIp8kGnX2VjQmT7bLm/Hfp1RfZ3kAdpGZI3h2iMnZCC47ftj+351WJ06PTLxk6I7OxxWH8rd4RCRHHuKC1DbOaIdJyQAn4vuPpqS8d5HVJUfy+p2lXjihIbuya/L2wowkae3TJEZFfmjywnBshRSl9s9Je1v7z9kL7bPE9Fi+xMlf09Z3Ne2KxNFu8qf2x02ojMD9McrpOLivTX9j6F9l/HfmgbotKnfp9nJCHqffFho0hcxWRNhHTarUI8h94PGx28Pp2xrrZ8SehcFToPhvabvbZ5JkXx4etZd4lZfn0+pIz8oMoRunpsbPgUUZ4NaYu1qcr9vC+2MWsa8yHOPlOxfU7L9Fnkg0t+0dGdZ9O38PGr6nPxwzRWXUX0/JmSN09kU+WPyD8f4jM+ioo7lW1femzuv0iXqi5r8yGq/fBts+gca/M8+orLvOc0RJ7P88c0J/m2L/OFbzfVa5LrXc4WH2NsbJrulcsafa+T99lFVwgpwr7JMy47U3T0FiFF56uQuss4j3gfbOb68sUlB6vOjaLPtrbdkLp9nZmqffcpqnurk4NU+oq8rzIx2Xddv8tel+peydar+htBpIufH0J4O2XFCCu2z0GZayjyDMzLS6Z+yGK1Sjmk7RNbtq91zrXQfumeOb58MdGTtxdlngmyc09nTlmxqfMcmvij67OJXV3R3dOQsZznh6qfkOL80M3BuvtW1B7yY2R+FLG/MsnzVXd+aF9VuUk1xzWudPwy1edzz1x8t9UfyndbHTY2yxTdHOCa92zj3CR+Te6fjzX5Ftf9M/E1VC4yzVehROa77/h09cmXb6Zxm2c3pPjSH9bn/wE=" };
  }
});

// node_modules/tiny-inflate/index.js
var require_tiny_inflate = __commonJS({
  "node_modules/tiny-inflate/index.js"(exports2, module2) {
    var TINF_OK = 0;
    var TINF_DATA_ERROR = -3;
    function Tree() {
      this.table = new Uint16Array(16);
      this.trans = new Uint16Array(288);
    }
    function Data(source, dest) {
      this.source = source;
      this.sourceIndex = 0;
      this.tag = 0;
      this.bitcount = 0;
      this.dest = dest;
      this.destLen = 0;
      this.ltree = new Tree();
      this.dtree = new Tree();
    }
    var sltree = new Tree();
    var sdtree = new Tree();
    var length_bits = new Uint8Array(30);
    var length_base = new Uint16Array(30);
    var dist_bits = new Uint8Array(30);
    var dist_base = new Uint16Array(30);
    var clcidx = new Uint8Array([
      16,
      17,
      18,
      0,
      8,
      7,
      9,
      6,
      10,
      5,
      11,
      4,
      12,
      3,
      13,
      2,
      14,
      1,
      15
    ]);
    var code_tree = new Tree();
    var lengths = new Uint8Array(288 + 32);
    function tinf_build_bits_base(bits, base, delta, first) {
      var i, sum;
      for (i = 0; i < delta; ++i) bits[i] = 0;
      for (i = 0; i < 30 - delta; ++i) bits[i + delta] = i / delta | 0;
      for (sum = first, i = 0; i < 30; ++i) {
        base[i] = sum;
        sum += 1 << bits[i];
      }
    }
    function tinf_build_fixed_trees(lt, dt) {
      var i;
      for (i = 0; i < 7; ++i) lt.table[i] = 0;
      lt.table[7] = 24;
      lt.table[8] = 152;
      lt.table[9] = 112;
      for (i = 0; i < 24; ++i) lt.trans[i] = 256 + i;
      for (i = 0; i < 144; ++i) lt.trans[24 + i] = i;
      for (i = 0; i < 8; ++i) lt.trans[24 + 144 + i] = 280 + i;
      for (i = 0; i < 112; ++i) lt.trans[24 + 144 + 8 + i] = 144 + i;
      for (i = 0; i < 5; ++i) dt.table[i] = 0;
      dt.table[5] = 32;
      for (i = 0; i < 32; ++i) dt.trans[i] = i;
    }
    var offs = new Uint16Array(16);
    function tinf_build_tree(t, lengths2, off, num) {
      var i, sum;
      for (i = 0; i < 16; ++i) t.table[i] = 0;
      for (i = 0; i < num; ++i) t.table[lengths2[off + i]]++;
      t.table[0] = 0;
      for (sum = 0, i = 0; i < 16; ++i) {
        offs[i] = sum;
        sum += t.table[i];
      }
      for (i = 0; i < num; ++i) {
        if (lengths2[off + i]) t.trans[offs[lengths2[off + i]]++] = i;
      }
    }
    function tinf_getbit(d) {
      if (!d.bitcount--) {
        d.tag = d.source[d.sourceIndex++];
        d.bitcount = 7;
      }
      var bit = d.tag & 1;
      d.tag >>>= 1;
      return bit;
    }
    function tinf_read_bits(d, num, base) {
      if (!num)
        return base;
      while (d.bitcount < 24) {
        d.tag |= d.source[d.sourceIndex++] << d.bitcount;
        d.bitcount += 8;
      }
      var val = d.tag & 65535 >>> 16 - num;
      d.tag >>>= num;
      d.bitcount -= num;
      return val + base;
    }
    function tinf_decode_symbol(d, t) {
      while (d.bitcount < 24) {
        d.tag |= d.source[d.sourceIndex++] << d.bitcount;
        d.bitcount += 8;
      }
      var sum = 0, cur = 0, len = 0;
      var tag = d.tag;
      do {
        cur = 2 * cur + (tag & 1);
        tag >>>= 1;
        ++len;
        sum += t.table[len];
        cur -= t.table[len];
      } while (cur >= 0);
      d.tag = tag;
      d.bitcount -= len;
      return t.trans[sum + cur];
    }
    function tinf_decode_trees(d, lt, dt) {
      var hlit, hdist, hclen;
      var i, num, length;
      hlit = tinf_read_bits(d, 5, 257);
      hdist = tinf_read_bits(d, 5, 1);
      hclen = tinf_read_bits(d, 4, 4);
      for (i = 0; i < 19; ++i) lengths[i] = 0;
      for (i = 0; i < hclen; ++i) {
        var clen = tinf_read_bits(d, 3, 0);
        lengths[clcidx[i]] = clen;
      }
      tinf_build_tree(code_tree, lengths, 0, 19);
      for (num = 0; num < hlit + hdist; ) {
        var sym = tinf_decode_symbol(d, code_tree);
        switch (sym) {
          case 16:
            var prev = lengths[num - 1];
            for (length = tinf_read_bits(d, 2, 3); length; --length) {
              lengths[num++] = prev;
            }
            break;
          case 17:
            for (length = tinf_read_bits(d, 3, 3); length; --length) {
              lengths[num++] = 0;
            }
            break;
          case 18:
            for (length = tinf_read_bits(d, 7, 11); length; --length) {
              lengths[num++] = 0;
            }
            break;
          default:
            lengths[num++] = sym;
            break;
        }
      }
      tinf_build_tree(lt, lengths, 0, hlit);
      tinf_build_tree(dt, lengths, hlit, hdist);
    }
    function tinf_inflate_block_data(d, lt, dt) {
      while (1) {
        var sym = tinf_decode_symbol(d, lt);
        if (sym === 256) {
          return TINF_OK;
        }
        if (sym < 256) {
          d.dest[d.destLen++] = sym;
        } else {
          var length, dist, offs2;
          var i;
          sym -= 257;
          length = tinf_read_bits(d, length_bits[sym], length_base[sym]);
          dist = tinf_decode_symbol(d, dt);
          offs2 = d.destLen - tinf_read_bits(d, dist_bits[dist], dist_base[dist]);
          for (i = offs2; i < offs2 + length; ++i) {
            d.dest[d.destLen++] = d.dest[i];
          }
        }
      }
    }
    function tinf_inflate_uncompressed_block(d) {
      var length, invlength;
      var i;
      while (d.bitcount > 8) {
        d.sourceIndex--;
        d.bitcount -= 8;
      }
      length = d.source[d.sourceIndex + 1];
      length = 256 * length + d.source[d.sourceIndex];
      invlength = d.source[d.sourceIndex + 3];
      invlength = 256 * invlength + d.source[d.sourceIndex + 2];
      if (length !== (~invlength & 65535))
        return TINF_DATA_ERROR;
      d.sourceIndex += 4;
      for (i = length; i; --i)
        d.dest[d.destLen++] = d.source[d.sourceIndex++];
      d.bitcount = 0;
      return TINF_OK;
    }
    function tinf_uncompress(source, dest) {
      var d = new Data(source, dest);
      var bfinal, btype, res;
      do {
        bfinal = tinf_getbit(d);
        btype = tinf_read_bits(d, 2, 0);
        switch (btype) {
          case 0:
            res = tinf_inflate_uncompressed_block(d);
            break;
          case 1:
            res = tinf_inflate_block_data(d, sltree, sdtree);
            break;
          case 2:
            tinf_decode_trees(d, d.ltree, d.dtree);
            res = tinf_inflate_block_data(d, d.ltree, d.dtree);
            break;
          default:
            res = TINF_DATA_ERROR;
        }
        if (res !== TINF_OK)
          throw new Error("Data error");
      } while (!bfinal);
      if (d.destLen < d.dest.length) {
        if (typeof d.dest.slice === "function")
          return d.dest.slice(0, d.destLen);
        else
          return d.dest.subarray(0, d.destLen);
      }
      return d.dest;
    }
    tinf_build_fixed_trees(sltree, sdtree);
    tinf_build_bits_base(length_bits, length_base, 4, 3);
    tinf_build_bits_base(dist_bits, dist_base, 2, 1);
    length_bits[28] = 0;
    length_base[28] = 258;
    module2.exports = tinf_uncompress;
  }
});

// node_modules/unicode-trie/swap.js
var require_swap = __commonJS({
  "node_modules/unicode-trie/swap.js"(exports2, module2) {
    var isBigEndian = new Uint8Array(new Uint32Array([305419896]).buffer)[0] === 18;
    var swap = (b, n, m) => {
      let i = b[n];
      b[n] = b[m];
      b[m] = i;
    };
    var swap32 = (array) => {
      const len = array.length;
      for (let i = 0; i < len; i += 4) {
        swap(array, i, i + 3);
        swap(array, i + 1, i + 2);
      }
    };
    var swap32LE = (array) => {
      if (isBigEndian) {
        swap32(array);
      }
    };
    module2.exports = {
      swap32LE
    };
  }
});

// node_modules/unicode-trie/index.js
var require_unicode_trie = __commonJS({
  "node_modules/unicode-trie/index.js"(exports2, module2) {
    var inflate = require_tiny_inflate();
    var { swap32LE } = require_swap();
    var SHIFT_1 = 6 + 5;
    var SHIFT_2 = 5;
    var SHIFT_1_2 = SHIFT_1 - SHIFT_2;
    var OMITTED_BMP_INDEX_1_LENGTH = 65536 >> SHIFT_1;
    var INDEX_2_BLOCK_LENGTH = 1 << SHIFT_1_2;
    var INDEX_2_MASK = INDEX_2_BLOCK_LENGTH - 1;
    var INDEX_SHIFT = 2;
    var DATA_BLOCK_LENGTH = 1 << SHIFT_2;
    var DATA_MASK = DATA_BLOCK_LENGTH - 1;
    var LSCP_INDEX_2_OFFSET = 65536 >> SHIFT_2;
    var LSCP_INDEX_2_LENGTH = 1024 >> SHIFT_2;
    var INDEX_2_BMP_LENGTH = LSCP_INDEX_2_OFFSET + LSCP_INDEX_2_LENGTH;
    var UTF8_2B_INDEX_2_OFFSET = INDEX_2_BMP_LENGTH;
    var UTF8_2B_INDEX_2_LENGTH = 2048 >> 6;
    var INDEX_1_OFFSET = UTF8_2B_INDEX_2_OFFSET + UTF8_2B_INDEX_2_LENGTH;
    var DATA_GRANULARITY = 1 << INDEX_SHIFT;
    var UnicodeTrie = class {
      constructor(data) {
        const isBuffer = typeof data.readUInt32BE === "function" && typeof data.slice === "function";
        if (isBuffer || data instanceof Uint8Array) {
          let uncompressedLength;
          if (isBuffer) {
            this.highStart = data.readUInt32LE(0);
            this.errorValue = data.readUInt32LE(4);
            uncompressedLength = data.readUInt32LE(8);
            data = data.slice(12);
          } else {
            const view = new DataView(data.buffer);
            this.highStart = view.getUint32(0, true);
            this.errorValue = view.getUint32(4, true);
            uncompressedLength = view.getUint32(8, true);
            data = data.subarray(12);
          }
          data = inflate(data, new Uint8Array(uncompressedLength));
          data = inflate(data, new Uint8Array(uncompressedLength));
          swap32LE(data);
          this.data = new Uint32Array(data.buffer);
        } else {
          ({ data: this.data, highStart: this.highStart, errorValue: this.errorValue } = data);
        }
      }
      get(codePoint) {
        let index;
        if (codePoint < 0 || codePoint > 1114111) {
          return this.errorValue;
        }
        if (codePoint < 55296 || codePoint > 56319 && codePoint <= 65535) {
          index = (this.data[codePoint >> SHIFT_2] << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        if (codePoint <= 65535) {
          index = (this.data[LSCP_INDEX_2_OFFSET + (codePoint - 55296 >> SHIFT_2)] << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        if (codePoint < this.highStart) {
          index = this.data[INDEX_1_OFFSET - OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> SHIFT_1)];
          index = this.data[index + (codePoint >> SHIFT_2 & INDEX_2_MASK)];
          index = (index << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        return this.data[this.data.length - DATA_GRANULARITY];
      }
    };
    module2.exports = UnicodeTrie;
  }
});

// node_modules/js-base64/base64.js
var require_base64 = __commonJS({
  "node_modules/js-base64/base64.js"(exports2, module2) {
    (function(global2, factory) {
      typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (
        // cf. https://github.com/dankogai/js-base64/issues/119
        (function() {
          var _Base64 = global2.Base64;
          var gBase64 = factory();
          gBase64.noConflict = function() {
            global2.Base64 = _Base64;
            return gBase64;
          };
          if (global2.Meteor) {
            Base64 = gBase64;
          }
          global2.Base64 = gBase64;
        })()
      );
    })(typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : exports2, function() {
      "use strict";
      var version = "3.7.7";
      var VERSION = version;
      var _hasBuffer = typeof Buffer === "function";
      var _TD = typeof TextDecoder === "function" ? new TextDecoder() : void 0;
      var _TE = typeof TextEncoder === "function" ? new TextEncoder() : void 0;
      var b64ch = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      var b64chs = Array.prototype.slice.call(b64ch);
      var b64tab = (function(a) {
        var tab = {};
        a.forEach(function(c, i) {
          return tab[c] = i;
        });
        return tab;
      })(b64chs);
      var b64re = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;
      var _fromCC = String.fromCharCode.bind(String);
      var _U8Afrom = typeof Uint8Array.from === "function" ? Uint8Array.from.bind(Uint8Array) : function(it) {
        return new Uint8Array(Array.prototype.slice.call(it, 0));
      };
      var _mkUriSafe = function(src) {
        return src.replace(/=/g, "").replace(/[+\/]/g, function(m0) {
          return m0 == "+" ? "-" : "_";
        });
      };
      var _tidyB64 = function(s) {
        return s.replace(/[^A-Za-z0-9\+\/]/g, "");
      };
      var btoaPolyfill = function(bin) {
        var u32, c0, c1, c2, asc = "";
        var pad = bin.length % 3;
        for (var i = 0; i < bin.length; ) {
          if ((c0 = bin.charCodeAt(i++)) > 255 || (c1 = bin.charCodeAt(i++)) > 255 || (c2 = bin.charCodeAt(i++)) > 255)
            throw new TypeError("invalid character found");
          u32 = c0 << 16 | c1 << 8 | c2;
          asc += b64chs[u32 >> 18 & 63] + b64chs[u32 >> 12 & 63] + b64chs[u32 >> 6 & 63] + b64chs[u32 & 63];
        }
        return pad ? asc.slice(0, pad - 3) + "===".substring(pad) : asc;
      };
      var _btoa = typeof btoa === "function" ? function(bin) {
        return btoa(bin);
      } : _hasBuffer ? function(bin) {
        return Buffer.from(bin, "binary").toString("base64");
      } : btoaPolyfill;
      var _fromUint8Array = _hasBuffer ? function(u8a) {
        return Buffer.from(u8a).toString("base64");
      } : function(u8a) {
        var maxargs = 4096;
        var strs = [];
        for (var i = 0, l = u8a.length; i < l; i += maxargs) {
          strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));
        }
        return _btoa(strs.join(""));
      };
      var fromUint8Array = function(u8a, urlsafe) {
        if (urlsafe === void 0) {
          urlsafe = false;
        }
        return urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);
      };
      var cb_utob = function(c) {
        if (c.length < 2) {
          var cc = c.charCodeAt(0);
          return cc < 128 ? c : cc < 2048 ? _fromCC(192 | cc >>> 6) + _fromCC(128 | cc & 63) : _fromCC(224 | cc >>> 12 & 15) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
        } else {
          var cc = 65536 + (c.charCodeAt(0) - 55296) * 1024 + (c.charCodeAt(1) - 56320);
          return _fromCC(240 | cc >>> 18 & 7) + _fromCC(128 | cc >>> 12 & 63) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
        }
      };
      var re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;
      var utob = function(u) {
        return u.replace(re_utob, cb_utob);
      };
      var _encode = _hasBuffer ? function(s) {
        return Buffer.from(s, "utf8").toString("base64");
      } : _TE ? function(s) {
        return _fromUint8Array(_TE.encode(s));
      } : function(s) {
        return _btoa(utob(s));
      };
      var encode = function(src, urlsafe) {
        if (urlsafe === void 0) {
          urlsafe = false;
        }
        return urlsafe ? _mkUriSafe(_encode(src)) : _encode(src);
      };
      var encodeURI2 = function(src) {
        return encode(src, true);
      };
      var re_btou = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;
      var cb_btou = function(cccc) {
        switch (cccc.length) {
          case 4:
            var cp = (7 & cccc.charCodeAt(0)) << 18 | (63 & cccc.charCodeAt(1)) << 12 | (63 & cccc.charCodeAt(2)) << 6 | 63 & cccc.charCodeAt(3), offset = cp - 65536;
            return _fromCC((offset >>> 10) + 55296) + _fromCC((offset & 1023) + 56320);
          case 3:
            return _fromCC((15 & cccc.charCodeAt(0)) << 12 | (63 & cccc.charCodeAt(1)) << 6 | 63 & cccc.charCodeAt(2));
          default:
            return _fromCC((31 & cccc.charCodeAt(0)) << 6 | 63 & cccc.charCodeAt(1));
        }
      };
      var btou = function(b) {
        return b.replace(re_btou, cb_btou);
      };
      var atobPolyfill = function(asc) {
        asc = asc.replace(/\s+/g, "");
        if (!b64re.test(asc))
          throw new TypeError("malformed base64.");
        asc += "==".slice(2 - (asc.length & 3));
        var u24, bin = "", r1, r2;
        for (var i = 0; i < asc.length; ) {
          u24 = b64tab[asc.charAt(i++)] << 18 | b64tab[asc.charAt(i++)] << 12 | (r1 = b64tab[asc.charAt(i++)]) << 6 | (r2 = b64tab[asc.charAt(i++)]);
          bin += r1 === 64 ? _fromCC(u24 >> 16 & 255) : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255) : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);
        }
        return bin;
      };
      var _atob = typeof atob === "function" ? function(asc) {
        return atob(_tidyB64(asc));
      } : _hasBuffer ? function(asc) {
        return Buffer.from(asc, "base64").toString("binary");
      } : atobPolyfill;
      var _toUint8Array = _hasBuffer ? function(a) {
        return _U8Afrom(Buffer.from(a, "base64"));
      } : function(a) {
        return _U8Afrom(_atob(a).split("").map(function(c) {
          return c.charCodeAt(0);
        }));
      };
      var toUint8Array = function(a) {
        return _toUint8Array(_unURI(a));
      };
      var _decode = _hasBuffer ? function(a) {
        return Buffer.from(a, "base64").toString("utf8");
      } : _TD ? function(a) {
        return _TD.decode(_toUint8Array(a));
      } : function(a) {
        return btou(_atob(a));
      };
      var _unURI = function(a) {
        return _tidyB64(a.replace(/[-_]/g, function(m0) {
          return m0 == "-" ? "+" : "/";
        }));
      };
      var decode = function(src) {
        return _decode(_unURI(src));
      };
      var isValid = function(src) {
        if (typeof src !== "string")
          return false;
        var s = src.replace(/\s+/g, "").replace(/={0,2}$/, "");
        return !/[^\s0-9a-zA-Z\+/]/.test(s) || !/[^\s0-9a-zA-Z\-_]/.test(s);
      };
      var _noEnum = function(v) {
        return {
          value: v,
          enumerable: false,
          writable: true,
          configurable: true
        };
      };
      var extendString = function() {
        var _add = function(name, body) {
          return Object.defineProperty(String.prototype, name, _noEnum(body));
        };
        _add("fromBase64", function() {
          return decode(this);
        });
        _add("toBase64", function(urlsafe) {
          return encode(this, urlsafe);
        });
        _add("toBase64URI", function() {
          return encode(this, true);
        });
        _add("toBase64URL", function() {
          return encode(this, true);
        });
        _add("toUint8Array", function() {
          return toUint8Array(this);
        });
      };
      var extendUint8Array = function() {
        var _add = function(name, body) {
          return Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));
        };
        _add("toBase64", function(urlsafe) {
          return fromUint8Array(this, urlsafe);
        });
        _add("toBase64URI", function() {
          return fromUint8Array(this, true);
        });
        _add("toBase64URL", function() {
          return fromUint8Array(this, true);
        });
      };
      var extendBuiltins = function() {
        extendString();
        extendUint8Array();
      };
      var gBase64 = {
        version,
        VERSION,
        atob: _atob,
        atobPolyfill,
        btoa: _btoa,
        btoaPolyfill,
        fromBase64: decode,
        toBase64: encode,
        encode,
        encodeURI: encodeURI2,
        encodeURL: encodeURI2,
        utob,
        btou,
        decode,
        isValid,
        fromUint8Array,
        toUint8Array,
        extendString,
        extendUint8Array,
        extendBuiltins
      };
      gBase64.Base64 = {};
      Object.keys(gBase64).forEach(function(k) {
        return gBase64.Base64[k] = gBase64[k];
      });
      return gBase64;
    });
  }
});

// node_modules/graphemesplit/index.js
var require_graphemesplit = __commonJS({
  "node_modules/graphemesplit/index.js"(exports2, module2) {
    var types = require_types();
    var typeTrieData = require_typeTrie().data;
    var extPictData = require_extPict().data;
    var inCBData = require_inCB().data;
    var UnicodeTrie = require_unicode_trie();
    var Base642 = require_base64().Base64;
    var typeTrie = new UnicodeTrie(Base642.toUint8Array(typeTrieData));
    var extPict = new UnicodeTrie(Base642.toUint8Array(extPictData));
    var inCB = new UnicodeTrie(Base642.toUint8Array(inCBData));
    function is(type, bit) {
      return (type & bit) !== 0;
    }
    function nextGraphemeClusterSize(s, ts, start) {
      const L = ts.length;
      for (let i = start; i + 1 < L; i++) {
        const curr = ts[i + 0];
        const next = ts[i + 1];
        switch (s.gb9c) {
          case 0:
            if (is(curr, types.InCB_Consonant)) s.gb9c = 1;
            break;
          case 1:
            if (is(curr, types.InCB_Extend)) s.gb9c = 1;
            else if (is(curr, types.InCB_Linker)) s.gb9c = 2;
            else s.gb9c = is(curr, types.InCB_Consonant) ? 1 : 0;
            break;
          case 2:
            if (is(curr, types.InCB_Extend | types.InCB_Linker)) s.gb9c = 2;
            else s.gb9c = is(curr, types.InCB_Consonant) ? 1 : 0;
            break;
        }
        switch (s.gb11) {
          case 0:
            if (is(curr, types.Extended_Pictographic)) s.gb11 = 1;
            break;
          case 1:
            if (is(curr, types.Extend)) s.gb11 = 1;
            else if (is(curr, types.ZWJ)) s.gb11 = 2;
            else s.gb11 = is(curr, types.Extended_Pictographic) ? 1 : 0;
            break;
          case 2:
            s.gb11 = is(curr, types.Extended_Pictographic) ? 1 : 0;
            break;
        }
        switch (s.gb12) {
          case 0:
            if (is(curr, types.Regional_Indicator)) s.gb12 = 1;
            else s.gb12 = -1;
            break;
          case 1:
            if (is(curr, types.Regional_Indicator)) s.gb12 = 0;
            else s.gb12 = -1;
            break;
        }
        switch (s.gb13) {
          case 0:
            if (!is(curr, types.Regional_Indicator)) s.gb13 = 1;
            break;
          case 1:
            if (is(curr, types.Regional_Indicator)) s.gb13 = 2;
            else s.gb13 = 1;
            break;
          case 2:
            s.gb13 = 1;
            break;
        }
        if (is(curr, types.CR) && is(next, types.LF)) {
          continue;
        }
        if (is(curr, types.Control | types.CR | types.LF)) {
          return i + 1 - start;
        }
        if (is(next, types.Control | types.CR | types.LF)) {
          return i + 1 - start;
        }
        if (is(curr, types.L) && is(next, types.L | types.V | types.LV | types.LVT)) {
          continue;
        }
        if (is(curr, types.LV | types.V) && is(next, types.V | types.T)) {
          continue;
        }
        if (is(curr, types.LVT | types.T) && is(next, types.T)) {
          continue;
        }
        if (is(next, types.Extend | types.ZWJ)) {
          continue;
        }
        if (is(next, types.SpacingMark)) {
          continue;
        }
        if (is(curr, types.Prepend)) {
          continue;
        }
        if (is(next, types.InCB_Consonant) && s.gb9c === 2) {
          continue;
        }
        if (is(next, types.Extended_Pictographic) && s.gb11 === 2) {
          continue;
        }
        if (is(next, types.Regional_Indicator) && s.gb12 === 1) {
          continue;
        }
        if (is(next, types.Regional_Indicator) && s.gb13 === 2) {
          continue;
        }
        return i + 1 - start;
      }
      return L - start;
    }
    module2.exports = function split2(str) {
      const graphemeClusters = [];
      const map = [0];
      const ts = [];
      for (let i = 0; i < str.length; ) {
        const code = str.codePointAt(i);
        ts.push(typeTrie.get(code) | extPict.get(code) | inCB.get(code));
        i += code > 65535 ? 2 : 1;
        map.push(i);
      }
      const s = {
        gb9c: 0,
        gb11: 0,
        gb12: 0,
        gb13: 0
      };
      for (let offset = 0; offset < ts.length; ) {
        const size = nextGraphemeClusterSize(s, ts, offset);
        const start = map[offset];
        const end = map[offset + size];
        graphemeClusters.push(str.slice(start, end));
        offset += size;
      }
      return graphemeClusters;
    };
  }
});

// src/authenticator.tsx
var authenticator_exports = {};
__export(authenticator_exports, {
  default: () => authenticator_default
});
module.exports = __toCommonJS(authenticator_exports);

// node_modules/otpauth/dist/otpauth.node.mjs
var crypto = __toESM(require("node:crypto"), 1);
var uintDecode = (num) => {
  const buf = new ArrayBuffer(8);
  const arr = new Uint8Array(buf);
  let acc = num;
  for (let i = 7; i >= 0; i--) {
    if (acc === 0) break;
    arr[i] = acc & 255;
    acc -= arr[i];
    acc /= 256;
  }
  return arr;
};
var globalScope = (() => {
  if (typeof globalThis === "object") return globalThis;
  else {
    Object.defineProperty(Object.prototype, "__GLOBALTHIS__", {
      get() {
        return this;
      },
      configurable: true
    });
    try {
      if (typeof __GLOBALTHIS__ !== "undefined") return __GLOBALTHIS__;
    } finally {
      delete Object.prototype.__GLOBALTHIS__;
    }
  }
  if (typeof self !== "undefined") return self;
  else if (typeof window !== "undefined") return window;
  else if (typeof global !== "undefined") return global;
  return void 0;
})();
var canonicalizeAlgorithm = (algorithm) => {
  switch (true) {
    case /^(?:SHA-?1|SSL3-SHA1)$/i.test(algorithm):
      return "SHA1";
    case /^SHA(?:2?-)?224$/i.test(algorithm):
      return "SHA224";
    case /^SHA(?:2?-)?256$/i.test(algorithm):
      return "SHA256";
    case /^SHA(?:2?-)?384$/i.test(algorithm):
      return "SHA384";
    case /^SHA(?:2?-)?512$/i.test(algorithm):
      return "SHA512";
    case /^SHA3-224$/i.test(algorithm):
      return "SHA3-224";
    case /^SHA3-256$/i.test(algorithm):
      return "SHA3-256";
    case /^SHA3-384$/i.test(algorithm):
      return "SHA3-384";
    case /^SHA3-512$/i.test(algorithm):
      return "SHA3-512";
    default:
      throw new TypeError(`Unknown hash algorithm: ${algorithm}`);
  }
};
var hmacDigest = (algorithm, key, message) => {
  if (crypto?.createHmac) {
    const hmac = crypto.createHmac(algorithm, globalScope.Buffer.from(key));
    hmac.update(globalScope.Buffer.from(message));
    return hmac.digest();
  } else {
    throw new Error("Missing HMAC function");
  }
};
var ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";
var base32Decode = (str) => {
  str = str.replace(/ /g, "");
  let end = str.length;
  while (str[end - 1] === "=") --end;
  str = (end < str.length ? str.substring(0, end) : str).toUpperCase();
  const buf = new ArrayBuffer(str.length * 5 / 8 | 0);
  const arr = new Uint8Array(buf);
  let bits = 0;
  let value = 0;
  let index = 0;
  for (let i = 0; i < str.length; i++) {
    const idx = ALPHABET.indexOf(str[i]);
    if (idx === -1) throw new TypeError(`Invalid character found: ${str[i]}`);
    value = value << 5 | idx;
    bits += 5;
    if (bits >= 8) {
      bits -= 8;
      arr[index++] = value >>> bits;
    }
  }
  return arr;
};
var base32Encode = (arr) => {
  let bits = 0;
  let value = 0;
  let str = "";
  for (let i = 0; i < arr.length; i++) {
    value = value << 8 | arr[i];
    bits += 8;
    while (bits >= 5) {
      str += ALPHABET[value >>> bits - 5 & 31];
      bits -= 5;
    }
  }
  if (bits > 0) {
    str += ALPHABET[value << 5 - bits & 31];
  }
  return str;
};
var hexDecode = (str) => {
  str = str.replace(/ /g, "");
  const buf = new ArrayBuffer(str.length / 2);
  const arr = new Uint8Array(buf);
  for (let i = 0; i < str.length; i += 2) {
    arr[i / 2] = parseInt(str.substring(i, i + 2), 16);
  }
  return arr;
};
var hexEncode = (arr) => {
  let str = "";
  for (let i = 0; i < arr.length; i++) {
    const hex = arr[i].toString(16);
    if (hex.length === 1) str += "0";
    str += hex;
  }
  return str.toUpperCase();
};
var latin1Decode = (str) => {
  const buf = new ArrayBuffer(str.length);
  const arr = new Uint8Array(buf);
  for (let i = 0; i < str.length; i++) {
    arr[i] = str.charCodeAt(i) & 255;
  }
  return arr;
};
var latin1Encode = (arr) => {
  let str = "";
  for (let i = 0; i < arr.length; i++) {
    str += String.fromCharCode(arr[i]);
  }
  return str;
};
var ENCODER = globalScope.TextEncoder ? new globalScope.TextEncoder() : null;
var DECODER = globalScope.TextDecoder ? new globalScope.TextDecoder() : null;
var utf8Decode = (str) => {
  if (!ENCODER) {
    throw new Error("Encoding API not available");
  }
  return ENCODER.encode(str);
};
var utf8Encode = (arr) => {
  if (!DECODER) {
    throw new Error("Encoding API not available");
  }
  return DECODER.decode(arr);
};
var randomBytes2 = (size) => {
  if (crypto?.randomBytes) {
    return crypto.randomBytes(size);
  } else if (globalScope.crypto?.getRandomValues) {
    return globalScope.crypto.getRandomValues(new Uint8Array(size));
  } else {
    throw new Error("Cryptography API not available");
  }
};
var Secret = class _Secret {
  /**
  * Converts a Latin-1 string to a Secret object.
  * @param {string} str Latin-1 string.
  * @returns {Secret} Secret object.
  */
  static fromLatin1(str) {
    return new _Secret({
      buffer: latin1Decode(str).buffer
    });
  }
  /**
  * Converts an UTF-8 string to a Secret object.
  * @param {string} str UTF-8 string.
  * @returns {Secret} Secret object.
  */
  static fromUTF8(str) {
    return new _Secret({
      buffer: utf8Decode(str).buffer
    });
  }
  /**
  * Converts a base32 string to a Secret object.
  * @param {string} str Base32 string.
  * @returns {Secret} Secret object.
  */
  static fromBase32(str) {
    return new _Secret({
      buffer: base32Decode(str).buffer
    });
  }
  /**
  * Converts a hexadecimal string to a Secret object.
  * @param {string} str Hexadecimal string.
  * @returns {Secret} Secret object.
  */
  static fromHex(str) {
    return new _Secret({
      buffer: hexDecode(str).buffer
    });
  }
  /**
  * Secret key buffer.
  * @deprecated For backward compatibility, the "bytes" property should be used instead.
  * @type {ArrayBufferLike}
  */
  get buffer() {
    return this.bytes.buffer;
  }
  /**
  * Latin-1 string representation of secret key.
  * @type {string}
  */
  get latin1() {
    Object.defineProperty(this, "latin1", {
      enumerable: true,
      writable: false,
      configurable: false,
      value: latin1Encode(this.bytes)
    });
    return this.latin1;
  }
  /**
  * UTF-8 string representation of secret key.
  * @type {string}
  */
  get utf8() {
    Object.defineProperty(this, "utf8", {
      enumerable: true,
      writable: false,
      configurable: false,
      value: utf8Encode(this.bytes)
    });
    return this.utf8;
  }
  /**
  * Base32 string representation of secret key.
  * @type {string}
  */
  get base32() {
    Object.defineProperty(this, "base32", {
      enumerable: true,
      writable: false,
      configurable: false,
      value: base32Encode(this.bytes)
    });
    return this.base32;
  }
  /**
  * Hexadecimal string representation of secret key.
  * @type {string}
  */
  get hex() {
    Object.defineProperty(this, "hex", {
      enumerable: true,
      writable: false,
      configurable: false,
      value: hexEncode(this.bytes)
    });
    return this.hex;
  }
  /**
  * Creates a secret key object.
  * @param {Object} [config] Configuration options.
  * @param {ArrayBufferLike} [config.buffer] Secret key buffer.
  * @param {number} [config.size=20] Number of random bytes to generate, ignored if 'buffer' is provided.
  */
  constructor({ buffer, size = 20 } = {}) {
    this.bytes = typeof buffer === "undefined" ? randomBytes2(size) : new Uint8Array(buffer);
    Object.defineProperty(this, "bytes", {
      enumerable: true,
      writable: false,
      configurable: false,
      value: this.bytes
    });
  }
};
var timingSafeEqual2 = (a, b) => {
  if (crypto?.timingSafeEqual) {
    return crypto.timingSafeEqual(globalScope.Buffer.from(a), globalScope.Buffer.from(b));
  } else {
    if (a.length !== b.length) {
      throw new TypeError("Input strings must have the same length");
    }
    let i = -1;
    let out = 0;
    while (++i < a.length) {
      out |= a.charCodeAt(i) ^ b.charCodeAt(i);
    }
    return out === 0;
  }
};
var HOTP = class _HOTP {
  /**
  * Default configuration.
  * @type {{
  *   issuer: string,
  *   label: string,
  *   issuerInLabel: boolean,
  *   algorithm: string,
  *   digits: number,
  *   counter: number
  *   window: number
  * }}
  */
  static get defaults() {
    return {
      issuer: "",
      label: "OTPAuth",
      issuerInLabel: true,
      algorithm: "SHA1",
      digits: 6,
      counter: 0,
      window: 1
    };
  }
  /**
  * Generates an HOTP token.
  * @param {Object} config Configuration options.
  * @param {Secret} config.secret Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.counter=0] Counter value.
  * @returns {string} Token.
  */
  static generate({ secret, algorithm = _HOTP.defaults.algorithm, digits = _HOTP.defaults.digits, counter = _HOTP.defaults.counter }) {
    const digest = hmacDigest(algorithm, secret.bytes, uintDecode(counter));
    const offset = digest[digest.byteLength - 1] & 15;
    const otp = ((digest[offset] & 127) << 24 | (digest[offset + 1] & 255) << 16 | (digest[offset + 2] & 255) << 8 | digest[offset + 3] & 255) % 10 ** digits;
    return otp.toString().padStart(digits, "0");
  }
  /**
  * Generates an HOTP token.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.counter=this.counter++] Counter value.
  * @returns {string} Token.
  */
  generate({ counter = this.counter++ } = {}) {
    return _HOTP.generate({
      secret: this.secret,
      algorithm: this.algorithm,
      digits: this.digits,
      counter
    });
  }
  /**
  * Validates an HOTP token.
  * @param {Object} config Configuration options.
  * @param {string} config.token Token value.
  * @param {Secret} config.secret Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.counter=0] Counter value.
  * @param {number} [config.window=1] Window of counter values to test.
  * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.
  */
  static validate({ token, secret, algorithm, digits = _HOTP.defaults.digits, counter = _HOTP.defaults.counter, window: window2 = _HOTP.defaults.window }) {
    if (token.length !== digits) return null;
    let delta = null;
    const check = (i) => {
      const generatedToken = _HOTP.generate({
        secret,
        algorithm,
        digits,
        counter: i
      });
      if (timingSafeEqual2(token, generatedToken)) {
        delta = i - counter;
      }
    };
    check(counter);
    for (let i = 1; i <= window2 && delta === null; ++i) {
      check(counter - i);
      if (delta !== null) break;
      check(counter + i);
      if (delta !== null) break;
    }
    return delta;
  }
  /**
  * Validates an HOTP token.
  * @param {Object} config Configuration options.
  * @param {string} config.token Token value.
  * @param {number} [config.counter=this.counter] Counter value.
  * @param {number} [config.window=1] Window of counter values to test.
  * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.
  */
  validate({ token, counter = this.counter, window: window2 }) {
    return _HOTP.validate({
      token,
      secret: this.secret,
      algorithm: this.algorithm,
      digits: this.digits,
      counter,
      window: window2
    });
  }
  /**
  * Returns a Google Authenticator key URI.
  * @returns {string} URI.
  */
  toString() {
    const e = encodeURIComponent;
    return `otpauth://hotp/${this.issuer.length > 0 ? this.issuerInLabel ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?`}secret=${e(this.secret.base32)}&algorithm=${e(this.algorithm)}&digits=${e(this.digits)}&counter=${e(this.counter)}`;
  }
  /**
  * Creates an HOTP object.
  * @param {Object} [config] Configuration options.
  * @param {string} [config.issuer=''] Account provider.
  * @param {string} [config.label='OTPAuth'] Account label.
  * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.
  * @param {Secret|string} [config.secret=Secret] Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.counter=0] Initial counter value.
  */
  constructor({ issuer = _HOTP.defaults.issuer, label = _HOTP.defaults.label, issuerInLabel = _HOTP.defaults.issuerInLabel, secret = new Secret(), algorithm = _HOTP.defaults.algorithm, digits = _HOTP.defaults.digits, counter = _HOTP.defaults.counter } = {}) {
    this.issuer = issuer;
    this.label = label;
    this.issuerInLabel = issuerInLabel;
    this.secret = typeof secret === "string" ? Secret.fromBase32(secret) : secret;
    this.algorithm = canonicalizeAlgorithm(algorithm);
    this.digits = digits;
    this.counter = counter;
  }
};
var TOTP = class _TOTP {
  /**
  * Default configuration.
  * @type {{
  *   issuer: string,
  *   label: string,
  *   issuerInLabel: boolean,
  *   algorithm: string,
  *   digits: number,
  *   period: number
  *   window: number
  * }}
  */
  static get defaults() {
    return {
      issuer: "",
      label: "OTPAuth",
      issuerInLabel: true,
      algorithm: "SHA1",
      digits: 6,
      period: 30,
      window: 1
    };
  }
  /**
  * Calculates the counter. i.e. the number of periods since timestamp 0.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.period=30] Token time-step duration.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {number} Counter.
  */
  static counter({ period = _TOTP.defaults.period, timestamp = Date.now() } = {}) {
    return Math.floor(timestamp / 1e3 / period);
  }
  /**
  * Calculates the counter. i.e. the number of periods since timestamp 0.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {number} Counter.
  */
  counter({ timestamp = Date.now() } = {}) {
    return _TOTP.counter({
      period: this.period,
      timestamp
    });
  }
  /**
  * Calculates the remaining time in milliseconds until the next token is generated.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.period=30] Token time-step duration.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {number} counter.
  */
  static remaining({ period = _TOTP.defaults.period, timestamp = Date.now() } = {}) {
    return period * 1e3 - timestamp % (period * 1e3);
  }
  /**
  * Calculates the remaining time in milliseconds until the next token is generated.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {number} counter.
  */
  remaining({ timestamp = Date.now() } = {}) {
    return _TOTP.remaining({
      period: this.period,
      timestamp
    });
  }
  /**
  * Generates a TOTP token.
  * @param {Object} config Configuration options.
  * @param {Secret} config.secret Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.period=30] Token time-step duration.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {string} Token.
  */
  static generate({ secret, algorithm, digits, period = _TOTP.defaults.period, timestamp = Date.now() }) {
    return HOTP.generate({
      secret,
      algorithm,
      digits,
      counter: _TOTP.counter({
        period,
        timestamp
      })
    });
  }
  /**
  * Generates a TOTP token.
  * @param {Object} [config] Configuration options.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @returns {string} Token.
  */
  generate({ timestamp = Date.now() } = {}) {
    return _TOTP.generate({
      secret: this.secret,
      algorithm: this.algorithm,
      digits: this.digits,
      period: this.period,
      timestamp
    });
  }
  /**
  * Validates a TOTP token.
  * @param {Object} config Configuration options.
  * @param {string} config.token Token value.
  * @param {Secret} config.secret Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.period=30] Token time-step duration.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @param {number} [config.window=1] Window of counter values to test.
  * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.
  */
  static validate({ token, secret, algorithm, digits, period = _TOTP.defaults.period, timestamp = Date.now(), window: window2 }) {
    return HOTP.validate({
      token,
      secret,
      algorithm,
      digits,
      counter: _TOTP.counter({
        period,
        timestamp
      }),
      window: window2
    });
  }
  /**
  * Validates a TOTP token.
  * @param {Object} config Configuration options.
  * @param {string} config.token Token value.
  * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.
  * @param {number} [config.window=1] Window of counter values to test.
  * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.
  */
  validate({ token, timestamp, window: window2 }) {
    return _TOTP.validate({
      token,
      secret: this.secret,
      algorithm: this.algorithm,
      digits: this.digits,
      period: this.period,
      timestamp,
      window: window2
    });
  }
  /**
  * Returns a Google Authenticator key URI.
  * @returns {string} URI.
  */
  toString() {
    const e = encodeURIComponent;
    return `otpauth://totp/${this.issuer.length > 0 ? this.issuerInLabel ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?issuer=${e(this.issuer)}&` : `${e(this.label)}?`}secret=${e(this.secret.base32)}&algorithm=${e(this.algorithm)}&digits=${e(this.digits)}&period=${e(this.period)}`;
  }
  /**
  * Creates a TOTP object.
  * @param {Object} [config] Configuration options.
  * @param {string} [config.issuer=''] Account provider.
  * @param {string} [config.label='OTPAuth'] Account label.
  * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.
  * @param {Secret|string} [config.secret=Secret] Secret key.
  * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.
  * @param {number} [config.digits=6] Token length.
  * @param {number} [config.period=30] Token time-step duration.
  */
  constructor({ issuer = _TOTP.defaults.issuer, label = _TOTP.defaults.label, issuerInLabel = _TOTP.defaults.issuerInLabel, secret = new Secret(), algorithm = _TOTP.defaults.algorithm, digits = _TOTP.defaults.digits, period = _TOTP.defaults.period } = {}) {
    this.issuer = issuer;
    this.label = label;
    this.issuerInLabel = issuerInLabel;
    this.secret = typeof secret === "string" ? Secret.fromBase32(secret) : secret;
    this.algorithm = canonicalizeAlgorithm(algorithm);
    this.digits = digits;
    this.period = period;
  }
};
var OTPURI_REGEX = /^otpauth:\/\/([ht]otp)\/(.+)\?([A-Z0-9.~_-]+=[^?&]*(?:&[A-Z0-9.~_-]+=[^?&]*)*)$/i;
var SECRET_REGEX = /^[2-7A-Z]+=*$/i;
var ALGORITHM_REGEX = /^SHA(?:1|224|256|384|512|3-224|3-256|3-384|3-512)$/i;
var INTEGER_REGEX = /^[+-]?\d+$/;
var POSITIVE_INTEGER_REGEX = /^\+?[1-9]\d*$/;
var URI = class {
  /**
  * Parses a Google Authenticator key URI and returns an HOTP/TOTP object.
  * @param {string} uri Google Authenticator Key URI.
  * @returns {HOTP|TOTP} HOTP/TOTP object.
  */
  static parse(uri) {
    let uriGroups;
    try {
      uriGroups = uri.match(OTPURI_REGEX);
    } catch (_) {
    }
    if (!Array.isArray(uriGroups)) {
      throw new URIError("Invalid URI format");
    }
    const uriType = uriGroups[1].toLowerCase();
    const uriLabel = uriGroups[2].split(/(?::|%3A) *(.+)/i, 2).map(decodeURIComponent);
    const uriParams = uriGroups[3].split("&").reduce((acc, cur) => {
      const pairArr = cur.split(/=(.*)/, 2).map(decodeURIComponent);
      const pairKey = pairArr[0].toLowerCase();
      const pairVal = pairArr[1];
      const pairAcc = acc;
      pairAcc[pairKey] = pairVal;
      return pairAcc;
    }, {});
    let OTP;
    const config = {};
    if (uriType === "hotp") {
      OTP = HOTP;
      if (typeof uriParams.counter !== "undefined" && INTEGER_REGEX.test(uriParams.counter)) {
        config.counter = parseInt(uriParams.counter, 10);
      } else {
        throw new TypeError("Missing or invalid 'counter' parameter");
      }
    } else if (uriType === "totp") {
      OTP = TOTP;
      if (typeof uriParams.period !== "undefined") {
        if (POSITIVE_INTEGER_REGEX.test(uriParams.period)) {
          config.period = parseInt(uriParams.period, 10);
        } else {
          throw new TypeError("Invalid 'period' parameter");
        }
      }
    } else {
      throw new TypeError("Unknown OTP type");
    }
    if (typeof uriParams.issuer !== "undefined") {
      config.issuer = uriParams.issuer;
    }
    if (uriLabel.length === 2) {
      config.label = uriLabel[1];
      if (typeof config.issuer === "undefined" || config.issuer === "") {
        config.issuer = uriLabel[0];
      } else if (uriLabel[0] === "") {
        config.issuerInLabel = false;
      }
    } else {
      config.label = uriLabel[0];
      if (typeof config.issuer !== "undefined" && config.issuer !== "") {
        config.issuerInLabel = false;
      }
    }
    if (typeof uriParams.secret !== "undefined" && SECRET_REGEX.test(uriParams.secret)) {
      config.secret = uriParams.secret;
    } else {
      throw new TypeError("Missing or invalid 'secret' parameter");
    }
    if (typeof uriParams.algorithm !== "undefined") {
      if (ALGORITHM_REGEX.test(uriParams.algorithm)) {
        config.algorithm = uriParams.algorithm;
      } else {
        throw new TypeError("Invalid 'algorithm' parameter");
      }
    }
    if (typeof uriParams.digits !== "undefined") {
      if (POSITIVE_INTEGER_REGEX.test(uriParams.digits)) {
        config.digits = parseInt(uriParams.digits, 10);
      } else {
        throw new TypeError("Invalid 'digits' parameter");
      }
    }
    return new OTP(config);
  }
  /**
  * Converts an HOTP/TOTP object to a Google Authenticator key URI.
  * @param {HOTP|TOTP} otp HOTP/TOTP object.
  * @returns {string} Google Authenticator Key URI.
  */
  static stringify(otp) {
    if (otp instanceof HOTP || otp instanceof TOTP) {
      return otp.toString();
    }
    throw new TypeError("Invalid 'HOTP/TOTP' object");
  }
};

// src/authenticator.tsx
var import_react19 = require("react");
var import_api35 = require("@raycast/api");

// node_modules/@raycast/utils/dist/module.js
var import_react = __toESM(require("react"));
var import_api = require("@raycast/api");

// node_modules/dequal/lite/index.mjs
var has = Object.prototype.hasOwnProperty;
function dequal(foo, bar) {
  var ctor, len;
  if (foo === bar) return true;
  if (foo && bar && (ctor = foo.constructor) === bar.constructor) {
    if (ctor === Date) return foo.getTime() === bar.getTime();
    if (ctor === RegExp) return foo.toString() === bar.toString();
    if (ctor === Array) {
      if ((len = foo.length) === bar.length) {
        while (len-- && dequal(foo[len], bar[len])) ;
      }
      return len === -1;
    }
    if (!ctor || typeof foo === "object") {
      len = 0;
      for (ctor in foo) {
        if (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;
        if (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;
      }
      return Object.keys(bar).length === len;
    }
  }
  return foo !== foo && bar !== bar;
}

// node_modules/@raycast/utils/dist/module.js
var import_node_fs = __toESM(require("node:fs"));
var import_node_path = __toESM(require("node:path"));
var import_jsx_runtime = require("react/jsx-runtime");
function $a57ed8effbd797c7$export$722debc0e56fea39(value) {
  const ref = (0, import_react.useRef)(value);
  const signalRef = (0, import_react.useRef)(0);
  if (!(0, dequal)(value, ref.current)) {
    ref.current = value;
    signalRef.current += 1;
  }
  return (0, import_react.useMemo)(() => ref.current, [
    signalRef.current
  ]);
}
function $bfcf6ee368b3bd9f$export$d4b699e2c1148419(value) {
  const ref = (0, import_react.useRef)(value);
  ref.current = value;
  return ref;
}
function $c718fd03aba6111c$export$80e5033e369189f3(error, options) {
  const message = error instanceof Error ? error.message : String(error);
  return (0, import_api.showToast)({
    style: (0, import_api.Toast).Style.Failure,
    title: options?.title ?? "Something went wrong",
    message: options?.message ?? message,
    primaryAction: options?.primaryAction ?? $c718fd03aba6111c$var$handleErrorToastAction(error),
    secondaryAction: options?.primaryAction ? $c718fd03aba6111c$var$handleErrorToastAction(error) : void 0
  });
}
var $c718fd03aba6111c$var$handleErrorToastAction = (error) => {
  let privateExtension = true;
  let title = "[Extension Name]...";
  let extensionURL = "";
  try {
    const packageJSON = JSON.parse((0, import_node_fs.readFileSync)((0, import_node_path.join)((0, import_api.environment).assetsPath, "..", "package.json"), "utf8"));
    title = `[${packageJSON.title}]...`;
    extensionURL = `https://raycast.com/${packageJSON.owner || packageJSON.author}/${packageJSON.name}`;
    if (!packageJSON.owner || packageJSON.access === "public") privateExtension = false;
  } catch (err) {
  }
  const fallback = (0, import_api.environment).isDevelopment || privateExtension;
  const stack = error instanceof Error ? error?.stack || error?.message || "" : String(error);
  return {
    title: fallback ? "Copy Logs" : "Report Error",
    onAction(toast) {
      toast.hide();
      if (fallback) (0, import_api.Clipboard).copy(stack);
      else (0, import_api.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(title)}&extension-url=${encodeURI(extensionURL)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${stack}
\`\`\`
`)}`);
    }
  };
};
function $cefc05764ce5eacd$export$dd6b79aaabe7bc37(fn, args, options) {
  const lastCallId = (0, import_react.useRef)(0);
  const [state, set] = (0, import_react.useState)({
    isLoading: true
  });
  const fnRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(fn);
  const latestAbortable = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.abortable);
  const latestArgs = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(args || []);
  const latestOnError = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onError);
  const latestOnData = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onData);
  const latestOnWillExecute = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onWillExecute);
  const latestFailureToast = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.failureToastOptions);
  const latestValue = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(state.data);
  const latestCallback = (0, import_react.useRef)(null);
  const paginationArgsRef = (0, import_react.useRef)({
    page: 0
  });
  const usePaginationRef = (0, import_react.useRef)(false);
  const hasMoreRef = (0, import_react.useRef)(true);
  const pageSizeRef = (0, import_react.useRef)(50);
  const abort = (0, import_react.useCallback)(() => {
    if (latestAbortable.current) {
      latestAbortable.current.current?.abort();
      latestAbortable.current.current = new AbortController();
    }
    return ++lastCallId.current;
  }, [
    latestAbortable
  ]);
  const callback = (0, import_react.useCallback)((...args2) => {
    const callId = abort();
    latestOnWillExecute.current?.(args2);
    set((prevState) => ({
      ...prevState,
      isLoading: true
    }));
    const promiseOrPaginatedPromise = $cefc05764ce5eacd$var$bindPromiseIfNeeded(fnRef.current)(...args2);
    function handleError(error) {
      if (error.name == "AbortError") return error;
      if (callId === lastCallId.current) {
        if (latestOnError.current) latestOnError.current(error);
        else if ((0, import_api.environment).launchType !== (0, import_api.LaunchType).Background) (0, $c718fd03aba6111c$export$80e5033e369189f3)(error, {
          title: "Failed to fetch latest data",
          primaryAction: {
            title: "Retry",
            onAction(toast) {
              toast.hide();
              latestCallback.current?.(...latestArgs.current || []);
            }
          },
          ...latestFailureToast.current
        });
        set({
          error,
          isLoading: false
        });
      }
      return error;
    }
    if (typeof promiseOrPaginatedPromise === "function") {
      usePaginationRef.current = true;
      return promiseOrPaginatedPromise(paginationArgsRef.current).then(
        // @ts-expect-error too complicated for TS
        ({ data, hasMore, cursor }) => {
          if (callId === lastCallId.current) {
            if (paginationArgsRef.current) {
              paginationArgsRef.current.cursor = cursor;
              paginationArgsRef.current.lastItem = data?.[data.length - 1];
            }
            if (latestOnData.current) latestOnData.current(data, paginationArgsRef.current);
            if (hasMore) pageSizeRef.current = data.length;
            hasMoreRef.current = hasMore;
            set((previousData) => {
              if (paginationArgsRef.current.page === 0) return {
                data,
                isLoading: false
              };
              return {
                data: (previousData.data || [])?.concat(data),
                isLoading: false
              };
            });
          }
          return data;
        },
        (error) => {
          hasMoreRef.current = false;
          return handleError(error);
        }
      );
    }
    usePaginationRef.current = false;
    return promiseOrPaginatedPromise.then((data) => {
      if (callId === lastCallId.current) {
        if (latestOnData.current) latestOnData.current(data);
        set({
          data,
          isLoading: false
        });
      }
      return data;
    }, handleError);
  }, [
    latestOnData,
    latestOnError,
    latestArgs,
    fnRef,
    set,
    latestCallback,
    latestOnWillExecute,
    paginationArgsRef,
    latestFailureToast,
    abort
  ]);
  latestCallback.current = callback;
  const revalidate = (0, import_react.useCallback)(() => {
    paginationArgsRef.current = {
      page: 0
    };
    const args2 = latestArgs.current || [];
    return callback(...args2);
  }, [
    callback,
    latestArgs
  ]);
  const mutate = (0, import_react.useCallback)(async (asyncUpdate, options2) => {
    let dataBeforeOptimisticUpdate;
    try {
      if (options2?.optimisticUpdate) {
        abort();
        if (typeof options2?.rollbackOnError !== "function" && options2?.rollbackOnError !== false)
          dataBeforeOptimisticUpdate = structuredClone(latestValue.current?.value);
        const update = options2.optimisticUpdate;
        set((prevState) => ({
          ...prevState,
          data: update(prevState.data)
        }));
      }
      return await asyncUpdate;
    } catch (err) {
      if (typeof options2?.rollbackOnError === "function") {
        const update = options2.rollbackOnError;
        set((prevState) => ({
          ...prevState,
          data: update(prevState.data)
        }));
      } else if (options2?.optimisticUpdate && options2?.rollbackOnError !== false) set((prevState) => ({
        ...prevState,
        data: dataBeforeOptimisticUpdate
      }));
      throw err;
    } finally {
      if (options2?.shouldRevalidateAfter !== false) {
        if ((0, import_api.environment).launchType === (0, import_api.LaunchType).Background || (0, import_api.environment).commandMode === "menu-bar")
          await revalidate();
        else revalidate();
      }
    }
  }, [
    revalidate,
    latestValue,
    set,
    abort
  ]);
  const onLoadMore = (0, import_react.useCallback)(() => {
    paginationArgsRef.current.page += 1;
    const args2 = latestArgs.current || [];
    callback(...args2);
  }, [
    paginationArgsRef,
    latestArgs,
    callback
  ]);
  (0, import_react.useEffect)(() => {
    paginationArgsRef.current = {
      page: 0
    };
    if (options?.execute !== false) callback(...args || []);
    else
      abort();
  }, [
    (0, $a57ed8effbd797c7$export$722debc0e56fea39)([
      args,
      options?.execute,
      callback
    ]),
    latestAbortable,
    paginationArgsRef
  ]);
  (0, import_react.useEffect)(() => {
    return () => {
      abort();
    };
  }, [
    abort
  ]);
  const isLoading = options?.execute !== false ? state.isLoading : false;
  const stateWithLoadingFixed = {
    ...state,
    isLoading
  };
  const pagination = usePaginationRef.current ? {
    pageSize: pageSizeRef.current,
    hasMore: hasMoreRef.current,
    onLoadMore
  } : void 0;
  return {
    ...stateWithLoadingFixed,
    revalidate,
    mutate,
    pagination
  };
}
function $cefc05764ce5eacd$var$bindPromiseIfNeeded(fn) {
  if (fn === Promise.all)
    return fn.bind(Promise);
  if (fn === Promise.race)
    return fn.bind(Promise);
  if (fn === Promise.resolve)
    return fn.bind(Promise);
  if (fn === Promise.reject)
    return fn.bind(Promise);
  return fn;
}
function $e2e1ea6dd3b7d2e1$export$b644b65666fe0c18(key, _value) {
  const value = this[key];
  if (value instanceof Date) return `__raycast_cached_date__${value.toISOString()}`;
  if (Buffer.isBuffer(value)) return `__raycast_cached_buffer__${value.toString("base64")}`;
  return _value;
}
function $e2e1ea6dd3b7d2e1$export$63698c10df99509c(_key, value) {
  if (typeof value === "string" && value.startsWith("__raycast_cached_date__")) return new Date(value.replace("__raycast_cached_date__", ""));
  if (typeof value === "string" && value.startsWith("__raycast_cached_buffer__")) return Buffer.from(value.replace("__raycast_cached_buffer__", ""), "base64");
  return value;
}
var $c40d7eded38ca69c$var$rootCache = /* @__PURE__ */ Symbol("cache without namespace");
var $c40d7eded38ca69c$var$cacheMap = /* @__PURE__ */ new Map();
function $c40d7eded38ca69c$export$14afb9e4c16377d3(key, initialState2, config) {
  const cacheKey = config?.cacheNamespace || $c40d7eded38ca69c$var$rootCache;
  const cache = $c40d7eded38ca69c$var$cacheMap.get(cacheKey) || $c40d7eded38ca69c$var$cacheMap.set(cacheKey, new (0, import_api.Cache)({
    namespace: config?.cacheNamespace
  })).get(cacheKey);
  if (!cache) throw new Error("Missing cache");
  const keyRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(key);
  const initialValueRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(initialState2);
  const cachedState = (0, import_react.useSyncExternalStore)(cache.subscribe, () => {
    try {
      return cache.get(keyRef.current);
    } catch (error) {
      console.error("Could not get Cache data:", error);
      return void 0;
    }
  });
  const state = (0, import_react.useMemo)(() => {
    if (typeof cachedState !== "undefined") {
      if (cachedState === "undefined") return void 0;
      try {
        return JSON.parse(cachedState, (0, $e2e1ea6dd3b7d2e1$export$63698c10df99509c));
      } catch (err) {
        console.warn("The cached data is corrupted", err);
        return initialValueRef.current;
      }
    } else return initialValueRef.current;
  }, [
    cachedState,
    initialValueRef
  ]);
  const stateRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(state);
  const setStateAndCache = (0, import_react.useCallback)((updater) => {
    const newValue = typeof updater === "function" ? updater(stateRef.current) : updater;
    if (typeof newValue === "undefined") cache.set(keyRef.current, "undefined");
    else {
      const stringifiedValue = JSON.stringify(newValue, (0, $e2e1ea6dd3b7d2e1$export$b644b65666fe0c18));
      cache.set(keyRef.current, stringifiedValue);
    }
    return newValue;
  }, [
    cache,
    keyRef,
    stateRef
  ]);
  return [
    state,
    setStateAndCache
  ];
}

// src/components/RootErrorBoundary.tsx
var import_api28 = require("@raycast/api");
var import_react13 = require("react");

// src/components/TroubleshootingGuide.tsx
var import_api27 = require("@raycast/api");

// src/components/actions/ActionWithReprompt.tsx
var import_api18 = require("@raycast/api");

// src/components/searchVault/context/vaultItem.tsx
var import_react2 = require("react");
var VaultItemContext = (0, import_react2.createContext)(null);
var useSelectedVaultItem = () => {
  const session = (0, import_react2.useContext)(VaultItemContext);
  if (session == null) {
    throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");
  }
  return session;
};
var vaultItem_default = VaultItemContext;

// src/utils/hooks/useReprompt.tsx
var import_api17 = require("@raycast/api");

// src/components/RepromptForm.tsx
var import_api2 = require("@raycast/api");
var import_jsx_runtime2 = require("react/jsx-runtime");
var RepromptForm = (props) => {
  const { description, onConfirm } = props;
  function onSubmit(values) {
    onConfirm(values.password);
  }
  return /* @__PURE__ */ (0, import_jsx_runtime2.jsxs)(
    import_api2.Form,
    {
      navigationTitle: "Confirmation Required",
      actions: /* @__PURE__ */ (0, import_jsx_runtime2.jsx)(import_api2.ActionPanel, { children: /* @__PURE__ */ (0, import_jsx_runtime2.jsx)(import_api2.Action.SubmitForm, { title: "Confirm", onSubmit }) }),
      children: [
        /* @__PURE__ */ (0, import_jsx_runtime2.jsx)(import_api2.Form.Description, { title: "Confirmation Required for", text: description }),
        /* @__PURE__ */ (0, import_jsx_runtime2.jsx)(import_api2.Form.PasswordField, { autoFocus: true, id: "password", title: "Master Password" })
      ]
    }
  );
};
var RepromptForm_default = RepromptForm;

// src/context/session/session.tsx
var import_api16 = require("@raycast/api");
var import_react8 = require("react");

// src/components/UnlockForm.tsx
var import_api13 = require("@raycast/api");
var import_react6 = require("react");

// src/constants/general.ts
var import_api3 = require("@raycast/api");

// src/types/vault.ts
var CARD_BRANDS = {
  VISA: "Visa",
  MASTERCARD: "Mastercard",
  AMEX: "Amex",
  DISCOVER: "Discover",
  DINERS_CLUB: "Diners Club",
  JCB: "JCB",
  MAESTRO: "Maestro",
  UNION_PAY: "UnionPay",
  RU_PAY: "RuPay",
  OTHER: "Other"
};

// src/constants/general.ts
var DEFAULT_SERVER_URL = "https://bitwarden.com";
var SENSITIVE_VALUE_PLACEHOLDER = "HIDDEN-VALUE";
var LOCAL_STORAGE_KEY = {
  PASSWORD_OPTIONS: "bw-generate-password-options",
  PASSWORD_ONE_TIME_WARNING: "bw-generate-password-warning-accepted",
  SESSION_TOKEN: "sessionToken",
  REPROMPT_HASH: "sessionRepromptHash",
  SERVER_URL: "cliServer",
  LAST_ACTIVITY_TIME: "lastActivityTime",
  VAULT_LOCK_REASON: "vaultLockReason",
  VAULT_FAVORITE_ORDER: "vaultFavoriteOrder",
  VAULT_LAST_STATUS: "lastVaultStatus"
};
var VAULT_LOCK_MESSAGES = {
  TIMEOUT: "Vault timed out due to inactivity",
  MANUAL: "Manually locked by the user",
  SYSTEM_LOCK: "Screen was locked",
  SYSTEM_SLEEP: "System went to sleep",
  CLI_UPDATED: "Bitwarden has been updated. Please login again."
};
var FOLDER_OPTIONS = {
  ALL: "all",
  NO_FOLDER: "no-folder"
};
var CACHE_KEYS = {
  IV: "iv",
  VAULT: "vault",
  CURRENT_FOLDER_ID: "currentFolderId",
  SEND_TYPE_FILTER: "sendTypeFilter",
  CLI_VERSION: "cliVersion"
};
var ITEM_TYPE_TO_ICON_MAP = {
  [1 /* LOGIN */]: import_api3.Icon.Globe,
  [3 /* CARD */]: import_api3.Icon.CreditCard,
  [4 /* IDENTITY */]: import_api3.Icon.Person,
  [2 /* NOTE */]: import_api3.Icon.Document,
  [5 /* SSH_KEY */]: import_api3.Icon.Key
};

// src/context/bitwarden.tsx
var import_react4 = require("react");

// src/api/bitwarden.ts
var import_api9 = require("@raycast/api");

// node_modules/execa/index.js
var import_node_buffer = require("node:buffer");
var import_node_path3 = __toESM(require("node:path"), 1);
var import_node_child_process = __toESM(require("node:child_process"), 1);
var import_node_process2 = __toESM(require("node:process"), 1);
var import_cross_spawn = __toESM(require_cross_spawn(), 1);

// node_modules/strip-final-newline/index.js
function stripFinalNewline(input) {
  const LF = typeof input === "string" ? "\n" : "\n".charCodeAt();
  const CR = typeof input === "string" ? "\r" : "\r".charCodeAt();
  if (input[input.length - 1] === LF) {
    input = input.slice(0, -1);
  }
  if (input[input.length - 1] === CR) {
    input = input.slice(0, -1);
  }
  return input;
}

// node_modules/npm-run-path/index.js
var import_node_process = __toESM(require("node:process"), 1);
var import_node_path2 = __toESM(require("node:path"), 1);
var import_node_url = __toESM(require("node:url"), 1);

// node_modules/npm-run-path/node_modules/path-key/index.js
function pathKey(options = {}) {
  const {
    env = process.env,
    platform: platform2 = process.platform
  } = options;
  if (platform2 !== "win32") {
    return "PATH";
  }
  return Object.keys(env).reverse().find((key) => key.toUpperCase() === "PATH") || "Path";
}

// node_modules/npm-run-path/index.js
function npmRunPath(options = {}) {
  const {
    cwd = import_node_process.default.cwd(),
    path: path_ = import_node_process.default.env[pathKey()],
    execPath = import_node_process.default.execPath
  } = options;
  let previous;
  const cwdString = cwd instanceof URL ? import_node_url.default.fileURLToPath(cwd) : cwd;
  let cwdPath = import_node_path2.default.resolve(cwdString);
  const result = [];
  while (previous !== cwdPath) {
    result.push(import_node_path2.default.join(cwdPath, "node_modules/.bin"));
    previous = cwdPath;
    cwdPath = import_node_path2.default.resolve(cwdPath, "..");
  }
  result.push(import_node_path2.default.resolve(cwdString, execPath, ".."));
  return [...result, path_].join(import_node_path2.default.delimiter);
}
function npmRunPathEnv({ env = import_node_process.default.env, ...options } = {}) {
  env = { ...env };
  const path3 = pathKey({ env });
  options.path = env[path3];
  env[path3] = npmRunPath(options);
  return env;
}

// node_modules/mimic-fn/index.js
var copyProperty = (to, from, property, ignoreNonConfigurable) => {
  if (property === "length" || property === "prototype") {
    return;
  }
  if (property === "arguments" || property === "caller") {
    return;
  }
  const toDescriptor = Object.getOwnPropertyDescriptor(to, property);
  const fromDescriptor = Object.getOwnPropertyDescriptor(from, property);
  if (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {
    return;
  }
  Object.defineProperty(to, property, fromDescriptor);
};
var canCopyProperty = function(toDescriptor, fromDescriptor) {
  return toDescriptor === void 0 || toDescriptor.configurable || toDescriptor.writable === fromDescriptor.writable && toDescriptor.enumerable === fromDescriptor.enumerable && toDescriptor.configurable === fromDescriptor.configurable && (toDescriptor.writable || toDescriptor.value === fromDescriptor.value);
};
var changePrototype = (to, from) => {
  const fromPrototype = Object.getPrototypeOf(from);
  if (fromPrototype === Object.getPrototypeOf(to)) {
    return;
  }
  Object.setPrototypeOf(to, fromPrototype);
};
var wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/
${fromBody}`;
var toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, "toString");
var toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, "name");
var changeToString = (to, from, name) => {
  const withName = name === "" ? "" : `with ${name.trim()}() `;
  const newToString = wrappedToString.bind(null, withName, from.toString());
  Object.defineProperty(newToString, "name", toStringName);
  Object.defineProperty(to, "toString", { ...toStringDescriptor, value: newToString });
};
function mimicFunction(to, from, { ignoreNonConfigurable = false } = {}) {
  const { name } = to;
  for (const property of Reflect.ownKeys(from)) {
    copyProperty(to, from, property, ignoreNonConfigurable);
  }
  changePrototype(to, from);
  changeToString(to, from, name);
  return to;
}

// node_modules/onetime/index.js
var calledFunctions = /* @__PURE__ */ new WeakMap();
var onetime = (function_, options = {}) => {
  if (typeof function_ !== "function") {
    throw new TypeError("Expected a function");
  }
  let returnValue;
  let callCount = 0;
  const functionName = function_.displayName || function_.name || "<anonymous>";
  const onetime2 = function(...arguments_) {
    calledFunctions.set(onetime2, ++callCount);
    if (callCount === 1) {
      returnValue = function_.apply(this, arguments_);
      function_ = null;
    } else if (options.throw === true) {
      throw new Error(`Function \`${functionName}\` can only be called once`);
    }
    return returnValue;
  };
  mimicFunction(onetime2, function_);
  calledFunctions.set(onetime2, callCount);
  return onetime2;
};
onetime.callCount = (function_) => {
  if (!calledFunctions.has(function_)) {
    throw new Error(`The given function \`${function_.name}\` is not wrapped by the \`onetime\` package`);
  }
  return calledFunctions.get(function_);
};
var onetime_default = onetime;

// node_modules/human-signals/build/src/main.js
var import_node_os2 = require("node:os");

// node_modules/human-signals/build/src/realtime.js
var getRealtimeSignals = function() {
  const length = SIGRTMAX - SIGRTMIN + 1;
  return Array.from({ length }, getRealtimeSignal);
};
var getRealtimeSignal = function(value, index) {
  return {
    name: `SIGRT${index + 1}`,
    number: SIGRTMIN + index,
    action: "terminate",
    description: "Application-specific signal (realtime)",
    standard: "posix"
  };
};
var SIGRTMIN = 34;
var SIGRTMAX = 64;

// node_modules/human-signals/build/src/signals.js
var import_node_os = require("node:os");

// node_modules/human-signals/build/src/core.js
var SIGNALS = [
  {
    name: "SIGHUP",
    number: 1,
    action: "terminate",
    description: "Terminal closed",
    standard: "posix"
  },
  {
    name: "SIGINT",
    number: 2,
    action: "terminate",
    description: "User interruption with CTRL-C",
    standard: "ansi"
  },
  {
    name: "SIGQUIT",
    number: 3,
    action: "core",
    description: "User interruption with CTRL-\\",
    standard: "posix"
  },
  {
    name: "SIGILL",
    number: 4,
    action: "core",
    description: "Invalid machine instruction",
    standard: "ansi"
  },
  {
    name: "SIGTRAP",
    number: 5,
    action: "core",
    description: "Debugger breakpoint",
    standard: "posix"
  },
  {
    name: "SIGABRT",
    number: 6,
    action: "core",
    description: "Aborted",
    standard: "ansi"
  },
  {
    name: "SIGIOT",
    number: 6,
    action: "core",
    description: "Aborted",
    standard: "bsd"
  },
  {
    name: "SIGBUS",
    number: 7,
    action: "core",
    description: "Bus error due to misaligned, non-existing address or paging error",
    standard: "bsd"
  },
  {
    name: "SIGEMT",
    number: 7,
    action: "terminate",
    description: "Command should be emulated but is not implemented",
    standard: "other"
  },
  {
    name: "SIGFPE",
    number: 8,
    action: "core",
    description: "Floating point arithmetic error",
    standard: "ansi"
  },
  {
    name: "SIGKILL",
    number: 9,
    action: "terminate",
    description: "Forced termination",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGUSR1",
    number: 10,
    action: "terminate",
    description: "Application-specific signal",
    standard: "posix"
  },
  {
    name: "SIGSEGV",
    number: 11,
    action: "core",
    description: "Segmentation fault",
    standard: "ansi"
  },
  {
    name: "SIGUSR2",
    number: 12,
    action: "terminate",
    description: "Application-specific signal",
    standard: "posix"
  },
  {
    name: "SIGPIPE",
    number: 13,
    action: "terminate",
    description: "Broken pipe or socket",
    standard: "posix"
  },
  {
    name: "SIGALRM",
    number: 14,
    action: "terminate",
    description: "Timeout or timer",
    standard: "posix"
  },
  {
    name: "SIGTERM",
    number: 15,
    action: "terminate",
    description: "Termination",
    standard: "ansi"
  },
  {
    name: "SIGSTKFLT",
    number: 16,
    action: "terminate",
    description: "Stack is empty or overflowed",
    standard: "other"
  },
  {
    name: "SIGCHLD",
    number: 17,
    action: "ignore",
    description: "Child process terminated, paused or unpaused",
    standard: "posix"
  },
  {
    name: "SIGCLD",
    number: 17,
    action: "ignore",
    description: "Child process terminated, paused or unpaused",
    standard: "other"
  },
  {
    name: "SIGCONT",
    number: 18,
    action: "unpause",
    description: "Unpaused",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGSTOP",
    number: 19,
    action: "pause",
    description: "Paused",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGTSTP",
    number: 20,
    action: "pause",
    description: 'Paused using CTRL-Z or "suspend"',
    standard: "posix"
  },
  {
    name: "SIGTTIN",
    number: 21,
    action: "pause",
    description: "Background process cannot read terminal input",
    standard: "posix"
  },
  {
    name: "SIGBREAK",
    number: 21,
    action: "terminate",
    description: "User interruption with CTRL-BREAK",
    standard: "other"
  },
  {
    name: "SIGTTOU",
    number: 22,
    action: "pause",
    description: "Background process cannot write to terminal output",
    standard: "posix"
  },
  {
    name: "SIGURG",
    number: 23,
    action: "ignore",
    description: "Socket received out-of-band data",
    standard: "bsd"
  },
  {
    name: "SIGXCPU",
    number: 24,
    action: "core",
    description: "Process timed out",
    standard: "bsd"
  },
  {
    name: "SIGXFSZ",
    number: 25,
    action: "core",
    description: "File too big",
    standard: "bsd"
  },
  {
    name: "SIGVTALRM",
    number: 26,
    action: "terminate",
    description: "Timeout or timer",
    standard: "bsd"
  },
  {
    name: "SIGPROF",
    number: 27,
    action: "terminate",
    description: "Timeout or timer",
    standard: "bsd"
  },
  {
    name: "SIGWINCH",
    number: 28,
    action: "ignore",
    description: "Terminal window size changed",
    standard: "bsd"
  },
  {
    name: "SIGIO",
    number: 29,
    action: "terminate",
    description: "I/O is available",
    standard: "other"
  },
  {
    name: "SIGPOLL",
    number: 29,
    action: "terminate",
    description: "Watched event",
    standard: "other"
  },
  {
    name: "SIGINFO",
    number: 29,
    action: "ignore",
    description: "Request for process information",
    standard: "other"
  },
  {
    name: "SIGPWR",
    number: 30,
    action: "terminate",
    description: "Device running out of power",
    standard: "systemv"
  },
  {
    name: "SIGSYS",
    number: 31,
    action: "core",
    description: "Invalid system call",
    standard: "other"
  },
  {
    name: "SIGUNUSED",
    number: 31,
    action: "terminate",
    description: "Invalid system call",
    standard: "other"
  }
];

// node_modules/human-signals/build/src/signals.js
var getSignals = function() {
  const realtimeSignals = getRealtimeSignals();
  const signals = [...SIGNALS, ...realtimeSignals].map(normalizeSignal);
  return signals;
};
var normalizeSignal = function({
  name,
  number: defaultNumber,
  description,
  action,
  forced = false,
  standard
}) {
  const {
    signals: { [name]: constantSignal }
  } = import_node_os.constants;
  const supported = constantSignal !== void 0;
  const number = supported ? constantSignal : defaultNumber;
  return { name, number, description, supported, action, forced, standard };
};

// node_modules/human-signals/build/src/main.js
var getSignalsByName = function() {
  const signals = getSignals();
  return Object.fromEntries(signals.map(getSignalByName));
};
var getSignalByName = function({
  name,
  number,
  description,
  supported,
  action,
  forced,
  standard
}) {
  return [
    name,
    { name, number, description, supported, action, forced, standard }
  ];
};
var signalsByName = getSignalsByName();
var getSignalsByNumber = function() {
  const signals = getSignals();
  const length = SIGRTMAX + 1;
  const signalsA = Array.from({ length }, (value, number) => getSignalByNumber(number, signals));
  return Object.assign({}, ...signalsA);
};
var getSignalByNumber = function(number, signals) {
  const signal = findSignalByNumber(number, signals);
  if (signal === void 0) {
    return {};
  }
  const { name, description, supported, action, forced, standard } = signal;
  return {
    [number]: {
      name,
      number,
      description,
      supported,
      action,
      forced,
      standard
    }
  };
};
var findSignalByNumber = function(number, signals) {
  const signal = signals.find(({ name }) => import_node_os2.constants.signals[name] === number);
  if (signal !== void 0) {
    return signal;
  }
  return signals.find((signalA) => signalA.number === number);
};
var signalsByNumber = getSignalsByNumber();

// node_modules/execa/lib/error.js
var getErrorPrefix = ({ timedOut, timeout, errorCode, signal, signalDescription, exitCode, isCanceled }) => {
  if (timedOut) {
    return `timed out after ${timeout} milliseconds`;
  }
  if (isCanceled) {
    return "was canceled";
  }
  if (errorCode !== void 0) {
    return `failed with ${errorCode}`;
  }
  if (signal !== void 0) {
    return `was killed with ${signal} (${signalDescription})`;
  }
  if (exitCode !== void 0) {
    return `failed with exit code ${exitCode}`;
  }
  return "failed";
};
var makeError = ({
  stdout,
  stderr,
  all,
  error,
  signal,
  exitCode,
  command,
  escapedCommand,
  timedOut,
  isCanceled,
  killed,
  parsed: { options: { timeout } }
}) => {
  exitCode = exitCode === null ? void 0 : exitCode;
  signal = signal === null ? void 0 : signal;
  const signalDescription = signal === void 0 ? void 0 : signalsByName[signal].description;
  const errorCode = error && error.code;
  const prefix = getErrorPrefix({ timedOut, timeout, errorCode, signal, signalDescription, exitCode, isCanceled });
  const execaMessage = `Command ${prefix}: ${command}`;
  const isError = Object.prototype.toString.call(error) === "[object Error]";
  const shortMessage = isError ? `${execaMessage}
${error.message}` : execaMessage;
  const message = [shortMessage, stderr, stdout].filter(Boolean).join("\n");
  if (isError) {
    error.originalMessage = error.message;
    error.message = message;
  } else {
    error = new Error(message);
  }
  error.shortMessage = shortMessage;
  error.command = command;
  error.escapedCommand = escapedCommand;
  error.exitCode = exitCode;
  error.signal = signal;
  error.signalDescription = signalDescription;
  error.stdout = stdout;
  error.stderr = stderr;
  if (all !== void 0) {
    error.all = all;
  }
  if ("bufferedData" in error) {
    delete error.bufferedData;
  }
  error.failed = true;
  error.timedOut = Boolean(timedOut);
  error.isCanceled = isCanceled;
  error.killed = killed && !timedOut;
  return error;
};

// node_modules/execa/lib/stdio.js
var aliases = ["stdin", "stdout", "stderr"];
var hasAlias = (options) => aliases.some((alias) => options[alias] !== void 0);
var normalizeStdio = (options) => {
  if (!options) {
    return;
  }
  const { stdio } = options;
  if (stdio === void 0) {
    return aliases.map((alias) => options[alias]);
  }
  if (hasAlias(options)) {
    throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${aliases.map((alias) => `\`${alias}\``).join(", ")}`);
  }
  if (typeof stdio === "string") {
    return stdio;
  }
  if (!Array.isArray(stdio)) {
    throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof stdio}\``);
  }
  const length = Math.max(stdio.length, aliases.length);
  return Array.from({ length }, (value, index) => stdio[index]);
};

// node_modules/execa/lib/kill.js
var import_node_os3 = __toESM(require("node:os"), 1);
var import_signal_exit = __toESM(require_signal_exit(), 1);
var DEFAULT_FORCE_KILL_TIMEOUT = 1e3 * 5;
var spawnedKill = (kill, signal = "SIGTERM", options = {}) => {
  const killResult = kill(signal);
  setKillTimeout(kill, signal, options, killResult);
  return killResult;
};
var setKillTimeout = (kill, signal, options, killResult) => {
  if (!shouldForceKill(signal, options, killResult)) {
    return;
  }
  const timeout = getForceKillAfterTimeout(options);
  const t = setTimeout(() => {
    kill("SIGKILL");
  }, timeout);
  if (t.unref) {
    t.unref();
  }
};
var shouldForceKill = (signal, { forceKillAfterTimeout }, killResult) => isSigterm(signal) && forceKillAfterTimeout !== false && killResult;
var isSigterm = (signal) => signal === import_node_os3.default.constants.signals.SIGTERM || typeof signal === "string" && signal.toUpperCase() === "SIGTERM";
var getForceKillAfterTimeout = ({ forceKillAfterTimeout = true }) => {
  if (forceKillAfterTimeout === true) {
    return DEFAULT_FORCE_KILL_TIMEOUT;
  }
  if (!Number.isFinite(forceKillAfterTimeout) || forceKillAfterTimeout < 0) {
    throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${forceKillAfterTimeout}\` (${typeof forceKillAfterTimeout})`);
  }
  return forceKillAfterTimeout;
};
var spawnedCancel = (spawned, context) => {
  const killResult = spawned.kill();
  if (killResult) {
    context.isCanceled = true;
  }
};
var timeoutKill = (spawned, signal, reject) => {
  spawned.kill(signal);
  reject(Object.assign(new Error("Timed out"), { timedOut: true, signal }));
};
var setupTimeout = (spawned, { timeout, killSignal = "SIGTERM" }, spawnedPromise) => {
  if (timeout === 0 || timeout === void 0) {
    return spawnedPromise;
  }
  let timeoutId;
  const timeoutPromise = new Promise((resolve, reject) => {
    timeoutId = setTimeout(() => {
      timeoutKill(spawned, killSignal, reject);
    }, timeout);
  });
  const safeSpawnedPromise = spawnedPromise.finally(() => {
    clearTimeout(timeoutId);
  });
  return Promise.race([timeoutPromise, safeSpawnedPromise]);
};
var validateTimeout = ({ timeout }) => {
  if (timeout !== void 0 && (!Number.isFinite(timeout) || timeout < 0)) {
    throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${timeout}\` (${typeof timeout})`);
  }
};
var setExitHandler = async (spawned, { cleanup, detached }, timedPromise) => {
  if (!cleanup || detached) {
    return timedPromise;
  }
  const removeExitHandler = (0, import_signal_exit.default)(() => {
    spawned.kill();
  });
  return timedPromise.finally(() => {
    removeExitHandler();
  });
};

// node_modules/is-stream/index.js
function isStream(stream) {
  return stream !== null && typeof stream === "object" && typeof stream.pipe === "function";
}

// node_modules/execa/lib/stream.js
var import_get_stream = __toESM(require_get_stream(), 1);
var import_merge_stream = __toESM(require_merge_stream(), 1);
var handleInput = (spawned, input) => {
  if (input === void 0) {
    return;
  }
  if (isStream(input)) {
    input.pipe(spawned.stdin);
  } else {
    spawned.stdin.end(input);
  }
};
var makeAllStream = (spawned, { all }) => {
  if (!all || !spawned.stdout && !spawned.stderr) {
    return;
  }
  const mixed = (0, import_merge_stream.default)();
  if (spawned.stdout) {
    mixed.add(spawned.stdout);
  }
  if (spawned.stderr) {
    mixed.add(spawned.stderr);
  }
  return mixed;
};
var getBufferedData = async (stream, streamPromise) => {
  if (!stream || streamPromise === void 0) {
    return;
  }
  stream.destroy();
  try {
    return await streamPromise;
  } catch (error) {
    return error.bufferedData;
  }
};
var getStreamPromise = (stream, { encoding, buffer, maxBuffer }) => {
  if (!stream || !buffer) {
    return;
  }
  if (encoding) {
    return (0, import_get_stream.default)(stream, { encoding, maxBuffer });
  }
  return import_get_stream.default.buffer(stream, { maxBuffer });
};
var getSpawnedResult = async ({ stdout, stderr, all }, { encoding, buffer, maxBuffer }, processDone) => {
  const stdoutPromise = getStreamPromise(stdout, { encoding, buffer, maxBuffer });
  const stderrPromise = getStreamPromise(stderr, { encoding, buffer, maxBuffer });
  const allPromise = getStreamPromise(all, { encoding, buffer, maxBuffer: maxBuffer * 2 });
  try {
    return await Promise.all([processDone, stdoutPromise, stderrPromise, allPromise]);
  } catch (error) {
    return Promise.all([
      { error, signal: error.signal, timedOut: error.timedOut },
      getBufferedData(stdout, stdoutPromise),
      getBufferedData(stderr, stderrPromise),
      getBufferedData(all, allPromise)
    ]);
  }
};

// node_modules/execa/lib/promise.js
var nativePromisePrototype = (async () => {
})().constructor.prototype;
var descriptors = ["then", "catch", "finally"].map((property) => [
  property,
  Reflect.getOwnPropertyDescriptor(nativePromisePrototype, property)
]);
var mergePromise = (spawned, promise) => {
  for (const [property, descriptor] of descriptors) {
    const value = typeof promise === "function" ? (...args) => Reflect.apply(descriptor.value, promise(), args) : descriptor.value.bind(promise);
    Reflect.defineProperty(spawned, property, { ...descriptor, value });
  }
  return spawned;
};
var getSpawnedPromise = (spawned) => new Promise((resolve, reject) => {
  spawned.on("exit", (exitCode, signal) => {
    resolve({ exitCode, signal });
  });
  spawned.on("error", (error) => {
    reject(error);
  });
  if (spawned.stdin) {
    spawned.stdin.on("error", (error) => {
      reject(error);
    });
  }
});

// node_modules/execa/lib/command.js
var normalizeArgs = (file, args = []) => {
  if (!Array.isArray(args)) {
    return [file];
  }
  return [file, ...args];
};
var NO_ESCAPE_REGEXP = /^[\w.-]+$/;
var DOUBLE_QUOTES_REGEXP = /"/g;
var escapeArg = (arg) => {
  if (typeof arg !== "string" || NO_ESCAPE_REGEXP.test(arg)) {
    return arg;
  }
  return `"${arg.replace(DOUBLE_QUOTES_REGEXP, '\\"')}"`;
};
var joinCommand = (file, args) => normalizeArgs(file, args).join(" ");
var getEscapedCommand = (file, args) => normalizeArgs(file, args).map((arg) => escapeArg(arg)).join(" ");

// node_modules/execa/index.js
var DEFAULT_MAX_BUFFER = 1e3 * 1e3 * 100;
var getEnv = ({ env: envOption, extendEnv, preferLocal, localDir, execPath }) => {
  const env = extendEnv ? { ...import_node_process2.default.env, ...envOption } : envOption;
  if (preferLocal) {
    return npmRunPathEnv({ env, cwd: localDir, execPath });
  }
  return env;
};
var handleArguments = (file, args, options = {}) => {
  const parsed = import_cross_spawn.default._parse(file, args, options);
  file = parsed.command;
  args = parsed.args;
  options = parsed.options;
  options = {
    maxBuffer: DEFAULT_MAX_BUFFER,
    buffer: true,
    stripFinalNewline: true,
    extendEnv: true,
    preferLocal: false,
    localDir: options.cwd || import_node_process2.default.cwd(),
    execPath: import_node_process2.default.execPath,
    encoding: "utf8",
    reject: true,
    cleanup: true,
    all: false,
    windowsHide: true,
    ...options
  };
  options.env = getEnv(options);
  options.stdio = normalizeStdio(options);
  if (import_node_process2.default.platform === "win32" && import_node_path3.default.basename(file, ".exe") === "cmd") {
    args.unshift("/q");
  }
  return { file, args, options, parsed };
};
var handleOutput = (options, value, error) => {
  if (typeof value !== "string" && !import_node_buffer.Buffer.isBuffer(value)) {
    return error === void 0 ? void 0 : "";
  }
  if (options.stripFinalNewline) {
    return stripFinalNewline(value);
  }
  return value;
};
function execa(file, args, options) {
  const parsed = handleArguments(file, args, options);
  const command = joinCommand(file, args);
  const escapedCommand = getEscapedCommand(file, args);
  validateTimeout(parsed.options);
  let spawned;
  try {
    spawned = import_node_child_process.default.spawn(parsed.file, parsed.args, parsed.options);
  } catch (error) {
    const dummySpawned = new import_node_child_process.default.ChildProcess();
    const errorPromise = Promise.reject(makeError({
      error,
      stdout: "",
      stderr: "",
      all: "",
      command,
      escapedCommand,
      parsed,
      timedOut: false,
      isCanceled: false,
      killed: false
    }));
    return mergePromise(dummySpawned, errorPromise);
  }
  const spawnedPromise = getSpawnedPromise(spawned);
  const timedPromise = setupTimeout(spawned, parsed.options, spawnedPromise);
  const processDone = setExitHandler(spawned, parsed.options, timedPromise);
  const context = { isCanceled: false };
  spawned.kill = spawnedKill.bind(null, spawned.kill.bind(spawned));
  spawned.cancel = spawnedCancel.bind(null, spawned, context);
  const handlePromise = async () => {
    const [{ error, exitCode, signal, timedOut }, stdoutResult, stderrResult, allResult] = await getSpawnedResult(spawned, parsed.options, processDone);
    const stdout = handleOutput(parsed.options, stdoutResult);
    const stderr = handleOutput(parsed.options, stderrResult);
    const all = handleOutput(parsed.options, allResult);
    if (error || exitCode !== 0 || signal !== null) {
      const returnedError = makeError({
        error,
        exitCode,
        signal,
        stdout,
        stderr,
        all,
        command,
        escapedCommand,
        parsed,
        timedOut,
        isCanceled: context.isCanceled || (parsed.options.signal ? parsed.options.signal.aborted : false),
        killed: spawned.killed
      });
      if (!parsed.options.reject) {
        return returnedError;
      }
      throw returnedError;
    }
    return {
      command,
      escapedCommand,
      exitCode: 0,
      stdout,
      stderr,
      all,
      failed: false,
      timedOut: false,
      isCanceled: false,
      killed: false
    };
  };
  const handlePromiseOnce = onetime_default(handlePromise);
  handleInput(spawned, parsed.options.input);
  spawned.all = makeAllStream(spawned, parsed.options);
  return mergePromise(spawned, handlePromiseOnce);
}

// src/api/bitwarden.ts
var import_fs5 = require("fs");

// src/utils/passwords.ts
var import_api4 = require("@raycast/api");
var import_crypto = require("crypto");

// src/constants/passwords.ts
var REPROMPT_HASH_SALT = "foobarbazzybaz";

// src/utils/passwords.ts
function getPasswordGeneratingArgs(options) {
  return Object.entries(options).flatMap(([arg, value]) => value ? [`--${arg}`, value] : []);
}
function hashMasterPasswordForReprompting(password) {
  return new Promise((resolve, reject) => {
    (0, import_crypto.pbkdf2)(password, REPROMPT_HASH_SALT, 1e5, 64, "sha512", (error, hashed) => {
      if (error != null) {
        reject(error);
        return;
      }
      resolve(hashed.toString("hex"));
    });
  });
}

// src/utils/preferences.ts
var import_api5 = require("@raycast/api");

// src/constants/preferences.ts
var VAULT_TIMEOUT_OPTIONS = {
  IMMEDIATELY: "0",
  ONE_MINUTE: "60000",
  FIVE_MINUTES: "300000",
  FIFTEEN_MINUTES: "900000",
  THIRTY_MINUTES: "1800000",
  ONE_HOUR: "3600000",
  FOUR_HOURS: "14400000",
  EIGHT_HOURS: "28800000",
  ONE_DAY: "86400000",
  NEVER: "-1",
  SYSTEM_LOCK: "-2",
  SYSTEM_SLEEP: "-3"
};
var VAULT_TIMEOUT = Object.entries(VAULT_TIMEOUT_OPTIONS).reduce((acc, [key, value]) => {
  acc[key] = parseInt(value);
  return acc;
}, {});

// src/constants/labels.ts
var VAULT_TIMEOUT_MS_TO_LABEL = {
  [VAULT_TIMEOUT.IMMEDIATELY]: "Immediately",
  [VAULT_TIMEOUT.ONE_MINUTE]: "1 Minute",
  [VAULT_TIMEOUT.FIVE_MINUTES]: "5 Minutes",
  [VAULT_TIMEOUT.FIFTEEN_MINUTES]: "15 Minutes",
  [VAULT_TIMEOUT.THIRTY_MINUTES]: "30 Minutes",
  [VAULT_TIMEOUT.ONE_HOUR]: "1 Hour",
  [VAULT_TIMEOUT.FOUR_HOURS]: "4 Hours",
  [VAULT_TIMEOUT.EIGHT_HOURS]: "8 Hours",
  [VAULT_TIMEOUT.ONE_DAY]: "1 Day"
};
var CARD_KEY_LABEL = {
  cardholderName: "Cardholder name",
  brand: "Brand",
  number: "Number",
  expMonth: "Expiration month",
  expYear: "Expiration year",
  code: "Security code (CVV)"
};
var ITEM_TYPE_TO_LABEL = {
  [1 /* LOGIN */]: "Login",
  [3 /* CARD */]: "Card",
  [4 /* IDENTITY */]: "Identity",
  [2 /* NOTE */]: "Secure Note",
  [5 /* SSH_KEY */]: "SSH Key"
};

// src/utils/preferences.ts
function getServerUrlPreference() {
  const { serverUrl } = (0, import_api5.getPreferenceValues)();
  return !serverUrl || serverUrl === "bitwarden.com" || serverUrl === "https://bitwarden.com" ? void 0 : serverUrl;
}
var COMMAND_NAME_TO_PREFERENCE_KEY_MAP = {
  search: "transientCopySearch",
  "generate-password": "transientCopyGeneratePassword",
  "generate-password-quick": "transientCopyGeneratePasswordQuick"
};
function getTransientCopyPreference(type) {
  const preferenceKey = COMMAND_NAME_TO_PREFERENCE_KEY_MAP[import_api5.environment.commandName];
  const transientPreference = (0, import_api5.getPreferenceValues)()[preferenceKey];
  if (transientPreference === "never") return false;
  if (transientPreference === "always") return true;
  if (transientPreference === "passwords") return type === "password";
  return true;
}
function getLabelForTimeoutPreference(timeout) {
  return VAULT_TIMEOUT_MS_TO_LABEL[timeout];
}

// src/utils/errors.ts
var ManuallyThrownError = class extends Error {
  constructor(message, stack) {
    super(message);
    this.stack = stack;
  }
};
var DisplayableError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message, stack);
  }
};
var InstalledCLINotFoundError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Bitwarden CLI not found", stack);
    this.name = "InstalledCLINotFoundError";
    this.stack = stack;
  }
};
var FailedToLoadVaultItemsError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Failed to load vault items", stack);
    this.name = "FailedToLoadVaultItemsError";
  }
};
var VaultIsLockedError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Vault is locked", stack);
    this.name = "VaultIsLockedError";
  }
};
var NotLoggedInError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Not logged in", stack);
    this.name = "NotLoggedInError";
  }
};
var EnsureCliBinError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Failed do download Bitwarden CLI", stack);
    this.name = "EnsureCliBinError";
  }
};
var PremiumFeatureError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Premium status is required to use this feature", stack);
    this.name = "PremiumFeatureError";
  }
};
var SendNeedsPasswordError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "This Send has a is protected by a password", stack);
    this.name = "SendNeedsPasswordError";
  }
};
var SendInvalidPasswordError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "The password you entered is invalid", stack);
    this.name = "SendInvalidPasswordError";
  }
};
function tryExec(fn, fallbackValue) {
  try {
    return fn();
  } catch {
    return fallbackValue;
  }
}
function getDisplayableErrorMessage(error) {
  if (error instanceof DisplayableError) return error.message;
  return void 0;
}
var getErrorString = (error) => {
  if (!error) return void 0;
  if (typeof error === "string") return error;
  if (error instanceof Error) {
    const { message, name } = error;
    if (error.stack) return error.stack;
    return `${name}: ${message}`;
  }
  return String(error);
};
function Ok(data) {
  return [data, null];
}
function Err(error) {
  return [null, error];
}
function tryCatch(fnOrPromise) {
  if (typeof fnOrPromise === "function") {
    try {
      return Ok(fnOrPromise());
    } catch (error) {
      return Err(error);
    }
  }
  return fnOrPromise.then((data) => Ok(data)).catch((error) => Err(error));
}

// src/api/bitwarden.ts
var import_path2 = require("path");
var import_promises2 = require("fs/promises");

// src/utils/fs.ts
var import_fs = require("fs");
var import_promises = require("fs/promises");
var import_path = require("path");
var import_node_stream_zip = __toESM(require_node_stream_zip());
function waitForFileAvailable(path3) {
  return new Promise((resolve, reject) => {
    const interval = setInterval(() => {
      if (!(0, import_fs.existsSync)(path3)) return;
      const stats = (0, import_fs.statSync)(path3);
      if (stats.isFile()) {
        clearInterval(interval);
        resolve();
      }
    }, 300);
    setTimeout(() => {
      clearInterval(interval);
      reject(new Error(`File ${path3} not found.`));
    }, 5e3);
  });
}
async function decompressFile(filePath, targetPath) {
  const zip = new import_node_stream_zip.default.async({ file: filePath });
  if (!(0, import_fs.existsSync)(targetPath)) (0, import_fs.mkdirSync)(targetPath, { recursive: true });
  await zip.extract(null, targetPath);
  await zip.close();
}
async function removeFilesThatStartWith(startingWith, path3) {
  let removedAtLeastOne = false;
  try {
    const files = await (0, import_promises.readdir)(path3);
    for await (const file of files) {
      if (!file.startsWith(startingWith)) continue;
      await tryExec(async () => {
        await (0, import_promises.unlink)((0, import_path.join)(path3, file));
        removedAtLeastOne = true;
      });
    }
  } catch {
    return false;
  }
  return removedAtLeastOne;
}
function unlinkAllSync(...paths) {
  for (const path3 of paths) {
    tryExec(() => (0, import_fs.unlinkSync)(path3));
  }
}

// src/utils/network.ts
var import_fs3 = require("fs");
var import_http = __toESM(require("http"));
var import_https = __toESM(require("https"));

// src/utils/development.ts
var import_api6 = require("@raycast/api");
var import_api7 = require("@raycast/api");
var _exceptions = {
  logs: /* @__PURE__ */ new Map(),
  set: (message, error) => {
    capturedExceptions.logs.set(/* @__PURE__ */ new Date(), { message, error });
  },
  clear: () => capturedExceptions.logs.clear(),
  toString: () => {
    let str = "";
    capturedExceptions.logs.forEach((log, date) => {
      if (str.length > 0) str += "\n\n";
      str += `[${date.toISOString()}] ${log.message}`;
      if (log.error) str += `: ${getErrorString(log.error)}`;
    });
    return str;
  }
};
var capturedExceptions = Object.freeze(_exceptions);
var captureException = (description, error, options) => {
  const { captureToRaycast = false } = options ?? {};
  const desc = Array.isArray(description) ? description.filter(Boolean).join(" ") : description || "Captured exception";
  capturedExceptions.set(desc, error);
  if (import_api6.environment.isDevelopment) {
    console.error(desc, error);
  } else if (captureToRaycast) {
    (0, import_api7.captureException)(error);
  }
};
var debugLog = (...args) => {
  if (!import_api6.environment.isDevelopment) return;
  console.debug(...args);
};

// src/utils/crypto.ts
var import_fs2 = require("fs");
var import_crypto2 = require("crypto");
function getFileSha256(filePath) {
  try {
    return (0, import_crypto2.createHash)("sha256").update((0, import_fs2.readFileSync)(filePath)).digest("hex");
  } catch (error) {
    return null;
  }
}

// src/utils/network.ts
function download(url2, path3, options) {
  const { onProgress, sha256 } = options ?? {};
  return new Promise((resolve, reject) => {
    const uri = new URL(url2);
    const protocol = uri.protocol === "https:" ? import_https.default : import_http.default;
    let redirectCount = 0;
    const request = protocol.get(uri.href, (response) => {
      if (response.statusCode && response.statusCode >= 300 && response.statusCode < 400) {
        request.destroy();
        response.destroy();
        const redirectUrl = response.headers.location;
        if (!redirectUrl) {
          reject(new Error(`Redirect response without location header`));
          return;
        }
        if (++redirectCount >= 10) {
          reject(new Error("Too many redirects"));
          return;
        }
        download(redirectUrl, path3, options).then(resolve).catch(reject);
        return;
      }
      if (response.statusCode !== 200) {
        reject(new Error(`Response status ${response.statusCode}: ${response.statusMessage}`));
        return;
      }
      const fileSize = parseInt(response.headers["content-length"] || "0", 10);
      if (fileSize === 0) {
        reject(new Error("Invalid file size"));
        return;
      }
      const fileStream = (0, import_fs3.createWriteStream)(path3, { autoClose: true });
      let downloadedBytes = 0;
      const cleanup = () => {
        request.destroy();
        response.destroy();
        fileStream.close();
      };
      const cleanupAndReject = (error) => {
        cleanup();
        reject(error);
      };
      response.on("data", (chunk) => {
        downloadedBytes += chunk.length;
        const percent = Math.floor(downloadedBytes / fileSize * 100);
        onProgress?.(percent);
      });
      fileStream.on("finish", async () => {
        try {
          await waitForFileAvailable(path3);
          if (sha256) await waitForHashToMatch(path3, sha256);
          resolve();
        } catch (error) {
          reject(error);
        } finally {
          cleanup();
        }
      });
      fileStream.on("error", (error) => {
        captureException(`File stream error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      response.on("error", (error) => {
        captureException(`Response error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      request.on("error", (error) => {
        captureException(`Request error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      response.pipe(fileStream);
    });
  });
}
function waitForHashToMatch(path3, sha256) {
  return new Promise((resolve, reject) => {
    const fileSha = getFileSha256(path3);
    if (!fileSha) return reject(new Error(`Could not generate hash for file ${path3}.`));
    if (fileSha === sha256) return resolve();
    const interval = setInterval(() => {
      if (getFileSha256(path3) === sha256) {
        clearInterval(interval);
        resolve();
      }
    }, 1e3);
    setTimeout(() => {
      clearInterval(interval);
      reject(new Error(`Hash did not match, expected ${sha256.substring(0, 7)}, got ${fileSha.substring(0, 7)}.`));
    }, 5e3);
  });
}

// src/api/bitwarden.helpers.ts
function prepareSendPayload(template, values) {
  return {
    ...template,
    ...values,
    file: values.file ? { ...template.file, ...values.file } : template.file,
    text: values.text ? { ...template.text, ...values.text } : template.text
  };
}

// src/utils/cache.ts
var import_api8 = require("@raycast/api");
var Cache = new import_api8.Cache({ namespace: "bw-cache" });

// src/utils/platform.ts
var platform = process.platform === "darwin" ? "macos" : "windows";

// src/api/bitwarden.ts
var { supportPath } = import_api9.environment;
var \u0394 = "4";
var BinDownloadLogger = (() => {
  const filePath = (0, import_path2.join)(supportPath, `bw-bin-download-error-${\u0394}.log`);
  return {
    logError: (error) => tryExec(() => (0, import_fs5.writeFileSync)(filePath, error?.message ?? "Unexpected error")),
    clearError: () => tryExec(() => (0, import_fs5.unlinkSync)(filePath)),
    hasError: () => tryExec(() => (0, import_fs5.existsSync)(filePath), false)
  };
})();
var cliInfo = {
  version: "2025.2.0",
  get sha256() {
    if (platform === "windows") return "33a131017ac9c99d721e430a86e929383314d3f91c9f2fbf413d872565654c18";
    return "fade51012a46011c016a2e5aee2f2e534c1ed078e49d1178a69e2889d2812a96";
  },
  downloadPage: "https://github.com/bitwarden/clients/releases",
  path: {
    get downloadedBin() {
      return (0, import_path2.join)(supportPath, cliInfo.binFilenameVersioned);
    },
    get installedBin() {
      if (platform === "windows") return "C:\\ProgramData\\chocolatey\\bin\\bw.exe";
      return process.arch === "arm64" ? "/opt/homebrew/bin/bw" : "/usr/local/bin/bw";
    },
    get bin() {
      return !BinDownloadLogger.hasError() ? this.downloadedBin : this.installedBin;
    }
  },
  get binFilename() {
    return platform === "windows" ? "bw.exe" : "bw";
  },
  get binFilenameVersioned() {
    const name = `bw-${this.version}`;
    return platform === "windows" ? `${name}.exe` : `${name}`;
  },
  get downloadUrl() {
    let archSuffix = "";
    if (platform === "macos") {
      archSuffix = process.arch === "arm64" ? "-arm64" : "";
    }
    return `${this.downloadPage}/download/cli-v${this.version}/bw-${platform}${archSuffix}-${this.version}.zip`;
  }
};
var Bitwarden = class {
  constructor(toastInstance) {
    this.actionListeners = /* @__PURE__ */ new Map();
    this.preferences = (0, import_api9.getPreferenceValues)();
    this.wasCliUpdated = false;
    this.showToast = async (toastOpts) => {
      if (this.toastInstance) {
        const previousStateToastOpts = {
          message: this.toastInstance.message,
          title: this.toastInstance.title,
          primaryAction: this.toastInstance.primaryAction,
          secondaryAction: this.toastInstance.secondaryAction
        };
        if (toastOpts.style) this.toastInstance.style = toastOpts.style;
        this.toastInstance.message = toastOpts.message;
        this.toastInstance.title = toastOpts.title;
        this.toastInstance.primaryAction = toastOpts.primaryAction;
        this.toastInstance.secondaryAction = toastOpts.secondaryAction;
        await this.toastInstance.show();
        return Object.assign(this.toastInstance, {
          restore: async () => {
            await this.showToast(previousStateToastOpts);
          }
        });
      } else {
        const toast = await (0, import_api9.showToast)(toastOpts);
        return Object.assign(toast, { restore: () => toast.hide() });
      }
    };
    const { cliPath: cliPathPreference, clientId, clientSecret, serverCertsPath } = this.preferences;
    const serverUrl = getServerUrlPreference();
    this.toastInstance = toastInstance;
    this.cliPath = cliPathPreference || cliInfo.path.bin;
    this.env = {
      BITWARDENCLI_APPDATA_DIR: supportPath,
      BW_CLIENTSECRET: clientSecret.trim(),
      BW_CLIENTID: clientId.trim(),
      PATH: (0, import_path2.dirname)(process.execPath),
      ...serverUrl && serverCertsPath ? { NODE_EXTRA_CA_CERTS: serverCertsPath } : {}
    };
    this.initPromise = (async () => {
      await this.ensureCliBinary();
      void this.retrieveAndCacheCliVersion();
      await this.checkServerUrl(serverUrl);
    })();
  }
  async ensureCliBinary() {
    if (this.checkCliBinIsReady(this.cliPath)) return;
    if (this.cliPath === this.preferences.cliPath || this.cliPath === cliInfo.path.installedBin) {
      throw new InstalledCLINotFoundError(`Bitwarden CLI not found at ${this.cliPath}`);
    }
    if (BinDownloadLogger.hasError()) BinDownloadLogger.clearError();
    const hadOldBinaries = await removeFilesThatStartWith("bw-", supportPath);
    const toast = await this.showToast({
      title: `${hadOldBinaries ? "Updating" : "Initializing"} Bitwarden CLI`,
      style: import_api9.Toast.Style.Animated,
      primaryAction: { title: "Open Download Page", onAction: () => (0, import_api9.open)(cliInfo.downloadPage) }
    });
    const tmpFileName = "bw.zip";
    const zipPath = (0, import_path2.join)(supportPath, tmpFileName);
    try {
      try {
        toast.message = "Downloading...";
        await download(cliInfo.downloadUrl, zipPath, {
          onProgress: (percent) => toast.message = `Downloading ${percent}%`,
          sha256: cliInfo.sha256
        });
      } catch (downloadError) {
        toast.title = "Failed to download Bitwarden CLI";
        throw downloadError;
      }
      try {
        toast.message = "Extracting...";
        await decompressFile(zipPath, supportPath);
        const decompressedBinPath = (0, import_path2.join)(supportPath, cliInfo.binFilename);
        await (0, import_promises2.rename)(decompressedBinPath, this.cliPath).catch(() => null);
        await waitForFileAvailable(this.cliPath);
        await (0, import_promises2.chmod)(this.cliPath, "755");
        await (0, import_promises2.rm)(zipPath, { force: true });
        Cache.set(CACHE_KEYS.CLI_VERSION, cliInfo.version);
        this.wasCliUpdated = true;
      } catch (extractError) {
        toast.title = "Failed to extract Bitwarden CLI";
        throw extractError;
      }
      await toast.hide();
    } catch (error) {
      toast.message = error instanceof EnsureCliBinError ? error.message : "Please try again";
      toast.style = import_api9.Toast.Style.Failure;
      unlinkAllSync(zipPath, this.cliPath);
      if (!import_api9.environment.isDevelopment) BinDownloadLogger.logError(error);
      if (error instanceof Error) throw new EnsureCliBinError(error.message, error.stack);
      throw error;
    } finally {
      await toast.restore();
    }
  }
  async retrieveAndCacheCliVersion() {
    try {
      const { error, result } = await this.getVersion();
      if (!error) Cache.set(CACHE_KEYS.CLI_VERSION, result);
    } catch (error) {
      captureException("Failed to retrieve and cache cli version", error, { captureToRaycast: true });
    }
  }
  checkCliBinIsReady(filePath) {
    try {
      if (!(0, import_fs5.existsSync)(this.cliPath)) return false;
      (0, import_fs5.accessSync)(filePath, import_fs5.constants.X_OK);
      return true;
    } catch {
      (0, import_fs5.chmodSync)(filePath, "755");
      return true;
    }
  }
  setSessionToken(token) {
    this.env = {
      ...this.env,
      BW_SESSION: token
    };
  }
  clearSessionToken() {
    delete this.env.BW_SESSION;
  }
  withSession(token) {
    this.tempSessionToken = token;
    return this;
  }
  async initialize() {
    await this.initPromise;
    return this;
  }
  async checkServerUrl(serverUrl) {
    const storedServer = await import_api9.LocalStorage.getItem(LOCAL_STORAGE_KEY.SERVER_URL);
    if (!serverUrl || storedServer === serverUrl) return;
    const toast = await this.showToast({
      style: import_api9.Toast.Style.Animated,
      title: "Switching server...",
      message: "Bitwarden server preference changed"
    });
    try {
      try {
        await this.logout();
      } catch {
      }
      await this.exec(["config", "server", serverUrl || DEFAULT_SERVER_URL], { resetVaultTimeout: false });
      await import_api9.LocalStorage.setItem(LOCAL_STORAGE_KEY.SERVER_URL, serverUrl);
      toast.style = import_api9.Toast.Style.Success;
      toast.title = "Success";
      toast.message = "Bitwarden server changed";
    } catch (error) {
      toast.style = import_api9.Toast.Style.Failure;
      toast.title = "Failed to switch server";
      if (error instanceof Error) {
        toast.message = error.message;
      } else {
        toast.message = "Unknown error occurred";
      }
    } finally {
      await toast.restore();
    }
  }
  async exec(args, options) {
    const { abortController, input = "", resetVaultTimeout } = options ?? {};
    let env = this.env;
    if (this.tempSessionToken) {
      env = { ...env, BW_SESSION: this.tempSessionToken };
      this.tempSessionToken = void 0;
    }
    const result = await execa(this.cliPath, args, { input, env, signal: abortController?.signal });
    if (this.isPromptWaitingForMasterPassword(result)) {
      await this.lock();
      throw new VaultIsLockedError();
    }
    if (resetVaultTimeout) {
      await import_api9.LocalStorage.setItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME, (/* @__PURE__ */ new Date()).toISOString());
    }
    return result;
  }
  async getVersion() {
    try {
      const { stdout: result } = await this.exec(["--version"], { resetVaultTimeout: false });
      return { result };
    } catch (execError) {
      captureException("Failed to get cli version", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async login() {
    try {
      await this.exec(["login", "--apikey"], { resetVaultTimeout: true });
      await this.saveLastVaultStatus("login", "unlocked");
      await this.callActionListeners("login");
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to login", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async logout(options) {
    const { reason, immediate = false } = options ?? {};
    try {
      if (immediate) await this.handlePostLogout(reason);
      await this.exec(["logout"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("logout", "unauthenticated");
      if (!immediate) await this.handlePostLogout(reason);
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to logout", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async lock(options) {
    const { reason, checkVaultStatus = false, immediate = false } = options ?? {};
    try {
      if (immediate) await this.callActionListeners("lock", reason);
      if (checkVaultStatus) {
        const { error, result } = await this.status();
        if (error) throw error;
        if (result.status === "unauthenticated") return { error: new NotLoggedInError("Not logged in") };
      }
      await this.exec(["lock"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("lock", "locked");
      if (!immediate) await this.callActionListeners("lock", reason);
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to lock vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async unlock(password) {
    try {
      const { stdout: sessionToken } = await this.exec(["unlock", password, "--raw"], { resetVaultTimeout: true });
      this.setSessionToken(sessionToken);
      await this.saveLastVaultStatus("unlock", "unlocked");
      await this.callActionListeners("unlock", password, sessionToken);
      return { result: sessionToken };
    } catch (execError) {
      captureException("Failed to unlock vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async sync() {
    try {
      await this.exec(["sync"], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to sync vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async getItem(id) {
    try {
      const { stdout } = await this.exec(["get", "item", id], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get item", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async listItems() {
    try {
      const { stdout } = await this.exec(["list", "items"], { resetVaultTimeout: true });
      const items = JSON.parse(stdout);
      return { result: items.filter((item) => !!item.name) };
    } catch (execError) {
      captureException("Failed to list items", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createLoginItem(options) {
    try {
      const { error: itemTemplateError, result: itemTemplate } = await this.getTemplate("item");
      if (itemTemplateError) throw itemTemplateError;
      const { error: loginTemplateError, result: loginTemplate } = await this.getTemplate("item.login");
      if (loginTemplateError) throw loginTemplateError;
      itemTemplate.name = options.name;
      itemTemplate.type = 1 /* LOGIN */;
      itemTemplate.folderId = options.folderId || null;
      itemTemplate.login = loginTemplate;
      itemTemplate.notes = null;
      loginTemplate.username = options.username || null;
      loginTemplate.password = options.password;
      loginTemplate.totp = null;
      loginTemplate.fido2Credentials = void 0;
      if (options.uri) {
        loginTemplate.uris = [{ match: null, uri: options.uri }];
      }
      const { result: encodedItem, error: encodeError } = await this.encode(JSON.stringify(itemTemplate));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["create", "item", encodedItem], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to create login item", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async listFolders() {
    try {
      const { stdout } = await this.exec(["list", "folders"], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to list folder", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createFolder(name) {
    try {
      const { error, result: folder } = await this.getTemplate("folder");
      if (error) throw error;
      folder.name = name;
      const { result: encodedFolder, error: encodeError } = await this.encode(JSON.stringify(folder));
      if (encodeError) throw encodeError;
      await this.exec(["create", "folder", encodedFolder], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to create folder", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async getTotp(id) {
    try {
      const { stdout } = await this.exec(["get", "totp", id], { resetVaultTimeout: true });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to get TOTP", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async status() {
    try {
      const { stdout } = await this.exec(["status"], { resetVaultTimeout: false });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get status", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async checkLockStatus() {
    try {
      await this.exec(["unlock", "--check"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("checkLockStatus", "unlocked");
      return "unlocked";
    } catch (error) {
      captureException("Failed to check lock status", error);
      const errorMessage = error.stderr;
      if (errorMessage === "Vault is locked.") {
        await this.saveLastVaultStatus("checkLockStatus", "locked");
        return "locked";
      }
      await this.saveLastVaultStatus("checkLockStatus", "unauthenticated");
      return "unauthenticated";
    }
  }
  async getTemplate(type) {
    try {
      const { stdout } = await this.exec(["get", "template", type], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get template", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async encode(input) {
    try {
      const { stdout } = await this.exec(["encode"], { input, resetVaultTimeout: false });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to encode", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async generatePassword(options, abortController) {
    const args = options ? getPasswordGeneratingArgs(options) : [];
    const { stdout } = await this.exec(["generate", ...args], { abortController, resetVaultTimeout: false });
    return stdout;
  }
  async listSends() {
    try {
      const { stdout } = await this.exec(["send", "list"], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to list sends", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createSend(values) {
    try {
      const { error: templateError, result: template } = await this.getTemplate(
        values.type === 0 /* Text */ ? "send.text" : "send.file"
      );
      if (templateError) throw templateError;
      const payload = prepareSendPayload(template, values);
      const { result: encodedPayload, error: encodeError } = await this.encode(JSON.stringify(payload));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["send", "create", encodedPayload], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to create send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async editSend(values) {
    try {
      const { result: encodedPayload, error: encodeError } = await this.encode(JSON.stringify(values));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["send", "edit", encodedPayload], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to delete send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async deleteSend(id) {
    try {
      await this.exec(["send", "delete", id], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to delete send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async removeSendPassword(id) {
    try {
      await this.exec(["send", "remove-password", id], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to remove send password", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async receiveSendInfo(url2, options) {
    try {
      const { stdout, stderr } = await this.exec(["send", "receive", url2, "--obj"], {
        resetVaultTimeout: true,
        input: options?.password
      });
      if (!stdout && /Invalid password/i.test(stderr)) return { error: new SendInvalidPasswordError() };
      if (!stdout && /Send password/i.test(stderr)) return { error: new SendNeedsPasswordError() };
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      const errorMessage = execError.stderr;
      if (/Invalid password/gi.test(errorMessage)) return { error: new SendInvalidPasswordError() };
      if (/Send password/gi.test(errorMessage)) return { error: new SendNeedsPasswordError() };
      captureException("Failed to receive send obj", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async receiveSend(url2, options) {
    try {
      const { savePath, password } = options ?? {};
      const args = ["send", "receive", url2];
      if (savePath) args.push("--output", savePath);
      const { stdout } = await this.exec(args, { resetVaultTimeout: true, input: password });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to receive send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  // utils below
  async saveLastVaultStatus(callName, status) {
    await import_api9.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS, status);
  }
  async getLastSavedVaultStatus() {
    const lastSavedStatus = await import_api9.LocalStorage.getItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS);
    if (!lastSavedStatus) {
      const vaultStatus = await this.status();
      return vaultStatus.result?.status;
    }
    return lastSavedStatus;
  }
  isPromptWaitingForMasterPassword(result) {
    return !!(result.stderr && result.stderr.includes("Master password"));
  }
  async handlePostLogout(reason) {
    this.clearSessionToken();
    await this.callActionListeners("logout", reason);
  }
  async handleCommonErrors(error) {
    const errorMessage = error.stderr;
    if (!errorMessage) return {};
    if (/not logged in/i.test(errorMessage)) {
      await this.handlePostLogout();
      return { error: new NotLoggedInError("Not logged in") };
    }
    if (/Premium status/i.test(errorMessage)) {
      return { error: new PremiumFeatureError() };
    }
    return {};
  }
  setActionListener(action, listener) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      listeners.add(listener);
    } else {
      this.actionListeners.set(action, /* @__PURE__ */ new Set([listener]));
    }
    return this;
  }
  removeActionListener(action, listener) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      listeners.delete(listener);
    }
    return this;
  }
  async callActionListeners(action, ...args) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      for (const listener of listeners) {
        try {
          await listener?.(...args);
        } catch (error) {
          captureException(`Error calling bitwarden action listener for ${action}`, error);
        }
      }
    }
  }
};

// src/components/LoadingFallback.tsx
var import_api10 = require("@raycast/api");
var import_jsx_runtime3 = require("react/jsx-runtime");
var LoadingFallback = () => /* @__PURE__ */ (0, import_jsx_runtime3.jsx)(import_api10.Form, { isLoading: true });

// src/utils/hooks/useOnceEffect.ts
var import_react3 = require("react");
function useOnceEffect(effect, condition) {
  const hasRun = (0, import_react3.useRef)(false);
  (0, import_react3.useEffect)(() => {
    if (hasRun.current) return;
    if (condition !== void 0 && !condition) return;
    hasRun.current = true;
    void effect();
  }, [condition]);
}
var useOnceEffect_default = useOnceEffect;

// src/context/bitwarden.tsx
var import_jsx_runtime4 = require("react/jsx-runtime");
var BitwardenContext = (0, import_react4.createContext)(null);
var BitwardenProvider = ({ children, loadingFallback = /* @__PURE__ */ (0, import_jsx_runtime4.jsx)(LoadingFallback, {}) }) => {
  const [bitwarden, setBitwarden] = (0, import_react4.useState)();
  const [error, setError] = (0, import_react4.useState)();
  useOnceEffect_default(() => {
    void new Bitwarden().initialize().then(setBitwarden).catch(handleBwInitError);
  });
  function handleBwInitError(error2) {
    if (error2 instanceof InstalledCLINotFoundError) {
      setError(error2);
    } else {
      throw error2;
    }
  }
  if (error) return /* @__PURE__ */ (0, import_jsx_runtime4.jsx)(TroubleshootingGuide_default, { error });
  if (!bitwarden) return loadingFallback;
  return /* @__PURE__ */ (0, import_jsx_runtime4.jsx)(BitwardenContext.Provider, { value: bitwarden, children });
};
var useBitwarden = () => {
  const context = (0, import_react4.useContext)(BitwardenContext);
  if (context == null) {
    throw new Error("useBitwarden must be used within a BitwardenProvider");
  }
  return context;
};

// src/utils/objects.ts
function isObject(obj) {
  return typeof obj === "object" && obj !== null && !Array.isArray(obj);
}

// src/utils/debug.ts
function treatError(error, options) {
  try {
    const execaError = error;
    let errorString;
    if (execaError?.stderr) {
      errorString = execaError.stderr;
    } else if (error instanceof Error) {
      errorString = `${error.name}: ${error.message}`;
    } else if (isObject(error)) {
      errorString = JSON.stringify(error);
    } else {
      errorString = `${error}`;
    }
    if (!errorString) return "";
    if (!options?.omitSensitiveValue) return errorString;
    return omitSensitiveValueFromString(errorString, options.omitSensitiveValue);
  } catch {
    return "";
  }
}
function omitSensitiveValueFromString(value, sensitiveValue) {
  return value.replace(new RegExp(sensitiveValue, "i"), "[REDACTED]");
}

// src/utils/hooks/useVaultMessages.ts
var import_api11 = require("@raycast/api");
var import_react5 = require("react");
function useVaultMessages() {
  const bitwarden = useBitwarden();
  const [vaultState, setVaultState] = (0, import_react5.useState)(null);
  (0, import_react5.useEffect)(() => {
    void bitwarden.status().then(({ error, result }) => {
      if (!error) setVaultState(result);
    }).catch(() => {
    });
  }, []);
  const shouldShowServer = !!getServerUrlPreference();
  let userMessage = "...";
  let serverMessage = "...";
  if (vaultState) {
    const { status, userEmail, serverUrl } = vaultState;
    userMessage = status == "unauthenticated" ? "\u274C Logged out" : `\u{1F512} Locked (${userEmail})`;
    if (serverUrl) {
      serverMessage = serverUrl || "";
    } else if (!serverUrl && shouldShowServer || serverUrl && !shouldShowServer) {
      void (0, import_api11.confirmAlert)({
        icon: import_api11.Icon.ExclamationMark,
        title: "Restart Required",
        message: "Bitwarden server URL preference has been changed since the extension was opened.",
        primaryAction: {
          title: "Close Extension"
        },
        dismissAction: {
          title: "Close Raycast",
          // Only here to provide the necessary second option
          style: import_api11.Alert.ActionStyle.Cancel
        }
      }).then((closeExtension) => {
        if (closeExtension) {
          void (0, import_api11.popToRoot)();
        } else {
          void (0, import_api11.closeMainWindow)();
        }
      });
    }
  }
  return { userMessage, serverMessage, shouldShowServer };
}
var useVaultMessages_default = useVaultMessages;

// src/utils/localstorage.ts
var import_api12 = require("@raycast/api");
function useLocalStorageItem(key, defaultValue) {
  const { data: value, revalidate, isLoading } = $cefc05764ce5eacd$export$dd6b79aaabe7bc37(() => import_api12.LocalStorage.getItem(key));
  const set = async (value2) => {
    await import_api12.LocalStorage.setItem(key, value2);
    await revalidate();
  };
  const remove = async () => {
    await import_api12.LocalStorage.removeItem(key);
    await revalidate();
  };
  return [value ?? defaultValue, { isLoading, set, remove }];
}

// src/components/UnlockForm.tsx
var import_jsx_runtime5 = require("react/jsx-runtime");
var UnlockForm = ({ pendingAction = Promise.resolve() }) => {
  const bitwarden = useBitwarden();
  const { userMessage, serverMessage, shouldShowServer } = useVaultMessages_default();
  const [isLoading, setLoading] = (0, import_react6.useState)(false);
  const [unlockError, setUnlockError] = (0, import_react6.useState)(void 0);
  const [showPassword, setShowPassword] = (0, import_react6.useState)(false);
  const [password, setPassword] = (0, import_react6.useState)("");
  const [lockReason, { remove: clearLockReason }] = useLocalStorageItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON);
  async function onSubmit() {
    if (password.length === 0) return;
    const toast = await (0, import_api13.showToast)(import_api13.Toast.Style.Animated, "Unlocking Vault...", "Please wait");
    try {
      setLoading(true);
      setUnlockError(void 0);
      await pendingAction;
      const { error, result: vaultState } = await bitwarden.status();
      if (error) throw error;
      if (vaultState.status === "unauthenticated") {
        try {
          const { error: error2 } = await bitwarden.login();
          if (error2) throw error2;
        } catch (error2) {
          const {
            displayableError = `Please check your ${shouldShowServer ? "Server URL, " : ""}API Key and Secret.`,
            treatedError
          } = getUsefulError(error2, password);
          await (0, import_api13.showToast)(import_api13.Toast.Style.Failure, "Failed to log in", displayableError);
          setUnlockError(treatedError);
          captureException("Failed to log in", error2);
          return;
        }
      }
      await bitwarden.unlock(password);
      await clearLockReason();
      await toast.hide();
    } catch (error) {
      const { displayableError = "Please check your credentials", treatedError } = getUsefulError(error, password);
      await (0, import_api13.showToast)(import_api13.Toast.Style.Failure, "Failed to unlock vault", displayableError);
      setUnlockError(treatedError);
      captureException("Failed to unlock vault", error);
    } finally {
      setLoading(false);
    }
  }
  const copyUnlockError = async () => {
    if (!unlockError) return;
    await import_api13.Clipboard.copy(unlockError);
    await (0, import_api13.showToast)(import_api13.Toast.Style.Success, "Error copied to clipboard");
  };
  let PasswordField = import_api13.Form.PasswordField;
  let passwordFieldId = "password";
  if (showPassword) {
    PasswordField = import_api13.Form.TextField;
    passwordFieldId = "plainPassword";
  }
  return /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(
    import_api13.Form,
    {
      actions: /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_api13.ActionPanel, { children: [
        !isLoading && /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_jsx_runtime5.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Action.SubmitForm, { icon: import_api13.Icon.LockUnlocked, title: "Unlock", onSubmit }),
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
            import_api13.Action,
            {
              icon: showPassword ? import_api13.Icon.EyeDisabled : import_api13.Icon.Eye,
              title: showPassword ? "Hide Password" : "Show Password",
              onAction: () => setShowPassword((prev) => !prev),
              shortcut: { macOS: { key: "e", modifiers: ["opt"] }, windows: { key: "e", modifiers: ["alt"] } }
            }
          )
        ] }),
        !!unlockError && /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          import_api13.Action,
          {
            onAction: copyUnlockError,
            title: "Copy Last Error",
            icon: import_api13.Icon.Bug,
            style: import_api13.Action.Style.Destructive
          }
        ),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(DebuggingBugReportingActionSection, {})
      ] }),
      children: [
        shouldShowServer && /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "Server URL", text: serverMessage }),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "Vault Status", text: userMessage }),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          PasswordField,
          {
            id: passwordFieldId,
            title: "Master Password",
            value: password,
            onChange: setPassword,
            ref: (field) => field?.focus()
          }
        ),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          import_api13.Form.Description,
          {
            title: "",
            text: `Press ${platform === "macos" ? "\u2325" : "Alt"}+E to ${showPassword ? "hide" : "show"} password`
          }
        ),
        !!lockReason && /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_jsx_runtime5.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "\u2139\uFE0F", text: lockReason }),
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(TimeoutInfoDescription, {})
        ] })
      ]
    }
  );
};
function TimeoutInfoDescription() {
  const vaultTimeoutMs = (0, import_api13.getPreferenceValues)().repromptIgnoreDuration;
  const timeoutLabel = getLabelForTimeoutPreference(vaultTimeoutMs);
  if (!timeoutLabel) return null;
  return /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
    import_api13.Form.Description,
    {
      title: "",
      text: `Timeout is set to ${timeoutLabel}, this can be configured in the extension settings`
    }
  );
}
function getUsefulError(error, password) {
  const treatedError = treatError(error, { omitSensitiveValue: password });
  let displayableError;
  if (/Invalid master password/i.test(treatedError)) {
    displayableError = "Invalid master password";
  } else if (/Invalid API Key/i.test(treatedError)) {
    displayableError = "Invalid Client ID or Secret";
  }
  return { displayableError, treatedError };
}
var UnlockForm_default = UnlockForm;

// src/components/searchVault/VaultLoadingFallback.tsx
var import_api14 = require("@raycast/api");
var import_jsx_runtime6 = require("react/jsx-runtime");
var VaultLoadingFallback = () => /* @__PURE__ */ (0, import_jsx_runtime6.jsx)(import_api14.List, { searchBarPlaceholder: "Search vault", isLoading: true });

// src/context/session/reducer.ts
var import_react7 = require("react");
var initialState = {
  token: void 0,
  passwordHash: void 0,
  isLoading: true,
  isLocked: false,
  isAuthenticated: false
};
var useSessionReducer = () => {
  return (0, import_react7.useReducer)((state, action) => {
    switch (action.type) {
      case "loadState": {
        const { type: _, ...actionPayload } = action;
        return { ...state, ...actionPayload };
      }
      case "lock": {
        return {
          ...state,
          token: void 0,
          passwordHash: void 0,
          isLoading: false,
          isLocked: true
        };
      }
      case "unlock": {
        return {
          ...state,
          token: action.token,
          passwordHash: action.passwordHash,
          isLocked: false,
          isAuthenticated: true
        };
      }
      case "logout": {
        return {
          ...state,
          token: void 0,
          passwordHash: void 0,
          isLocked: true,
          isAuthenticated: false,
          isLoading: false
        };
      }
      case "vaultTimeout": {
        return {
          ...state,
          isLocked: true
        };
      }
      case "finishLoadingSavedState": {
        if (!state.token || !state.passwordHash) {
          throw new Error("Missing required fields: token, passwordHash");
        }
        const hasToken = !!state.token;
        return {
          ...state,
          isLoading: false,
          isLocked: !hasToken,
          isAuthenticated: hasToken
        };
      }
      case "failLoadingSavedState": {
        return {
          ...state,
          isLoading: false,
          isLocked: true
        };
      }
      default: {
        return state;
      }
    }
  }, initialState);
};

// src/context/session/utils.ts
var import_api15 = require("@raycast/api");
var import_child_process = require("child_process");
var import_util = require("util");
var exec = (0, import_util.promisify)(import_child_process.exec);
var SessionStorage = {
  getSavedSession: () => {
    return Promise.all([
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.REPROMPT_HASH),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS)
    ]);
  },
  clearSession: async () => {
    await Promise.all([
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.REPROMPT_HASH)
    ]);
  },
  saveSession: async (token, passwordHash) => {
    await Promise.all([
      import_api15.LocalStorage.setItem(LOCAL_STORAGE_KEY.SESSION_TOKEN, token),
      import_api15.LocalStorage.setItem(LOCAL_STORAGE_KEY.REPROMPT_HASH, passwordHash)
    ]);
  },
  logoutClearSession: async () => {
    await Promise.all([
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.REPROMPT_HASH),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME)
    ]);
  }
};
var checkSystemLockedSinceLastAccess = (lastActivityTime) => {
  return checkSystemLogTimeAfter(lastActivityTime, (time) => getLastSyslog(time, "handleUnlockResult"));
};
var checkSystemSleptSinceLastAccess = (lastActivityTime) => {
  return checkSystemLogTimeAfter(lastActivityTime, (time) => getLastSyslog(time, "sleep 0"));
};
function getLastSyslog(hours, filter) {
  return exec(
    `log show --style syslog --predicate "process == 'loginwindow'" --info --last ${hours}h | grep "${filter}" | tail -n 1`
  );
}
async function checkSystemLogTimeAfter(time, getLogEntry) {
  const lastScreenLockTime = await getSystemLogTime(getLogEntry);
  if (!lastScreenLockTime) return true;
  return new Date(lastScreenLockTime).getTime() > time.getTime();
}
var getSystemLogTime_INCREMENT_HOURS = 2;
var getSystemLogTime_MAX_RETRIES = 5;
async function getSystemLogTime(getLogEntry, timeSpanHours = 1, retryAttempt = 0) {
  try {
    if (retryAttempt > getSystemLogTime_MAX_RETRIES) {
      debugLog("Max retry attempts reached to get last screen lock time");
      return void 0;
    }
    const { stdout, stderr } = await getLogEntry(timeSpanHours);
    const [logDate, logTime] = stdout?.split(" ") ?? [];
    if (stderr || !logDate || !logTime) {
      return getSystemLogTime(getLogEntry, timeSpanHours + getSystemLogTime_INCREMENT_HOURS, retryAttempt + 1);
    }
    const logFullDate = /* @__PURE__ */ new Date(`${logDate}T${logTime}`);
    if (!logFullDate || logFullDate.toString() === "Invalid Date") return void 0;
    return logFullDate;
  } catch (error) {
    captureException("Failed to get last screen lock time", error);
    return void 0;
  }
}

// src/context/session/session.tsx
var import_jsx_runtime7 = require("react/jsx-runtime");
var SessionContext = (0, import_react8.createContext)(null);
function SessionProvider(props) {
  const { children, loadingFallback = /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(VaultLoadingFallback, {}), unlock } = props;
  const bitwarden = useBitwarden();
  const [state, dispatch] = useSessionReducer();
  const pendingActionRef = (0, import_react8.useRef)(Promise.resolve());
  useOnceEffect_default(bootstrapSession, bitwarden);
  async function bootstrapSession() {
    try {
      bitwarden.setActionListener("lock", handleLock).setActionListener("unlock", handleUnlock).setActionListener("logout", handleLogout);
      const [token, passwordHash, lastActivityTimeString, lastVaultStatus] = await SessionStorage.getSavedSession();
      if (!token || !passwordHash) throw new LockVaultError();
      dispatch({ type: "loadState", token, passwordHash });
      bitwarden.setSessionToken(token);
      if (bitwarden.wasCliUpdated) throw new LogoutVaultError(VAULT_LOCK_MESSAGES.CLI_UPDATED);
      if (lastVaultStatus === "locked") throw new LockVaultError();
      if (lastVaultStatus === "unauthenticated") throw new LogoutVaultError();
      if (lastActivityTimeString) {
        const lastActivityTime = new Date(lastActivityTimeString);
        const vaultTimeoutMs = +(0, import_api16.getPreferenceValues)().repromptIgnoreDuration;
        if (platform === "macos" && vaultTimeoutMs === VAULT_TIMEOUT.SYSTEM_LOCK) {
          if (await checkSystemLockedSinceLastAccess(lastActivityTime)) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.SYSTEM_LOCK);
          }
        } else if (platform === "macos" && vaultTimeoutMs === VAULT_TIMEOUT.SYSTEM_SLEEP) {
          if (await checkSystemSleptSinceLastAccess(lastActivityTime)) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.SYSTEM_SLEEP);
          }
        } else if (vaultTimeoutMs !== VAULT_TIMEOUT.NEVER) {
          const timeElapseSinceLastActivity = Date.now() - lastActivityTime.getTime();
          if (vaultTimeoutMs === VAULT_TIMEOUT.IMMEDIATELY || timeElapseSinceLastActivity >= vaultTimeoutMs) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.TIMEOUT);
          }
        }
      }
      dispatch({ type: "finishLoadingSavedState" });
    } catch (error) {
      if (error instanceof LockVaultError) {
        pendingActionRef.current = bitwarden.lock({ reason: error.message, immediate: true, checkVaultStatus: true });
      } else if (error instanceof LogoutVaultError) {
        pendingActionRef.current = bitwarden.logout({ reason: error.message, immediate: true });
      } else {
        pendingActionRef.current = bitwarden.lock({ immediate: true });
        dispatch({ type: "failLoadingSavedState" });
        captureException("Failed to bootstrap session state", error);
      }
    }
  }
  async function handleUnlock(password, token) {
    const passwordHash = await hashMasterPasswordForReprompting(password);
    await SessionStorage.saveSession(token, passwordHash);
    await import_api16.LocalStorage.removeItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON);
    dispatch({ type: "unlock", token, passwordHash });
  }
  async function handleLock(reason) {
    await SessionStorage.clearSession();
    if (reason) await import_api16.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON, reason);
    dispatch({ type: "lock" });
  }
  async function handleLogout(reason) {
    await SessionStorage.clearSession();
    Cache.clear();
    if (reason) await import_api16.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON, reason);
    dispatch({ type: "logout" });
  }
  async function confirmMasterPassword(password) {
    const enteredPasswordHash = await hashMasterPasswordForReprompting(password);
    return enteredPasswordHash === state.passwordHash;
  }
  const contextValue = (0, import_react8.useMemo)(
    () => ({
      token: state.token,
      isLoading: state.isLoading,
      isAuthenticated: state.isAuthenticated,
      isLocked: state.isLocked,
      active: !state.isLoading && state.isAuthenticated && !state.isLocked,
      confirmMasterPassword
    }),
    [state, confirmMasterPassword]
  );
  if (state.isLoading) return loadingFallback;
  const showUnlockForm = state.isLocked || !state.isAuthenticated;
  const _children = state.token ? children : null;
  return /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(SessionContext.Provider, { value: contextValue, children: showUnlockForm && unlock ? /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(UnlockForm_default, { pendingAction: pendingActionRef.current }) : _children });
}
function useSession() {
  const session = (0, import_react8.useContext)(SessionContext);
  if (session == null) {
    throw new Error("useSession must be used within a SessionProvider");
  }
  return session;
}
var LockVaultError = class extends Error {
  constructor(lockReason) {
    super(lockReason);
  }
};
var LogoutVaultError = class extends Error {
  constructor(lockReason) {
    super(lockReason);
  }
};

// src/utils/hooks/useReprompt.tsx
var import_jsx_runtime8 = require("react/jsx-runtime");
function useReprompt(action, options) {
  const { description = "Performing an action that requires the master password" } = options ?? {};
  const session = useSession();
  const { push, pop } = (0, import_api17.useNavigation)();
  async function handleConfirm(password) {
    const isPasswordCorrect = await session.confirmMasterPassword(password);
    if (!isPasswordCorrect) {
      await (0, import_api17.showToast)(import_api17.Toast.Style.Failure, "Failed to unlock vault", "Check your credentials");
      return;
    }
    pop();
    setTimeout(action, 1);
  }
  return () => push(/* @__PURE__ */ (0, import_jsx_runtime8.jsx)(RepromptForm_default, { description, onConfirm: handleConfirm }));
}
var useReprompt_default = useReprompt;

// src/components/actions/ActionWithReprompt.tsx
var import_jsx_runtime9 = require("react/jsx-runtime");
function ActionWithReprompt(props) {
  const { repromptDescription, onAction, ...componentProps } = props;
  const { reprompt } = useSelectedVaultItem();
  const repromptAndPerformAction = useReprompt_default(onAction, { description: repromptDescription });
  return /* @__PURE__ */ (0, import_jsx_runtime9.jsx)(import_api18.Action, { ...componentProps, onAction: reprompt ? repromptAndPerformAction : onAction });
}
var ActionWithReprompt_default = ActionWithReprompt;

// src/components/actions/BugReportCollectDataAction.tsx
var import_api19 = require("@raycast/api");
var import_child_process2 = require("child_process");
var import_util2 = require("util");
var import_fs7 = require("fs");
var import_path3 = require("path");
var import_jsx_runtime10 = require("react/jsx-runtime");
var exec2 = (0, import_util2.promisify)(import_child_process2.exec);
var { supportPath: supportPath2 } = import_api19.environment;
var getSafePreferences = () => {
  const {
    clientId,
    clientSecret,
    fetchFavicons: fetchFavicons2,
    generatePasswordQuickAction,
    repromptIgnoreDuration,
    serverCertsPath,
    serverUrl,
    shouldCacheVaultItems,
    transientCopyGeneratePassword,
    transientCopyGeneratePasswordQuick,
    transientCopySearch,
    windowActionOnCopy
  } = (0, import_api19.getPreferenceValues)();
  return {
    has_clientId: !!clientId,
    has_clientSecret: !!clientSecret,
    fetchFavicons: fetchFavicons2,
    generatePasswordQuickAction,
    repromptIgnoreDuration,
    has_serverCertsPath: !!serverCertsPath,
    has_serverUrl: !!serverUrl,
    shouldCacheVaultItems,
    transientCopyGeneratePassword,
    transientCopyGeneratePasswordQuick,
    transientCopySearch,
    windowActionOnCopy
  };
};
var NA = "N/A";
var tryExec2 = async (command, trimLineBreaks = true) => {
  try {
    let cmd = command;
    if (platform === "windows") {
      cmd = `powershell -Command "${command}"`;
    } else {
      cmd = `PATH="$PATH:${(0, import_path3.dirname)(process.execPath)}" ${command}`;
    }
    const { stdout } = await exec2(cmd, { env: { BITWARDENCLI_APPDATA_DIR: supportPath2 } });
    const response = stdout.trim();
    if (trimLineBreaks) return response.replace(/\n|\r/g, "");
    return response;
  } catch (error) {
    captureException(`Failed to execute command: ${command}`, error);
    return NA;
  }
};
var getBwBinInfo = () => {
  try {
    const cliPathPref = (0, import_api19.getPreferenceValues)().cliPath;
    if (cliPathPref) {
      return { type: "custom", path: cliPathPref };
    }
    if (cliInfo.path.bin === cliInfo.path.downloadedBin) {
      return { type: "downloaded", path: cliInfo.path.downloadedBin };
    }
    return { type: "installed", path: cliInfo.path.installedBin };
  } catch (error) {
    return { type: NA, path: NA };
  }
};
var getHomebrewInfo = async () => {
  try {
    let path3 = "/opt/homebrew/bin/brew";
    if (!(0, import_fs7.existsSync)(path3)) path3 = "/usr/local/bin/brew";
    if (!(0, import_fs7.existsSync)(path3)) return { arch: NA, version: NA };
    const config = await tryExec2(`${path3} config`, false);
    if (config === NA) return { arch: NA, version: NA };
    const archValue = /HOMEBREW_PREFIX: (.+)/.exec(config)?.[1] || NA;
    const version = /HOMEBREW_VERSION: (.+)/.exec(config)?.[1] || NA;
    const arch = archValue !== NA ? archValue.includes("/opt/homebrew") ? "arm64" : "x86_64" : NA;
    return { arch, version };
  } catch (error) {
    return { arch: NA, version: NA };
  }
};
function BugReportCollectDataAction() {
  const collectData = async () => {
    const toast = await (0, import_api19.showToast)(import_api19.Toast.Style.Animated, "Collecting data...");
    try {
      const preferences = getSafePreferences();
      const bwInfo = getBwBinInfo();
      const [systemArch, osVersion, osBuildVersion, bwVersion] = await Promise.all([
        ...platform === "macos" ? [tryExec2("uname -m"), tryExec2("sw_vers -productVersion"), tryExec2("sw_vers -buildVersion")] : [
          tryExec2("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),
          tryExec2("(Get-CimInstance Win32_OperatingSystem).Caption"),
          tryExec2("(Get-CimInstance Win32_OperatingSystem).Version")
        ],
        tryExec2(`${bwInfo.path} --version`)
      ]);
      const data = {
        raycast: {
          version: import_api19.environment.raycastVersion
        },
        system: {
          arch: systemArch,
          version: osVersion,
          buildVersion: osBuildVersion
        },
        node: {
          arch: process.arch,
          version: process.version
        },
        cli: {
          type: bwInfo.type,
          version: bwVersion
        },
        preferences
      };
      if (platform === "macos") {
        const brewInfo = await getHomebrewInfo();
        data.homebrew = {
          arch: brewInfo.arch,
          version: brewInfo.version
        };
      }
      await import_api19.Clipboard.copy(JSON.stringify(data, null, 2));
      toast.style = import_api19.Toast.Style.Success;
      toast.title = "Data copied to clipboard";
    } catch (error) {
      toast.style = import_api19.Toast.Style.Failure;
      toast.title = "Failed to collect bug report data";
      captureException("Failed to collect bug report data", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime10.jsx)(import_api19.Action, { title: "Collect Bug Report Data", icon: import_api19.Icon.Bug, onAction: collectData });
}
var BugReportCollectDataAction_default = BugReportCollectDataAction;

// src/components/actions/BugReportOpenAction.tsx
var import_api20 = require("@raycast/api");
var import_jsx_runtime11 = require("react/jsx-runtime");
var BUG_REPORT_URL = "https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";
function BugReportOpenAction() {
  return /* @__PURE__ */ (0, import_jsx_runtime11.jsx)(import_api20.Action.OpenInBrowser, { title: "Open Bug Report", url: BUG_REPORT_URL });
}
var BugReportOpenAction_default = BugReportOpenAction;

// src/components/actions/CopyRuntimeErrorLog.tsx
var import_api21 = require("@raycast/api");
var import_jsx_runtime12 = require("react/jsx-runtime");
function CopyRuntimeErrorLog() {
  const copyErrors = async () => {
    const errorString = capturedExceptions.toString();
    if (errorString.length === 0) {
      return (0, import_api21.showToast)(import_api21.Toast.Style.Success, "No errors to copy");
    }
    await import_api21.Clipboard.copy(errorString);
    await (0, import_api21.showToast)(import_api21.Toast.Style.Success, "Errors copied to clipboard");
    await (0, import_api21.confirmAlert)({
      title: "Be careful with this information",
      message: "Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",
      primaryAction: { title: "Got it", style: import_api21.Alert.ActionStyle.Default }
    });
  };
  return /* @__PURE__ */ (0, import_jsx_runtime12.jsx)(import_api21.Action, { onAction: copyErrors, title: "Copy Last Errors", icon: import_api21.Icon.CopyClipboard, style: import_api21.Action.Style.Regular });
}
var CopyRuntimeErrorLog_default = CopyRuntimeErrorLog;

// src/components/actions/DebuggingBugReportingActionSection.tsx
var import_api22 = require("@raycast/api");

// src/utils/hooks/useCliVersion.ts
var import_react9 = require("react");
var getCliVersion = () => {
  const version = Cache.get(CACHE_KEYS.CLI_VERSION);
  if (version) return parseFloat(version);
  return -1;
};
var useCliVersion = () => {
  const [version, setVersion] = (0, import_react9.useState)(getCliVersion);
  useOnceEffect_default(() => {
    Cache.subscribe((key, value) => {
      if (value && key === CACHE_KEYS.CLI_VERSION) {
        setVersion(parseFloat(value) || -1);
      }
    });
  });
  return version;
};

// src/components/actions/DebuggingBugReportingActionSection.tsx
var import_jsx_runtime13 = require("react/jsx-runtime");
function DebuggingBugReportingActionSection() {
  const cliVersion = useCliVersion();
  return /* @__PURE__ */ (0, import_jsx_runtime13.jsxs)(import_api22.ActionPanel.Section, { title: `Debugging & Bug Reporting (CLI v${cliVersion})`, children: [
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(CopyRuntimeErrorLog_default, {}),
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(BugReportOpenAction_default, {}),
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(BugReportCollectDataAction_default, {})
  ] });
}

// src/components/actions/VaultActionsSection.tsx
var import_api26 = require("@raycast/api");

// src/context/vault.tsx
var import_api25 = require("@raycast/api");
var import_react12 = require("react");

// src/components/searchVault/context/vaultListeners.tsx
var import_react10 = require("react");
var import_jsx_runtime14 = require("react/jsx-runtime");
var VaultListenersContext = (0, import_react10.createContext)(null);
var VaultListenersProvider = ({ children }) => {
  const listeners = (0, import_react10.useRef)(/* @__PURE__ */ new Map());
  const publishItems = (itemsOrError) => {
    if (itemsOrError instanceof FailedToLoadVaultItemsError) {
      listeners.current.forEach((listener) => listener(itemsOrError));
    } else {
      listeners.current.forEach((listener, itemId) => {
        const item = itemsOrError.find((item2) => item2.id === itemId);
        if (item) listener(item);
      });
    }
  };
  const subscribeItem = (itemId, listener) => {
    listeners.current.set(itemId, listener);
    return () => {
      listeners.current.delete(itemId);
    };
  };
  const memoizedValue = (0, import_react10.useMemo)(() => ({ listeners, publishItems, subscribeItem }), []);
  return /* @__PURE__ */ (0, import_jsx_runtime14.jsx)(VaultListenersContext.Provider, { value: memoizedValue, children });
};
var useVaultItemPublisher = () => {
  const context = (0, import_react10.useContext)(VaultListenersContext);
  if (context == null) throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");
  return context.publishItems;
};
var useVaultItemSubscriber = () => {
  const context = (0, import_react10.useContext)(VaultListenersContext);
  if (context == null) throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");
  return (itemId) => {
    let timeoutId;
    return new Promise((resolve, reject) => {
      const unsubscribe = context.subscribeItem(itemId, (itemOrError) => {
        try {
          unsubscribe();
          if (itemOrError instanceof FailedToLoadVaultItemsError) {
            throw itemOrError;
          }
          resolve(itemOrError);
          clearTimeout(timeoutId);
        } catch (error) {
          reject(error);
        }
      });
      timeoutId = setTimeout(() => {
        unsubscribe();
        reject(new SubscriberTimeoutError());
      }, 15e3);
    });
  };
};
var SubscriberTimeoutError = class extends Error {
  constructor() {
    super("Timed out waiting for item");
    this.name = "SubscriberTimeoutError";
  }
};
var vaultListeners_default = VaultListenersProvider;

// src/components/searchVault/utils/useVaultCaching.ts
var import_api24 = require("@raycast/api");

// src/components/searchVault/utils/caching.ts
function prepareItemsForCache(items) {
  return items.map((item) => ({
    object: item.object,
    id: item.id,
    organizationId: item.organizationId,
    folderId: item.folderId,
    type: item.type,
    name: item.name,
    revisionDate: item.revisionDate,
    creationDate: item.creationDate,
    deletedDate: item.deletedDate,
    favorite: item.favorite,
    reprompt: item.reprompt,
    collectionIds: item.collectionIds,
    secureNote: item.secureNote ? { type: item.secureNote.type } : void 0,
    // sensitive data below
    fields: cleanFields(item.fields),
    login: cleanLogin(item.login),
    identity: cleanIdentity(item.identity),
    card: cleanCard(item.card),
    passwordHistory: cleanPasswordHistory(item.passwordHistory),
    notes: hideIfDefined(item.notes),
    sshKey: cleanSshKey(item.sshKey)
  }));
}
function prepareFoldersForCache(folders) {
  return folders.map((folder) => ({ object: folder.object, id: folder.id, name: folder.name }));
}
function cleanFields(fields) {
  return fields?.map((field) => ({
    name: field.name,
    // necessary for display
    value: hideIfDefined(field.value),
    type: field.type,
    linkedId: field.linkedId
  }));
}
function cleanLogin(login) {
  if (!login) return void 0;
  return {
    username: login.username,
    // necessary for display
    uris: login.uris,
    password: hideIfDefined(login.password),
    passwordRevisionDate: hideIfDefined(login.passwordRevisionDate),
    totp: hideIfDefined(login.totp)
  };
}
function cleanIdentity(identity) {
  if (!identity) return void 0;
  return {
    title: hideIfDefined(identity.title),
    firstName: hideIfDefined(identity.firstName),
    middleName: hideIfDefined(identity.middleName),
    lastName: hideIfDefined(identity.lastName),
    address1: hideIfDefined(identity.address1),
    address2: hideIfDefined(identity.address2),
    address3: hideIfDefined(identity.address3),
    city: hideIfDefined(identity.city),
    state: hideIfDefined(identity.state),
    postalCode: hideIfDefined(identity.postalCode),
    country: hideIfDefined(identity.country),
    company: hideIfDefined(identity.company),
    email: hideIfDefined(identity.email),
    phone: hideIfDefined(identity.phone),
    ssn: hideIfDefined(identity.ssn),
    username: hideIfDefined(identity.username),
    passportNumber: hideIfDefined(identity.passportNumber),
    licenseNumber: hideIfDefined(identity.licenseNumber)
  };
}
function cleanCard(card) {
  if (!card) return void 0;
  return {
    brand: card.brand,
    cardholderName: hideIfDefined(card.cardholderName),
    number: hideIfDefined(card.number),
    expMonth: hideIfDefined(card.expMonth),
    expYear: hideIfDefined(card.expYear),
    code: hideIfDefined(card.code)
  };
}
function cleanPasswordHistory(passwordHistoryItems) {
  return passwordHistoryItems?.map((passwordHistory) => ({
    password: hideIfDefined(passwordHistory.password),
    lastUsedDate: hideIfDefined(passwordHistory.lastUsedDate)
  }));
}
function cleanSshKey(sshKey) {
  if (!sshKey) return void 0;
  return {
    publicKey: sshKey.publicKey,
    keyFingerprint: sshKey.keyFingerprint,
    privateKey: hideIfDefined(sshKey.privateKey)
  };
}
function hideIfDefined(value) {
  if (!value) return value;
  return SENSITIVE_VALUE_PLACEHOLDER;
}

// src/utils/hooks/useContentEncryptor.ts
var import_api23 = require("@raycast/api");
var import_crypto4 = require("crypto");
var import_react11 = require("react");
var ALGORITHM = "aes-256-cbc";
function useContentEncryptor() {
  const { clientSecret } = (0, import_api23.getPreferenceValues)();
  const cipherKeyBuffer = (0, import_react11.useMemo)(() => get32BitSecretKeyBuffer(clientSecret.trim()), [clientSecret]);
  const encrypt = (data) => {
    const ivBuffer = (0, import_crypto4.randomBytes)(16);
    const cipher = (0, import_crypto4.createCipheriv)(ALGORITHM, cipherKeyBuffer, ivBuffer);
    const encryptedContentBuffer = Buffer.concat([cipher.update(data), cipher.final()]);
    return { iv: ivBuffer.toString("hex"), content: encryptedContentBuffer.toString("hex") };
  };
  const decrypt = (content, iv) => {
    const decipher = (0, import_crypto4.createDecipheriv)(ALGORITHM, cipherKeyBuffer, Buffer.from(iv, "hex"));
    const decryptedContentBuffer = Buffer.concat([decipher.update(Buffer.from(content, "hex")), decipher.final()]);
    return decryptedContentBuffer.toString();
  };
  return { encrypt, decrypt };
}
function get32BitSecretKeyBuffer(key) {
  return Buffer.from((0, import_crypto4.createHash)("sha256").update(key).digest("base64").slice(0, 32));
}

// src/components/searchVault/utils/useVaultCaching.ts
function useVaultCaching() {
  const { encrypt, decrypt } = useContentEncryptor();
  const isCachingEnable = (0, import_api24.getPreferenceValues)().shouldCacheVaultItems;
  useOnceEffect_default(() => {
    if (!Cache.isEmpty) Cache.clear();
  }, !isCachingEnable);
  const getCachedVault = () => {
    try {
      if (!isCachingEnable) throw new VaultCachingNoEnabledError();
      const cachedIv = Cache.get(CACHE_KEYS.IV);
      const cachedEncryptedVault = Cache.get(CACHE_KEYS.VAULT);
      if (!cachedIv || !cachedEncryptedVault) throw new VaultCachingNoEnabledError();
      const decryptedVault = decrypt(cachedEncryptedVault, cachedIv);
      return JSON.parse(decryptedVault);
    } catch (error) {
      if (!(error instanceof VaultCachingNoEnabledError)) {
        captureException("Failed to decrypt cached vault", error);
      }
      return { items: [], folders: [] };
    }
  };
  const cacheVault = (items, folders) => {
    try {
      if (!isCachingEnable) throw new VaultCachingNoEnabledError();
      const vaultToEncrypt = JSON.stringify({
        items: prepareItemsForCache(items),
        folders: prepareFoldersForCache(folders)
      });
      const encryptedVault = encrypt(vaultToEncrypt);
      Cache.set(CACHE_KEYS.VAULT, encryptedVault.content);
      Cache.set(CACHE_KEYS.IV, encryptedVault.iv);
    } catch (error) {
      if (!(error instanceof VaultCachingNoEnabledError)) {
        captureException("Failed to cache vault", error);
      }
    }
  };
  return { getCachedVault, cacheVault };
}
var VaultCachingNoEnabledError = class extends Error {
};
var useVaultCaching_default = useVaultCaching;

// src/context/vault.tsx
var import_jsx_runtime15 = require("react/jsx-runtime");
var VaultContext = (0, import_react12.createContext)(null);
function getInitialState() {
  return { items: [], folders: [], isLoading: true };
}
var { syncOnLaunch } = (0, import_api25.getPreferenceValues)();
function VaultProvider(props) {
  const { children } = props;
  const session = useSession();
  const bitwarden = useBitwarden();
  const publishItems = useVaultItemPublisher();
  const { getCachedVault, cacheVault } = useVaultCaching_default();
  const [currentFolderId, setCurrentFolderId] = $c40d7eded38ca69c$export$14afb9e4c16377d3(CACHE_KEYS.CURRENT_FOLDER_ID, null);
  const [state, setState] = (0, import_react12.useReducer)(
    (previous, next) => ({ ...previous, ...next }),
    { ...getInitialState(), ...getCachedVault() }
  );
  useOnceEffect_default(() => {
    if (syncOnLaunch) {
      void syncItems({ isInitial: true });
    } else {
      void loadItems();
    }
  }, session.active && session.token);
  async function loadItems() {
    try {
      setState({ isLoading: true });
      let items = [];
      let folders = [];
      try {
        const [itemsResult, foldersResult] = await Promise.all([bitwarden.listItems(), bitwarden.listFolders()]);
        if (itemsResult.error) throw itemsResult.error;
        if (foldersResult.error) throw foldersResult.error;
        items = itemsResult.result;
        folders = foldersResult.result;
        items.sort(favoriteItemsFirstSorter);
      } catch (error) {
        publishItems(new FailedToLoadVaultItemsError());
        throw error;
      }
      setState({ items, folders });
      publishItems(items);
      cacheVault(items, folders);
    } catch (error) {
      await (0, import_api25.showToast)(import_api25.Toast.Style.Failure, "Failed to load vault items", getDisplayableErrorMessage(error));
      captureException("Failed to load vault items", error);
    } finally {
      setState({ isLoading: false });
    }
  }
  async function syncItems(props2) {
    const { isInitial = false } = props2 ?? {};
    const toast = await (0, import_api25.showToast)({
      title: "Syncing Vault...",
      message: isInitial ? "Background Task" : void 0,
      style: import_api25.Toast.Style.Animated
    });
    try {
      await bitwarden.sync();
      await loadItems();
      await toast.hide();
    } catch (error) {
      await bitwarden.logout();
      toast.style = import_api25.Toast.Style.Failure;
      toast.title = "Failed to sync vault";
      toast.message = getDisplayableErrorMessage(error);
    }
  }
  function setCurrentFolder(folderOrId) {
    setCurrentFolderId(typeof folderOrId === "string" ? folderOrId : folderOrId?.id);
  }
  function updateState(next) {
    const newState = typeof next === "function" ? next(state) : next;
    setState(newState);
    cacheVault(newState.items, newState.folders);
  }
  const memoizedValue = (0, import_react12.useMemo)(
    () => ({
      ...state,
      items: filterItemsByFolderId(state.items, currentFolderId),
      isEmpty: state.items.length == 0,
      isLoading: state.isLoading || session.isLoading,
      currentFolderId,
      syncItems,
      loadItems,
      setCurrentFolder,
      updateState
    }),
    [state, session.isLoading, currentFolderId, syncItems, loadItems, setCurrentFolder, updateState]
  );
  return /* @__PURE__ */ (0, import_jsx_runtime15.jsx)(VaultContext.Provider, { value: memoizedValue, children });
}
function filterItemsByFolderId(items, folderId) {
  if (!folderId || folderId === FOLDER_OPTIONS.ALL) return items;
  if (folderId === FOLDER_OPTIONS.NO_FOLDER) return items.filter((item) => item.folderId === null);
  return items.filter((item) => item.folderId === folderId);
}
function favoriteItemsFirstSorter(a, b) {
  if (a.favorite && b.favorite) return 0;
  return a.favorite ? -1 : 1;
}
var useVaultContext = () => {
  const context = (0, import_react12.useContext)(VaultContext);
  if (context == null) {
    throw new Error("useVault must be used within a VaultProvider");
  }
  return context;
};

// src/components/actions/VaultActionsSection.tsx
var import_jsx_runtime16 = require("react/jsx-runtime");
function VaultActionsSection() {
  const vault = useVaultContext();
  const bitwarden = useBitwarden();
  const handleLockVault = async () => {
    const toast = await (0, import_api26.showToast)(import_api26.Toast.Style.Animated, "Locking Vault...", "Please wait");
    await bitwarden.lock({ reason: VAULT_LOCK_MESSAGES.MANUAL });
    await toast.hide();
  };
  const handleLogoutVault = async () => {
    const toast = await (0, import_api26.showToast)({ title: "Logging Out...", style: import_api26.Toast.Style.Animated });
    try {
      await bitwarden.logout();
      await toast.hide();
    } catch (error) {
      toast.title = "Failed to logout";
      toast.style = import_api26.Toast.Style.Failure;
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime16.jsxs)(import_api26.ActionPanel.Section, { title: "Vault Actions", children: [
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(
      import_api26.Action,
      {
        title: "Sync Vault",
        shortcut: { macOS: { key: "r", modifiers: ["opt"] }, windows: { key: "r", modifiers: ["alt"] } },
        icon: import_api26.Icon.ArrowClockwise,
        onAction: vault.syncItems
      }
    ),
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(
      import_api26.Action,
      {
        icon: { source: "sf_symbols_lock.svg", tintColor: import_api26.Color.PrimaryText },
        title: "Lock Vault",
        shortcut: {
          macOS: { key: "l", modifiers: ["opt", "shift"] },
          windows: { key: "l", modifiers: ["alt", "shift"] }
        },
        onAction: handleLockVault
      }
    ),
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(import_api26.Action, { style: import_api26.Action.Style.Destructive, title: "Logout", icon: import_api26.Icon.Logout, onAction: handleLogoutVault })
  ] });
}

// src/components/TroubleshootingGuide.tsx
var import_jsx_runtime17 = require("react/jsx-runtime");
var LINE_BREAK = "\n\n";
var CLI_INSTALLATION_HELP_URL = "https://bitwarden.com/help/cli/#download-and-install";
var getCodeBlock = (content) => `\`\`\`
${content}
\`\`\``;
var TroubleshootingGuide = ({ error }) => {
  const errorString = getErrorString(error);
  const localCliPath = (0, import_api27.getPreferenceValues)().cliPath;
  const isCliDownloadError = error instanceof EnsureCliBinError;
  const needsToInstallCli = localCliPath || error instanceof InstalledCLINotFoundError;
  const messages = [];
  if (needsToInstallCli && !isCliDownloadError) {
    messages.push("# \u26A0\uFE0F Bitwarden CLI not found");
  } else {
    messages.push("# \u{1F4A5} Whoops! Something went wrong");
  }
  if (isCliDownloadError) {
    messages.push(
      `We couldn't download the [Bitwarden CLI](${CLI_INSTALLATION_HELP_URL}), you can always install it on your machine.`
    );
  } else if (needsToInstallCli) {
    const cliPathString = localCliPath ? ` (${localCliPath})` : "";
    messages.push(
      `We couldn't find the [Bitwarden CLI](${CLI_INSTALLATION_HELP_URL}) installed on your machine${cliPathString}.`
    );
  } else {
    messages.push(`The \`${import_api27.environment.commandName}\` command crashed when we were not expecting it to.`);
  }
  messages.push(
    "> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."
  );
  messages.push(
    `**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${BUG_REPORT_URL}) to help us fix it.**`
  );
  if (errorString) {
    const isArchError = /incompatible architecture/gi.test(errorString);
    messages.push(
      ">## Technical details \u{1F913}",
      isArchError && `\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${platform === "macos" ? "Homebrew, " : ""}NodeJS, and Bitwarden CLI).`,
      getCodeBlock(errorString)
    );
  }
  return /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(
    import_api27.Detail,
    {
      markdown: messages.filter(Boolean).join(LINE_BREAK),
      actions: /* @__PURE__ */ (0, import_jsx_runtime17.jsxs)(import_api27.ActionPanel, { children: [
        /* @__PURE__ */ (0, import_jsx_runtime17.jsxs)(import_api27.ActionPanel.Section, { title: "Bug Report", children: [
          /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(BugReportOpenAction_default, {}),
          /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(BugReportCollectDataAction_default, {})
        ] }),
        needsToInstallCli && /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(import_api27.Action.OpenInBrowser, { title: "Open Installation Guide", url: CLI_INSTALLATION_HELP_URL })
      ] })
    }
  );
};
var TroubleshootingGuide_default = TroubleshootingGuide;

// src/components/RootErrorBoundary.tsx
var import_jsx_runtime18 = require("react/jsx-runtime");
var RootErrorBoundary = class extends import_react13.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }
  static getDerivedStateFromError() {
    return { hasError: true };
  }
  async componentDidCatch(error, errorInfo) {
    if (error instanceof ManuallyThrownError) {
      this.setState((state) => ({ ...state, hasError: true, error: error.message }));
      await (0, import_api28.showToast)(import_api28.Toast.Style.Failure, error.message);
    } else {
      if (import_api28.environment.isDevelopment) {
        this.setState((state) => ({ ...state, hasError: true, error: error.message }));
      }
      console.error("Error:", error, errorInfo);
    }
  }
  render() {
    try {
      if (this.state.hasError) return /* @__PURE__ */ (0, import_jsx_runtime18.jsx)(TroubleshootingGuide_default, { error: this.state.error });
      return this.props.children;
    } catch {
      return /* @__PURE__ */ (0, import_jsx_runtime18.jsx)(TroubleshootingGuide_default, {});
    }
  }
};

// src/components/searchVault/utils/useItemIcon.ts
var import_api30 = require("@raycast/api");
var import_react15 = require("react");

// src/utils/cards.ts
var CARD_KEY_LABEL_KEYS = Object.keys(CARD_KEY_LABEL);
var BASE_CARD_IMAGE_URL = "https://vault.bitwarden.com/images";
var CARD_BRANDS_TO_IMAGE_URL_MAP = {
  [CARD_BRANDS.VISA]: `${BASE_CARD_IMAGE_URL}/visa-light.png`,
  [CARD_BRANDS.MASTERCARD]: `${BASE_CARD_IMAGE_URL}/mastercard-light.png`,
  [CARD_BRANDS.AMEX]: `${BASE_CARD_IMAGE_URL}/amex-light.png`,
  [CARD_BRANDS.DISCOVER]: `${BASE_CARD_IMAGE_URL}/discover-light.png`,
  [CARD_BRANDS.DINERS_CLUB]: `${BASE_CARD_IMAGE_URL}/diners_club-light.png`,
  [CARD_BRANDS.JCB]: `${BASE_CARD_IMAGE_URL}/jcb-light.png`,
  [CARD_BRANDS.MAESTRO]: `${BASE_CARD_IMAGE_URL}/maestro-light.png`,
  [CARD_BRANDS.UNION_PAY]: `${BASE_CARD_IMAGE_URL}/union_pay-light.png`,
  [CARD_BRANDS.RU_PAY]: `${BASE_CARD_IMAGE_URL}/ru_pay-light.png`
};
function getCardImageUrl(brand) {
  return CARD_BRANDS_TO_IMAGE_URL_MAP[brand];
}

// src/utils/search.ts
var import_api29 = require("@raycast/api");

// node_modules/fast-fuzzy/lib/fuzzy.mjs
var import_graphemesplit = __toESM(require_graphemesplit(), 1);
var splitUnicode = (str) => str.normalize("NFKD").split("");
var whitespaceRegex = /^\s+$/;
var nonWordRegex = /^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/;
var sortKind = {
  insertOrder: "insertOrder",
  bestMatch: "bestMatch"
};
var defaultOptions = {
  keySelector: (s) => s,
  threshold: 0.6,
  ignoreCase: true,
  ignoreSymbols: true,
  normalizeWhitespace: true,
  returnMatchData: false,
  useDamerau: true,
  useSellers: true,
  useSeparatedUnicode: false,
  sortBy: sortKind.bestMatch
};
var noop = () => {
};
var arrayWrap = (item) => item instanceof Array ? item : [item];
function normalize(string, options) {
  const lower = options.ignoreCase ? string.toLocaleLowerCase() : string;
  const normal = [];
  const map = [];
  let lastWasWhitespace = true;
  let length = 0;
  const graphemeList = options.useSeparatedUnicode ? splitUnicode(lower) : (0, import_graphemesplit.default)(lower);
  for (const grapheme of graphemeList) {
    whitespaceRegex.lastIndex = 0;
    nonWordRegex.lastIndex = 0;
    if (options.normalizeWhitespace && whitespaceRegex.test(grapheme)) {
      if (!lastWasWhitespace) {
        normal.push(" ");
        map.push(length);
        lastWasWhitespace = true;
      }
    } else if (!(options.ignoreSymbols && nonWordRegex.test(grapheme))) {
      if (options.useSeparatedUnicode) {
        normal.push(grapheme);
      } else {
        normal.push(grapheme.normalize());
      }
      map.push(length);
      lastWasWhitespace = false;
    }
    length += grapheme.length;
  }
  map.push(string.length);
  while (normal[normal.length - 1] === " ") {
    normal.pop();
    map.pop();
  }
  return {
    original: string,
    normal,
    map
  };
}
function denormalizeMatchPosition(match, map) {
  return {
    index: map[match.start],
    length: map[match.end + 1] - map[match.start]
  };
}
function walkBack(rows, scoreIndex) {
  if (scoreIndex === 0) {
    return {
      index: 0,
      length: 0
    };
  }
  let start = scoreIndex;
  for (let i = rows.length - 2; i > 0 && start > 1; i--) {
    const row = rows[i];
    start = row[start] < row[start - 1] ? start : start - 1;
  }
  return {
    start: start - 1,
    end: scoreIndex - 1
  };
}
function noopWalkback() {
  return {
    start: 0,
    end: 0
  };
}
var levUpdateScore = () => true;
var sellersUpdateScore = (cur, min) => cur < min;
function initLevRows(rowCount, columnCount) {
  const rows = new Array(rowCount);
  for (let i = 0; i < rowCount; i++) {
    rows[i] = new Array(columnCount);
    rows[i][0] = i;
  }
  for (let i = 0; i < columnCount; i++) {
    rows[0][i] = i;
  }
  return rows;
}
function initSellersRows(rowCount, columnCount) {
  const rows = new Array(rowCount);
  rows[0] = new Array(columnCount).fill(0);
  for (let i = 1; i < rowCount; i++) {
    rows[i] = new Array(columnCount);
    rows[i][0] = i;
  }
  return rows;
}
function levCore(term, candidate, rows, i, j) {
  const rowA = rows[i];
  const rowB = rows[i + 1];
  const cost = term[i] === candidate[j] ? 0 : 1;
  let m;
  let min = rowB[j] + 1;
  if ((m = rowA[j + 1] + 1) < min) min = m;
  if ((m = rowA[j] + cost) < min) min = m;
  rowB[j + 1] = min;
}
function levenshtein(term, candidate, rows, j) {
  for (let i = 0; i < term.length; i++) {
    levCore(term, candidate, rows, i, j);
  }
}
function damerauLevenshtein(term, candidate, rows, j) {
  if (j === 0) {
    levenshtein(term, candidate, rows, j);
    return;
  }
  if (term.length > 0) {
    levCore(term, candidate, rows, 0, j);
  }
  for (let i = 1; i < term.length; i++) {
    const rowA = rows[i - 1];
    const rowB = rows[i];
    const rowC = rows[i + 1];
    const cost = term[i] === candidate[j] ? 0 : 1;
    let m;
    let min = rowC[j] + 1;
    if ((m = rowB[j + 1] + 1) < min) min = m;
    if ((m = rowB[j] + cost) < min) min = m;
    if (term[i] === candidate[j - 1] && term[i - 1] === candidate[j] && (m = rowA[j - 1] + cost) < min) min = m;
    rowC[j + 1] = min;
  }
}
function trieInsert(trie, string, item) {
  let walker = trie;
  for (let i = 0; i < string.length; i++) {
    const char = string[i];
    if (walker.children[char] == null) {
      walker.children[char] = {
        children: {},
        candidates: [],
        depth: 0
      };
    }
    walker.depth = Math.max(walker.depth, string.length - i);
    walker = walker.children[char];
  }
  walker.candidates.push(item);
}
function createSearchTrie(trie, index, items, options) {
  for (const item of items) {
    const candidates = arrayWrap(options.keySelector(item)).map((key, keyIndex) => ({
      index,
      keyIndex,
      item,
      normalized: normalize(key, options)
    }));
    index++;
    for (const candidate of candidates) {
      trieInsert(trie, candidate.normalized.normal, candidate);
    }
  }
}
function compareItemsBestScore(a, b) {
  const scoreDiff = b.score - a.score;
  if (scoreDiff !== 0) {
    return scoreDiff;
  }
  const matchPosDiff = a.match.start - b.match.start;
  if (matchPosDiff !== 0) {
    return matchPosDiff;
  }
  const keyIndexDiff = a.keyIndex - b.keyIndex;
  if (keyIndexDiff !== 0) {
    return keyIndexDiff;
  }
  const lengthDiff = a.lengthDiff - b.lengthDiff;
  if (lengthDiff !== 0) {
    return lengthDiff;
  }
  return compareItemsInsertOrder(a, b);
}
function compareItemsInsertOrder(a, b) {
  return a.index - b.index;
}
function getCompareFunc(sortBy) {
  switch (sortBy) {
    case sortKind.bestMatch:
      return compareItemsBestScore;
    case sortKind.insertOrder:
      return compareItemsInsertOrder;
    default:
      throw new Error(`unknown sortBy method ${sortBy}`);
  }
}
function addResult(results, resultMap, candidate, score, match, lengthDiff, compareItems) {
  const scoredItem = {
    item: candidate.item,
    normalized: candidate.normalized,
    score,
    match,
    index: candidate.index,
    keyIndex: candidate.keyIndex,
    lengthDiff
  };
  if (resultMap[candidate.index] == null) {
    resultMap[candidate.index] = results.length;
    results.push(scoredItem);
  } else if (compareItems(scoredItem, results[resultMap[candidate.index]]) < 0) {
    results[resultMap[candidate.index]] = scoredItem;
  }
}
var getLevLength = Math.max;
var getSellersLength = (termLength) => termLength;
function levShouldContinue(node, pos, term, threshold, sValue) {
  const p1 = pos + sValue;
  const p2 = Math.min(term.length, pos + node.depth + 1);
  const length = Math.ceil((p1 + p2) / 2);
  const bestPossibleValue = length - p2;
  return 1 - bestPossibleValue / length >= threshold;
}
function sellersShouldContinue(node, _, term, threshold, sValue, lastValue) {
  const bestPossibleValue = Math.min(sValue, lastValue - (node.depth + 1));
  return 1 - bestPossibleValue / term.length >= threshold;
}
function searchRecurse(trie, term, scoreMethods, rows, results, resultMap, options) {
  const stack = [];
  for (const key in trie.children) {
    const node = trie.children[key];
    stack.push([node, 1, key, 0, term.length]);
  }
  const acc = new Array(trie.depth);
  while (stack.length !== 0) {
    const [node, len, char, si, sv] = stack.pop();
    acc[len - 1] = char;
    scoreMethods.score(term, acc, rows, len - 1);
    const lastIndex = len;
    const lastValue = rows[rows.length - 1][lastIndex];
    let sIndex = si, sValue = sv;
    if (scoreMethods.shouldUpdateScore(lastValue, sv)) {
      sIndex = lastIndex;
      sValue = lastValue;
    }
    if (node.candidates.length > 0) {
      const length = scoreMethods.getLength(term.length, len);
      const score = 1 - sValue / length;
      if (score >= options.threshold) {
        const match = walkBack(rows, sIndex);
        const lengthDiff = Math.abs(len - term.length);
        for (const candidate of node.candidates) {
          addResult(results, resultMap, candidate, score, match, lengthDiff, scoreMethods.compareItems);
        }
      }
    }
    for (const key in node.children) {
      const child = node.children[key];
      if (scoreMethods.shouldContinue(child, len, term, options.threshold, sValue, lastValue)) {
        stack.push([child, len + 1, key, sIndex, sValue]);
      }
    }
  }
}
function searchCore(term, trie, options) {
  const initMethod = options.useSellers ? initSellersRows : initLevRows;
  const scoreMethods = {
    score: options.useDamerau ? damerauLevenshtein : levenshtein,
    getLength: options.useSellers ? getSellersLength : getLevLength,
    shouldUpdateScore: options.useSellers ? sellersUpdateScore : levUpdateScore,
    shouldContinue: options.useSellers ? sellersShouldContinue : levShouldContinue,
    walkBack: options.useSellers ? walkBack : noopWalkback,
    compareItems: getCompareFunc(options.sortBy)
  };
  const resultMap = {};
  const results = [];
  const rows = initMethod(term.length + 1, trie.depth + 1);
  if (options.threshold <= 0 || term.length === 0) {
    for (const candidate of trie.candidates) {
      addResult(results, resultMap, candidate, 0, {
        index: 0,
        length: 0
      }, term.length, scoreMethods.compareItems);
    }
  }
  searchRecurse(trie, term, scoreMethods, rows, results, resultMap, options);
  const sorted = results.sort(scoreMethods.compareItems);
  if (options.returnMatchData) {
    const denormalize = options.useSellers ? denormalizeMatchPosition : noop;
    return sorted.map((candidate) => ({
      item: candidate.item,
      original: candidate.normalized.original,
      key: candidate.normalized.normal.join(""),
      score: candidate.score,
      match: denormalize(candidate.match, candidate.normalized.map)
    }));
  }
  return sorted.map((candidate) => candidate.item);
}
var Searcher = class {
  constructor(candidates, options) {
    this.options = Object.assign({}, defaultOptions, options);
    this.trie = {
      children: {},
      candidates: [],
      depth: 0
    };
    createSearchTrie(this.trie, 0, candidates, this.options);
    this.count = candidates.length;
  }
  add(...candidates) {
    createSearchTrie(this.trie, this.count, candidates, this.options);
    this.count += candidates.length;
  }
  search(term, options) {
    options = Object.assign({}, this.options, options);
    return searchCore(normalize(term, this.options).normal, this.trie, options);
  }
};

// src/utils/search.ts
var import_react14 = require("react");
var import_url = require("url");
function faviconUrl(url2) {
  try {
    const domain = new import_url.URL(url2).hostname;
    return `https://icons.bitwarden.net/${domain}/icon.png`;
  } catch (err) {
    return import_api29.Icon.Globe;
  }
}
function useVaultSearch(items) {
  const [searchText, setSearchText] = (0, import_react14.useState)("");
  const searcher = (0, import_react14.useMemo)(() => {
    return new Searcher(items, {
      ignoreSymbols: false,
      threshold: 0.7,
      keySelector: (item) => {
        const { login, card } = item;
        return [
          item.name,
          ITEM_TYPE_TO_LABEL[item.type],
          login?.username,
          login?.uris?.map(({ uri }) => uri),
          card?.brand,
          card?.number
        ].flat().filter((value) => !!value);
      }
    });
  }, [items]);
  const filteredItems = (0, import_react14.useMemo)(() => {
    if (!searchText) return items;
    return searcher.search(searchText);
  }, [searcher, searchText]);
  return { setSearchText, filteredItems };
}

// src/components/searchVault/utils/useItemIcon.ts
var { fetchFavicons } = (0, import_api30.getPreferenceValues)();
var ITEM_TYPE_TO_IMAGE_OR_ICON_MAP = {
  [1 /* LOGIN */]: (item) => {
    const iconUri = item.login?.uris?.[0]?.uri;
    if (fetchFavicons && iconUri) return faviconUrl(iconUri);
    return ITEM_TYPE_TO_ICON_MAP[1 /* LOGIN */];
  },
  [3 /* CARD */]: (item) => {
    const { brand } = item.card ?? {};
    if (brand) {
      const cardBrandImage = getCardImageUrl(brand);
      if (cardBrandImage) return cardBrandImage;
    }
    return ITEM_TYPE_TO_ICON_MAP[3 /* CARD */];
  },
  [4 /* IDENTITY */]: () => ITEM_TYPE_TO_ICON_MAP[4 /* IDENTITY */],
  [2 /* NOTE */]: () => ITEM_TYPE_TO_ICON_MAP[2 /* NOTE */],
  [5 /* SSH_KEY */]: () => ITEM_TYPE_TO_ICON_MAP[5 /* SSH_KEY */]
};
function useItemIcon(item) {
  return (0, import_react15.useMemo)(() => {
    const imageOrIcon = ITEM_TYPE_TO_IMAGE_OR_ICON_MAP[item.type]?.(item);
    if (imageOrIcon) return imageOrIcon;
    return import_api30.Icon.QuestionMark;
  }, [item.type, item.card?.brand, item.login?.uris?.[0]?.uri]);
}

// src/components/searchVault/utils/useGetUpdatedVaultItem.ts
var import_api31 = require("@raycast/api");
function useGetUpdatedVaultItem() {
  const bitwarden = useBitwarden();
  const waitForItemLoaded = useVaultItemSubscriber();
  async function getItemFromVault(id) {
    const itemsResult = await bitwarden.getItem(id);
    if (itemsResult.error) throw itemsResult.error;
    return itemsResult.result;
  }
  async function getItem(possiblyCachedItem, selector = ((item) => item), loadingMessage) {
    const currentValue = selector(possiblyCachedItem);
    if (!valueHasSensitiveValuePlaceholder(currentValue)) return currentValue;
    const toast = loadingMessage ? await (0, import_api31.showToast)(import_api31.Toast.Style.Animated, loadingMessage) : void 0;
    const value = selector(
      await Promise.race([waitForItemLoaded(possiblyCachedItem.id), getItemFromVault(possiblyCachedItem.id)])
    );
    await toast?.hide();
    return value;
  }
  return getItem;
}
function valueHasSensitiveValuePlaceholder(value) {
  try {
    if (typeof value === "object") return JSON.stringify(value).includes(SENSITIVE_VALUE_PLACEHOLDER);
    if (typeof value === "string") return value === SENSITIVE_VALUE_PLACEHOLDER;
    return false;
  } catch (error) {
    return false;
  }
}
var useGetUpdatedVaultItem_default = useGetUpdatedVaultItem;

// src/utils/clipboard.ts
var import_api32 = require("@raycast/api");

// src/utils/strings.ts
var capitalize = (value, lowercaseRest = false) => {
  const firstLetter = value.charAt(0).toUpperCase();
  const rest = lowercaseRest ? value.slice(1).toLowerCase() : value.slice(1);
  return firstLetter + rest;
};

// src/utils/clipboard.ts
async function showCopySuccessMessage(title, message) {
  const action = (0, import_api32.getPreferenceValues)().windowActionOnCopy;
  const messageTitle = capitalize(title, true);
  if (action === "keepOpen") {
    await (0, import_api32.showToast)({ title: messageTitle, message, style: import_api32.Toast.Style.Success });
  } else if (action === "closeAndPopToRoot") {
    await (0, import_api32.showHUD)(messageTitle);
    await (0, import_api32.popToRoot)();
  } else {
    await (0, import_api32.showHUD)(messageTitle);
  }
}

// src/utils/hooks/useFrontmostApplicationName.ts
var import_api33 = require("@raycast/api");
var import_react16 = require("react");
function useFrontmostApplicationName() {
  const [currentApplication, setCurrentApplication] = (0, import_react16.useState)(void 0);
  (0, import_react16.useEffect)(() => {
    void (0, import_api33.getFrontmostApplication)().then((application) => setCurrentApplication(application.name)).catch(() => setCurrentApplication(void 0));
  }, []);
  return currentApplication;
}

// src/components/ListFolderDropdown.tsx
var import_api34 = require("@raycast/api");
var import_jsx_runtime19 = require("react/jsx-runtime");
function ListFolderDropdown() {
  const { folders, currentFolderId, setCurrentFolder } = useVaultContext();
  if (folders.length === 0) return null;
  return /* @__PURE__ */ (0, import_jsx_runtime19.jsxs)(
    import_api34.List.Dropdown,
    {
      tooltip: "Select a folder",
      placeholder: "Search folders",
      defaultValue: currentFolderId ?? FOLDER_OPTIONS.ALL,
      onChange: setCurrentFolder,
      throttle: true,
      children: [
        /* @__PURE__ */ (0, import_jsx_runtime19.jsx)(import_api34.List.Dropdown.Item, { value: FOLDER_OPTIONS.ALL, title: "All", icon: import_api34.Icon.Folder }),
        folders.map((folder) => {
          const id = folder.id || FOLDER_OPTIONS.NO_FOLDER;
          return /* @__PURE__ */ (0, import_jsx_runtime19.jsx)(import_api34.List.Dropdown.Item, { value: id, title: folder.name, icon: import_api34.Icon.Folder }, id);
        })
      ]
    }
  );
}

// src/components/ComponentReverser.tsx
var import_react17 = require("react");
var import_jsx_runtime20 = require("react/jsx-runtime");
var ComponentReverser = (props) => {
  const children = import_react17.Children.toArray(props.children);
  if (props.reverse) children.reverse();
  return /* @__PURE__ */ (0, import_jsx_runtime20.jsx)(import_jsx_runtime20.Fragment, { children });
};
var ComponentReverser_default = ComponentReverser;

// src/utils/hooks/useStateEffect.ts
var import_react18 = require("react");
function useStateEffect(initialState2, deps) {
  const [state, setState] = (0, import_react18.useState)(initialState2);
  (0, import_react18.useEffect)(() => {
    setState(initialState2);
  }, deps);
  return [state, setState];
}

// src/authenticator.tsx
var import_jsx_runtime21 = require("react/jsx-runtime");
var AuthenticatorCommand = () => /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(RootErrorBoundary, { children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(BitwardenProvider, { loadingFallback: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(import_api35.List, { searchBarPlaceholder: "Search items", isLoading: true }), children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(SessionProvider, { unlock: true, children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(vaultListeners_default, { children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(VaultProvider, { children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(AuthenticatorList, {}) }) }) }) }) });
function AuthenticatorList() {
  const vault = useVaultContext();
  const { data: activeTabUrl, isLoading: isActiveTabLoading } = useActiveTab();
  const vaultItems = vault.items.filter((item) => item.login?.totp);
  const { setSearchText, filteredItems } = useVaultSearch(vaultItems);
  const itemMatches = (0, import_react19.useMemo)(() => {
    if (!activeTabUrl) return { items: filteredItems, tabItems: [] };
    return filteredItems.reduce(
      (acc, item) => {
        const matchesUrl = item.login?.uris?.some(({ uri }) => uri?.includes(activeTabUrl.url.hostname));
        if (matchesUrl) {
          acc.tabItems.push(item);
        } else {
          acc.items.push(item);
        }
        return acc;
      },
      { items: [], tabItems: [] }
    );
  }, [filteredItems, activeTabUrl]);
  const isEmpty = itemMatches.items.length === 0 && itemMatches.tabItems.length === 0;
  const otherItemsList = itemMatches.items.map((item) => /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(ListItem, { item }, item.id));
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsxs)(
    import_api35.List,
    {
      filtering: false,
      onSearchTextChange: setSearchText,
      searchBarPlaceholder: "Search items",
      isLoading: vault.isLoading || isActiveTabLoading,
      searchBarAccessory: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(ListFolderDropdown, {}),
      actions: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(import_api35.ActionPanel, { children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(CommonActions, {}) }),
      children: [
        activeTabUrl && itemMatches.tabItems.length > 0 ? /* @__PURE__ */ (0, import_jsx_runtime21.jsxs)(import_jsx_runtime21.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(import_api35.List.Section, { title: `Active Tab (${activeTabUrl.url.hostname})`, children: itemMatches.tabItems.map((item) => /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(ListItem, { item }, item.id)) }),
          /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(import_api35.List.Section, { title: "Others", children: otherItemsList })
        ] }) : otherItemsList,
        /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(
          import_api35.List.EmptyView,
          {
            icon: { source: "bitwarden-64.png" },
            title: isEmpty ? "No authenticator keys found" : "No matching items found",
            description: "Hit the sync button to sync your vault"
          }
        )
      ]
    }
  );
}
function ListItem({ item }) {
  const icon = useItemIcon(item);
  const preferences = (0, import_api35.getPreferenceValues)();
  const [canGenerate, setCanGenerate] = (0, import_react19.useState)(!item.reprompt);
  const { code, time, error, isLoading } = authenticator.useCode(item, canGenerate);
  function getAccessories() {
    if (!canGenerate) {
      return [
        {
          text: { value: "Needs confirmation", color: import_api35.Color.Yellow },
          tooltip: "Needs master password confirmation"
        }
      ];
    }
    if (!isLoading) {
      if (error) {
        return [{ text: { value: error.message, color: import_api35.Color.Red } }];
      }
      if (code && time) {
        return [
          { text: code },
          {
            tag: { value: String(time), color: time <= 7 ? import_api35.Color.Red : import_api35.Color.Blue },
            tooltip: `${time} seconds remaining`
          }
        ];
      }
    }
    return [{ text: "Loading..." }];
  }
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(vaultItem_default.Provider, { value: item, children: /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(
    import_api35.List.Item,
    {
      title: item.name,
      subtitle: item.login?.username ?? void 0,
      icon,
      actions: /* @__PURE__ */ (0, import_jsx_runtime21.jsxs)(import_api35.ActionPanel, { children: [
        canGenerate ? /* @__PURE__ */ (0, import_jsx_runtime21.jsxs)(ComponentReverser_default, { reverse: preferences.primaryAction === "paste", children: [
          /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(CopyCodeAction, {}),
          /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(PasteCodeAction, {})
        ] }) : /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(ConfirmAction, { onConfirm: () => setCanGenerate(true) }),
        /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(CommonActions, {})
      ] }),
      accessories: getAccessories()
    }
  ) });
}
function CommonActions() {
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsxs)(import_jsx_runtime21.Fragment, { children: [
    /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(VaultActionsSection, {}),
    /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(DebuggingBugReportingActionSection, {})
  ] });
}
function ConfirmAction({ onConfirm }) {
  const selectedItem = useSelectedVaultItem();
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(
    ActionWithReprompt_default,
    {
      title: "Confirm Password",
      onAction: onConfirm,
      icon: import_api35.Icon.Lock,
      repromptDescription: `Generating an authentication code for <${selectedItem.name}>`
    }
  );
}
function CopyCodeAction() {
  const getCode = useGetCodeForAction("copy");
  const copy = async () => {
    const code = await getCode();
    if (code) {
      await import_api35.Clipboard.copy(code, { transient: getTransientCopyPreference("other") });
      await showCopySuccessMessage("Copied code to clipboard");
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(import_api35.Action, { title: "Copy Code", onAction: copy, icon: import_api35.Icon.Clipboard });
}
function PasteCodeAction() {
  const frontmostAppName = useFrontmostApplicationName();
  const getCode = useGetCodeForAction("paste");
  const paste = async () => {
    const code = await getCode();
    if (code) {
      await import_api35.Clipboard.paste(code);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(
    import_api35.Action,
    {
      title: frontmostAppName ? `Paste Code into ${frontmostAppName}` : "Paste Code",
      onAction: paste,
      icon: import_api35.Icon.Window
    }
  );
}
function useGetCodeForAction(action) {
  const selectedItem = useSelectedVaultItem();
  const getVaultItem = useGetUpdatedVaultItem_default();
  return async () => {
    try {
      const totp = await getVaultItem(selectedItem, (item) => item.login?.totp, "Getting code...");
      if (!totp) throw new Error("Failed to get totp");
      const [generator, error] = authenticator.getGenerator(totp);
      if (error) throw error;
      return generator.generate();
    } catch (error) {
      await (0, import_api35.showToast)(import_api35.Toast.Style.Failure, "Failed to get code");
      captureException(`Failed to ${action} code`, error);
      return void 0;
    }
  };
}
function useActiveTab() {
  return $cefc05764ce5eacd$export$dd6b79aaabe7bc37(async () => {
    if (!import_api35.environment.canAccess(import_api35.BrowserExtension)) return void 0;
    const [tabs, error] = await tryCatch(import_api35.BrowserExtension.getTabs());
    if (error) return void 0;
    const activeTab = tabs.find((tab) => tab.active);
    return activeTab ? { ...activeTab, url: new URL(activeTab.url) } : void 0;
  });
}
var authenticator = {
  parseTotp(totpString) {
    if (totpString.includes("otpauth")) {
      const [totp, parseError] = tryCatch(() => URI.parse(totpString));
      if (parseError) throw parseError;
      if (!(totp instanceof TOTP)) throw new Error("Invalid authenticator key");
      return {
        algorithm: totp.algorithm,
        secret: totp.secret.base32.toString(),
        period: totp.period,
        digits: totp.digits
      };
    }
    return { secret: totpString, period: 30, algorithm: "SHA1", digits: 6 };
  },
  getGenerator(totpString) {
    const [options, parseError] = tryCatch(() => authenticator.parseTotp(totpString));
    if (parseError) {
      captureException("Failed to parse key", parseError);
      return Err(new Error("Failed to parse authenticator key"));
    }
    const [generator, initError] = tryCatch(() => new TOTP(options));
    if (initError) {
      captureException("Failed to initialize authenticator", initError);
      return Err(new Error("Failed to initialize authenticator"));
    }
    return Ok(generator);
  },
  useCode(item, canGenerate = true) {
    const [[generator, error, isLoading = false], setState] = useStateEffect(() => {
      const { totp } = item.login ?? {};
      if (!canGenerate) return Loading(new Error("Needs confirmation..."));
      if (totp === SENSITIVE_VALUE_PLACEHOLDER) return Loading(new Error("Loading..."));
      if (!totp) return Err(new Error("No TOTP found"));
      return authenticator.getGenerator(totp);
    }, [item, canGenerate]);
    const [code, setCode] = (0, import_react19.useState)(null);
    const [time, setTime] = (0, import_react19.useState)(null);
    (0, import_react19.useEffect)(() => {
      if (error) return;
      let interval;
      let timeout;
      const cleanup = () => {
        clearTimeout(timeout);
        clearInterval(interval);
      };
      const setTimeAndCode = () => {
        try {
          const timeRemaining = Math.ceil(generator.remaining() / 1e3);
          setTime(timeRemaining);
          if (timeRemaining === generator.period) {
            setCode(generator.generate());
          }
        } catch (error2) {
          setState(Err(new Error("Failed to regenerate")));
          cleanup();
          captureException("Failed to regenerate", error2);
        }
      };
      try {
        timeout = setTimeout(() => {
          setTimeAndCode();
          interval = setInterval(setTimeAndCode, 1e3);
        }, generator.remaining() % 1e3);
        setCode(generator.generate());
      } catch (error2) {
        setState(Err(new Error("Failed to generate")));
        cleanup();
        captureException("Failed to generate", error2);
      }
      return cleanup;
    }, [item, generator]);
    return { code, time, error, isLoading };
  }
};
function Loading(error) {
  return [null, error, true];
}
var authenticator_default = AuthenticatorCommand;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)

otpauth/dist/otpauth.node.mjs:
  (*! otpauth 9.4.0 | (c) Hctor Molinero Fernndez | MIT | https://github.com/hectorm/otpauth *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL3dpbmRvd3MuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL21vZGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy93aGljaC93aGljaC5qcyIsICIuLi9ub2RlX21vZHVsZXMvcGF0aC1rZXkvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLXNwYXduL2xpYi91dGlsL3Jlc29sdmVDb21tYW5kLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9jcm9zcy1zcGF3bi9saWIvdXRpbC9lc2NhcGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NoZWJhbmctcmVnZXgvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NoZWJhbmctY29tbWFuZC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vbGliL3V0aWwvcmVhZFNoZWJhbmcuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLXNwYXduL2xpYi9wYXJzZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vbGliL2Vub2VudC5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NpZ25hbC1leGl0L3NpZ25hbHMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NpZ25hbC1leGl0L2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9nZXQtc3RyZWFtL2J1ZmZlci1zdHJlYW0uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2dldC1zdHJlYW0vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL21lcmdlLXN0cmVhbS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvbm9kZS1zdHJlYW0temlwL25vZGVfc3RyZWFtX3ppcC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC90eXBlcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC90eXBlVHJpZS5qc29uIiwgIi4uL25vZGVfbW9kdWxlcy9ncmFwaGVtZXNwbGl0L2V4dFBpY3QuanNvbiIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC9pbkNCLmpzb24iLCAiLi4vbm9kZV9tb2R1bGVzL3RpbnktaW5mbGF0ZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvdW5pY29kZS10cmllL3N3YXAuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3VuaWNvZGUtdHJpZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvanMtYmFzZTY0L2Jhc2U2NC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC9pbmRleC5qcyIsICIuLi9zcmMvYXV0aGVudGljYXRvci50c3giLCAiLi4vbm9kZV9tb2R1bGVzL290cGF1dGgvZGlzdC9vdHBhdXRoLm5vZGUubWpzIiwgIi4uL25vZGVfbW9kdWxlcy9kZXF1YWwvbGl0ZS9pbmRleC5tanMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2luZGV4LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VQcm9taXNlLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VEZWVwTWVtby50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlTGF0ZXN0LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9zaG93RmFpbHVyZVRvYXN0LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VDYWNoZWRTdGF0ZS50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaGVscGVycy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdmVuZG9ycy90eXBlLWhhc2hlci50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlQ2FjaGVkUHJvbWlzZS50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlRmV0Y2gudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2ZldGNoLXV0aWxzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VFeGVjLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9leGVjLXV0aWxzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy92ZW5kb3JzL3NpZ25hbC1leGl0LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VTdHJlYW1KU09OLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy92ZW5kb3JzL3N0cmVhbS1jaGFpbi50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdmVuZG9ycy9zdHJlYW0tanNvbi50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlU1FMLnRzeCIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvc3FsLXV0aWxzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VGb3JtLnRzeCIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlQUkudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUZyZWNlbmN5U29ydGluZy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlTG9jYWxTdG9yYWdlLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9pY29uL2luZGV4LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9pY29uL2F2YXRhci50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaWNvbi9jb2xvci50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaWNvbi9mYXZpY29uLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9pY29uL3Byb2dyZXNzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9vYXV0aC9pbmRleC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvb2F1dGgvT0F1dGhTZXJ2aWNlLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9vYXV0aC9wcm92aWRlcnMudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL29hdXRoL3dpdGhBY2Nlc3NUb2tlbi50c3giLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2NyZWF0ZURlZXBsaW5rLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9leGVjdXRlU1FMLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9ydW4tYXBwbGVzY3JpcHQudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3J1bi1wb3dlcnNoZWxsLXNjcmlwdC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvY2FjaGUudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvUm9vdEVycm9yQm91bmRhcnkudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL1Ryb3VibGVzaG9vdGluZ0d1aWRlLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9hY3Rpb25zL0FjdGlvbldpdGhSZXByb21wdC50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW0udHN4IiwgIi4uL3NyYy91dGlscy9ob29rcy91c2VSZXByb21wdC50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvUmVwcm9tcHRGb3JtLnRzeCIsICIuLi9zcmMvY29udGV4dC9zZXNzaW9uL3Nlc3Npb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL1VubG9ja0Zvcm0udHN4IiwgIi4uL3NyYy9jb25zdGFudHMvZ2VuZXJhbC50cyIsICIuLi9zcmMvdHlwZXMvdmF1bHQudHMiLCAiLi4vc3JjL2NvbnRleHQvYml0d2FyZGVuLnRzeCIsICIuLi9zcmMvYXBpL2JpdHdhcmRlbi50cyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3N0cmlwLWZpbmFsLW5ld2xpbmUvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL25wbS1ydW4tcGF0aC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvbnBtLXJ1bi1wYXRoL25vZGVfbW9kdWxlcy9wYXRoLWtleS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvbWltaWMtZm4vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL29uZXRpbWUvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL2h1bWFuLXNpZ25hbHMvYnVpbGQvc3JjL21haW4uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2h1bWFuLXNpZ25hbHMvYnVpbGQvc3JjL3JlYWx0aW1lLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9odW1hbi1zaWduYWxzL2J1aWxkL3NyYy9zaWduYWxzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9odW1hbi1zaWduYWxzL2J1aWxkL3NyYy9jb3JlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9leGVjYS9saWIvZXJyb3IuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2V4ZWNhL2xpYi9zdGRpby5qcyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvbGliL2tpbGwuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2lzLXN0cmVhbS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvbGliL3N0cmVhbS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvbGliL3Byb21pc2UuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2V4ZWNhL2xpYi9jb21tYW5kLmpzIiwgIi4uL3NyYy91dGlscy9wYXNzd29yZHMudHMiLCAiLi4vc3JjL2NvbnN0YW50cy9wYXNzd29yZHMudHMiLCAiLi4vc3JjL3V0aWxzL3ByZWZlcmVuY2VzLnRzIiwgIi4uL3NyYy9jb25zdGFudHMvcHJlZmVyZW5jZXMudHMiLCAiLi4vc3JjL2NvbnN0YW50cy9sYWJlbHMudHMiLCAiLi4vc3JjL3V0aWxzL2Vycm9ycy50cyIsICIuLi9zcmMvdXRpbHMvZnMudHMiLCAiLi4vc3JjL3V0aWxzL25ldHdvcmsudHMiLCAiLi4vc3JjL3V0aWxzL2RldmVsb3BtZW50LnRzIiwgIi4uL3NyYy91dGlscy9jcnlwdG8udHMiLCAiLi4vc3JjL2FwaS9iaXR3YXJkZW4uaGVscGVycy50cyIsICIuLi9zcmMvdXRpbHMvY2FjaGUudHMiLCAiLi4vc3JjL3V0aWxzL3BsYXRmb3JtLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL0xvYWRpbmdGYWxsYmFjay50c3giLCAiLi4vc3JjL3V0aWxzL2hvb2tzL3VzZU9uY2VFZmZlY3QudHMiLCAiLi4vc3JjL3V0aWxzL29iamVjdHMudHMiLCAiLi4vc3JjL3V0aWxzL2RlYnVnLnRzIiwgIi4uL3NyYy91dGlscy9ob29rcy91c2VWYXVsdE1lc3NhZ2VzLnRzIiwgIi4uL3NyYy91dGlscy9sb2NhbHN0b3JhZ2UudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvVmF1bHRMb2FkaW5nRmFsbGJhY2sudHN4IiwgIi4uL3NyYy9jb250ZXh0L3Nlc3Npb24vcmVkdWNlci50cyIsICIuLi9zcmMvY29udGV4dC9zZXNzaW9uL3V0aWxzLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvQnVnUmVwb3J0Q29sbGVjdERhdGFBY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvQnVnUmVwb3J0T3BlbkFjdGlvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvYWN0aW9ucy9Db3B5UnVudGltZUVycm9yTG9nLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9hY3Rpb25zL0RlYnVnZ2luZ0J1Z1JlcG9ydGluZ0FjdGlvblNlY3Rpb24udHN4IiwgIi4uL3NyYy91dGlscy9ob29rcy91c2VDbGlWZXJzaW9uLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvVmF1bHRBY3Rpb25zU2VjdGlvbi50c3giLCAiLi4vc3JjL2NvbnRleHQvdmF1bHQudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRMaXN0ZW5lcnMudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZVZhdWx0Q2FjaGluZy50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy9jYWNoaW5nLnRzIiwgIi4uL3NyYy91dGlscy9ob29rcy91c2VDb250ZW50RW5jcnlwdG9yLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZUl0ZW1JY29uLnRzIiwgIi4uL3NyYy91dGlscy9jYXJkcy50cyIsICIuLi9zcmMvdXRpbHMvc2VhcmNoLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9mYXN0LWZ1enp5L2xpYi9mdXp6eS5tanMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbS50cyIsICIuLi9zcmMvdXRpbHMvY2xpcGJvYXJkLnRzIiwgIi4uL3NyYy91dGlscy9zdHJpbmdzLnRzIiwgIi4uL3NyYy91dGlscy9ob29rcy91c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvTGlzdEZvbGRlckRyb3Bkb3duLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9Db21wb25lbnRSZXZlcnNlci50c3giLCAiLi4vc3JjL3V0aWxzL2hvb2tzL3VzZVN0YXRlRWZmZWN0LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJtb2R1bGUuZXhwb3J0cyA9IGlzZXhlXG5pc2V4ZS5zeW5jID0gc3luY1xuXG52YXIgZnMgPSByZXF1aXJlKCdmcycpXG5cbmZ1bmN0aW9uIGNoZWNrUGF0aEV4dCAocGF0aCwgb3B0aW9ucykge1xuICB2YXIgcGF0aGV4dCA9IG9wdGlvbnMucGF0aEV4dCAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnBhdGhFeHQgOiBwcm9jZXNzLmVudi5QQVRIRVhUXG5cbiAgaWYgKCFwYXRoZXh0KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHBhdGhleHQgPSBwYXRoZXh0LnNwbGl0KCc7JylcbiAgaWYgKHBhdGhleHQuaW5kZXhPZignJykgIT09IC0xKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhleHQubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcCA9IHBhdGhleHRbaV0udG9Mb3dlckNhc2UoKVxuICAgIGlmIChwICYmIHBhdGguc3Vic3RyKC1wLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gcCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGNoZWNrU3RhdCAoc3RhdCwgcGF0aCwgb3B0aW9ucykge1xuICBpZiAoIXN0YXQuaXNTeW1ib2xpY0xpbmsoKSAmJiAhc3RhdC5pc0ZpbGUoKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiBjaGVja1BhdGhFeHQocGF0aCwgb3B0aW9ucylcbn1cblxuZnVuY3Rpb24gaXNleGUgKHBhdGgsIG9wdGlvbnMsIGNiKSB7XG4gIGZzLnN0YXQocGF0aCwgZnVuY3Rpb24gKGVyLCBzdGF0KSB7XG4gICAgY2IoZXIsIGVyID8gZmFsc2UgOiBjaGVja1N0YXQoc3RhdCwgcGF0aCwgb3B0aW9ucykpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIHN5bmMgKHBhdGgsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGNoZWNrU3RhdChmcy5zdGF0U3luYyhwYXRoKSwgcGF0aCwgb3B0aW9ucylcbn1cbiIsICJtb2R1bGUuZXhwb3J0cyA9IGlzZXhlXG5pc2V4ZS5zeW5jID0gc3luY1xuXG52YXIgZnMgPSByZXF1aXJlKCdmcycpXG5cbmZ1bmN0aW9uIGlzZXhlIChwYXRoLCBvcHRpb25zLCBjYikge1xuICBmcy5zdGF0KHBhdGgsIGZ1bmN0aW9uIChlciwgc3RhdCkge1xuICAgIGNiKGVyLCBlciA/IGZhbHNlIDogY2hlY2tTdGF0KHN0YXQsIG9wdGlvbnMpKVxuICB9KVxufVxuXG5mdW5jdGlvbiBzeW5jIChwYXRoLCBvcHRpb25zKSB7XG4gIHJldHVybiBjaGVja1N0YXQoZnMuc3RhdFN5bmMocGF0aCksIG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGNoZWNrU3RhdCAoc3RhdCwgb3B0aW9ucykge1xuICByZXR1cm4gc3RhdC5pc0ZpbGUoKSAmJiBjaGVja01vZGUoc3RhdCwgb3B0aW9ucylcbn1cblxuZnVuY3Rpb24gY2hlY2tNb2RlIChzdGF0LCBvcHRpb25zKSB7XG4gIHZhciBtb2QgPSBzdGF0Lm1vZGVcbiAgdmFyIHVpZCA9IHN0YXQudWlkXG4gIHZhciBnaWQgPSBzdGF0LmdpZFxuXG4gIHZhciBteVVpZCA9IG9wdGlvbnMudWlkICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMudWlkIDogcHJvY2Vzcy5nZXR1aWQgJiYgcHJvY2Vzcy5nZXR1aWQoKVxuICB2YXIgbXlHaWQgPSBvcHRpb25zLmdpZCAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLmdpZCA6IHByb2Nlc3MuZ2V0Z2lkICYmIHByb2Nlc3MuZ2V0Z2lkKClcblxuICB2YXIgdSA9IHBhcnNlSW50KCcxMDAnLCA4KVxuICB2YXIgZyA9IHBhcnNlSW50KCcwMTAnLCA4KVxuICB2YXIgbyA9IHBhcnNlSW50KCcwMDEnLCA4KVxuICB2YXIgdWcgPSB1IHwgZ1xuXG4gIHZhciByZXQgPSAobW9kICYgbykgfHxcbiAgICAobW9kICYgZykgJiYgZ2lkID09PSBteUdpZCB8fFxuICAgIChtb2QgJiB1KSAmJiB1aWQgPT09IG15VWlkIHx8XG4gICAgKG1vZCAmIHVnKSAmJiBteVVpZCA9PT0gMFxuXG4gIHJldHVybiByZXRcbn1cbiIsICJ2YXIgZnMgPSByZXF1aXJlKCdmcycpXG52YXIgY29yZVxuaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicgfHwgZ2xvYmFsLlRFU1RJTkdfV0lORE9XUykge1xuICBjb3JlID0gcmVxdWlyZSgnLi93aW5kb3dzLmpzJylcbn0gZWxzZSB7XG4gIGNvcmUgPSByZXF1aXJlKCcuL21vZGUuanMnKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzZXhlXG5pc2V4ZS5zeW5jID0gc3luY1xuXG5mdW5jdGlvbiBpc2V4ZSAocGF0aCwgb3B0aW9ucywgY2IpIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBvcHRpb25zXG4gICAgb3B0aW9ucyA9IHt9XG4gIH1cblxuICBpZiAoIWNiKSB7XG4gICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYWxsYmFjayBub3QgcHJvdmlkZWQnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpc2V4ZShwYXRoLCBvcHRpb25zIHx8IHt9LCBmdW5jdGlvbiAoZXIsIGlzKSB7XG4gICAgICAgIGlmIChlcikge1xuICAgICAgICAgIHJlamVjdChlcilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGlzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBjb3JlKHBhdGgsIG9wdGlvbnMgfHwge30sIGZ1bmN0aW9uIChlciwgaXMpIHtcbiAgICAvLyBpZ25vcmUgRUFDQ0VTIGJlY2F1c2UgdGhhdCBqdXN0IG1lYW5zIHdlIGFyZW4ndCBhbGxvd2VkIHRvIHJ1biBpdFxuICAgIGlmIChlcikge1xuICAgICAgaWYgKGVyLmNvZGUgPT09ICdFQUNDRVMnIHx8IG9wdGlvbnMgJiYgb3B0aW9ucy5pZ25vcmVFcnJvcnMpIHtcbiAgICAgICAgZXIgPSBudWxsXG4gICAgICAgIGlzID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgY2IoZXIsIGlzKVxuICB9KVxufVxuXG5mdW5jdGlvbiBzeW5jIChwYXRoLCBvcHRpb25zKSB7XG4gIC8vIG15IGtpbmdkb20gZm9yIGEgZmlsdGVyZWQgY2F0Y2hcbiAgdHJ5IHtcbiAgICByZXR1cm4gY29yZS5zeW5jKHBhdGgsIG9wdGlvbnMgfHwge30pXG4gIH0gY2F0Y2ggKGVyKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pZ25vcmVFcnJvcnMgfHwgZXIuY29kZSA9PT0gJ0VBQ0NFUycpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlclxuICAgIH1cbiAgfVxufVxuIiwgImNvbnN0IGlzV2luZG93cyA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicgfHxcbiAgICBwcm9jZXNzLmVudi5PU1RZUEUgPT09ICdjeWd3aW4nIHx8XG4gICAgcHJvY2Vzcy5lbnYuT1NUWVBFID09PSAnbXN5cydcblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3QgQ09MT04gPSBpc1dpbmRvd3MgPyAnOycgOiAnOidcbmNvbnN0IGlzZXhlID0gcmVxdWlyZSgnaXNleGUnKVxuXG5jb25zdCBnZXROb3RGb3VuZEVycm9yID0gKGNtZCkgPT5cbiAgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoYG5vdCBmb3VuZDogJHtjbWR9YCksIHsgY29kZTogJ0VOT0VOVCcgfSlcblxuY29uc3QgZ2V0UGF0aEluZm8gPSAoY21kLCBvcHQpID0+IHtcbiAgY29uc3QgY29sb24gPSBvcHQuY29sb24gfHwgQ09MT05cblxuICAvLyBJZiBpdCBoYXMgYSBzbGFzaCwgdGhlbiB3ZSBkb24ndCBib3RoZXIgc2VhcmNoaW5nIHRoZSBwYXRoZW52LlxuICAvLyBqdXN0IGNoZWNrIHRoZSBmaWxlIGl0c2VsZiwgYW5kIHRoYXQncyBpdC5cbiAgY29uc3QgcGF0aEVudiA9IGNtZC5tYXRjaCgvXFwvLykgfHwgaXNXaW5kb3dzICYmIGNtZC5tYXRjaCgvXFxcXC8pID8gWycnXVxuICAgIDogKFxuICAgICAgW1xuICAgICAgICAvLyB3aW5kb3dzIGFsd2F5cyBjaGVja3MgdGhlIGN3ZCBmaXJzdFxuICAgICAgICAuLi4oaXNXaW5kb3dzID8gW3Byb2Nlc3MuY3dkKCldIDogW10pLFxuICAgICAgICAuLi4ob3B0LnBhdGggfHwgcHJvY2Vzcy5lbnYuUEFUSCB8fFxuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiB2ZXJ5IHVudXN1YWwgKi8gJycpLnNwbGl0KGNvbG9uKSxcbiAgICAgIF1cbiAgICApXG4gIGNvbnN0IHBhdGhFeHRFeGUgPSBpc1dpbmRvd3NcbiAgICA/IG9wdC5wYXRoRXh0IHx8IHByb2Nlc3MuZW52LlBBVEhFWFQgfHwgJy5FWEU7LkNNRDsuQkFUOy5DT00nXG4gICAgOiAnJ1xuICBjb25zdCBwYXRoRXh0ID0gaXNXaW5kb3dzID8gcGF0aEV4dEV4ZS5zcGxpdChjb2xvbikgOiBbJyddXG5cbiAgaWYgKGlzV2luZG93cykge1xuICAgIGlmIChjbWQuaW5kZXhPZignLicpICE9PSAtMSAmJiBwYXRoRXh0WzBdICE9PSAnJylcbiAgICAgIHBhdGhFeHQudW5zaGlmdCgnJylcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGF0aEVudixcbiAgICBwYXRoRXh0LFxuICAgIHBhdGhFeHRFeGUsXG4gIH1cbn1cblxuY29uc3Qgd2hpY2ggPSAoY21kLCBvcHQsIGNiKSA9PiB7XG4gIGlmICh0eXBlb2Ygb3B0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBvcHRcbiAgICBvcHQgPSB7fVxuICB9XG4gIGlmICghb3B0KVxuICAgIG9wdCA9IHt9XG5cbiAgY29uc3QgeyBwYXRoRW52LCBwYXRoRXh0LCBwYXRoRXh0RXhlIH0gPSBnZXRQYXRoSW5mbyhjbWQsIG9wdClcbiAgY29uc3QgZm91bmQgPSBbXVxuXG4gIGNvbnN0IHN0ZXAgPSBpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpZiAoaSA9PT0gcGF0aEVudi5sZW5ndGgpXG4gICAgICByZXR1cm4gb3B0LmFsbCAmJiBmb3VuZC5sZW5ndGggPyByZXNvbHZlKGZvdW5kKVxuICAgICAgICA6IHJlamVjdChnZXROb3RGb3VuZEVycm9yKGNtZCkpXG5cbiAgICBjb25zdCBwcFJhdyA9IHBhdGhFbnZbaV1cbiAgICBjb25zdCBwYXRoUGFydCA9IC9eXCIuKlwiJC8udGVzdChwcFJhdykgPyBwcFJhdy5zbGljZSgxLCAtMSkgOiBwcFJhd1xuXG4gICAgY29uc3QgcENtZCA9IHBhdGguam9pbihwYXRoUGFydCwgY21kKVxuICAgIGNvbnN0IHAgPSAhcGF0aFBhcnQgJiYgL15cXC5bXFxcXFxcL10vLnRlc3QoY21kKSA/IGNtZC5zbGljZSgwLCAyKSArIHBDbWRcbiAgICAgIDogcENtZFxuXG4gICAgcmVzb2x2ZShzdWJTdGVwKHAsIGksIDApKVxuICB9KVxuXG4gIGNvbnN0IHN1YlN0ZXAgPSAocCwgaSwgaWkpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpZiAoaWkgPT09IHBhdGhFeHQubGVuZ3RoKVxuICAgICAgcmV0dXJuIHJlc29sdmUoc3RlcChpICsgMSkpXG4gICAgY29uc3QgZXh0ID0gcGF0aEV4dFtpaV1cbiAgICBpc2V4ZShwICsgZXh0LCB7IHBhdGhFeHQ6IHBhdGhFeHRFeGUgfSwgKGVyLCBpcykgPT4ge1xuICAgICAgaWYgKCFlciAmJiBpcykge1xuICAgICAgICBpZiAob3B0LmFsbClcbiAgICAgICAgICBmb3VuZC5wdXNoKHAgKyBleHQpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShwICsgZXh0KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUoc3ViU3RlcChwLCBpLCBpaSArIDEpKVxuICAgIH0pXG4gIH0pXG5cbiAgcmV0dXJuIGNiID8gc3RlcCgwKS50aGVuKHJlcyA9PiBjYihudWxsLCByZXMpLCBjYikgOiBzdGVwKDApXG59XG5cbmNvbnN0IHdoaWNoU3luYyA9IChjbWQsIG9wdCkgPT4ge1xuICBvcHQgPSBvcHQgfHwge31cblxuICBjb25zdCB7IHBhdGhFbnYsIHBhdGhFeHQsIHBhdGhFeHRFeGUgfSA9IGdldFBhdGhJbmZvKGNtZCwgb3B0KVxuICBjb25zdCBmb3VuZCA9IFtdXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoRW52Lmxlbmd0aDsgaSArKykge1xuICAgIGNvbnN0IHBwUmF3ID0gcGF0aEVudltpXVxuICAgIGNvbnN0IHBhdGhQYXJ0ID0gL15cIi4qXCIkLy50ZXN0KHBwUmF3KSA/IHBwUmF3LnNsaWNlKDEsIC0xKSA6IHBwUmF3XG5cbiAgICBjb25zdCBwQ21kID0gcGF0aC5qb2luKHBhdGhQYXJ0LCBjbWQpXG4gICAgY29uc3QgcCA9ICFwYXRoUGFydCAmJiAvXlxcLltcXFxcXFwvXS8udGVzdChjbWQpID8gY21kLnNsaWNlKDAsIDIpICsgcENtZFxuICAgICAgOiBwQ21kXG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhdGhFeHQubGVuZ3RoOyBqICsrKSB7XG4gICAgICBjb25zdCBjdXIgPSBwICsgcGF0aEV4dFtqXVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaXMgPSBpc2V4ZS5zeW5jKGN1ciwgeyBwYXRoRXh0OiBwYXRoRXh0RXhlIH0pXG4gICAgICAgIGlmIChpcykge1xuICAgICAgICAgIGlmIChvcHQuYWxsKVxuICAgICAgICAgICAgZm91bmQucHVzaChjdXIpXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGN1clxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChleCkge31cbiAgICB9XG4gIH1cblxuICBpZiAob3B0LmFsbCAmJiBmb3VuZC5sZW5ndGgpXG4gICAgcmV0dXJuIGZvdW5kXG5cbiAgaWYgKG9wdC5ub3Rocm93KVxuICAgIHJldHVybiBudWxsXG5cbiAgdGhyb3cgZ2V0Tm90Rm91bmRFcnJvcihjbWQpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2hpY2hcbndoaWNoLnN5bmMgPSB3aGljaFN5bmNcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHBhdGhLZXkgPSAob3B0aW9ucyA9IHt9KSA9PiB7XG5cdGNvbnN0IGVudmlyb25tZW50ID0gb3B0aW9ucy5lbnYgfHwgcHJvY2Vzcy5lbnY7XG5cdGNvbnN0IHBsYXRmb3JtID0gb3B0aW9ucy5wbGF0Zm9ybSB8fCBwcm9jZXNzLnBsYXRmb3JtO1xuXG5cdGlmIChwbGF0Zm9ybSAhPT0gJ3dpbjMyJykge1xuXHRcdHJldHVybiAnUEFUSCc7XG5cdH1cblxuXHRyZXR1cm4gT2JqZWN0LmtleXMoZW52aXJvbm1lbnQpLnJldmVyc2UoKS5maW5kKGtleSA9PiBrZXkudG9VcHBlckNhc2UoKSA9PT0gJ1BBVEgnKSB8fCAnUGF0aCc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGhLZXk7XG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBmb3IgdGhlIG5leHQgbWFqb3IgcmVsZWFzZVxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHBhdGhLZXk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3Qgd2hpY2ggPSByZXF1aXJlKCd3aGljaCcpO1xuY29uc3QgZ2V0UGF0aEtleSA9IHJlcXVpcmUoJ3BhdGgta2V5Jyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVDb21tYW5kQXR0ZW1wdChwYXJzZWQsIHdpdGhvdXRQYXRoRXh0KSB7XG4gICAgY29uc3QgZW52ID0gcGFyc2VkLm9wdGlvbnMuZW52IHx8IHByb2Nlc3MuZW52O1xuICAgIGNvbnN0IGN3ZCA9IHByb2Nlc3MuY3dkKCk7XG4gICAgY29uc3QgaGFzQ3VzdG9tQ3dkID0gcGFyc2VkLm9wdGlvbnMuY3dkICE9IG51bGw7XG4gICAgLy8gV29ya2VyIHRocmVhZHMgZG8gbm90IGhhdmUgcHJvY2Vzcy5jaGRpcigpXG4gICAgY29uc3Qgc2hvdWxkU3dpdGNoQ3dkID0gaGFzQ3VzdG9tQ3dkICYmIHByb2Nlc3MuY2hkaXIgIT09IHVuZGVmaW5lZCAmJiAhcHJvY2Vzcy5jaGRpci5kaXNhYmxlZDtcblxuICAgIC8vIElmIGEgY3VzdG9tIGBjd2RgIHdhcyBzcGVjaWZpZWQsIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBwcm9jZXNzIGN3ZFxuICAgIC8vIGJlY2F1c2UgYHdoaWNoYCB3aWxsIGRvIHN0YXQgY2FsbHMgYnV0IGRvZXMgbm90IHN1cHBvcnQgYSBjdXN0b20gY3dkXG4gICAgaWYgKHNob3VsZFN3aXRjaEN3ZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvY2Vzcy5jaGRpcihwYXJzZWQub3B0aW9ucy5jd2QpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8qIEVtcHR5ICovXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmVzb2x2ZWQ7XG5cbiAgICB0cnkge1xuICAgICAgICByZXNvbHZlZCA9IHdoaWNoLnN5bmMocGFyc2VkLmNvbW1hbmQsIHtcbiAgICAgICAgICAgIHBhdGg6IGVudltnZXRQYXRoS2V5KHsgZW52IH0pXSxcbiAgICAgICAgICAgIHBhdGhFeHQ6IHdpdGhvdXRQYXRoRXh0ID8gcGF0aC5kZWxpbWl0ZXIgOiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLyogRW1wdHkgKi9cbiAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoc2hvdWxkU3dpdGNoQ3dkKSB7XG4gICAgICAgICAgICBwcm9jZXNzLmNoZGlyKGN3ZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgcmVzb2x2ZWQsIGVuc3VyZSB0aGF0IGFuIGFic29sdXRlIHBhdGggaXMgcmV0dXJuZWRcbiAgICAvLyBOb3RlIHRoYXQgd2hlbiBhIGN1c3RvbSBgY3dkYCB3YXMgdXNlZCwgd2UgbmVlZCB0byByZXNvbHZlIHRvIGFuIGFic29sdXRlIHBhdGggYmFzZWQgb24gaXRcbiAgICBpZiAocmVzb2x2ZWQpIHtcbiAgICAgICAgcmVzb2x2ZWQgPSBwYXRoLnJlc29sdmUoaGFzQ3VzdG9tQ3dkID8gcGFyc2VkLm9wdGlvbnMuY3dkIDogJycsIHJlc29sdmVkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVDb21tYW5kKHBhcnNlZCkge1xuICAgIHJldHVybiByZXNvbHZlQ29tbWFuZEF0dGVtcHQocGFyc2VkKSB8fCByZXNvbHZlQ29tbWFuZEF0dGVtcHQocGFyc2VkLCB0cnVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXNvbHZlQ29tbWFuZDtcbiIsICIndXNlIHN0cmljdCc7XG5cbi8vIFNlZSBodHRwOi8vd3d3LnJvYnZhbmRlcndvdWRlLmNvbS9lc2NhcGVjaGFycy5waHBcbmNvbnN0IG1ldGFDaGFyc1JlZ0V4cCA9IC8oWygpXFxdWyUhXlwiYDw+Jnw7LCAqP10pL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZUNvbW1hbmQoYXJnKSB7XG4gICAgLy8gRXNjYXBlIG1ldGEgY2hhcnNcbiAgICBhcmcgPSBhcmcucmVwbGFjZShtZXRhQ2hhcnNSZWdFeHAsICdeJDEnKTtcblxuICAgIHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZUFyZ3VtZW50KGFyZywgZG91YmxlRXNjYXBlTWV0YUNoYXJzKSB7XG4gICAgLy8gQ29udmVydCB0byBzdHJpbmdcbiAgICBhcmcgPSBgJHthcmd9YDtcblxuICAgIC8vIEFsZ29yaXRobSBiZWxvdyBpcyBiYXNlZCBvbiBodHRwczovL3FudG0ub3JnL2NtZFxuICAgIC8vIEl0J3Mgc2xpZ2h0bHkgYWx0ZXJlZCB0byBkaXNhYmxlIEpTIGJhY2t0cmFja2luZyB0byBhdm9pZCBoYW5naW5nIG9uIHNwZWNpYWxseSBjcmFmdGVkIGlucHV0XG4gICAgLy8gUGxlYXNlIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW94eXN0dWRpby9ub2RlLWNyb3NzLXNwYXduL3B1bGwvMTYwIGZvciBtb3JlIGluZm9ybWF0aW9uXG5cbiAgICAvLyBTZXF1ZW5jZSBvZiBiYWNrc2xhc2hlcyBmb2xsb3dlZCBieSBhIGRvdWJsZSBxdW90ZTpcbiAgICAvLyBkb3VibGUgdXAgYWxsIHRoZSBiYWNrc2xhc2hlcyBhbmQgZXNjYXBlIHRoZSBkb3VibGUgcXVvdGVcbiAgICBhcmcgPSBhcmcucmVwbGFjZSgvKD89KFxcXFwrPyk/KVxcMVwiL2csICckMSQxXFxcXFwiJyk7XG5cbiAgICAvLyBTZXF1ZW5jZSBvZiBiYWNrc2xhc2hlcyBmb2xsb3dlZCBieSB0aGUgZW5kIG9mIHRoZSBzdHJpbmdcbiAgICAvLyAod2hpY2ggd2lsbCBiZWNvbWUgYSBkb3VibGUgcXVvdGUgbGF0ZXIpOlxuICAgIC8vIGRvdWJsZSB1cCBhbGwgdGhlIGJhY2tzbGFzaGVzXG4gICAgYXJnID0gYXJnLnJlcGxhY2UoLyg/PShcXFxcKz8pPylcXDEkLywgJyQxJDEnKTtcblxuICAgIC8vIEFsbCBvdGhlciBiYWNrc2xhc2hlcyBvY2N1ciBsaXRlcmFsbHlcblxuICAgIC8vIFF1b3RlIHRoZSB3aG9sZSB0aGluZzpcbiAgICBhcmcgPSBgXCIke2FyZ31cImA7XG5cbiAgICAvLyBFc2NhcGUgbWV0YSBjaGFyc1xuICAgIGFyZyA9IGFyZy5yZXBsYWNlKG1ldGFDaGFyc1JlZ0V4cCwgJ14kMScpO1xuXG4gICAgLy8gRG91YmxlIGVzY2FwZSBtZXRhIGNoYXJzIGlmIG5lY2Vzc2FyeVxuICAgIGlmIChkb3VibGVFc2NhcGVNZXRhQ2hhcnMpIHtcbiAgICAgICAgYXJnID0gYXJnLnJlcGxhY2UobWV0YUNoYXJzUmVnRXhwLCAnXiQxJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZztcbn1cblxubW9kdWxlLmV4cG9ydHMuY29tbWFuZCA9IGVzY2FwZUNvbW1hbmQ7XG5tb2R1bGUuZXhwb3J0cy5hcmd1bWVudCA9IGVzY2FwZUFyZ3VtZW50O1xuIiwgIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gL14jISguKikvO1xuIiwgIid1c2Ugc3RyaWN0JztcbmNvbnN0IHNoZWJhbmdSZWdleCA9IHJlcXVpcmUoJ3NoZWJhbmctcmVnZXgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoc3RyaW5nID0gJycpID0+IHtcblx0Y29uc3QgbWF0Y2ggPSBzdHJpbmcubWF0Y2goc2hlYmFuZ1JlZ2V4KTtcblxuXHRpZiAoIW1hdGNoKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRjb25zdCBbcGF0aCwgYXJndW1lbnRdID0gbWF0Y2hbMF0ucmVwbGFjZSgvIyEgPy8sICcnKS5zcGxpdCgnICcpO1xuXHRjb25zdCBiaW5hcnkgPSBwYXRoLnNwbGl0KCcvJykucG9wKCk7XG5cblx0aWYgKGJpbmFyeSA9PT0gJ2VudicpIHtcblx0XHRyZXR1cm4gYXJndW1lbnQ7XG5cdH1cblxuXHRyZXR1cm4gYXJndW1lbnQgPyBgJHtiaW5hcnl9ICR7YXJndW1lbnR9YCA6IGJpbmFyeTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBzaGViYW5nQ29tbWFuZCA9IHJlcXVpcmUoJ3NoZWJhbmctY29tbWFuZCcpO1xuXG5mdW5jdGlvbiByZWFkU2hlYmFuZyhjb21tYW5kKSB7XG4gICAgLy8gUmVhZCB0aGUgZmlyc3QgMTUwIGJ5dGVzIGZyb20gdGhlIGZpbGVcbiAgICBjb25zdCBzaXplID0gMTUwO1xuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhzaXplKTtcblxuICAgIGxldCBmZDtcblxuICAgIHRyeSB7XG4gICAgICAgIGZkID0gZnMub3BlblN5bmMoY29tbWFuZCwgJ3InKTtcbiAgICAgICAgZnMucmVhZFN5bmMoZmQsIGJ1ZmZlciwgMCwgc2l6ZSwgMCk7XG4gICAgICAgIGZzLmNsb3NlU3luYyhmZCk7XG4gICAgfSBjYXRjaCAoZSkgeyAvKiBFbXB0eSAqLyB9XG5cbiAgICAvLyBBdHRlbXB0IHRvIGV4dHJhY3Qgc2hlYmFuZyAobnVsbCBpcyByZXR1cm5lZCBpZiBub3QgYSBzaGViYW5nKVxuICAgIHJldHVybiBzaGViYW5nQ29tbWFuZChidWZmZXIudG9TdHJpbmcoKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVhZFNoZWJhbmc7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgcmVzb2x2ZUNvbW1hbmQgPSByZXF1aXJlKCcuL3V0aWwvcmVzb2x2ZUNvbW1hbmQnKTtcbmNvbnN0IGVzY2FwZSA9IHJlcXVpcmUoJy4vdXRpbC9lc2NhcGUnKTtcbmNvbnN0IHJlYWRTaGViYW5nID0gcmVxdWlyZSgnLi91dGlsL3JlYWRTaGViYW5nJyk7XG5cbmNvbnN0IGlzV2luID0gcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJztcbmNvbnN0IGlzRXhlY3V0YWJsZVJlZ0V4cCA9IC9cXC4oPzpjb218ZXhlKSQvaTtcbmNvbnN0IGlzQ21kU2hpbVJlZ0V4cCA9IC9ub2RlX21vZHVsZXNbXFxcXC9dLmJpbltcXFxcL11bXlxcXFwvXStcXC5jbWQkL2k7XG5cbmZ1bmN0aW9uIGRldGVjdFNoZWJhbmcocGFyc2VkKSB7XG4gICAgcGFyc2VkLmZpbGUgPSByZXNvbHZlQ29tbWFuZChwYXJzZWQpO1xuXG4gICAgY29uc3Qgc2hlYmFuZyA9IHBhcnNlZC5maWxlICYmIHJlYWRTaGViYW5nKHBhcnNlZC5maWxlKTtcblxuICAgIGlmIChzaGViYW5nKSB7XG4gICAgICAgIHBhcnNlZC5hcmdzLnVuc2hpZnQocGFyc2VkLmZpbGUpO1xuICAgICAgICBwYXJzZWQuY29tbWFuZCA9IHNoZWJhbmc7XG5cbiAgICAgICAgcmV0dXJuIHJlc29sdmVDb21tYW5kKHBhcnNlZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZC5maWxlO1xufVxuXG5mdW5jdGlvbiBwYXJzZU5vblNoZWxsKHBhcnNlZCkge1xuICAgIGlmICghaXNXaW4pIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG5cbiAgICAvLyBEZXRlY3QgJiBhZGQgc3VwcG9ydCBmb3Igc2hlYmFuZ3NcbiAgICBjb25zdCBjb21tYW5kRmlsZSA9IGRldGVjdFNoZWJhbmcocGFyc2VkKTtcblxuICAgIC8vIFdlIGRvbid0IG5lZWQgYSBzaGVsbCBpZiB0aGUgY29tbWFuZCBmaWxlbmFtZSBpcyBhbiBleGVjdXRhYmxlXG4gICAgY29uc3QgbmVlZHNTaGVsbCA9ICFpc0V4ZWN1dGFibGVSZWdFeHAudGVzdChjb21tYW5kRmlsZSk7XG5cbiAgICAvLyBJZiBhIHNoZWxsIGlzIHJlcXVpcmVkLCB1c2UgY21kLmV4ZSBhbmQgdGFrZSBjYXJlIG9mIGVzY2FwaW5nIGV2ZXJ5dGhpbmcgY29ycmVjdGx5XG4gICAgLy8gTm90ZSB0aGF0IGBmb3JjZVNoZWxsYCBpcyBhbiBoaWRkZW4gb3B0aW9uIHVzZWQgb25seSBpbiB0ZXN0c1xuICAgIGlmIChwYXJzZWQub3B0aW9ucy5mb3JjZVNoZWxsIHx8IG5lZWRzU2hlbGwpIHtcbiAgICAgICAgLy8gTmVlZCB0byBkb3VibGUgZXNjYXBlIG1ldGEgY2hhcnMgaWYgdGhlIGNvbW1hbmQgaXMgYSBjbWQtc2hpbSBsb2NhdGVkIGluIGBub2RlX21vZHVsZXMvLmJpbi9gXG4gICAgICAgIC8vIFRoZSBjbWQtc2hpbSBzaW1wbHkgY2FsbHMgZXhlY3V0ZSB0aGUgcGFja2FnZSBiaW4gZmlsZSB3aXRoIE5vZGVKUywgcHJveHlpbmcgYW55IGFyZ3VtZW50XG4gICAgICAgIC8vIEJlY2F1c2UgdGhlIGVzY2FwZSBvZiBtZXRhY2hhcnMgd2l0aCBeIGdldHMgaW50ZXJwcmV0ZWQgd2hlbiB0aGUgY21kLmV4ZSBpcyBmaXJzdCBjYWxsZWQsXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gZG91YmxlIGVzY2FwZSB0aGVtXG4gICAgICAgIGNvbnN0IG5lZWRzRG91YmxlRXNjYXBlTWV0YUNoYXJzID0gaXNDbWRTaGltUmVnRXhwLnRlc3QoY29tbWFuZEZpbGUpO1xuXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBwb3NpeCBwYXRocyBpbnRvIE9TIGNvbXBhdGlibGUgcGF0aHMgKGUuZy46IGZvby9iYXIgLT4gZm9vXFxiYXIpXG4gICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IG90aGVyd2lzZSBpdCB3aWxsIGFsd2F5cyBmYWlsIHdpdGggRU5PRU5UIGluIHRob3NlIGNhc2VzXG4gICAgICAgIHBhcnNlZC5jb21tYW5kID0gcGF0aC5ub3JtYWxpemUocGFyc2VkLmNvbW1hbmQpO1xuXG4gICAgICAgIC8vIEVzY2FwZSBjb21tYW5kICYgYXJndW1lbnRzXG4gICAgICAgIHBhcnNlZC5jb21tYW5kID0gZXNjYXBlLmNvbW1hbmQocGFyc2VkLmNvbW1hbmQpO1xuICAgICAgICBwYXJzZWQuYXJncyA9IHBhcnNlZC5hcmdzLm1hcCgoYXJnKSA9PiBlc2NhcGUuYXJndW1lbnQoYXJnLCBuZWVkc0RvdWJsZUVzY2FwZU1ldGFDaGFycykpO1xuXG4gICAgICAgIGNvbnN0IHNoZWxsQ29tbWFuZCA9IFtwYXJzZWQuY29tbWFuZF0uY29uY2F0KHBhcnNlZC5hcmdzKS5qb2luKCcgJyk7XG5cbiAgICAgICAgcGFyc2VkLmFyZ3MgPSBbJy9kJywgJy9zJywgJy9jJywgYFwiJHtzaGVsbENvbW1hbmR9XCJgXTtcbiAgICAgICAgcGFyc2VkLmNvbW1hbmQgPSBwcm9jZXNzLmVudi5jb21zcGVjIHx8ICdjbWQuZXhlJztcbiAgICAgICAgcGFyc2VkLm9wdGlvbnMud2luZG93c1ZlcmJhdGltQXJndW1lbnRzID0gdHJ1ZTsgLy8gVGVsbCBub2RlJ3Mgc3Bhd24gdGhhdCB0aGUgYXJndW1lbnRzIGFyZSBhbHJlYWR5IGVzY2FwZWRcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VkO1xufVxuXG5mdW5jdGlvbiBwYXJzZShjb21tYW5kLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgLy8gTm9ybWFsaXplIGFyZ3VtZW50cywgc2ltaWxhciB0byBub2RlanNcbiAgICBpZiAoYXJncyAmJiAhQXJyYXkuaXNBcnJheShhcmdzKSkge1xuICAgICAgICBvcHRpb25zID0gYXJncztcbiAgICAgICAgYXJncyA9IG51bGw7XG4gICAgfVxuXG4gICAgYXJncyA9IGFyZ3MgPyBhcmdzLnNsaWNlKDApIDogW107IC8vIENsb25lIGFycmF5IHRvIGF2b2lkIGNoYW5naW5nIHRoZSBvcmlnaW5hbFxuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTsgLy8gQ2xvbmUgb2JqZWN0IHRvIGF2b2lkIGNoYW5naW5nIHRoZSBvcmlnaW5hbFxuXG4gICAgLy8gQnVpbGQgb3VyIHBhcnNlZCBvYmplY3RcbiAgICBjb25zdCBwYXJzZWQgPSB7XG4gICAgICAgIGNvbW1hbmQsXG4gICAgICAgIGFyZ3MsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGZpbGU6IHVuZGVmaW5lZCxcbiAgICAgICAgb3JpZ2luYWw6IHtcbiAgICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICB9LFxuICAgIH07XG5cbiAgICAvLyBEZWxlZ2F0ZSBmdXJ0aGVyIHBhcnNpbmcgdG8gc2hlbGwgb3Igbm9uLXNoZWxsXG4gICAgcmV0dXJuIG9wdGlvbnMuc2hlbGwgPyBwYXJzZWQgOiBwYXJzZU5vblNoZWxsKHBhcnNlZCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2U7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBpc1dpbiA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMic7XG5cbmZ1bmN0aW9uIG5vdEZvdW5kRXJyb3Iob3JpZ2luYWwsIHN5c2NhbGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoYCR7c3lzY2FsbH0gJHtvcmlnaW5hbC5jb21tYW5kfSBFTk9FTlRgKSwge1xuICAgICAgICBjb2RlOiAnRU5PRU5UJyxcbiAgICAgICAgZXJybm86ICdFTk9FTlQnLFxuICAgICAgICBzeXNjYWxsOiBgJHtzeXNjYWxsfSAke29yaWdpbmFsLmNvbW1hbmR9YCxcbiAgICAgICAgcGF0aDogb3JpZ2luYWwuY29tbWFuZCxcbiAgICAgICAgc3Bhd25hcmdzOiBvcmlnaW5hbC5hcmdzLFxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBob29rQ2hpbGRQcm9jZXNzKGNwLCBwYXJzZWQpIHtcbiAgICBpZiAoIWlzV2luKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5hbEVtaXQgPSBjcC5lbWl0O1xuXG4gICAgY3AuZW1pdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmcxKSB7XG4gICAgICAgIC8vIElmIGVtaXR0aW5nIFwiZXhpdFwiIGV2ZW50IGFuZCBleGl0IGNvZGUgaXMgMSwgd2UgbmVlZCB0byBjaGVjayBpZlxuICAgICAgICAvLyB0aGUgY29tbWFuZCBleGlzdHMgYW5kIGVtaXQgYW4gXCJlcnJvclwiIGluc3RlYWRcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9JbmRpZ29Vbml0ZWQvbm9kZS1jcm9zcy1zcGF3bi9pc3N1ZXMvMTZcbiAgICAgICAgaWYgKG5hbWUgPT09ICdleGl0Jykge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gdmVyaWZ5RU5PRU5UKGFyZzEsIHBhcnNlZCk7XG5cbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxFbWl0LmNhbGwoY3AsICdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3JpZ2luYWxFbWl0LmFwcGx5KGNwLCBhcmd1bWVudHMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUVOT0VOVChzdGF0dXMsIHBhcnNlZCkge1xuICAgIGlmIChpc1dpbiAmJiBzdGF0dXMgPT09IDEgJiYgIXBhcnNlZC5maWxlKSB7XG4gICAgICAgIHJldHVybiBub3RGb3VuZEVycm9yKHBhcnNlZC5vcmlnaW5hbCwgJ3NwYXduJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUVOT0VOVFN5bmMoc3RhdHVzLCBwYXJzZWQpIHtcbiAgICBpZiAoaXNXaW4gJiYgc3RhdHVzID09PSAxICYmICFwYXJzZWQuZmlsZSkge1xuICAgICAgICByZXR1cm4gbm90Rm91bmRFcnJvcihwYXJzZWQub3JpZ2luYWwsICdzcGF3blN5bmMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaG9va0NoaWxkUHJvY2VzcyxcbiAgICB2ZXJpZnlFTk9FTlQsXG4gICAgdmVyaWZ5RU5PRU5UU3luYyxcbiAgICBub3RGb3VuZEVycm9yLFxufTtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGNwID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3QgcGFyc2UgPSByZXF1aXJlKCcuL2xpYi9wYXJzZScpO1xuY29uc3QgZW5vZW50ID0gcmVxdWlyZSgnLi9saWIvZW5vZW50Jyk7XG5cbmZ1bmN0aW9uIHNwYXduKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpIHtcbiAgICAvLyBQYXJzZSB0aGUgYXJndW1lbnRzXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2UoY29tbWFuZCwgYXJncywgb3B0aW9ucyk7XG5cbiAgICAvLyBTcGF3biB0aGUgY2hpbGQgcHJvY2Vzc1xuICAgIGNvbnN0IHNwYXduZWQgPSBjcC5zcGF3bihwYXJzZWQuY29tbWFuZCwgcGFyc2VkLmFyZ3MsIHBhcnNlZC5vcHRpb25zKTtcblxuICAgIC8vIEhvb2sgaW50byBjaGlsZCBwcm9jZXNzIFwiZXhpdFwiIGV2ZW50IHRvIGVtaXQgYW4gZXJyb3IgaWYgdGhlIGNvbW1hbmRcbiAgICAvLyBkb2VzIG5vdCBleGlzdHMsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0luZGlnb1VuaXRlZC9ub2RlLWNyb3NzLXNwYXduL2lzc3Vlcy8xNlxuICAgIGVub2VudC5ob29rQ2hpbGRQcm9jZXNzKHNwYXduZWQsIHBhcnNlZCk7XG5cbiAgICByZXR1cm4gc3Bhd25lZDtcbn1cblxuZnVuY3Rpb24gc3Bhd25TeW5jKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpIHtcbiAgICAvLyBQYXJzZSB0aGUgYXJndW1lbnRzXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2UoY29tbWFuZCwgYXJncywgb3B0aW9ucyk7XG5cbiAgICAvLyBTcGF3biB0aGUgY2hpbGQgcHJvY2Vzc1xuICAgIGNvbnN0IHJlc3VsdCA9IGNwLnNwYXduU3luYyhwYXJzZWQuY29tbWFuZCwgcGFyc2VkLmFyZ3MsIHBhcnNlZC5vcHRpb25zKTtcblxuICAgIC8vIEFuYWx5emUgaWYgdGhlIGNvbW1hbmQgZG9lcyBub3QgZXhpc3QsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0luZGlnb1VuaXRlZC9ub2RlLWNyb3NzLXNwYXduL2lzc3Vlcy8xNlxuICAgIHJlc3VsdC5lcnJvciA9IHJlc3VsdC5lcnJvciB8fCBlbm9lbnQudmVyaWZ5RU5PRU5UU3luYyhyZXN1bHQuc3RhdHVzLCBwYXJzZWQpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzcGF3bjtcbm1vZHVsZS5leHBvcnRzLnNwYXduID0gc3Bhd247XG5tb2R1bGUuZXhwb3J0cy5zeW5jID0gc3Bhd25TeW5jO1xuXG5tb2R1bGUuZXhwb3J0cy5fcGFyc2UgPSBwYXJzZTtcbm1vZHVsZS5leHBvcnRzLl9lbm9lbnQgPSBlbm9lbnQ7XG4iLCAiLy8gVGhpcyBpcyBub3QgdGhlIHNldCBvZiBhbGwgcG9zc2libGUgc2lnbmFscy5cbi8vXG4vLyBJdCBJUywgaG93ZXZlciwgdGhlIHNldCBvZiBhbGwgc2lnbmFscyB0aGF0IHRyaWdnZXJcbi8vIGFuIGV4aXQgb24gZWl0aGVyIExpbnV4IG9yIEJTRCBzeXN0ZW1zLiAgTGludXggaXMgYVxuLy8gc3VwZXJzZXQgb2YgdGhlIHNpZ25hbCBuYW1lcyBzdXBwb3J0ZWQgb24gQlNELCBhbmRcbi8vIHRoZSB1bmtub3duIHNpZ25hbHMganVzdCBmYWlsIHRvIHJlZ2lzdGVyLCBzbyB3ZSBjYW5cbi8vIGNhdGNoIHRoYXQgZWFzaWx5IGVub3VnaC5cbi8vXG4vLyBEb24ndCBib3RoZXIgd2l0aCBTSUdLSUxMLiAgSXQncyB1bmNhdGNoYWJsZSwgd2hpY2hcbi8vIG1lYW5zIHRoYXQgd2UgY2FuJ3QgZmlyZSBhbnkgY2FsbGJhY2tzIGFueXdheS5cbi8vXG4vLyBJZiBhIHVzZXIgZG9lcyBoYXBwZW4gdG8gcmVnaXN0ZXIgYSBoYW5kbGVyIG9uIGEgbm9uLVxuLy8gZmF0YWwgc2lnbmFsIGxpa2UgU0lHV0lOQ0ggb3Igc29tZXRoaW5nLCBhbmQgdGhlblxuLy8gZXhpdCwgaXQnbGwgZW5kIHVwIGZpcmluZyBgcHJvY2Vzcy5lbWl0KCdleGl0JylgLCBzb1xuLy8gdGhlIGhhbmRsZXIgd2lsbCBiZSBmaXJlZCBhbnl3YXkuXG4vL1xuLy8gU0lHQlVTLCBTSUdGUEUsIFNJR1NFR1YgYW5kIFNJR0lMTCwgd2hlbiBub3QgcmFpc2VkXG4vLyBhcnRpZmljaWFsbHksIGluaGVyZW50bHkgbGVhdmUgdGhlIHByb2Nlc3MgaW4gYVxuLy8gc3RhdGUgZnJvbSB3aGljaCBpdCBpcyBub3Qgc2FmZSB0byB0cnkgYW5kIGVudGVyIEpTXG4vLyBsaXN0ZW5lcnMuXG5tb2R1bGUuZXhwb3J0cyA9IFtcbiAgJ1NJR0FCUlQnLFxuICAnU0lHQUxSTScsXG4gICdTSUdIVVAnLFxuICAnU0lHSU5UJyxcbiAgJ1NJR1RFUk0nXG5dXG5cbmlmIChwcm9jZXNzLnBsYXRmb3JtICE9PSAnd2luMzInKSB7XG4gIG1vZHVsZS5leHBvcnRzLnB1c2goXG4gICAgJ1NJR1ZUQUxSTScsXG4gICAgJ1NJR1hDUFUnLFxuICAgICdTSUdYRlNaJyxcbiAgICAnU0lHVVNSMicsXG4gICAgJ1NJR1RSQVAnLFxuICAgICdTSUdTWVMnLFxuICAgICdTSUdRVUlUJyxcbiAgICAnU0lHSU9UJ1xuICAgIC8vIHNob3VsZCBkZXRlY3QgcHJvZmlsZXIgYW5kIGVuYWJsZS9kaXNhYmxlIGFjY29yZGluZ2x5LlxuICAgIC8vIHNlZSAjMjFcbiAgICAvLyAnU0lHUFJPRidcbiAgKVxufVxuXG5pZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2xpbnV4Jykge1xuICBtb2R1bGUuZXhwb3J0cy5wdXNoKFxuICAgICdTSUdJTycsXG4gICAgJ1NJR1BPTEwnLFxuICAgICdTSUdQV1InLFxuICAgICdTSUdTVEtGTFQnLFxuICAgICdTSUdVTlVTRUQnXG4gIClcbn1cbiIsICIvLyBOb3RlOiBzaW5jZSBueWMgdXNlcyB0aGlzIG1vZHVsZSB0byBvdXRwdXQgY292ZXJhZ2UsIGFueSBsaW5lc1xuLy8gdGhhdCBhcmUgaW4gdGhlIGRpcmVjdCBzeW5jIGZsb3cgb2YgbnljJ3Mgb3V0cHV0Q292ZXJhZ2UgYXJlXG4vLyBpZ25vcmVkLCBzaW5jZSB3ZSBjYW4gbmV2ZXIgZ2V0IGNvdmVyYWdlIGZvciB0aGVtLlxuLy8gZ3JhYiBhIHJlZmVyZW5jZSB0byBub2RlJ3MgcmVhbCBwcm9jZXNzIG9iamVjdCByaWdodCBhd2F5XG52YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzXG5cbmNvbnN0IHByb2Nlc3NPayA9IGZ1bmN0aW9uIChwcm9jZXNzKSB7XG4gIHJldHVybiBwcm9jZXNzICYmXG4gICAgdHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmXG4gICAgdHlwZW9mIHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5lbWl0ID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHByb2Nlc3MucmVhbGx5RXhpdCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLmxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLmtpbGwgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5waWQgPT09ICdudW1iZXInICYmXG4gICAgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbidcbn1cblxuLy8gc29tZSBraW5kIG9mIG5vbi1ub2RlIGVudmlyb25tZW50LCBqdXN0IG5vLW9wXG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmICghcHJvY2Vzc09rKHByb2Nlc3MpKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7fVxuICB9XG59IGVsc2Uge1xuICB2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JylcbiAgdmFyIHNpZ25hbHMgPSByZXF1aXJlKCcuL3NpZ25hbHMuanMnKVxuICB2YXIgaXNXaW4gPSAvXndpbi9pLnRlc3QocHJvY2Vzcy5wbGF0Zm9ybSlcblxuICB2YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBFRSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIEVFID0gRUUuRXZlbnRFbWl0dGVyXG4gIH1cblxuICB2YXIgZW1pdHRlclxuICBpZiAocHJvY2Vzcy5fX3NpZ25hbF9leGl0X2VtaXR0ZXJfXykge1xuICAgIGVtaXR0ZXIgPSBwcm9jZXNzLl9fc2lnbmFsX2V4aXRfZW1pdHRlcl9fXG4gIH0gZWxzZSB7XG4gICAgZW1pdHRlciA9IHByb2Nlc3MuX19zaWduYWxfZXhpdF9lbWl0dGVyX18gPSBuZXcgRUUoKVxuICAgIGVtaXR0ZXIuY291bnQgPSAwXG4gICAgZW1pdHRlci5lbWl0dGVkID0ge31cbiAgfVxuXG4gIC8vIEJlY2F1c2UgdGhpcyBlbWl0dGVyIGlzIGEgZ2xvYmFsLCB3ZSBoYXZlIHRvIGNoZWNrIHRvIHNlZSBpZiBhXG4gIC8vIHByZXZpb3VzIHZlcnNpb24gb2YgdGhpcyBsaWJyYXJ5IGZhaWxlZCB0byBlbmFibGUgaW5maW5pdGUgbGlzdGVuZXJzLlxuICAvLyBJIGtub3cgd2hhdCB5b3UncmUgYWJvdXQgdG8gc2F5LiAgQnV0IGxpdGVyYWxseSBldmVyeXRoaW5nIGFib3V0XG4gIC8vIHNpZ25hbC1leGl0IGlzIGEgY29tcHJvbWlzZSB3aXRoIGV2aWwuICBHZXQgdXNlZCB0byBpdC5cbiAgaWYgKCFlbWl0dGVyLmluZmluaXRlKSB7XG4gICAgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoSW5maW5pdHkpXG4gICAgZW1pdHRlci5pbmZpbml0ZSA9IHRydWVcbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNiLCBvcHRzKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcm9jZXNzT2soZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge31cbiAgICB9XG4gICAgYXNzZXJ0LmVxdWFsKHR5cGVvZiBjYiwgJ2Z1bmN0aW9uJywgJ2EgY2FsbGJhY2sgbXVzdCBiZSBwcm92aWRlZCBmb3IgZXhpdCBoYW5kbGVyJylcblxuICAgIGlmIChsb2FkZWQgPT09IGZhbHNlKSB7XG4gICAgICBsb2FkKClcbiAgICB9XG5cbiAgICB2YXIgZXYgPSAnZXhpdCdcbiAgICBpZiAob3B0cyAmJiBvcHRzLmFsd2F5c0xhc3QpIHtcbiAgICAgIGV2ID0gJ2FmdGVyZXhpdCdcbiAgICB9XG5cbiAgICB2YXIgcmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihldiwgY2IpXG4gICAgICBpZiAoZW1pdHRlci5saXN0ZW5lcnMoJ2V4aXQnKS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICBlbWl0dGVyLmxpc3RlbmVycygnYWZ0ZXJleGl0JykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHVubG9hZCgpXG4gICAgICB9XG4gICAgfVxuICAgIGVtaXR0ZXIub24oZXYsIGNiKVxuXG4gICAgcmV0dXJuIHJlbW92ZVxuICB9XG5cbiAgdmFyIHVubG9hZCA9IGZ1bmN0aW9uIHVubG9hZCAoKSB7XG4gICAgaWYgKCFsb2FkZWQgfHwgIXByb2Nlc3NPayhnbG9iYWwucHJvY2VzcykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsb2FkZWQgPSBmYWxzZVxuXG4gICAgc2lnbmFscy5mb3JFYWNoKGZ1bmN0aW9uIChzaWcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIoc2lnLCBzaWdMaXN0ZW5lcnNbc2lnXSlcbiAgICAgIH0gY2F0Y2ggKGVyKSB7fVxuICAgIH0pXG4gICAgcHJvY2Vzcy5lbWl0ID0gb3JpZ2luYWxQcm9jZXNzRW1pdFxuICAgIHByb2Nlc3MucmVhbGx5RXhpdCA9IG9yaWdpbmFsUHJvY2Vzc1JlYWxseUV4aXRcbiAgICBlbWl0dGVyLmNvdW50IC09IDFcbiAgfVxuICBtb2R1bGUuZXhwb3J0cy51bmxvYWQgPSB1bmxvYWRcblxuICB2YXIgZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50LCBjb2RlLCBzaWduYWwpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZW1pdHRlci5lbWl0dGVkW2V2ZW50XSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGVtaXR0ZXIuZW1pdHRlZFtldmVudF0gPSB0cnVlXG4gICAgZW1pdHRlci5lbWl0KGV2ZW50LCBjb2RlLCBzaWduYWwpXG4gIH1cblxuICAvLyB7IDxzaWduYWw+OiA8bGlzdGVuZXIgZm4+LCAuLi4gfVxuICB2YXIgc2lnTGlzdGVuZXJzID0ge31cbiAgc2lnbmFscy5mb3JFYWNoKGZ1bmN0aW9uIChzaWcpIHtcbiAgICBzaWdMaXN0ZW5lcnNbc2lnXSA9IGZ1bmN0aW9uIGxpc3RlbmVyICgpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFwcm9jZXNzT2soZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIG90aGVyIGxpc3RlbmVycywgYW4gZXhpdCBpcyBjb21pbmchXG4gICAgICAvLyBTaW1wbGVzdCB3YXk6IHJlbW92ZSB1cyBhbmQgdGhlbiByZS1zZW5kIHRoZSBzaWduYWwuXG4gICAgICAvLyBXZSBrbm93IHRoYXQgdGhpcyB3aWxsIGtpbGwgdGhlIHByb2Nlc3MsIHNvIHdlIGNhblxuICAgICAgLy8gc2FmZWx5IGVtaXQgbm93LlxuICAgICAgdmFyIGxpc3RlbmVycyA9IHByb2Nlc3MubGlzdGVuZXJzKHNpZylcbiAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSBlbWl0dGVyLmNvdW50KSB7XG4gICAgICAgIHVubG9hZCgpXG4gICAgICAgIGVtaXQoJ2V4aXQnLCBudWxsLCBzaWcpXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGVtaXQoJ2FmdGVyZXhpdCcsIG51bGwsIHNpZylcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgaWYgKGlzV2luICYmIHNpZyA9PT0gJ1NJR0hVUCcpIHtcbiAgICAgICAgICAvLyBcIlNJR0hVUFwiIHRocm93cyBhbiBgRU5PU1lTYCBlcnJvciBvbiBXaW5kb3dzLFxuICAgICAgICAgIC8vIHNvIHVzZSBhIHN1cHBvcnRlZCBzaWduYWwgaW5zdGVhZFxuICAgICAgICAgIHNpZyA9ICdTSUdJTlQnXG4gICAgICAgIH1cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcHJvY2Vzcy5raWxsKHByb2Nlc3MucGlkLCBzaWcpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIG1vZHVsZS5leHBvcnRzLnNpZ25hbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHNpZ25hbHNcbiAgfVxuXG4gIHZhciBsb2FkZWQgPSBmYWxzZVxuXG4gIHZhciBsb2FkID0gZnVuY3Rpb24gbG9hZCAoKSB7XG4gICAgaWYgKGxvYWRlZCB8fCAhcHJvY2Vzc09rKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxvYWRlZCA9IHRydWVcblxuICAgIC8vIFRoaXMgaXMgdGhlIG51bWJlciBvZiBvblNpZ25hbEV4aXQncyB0aGF0IGFyZSBpbiBwbGF5LlxuICAgIC8vIEl0J3MgaW1wb3J0YW50IHNvIHRoYXQgd2UgY2FuIGNvdW50IHRoZSBjb3JyZWN0IG51bWJlciBvZlxuICAgIC8vIGxpc3RlbmVycyBvbiBzaWduYWxzLCBhbmQgZG9uJ3Qgd2FpdCBmb3IgdGhlIG90aGVyIG9uZSB0b1xuICAgIC8vIGhhbmRsZSBpdCBpbnN0ZWFkIG9mIHVzLlxuICAgIGVtaXR0ZXIuY291bnQgKz0gMVxuXG4gICAgc2lnbmFscyA9IHNpZ25hbHMuZmlsdGVyKGZ1bmN0aW9uIChzaWcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHByb2Nlc3Mub24oc2lnLCBzaWdMaXN0ZW5lcnNbc2lnXSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9jZXNzLmVtaXQgPSBwcm9jZXNzRW1pdFxuICAgIHByb2Nlc3MucmVhbGx5RXhpdCA9IHByb2Nlc3NSZWFsbHlFeGl0XG4gIH1cbiAgbW9kdWxlLmV4cG9ydHMubG9hZCA9IGxvYWRcblxuICB2YXIgb3JpZ2luYWxQcm9jZXNzUmVhbGx5RXhpdCA9IHByb2Nlc3MucmVhbGx5RXhpdFxuICB2YXIgcHJvY2Vzc1JlYWxseUV4aXQgPSBmdW5jdGlvbiBwcm9jZXNzUmVhbGx5RXhpdCAoY29kZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghcHJvY2Vzc09rKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHByb2Nlc3MuZXhpdENvZGUgPSBjb2RlIHx8IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIDBcbiAgICBlbWl0KCdleGl0JywgcHJvY2Vzcy5leGl0Q29kZSwgbnVsbClcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGVtaXQoJ2FmdGVyZXhpdCcsIHByb2Nlc3MuZXhpdENvZGUsIG51bGwpXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBvcmlnaW5hbFByb2Nlc3NSZWFsbHlFeGl0LmNhbGwocHJvY2VzcywgcHJvY2Vzcy5leGl0Q29kZSlcbiAgfVxuXG4gIHZhciBvcmlnaW5hbFByb2Nlc3NFbWl0ID0gcHJvY2Vzcy5lbWl0XG4gIHZhciBwcm9jZXNzRW1pdCA9IGZ1bmN0aW9uIHByb2Nlc3NFbWl0IChldiwgYXJnKSB7XG4gICAgaWYgKGV2ID09PSAnZXhpdCcgJiYgcHJvY2Vzc09rKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmIChhcmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9jZXNzLmV4aXRDb2RlID0gYXJnXG4gICAgICB9XG4gICAgICB2YXIgcmV0ID0gb3JpZ2luYWxQcm9jZXNzRW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgZW1pdCgnZXhpdCcsIHByb2Nlc3MuZXhpdENvZGUsIG51bGwpXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgZW1pdCgnYWZ0ZXJleGl0JywgcHJvY2Vzcy5leGl0Q29kZSwgbnVsbClcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICByZXR1cm4gcmV0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbFByb2Nlc3NFbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG4gIH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5jb25zdCB7UGFzc1Rocm91Z2g6IFBhc3NUaHJvdWdoU3RyZWFtfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9wdGlvbnMgPT4ge1xuXHRvcHRpb25zID0gey4uLm9wdGlvbnN9O1xuXG5cdGNvbnN0IHthcnJheX0gPSBvcHRpb25zO1xuXHRsZXQge2VuY29kaW5nfSA9IG9wdGlvbnM7XG5cdGNvbnN0IGlzQnVmZmVyID0gZW5jb2RpbmcgPT09ICdidWZmZXInO1xuXHRsZXQgb2JqZWN0TW9kZSA9IGZhbHNlO1xuXG5cdGlmIChhcnJheSkge1xuXHRcdG9iamVjdE1vZGUgPSAhKGVuY29kaW5nIHx8IGlzQnVmZmVyKTtcblx0fSBlbHNlIHtcblx0XHRlbmNvZGluZyA9IGVuY29kaW5nIHx8ICd1dGY4Jztcblx0fVxuXG5cdGlmIChpc0J1ZmZlcikge1xuXHRcdGVuY29kaW5nID0gbnVsbDtcblx0fVxuXG5cdGNvbnN0IHN0cmVhbSA9IG5ldyBQYXNzVGhyb3VnaFN0cmVhbSh7b2JqZWN0TW9kZX0pO1xuXG5cdGlmIChlbmNvZGluZykge1xuXHRcdHN0cmVhbS5zZXRFbmNvZGluZyhlbmNvZGluZyk7XG5cdH1cblxuXHRsZXQgbGVuZ3RoID0gMDtcblx0Y29uc3QgY2h1bmtzID0gW107XG5cblx0c3RyZWFtLm9uKCdkYXRhJywgY2h1bmsgPT4ge1xuXHRcdGNodW5rcy5wdXNoKGNodW5rKTtcblxuXHRcdGlmIChvYmplY3RNb2RlKSB7XG5cdFx0XHRsZW5ndGggPSBjaHVua3MubGVuZ3RoO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZW5ndGggKz0gY2h1bmsubGVuZ3RoO1xuXHRcdH1cblx0fSk7XG5cblx0c3RyZWFtLmdldEJ1ZmZlcmVkVmFsdWUgPSAoKSA9PiB7XG5cdFx0aWYgKGFycmF5KSB7XG5cdFx0XHRyZXR1cm4gY2h1bmtzO1xuXHRcdH1cblxuXHRcdHJldHVybiBpc0J1ZmZlciA/IEJ1ZmZlci5jb25jYXQoY2h1bmtzLCBsZW5ndGgpIDogY2h1bmtzLmpvaW4oJycpO1xuXHR9O1xuXG5cdHN0cmVhbS5nZXRCdWZmZXJlZExlbmd0aCA9ICgpID0+IGxlbmd0aDtcblxuXHRyZXR1cm4gc3RyZWFtO1xufTtcbiIsICIndXNlIHN0cmljdCc7XG5jb25zdCB7Y29uc3RhbnRzOiBCdWZmZXJDb25zdGFudHN9ID0gcmVxdWlyZSgnYnVmZmVyJyk7XG5jb25zdCBzdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKTtcbmNvbnN0IHtwcm9taXNpZnl9ID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgYnVmZmVyU3RyZWFtID0gcmVxdWlyZSgnLi9idWZmZXItc3RyZWFtJyk7XG5cbmNvbnN0IHN0cmVhbVBpcGVsaW5lUHJvbWlzaWZpZWQgPSBwcm9taXNpZnkoc3RyZWFtLnBpcGVsaW5lKTtcblxuY2xhc3MgTWF4QnVmZmVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKCdtYXhCdWZmZXIgZXhjZWVkZWQnKTtcblx0XHR0aGlzLm5hbWUgPSAnTWF4QnVmZmVyRXJyb3InO1xuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFN0cmVhbShpbnB1dFN0cmVhbSwgb3B0aW9ucykge1xuXHRpZiAoIWlucHV0U3RyZWFtKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBhIHN0cmVhbScpO1xuXHR9XG5cblx0b3B0aW9ucyA9IHtcblx0XHRtYXhCdWZmZXI6IEluZmluaXR5LFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRjb25zdCB7bWF4QnVmZmVyfSA9IG9wdGlvbnM7XG5cdGNvbnN0IHN0cmVhbSA9IGJ1ZmZlclN0cmVhbShvcHRpb25zKTtcblxuXHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3QgcmVqZWN0UHJvbWlzZSA9IGVycm9yID0+IHtcblx0XHRcdC8vIERvbid0IHJldHJpZXZlIGFuIG92ZXJzaXplZCBidWZmZXIuXG5cdFx0XHRpZiAoZXJyb3IgJiYgc3RyZWFtLmdldEJ1ZmZlcmVkTGVuZ3RoKCkgPD0gQnVmZmVyQ29uc3RhbnRzLk1BWF9MRU5HVEgpIHtcblx0XHRcdFx0ZXJyb3IuYnVmZmVyZWREYXRhID0gc3RyZWFtLmdldEJ1ZmZlcmVkVmFsdWUoKTtcblx0XHRcdH1cblxuXHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHR9O1xuXG5cdFx0KGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHN0cmVhbVBpcGVsaW5lUHJvbWlzaWZpZWQoaW5wdXRTdHJlYW0sIHN0cmVhbSk7XG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdFByb21pc2UoZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH0pKCk7XG5cblx0XHRzdHJlYW0ub24oJ2RhdGEnLCAoKSA9PiB7XG5cdFx0XHRpZiAoc3RyZWFtLmdldEJ1ZmZlcmVkTGVuZ3RoKCkgPiBtYXhCdWZmZXIpIHtcblx0XHRcdFx0cmVqZWN0UHJvbWlzZShuZXcgTWF4QnVmZmVyRXJyb3IoKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xuXG5cdHJldHVybiBzdHJlYW0uZ2V0QnVmZmVyZWRWYWx1ZSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFN0cmVhbTtcbm1vZHVsZS5leHBvcnRzLmJ1ZmZlciA9IChzdHJlYW0sIG9wdGlvbnMpID0+IGdldFN0cmVhbShzdHJlYW0sIHsuLi5vcHRpb25zLCBlbmNvZGluZzogJ2J1ZmZlcid9KTtcbm1vZHVsZS5leHBvcnRzLmFycmF5ID0gKHN0cmVhbSwgb3B0aW9ucykgPT4gZ2V0U3RyZWFtKHN0cmVhbSwgey4uLm9wdGlvbnMsIGFycmF5OiB0cnVlfSk7XG5tb2R1bGUuZXhwb3J0cy5NYXhCdWZmZXJFcnJvciA9IE1heEJ1ZmZlckVycm9yO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgeyBQYXNzVGhyb3VnaCB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKC8qc3RyZWFtcy4uLiovKSB7XG4gIHZhciBzb3VyY2VzID0gW11cbiAgdmFyIG91dHB1dCAgPSBuZXcgUGFzc1Rocm91Z2goe29iamVjdE1vZGU6IHRydWV9KVxuXG4gIG91dHB1dC5zZXRNYXhMaXN0ZW5lcnMoMClcblxuICBvdXRwdXQuYWRkID0gYWRkXG4gIG91dHB1dC5pc0VtcHR5ID0gaXNFbXB0eVxuXG4gIG91dHB1dC5vbigndW5waXBlJywgcmVtb3ZlKVxuXG4gIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuZm9yRWFjaChhZGQpXG5cbiAgcmV0dXJuIG91dHB1dFxuXG4gIGZ1bmN0aW9uIGFkZCAoc291cmNlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgc291cmNlLmZvckVhY2goYWRkKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBzb3VyY2VzLnB1c2goc291cmNlKTtcbiAgICBzb3VyY2Uub25jZSgnZW5kJywgcmVtb3ZlLmJpbmQobnVsbCwgc291cmNlKSlcbiAgICBzb3VyY2Uub25jZSgnZXJyb3InLCBvdXRwdXQuZW1pdC5iaW5kKG91dHB1dCwgJ2Vycm9yJykpXG4gICAgc291cmNlLnBpcGUob3V0cHV0LCB7ZW5kOiBmYWxzZX0pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkgKCkge1xuICAgIHJldHVybiBzb3VyY2VzLmxlbmd0aCA9PSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlIChzb3VyY2UpIHtcbiAgICBzb3VyY2VzID0gc291cmNlcy5maWx0ZXIoZnVuY3Rpb24gKGl0KSB7IHJldHVybiBpdCAhPT0gc291cmNlIH0pXG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aCAmJiBvdXRwdXQucmVhZGFibGUpIHsgb3V0cHV0LmVuZCgpIH1cbiAgfVxufVxuIiwgIi8qKlxuICogQGxpY2Vuc2Ugbm9kZS1zdHJlYW0temlwIHwgKGMpIDIwMjAgQW50ZWxsZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9hbnRlbGxlL25vZGUtc3RyZWFtLXppcC9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBQb3J0aW9ucyBjb3B5cmlnaHQgaHR0cHM6Ly9naXRodWIuY29tL2N0aGFja2Vycy9hZG0temlwIHwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2N0aGFja2Vycy9hZG0temlwL21hc3Rlci9MSUNFTlNFXG4gKi9cblxubGV0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5jb25zdCB6bGliID0gcmVxdWlyZSgnemxpYicpO1xuY29uc3Qgc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbmNvbnN0IGNvbnN0cyA9IHtcbiAgICAvKiBUaGUgbG9jYWwgZmlsZSBoZWFkZXIgKi9cbiAgICBMT0NIRFI6IDMwLCAvLyBMT0MgaGVhZGVyIHNpemVcbiAgICBMT0NTSUc6IDB4MDQwMzRiNTAsIC8vIFwiUEtcXDAwM1xcMDA0XCJcbiAgICBMT0NWRVI6IDQsIC8vIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3RcbiAgICBMT0NGTEc6IDYsIC8vIGdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZ1xuICAgIExPQ0hPVzogOCwgLy8gY29tcHJlc3Npb24gbWV0aG9kXG4gICAgTE9DVElNOiAxMCwgLy8gbW9kaWZpY2F0aW9uIHRpbWUgKDIgYnl0ZXMgdGltZSwgMiBieXRlcyBkYXRlKVxuICAgIExPQ0NSQzogMTQsIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1ZVxuICAgIExPQ1NJWjogMTgsIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgIExPQ0xFTjogMjIsIC8vIHVuY29tcHJlc3NlZCBzaXplXG4gICAgTE9DTkFNOiAyNiwgLy8gZmlsZW5hbWUgbGVuZ3RoXG4gICAgTE9DRVhUOiAyOCwgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG5cbiAgICAvKiBUaGUgRGF0YSBkZXNjcmlwdG9yICovXG4gICAgRVhUU0lHOiAweDA4MDc0YjUwLCAvLyBcIlBLXFwwMDdcXDAwOFwiXG4gICAgRVhUSERSOiAxNiwgLy8gRVhUIGhlYWRlciBzaXplXG4gICAgRVhUQ1JDOiA0LCAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICBFWFRTSVo6IDgsIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgIEVYVExFTjogMTIsIC8vIHVuY29tcHJlc3NlZCBzaXplXG5cbiAgICAvKiBUaGUgY2VudHJhbCBkaXJlY3RvcnkgZmlsZSBoZWFkZXIgKi9cbiAgICBDRU5IRFI6IDQ2LCAvLyBDRU4gaGVhZGVyIHNpemVcbiAgICBDRU5TSUc6IDB4MDIwMTRiNTAsIC8vIFwiUEtcXDAwMVxcMDAyXCJcbiAgICBDRU5WRU06IDQsIC8vIHZlcnNpb24gbWFkZSBieVxuICAgIENFTlZFUjogNiwgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgIENFTkZMRzogOCwgLy8gZW5jcnlwdCwgZGVjcnlwdCBmbGFnc1xuICAgIENFTkhPVzogMTAsIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgIENFTlRJTTogMTIsIC8vIG1vZGlmaWNhdGlvbiB0aW1lICgyIGJ5dGVzIHRpbWUsIDIgYnl0ZXMgZGF0ZSlcbiAgICBDRU5DUkM6IDE2LCAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICBDRU5TSVo6IDIwLCAvLyBjb21wcmVzc2VkIHNpemVcbiAgICBDRU5MRU46IDI0LCAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgIENFTk5BTTogMjgsIC8vIGZpbGVuYW1lIGxlbmd0aFxuICAgIENFTkVYVDogMzAsIC8vIGV4dHJhIGZpZWxkIGxlbmd0aFxuICAgIENFTkNPTTogMzIsIC8vIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICBDRU5EU0s6IDM0LCAvLyB2b2x1bWUgbnVtYmVyIHN0YXJ0XG4gICAgQ0VOQVRUOiAzNiwgLy8gaW50ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzXG4gICAgQ0VOQVRYOiAzOCwgLy8gZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzIChob3N0IHN5c3RlbSBkZXBlbmRlbnQpXG4gICAgQ0VOT0ZGOiA0MiwgLy8gTE9DIGhlYWRlciBvZmZzZXRcblxuICAgIC8qIFRoZSBlbnRyaWVzIGluIHRoZSBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgKi9cbiAgICBFTkRIRFI6IDIyLCAvLyBFTkQgaGVhZGVyIHNpemVcbiAgICBFTkRTSUc6IDB4MDYwNTRiNTAsIC8vIFwiUEtcXDAwNVxcMDA2XCJcbiAgICBFTkRTSUdGSVJTVDogMHg1MCxcbiAgICBFTkRTVUI6IDgsIC8vIG51bWJlciBvZiBlbnRyaWVzIG9uIHRoaXMgZGlza1xuICAgIEVORFRPVDogMTAsIC8vIHRvdGFsIG51bWJlciBvZiBlbnRyaWVzXG4gICAgRU5EU0laOiAxMiwgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgIEVORE9GRjogMTYsIC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgRU5EQ09NOiAyMCwgLy8gemlwIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICBNQVhGSUxFQ09NTUVOVDogMHhmZmZmLFxuXG4gICAgLyogVGhlIGVudHJpZXMgaW4gdGhlIGVuZCBvZiBaSVA2NCBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yICovXG4gICAgRU5ETDY0SERSOiAyMCwgLy8gWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3IgaGVhZGVyIHNpemVcbiAgICBFTkRMNjRTSUc6IDB4MDcwNjRiNTAsIC8vIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yIHNpZ25hdHVyZVxuICAgIEVOREw2NFNJR0ZJUlNUOiAweDUwLFxuICAgIEVOREw2NE9GUzogOCwgLy8gWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IG9mZnNldFxuXG4gICAgLyogVGhlIGVudHJpZXMgaW4gdGhlIGVuZCBvZiBaSVA2NCBjZW50cmFsIGRpcmVjdG9yeSAqL1xuICAgIEVORDY0SERSOiA1NiwgLy8gWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGhlYWRlciBzaXplXG4gICAgRU5ENjRTSUc6IDB4MDYwNjRiNTAsIC8vIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBzaWduYXR1cmVcbiAgICBFTkQ2NFNJR0ZJUlNUOiAweDUwLFxuICAgIEVORDY0U1VCOiAyNCwgLy8gbnVtYmVyIG9mIGVudHJpZXMgb24gdGhpcyBkaXNrXG4gICAgRU5ENjRUT1Q6IDMyLCAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllc1xuICAgIEVORDY0U0laOiA0MCxcbiAgICBFTkQ2NE9GRjogNDgsXG5cbiAgICAvKiBDb21wcmVzc2lvbiBtZXRob2RzICovXG4gICAgU1RPUkVEOiAwLCAvLyBubyBjb21wcmVzc2lvblxuICAgIFNIUlVOSzogMSwgLy8gc2hydW5rXG4gICAgUkVEVUNFRDE6IDIsIC8vIHJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgMVxuICAgIFJFRFVDRUQyOiAzLCAvLyByZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDJcbiAgICBSRURVQ0VEMzogNCwgLy8gcmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciAzXG4gICAgUkVEVUNFRDQ6IDUsIC8vIHJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgNFxuICAgIElNUExPREVEOiA2LCAvLyBpbXBsb2RlZFxuICAgIC8vIDcgcmVzZXJ2ZWRcbiAgICBERUZMQVRFRDogOCwgLy8gZGVmbGF0ZWRcbiAgICBFTkhBTkNFRF9ERUZMQVRFRDogOSwgLy8gZGVmbGF0ZTY0XG4gICAgUEtXQVJFOiAxMCwgLy8gUEtXYXJlIERDTCBpbXBsb2RlZFxuICAgIC8vIDExIHJlc2VydmVkXG4gICAgQlpJUDI6IDEyLCAvLyAgY29tcHJlc3NlZCB1c2luZyBCWklQMlxuICAgIC8vIDEzIHJlc2VydmVkXG4gICAgTFpNQTogMTQsIC8vIExaTUFcbiAgICAvLyAxNS0xNyByZXNlcnZlZFxuICAgIElCTV9URVJTRTogMTgsIC8vIGNvbXByZXNzZWQgdXNpbmcgSUJNIFRFUlNFXG4gICAgSUJNX0xaNzc6IDE5LCAvL0lCTSBMWjc3IHpcblxuICAgIC8qIEdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZyAqL1xuICAgIEZMR19FTkM6IDAsIC8vIGVuY3J5cHRlZCBmaWxlXG4gICAgRkxHX0NPTVAxOiAxLCAvLyBjb21wcmVzc2lvbiBvcHRpb25cbiAgICBGTEdfQ09NUDI6IDIsIC8vIGNvbXByZXNzaW9uIG9wdGlvblxuICAgIEZMR19ERVNDOiA0LCAvLyBkYXRhIGRlc2NyaXB0b3JcbiAgICBGTEdfRU5IOiA4LCAvLyBlbmhhbmNlZCBkZWZsYXRpb25cbiAgICBGTEdfU1RSOiAxNiwgLy8gc3Ryb25nIGVuY3J5cHRpb25cbiAgICBGTEdfTE5HOiAxMDI0LCAvLyBsYW5ndWFnZSBlbmNvZGluZ1xuICAgIEZMR19NU0s6IDQwOTYsIC8vIG1hc2sgaGVhZGVyIHZhbHVlc1xuICAgIEZMR19FTlRSWV9FTkM6IDEsXG5cbiAgICAvKiA0LjUgRXh0ZW5zaWJsZSBkYXRhIGZpZWxkcyAqL1xuICAgIEVGX0lEOiAwLFxuICAgIEVGX1NJWkU6IDIsXG5cbiAgICAvKiBIZWFkZXIgSURzICovXG4gICAgSURfWklQNjQ6IDB4MDAwMSxcbiAgICBJRF9BVklORk86IDB4MDAwNyxcbiAgICBJRF9QRlM6IDB4MDAwOCxcbiAgICBJRF9PUzI6IDB4MDAwOSxcbiAgICBJRF9OVEZTOiAweDAwMGEsXG4gICAgSURfT1BFTlZNUzogMHgwMDBjLFxuICAgIElEX1VOSVg6IDB4MDAwZCxcbiAgICBJRF9GT1JLOiAweDAwMGUsXG4gICAgSURfUEFUQ0g6IDB4MDAwZixcbiAgICBJRF9YNTA5X1BLQ1M3OiAweDAwMTQsXG4gICAgSURfWDUwOV9DRVJUSURfRjogMHgwMDE1LFxuICAgIElEX1g1MDlfQ0VSVElEX0M6IDB4MDAxNixcbiAgICBJRF9TVFJPTkdFTkM6IDB4MDAxNyxcbiAgICBJRF9SRUNPUkRfTUdUOiAweDAwMTgsXG4gICAgSURfWDUwOV9QS0NTN19STDogMHgwMDE5LFxuICAgIElEX0lCTTE6IDB4MDA2NSxcbiAgICBJRF9JQk0yOiAweDAwNjYsXG4gICAgSURfUE9TWklQOiAweDQ2OTAsXG5cbiAgICBFRl9aSVA2NF9PUl8zMjogMHhmZmZmZmZmZixcbiAgICBFRl9aSVA2NF9PUl8xNjogMHhmZmZmLFxufTtcblxuY29uc3QgU3RyZWFtWmlwID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIGxldCBmZCwgZmlsZVNpemUsIGNodW5rU2l6ZSwgb3AsIGNlbnRyYWxEaXJlY3RvcnksIGNsb3NlZDtcbiAgICBjb25zdCByZWFkeSA9IGZhbHNlLFxuICAgICAgICB0aGF0ID0gdGhpcyxcbiAgICAgICAgZW50cmllcyA9IGNvbmZpZy5zdG9yZUVudHJpZXMgIT09IGZhbHNlID8ge30gOiBudWxsLFxuICAgICAgICBmaWxlTmFtZSA9IGNvbmZpZy5maWxlLFxuICAgICAgICB0ZXh0RGVjb2RlciA9IGNvbmZpZy5uYW1lRW5jb2RpbmcgPyBuZXcgVGV4dERlY29kZXIoY29uZmlnLm5hbWVFbmNvZGluZykgOiBudWxsO1xuXG4gICAgb3BlbigpO1xuXG4gICAgZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5mZCkge1xuICAgICAgICAgICAgZmQgPSBjb25maWcuZmQ7XG4gICAgICAgICAgICByZWFkRmlsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnMub3BlbihmaWxlTmFtZSwgJ3InLCAoZXJyLCBmKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZkID0gZjtcbiAgICAgICAgICAgICAgICByZWFkRmlsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkRmlsZSgpIHtcbiAgICAgICAgZnMuZnN0YXQoZmQsIChlcnIsIHN0YXQpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWxlU2l6ZSA9IHN0YXQuc2l6ZTtcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IGNvbmZpZy5jaHVua1NpemUgfHwgTWF0aC5yb3VuZChmaWxlU2l6ZSAvIDEwMDApO1xuICAgICAgICAgICAgY2h1bmtTaXplID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oY2h1bmtTaXplLCBNYXRoLm1pbigxMjggKiAxMDI0LCBmaWxlU2l6ZSkpLFxuICAgICAgICAgICAgICAgIE1hdGgubWluKDEwMjQsIGZpbGVTaXplKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlYWRDZW50cmFsRGlyZWN0b3J5KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRVbnRpbEZvdW5kQ2FsbGJhY2soZXJyLCBieXRlc1JlYWQpIHtcbiAgICAgICAgaWYgKGVyciB8fCAhYnl0ZXNSZWFkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIGVyciB8fCBuZXcgRXJyb3IoJ0FyY2hpdmUgcmVhZCBlcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcG9zID0gb3AubGFzdFBvcztcbiAgICAgICAgbGV0IGJ1ZmZlclBvc2l0aW9uID0gcG9zIC0gb3Aud2luLnBvc2l0aW9uO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBvcC53aW4uYnVmZmVyO1xuICAgICAgICBjb25zdCBtaW5Qb3MgPSBvcC5taW5Qb3M7XG4gICAgICAgIHdoaWxlICgtLXBvcyA+PSBtaW5Qb3MgJiYgLS1idWZmZXJQb3NpdGlvbiA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlclBvc2l0aW9uID49IDQgJiYgYnVmZmVyW2J1ZmZlclBvc2l0aW9uXSA9PT0gb3AuZmlyc3RCeXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gcXVpY2sgY2hlY2sgZmlyc3Qgc2lnbmF0dXJlIGJ5dGVcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLnJlYWRVSW50MzJMRShidWZmZXJQb3NpdGlvbikgPT09IG9wLnNpZykge1xuICAgICAgICAgICAgICAgICAgICBvcC5sYXN0QnVmZmVyUG9zaXRpb24gPSBidWZmZXJQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgb3AubGFzdEJ5dGVzUmVhZCA9IGJ5dGVzUmVhZDtcbiAgICAgICAgICAgICAgICAgICAgb3AuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zID09PSBtaW5Qb3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdCYWQgYXJjaGl2ZScpKTtcbiAgICAgICAgfVxuICAgICAgICBvcC5sYXN0UG9zID0gcG9zICsgMTtcbiAgICAgICAgb3AuY2h1bmtTaXplICo9IDI7XG4gICAgICAgIGlmIChwb3MgPD0gbWluUG9zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignQmFkIGFyY2hpdmUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhwYW5kTGVuZ3RoID0gTWF0aC5taW4ob3AuY2h1bmtTaXplLCBwb3MgLSBtaW5Qb3MpO1xuICAgICAgICBvcC53aW4uZXhwYW5kTGVmdChleHBhbmRMZW5ndGgsIHJlYWRVbnRpbEZvdW5kQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRDZW50cmFsRGlyZWN0b3J5KCkge1xuICAgICAgICBjb25zdCB0b3RhbFJlYWRMZW5ndGggPSBNYXRoLm1pbihjb25zdHMuRU5ESERSICsgY29uc3RzLk1BWEZJTEVDT01NRU5ULCBmaWxlU2l6ZSk7XG4gICAgICAgIG9wID0ge1xuICAgICAgICAgICAgd2luOiBuZXcgRmlsZVdpbmRvd0J1ZmZlcihmZCksXG4gICAgICAgICAgICB0b3RhbFJlYWRMZW5ndGgsXG4gICAgICAgICAgICBtaW5Qb3M6IGZpbGVTaXplIC0gdG90YWxSZWFkTGVuZ3RoLFxuICAgICAgICAgICAgbGFzdFBvczogZmlsZVNpemUsXG4gICAgICAgICAgICBjaHVua1NpemU6IE1hdGgubWluKDEwMjQsIGNodW5rU2l6ZSksXG4gICAgICAgICAgICBmaXJzdEJ5dGU6IGNvbnN0cy5FTkRTSUdGSVJTVCxcbiAgICAgICAgICAgIHNpZzogY29uc3RzLkVORFNJRyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiByZWFkQ2VudHJhbERpcmVjdG9yeUNvbXBsZXRlLFxuICAgICAgICB9O1xuICAgICAgICBvcC53aW4ucmVhZChmaWxlU2l6ZSAtIG9wLmNodW5rU2l6ZSwgb3AuY2h1bmtTaXplLCByZWFkVW50aWxGb3VuZENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkQ2VudHJhbERpcmVjdG9yeUNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBidWZmZXIgPSBvcC53aW4uYnVmZmVyO1xuICAgICAgICBjb25zdCBwb3MgPSBvcC5sYXN0QnVmZmVyUG9zaXRpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjZW50cmFsRGlyZWN0b3J5ID0gbmV3IENlbnRyYWxEaXJlY3RvcnlIZWFkZXIoKTtcbiAgICAgICAgICAgIGNlbnRyYWxEaXJlY3RvcnkucmVhZChidWZmZXIuc2xpY2UocG9zLCBwb3MgKyBjb25zdHMuRU5ESERSKSk7XG4gICAgICAgICAgICBjZW50cmFsRGlyZWN0b3J5LmhlYWRlck9mZnNldCA9IG9wLndpbi5wb3NpdGlvbiArIHBvcztcbiAgICAgICAgICAgIGlmIChjZW50cmFsRGlyZWN0b3J5LmNvbW1lbnRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmNvbW1lbnQgPSBidWZmZXJcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zICsgY29uc3RzLkVOREhEUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArIGNvbnN0cy5FTkRIRFIgKyBjZW50cmFsRGlyZWN0b3J5LmNvbW1lbnRMZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhhdC5jb21tZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQuZW50cmllc0NvdW50ID0gY2VudHJhbERpcmVjdG9yeS52b2x1bWVFbnRyaWVzO1xuICAgICAgICAgICAgdGhhdC5jZW50cmFsRGlyZWN0b3J5ID0gY2VudHJhbERpcmVjdG9yeTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAoY2VudHJhbERpcmVjdG9yeS52b2x1bWVFbnRyaWVzID09PSBjb25zdHMuRUZfWklQNjRfT1JfMTYgJiZcbiAgICAgICAgICAgICAgICAgICAgY2VudHJhbERpcmVjdG9yeS50b3RhbEVudHJpZXMgPT09IGNvbnN0cy5FRl9aSVA2NF9PUl8xNikgfHxcbiAgICAgICAgICAgICAgICBjZW50cmFsRGlyZWN0b3J5LnNpemUgPT09IGNvbnN0cy5FRl9aSVA2NF9PUl8zMiB8fFxuICAgICAgICAgICAgICAgIGNlbnRyYWxEaXJlY3Rvcnkub2Zmc2V0ID09PSBjb25zdHMuRUZfWklQNjRfT1JfMzJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlMb2NhdG9yKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wID0ge307XG4gICAgICAgICAgICAgICAgcmVhZEVudHJpZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGF0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlMb2NhdG9yKCkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBjb25zdHMuRU5ETDY0SERSO1xuICAgICAgICBpZiAob3AubGFzdEJ1ZmZlclBvc2l0aW9uID4gbGVuZ3RoKSB7XG4gICAgICAgICAgICBvcC5sYXN0QnVmZmVyUG9zaXRpb24gLT0gbGVuZ3RoO1xuICAgICAgICAgICAgcmVhZFppcDY0Q2VudHJhbERpcmVjdG9yeUxvY2F0b3JDb21wbGV0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3AgPSB7XG4gICAgICAgICAgICAgICAgd2luOiBvcC53aW4sXG4gICAgICAgICAgICAgICAgdG90YWxSZWFkTGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgbWluUG9zOiBvcC53aW4ucG9zaXRpb24gLSBsZW5ndGgsXG4gICAgICAgICAgICAgICAgbGFzdFBvczogb3Aud2luLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNodW5rU2l6ZTogb3AuY2h1bmtTaXplLFxuICAgICAgICAgICAgICAgIGZpcnN0Qnl0ZTogY29uc3RzLkVOREw2NFNJR0ZJUlNULFxuICAgICAgICAgICAgICAgIHNpZzogY29uc3RzLkVOREw2NFNJRyxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogcmVhZFppcDY0Q2VudHJhbERpcmVjdG9yeUxvY2F0b3JDb21wbGV0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvcC53aW4ucmVhZChvcC5sYXN0UG9zIC0gb3AuY2h1bmtTaXplLCBvcC5jaHVua1NpemUsIHJlYWRVbnRpbEZvdW5kQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZFppcDY0Q2VudHJhbERpcmVjdG9yeUxvY2F0b3JDb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gb3Aud2luLmJ1ZmZlcjtcbiAgICAgICAgY29uc3QgbG9jSGVhZGVyID0gbmV3IENlbnRyYWxEaXJlY3RvcnlMb2M2NEhlYWRlcigpO1xuICAgICAgICBsb2NIZWFkZXIucmVhZChcbiAgICAgICAgICAgIGJ1ZmZlci5zbGljZShvcC5sYXN0QnVmZmVyUG9zaXRpb24sIG9wLmxhc3RCdWZmZXJQb3NpdGlvbiArIGNvbnN0cy5FTkRMNjRIRFIpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlYWRMZW5ndGggPSBmaWxlU2l6ZSAtIGxvY0hlYWRlci5oZWFkZXJPZmZzZXQ7XG4gICAgICAgIG9wID0ge1xuICAgICAgICAgICAgd2luOiBvcC53aW4sXG4gICAgICAgICAgICB0b3RhbFJlYWRMZW5ndGg6IHJlYWRMZW5ndGgsXG4gICAgICAgICAgICBtaW5Qb3M6IGxvY0hlYWRlci5oZWFkZXJPZmZzZXQsXG4gICAgICAgICAgICBsYXN0UG9zOiBvcC5sYXN0UG9zLFxuICAgICAgICAgICAgY2h1bmtTaXplOiBvcC5jaHVua1NpemUsXG4gICAgICAgICAgICBmaXJzdEJ5dGU6IGNvbnN0cy5FTkQ2NFNJR0ZJUlNULFxuICAgICAgICAgICAgc2lnOiBjb25zdHMuRU5ENjRTSUcsXG4gICAgICAgICAgICBjb21wbGV0ZTogcmVhZFppcDY0Q2VudHJhbERpcmVjdG9yeUNvbXBsZXRlLFxuICAgICAgICB9O1xuICAgICAgICBvcC53aW4ucmVhZChmaWxlU2l6ZSAtIG9wLmNodW5rU2l6ZSwgb3AuY2h1bmtTaXplLCByZWFkVW50aWxGb3VuZENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkWmlwNjRDZW50cmFsRGlyZWN0b3J5Q29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG9wLndpbi5idWZmZXI7XG4gICAgICAgIGNvbnN0IHppcDY0Y2QgPSBuZXcgQ2VudHJhbERpcmVjdG9yeVppcDY0SGVhZGVyKCk7XG4gICAgICAgIHppcDY0Y2QucmVhZChidWZmZXIuc2xpY2Uob3AubGFzdEJ1ZmZlclBvc2l0aW9uLCBvcC5sYXN0QnVmZmVyUG9zaXRpb24gKyBjb25zdHMuRU5ENjRIRFIpKTtcbiAgICAgICAgdGhhdC5jZW50cmFsRGlyZWN0b3J5LnZvbHVtZUVudHJpZXMgPSB6aXA2NGNkLnZvbHVtZUVudHJpZXM7XG4gICAgICAgIHRoYXQuY2VudHJhbERpcmVjdG9yeS50b3RhbEVudHJpZXMgPSB6aXA2NGNkLnRvdGFsRW50cmllcztcbiAgICAgICAgdGhhdC5jZW50cmFsRGlyZWN0b3J5LnNpemUgPSB6aXA2NGNkLnNpemU7XG4gICAgICAgIHRoYXQuY2VudHJhbERpcmVjdG9yeS5vZmZzZXQgPSB6aXA2NGNkLm9mZnNldDtcbiAgICAgICAgdGhhdC5lbnRyaWVzQ291bnQgPSB6aXA2NGNkLnZvbHVtZUVudHJpZXM7XG4gICAgICAgIG9wID0ge307XG4gICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEVudHJpZXMoKSB7XG4gICAgICAgIG9wID0ge1xuICAgICAgICAgICAgd2luOiBuZXcgRmlsZVdpbmRvd0J1ZmZlcihmZCksXG4gICAgICAgICAgICBwb3M6IGNlbnRyYWxEaXJlY3Rvcnkub2Zmc2V0LFxuICAgICAgICAgICAgY2h1bmtTaXplLFxuICAgICAgICAgICAgZW50cmllc0xlZnQ6IGNlbnRyYWxEaXJlY3Rvcnkudm9sdW1lRW50cmllcyxcbiAgICAgICAgfTtcbiAgICAgICAgb3Aud2luLnJlYWQob3AucG9zLCBNYXRoLm1pbihjaHVua1NpemUsIGZpbGVTaXplIC0gb3AucG9zKSwgcmVhZEVudHJpZXNDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEVudHJpZXNDYWxsYmFjayhlcnIsIGJ5dGVzUmVhZCkge1xuICAgICAgICBpZiAoZXJyIHx8ICFieXRlc1JlYWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGF0LmVtaXQoJ2Vycm9yJywgZXJyIHx8IG5ldyBFcnJvcignRW50cmllcyByZWFkIGVycm9yJykpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBidWZmZXJQb3MgPSBvcC5wb3MgLSBvcC53aW4ucG9zaXRpb247XG4gICAgICAgIGxldCBlbnRyeSA9IG9wLmVudHJ5O1xuICAgICAgICBjb25zdCBidWZmZXIgPSBvcC53aW4uYnVmZmVyO1xuICAgICAgICBjb25zdCBidWZmZXJMZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKG9wLmVudHJpZXNMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBuZXcgWmlwRW50cnkoKTtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkucmVhZEhlYWRlcihidWZmZXIsIGJ1ZmZlclBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LmhlYWRlck9mZnNldCA9IG9wLndpbi5wb3NpdGlvbiArIGJ1ZmZlclBvcztcbiAgICAgICAgICAgICAgICAgICAgb3AuZW50cnkgPSBlbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgb3AucG9zICs9IGNvbnN0cy5DRU5IRFI7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlclBvcyArPSBjb25zdHMuQ0VOSERSO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBlbnRyeUhlYWRlclNpemUgPSBlbnRyeS5mbmFtZUxlbiArIGVudHJ5LmV4dHJhTGVuICsgZW50cnkuY29tTGVuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkdmFuY2VCeXRlcyA9IGVudHJ5SGVhZGVyU2l6ZSArIChvcC5lbnRyaWVzTGVmdCA+IDEgPyBjb25zdHMuQ0VOSERSIDogMCk7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckxlbmd0aCAtIGJ1ZmZlclBvcyA8IGFkdmFuY2VCeXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvcC53aW4ubW92ZVJpZ2h0KGNodW5rU2l6ZSwgcmVhZEVudHJpZXNDYWxsYmFjaywgYnVmZmVyUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgb3AubW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW50cnkucmVhZChidWZmZXIsIGJ1ZmZlclBvcywgdGV4dERlY29kZXIpO1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnLnNraXBFbnRyeU5hbWVWYWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnZhbGlkYXRlTmFtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzW2VudHJ5Lm5hbWVdID0gZW50cnk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoYXQuZW1pdCgnZW50cnknLCBlbnRyeSk7XG4gICAgICAgICAgICAgICAgb3AuZW50cnkgPSBlbnRyeSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb3AuZW50cmllc0xlZnQtLTtcbiAgICAgICAgICAgICAgICBvcC5wb3MgKz0gZW50cnlIZWFkZXJTaXplO1xuICAgICAgICAgICAgICAgIGJ1ZmZlclBvcyArPSBlbnRyeUhlYWRlclNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LmVtaXQoJ3JlYWR5Jyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhhdC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0VudHJpZXNFeGlzdCgpIHtcbiAgICAgICAgaWYgKCFlbnRyaWVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0b3JlRW50cmllcyBkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZWFkeScsIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWR5O1xuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5lbnRyeSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGNoZWNrRW50cmllc0V4aXN0KCk7XG4gICAgICAgIHJldHVybiBlbnRyaWVzW25hbWVdO1xuICAgIH07XG5cbiAgICB0aGlzLmVudHJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRW50cmllc0V4aXN0KCk7XG4gICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgIH07XG5cbiAgICB0aGlzLnN0cmVhbSA9IGZ1bmN0aW9uIChlbnRyeSwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlbkVudHJ5KFxuICAgICAgICAgICAgZW50cnksXG4gICAgICAgICAgICAoZXJyLCBlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGRhdGFPZmZzZXQoZW50cnkpO1xuICAgICAgICAgICAgICAgIGxldCBlbnRyeVN0cmVhbSA9IG5ldyBFbnRyeURhdGFSZWFkZXJTdHJlYW0oZmQsIG9mZnNldCwgZW50cnkuY29tcHJlc3NlZFNpemUpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5tZXRob2QgPT09IGNvbnN0cy5TVE9SRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZyB0byBkb1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50cnkubWV0aG9kID09PSBjb25zdHMuREVGTEFURUQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnlTdHJlYW0gPSBlbnRyeVN0cmVhbS5waXBlKHpsaWIuY3JlYXRlSW5mbGF0ZVJhdygpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVbmtub3duIGNvbXByZXNzaW9uIG1ldGhvZDogJyArIGVudHJ5Lm1ldGhvZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2FuVmVyaWZ5Q3JjKGVudHJ5KSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeVN0cmVhbSA9IGVudHJ5U3RyZWFtLnBpcGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRW50cnlWZXJpZnlTdHJlYW0oZW50cnlTdHJlYW0sIGVudHJ5LmNyYywgZW50cnkuc2l6ZSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZW50cnlTdHJlYW0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHRoaXMuZW50cnlEYXRhU3luYyA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICBsZXQgZXJyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcGVuRW50cnkoXG4gICAgICAgICAgICBlbnRyeSxcbiAgICAgICAgICAgIChlLCBlbikgPT4ge1xuICAgICAgICAgICAgICAgIGVyciA9IGU7XG4gICAgICAgICAgICAgICAgZW50cnkgPSBlbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0YSA9IEJ1ZmZlci5hbGxvYyhlbnRyeS5jb21wcmVzc2VkU2l6ZSk7XG4gICAgICAgIG5ldyBGc1JlYWQoZmQsIGRhdGEsIDAsIGVudHJ5LmNvbXByZXNzZWRTaXplLCBkYXRhT2Zmc2V0KGVudHJ5KSwgKGUpID0+IHtcbiAgICAgICAgICAgIGVyciA9IGU7XG4gICAgICAgIH0pLnJlYWQodHJ1ZSk7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW50cnkubWV0aG9kID09PSBjb25zdHMuU1RPUkVEKSB7XG4gICAgICAgICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkubWV0aG9kID09PSBjb25zdHMuREVGTEFURUQgfHwgZW50cnkubWV0aG9kID09PSBjb25zdHMuRU5IQU5DRURfREVGTEFURUQpIHtcbiAgICAgICAgICAgIGRhdGEgPSB6bGliLmluZmxhdGVSYXdTeW5jKGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbXByZXNzaW9uIG1ldGhvZDogJyArIGVudHJ5Lm1ldGhvZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoICE9PSBlbnRyeS5zaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYW5WZXJpZnlDcmMoZW50cnkpKSB7XG4gICAgICAgICAgICBjb25zdCB2ZXJpZnkgPSBuZXcgQ3JjVmVyaWZ5KGVudHJ5LmNyYywgZW50cnkuc2l6ZSk7XG4gICAgICAgICAgICB2ZXJpZnkuZGF0YShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuXG4gICAgdGhpcy5vcGVuRW50cnkgPSBmdW5jdGlvbiAoZW50cnksIGNhbGxiYWNrLCBzeW5jKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjaGVja0VudHJpZXNFeGlzdCgpO1xuICAgICAgICAgICAgZW50cnkgPSBlbnRyaWVzW2VudHJ5XTtcbiAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdFbnRyeSBub3QgZm91bmQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbnRyeS5pc0ZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0VudHJ5IGlzIG5vdCBmaWxlJykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0FyY2hpdmUgY2xvc2VkJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhjb25zdHMuTE9DSERSKTtcbiAgICAgICAgbmV3IEZzUmVhZChmZCwgYnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoLCBlbnRyeS5vZmZzZXQsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZWFkRXg7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVudHJ5LnJlYWREYXRhSGVhZGVyKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmVuY3J5cHRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZWFkRXggPSBuZXcgRXJyb3IoJ0VudHJ5IGVuY3J5cHRlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmVhZEV4ID0gZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhyZWFkRXgsIGVudHJ5KTtcbiAgICAgICAgfSkucmVhZChzeW5jKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZGF0YU9mZnNldChlbnRyeSkge1xuICAgICAgICByZXR1cm4gZW50cnkub2Zmc2V0ICsgY29uc3RzLkxPQ0hEUiArIGVudHJ5LmZuYW1lTGVuICsgZW50cnkuZXh0cmFMZW47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVmVyaWZ5Q3JjKGVudHJ5KSB7XG4gICAgICAgIC8vIGlmIGJpdCAzICgweDA4KSBvZiB0aGUgZ2VuZXJhbC1wdXJwb3NlIGZsYWdzIGZpZWxkIGlzIHNldCwgdGhlbiB0aGUgQ1JDLTMyIGFuZCBmaWxlIHNpemVzIGFyZSBub3Qga25vd24gd2hlbiB0aGUgaGVhZGVyIGlzIHdyaXR0ZW5cbiAgICAgICAgcmV0dXJuIChlbnRyeS5mbGFncyAmIDB4OCkgIT09IDB4ODtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHRyYWN0KGVudHJ5LCBvdXRQYXRoLCBjYWxsYmFjaykge1xuICAgICAgICB0aGF0LnN0cmVhbShlbnRyeSwgKGVyciwgc3RtKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZzU3RtLCBlcnJUaHJvd247XG4gICAgICAgICAgICAgICAgc3RtLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyVGhyb3duID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnNTdG0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0bS51bnBpcGUoZnNTdG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnNTdG0uY2xvc2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZzLm9wZW4ob3V0UGF0aCwgJ3cnLCAoZXJyLCBmZEZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuY2xvc2UoZmQsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJUaHJvd24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnNTdG0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShvdXRQYXRoLCB7IGZkOiBmZEZpbGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZzU3RtLm9uKCdmaW5pc2gnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoJ2V4dHJhY3QnLCBlbnRyeSwgb3V0UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVyclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdG0ucGlwZShmc1N0bSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURpcmVjdG9yaWVzKGJhc2VEaXIsIGRpcnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghZGlycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkaXIgPSBkaXJzLnNoaWZ0KCk7XG4gICAgICAgIGRpciA9IHBhdGguam9pbihiYXNlRGlyLCBwYXRoLmpvaW4oLi4uZGlyKSk7XG4gICAgICAgIGZzLm1rZGlyKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VFWElTVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNyZWF0ZURpcmVjdG9yaWVzKGJhc2VEaXIsIGRpcnMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0cmFjdEZpbGVzKGJhc2VEaXIsIGJhc2VSZWxQYXRoLCBmaWxlcywgY2FsbGJhY2ssIGV4dHJhY3RlZENvdW50KSB7XG4gICAgICAgIGlmICghZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXh0cmFjdGVkQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5zaGlmdCgpO1xuICAgICAgICBjb25zdCB0YXJnZXRQYXRoID0gcGF0aC5qb2luKGJhc2VEaXIsIGZpbGUubmFtZS5yZXBsYWNlKGJhc2VSZWxQYXRoLCAnJykpO1xuICAgICAgICBleHRyYWN0KGZpbGUsIHRhcmdldFBhdGgsIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBleHRyYWN0ZWRDb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHRyYWN0RmlsZXMoYmFzZURpciwgYmFzZVJlbFBhdGgsIGZpbGVzLCBjYWxsYmFjaywgZXh0cmFjdGVkQ291bnQgKyAxKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5leHRyYWN0ID0gZnVuY3Rpb24gKGVudHJ5LCBvdXRQYXRoLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgZW50cnlOYW1lID0gZW50cnkgfHwgJyc7XG4gICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlbnRyeSA9IHRoaXMuZW50cnkoZW50cnkpO1xuICAgICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgZW50cnlOYW1lID0gZW50cnkubmFtZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5TmFtZS5sZW5ndGggJiYgZW50cnlOYW1lW2VudHJ5TmFtZS5sZW5ndGggLSAxXSAhPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5TmFtZSArPSAnLyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZW50cnkgfHwgZW50cnkuaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gW10sXG4gICAgICAgICAgICAgICAgZGlycyA9IFtdLFxuICAgICAgICAgICAgICAgIGFsbERpcnMgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBpbiBlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZW50cmllcywgZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgZS5sYXN0SW5kZXhPZihlbnRyeU5hbWUsIDApID09PSAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZWxQYXRoID0gZS5yZXBsYWNlKGVudHJ5TmFtZSwgJycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEVudHJ5ID0gZW50cmllc1tlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkRW50cnkuaXNGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5wdXNoKGNoaWxkRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsUGF0aCA9IHBhdGguZGlybmFtZShyZWxQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVsUGF0aCAmJiAhYWxsRGlyc1tyZWxQYXRoXSAmJiByZWxQYXRoICE9PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERpcnNbcmVsUGF0aF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gcmVsUGF0aC5zcGxpdCgnLycpLmZpbHRlcigoZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlycy5wdXNoKHBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgwLCBwYXJ0cy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0c1BhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbERpcnNbcGFydHNQYXRoXSB8fCBwYXJ0c1BhdGggPT09ICcuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGlyc1twYXJ0c1BhdGhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJzLnB1c2gocGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlycy5zb3J0KCh4LCB5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHgubGVuZ3RoIC0geS5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkaXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZURpcmVjdG9yaWVzKG91dFBhdGgsIGRpcnMsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RGaWxlcyhvdXRQYXRoLCBlbnRyeU5hbWUsIGZpbGVzLCBjYWxsYmFjaywgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdEZpbGVzKG91dFBhdGgsIGVudHJ5TmFtZSwgZmlsZXMsIGNhbGxiYWNrLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzLnN0YXQob3V0UGF0aCwgKGVyciwgc3RhdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ICYmIHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0KGVudHJ5LCBwYXRoLmpvaW4ob3V0UGF0aCwgcGF0aC5iYXNlbmFtZShlbnRyeS5uYW1lKSksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0KGVudHJ5LCBvdXRQYXRoLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAoY2xvc2VkIHx8ICFmZCkge1xuICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgZnMuY2xvc2UoZmQsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBmZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZ2luYWxFbWl0ID0gZXZlbnRzLkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdDtcbiAgICB0aGlzLmVtaXQgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRW1pdC5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cblN0cmVhbVppcC5zZXRGcyA9IGZ1bmN0aW9uIChjdXN0b21Gcykge1xuICAgIGZzID0gY3VzdG9tRnM7XG59O1xuXG5TdHJlYW1aaXAuZGVidWdMb2cgPSAoLi4uYXJncykgPT4ge1xuICAgIGlmIChTdHJlYW1aaXAuZGVidWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coLi4uYXJncyk7XG4gICAgfVxufTtcblxudXRpbC5pbmhlcml0cyhTdHJlYW1aaXAsIGV2ZW50cy5FdmVudEVtaXR0ZXIpO1xuXG5jb25zdCBwcm9wWmlwID0gU3ltYm9sKCd6aXAnKTtcblxuU3RyZWFtWmlwLmFzeW5jID0gY2xhc3MgU3RyZWFtWmlwQXN5bmMgZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICBjb25zdCB6aXAgPSBuZXcgU3RyZWFtWmlwKGNvbmZpZyk7XG5cbiAgICAgICAgemlwLm9uKCdlbnRyeScsIChlbnRyeSkgPT4gdGhpcy5lbWl0KCdlbnRyeScsIGVudHJ5KSk7XG4gICAgICAgIHppcC5vbignZXh0cmFjdCcsIChlbnRyeSwgb3V0UGF0aCkgPT4gdGhpcy5lbWl0KCdleHRyYWN0JywgZW50cnksIG91dFBhdGgpKTtcblxuICAgICAgICB0aGlzW3Byb3BaaXBdID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgemlwLm9uKCdyZWFkeScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB6aXAucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHppcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHppcC5vbignZXJyb3InLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgZW50cmllc0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1twcm9wWmlwXS50aGVuKCh6aXApID0+IHppcC5lbnRyaWVzQ291bnQpO1xuICAgIH1cblxuICAgIGdldCBjb21tZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1twcm9wWmlwXS50aGVuKCh6aXApID0+IHppcC5jb21tZW50KTtcbiAgICB9XG5cbiAgICBhc3luYyBlbnRyeShuYW1lKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXNbcHJvcFppcF07XG4gICAgICAgIHJldHVybiB6aXAuZW50cnkobmFtZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZW50cmllcygpIHtcbiAgICAgICAgY29uc3QgemlwID0gYXdhaXQgdGhpc1twcm9wWmlwXTtcbiAgICAgICAgcmV0dXJuIHppcC5lbnRyaWVzKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3RyZWFtKGVudHJ5KSB7XG4gICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXNbcHJvcFppcF07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB6aXAuc3RyZWFtKGVudHJ5LCAoZXJyLCBzdG0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoc3RtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZW50cnlEYXRhKGVudHJ5KSB7XG4gICAgICAgIGNvbnN0IHN0bSA9IGF3YWl0IHRoaXMuc3RyZWFtKGVudHJ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBbXTtcbiAgICAgICAgICAgIHN0bS5vbignZGF0YScsIChjaHVuaykgPT4gZGF0YS5wdXNoKGNodW5rKSk7XG4gICAgICAgICAgICBzdG0ub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKEJ1ZmZlci5jb25jYXQoZGF0YSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdG0ub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHN0bS5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2VuZCcpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGV4dHJhY3QoZW50cnksIG91dFBhdGgpIHtcbiAgICAgICAgY29uc3QgemlwID0gYXdhaXQgdGhpc1twcm9wWmlwXTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHppcC5leHRyYWN0KGVudHJ5LCBvdXRQYXRoLCAoZXJyLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXNbcHJvcFppcF07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB6aXAuY2xvc2UoKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jbGFzcyBDZW50cmFsRGlyZWN0b3J5SGVhZGVyIHtcbiAgICByZWFkKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoICE9PSBjb25zdHMuRU5ESERSIHx8IGRhdGEucmVhZFVJbnQzMkxFKDApICE9PSBjb25zdHMuRU5EU0lHKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2VudHJhbCBkaXJlY3RvcnknKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyBvbiB0aGlzIHZvbHVtZVxuICAgICAgICB0aGlzLnZvbHVtZUVudHJpZXMgPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuRU5EU1VCKTtcbiAgICAgICAgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgdGhpcy50b3RhbEVudHJpZXMgPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuRU5EVE9UKTtcbiAgICAgICAgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgICAgICB0aGlzLnNpemUgPSBkYXRhLnJlYWRVSW50MzJMRShjb25zdHMuRU5EU0laKTtcbiAgICAgICAgLy8gb2Zmc2V0IG9mIGZpcnN0IENFTiBoZWFkZXJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBkYXRhLnJlYWRVSW50MzJMRShjb25zdHMuRU5ET0ZGKTtcbiAgICAgICAgLy8gemlwIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICAgICAgdGhpcy5jb21tZW50TGVuZ3RoID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkVORENPTSk7XG4gICAgfVxufVxuXG5jbGFzcyBDZW50cmFsRGlyZWN0b3J5TG9jNjRIZWFkZXIge1xuICAgIHJlYWQoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggIT09IGNvbnN0cy5FTkRMNjRIRFIgfHwgZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IGNvbnN0cy5FTkRMNjRTSUcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB6aXA2NCBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gWklQNjQgRU9DRCBoZWFkZXIgb2Zmc2V0XG4gICAgICAgIHRoaXMuaGVhZGVyT2Zmc2V0ID0gcmVhZFVJbnQ2NExFKGRhdGEsIGNvbnN0cy5FTkRTVUIpO1xuICAgIH1cbn1cblxuY2xhc3MgQ2VudHJhbERpcmVjdG9yeVppcDY0SGVhZGVyIHtcbiAgICByZWFkKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoICE9PSBjb25zdHMuRU5ENjRIRFIgfHwgZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IGNvbnN0cy5FTkQ2NFNJRykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNlbnRyYWwgZGlyZWN0b3J5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbnVtYmVyIG9mIGVudHJpZXMgb24gdGhpcyB2b2x1bWVcbiAgICAgICAgdGhpcy52b2x1bWVFbnRyaWVzID0gcmVhZFVJbnQ2NExFKGRhdGEsIGNvbnN0cy5FTkQ2NFNVQik7XG4gICAgICAgIC8vIHRvdGFsIG51bWJlciBvZiBlbnRyaWVzXG4gICAgICAgIHRoaXMudG90YWxFbnRyaWVzID0gcmVhZFVJbnQ2NExFKGRhdGEsIGNvbnN0cy5FTkQ2NFRPVCk7XG4gICAgICAgIC8vIGNlbnRyYWwgZGlyZWN0b3J5IHNpemUgaW4gYnl0ZXNcbiAgICAgICAgdGhpcy5zaXplID0gcmVhZFVJbnQ2NExFKGRhdGEsIGNvbnN0cy5FTkQ2NFNJWik7XG4gICAgICAgIC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gcmVhZFVJbnQ2NExFKGRhdGEsIGNvbnN0cy5FTkQ2NE9GRik7XG4gICAgfVxufVxuXG5jbGFzcyBaaXBFbnRyeSB7XG4gICAgcmVhZEhlYWRlcihkYXRhLCBvZmZzZXQpIHtcbiAgICAgICAgLy8gZGF0YSBzaG91bGQgYmUgNDYgYnl0ZXMgYW5kIHN0YXJ0IHdpdGggXCJQSyAwMSAwMlwiXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IG9mZnNldCArIGNvbnN0cy5DRU5IRFIgfHwgZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0KSAhPT0gY29uc3RzLkNFTlNJRykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVudHJ5IGhlYWRlcicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHZlcnNpb24gbWFkZSBieVxuICAgICAgICB0aGlzLnZlck1hZGUgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOVkVNKTtcbiAgICAgICAgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgICAgICB0aGlzLnZlcnNpb24gPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOVkVSKTtcbiAgICAgICAgLy8gZW5jcnlwdCwgZGVjcnlwdCBmbGFnc1xuICAgICAgICB0aGlzLmZsYWdzID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTkZMRyk7XG4gICAgICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgICAgICB0aGlzLm1ldGhvZCA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5IT1cpO1xuICAgICAgICAvLyBtb2RpZmljYXRpb24gdGltZSAoMiBieXRlcyB0aW1lLCAyIGJ5dGVzIGRhdGUpXG4gICAgICAgIGNvbnN0IHRpbWVieXRlcyA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5USU0pO1xuICAgICAgICBjb25zdCBkYXRlYnl0ZXMgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOVElNICsgMik7XG4gICAgICAgIHRoaXMudGltZSA9IHBhcnNlWmlwVGltZSh0aW1lYnl0ZXMsIGRhdGVieXRlcyk7XG5cbiAgICAgICAgLy8gdW5jb21wcmVzc2VkIGZpbGUgY3JjLTMyIHZhbHVlXG4gICAgICAgIHRoaXMuY3JjID0gZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0ICsgY29uc3RzLkNFTkNSQyk7XG4gICAgICAgIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgICAgICB0aGlzLmNvbXByZXNzZWRTaXplID0gZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0ICsgY29uc3RzLkNFTlNJWik7XG4gICAgICAgIC8vIHVuY29tcHJlc3NlZCBzaXplXG4gICAgICAgIHRoaXMuc2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKG9mZnNldCArIGNvbnN0cy5DRU5MRU4pO1xuICAgICAgICAvLyBmaWxlbmFtZSBsZW5ndGhcbiAgICAgICAgdGhpcy5mbmFtZUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5OQU0pO1xuICAgICAgICAvLyBleHRyYSBmaWVsZCBsZW5ndGhcbiAgICAgICAgdGhpcy5leHRyYUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5FWFQpO1xuICAgICAgICAvLyBmaWxlIGNvbW1lbnQgbGVuZ3RoXG4gICAgICAgIHRoaXMuY29tTGVuID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTkNPTSk7XG4gICAgICAgIC8vIHZvbHVtZSBudW1iZXIgc3RhcnRcbiAgICAgICAgdGhpcy5kaXNrU3RhcnQgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VORFNLKTtcbiAgICAgICAgLy8gaW50ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzXG4gICAgICAgIHRoaXMuaW5hdHRyID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTkFUVCk7XG4gICAgICAgIC8vIGV4dGVybmFsIGZpbGUgYXR0cmlidXRlc1xuICAgICAgICB0aGlzLmF0dHIgPSBkYXRhLnJlYWRVSW50MzJMRShvZmZzZXQgKyBjb25zdHMuQ0VOQVRYKTtcbiAgICAgICAgLy8gTE9DIGhlYWRlciBvZmZzZXRcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBkYXRhLnJlYWRVSW50MzJMRShvZmZzZXQgKyBjb25zdHMuQ0VOT0ZGKTtcbiAgICB9XG5cbiAgICByZWFkRGF0YUhlYWRlcihkYXRhKSB7XG4gICAgICAgIC8vIDMwIGJ5dGVzIGFuZCBzaG91bGQgc3RhcnQgd2l0aCBcIlBLXFwwMDNcXDAwNFwiXG4gICAgICAgIGlmIChkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gY29uc3RzLkxPQ1NJRykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGxvY2FsIGhlYWRlcicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3RcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkxPQ1ZFUik7XG4gICAgICAgIC8vIGdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZ1xuICAgICAgICB0aGlzLmZsYWdzID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkxPQ0ZMRyk7XG4gICAgICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgICAgICB0aGlzLm1ldGhvZCA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NIT1cpO1xuICAgICAgICAvLyBtb2RpZmljYXRpb24gdGltZSAoMiBieXRlcyB0aW1lIDsgMiBieXRlcyBkYXRlKVxuICAgICAgICBjb25zdCB0aW1lYnl0ZXMgPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuTE9DVElNKTtcbiAgICAgICAgY29uc3QgZGF0ZWJ5dGVzID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkxPQ1RJTSArIDIpO1xuICAgICAgICB0aGlzLnRpbWUgPSBwYXJzZVppcFRpbWUodGltZWJ5dGVzLCBkYXRlYnl0ZXMpO1xuXG4gICAgICAgIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1ZVxuICAgICAgICB0aGlzLmNyYyA9IGRhdGEucmVhZFVJbnQzMkxFKGNvbnN0cy5MT0NDUkMpIHx8IHRoaXMuY3JjO1xuICAgICAgICAvLyBjb21wcmVzc2VkIHNpemVcbiAgICAgICAgY29uc3QgY29tcHJlc3NlZFNpemUgPSBkYXRhLnJlYWRVSW50MzJMRShjb25zdHMuTE9DU0laKTtcbiAgICAgICAgaWYgKGNvbXByZXNzZWRTaXplICYmIGNvbXByZXNzZWRTaXplICE9PSBjb25zdHMuRUZfWklQNjRfT1JfMzIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NlZFNpemUgPSBjb21wcmVzc2VkU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgICAgICBjb25zdCBzaXplID0gZGF0YS5yZWFkVUludDMyTEUoY29uc3RzLkxPQ0xFTik7XG4gICAgICAgIGlmIChzaXplICYmIHNpemUgIT09IGNvbnN0cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaWxlbmFtZSBsZW5ndGhcbiAgICAgICAgdGhpcy5mbmFtZUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NOQU0pO1xuICAgICAgICAvLyBleHRyYSBmaWVsZCBsZW5ndGhcbiAgICAgICAgdGhpcy5leHRyYUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NFWFQpO1xuICAgIH1cblxuICAgIHJlYWQoZGF0YSwgb2Zmc2V0LCB0ZXh0RGVjb2Rlcikge1xuICAgICAgICBjb25zdCBuYW1lRGF0YSA9IGRhdGEuc2xpY2Uob2Zmc2V0LCAob2Zmc2V0ICs9IHRoaXMuZm5hbWVMZW4pKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGV4dERlY29kZXJcbiAgICAgICAgICAgID8gdGV4dERlY29kZXIuZGVjb2RlKG5ldyBVaW50OEFycmF5KG5hbWVEYXRhKSlcbiAgICAgICAgICAgIDogbmFtZURhdGEudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgY29uc3QgbGFzdENoYXIgPSBkYXRhW29mZnNldCAtIDFdO1xuICAgICAgICB0aGlzLmlzRGlyZWN0b3J5ID0gbGFzdENoYXIgPT09IDQ3IHx8IGxhc3RDaGFyID09PSA5MjtcblxuICAgICAgICBpZiAodGhpcy5leHRyYUxlbikge1xuICAgICAgICAgICAgdGhpcy5yZWFkRXh0cmEoZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSB0aGlzLmV4dHJhTGVuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tbWVudCA9IHRoaXMuY29tTGVuID8gZGF0YS5zbGljZShvZmZzZXQsIG9mZnNldCArIHRoaXMuY29tTGVuKS50b1N0cmluZygpIDogbnVsbDtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZU5hbWUoKSB7XG4gICAgICAgIGlmICgvXFxcXHxeXFx3Kzp8XlxcL3woXnxcXC8pXFwuXFwuKFxcL3wkKS8udGVzdCh0aGlzLm5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01hbGljaW91cyBlbnRyeTogJyArIHRoaXMubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkRXh0cmEoZGF0YSwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBzaWduYXR1cmUsIHNpemU7XG4gICAgICAgIGNvbnN0IG1heFBvcyA9IG9mZnNldCArIHRoaXMuZXh0cmFMZW47XG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBtYXhQb3MpIHtcbiAgICAgICAgICAgIHNpZ25hdHVyZSA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgICAgIHNpemUgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICBpZiAoY29uc3RzLklEX1pJUDY0ID09PSBzaWduYXR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlWmlwNjRFeHRyYShkYXRhLCBvZmZzZXQsIHNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2Zmc2V0ICs9IHNpemU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJzZVppcDY0RXh0cmEoZGF0YSwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA4ICYmIHRoaXMuc2l6ZSA9PT0gY29uc3RzLkVGX1pJUDY0X09SXzMyKSB7XG4gICAgICAgICAgICB0aGlzLnNpemUgPSByZWFkVUludDY0TEUoZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICAgICAgbGVuZ3RoIC09IDg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA+PSA4ICYmIHRoaXMuY29tcHJlc3NlZFNpemUgPT09IGNvbnN0cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgdGhpcy5jb21wcmVzc2VkU2l6ZSA9IHJlYWRVSW50NjRMRShkYXRhLCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDg7XG4gICAgICAgICAgICBsZW5ndGggLT0gODtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID49IDggJiYgdGhpcy5vZmZzZXQgPT09IGNvbnN0cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSByZWFkVUludDY0TEUoZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICAgICAgbGVuZ3RoIC09IDg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA+PSA0ICYmIHRoaXMuZGlza1N0YXJ0ID09PSBjb25zdHMuRUZfWklQNjRfT1JfMTYpIHtcbiAgICAgICAgICAgIHRoaXMuZGlza1N0YXJ0ID0gZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0KTtcbiAgICAgICAgICAgIC8vIG9mZnNldCArPSA0OyBsZW5ndGggLT0gNDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBlbmNyeXB0ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIGNvbnN0cy5GTEdfRU5UUllfRU5DKSA9PT0gY29uc3RzLkZMR19FTlRSWV9FTkM7XG4gICAgfVxuXG4gICAgZ2V0IGlzRmlsZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGlyZWN0b3J5O1xuICAgIH1cbn1cblxuY2xhc3MgRnNSZWFkIHtcbiAgICBjb25zdHJ1Y3RvcihmZCwgYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZmQgPSBmZDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMuYnl0ZXNSZWFkID0gMDtcbiAgICAgICAgdGhpcy53YWl0aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmVhZChzeW5jKSB7XG4gICAgICAgIFN0cmVhbVppcC5kZWJ1Z0xvZygncmVhZCcsIHRoaXMucG9zaXRpb24sIHRoaXMuYnl0ZXNSZWFkLCB0aGlzLmxlbmd0aCwgdGhpcy5vZmZzZXQpO1xuICAgICAgICB0aGlzLndhaXRpbmcgPSB0cnVlO1xuICAgICAgICBsZXQgZXJyO1xuICAgICAgICBpZiAoc3luYykge1xuICAgICAgICAgICAgbGV0IGJ5dGVzUmVhZCA9IDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJ5dGVzUmVhZCA9IGZzLnJlYWRTeW5jKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZkLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKyB0aGlzLmJ5dGVzUmVhZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggLSB0aGlzLmJ5dGVzUmVhZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiArIHRoaXMuYnl0ZXNSZWFkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWFkQ2FsbGJhY2soc3luYywgZXJyLCBlcnIgPyBieXRlc1JlYWQgOiBudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzLnJlYWQoXG4gICAgICAgICAgICAgICAgdGhpcy5mZCxcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCArIHRoaXMuYnl0ZXNSZWFkLFxuICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoIC0gdGhpcy5ieXRlc1JlYWQsXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiArIHRoaXMuYnl0ZXNSZWFkLFxuICAgICAgICAgICAgICAgIHRoaXMucmVhZENhbGxiYWNrLmJpbmQodGhpcywgc3luYylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkQ2FsbGJhY2soc3luYywgZXJyLCBieXRlc1JlYWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBieXRlc1JlYWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLmJ5dGVzUmVhZCArPSBieXRlc1JlYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyciB8fCAhYnl0ZXNSZWFkIHx8IHRoaXMuYnl0ZXNSZWFkID09PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy53YWl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFjayhlcnIsIHRoaXMuYnl0ZXNSZWFkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVhZChzeW5jKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRmlsZVdpbmRvd0J1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoZmQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gQnVmZmVyLmFsbG9jKDApO1xuICAgICAgICB0aGlzLmZkID0gZmQ7XG4gICAgICAgIHRoaXMuZnNPcCA9IG51bGw7XG4gICAgfVxuXG4gICAgY2hlY2tPcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZnNPcCAmJiB0aGlzLmZzT3Aud2FpdGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVyYXRpb24gaW4gcHJvZ3Jlc3MnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWQocG9zLCBsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2hlY2tPcCgpO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhsZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3M7XG4gICAgICAgIHRoaXMuZnNPcCA9IG5ldyBGc1JlYWQodGhpcy5mZCwgdGhpcy5idWZmZXIsIDAsIGxlbmd0aCwgdGhpcy5wb3NpdGlvbiwgY2FsbGJhY2spLnJlYWQoKTtcbiAgICB9XG5cbiAgICBleHBhbmRMZWZ0KGxlbmd0aCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jaGVja09wKCk7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbQnVmZmVyLmFsbG9jKGxlbmd0aCksIHRoaXMuYnVmZmVyXSk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gLT0gbGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnNPcCA9IG5ldyBGc1JlYWQodGhpcy5mZCwgdGhpcy5idWZmZXIsIDAsIGxlbmd0aCwgdGhpcy5wb3NpdGlvbiwgY2FsbGJhY2spLnJlYWQoKTtcbiAgICB9XG5cbiAgICBleHBhbmRSaWdodChsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2hlY2tPcCgpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbdGhpcy5idWZmZXIsIEJ1ZmZlci5hbGxvYyhsZW5ndGgpXSk7XG4gICAgICAgIHRoaXMuZnNPcCA9IG5ldyBGc1JlYWQoXG4gICAgICAgICAgICB0aGlzLmZkLFxuICAgICAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uICsgb2Zmc2V0LFxuICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgKS5yZWFkKCk7XG4gICAgfVxuXG4gICAgbW92ZVJpZ2h0KGxlbmd0aCwgY2FsbGJhY2ssIHNoaWZ0KSB7XG4gICAgICAgIHRoaXMuY2hlY2tPcCgpO1xuICAgICAgICBpZiAoc2hpZnQpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLmNvcHkodGhpcy5idWZmZXIsIDAsIHNoaWZ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc2l0aW9uICs9IHNoaWZ0O1xuICAgICAgICB0aGlzLmZzT3AgPSBuZXcgRnNSZWFkKFxuICAgICAgICAgICAgdGhpcy5mZCxcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5idWZmZXIubGVuZ3RoIC0gc2hpZnQsXG4gICAgICAgICAgICBzaGlmdCxcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gKyB0aGlzLmJ1ZmZlci5sZW5ndGggLSBzaGlmdCxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICkucmVhZCgpO1xuICAgIH1cbn1cblxuY2xhc3MgRW50cnlEYXRhUmVhZGVyU3RyZWFtIGV4dGVuZHMgc3RyZWFtLlJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcihmZCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5mZCA9IGZkO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy5yZWFkQ2FsbGJhY2sgPSB0aGlzLnJlYWRDYWxsYmFjay5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9yZWFkKG4pIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmFsbG9jKE1hdGgubWluKG4sIHRoaXMubGVuZ3RoIC0gdGhpcy5wb3MpKTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZzLnJlYWQodGhpcy5mZCwgYnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoLCB0aGlzLm9mZnNldCArIHRoaXMucG9zLCB0aGlzLnJlYWRDYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnB1c2gobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkQ2FsbGJhY2soZXJyLCBieXRlc1JlYWQsIGJ1ZmZlcikge1xuICAgICAgICB0aGlzLnBvcyArPSBieXRlc1JlYWQ7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoKG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKCFieXRlc1JlYWQpIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChieXRlc1JlYWQgIT09IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHVzaChidWZmZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBFbnRyeVZlcmlmeVN0cmVhbSBleHRlbmRzIHN0cmVhbS5UcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKGJhc2VTdG0sIGNyYywgc2l6ZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcmlmeSA9IG5ldyBDcmNWZXJpZnkoY3JjLCBzaXplKTtcbiAgICAgICAgYmFzZVN0bS5vbignZXJyb3InLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfdHJhbnNmb3JtKGRhdGEsIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgZXJyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy52ZXJpZnkuZGF0YShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhlcnIsIGRhdGEpO1xuICAgIH1cbn1cblxuY2xhc3MgQ3JjVmVyaWZ5IHtcbiAgICBjb25zdHJ1Y3RvcihjcmMsIHNpemUpIHtcbiAgICAgICAgdGhpcy5jcmMgPSBjcmM7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjcmM6IH4wLFxuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBkYXRhKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3JjVGFibGUgPSBDcmNWZXJpZnkuZ2V0Q3JjVGFibGUoKTtcbiAgICAgICAgbGV0IGNyYyA9IHRoaXMuc3RhdGUuY3JjO1xuICAgICAgICBsZXQgb2ZmID0gMDtcbiAgICAgICAgbGV0IGxlbiA9IGRhdGEubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoLS1sZW4gPj0gMCkge1xuICAgICAgICAgICAgY3JjID0gY3JjVGFibGVbKGNyYyBeIGRhdGFbb2ZmKytdKSAmIDB4ZmZdIF4gKGNyYyA+Pj4gOCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5jcmMgPSBjcmM7XG4gICAgICAgIHRoaXMuc3RhdGUuc2l6ZSArPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2l6ZSA+PSB0aGlzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICAgICAgICAgIGJ1Zi53cml0ZUludDMyTEUofnRoaXMuc3RhdGUuY3JjICYgMHhmZmZmZmZmZiwgMCk7XG4gICAgICAgICAgICBjcmMgPSBidWYucmVhZFVJbnQzMkxFKDApO1xuICAgICAgICAgICAgaWYgKGNyYyAhPT0gdGhpcy5jcmMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQ1JDJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaXplICE9PSB0aGlzLnNpemUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2l6ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldENyY1RhYmxlKCkge1xuICAgICAgICBsZXQgY3JjVGFibGUgPSBDcmNWZXJpZnkuY3JjVGFibGU7XG4gICAgICAgIGlmICghY3JjVGFibGUpIHtcbiAgICAgICAgICAgIENyY1ZlcmlmeS5jcmNUYWJsZSA9IGNyY1RhYmxlID0gW107XG4gICAgICAgICAgICBjb25zdCBiID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAyNTY7IG4rKykge1xuICAgICAgICAgICAgICAgIGxldCBjID0gbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gODsgLS1rID49IDA7ICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiAxKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IDB4ZWRiODgzMjAgXiAoYyA+Pj4gMSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gYyA+Pj4gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYyA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYi53cml0ZUludDMyTEUoYywgMCk7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBiLnJlYWRVSW50MzJMRSgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3JjVGFibGVbbl0gPSBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmNUYWJsZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlWmlwVGltZSh0aW1lYnl0ZXMsIGRhdGVieXRlcykge1xuICAgIGNvbnN0IHRpbWViaXRzID0gdG9CaXRzKHRpbWVieXRlcywgMTYpO1xuICAgIGNvbnN0IGRhdGViaXRzID0gdG9CaXRzKGRhdGVieXRlcywgMTYpO1xuXG4gICAgY29uc3QgbXQgPSB7XG4gICAgICAgIGg6IHBhcnNlSW50KHRpbWViaXRzLnNsaWNlKDAsIDUpLmpvaW4oJycpLCAyKSxcbiAgICAgICAgbTogcGFyc2VJbnQodGltZWJpdHMuc2xpY2UoNSwgMTEpLmpvaW4oJycpLCAyKSxcbiAgICAgICAgczogcGFyc2VJbnQodGltZWJpdHMuc2xpY2UoMTEsIDE2KS5qb2luKCcnKSwgMikgKiAyLFxuICAgICAgICBZOiBwYXJzZUludChkYXRlYml0cy5zbGljZSgwLCA3KS5qb2luKCcnKSwgMikgKyAxOTgwLFxuICAgICAgICBNOiBwYXJzZUludChkYXRlYml0cy5zbGljZSg3LCAxMSkuam9pbignJyksIDIpLFxuICAgICAgICBEOiBwYXJzZUludChkYXRlYml0cy5zbGljZSgxMSwgMTYpLmpvaW4oJycpLCAyKSxcbiAgICB9O1xuICAgIGNvbnN0IGR0X3N0ciA9IFttdC5ZLCBtdC5NLCBtdC5EXS5qb2luKCctJykgKyAnICcgKyBbbXQuaCwgbXQubSwgbXQuc10uam9pbignOicpICsgJyBHTVQrMCc7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGR0X3N0cikuZ2V0VGltZSgpO1xufVxuXG5mdW5jdGlvbiB0b0JpdHMoZGVjLCBzaXplKSB7XG4gICAgbGV0IGIgPSAoZGVjID4+PiAwKS50b1N0cmluZygyKTtcbiAgICB3aGlsZSAoYi5sZW5ndGggPCBzaXplKSB7XG4gICAgICAgIGIgPSAnMCcgKyBiO1xuICAgIH1cbiAgICByZXR1cm4gYi5zcGxpdCgnJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRVSW50NjRMRShidWZmZXIsIG9mZnNldCkge1xuICAgIHJldHVybiBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDQpICogMHgwMDAwMDAwMTAwMDAwMDAwICsgYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbVppcDtcbiIsICJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgT3RoZXI6IDAsXG4gIENSOiAxIDw8IDAsXG4gIExGOiAxIDw8IDEsXG4gIENvbnRyb2w6IDEgPDwgMixcbiAgRXh0ZW5kOiAxIDw8IDMsXG4gIFpXSjogMSA8PCA0LFxuICBSZWdpb25hbF9JbmRpY2F0b3I6IDEgPDwgNSxcbiAgUHJlcGVuZDogMSA8PCA2LFxuICBTcGFjaW5nTWFyazogMSA8PCA3LFxuICBMOiAxIDw8IDgsXG4gIFY6IDEgPDwgOSxcbiAgVDogMSA8PCAxMCxcbiAgTFY6IDEgPDwgMTEsXG4gIExWVDogMSA8PCAxMixcbiAgRXh0ZW5kZWRfUGljdG9ncmFwaGljOiAxIDw8IDEzLFxuICBJbkNCX0xpbmtlcjogMSA8PCAxNCxcbiAgSW5DQl9Db25zb25hbnQ6IDEgPDwgMTUsXG4gIEluQ0JfRXh0ZW5kOiAxIDw8IDE2LFxufTtcbiIsICJ7XCJkYXRhXCI6XCJBQkFPQUFBQUFBRFFqUUFBQWQ0SElmanRuRzJvRlVVWXh4LzFuSHUyOU9vbHZLUlNaSUlRZ2hTU0VGSnd3ajRZV2R6b0Zjb1F5cmlCSHd6OFlIREJpU0tETEc5WUtTRWlVWDRJRlEwRkNhUkxvRm1VYjltTEJxSitFRE9Jc0FncGpmN2I3bkNuT1RPN003c3p1OGZyUFBCalp1ZmxlWjZaZVdabTczcHdZQUxSazJBcEdBUU12QzZVbFUySHdVYndEdGhrMFA1RHNDMmpmaWZZQzBiQVFYQUUvQWhPZ1hOQ3UxL0E3K0FTb0FaUkQ1Z01la0UvbUFGbWdlMWdOOWpiU1ByT1NkUFBrTTREWDRBdndWRndBcHdCWjhFRmNCSDhCZjRHRTVwRVVYUDB1US81YWMyay9VeWt0eldUL25jZ1BZajBybVppcDkxTTZoYzFSL1UvaFB6ajRCbndQQmdFQ3dUN2NiOFZLRnNaSmZsVnlLOU85Y1c4Z3Z3YjZmTTZwTytsK2MxSXQ0THQ0SGFoL1I3azk0SDk0QnVoUEdaRE5NcVdsSzFnZjRyWU5vdnRodTFjOHgzRzh4T1ltaEtYblVINmM1cGYwL2gvKzhVby8xV2FneitiZXYxWDBycEdEOUdrbmlTL0ZqUlR2Vk5SZGlPNEJjd0djOEg4dE4zZGFicXdwMVB2L1NoN1dGSE9HVTRwT3o5dndzLzFxYStQQ3VYeEdIWm1qRHRRQWRMNm4xREVnQXM3TnducnZDUWo1Z0tCUUNBUUNBUUNnVUFnRU9nR25zUGZybE9FN3psdkczeS9XSTQrSzRXL2VZY2lvdFZnQ0dXdjh1ODVTTmVEalZIeVBYQWo4dE9SYmtucnR5TGRBVDVKbno5RmVobnA1emwvUzMrRitrUFFlUmdjQVVmQk1mQXRPQjZGdWxBWDZrSmRxSE5kdHdQc0FRZWkrdStzUUNBd2RqbmsrZDlUTmswWS9YZDFtVUZGbWZoK3ZLSGh4eWNiUm5vVGFETFIwdDU4Mm1nM29HZzdMSldONEptbW9EMVlOU1VwMjRiME5KaldSM1FuR0FUM1RjVDdQemg3SGRHdDF4TkY0eEtlRnZJaXU5RDI1RVIxbmN6cVZNZU1TVVM3a1g4TTZidmdNS0JlTXgyQlFDQVFHSnY4Z1h1aEVkOG5MYUovY0IrMmNDZFBhaVcvRTJvanZ5aTlveU9rTjZCOERmNW1tWmJXMzR4MFFMakRaN2VTNzA3aS9Sci9abVJ1YS9SM1pQT1J2NmVWMUMyTVUvUi9NUDFPOWdDZUgybU45bjBLK1dkYitydDdFSFVyaFBwVnJlUzdHSDltUXQxcnlMK1ZvV3Q5UmwzTUV1aGRKcjJ2dkk4K0g0Q1B3UXVvMjVYcWVMSEFlODFld2Y0SThnY2tmNzdHODB1cDN1TTV2b3FjUk51WDBlODAwdk1XL1h3eUJIN3JFbDlFWmlDMm42alEzbWFzeXh6WS9FSHhuWGplVmZwdElQNzk3ckFBa3hqTzRLTkdaL3RyalRKei8zM08zM3JUcFhQcFZCZisxdTRjZkxxZzhXdXhvOStEbmsvMVh6UWMvNlcwM1JXaHJEK2RTekk0eCtLL2VTOTE0WG5uaXN2cDJNWTdPclAybGRBVG9lODZNRm5RMFgrVm5xVTJ4T2ZuckNoNWYzT2hhMEdVcFBjaVhRUUdycVk1aEs5TEJYK25LL2FlYmF3ZVM4K0FaU1huSWE5L3Y0TXpUaDdiMmpINk8vcmxKZGZpWkJlTW9VRm1qQmZ5NHd6N21CQ2tQZ256N3k2T3E0eC9sK3NXWGVPNGxLcnNkSnZVdllaRjExMU1kZm14TG0wTnBtSTc1OTE4NTNUaitWSlZER2FOb1ozVFJ0YWhhdXREUkwvcWttNktsVzZXYTJFZVhJM041UnkwU1grZTI2eEoyN0s5SzVpaWpOSnlqdndzbmxsWjRtS2VaYnV5NzJJNUY1VnZOcjZvK2hjVmJyZWRvVmMzL3k3dk4va2VrZTB5d1M2VDZ0cU9mT0UybVFLUzhySi8zQThtcEhXZlpWbDdxcTBvVjBsYlE5bTliT3N6dCtsYjVMV3NVOFR4TjhqOStMbk9QbkwzUGM3M3R6NFgzMWZ5N21WZERPYlpjbkhmZGV2M1ZOVjg2ZWJSdEYxVlVzU3VpN1UwT1EvckV2RThKc3ArajFINUxiZm5lY3JwYStOZjFYRWkybVpVei9xSWU0YjdvSnREWGk4L204NWJONjlISk9YcjJpOVorMFBWVnVXMzZuNXg2VjhaL1l3NjQwcyt0NW5RbHBHZk9QQWRYMlhQSTVkK2lQNndESjhZRmR2ZlJjL2JPa1IzMWpLcFhIeDJlYjdKOTFrZDd5YU1Pc2ViOXc2VnA3UE85WXlGVVdlTU02cHZmQzdtaEJYb0k3OHoxU255ZkRQTHZxb3lScDFubU5pZVplQXFSbFV4VitTc3ozdnZkU1dtL3BhSjg3cnV1aXBzeVRHbXNzZkkzWDR6V1NNVlRGTk9sRDFQTmpiSytPZUtzbUk2Yi9KNG1kVFdwK1RaOGprZlJYWEV3Z3owbFBYWng5ejdQcnVxT2hkTllscU1aUjJxZUhlMU4zM09RZFlZVmVXeWlHM2wvcktlS3RlUzIvVWhYRGRQODg1Q01hV2NQcWJ6YUJKVE90MVZpcW5Qak9xSm1TenhjYmZXdFE2aU1OTFB2NnR4NW9tOGZ4aDFuaVV1L0dBNW1NYWxxM2xRblErMjVQbXRzcG5sRHhkUnJ3dXBhdy83V0N2YjlWTHB5bnJXbGJrVVJwMTd6cmNQak5UN3JTb3Bzcjljblg5NSs4NjFQUk4vYk04WTEvWVptZDAvL0ZtbnAwb3h2UnZrNXlKMlROcXdBcnBkaVkrWTRLazhiMW56V0dTT0dabkZGMjluSzF5bkhBdWlyYUs2WFV1ZFBsUmgyK1pNMWQzeEpucDlTOUgzT3AyT0t1NFhuN3FyZm45Z1ZPK1phM29lNnZycTd2V3EzejI0UHk2RmtmNTlRamQyVnpaMGRuWEM2Mng4OWlHaTd4d3V1bWViYzhaVVpGdW04MUJsdktva2ErMTkrY0xJUEdaVTdmaXpUM0dsUDI5K3hmRXdLYTg2NCtvVWszT0NrWHA5bWFKdEZlTGFKcU5pc2N0VEc5SEZSaDEzWFphb3htZDZUN3NXUnVaejVTc3VzM3pnSXNlSTJGN1dWYldZekZzVnNXWnpUNXZlSFdWRTFxV2FqN3c0Y3lXbWE2VHlNVzhjVEpQMzdidmNocVE2R3grWUFsa2ZML2V4UHFJdDBiNXI0YnJ6NWxQVnpxZm85R2ZaTFJyVE5tTXgxY2ZJejV6NVBrZDludGZ5dmlsQ252NnkvdHIycStvdU0vV2hiUHlYMlVORmRQcVNxczZwTEx1dWNXWExaQXcyNC9VbE90OWR6cUVMbjF6NVpydHY4dXo2RUY4MlpsYUVLMkZVN3Z0cFhjSXN5ZEpSaGJDYStlOC9ENjBiVWNiWFRNTXpmUksyNG5Lc3N2Z1lyK3g3MWxoOGlPLzF0QmwvTFBHbElzZUFUNnEySjhtL1wifSIsICJ7XCJkYXRhXCI6XCJBQUFDQUFBQUFBQ0FPQUFBQWJZQlNmN3QyUzFJQkVFWUJ1RFZEWjdGWXJRTU5zRml1M2hnRVlPSTBTQ1hSSVVyQjhKaEVadGdzNWdFZzFHTUZrMDJtODJvR0kwMm0rOXhlekNPY3p2L3V3djNmdkF3Yy9QemZYT3pjZHF6V2RhQkRkaUdQZGlIZGpFK0RTM1JORHVDZnNuOGlkUS9nM09IM0Jkd0tmMGU5Ni9ndW1UZlljbmNMZHpCUFR6QW8rUlorZjBDci9BRzcvQUpYNDczOHgxd3R6OUZPNVBYLzUwbjZVWE1OZGZnLzBsRVJFUkVSRVJFUkVSRVJFVHBkZWRIQnZEUnFsNG5xMGNYdFc5YWY5OHFkUmJ5MFZ2cDhLNFcwVitDNVh3MHQ0SjJiZmplQnAzY25FdTFicm5uQ1RZTmE3ZUtkejkxWFA3V085TGI0R3FSYjdjWTZ4YnRBZHFlVk9zWS9RR2NldncvdGI2T1Q4NVlodmZLWUV4OUNNdXhLc0tucnMrZUp0VkluVnZISjBlVllWdlRaazJzaUZWTE9DamI2MVBUWlgzTWRWV0V5UDdmanpwbU14ZHpUeXEyRWJ1ZTZ4NjFuWFJHbnpuZFdwZjFhbjdkWG1HWUU0WTFwdHFxS3NLMW51MjZKdTB0eSttYVYyUnB2aytxbkRaaktVSW9iVWllc2RBUUUvam1DVG1IbXNza3BGWnNWWWJ0bVhSY2FvU0dVUG9tdW5XMmRlclFoRFBGanRUMVEvZWI4dm5tOTkwZnEzNW9IVnQxMWJVOW04OWM3RE5JOFFzPVwifSIsICJ7XCJkYXRhXCI6XCJBQWdPQUFBQUFBQlFmZ0FBQVdNR25QbnRtbTJJVlVVWXgrZHliMmV6WFh0QmlTQ0xzS0RJaUtJSW9ZSU5jaUd3UUhyUkwyVWZpaTBxTXN2N1FWQnVRa1hoa21XNWdrc1FSaFJGU0JzbGJrbGxIeXkzTDJYbGxrWHJCM3VoRjB0UTBLait4ek4zZDNidXpKeDVQZWVzT3cvOG1ETnZ6L1BNbk9jOHMvZnM2YXNUY2d1NEE5d0YrbWpkVjlrRWE4RnFzRTVqL0RQZ2VVWC9KdkFTZUJXOEJkNEdPOENIWURjejduUHdGUmdENCtBbjhDZjRBeHdCeDBHOVFjanJZQnQ0cDVITi9ZRHFHRUY5RjdnVzNBQzZ3VTFnQ1ZnSzVvRGxZQThZQlh2QkdPZ0hENEZ6d1NvNmZnMjRFRHdCeHNFQjhDdTFONEJ5STFnQS9nYmZvKzB3eXVPMHZnVzhESzVpK3RONXRWT3lNbVVXcnM5azZuTnhQWS9XTDBCNU1iMitIT1UxNEhyd1kyTnkvQ0xVYndhM2d6c1pQVDdaR0VDbkR2ZGlQUStBUnlocFd4UGxXbnI5SkxmZUFkUy80M1M4cU5pVElkcTNGZVViOUhvbE9FajdoOUgyTHRnSlBnSHIwVFpLeDMxSnkzMEMvVCtnN2FEQ2JwUGl1ai9mU3RyVE5mUUdpb1dJSHI5eit6OGlpQUVmZGc0emRvN0dleDZKUkNLUlNDUVNpVVFpa1lyekwzNjdIbUxxOHpWK3l5WUpJYk9UenZhNWFKdEgyeTlDdVlCZWJ3ZFg0UG9ZeXYxMDdFTFVlNVBzUFdCYXZ6SEozdE10RnVobHVUV25QeEtKUkNLUlNDUXkvVGpRQ0t0L1hYM3kvK282SFBKczM1WE5zelBPMFdRZitGblFmc25wVSt2TFVOOE1kZ055UnRaMk5jcDd3QkRZRG40RDQ3TUlPZXMwUXBhQURlRFVXc1llNXBxbDNrM0laZDNpUHA0SDZiam5VSTZDZjhCMVBZUTB3V0NQbm81SUpCS0puSng4M2VOMmZpN05lWWQwaktzdnIrQTdwMzc0OUt6a1hkMkFwKzlSN3FmcmZsaHovYXZhNDVtMkk3UmN3K2xJMy9XdEFPK0J4NVBzRzYrbmsreGJ2N1EvZldlNGdjN1pSUHUzb056SzZIa3RtZnkycjAzNnZjODJPbjQ0eWI0WkhLRnpQa0w1YVpKOWY5aEg3WTh5K25iaGVxOWlyV09wZjB6L0w4blVXUG1MNlR1SzYvOFV1aHBkNnIzc1J2OGNic3paWFptOTgxSE9CNWZTL2l0emRJbFl5TXpwVGE4NUhZdFJ2NDIyTFRQUS95amQrL1NadWR2Q3IxRGNWNUl2NlcrSEZSWGFCOTg4UnRlMnVnSnJIS1RQVzR2eDVha0srTVd6dm9JKytTYjl6dktGcml5L204d2J3cHhYUUwvZ0ROczVUYit6VFBmaXphNnNIRWE1QTN3OGpXTGdNL2o2QmVQdm9PQmNNMzMrdjZIajl6dnVROTc4bFI1aWhsL2JlZE0wRHZONHZ3SStOT3Z5Ny9TYkNremU1MVdWUmZYYUNhSkVtZGxTbStINGxLTHNWRTNLdm9lMjk1MHRaZGNudTVUMXJJU1FLdWFIb3ZaTlp3MjYvYUt4dm4wdFM2b1VHMVdXbWJBUHZ0YkdqelBVMld2Z1Y0dW9FYzdQa1E3N01oSG9ZdTFLN1l2T1Zodjd1dUo3L1FwZExjS3RYMlpQdGhjMUEvdEVjSy96YkFXKy8wcmJucVJWQWxQdWswZ0M1YjVjdjFRK0JiSXA4a0duWDJWalFtVDdiTG0vSGZwMVJmWjNrQWRwR1pJM2gyaU1uWkNDNDdmdGorMzUxV0owNlBUTHhrNkk3T3h4V0g4cmQ0UkNSSEh1S0MxRGJPYUlkSnlRQW40dnVQcHFTOGQ1SFZKVWZ5K3AybFhqaWhJYnV5YS9MMndvd2thZTNUSkVaRmZtanl3bkJzaFJTbDlzOUplMXY3ejlrTDdiUEU5RmkreE1sZjA5WjNOZTJLeE5GdThxZjJ4MDJvak1EOU1jcnBPTGl2VFg5ajZGOWwvSGZtZ2JvdEtuZnA5bkpDSHFmZkZobzBoY3hXUk5oSFRhclVJOGg5NFBHeDI4UHAyeHJyWjhTZWhjRlRvUGh2YWJ2Ylo1SmtYeDRldFpkNGxaZm4wK3BJejhvTW9SdW5wc2JQZ1VVWjROYVl1MXFjcjl2QysyTVdzYTh5SE9QbE94ZlU3TDlGbmtnMHQrMGRHZFo5TzM4UEdyNm5QeHd6UldYVVgwL0ptU04wOWtVK1dQeUQ4ZjRqTStpb283bFcxZmVtenV2MGlYcWk1cjh5R3EvZkJ0cytnY2EvTTgrb3JMdk9jMFJKN1A4OGMwSi9tMkwvT0ZiemZWYTVMclhjNFdIMk5zYkpydWxjc2FmYStUOTlsRlZ3Z3B3cjdKTXk0N1UzVDBGaUZGNTZ1UXVzczRqM2dmYk9iNjhzVWxCNnZPamFMUHRyYmRrTHA5blptcWZmY3BxbnVyazROVStvcThyekl4MlhkZHY4dGVsK3BleWRhcitodEJwSXVmSDBKNE8yWEZDQ3UyejBHWmF5anlETXpMUzZaK3lHSzFTam1rN1JOYnRxOTF6clhRZnVtZU9iNThNZEdUdHhkbG5nbXljMDluVGxteHFmTWNtdmlqNjdPSlhWM1IzZE9Rc1p6bmg2cWZrT0w4ME0zQnV2dFcxQjd5WTJSK0ZMRy9Nc256VlhkK2FGOVZ1VWsxeHpXdWRQd3kxZWR6ejF4OHQ5VWZ5bmRiSFRZMnl4VGRIT0NhOTJ6ajNDUitUZTZmanpYNUZ0ZjlNL0UxVkM0eXpWZWhST2E3Ny9oMDljbVhiNlp4bTJjM3BQalNIOWJuL3dFPVwifSIsICJ2YXIgVElORl9PSyA9IDA7XG52YXIgVElORl9EQVRBX0VSUk9SID0gLTM7XG5cbmZ1bmN0aW9uIFRyZWUoKSB7XG4gIHRoaXMudGFibGUgPSBuZXcgVWludDE2QXJyYXkoMTYpOyAgIC8qIHRhYmxlIG9mIGNvZGUgbGVuZ3RoIGNvdW50cyAqL1xuICB0aGlzLnRyYW5zID0gbmV3IFVpbnQxNkFycmF5KDI4OCk7ICAvKiBjb2RlIC0+IHN5bWJvbCB0cmFuc2xhdGlvbiB0YWJsZSAqL1xufVxuXG5mdW5jdGlvbiBEYXRhKHNvdXJjZSwgZGVzdCkge1xuICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgdGhpcy5zb3VyY2VJbmRleCA9IDA7XG4gIHRoaXMudGFnID0gMDtcbiAgdGhpcy5iaXRjb3VudCA9IDA7XG4gIFxuICB0aGlzLmRlc3QgPSBkZXN0O1xuICB0aGlzLmRlc3RMZW4gPSAwO1xuICBcbiAgdGhpcy5sdHJlZSA9IG5ldyBUcmVlKCk7ICAvKiBkeW5hbWljIGxlbmd0aC9zeW1ib2wgdHJlZSAqL1xuICB0aGlzLmR0cmVlID0gbmV3IFRyZWUoKTsgIC8qIGR5bmFtaWMgZGlzdGFuY2UgdHJlZSAqL1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0gdW5pbml0aWFsaXplZCBnbG9iYWwgZGF0YSAoc3RhdGljIHN0cnVjdHVyZXMpIC0tICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgc2x0cmVlID0gbmV3IFRyZWUoKTtcbnZhciBzZHRyZWUgPSBuZXcgVHJlZSgpO1xuXG4vKiBleHRyYSBiaXRzIGFuZCBiYXNlIHRhYmxlcyBmb3IgbGVuZ3RoIGNvZGVzICovXG52YXIgbGVuZ3RoX2JpdHMgPSBuZXcgVWludDhBcnJheSgzMCk7XG52YXIgbGVuZ3RoX2Jhc2UgPSBuZXcgVWludDE2QXJyYXkoMzApO1xuXG4vKiBleHRyYSBiaXRzIGFuZCBiYXNlIHRhYmxlcyBmb3IgZGlzdGFuY2UgY29kZXMgKi9cbnZhciBkaXN0X2JpdHMgPSBuZXcgVWludDhBcnJheSgzMCk7XG52YXIgZGlzdF9iYXNlID0gbmV3IFVpbnQxNkFycmF5KDMwKTtcblxuLyogc3BlY2lhbCBvcmRlcmluZyBvZiBjb2RlIGxlbmd0aCBjb2RlcyAqL1xudmFyIGNsY2lkeCA9IG5ldyBVaW50OEFycmF5KFtcbiAgMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNixcbiAgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsXG4gIDE0LCAxLCAxNVxuXSk7XG5cbi8qIHVzZWQgYnkgdGluZl9kZWNvZGVfdHJlZXMsIGF2b2lkcyBhbGxvY2F0aW9ucyBldmVyeSBjYWxsICovXG52YXIgY29kZV90cmVlID0gbmV3IFRyZWUoKTtcbnZhciBsZW5ndGhzID0gbmV3IFVpbnQ4QXJyYXkoMjg4ICsgMzIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLSB1dGlsaXR5IGZ1bmN0aW9ucyAtLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiBidWlsZCBleHRyYSBiaXRzIGFuZCBiYXNlIHRhYmxlcyAqL1xuZnVuY3Rpb24gdGluZl9idWlsZF9iaXRzX2Jhc2UoYml0cywgYmFzZSwgZGVsdGEsIGZpcnN0KSB7XG4gIHZhciBpLCBzdW07XG5cbiAgLyogYnVpbGQgYml0cyB0YWJsZSAqL1xuICBmb3IgKGkgPSAwOyBpIDwgZGVsdGE7ICsraSkgYml0c1tpXSA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCAzMCAtIGRlbHRhOyArK2kpIGJpdHNbaSArIGRlbHRhXSA9IGkgLyBkZWx0YSB8IDA7XG5cbiAgLyogYnVpbGQgYmFzZSB0YWJsZSAqL1xuICBmb3IgKHN1bSA9IGZpcnN0LCBpID0gMDsgaSA8IDMwOyArK2kpIHtcbiAgICBiYXNlW2ldID0gc3VtO1xuICAgIHN1bSArPSAxIDw8IGJpdHNbaV07XG4gIH1cbn1cblxuLyogYnVpbGQgdGhlIGZpeGVkIGh1ZmZtYW4gdHJlZXMgKi9cbmZ1bmN0aW9uIHRpbmZfYnVpbGRfZml4ZWRfdHJlZXMobHQsIGR0KSB7XG4gIHZhciBpO1xuXG4gIC8qIGJ1aWxkIGZpeGVkIGxlbmd0aCB0cmVlICovXG4gIGZvciAoaSA9IDA7IGkgPCA3OyArK2kpIGx0LnRhYmxlW2ldID0gMDtcblxuICBsdC50YWJsZVs3XSA9IDI0O1xuICBsdC50YWJsZVs4XSA9IDE1MjtcbiAgbHQudGFibGVbOV0gPSAxMTI7XG5cbiAgZm9yIChpID0gMDsgaSA8IDI0OyArK2kpIGx0LnRyYW5zW2ldID0gMjU2ICsgaTtcbiAgZm9yIChpID0gMDsgaSA8IDE0NDsgKytpKSBsdC50cmFuc1syNCArIGldID0gaTtcbiAgZm9yIChpID0gMDsgaSA8IDg7ICsraSkgbHQudHJhbnNbMjQgKyAxNDQgKyBpXSA9IDI4MCArIGk7XG4gIGZvciAoaSA9IDA7IGkgPCAxMTI7ICsraSkgbHQudHJhbnNbMjQgKyAxNDQgKyA4ICsgaV0gPSAxNDQgKyBpO1xuXG4gIC8qIGJ1aWxkIGZpeGVkIGRpc3RhbmNlIHRyZWUgKi9cbiAgZm9yIChpID0gMDsgaSA8IDU7ICsraSkgZHQudGFibGVbaV0gPSAwO1xuXG4gIGR0LnRhYmxlWzVdID0gMzI7XG5cbiAgZm9yIChpID0gMDsgaSA8IDMyOyArK2kpIGR0LnRyYW5zW2ldID0gaTtcbn1cblxuLyogZ2l2ZW4gYW4gYXJyYXkgb2YgY29kZSBsZW5ndGhzLCBidWlsZCBhIHRyZWUgKi9cbnZhciBvZmZzID0gbmV3IFVpbnQxNkFycmF5KDE2KTtcblxuZnVuY3Rpb24gdGluZl9idWlsZF90cmVlKHQsIGxlbmd0aHMsIG9mZiwgbnVtKSB7XG4gIHZhciBpLCBzdW07XG5cbiAgLyogY2xlYXIgY29kZSBsZW5ndGggY291bnQgdGFibGUgKi9cbiAgZm9yIChpID0gMDsgaSA8IDE2OyArK2kpIHQudGFibGVbaV0gPSAwO1xuXG4gIC8qIHNjYW4gc3ltYm9sIGxlbmd0aHMsIGFuZCBzdW0gY29kZSBsZW5ndGggY291bnRzICovXG4gIGZvciAoaSA9IDA7IGkgPCBudW07ICsraSkgdC50YWJsZVtsZW5ndGhzW29mZiArIGldXSsrO1xuXG4gIHQudGFibGVbMF0gPSAwO1xuXG4gIC8qIGNvbXB1dGUgb2Zmc2V0IHRhYmxlIGZvciBkaXN0cmlidXRpb24gc29ydCAqL1xuICBmb3IgKHN1bSA9IDAsIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgIG9mZnNbaV0gPSBzdW07XG4gICAgc3VtICs9IHQudGFibGVbaV07XG4gIH1cblxuICAvKiBjcmVhdGUgY29kZS0+c3ltYm9sIHRyYW5zbGF0aW9uIHRhYmxlIChzeW1ib2xzIHNvcnRlZCBieSBjb2RlKSAqL1xuICBmb3IgKGkgPSAwOyBpIDwgbnVtOyArK2kpIHtcbiAgICBpZiAobGVuZ3Roc1tvZmYgKyBpXSkgdC50cmFuc1tvZmZzW2xlbmd0aHNbb2ZmICsgaV1dKytdID0gaTtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIC0tIGRlY29kZSBmdW5jdGlvbnMgLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiBnZXQgb25lIGJpdCBmcm9tIHNvdXJjZSBzdHJlYW0gKi9cbmZ1bmN0aW9uIHRpbmZfZ2V0Yml0KGQpIHtcbiAgLyogY2hlY2sgaWYgdGFnIGlzIGVtcHR5ICovXG4gIGlmICghZC5iaXRjb3VudC0tKSB7XG4gICAgLyogbG9hZCBuZXh0IHRhZyAqL1xuICAgIGQudGFnID0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCsrXTtcbiAgICBkLmJpdGNvdW50ID0gNztcbiAgfVxuXG4gIC8qIHNoaWZ0IGJpdCBvdXQgb2YgdGFnICovXG4gIHZhciBiaXQgPSBkLnRhZyAmIDE7XG4gIGQudGFnID4+Pj0gMTtcblxuICByZXR1cm4gYml0O1xufVxuXG4vKiByZWFkIGEgbnVtIGJpdCB2YWx1ZSBmcm9tIGEgc3RyZWFtIGFuZCBhZGQgYmFzZSAqL1xuZnVuY3Rpb24gdGluZl9yZWFkX2JpdHMoZCwgbnVtLCBiYXNlKSB7XG4gIGlmICghbnVtKVxuICAgIHJldHVybiBiYXNlO1xuXG4gIHdoaWxlIChkLmJpdGNvdW50IDwgMjQpIHtcbiAgICBkLnRhZyB8PSBkLnNvdXJjZVtkLnNvdXJjZUluZGV4KytdIDw8IGQuYml0Y291bnQ7XG4gICAgZC5iaXRjb3VudCArPSA4O1xuICB9XG5cbiAgdmFyIHZhbCA9IGQudGFnICYgKDB4ZmZmZiA+Pj4gKDE2IC0gbnVtKSk7XG4gIGQudGFnID4+Pj0gbnVtO1xuICBkLmJpdGNvdW50IC09IG51bTtcbiAgcmV0dXJuIHZhbCArIGJhc2U7XG59XG5cbi8qIGdpdmVuIGEgZGF0YSBzdHJlYW0gYW5kIGEgdHJlZSwgZGVjb2RlIGEgc3ltYm9sICovXG5mdW5jdGlvbiB0aW5mX2RlY29kZV9zeW1ib2woZCwgdCkge1xuICB3aGlsZSAoZC5iaXRjb3VudCA8IDI0KSB7XG4gICAgZC50YWcgfD0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCsrXSA8PCBkLmJpdGNvdW50O1xuICAgIGQuYml0Y291bnQgKz0gODtcbiAgfVxuICBcbiAgdmFyIHN1bSA9IDAsIGN1ciA9IDAsIGxlbiA9IDA7XG4gIHZhciB0YWcgPSBkLnRhZztcblxuICAvKiBnZXQgbW9yZSBiaXRzIHdoaWxlIGNvZGUgdmFsdWUgaXMgYWJvdmUgc3VtICovXG4gIGRvIHtcbiAgICBjdXIgPSAyICogY3VyICsgKHRhZyAmIDEpO1xuICAgIHRhZyA+Pj49IDE7XG4gICAgKytsZW47XG5cbiAgICBzdW0gKz0gdC50YWJsZVtsZW5dO1xuICAgIGN1ciAtPSB0LnRhYmxlW2xlbl07XG4gIH0gd2hpbGUgKGN1ciA+PSAwKTtcbiAgXG4gIGQudGFnID0gdGFnO1xuICBkLmJpdGNvdW50IC09IGxlbjtcblxuICByZXR1cm4gdC50cmFuc1tzdW0gKyBjdXJdO1xufVxuXG4vKiBnaXZlbiBhIGRhdGEgc3RyZWFtLCBkZWNvZGUgZHluYW1pYyB0cmVlcyBmcm9tIGl0ICovXG5mdW5jdGlvbiB0aW5mX2RlY29kZV90cmVlcyhkLCBsdCwgZHQpIHtcbiAgdmFyIGhsaXQsIGhkaXN0LCBoY2xlbjtcbiAgdmFyIGksIG51bSwgbGVuZ3RoO1xuXG4gIC8qIGdldCA1IGJpdHMgSExJVCAoMjU3LTI4NikgKi9cbiAgaGxpdCA9IHRpbmZfcmVhZF9iaXRzKGQsIDUsIDI1Nyk7XG5cbiAgLyogZ2V0IDUgYml0cyBIRElTVCAoMS0zMikgKi9cbiAgaGRpc3QgPSB0aW5mX3JlYWRfYml0cyhkLCA1LCAxKTtcblxuICAvKiBnZXQgNCBiaXRzIEhDTEVOICg0LTE5KSAqL1xuICBoY2xlbiA9IHRpbmZfcmVhZF9iaXRzKGQsIDQsIDQpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCAxOTsgKytpKSBsZW5ndGhzW2ldID0gMDtcblxuICAvKiByZWFkIGNvZGUgbGVuZ3RocyBmb3IgY29kZSBsZW5ndGggYWxwaGFiZXQgKi9cbiAgZm9yIChpID0gMDsgaSA8IGhjbGVuOyArK2kpIHtcbiAgICAvKiBnZXQgMyBiaXRzIGNvZGUgbGVuZ3RoICgwLTcpICovXG4gICAgdmFyIGNsZW4gPSB0aW5mX3JlYWRfYml0cyhkLCAzLCAwKTtcbiAgICBsZW5ndGhzW2NsY2lkeFtpXV0gPSBjbGVuO1xuICB9XG5cbiAgLyogYnVpbGQgY29kZSBsZW5ndGggdHJlZSAqL1xuICB0aW5mX2J1aWxkX3RyZWUoY29kZV90cmVlLCBsZW5ndGhzLCAwLCAxOSk7XG5cbiAgLyogZGVjb2RlIGNvZGUgbGVuZ3RocyBmb3IgdGhlIGR5bmFtaWMgdHJlZXMgKi9cbiAgZm9yIChudW0gPSAwOyBudW0gPCBobGl0ICsgaGRpc3Q7KSB7XG4gICAgdmFyIHN5bSA9IHRpbmZfZGVjb2RlX3N5bWJvbChkLCBjb2RlX3RyZWUpO1xuXG4gICAgc3dpdGNoIChzeW0pIHtcbiAgICAgIGNhc2UgMTY6XG4gICAgICAgIC8qIGNvcHkgcHJldmlvdXMgY29kZSBsZW5ndGggMy02IHRpbWVzIChyZWFkIDIgYml0cykgKi9cbiAgICAgICAgdmFyIHByZXYgPSBsZW5ndGhzW251bSAtIDFdO1xuICAgICAgICBmb3IgKGxlbmd0aCA9IHRpbmZfcmVhZF9iaXRzKGQsIDIsIDMpOyBsZW5ndGg7IC0tbGVuZ3RoKSB7XG4gICAgICAgICAgbGVuZ3Roc1tudW0rK10gPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxNzpcbiAgICAgICAgLyogcmVwZWF0IGNvZGUgbGVuZ3RoIDAgZm9yIDMtMTAgdGltZXMgKHJlYWQgMyBiaXRzKSAqL1xuICAgICAgICBmb3IgKGxlbmd0aCA9IHRpbmZfcmVhZF9iaXRzKGQsIDMsIDMpOyBsZW5ndGg7IC0tbGVuZ3RoKSB7XG4gICAgICAgICAgbGVuZ3Roc1tudW0rK10gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxODpcbiAgICAgICAgLyogcmVwZWF0IGNvZGUgbGVuZ3RoIDAgZm9yIDExLTEzOCB0aW1lcyAocmVhZCA3IGJpdHMpICovXG4gICAgICAgIGZvciAobGVuZ3RoID0gdGluZl9yZWFkX2JpdHMoZCwgNywgMTEpOyBsZW5ndGg7IC0tbGVuZ3RoKSB7XG4gICAgICAgICAgbGVuZ3Roc1tudW0rK10gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLyogdmFsdWVzIDAtMTUgcmVwcmVzZW50IHRoZSBhY3R1YWwgY29kZSBsZW5ndGhzICovXG4gICAgICAgIGxlbmd0aHNbbnVtKytdID0gc3ltO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKiBidWlsZCBkeW5hbWljIHRyZWVzICovXG4gIHRpbmZfYnVpbGRfdHJlZShsdCwgbGVuZ3RocywgMCwgaGxpdCk7XG4gIHRpbmZfYnVpbGRfdHJlZShkdCwgbGVuZ3RocywgaGxpdCwgaGRpc3QpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLSBibG9jayBpbmZsYXRlIGZ1bmN0aW9ucyAtLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiBnaXZlbiBhIHN0cmVhbSBhbmQgdHdvIHRyZWVzLCBpbmZsYXRlIGEgYmxvY2sgb2YgZGF0YSAqL1xuZnVuY3Rpb24gdGluZl9pbmZsYXRlX2Jsb2NrX2RhdGEoZCwgbHQsIGR0KSB7XG4gIHdoaWxlICgxKSB7XG4gICAgdmFyIHN5bSA9IHRpbmZfZGVjb2RlX3N5bWJvbChkLCBsdCk7XG5cbiAgICAvKiBjaGVjayBmb3IgZW5kIG9mIGJsb2NrICovXG4gICAgaWYgKHN5bSA9PT0gMjU2KSB7XG4gICAgICByZXR1cm4gVElORl9PSztcbiAgICB9XG5cbiAgICBpZiAoc3ltIDwgMjU2KSB7XG4gICAgICBkLmRlc3RbZC5kZXN0TGVuKytdID0gc3ltO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuZ3RoLCBkaXN0LCBvZmZzO1xuICAgICAgdmFyIGk7XG5cbiAgICAgIHN5bSAtPSAyNTc7XG5cbiAgICAgIC8qIHBvc3NpYmx5IGdldCBtb3JlIGJpdHMgZnJvbSBsZW5ndGggY29kZSAqL1xuICAgICAgbGVuZ3RoID0gdGluZl9yZWFkX2JpdHMoZCwgbGVuZ3RoX2JpdHNbc3ltXSwgbGVuZ3RoX2Jhc2Vbc3ltXSk7XG5cbiAgICAgIGRpc3QgPSB0aW5mX2RlY29kZV9zeW1ib2woZCwgZHQpO1xuXG4gICAgICAvKiBwb3NzaWJseSBnZXQgbW9yZSBiaXRzIGZyb20gZGlzdGFuY2UgY29kZSAqL1xuICAgICAgb2ZmcyA9IGQuZGVzdExlbiAtIHRpbmZfcmVhZF9iaXRzKGQsIGRpc3RfYml0c1tkaXN0XSwgZGlzdF9iYXNlW2Rpc3RdKTtcblxuICAgICAgLyogY29weSBtYXRjaCAqL1xuICAgICAgZm9yIChpID0gb2ZmczsgaSA8IG9mZnMgKyBsZW5ndGg7ICsraSkge1xuICAgICAgICBkLmRlc3RbZC5kZXN0TGVuKytdID0gZC5kZXN0W2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiBpbmZsYXRlIGFuIHVuY29tcHJlc3NlZCBibG9jayBvZiBkYXRhICovXG5mdW5jdGlvbiB0aW5mX2luZmxhdGVfdW5jb21wcmVzc2VkX2Jsb2NrKGQpIHtcbiAgdmFyIGxlbmd0aCwgaW52bGVuZ3RoO1xuICB2YXIgaTtcbiAgXG4gIC8qIHVucmVhZCBmcm9tIGJpdGJ1ZmZlciAqL1xuICB3aGlsZSAoZC5iaXRjb3VudCA+IDgpIHtcbiAgICBkLnNvdXJjZUluZGV4LS07XG4gICAgZC5iaXRjb3VudCAtPSA4O1xuICB9XG5cbiAgLyogZ2V0IGxlbmd0aCAqL1xuICBsZW5ndGggPSBkLnNvdXJjZVtkLnNvdXJjZUluZGV4ICsgMV07XG4gIGxlbmd0aCA9IDI1NiAqIGxlbmd0aCArIGQuc291cmNlW2Quc291cmNlSW5kZXhdO1xuXG4gIC8qIGdldCBvbmUncyBjb21wbGVtZW50IG9mIGxlbmd0aCAqL1xuICBpbnZsZW5ndGggPSBkLnNvdXJjZVtkLnNvdXJjZUluZGV4ICsgM107XG4gIGludmxlbmd0aCA9IDI1NiAqIGludmxlbmd0aCArIGQuc291cmNlW2Quc291cmNlSW5kZXggKyAyXTtcblxuICAvKiBjaGVjayBsZW5ndGggKi9cbiAgaWYgKGxlbmd0aCAhPT0gKH5pbnZsZW5ndGggJiAweDAwMDBmZmZmKSlcbiAgICByZXR1cm4gVElORl9EQVRBX0VSUk9SO1xuXG4gIGQuc291cmNlSW5kZXggKz0gNDtcblxuICAvKiBjb3B5IGJsb2NrICovXG4gIGZvciAoaSA9IGxlbmd0aDsgaTsgLS1pKVxuICAgIGQuZGVzdFtkLmRlc3RMZW4rK10gPSBkLnNvdXJjZVtkLnNvdXJjZUluZGV4KytdO1xuXG4gIC8qIG1ha2Ugc3VyZSB3ZSBzdGFydCBuZXh0IGJsb2NrIG9uIGEgYnl0ZSBib3VuZGFyeSAqL1xuICBkLmJpdGNvdW50ID0gMDtcblxuICByZXR1cm4gVElORl9PSztcbn1cblxuLyogaW5mbGF0ZSBzdHJlYW0gZnJvbSBzb3VyY2UgdG8gZGVzdCAqL1xuZnVuY3Rpb24gdGluZl91bmNvbXByZXNzKHNvdXJjZSwgZGVzdCkge1xuICB2YXIgZCA9IG5ldyBEYXRhKHNvdXJjZSwgZGVzdCk7XG4gIHZhciBiZmluYWwsIGJ0eXBlLCByZXM7XG5cbiAgZG8ge1xuICAgIC8qIHJlYWQgZmluYWwgYmxvY2sgZmxhZyAqL1xuICAgIGJmaW5hbCA9IHRpbmZfZ2V0Yml0KGQpO1xuXG4gICAgLyogcmVhZCBibG9jayB0eXBlICgyIGJpdHMpICovXG4gICAgYnR5cGUgPSB0aW5mX3JlYWRfYml0cyhkLCAyLCAwKTtcblxuICAgIC8qIGRlY29tcHJlc3MgYmxvY2sgKi9cbiAgICBzd2l0Y2ggKGJ0eXBlKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIC8qIGRlY29tcHJlc3MgdW5jb21wcmVzc2VkIGJsb2NrICovXG4gICAgICAgIHJlcyA9IHRpbmZfaW5mbGF0ZV91bmNvbXByZXNzZWRfYmxvY2soZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICAvKiBkZWNvbXByZXNzIGJsb2NrIHdpdGggZml4ZWQgaHVmZm1hbiB0cmVlcyAqL1xuICAgICAgICByZXMgPSB0aW5mX2luZmxhdGVfYmxvY2tfZGF0YShkLCBzbHRyZWUsIHNkdHJlZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICAvKiBkZWNvbXByZXNzIGJsb2NrIHdpdGggZHluYW1pYyBodWZmbWFuIHRyZWVzICovXG4gICAgICAgIHRpbmZfZGVjb2RlX3RyZWVzKGQsIGQubHRyZWUsIGQuZHRyZWUpO1xuICAgICAgICByZXMgPSB0aW5mX2luZmxhdGVfYmxvY2tfZGF0YShkLCBkLmx0cmVlLCBkLmR0cmVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXMgPSBUSU5GX0RBVEFfRVJST1I7XG4gICAgfVxuXG4gICAgaWYgKHJlcyAhPT0gVElORl9PSylcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBlcnJvcicpO1xuXG4gIH0gd2hpbGUgKCFiZmluYWwpO1xuXG4gIGlmIChkLmRlc3RMZW4gPCBkLmRlc3QubGVuZ3RoKSB7XG4gICAgaWYgKHR5cGVvZiBkLmRlc3Quc2xpY2UgPT09ICdmdW5jdGlvbicpXG4gICAgICByZXR1cm4gZC5kZXN0LnNsaWNlKDAsIGQuZGVzdExlbik7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGQuZGVzdC5zdWJhcnJheSgwLCBkLmRlc3RMZW4pO1xuICB9XG4gIFxuICByZXR1cm4gZC5kZXN0O1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLSBpbml0aWFsaXphdGlvbiAtLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiBidWlsZCBmaXhlZCBodWZmbWFuIHRyZWVzICovXG50aW5mX2J1aWxkX2ZpeGVkX3RyZWVzKHNsdHJlZSwgc2R0cmVlKTtcblxuLyogYnVpbGQgZXh0cmEgYml0cyBhbmQgYmFzZSB0YWJsZXMgKi9cbnRpbmZfYnVpbGRfYml0c19iYXNlKGxlbmd0aF9iaXRzLCBsZW5ndGhfYmFzZSwgNCwgMyk7XG50aW5mX2J1aWxkX2JpdHNfYmFzZShkaXN0X2JpdHMsIGRpc3RfYmFzZSwgMiwgMSk7XG5cbi8qIGZpeCBhIHNwZWNpYWwgY2FzZSAqL1xubGVuZ3RoX2JpdHNbMjhdID0gMDtcbmxlbmd0aF9iYXNlWzI4XSA9IDI1ODtcblxubW9kdWxlLmV4cG9ydHMgPSB0aW5mX3VuY29tcHJlc3M7XG4iLCAiY29uc3QgaXNCaWdFbmRpYW4gPSAobmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQzMkFycmF5KFsweDEyMzQ1Njc4XSkuYnVmZmVyKVswXSA9PT0gMHgxMik7XG5cbmNvbnN0IHN3YXAgPSAoYiwgbiwgbSkgPT4ge1xuICBsZXQgaSA9IGJbbl07XG4gIGJbbl0gPSBiW21dO1xuICBiW21dID0gaTtcbn07XG5cbmNvbnN0IHN3YXAzMiA9IGFycmF5ID0+IHtcbiAgY29uc3QgbGVuID0gYXJyYXkubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcChhcnJheSwgaSwgaSArIDMpO1xuICAgIHN3YXAoYXJyYXksIGkgKyAxLCBpICsgMik7XG4gIH1cbn07XG5cbmNvbnN0IHN3YXAzMkxFID0gYXJyYXkgPT4ge1xuICBpZiAoaXNCaWdFbmRpYW4pIHtcbiAgICBzd2FwMzIoYXJyYXkpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc3dhcDMyTEU6IHN3YXAzMkxFXG59O1xuIiwgImNvbnN0IGluZmxhdGUgPSByZXF1aXJlKCd0aW55LWluZmxhdGUnKTtcbmNvbnN0IHsgc3dhcDMyTEUgfSA9IHJlcXVpcmUoJy4vc3dhcCcpO1xuXG4vLyBTaGlmdCBzaXplIGZvciBnZXR0aW5nIHRoZSBpbmRleC0xIHRhYmxlIG9mZnNldC5cbmNvbnN0IFNISUZUXzEgPSA2ICsgNTtcblxuLy8gU2hpZnQgc2l6ZSBmb3IgZ2V0dGluZyB0aGUgaW5kZXgtMiB0YWJsZSBvZmZzZXQuXG5jb25zdCBTSElGVF8yID0gNTtcblxuLy8gRGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gc2hpZnQgc2l6ZXMsXG4vLyBmb3IgZ2V0dGluZyBhbiBpbmRleC0xIG9mZnNldCBmcm9tIGFuIGluZGV4LTIgb2Zmc2V0LiA2PTExLTVcbmNvbnN0IFNISUZUXzFfMiA9IFNISUZUXzEgLSBTSElGVF8yO1xuXG4vLyBOdW1iZXIgb2YgaW5kZXgtMSBlbnRyaWVzIGZvciB0aGUgQk1QLiAzMj0weDIwXG4vLyBUaGlzIHBhcnQgb2YgdGhlIGluZGV4LTEgdGFibGUgaXMgb21pdHRlZCBmcm9tIHRoZSBzZXJpYWxpemVkIGZvcm0uXG5jb25zdCBPTUlUVEVEX0JNUF9JTkRFWF8xX0xFTkdUSCA9IDB4MTAwMDAgPj4gU0hJRlRfMTtcblxuLy8gTnVtYmVyIG9mIGVudHJpZXMgaW4gYW4gaW5kZXgtMiBibG9jay4gNjQ9MHg0MFxuY29uc3QgSU5ERVhfMl9CTE9DS19MRU5HVEggPSAxIDw8IFNISUZUXzFfMjtcblxuLy8gTWFzayBmb3IgZ2V0dGluZyB0aGUgbG93ZXIgYml0cyBmb3IgdGhlIGluLWluZGV4LTItYmxvY2sgb2Zmc2V0LiAqL1xuY29uc3QgSU5ERVhfMl9NQVNLID0gSU5ERVhfMl9CTE9DS19MRU5HVEggLSAxO1xuXG4vLyBTaGlmdCBzaXplIGZvciBzaGlmdGluZyBsZWZ0IHRoZSBpbmRleCBhcnJheSB2YWx1ZXMuXG4vLyBJbmNyZWFzZXMgcG9zc2libGUgZGF0YSBzaXplIHdpdGggMTYtYml0IGluZGV4IHZhbHVlcyBhdCB0aGUgY29zdFxuLy8gb2YgY29tcGFjdGFiaWxpdHkuXG4vLyBUaGlzIHJlcXVpcmVzIGRhdGEgYmxvY2tzIHRvIGJlIGFsaWduZWQgYnkgREFUQV9HUkFOVUxBUklUWS5cbmNvbnN0IElOREVYX1NISUZUID0gMjtcblxuLy8gTnVtYmVyIG9mIGVudHJpZXMgaW4gYSBkYXRhIGJsb2NrLiAzMj0weDIwXG5jb25zdCBEQVRBX0JMT0NLX0xFTkdUSCA9IDEgPDwgU0hJRlRfMjtcblxuLy8gTWFzayBmb3IgZ2V0dGluZyB0aGUgbG93ZXIgYml0cyBmb3IgdGhlIGluLWRhdGEtYmxvY2sgb2Zmc2V0LlxuY29uc3QgREFUQV9NQVNLID0gREFUQV9CTE9DS19MRU5HVEggLSAxO1xuXG4vLyBUaGUgcGFydCBvZiB0aGUgaW5kZXgtMiB0YWJsZSBmb3IgVStEODAwLi5VK0RCRkYgc3RvcmVzIHZhbHVlcyBmb3Jcbi8vIGxlYWQgc3Vycm9nYXRlIGNvZGUgX3VuaXRzXyBub3QgY29kZSBfcG9pbnRzXy5cbi8vIFZhbHVlcyBmb3IgbGVhZCBzdXJyb2dhdGUgY29kZSBfcG9pbnRzXyBhcmUgaW5kZXhlZCB3aXRoIHRoaXMgcG9ydGlvbiBvZiB0aGUgdGFibGUuXG4vLyBMZW5ndGg9MzI9MHgyMD0weDQwMD4+U0hJRlRfMi4gKFRoZXJlIGFyZSAxMDI0PTB4NDAwIGxlYWQgc3Vycm9nYXRlcy4pXG5jb25zdCBMU0NQX0lOREVYXzJfT0ZGU0VUID0gMHgxMDAwMCA+PiBTSElGVF8yO1xuY29uc3QgTFNDUF9JTkRFWF8yX0xFTkdUSCA9IDB4NDAwID4+IFNISUZUXzI7XG5cbi8vIENvdW50IHRoZSBsZW5ndGhzIG9mIGJvdGggQk1QIHBpZWNlcy4gMjA4MD0weDgyMFxuY29uc3QgSU5ERVhfMl9CTVBfTEVOR1RIID0gTFNDUF9JTkRFWF8yX09GRlNFVCArIExTQ1BfSU5ERVhfMl9MRU5HVEg7XG5cbi8vIFRoZSAyLWJ5dGUgVVRGLTggdmVyc2lvbiBvZiB0aGUgaW5kZXgtMiB0YWJsZSBmb2xsb3dzIGF0IG9mZnNldCAyMDgwPTB4ODIwLlxuLy8gTGVuZ3RoIDMyPTB4MjAgZm9yIGxlYWQgYnl0ZXMgQzAuLkRGLCByZWdhcmRsZXNzIG9mIFNISUZUXzIuXG5jb25zdCBVVEY4XzJCX0lOREVYXzJfT0ZGU0VUID0gSU5ERVhfMl9CTVBfTEVOR1RIO1xuY29uc3QgVVRGOF8yQl9JTkRFWF8yX0xFTkdUSCA9IDB4ODAwID4+IDY7ICAvLyBVKzA4MDAgaXMgdGhlIGZpcnN0IGNvZGUgcG9pbnQgYWZ0ZXIgMi1ieXRlIFVURi04XG5cbi8vIFRoZSBpbmRleC0xIHRhYmxlLCBvbmx5IHVzZWQgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMsIGF0IG9mZnNldCAyMTEyPTB4ODQwLlxuLy8gVmFyaWFibGUgbGVuZ3RoLCBmb3IgY29kZSBwb2ludHMgdXAgdG8gaGlnaFN0YXJ0LCB3aGVyZSB0aGUgbGFzdCBzaW5nbGUtdmFsdWUgcmFuZ2Ugc3RhcnRzLlxuLy8gTWF4aW11bSBsZW5ndGggNTEyPTB4MjAwPTB4MTAwMDAwPj5TSElGVF8xLlxuLy8gKEZvciAweDEwMDAwMCBzdXBwbGVtZW50YXJ5IGNvZGUgcG9pbnRzIFUrMTAwMDAuLlUrMTBmZmZmLilcbi8vXG4vLyBUaGUgcGFydCBvZiB0aGUgaW5kZXgtMiB0YWJsZSBmb3Igc3VwcGxlbWVudGFyeSBjb2RlIHBvaW50cyBzdGFydHNcbi8vIGFmdGVyIHRoaXMgaW5kZXgtMSB0YWJsZS5cbi8vXG4vLyBCb3RoIHRoZSBpbmRleC0xIHRhYmxlIGFuZCB0aGUgZm9sbG93aW5nIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGVcbi8vIGFyZSBvbWl0dGVkIGNvbXBsZXRlbHkgaWYgdGhlcmUgaXMgb25seSBCTVAgZGF0YS5cbmNvbnN0IElOREVYXzFfT0ZGU0VUID0gVVRGOF8yQl9JTkRFWF8yX09GRlNFVCArIFVURjhfMkJfSU5ERVhfMl9MRU5HVEg7XG5cbi8vIFRoZSBhbGlnbm1lbnQgc2l6ZSBvZiBhIGRhdGEgYmxvY2suIEFsc28gdGhlIGdyYW51bGFyaXR5IGZvciBjb21wYWN0aW9uLlxuY29uc3QgREFUQV9HUkFOVUxBUklUWSA9IDEgPDwgSU5ERVhfU0hJRlQ7XG5cbmNsYXNzIFVuaWNvZGVUcmllIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIGNvbnN0IGlzQnVmZmVyID0gKHR5cGVvZiBkYXRhLnJlYWRVSW50MzJCRSA9PT0gJ2Z1bmN0aW9uJykgJiYgKHR5cGVvZiBkYXRhLnNsaWNlID09PSAnZnVuY3Rpb24nKTtcblxuICAgIGlmIChpc0J1ZmZlciB8fCBkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgLy8gcmVhZCBiaW5hcnkgZm9ybWF0XG4gICAgICBsZXQgdW5jb21wcmVzc2VkTGVuZ3RoO1xuICAgICAgaWYgKGlzQnVmZmVyKSB7XG4gICAgICAgIHRoaXMuaGlnaFN0YXJ0ID0gZGF0YS5yZWFkVUludDMyTEUoMCk7XG4gICAgICAgIHRoaXMuZXJyb3JWYWx1ZSA9IGRhdGEucmVhZFVJbnQzMkxFKDQpO1xuICAgICAgICB1bmNvbXByZXNzZWRMZW5ndGggPSBkYXRhLnJlYWRVSW50MzJMRSg4KTtcbiAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoMTIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlcik7XG4gICAgICAgIHRoaXMuaGlnaFN0YXJ0ID0gdmlldy5nZXRVaW50MzIoMCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZXJyb3JWYWx1ZSA9IHZpZXcuZ2V0VWludDMyKDQsIHRydWUpO1xuICAgICAgICB1bmNvbXByZXNzZWRMZW5ndGggPSB2aWV3LmdldFVpbnQzMig4LCB0cnVlKTtcbiAgICAgICAgZGF0YSA9IGRhdGEuc3ViYXJyYXkoMTIpO1xuICAgICAgfVxuXG4gICAgICAvLyBkb3VibGUgaW5mbGF0ZSB0aGUgYWN0dWFsIHRyaWUgZGF0YVxuICAgICAgZGF0YSA9IGluZmxhdGUoZGF0YSwgbmV3IFVpbnQ4QXJyYXkodW5jb21wcmVzc2VkTGVuZ3RoKSk7XG4gICAgICBkYXRhID0gaW5mbGF0ZShkYXRhLCBuZXcgVWludDhBcnJheSh1bmNvbXByZXNzZWRMZW5ndGgpKTtcblxuICAgICAgLy8gc3dhcCBieXRlcyBmcm9tIGxpdHRsZS1lbmRpYW5cbiAgICAgIHN3YXAzMkxFKGRhdGEpO1xuXG4gICAgICB0aGlzLmRhdGEgPSBuZXcgVWludDMyQXJyYXkoZGF0YS5idWZmZXIpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHByZS1wYXJzZWQgZGF0YVxuICAgICAgKHsgZGF0YTogdGhpcy5kYXRhLCBoaWdoU3RhcnQ6IHRoaXMuaGlnaFN0YXJ0LCBlcnJvclZhbHVlOiB0aGlzLmVycm9yVmFsdWUgfSA9IGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIGdldChjb2RlUG9pbnQpIHtcbiAgICBsZXQgaW5kZXg7XG4gICAgaWYgKChjb2RlUG9pbnQgPCAwKSB8fCAoY29kZVBvaW50ID4gMHgxMGZmZmYpKSB7XG4gICAgICByZXR1cm4gdGhpcy5lcnJvclZhbHVlO1xuICAgIH1cblxuICAgIGlmICgoY29kZVBvaW50IDwgMHhkODAwKSB8fCAoKGNvZGVQb2ludCA+IDB4ZGJmZikgJiYgKGNvZGVQb2ludCA8PSAweGZmZmYpKSkge1xuICAgICAgLy8gT3JkaW5hcnkgQk1QIGNvZGUgcG9pbnQsIGV4Y2x1ZGluZyBsZWFkaW5nIHN1cnJvZ2F0ZXMuXG4gICAgICAvLyBCTVAgdXNlcyBhIHNpbmdsZSBsZXZlbCBsb29rdXAuICBCTVAgaW5kZXggc3RhcnRzIGF0IG9mZnNldCAwIGluIHRoZSBpbmRleC5cbiAgICAgIC8vIGRhdGEgaXMgc3RvcmVkIGluIHRoZSBpbmRleCBhcnJheSBpdHNlbGYuXG4gICAgICBpbmRleCA9ICh0aGlzLmRhdGFbY29kZVBvaW50ID4+IFNISUZUXzJdIDw8IElOREVYX1NISUZUKSArIChjb2RlUG9pbnQgJiBEQVRBX01BU0spO1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpbmRleF07XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA8PSAweGZmZmYpIHtcbiAgICAgIC8vIExlYWQgU3Vycm9nYXRlIENvZGUgUG9pbnQuICBBIFNlcGFyYXRlIGluZGV4IHNlY3Rpb24gaXMgc3RvcmVkIGZvclxuICAgICAgLy8gbGVhZCBzdXJyb2dhdGUgY29kZSB1bml0cyBhbmQgY29kZSBwb2ludHMuXG4gICAgICAvLyAgIFRoZSBtYWluIGluZGV4IGhhcyB0aGUgY29kZSB1bml0IGRhdGEuXG4gICAgICAvLyAgIEZvciB0aGlzIGZ1bmN0aW9uLCB3ZSBuZWVkIHRoZSBjb2RlIHBvaW50IGRhdGEuXG4gICAgICBpbmRleCA9ICh0aGlzLmRhdGFbTFNDUF9JTkRFWF8yX09GRlNFVCArICgoY29kZVBvaW50IC0gMHhkODAwKSA+PiBTSElGVF8yKV0gPDwgSU5ERVhfU0hJRlQpICsgKGNvZGVQb2ludCAmIERBVEFfTUFTSyk7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhW2luZGV4XTtcbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50IDwgdGhpcy5oaWdoU3RhcnQpIHtcbiAgICAgIC8vIFN1cHBsZW1lbnRhbCBjb2RlIHBvaW50LCB1c2UgdHdvLWxldmVsIGxvb2t1cC5cbiAgICAgIGluZGV4ID0gdGhpcy5kYXRhWyhJTkRFWF8xX09GRlNFVCAtIE9NSVRURURfQk1QX0lOREVYXzFfTEVOR1RIKSArIChjb2RlUG9pbnQgPj4gU0hJRlRfMSldO1xuICAgICAgaW5kZXggPSB0aGlzLmRhdGFbaW5kZXggKyAoKGNvZGVQb2ludCA+PiBTSElGVF8yKSAmIElOREVYXzJfTUFTSyldO1xuICAgICAgaW5kZXggPSAoaW5kZXggPDwgSU5ERVhfU0hJRlQpICsgKGNvZGVQb2ludCAmIERBVEFfTUFTSyk7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhW2luZGV4XTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhW3RoaXMuZGF0YS5sZW5ndGggLSBEQVRBX0dSQU5VTEFSSVRZXTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFVuaWNvZGVUcmllOyIsICIvL1xuLy8gVEhJUyBGSUxFIElTIEFVVE9NQVRJQ0FMTFkgR0VORVJBVEVEISBETyBOT1QgRURJVCBCWSBIQU5EIVxuLy9cbjtcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KClcbiAgICAgICAgOiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWRcbiAgICAgICAgICAgID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAgICAgICAgIC8vIGNmLiBodHRwczovL2dpdGh1Yi5jb20vZGFua29nYWkvanMtYmFzZTY0L2lzc3Vlcy8xMTlcbiAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgdmVyc2lvbiBmb3Igbm9Db25mbGljdCgpXG4gICAgICAgICAgICAgICAgdmFyIF9CYXNlNjQgPSBnbG9iYWwuQmFzZTY0O1xuICAgICAgICAgICAgICAgIHZhciBnQmFzZTY0ID0gZmFjdG9yeSgpO1xuICAgICAgICAgICAgICAgIGdCYXNlNjQubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLkJhc2U2NCA9IF9CYXNlNjQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnQmFzZTY0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGdsb2JhbC5NZXRlb3IpIHsgLy8gTWV0ZW9yLmpzXG4gICAgICAgICAgICAgICAgICAgIEJhc2U2NCA9IGdCYXNlNjQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdsb2JhbC5CYXNlNjQgPSBnQmFzZTY0O1xuICAgICAgICAgICAgfSkoKTtcbn0oKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGZcbiAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93XG4gICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxcbiAgICAgICAgICAgIDogdGhpcyksIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgLyoqXG4gICAgICogIGJhc2U2NC50c1xuICAgICAqXG4gICAgICogIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgMy1DbGF1c2UgTGljZW5zZS5cbiAgICAgKiAgICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvQlNELTMtQ2xhdXNlXG4gICAgICpcbiAgICAgKiAgUmVmZXJlbmNlczpcbiAgICAgKiAgICBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jhc2U2NFxuICAgICAqXG4gICAgICogQGF1dGhvciBEYW4gS29nYWkgKGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaSlcbiAgICAgKi9cbiAgICB2YXIgdmVyc2lvbiA9ICczLjcuNyc7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGxvd2VyY2FzZSBgdmVyc2lvbmAuXG4gICAgICovXG4gICAgdmFyIFZFUlNJT04gPSB2ZXJzaW9uO1xuICAgIHZhciBfaGFzQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJztcbiAgICB2YXIgX1REID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAnZnVuY3Rpb24nID8gbmV3IFRleHREZWNvZGVyKCkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIF9URSA9IHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBUZXh0RW5jb2RlcigpIDogdW5kZWZpbmVkO1xuICAgIHZhciBiNjRjaCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG4gICAgdmFyIGI2NGNocyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGI2NGNoKTtcbiAgICB2YXIgYjY0dGFiID0gKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHZhciB0YWIgPSB7fTtcbiAgICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uIChjLCBpKSB7IHJldHVybiB0YWJbY10gPSBpOyB9KTtcbiAgICAgICAgcmV0dXJuIHRhYjtcbiAgICB9KShiNjRjaHMpO1xuICAgIHZhciBiNjRyZSA9IC9eKD86W0EtWmEtelxcZCtcXC9dezR9KSo/KD86W0EtWmEtelxcZCtcXC9dezJ9KD86PT0pP3xbQS1aYS16XFxkK1xcL117M309Pyk/JC87XG4gICAgdmFyIF9mcm9tQ0MgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmJpbmQoU3RyaW5nKTtcbiAgICB2YXIgX1U4QWZyb20gPSB0eXBlb2YgVWludDhBcnJheS5mcm9tID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gVWludDhBcnJheS5mcm9tLmJpbmQoVWludDhBcnJheSlcbiAgICAgICAgOiBmdW5jdGlvbiAoaXQpIHsgcmV0dXJuIG5ldyBVaW50OEFycmF5KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGl0LCAwKSk7IH07XG4gICAgdmFyIF9ta1VyaVNhZmUgPSBmdW5jdGlvbiAoc3JjKSB7IHJldHVybiBzcmNcbiAgICAgICAgLnJlcGxhY2UoLz0vZywgJycpLnJlcGxhY2UoL1srXFwvXS9nLCBmdW5jdGlvbiAobTApIHsgcmV0dXJuIG0wID09ICcrJyA/ICctJyA6ICdfJzsgfSk7IH07XG4gICAgdmFyIF90aWR5QjY0ID0gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9dL2csICcnKTsgfTtcbiAgICAvKipcbiAgICAgKiBwb2x5ZmlsbCB2ZXJzaW9uIG9mIGBidG9hYFxuICAgICAqL1xuICAgIHZhciBidG9hUG9seWZpbGwgPSBmdW5jdGlvbiAoYmluKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb2x5ZmlsbGVkJyk7XG4gICAgICAgIHZhciB1MzIsIGMwLCBjMSwgYzIsIGFzYyA9ICcnO1xuICAgICAgICB2YXIgcGFkID0gYmluLmxlbmd0aCAlIDM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmluLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGlmICgoYzAgPSBiaW4uY2hhckNvZGVBdChpKyspKSA+IDI1NSB8fFxuICAgICAgICAgICAgICAgIChjMSA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1IHx8XG4gICAgICAgICAgICAgICAgKGMyID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBjaGFyYWN0ZXIgZm91bmQnKTtcbiAgICAgICAgICAgIHUzMiA9IChjMCA8PCAxNikgfCAoYzEgPDwgOCkgfCBjMjtcbiAgICAgICAgICAgIGFzYyArPSBiNjRjaHNbdTMyID4+IDE4ICYgNjNdXG4gICAgICAgICAgICAgICAgKyBiNjRjaHNbdTMyID4+IDEyICYgNjNdXG4gICAgICAgICAgICAgICAgKyBiNjRjaHNbdTMyID4+IDYgJiA2M11cbiAgICAgICAgICAgICAgICArIGI2NGNoc1t1MzIgJiA2M107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhZCA/IGFzYy5zbGljZSgwLCBwYWQgLSAzKSArIFwiPT09XCIuc3Vic3RyaW5nKHBhZCkgOiBhc2M7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBkb2VzIHdoYXQgYHdpbmRvdy5idG9hYCBvZiB3ZWIgYnJvd3NlcnMgZG8uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGJpbiBiaW5hcnkgc3RyaW5nXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0LWVuY29kZWQgc3RyaW5nXG4gICAgICovXG4gICAgdmFyIF9idG9hID0gdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicgPyBmdW5jdGlvbiAoYmluKSB7IHJldHVybiBidG9hKGJpbik7IH1cbiAgICAgICAgOiBfaGFzQnVmZmVyID8gZnVuY3Rpb24gKGJpbikgeyByZXR1cm4gQnVmZmVyLmZyb20oYmluLCAnYmluYXJ5JykudG9TdHJpbmcoJ2Jhc2U2NCcpOyB9XG4gICAgICAgICAgICA6IGJ0b2FQb2x5ZmlsbDtcbiAgICB2YXIgX2Zyb21VaW50OEFycmF5ID0gX2hhc0J1ZmZlclxuICAgICAgICA/IGZ1bmN0aW9uICh1OGEpIHsgcmV0dXJuIEJ1ZmZlci5mcm9tKHU4YSkudG9TdHJpbmcoJ2Jhc2U2NCcpOyB9XG4gICAgICAgIDogZnVuY3Rpb24gKHU4YSkge1xuICAgICAgICAgICAgLy8gY2YuIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyNzEwMDAxL2hvdy10by1jb252ZXJ0LXVpbnQ4LWFycmF5LXRvLWJhc2U2NC1lbmNvZGVkLXN0cmluZy8xMjcxMzMyNiMxMjcxMzMyNlxuICAgICAgICAgICAgdmFyIG1heGFyZ3MgPSAweDEwMDA7XG4gICAgICAgICAgICB2YXIgc3RycyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB1OGEubGVuZ3RoOyBpIDwgbDsgaSArPSBtYXhhcmdzKSB7XG4gICAgICAgICAgICAgICAgc3Rycy5wdXNoKF9mcm9tQ0MuYXBwbHkobnVsbCwgdThhLnN1YmFycmF5KGksIGkgKyBtYXhhcmdzKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9idG9hKHN0cnMuam9pbignJykpO1xuICAgICAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGEgVWludDhBcnJheSB0byBhIEJhc2U2NCBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbdXJsc2FmZV0gVVJMLWFuZC1maWxlbmFtZS1zYWZlIGEgbGEgUkZDNDY0OCBcdTAwQTc1XG4gICAgICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0IHN0cmluZ1xuICAgICAqL1xuICAgIHZhciBmcm9tVWludDhBcnJheSA9IGZ1bmN0aW9uICh1OGEsIHVybHNhZmUpIHtcbiAgICAgICAgaWYgKHVybHNhZmUgPT09IHZvaWQgMCkgeyB1cmxzYWZlID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHVybHNhZmUgPyBfbWtVcmlTYWZlKF9mcm9tVWludDhBcnJheSh1OGEpKSA6IF9mcm9tVWludDhBcnJheSh1OGEpO1xuICAgIH07XG4gICAgLy8gVGhpcyB0cmljayBpcyBmb3VuZCBicm9rZW4gaHR0cHM6Ly9naXRodWIuY29tL2RhbmtvZ2FpL2pzLWJhc2U2NC9pc3N1ZXMvMTMwXG4gICAgLy8gY29uc3QgdXRvYiA9IChzcmM6IHN0cmluZykgPT4gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHNyYykpO1xuICAgIC8vIHJldmVydGluZyBnb29kIG9sZCBmYXRpb25lZCByZWdleHBcbiAgICB2YXIgY2JfdXRvYiA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGlmIChjLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHZhciBjYyA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIHJldHVybiBjYyA8IDB4ODAgPyBjXG4gICAgICAgICAgICAgICAgOiBjYyA8IDB4ODAwID8gKF9mcm9tQ0MoMHhjMCB8IChjYyA+Pj4gNikpXG4gICAgICAgICAgICAgICAgICAgICsgX2Zyb21DQygweDgwIHwgKGNjICYgMHgzZikpKVxuICAgICAgICAgICAgICAgICAgICA6IChfZnJvbUNDKDB4ZTAgfCAoKGNjID4+PiAxMikgJiAweDBmKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICsgX2Zyb21DQygweDgwIHwgKChjYyA+Pj4gNikgJiAweDNmKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICsgX2Zyb21DQygweDgwIHwgKGNjICYgMHgzZikpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjYyA9IDB4MTAwMDBcbiAgICAgICAgICAgICAgICArIChjLmNoYXJDb2RlQXQoMCkgLSAweEQ4MDApICogMHg0MDBcbiAgICAgICAgICAgICAgICArIChjLmNoYXJDb2RlQXQoMSkgLSAweERDMDApO1xuICAgICAgICAgICAgcmV0dXJuIChfZnJvbUNDKDB4ZjAgfCAoKGNjID4+PiAxOCkgJiAweDA3KSlcbiAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8ICgoY2MgPj4+IDEyKSAmIDB4M2YpKVxuICAgICAgICAgICAgICAgICsgX2Zyb21DQygweDgwIHwgKChjYyA+Pj4gNikgJiAweDNmKSlcbiAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8IChjYyAmIDB4M2YpKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZV91dG9iID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRkZdfFteXFx4MDAtXFx4N0ZdL2c7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc2hvdWxkIGhhdmUgYmVlbiBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFVURi04IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFVURi0xNiBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7IHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7IH07XG4gICAgLy9cbiAgICB2YXIgX2VuY29kZSA9IF9oYXNCdWZmZXJcbiAgICAgICAgPyBmdW5jdGlvbiAocykgeyByZXR1cm4gQnVmZmVyLmZyb20ocywgJ3V0ZjgnKS50b1N0cmluZygnYmFzZTY0Jyk7IH1cbiAgICAgICAgOiBfVEVcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF9mcm9tVWludDhBcnJheShfVEUuZW5jb2RlKHMpKTsgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAocykgeyByZXR1cm4gX2J0b2EodXRvYihzKSk7IH07XG4gICAgLyoqXG4gICAgICogY29udmVydHMgYSBVVEYtOC1lbmNvZGVkIHN0cmluZyB0byBhIEJhc2U2NCBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbdXJsc2FmZV0gaWYgYHRydWVgIG1ha2UgdGhlIHJlc3VsdCBVUkwtc2FmZVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NCBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKHNyYywgdXJsc2FmZSkge1xuICAgICAgICBpZiAodXJsc2FmZSA9PT0gdm9pZCAwKSB7IHVybHNhZmUgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdXJsc2FmZVxuICAgICAgICAgICAgPyBfbWtVcmlTYWZlKF9lbmNvZGUoc3JjKSlcbiAgICAgICAgICAgIDogX2VuY29kZShzcmMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogY29udmVydHMgYSBVVEYtOC1lbmNvZGVkIHN0cmluZyB0byBVUkwtc2FmZSBCYXNlNjQgUkZDNDY0OCBcdTAwQTc1LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NCBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgZW5jb2RlVVJJID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gZW5jb2RlKHNyYywgdHJ1ZSk7IH07XG4gICAgLy8gVGhpcyB0cmljayBpcyBmb3VuZCBicm9rZW4gaHR0cHM6Ly9naXRodWIuY29tL2RhbmtvZ2FpL2pzLWJhc2U2NC9pc3N1ZXMvMTMwXG4gICAgLy8gY29uc3QgYnRvdSA9IChzcmM6IHN0cmluZykgPT4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShzcmMpKTtcbiAgICAvLyByZXZlcnRpbmcgZ29vZCBvbGQgZmF0aW9uZWQgcmVnZXhwXG4gICAgdmFyIHJlX2J0b3UgPSAvW1xceEMwLVxceERGXVtcXHg4MC1cXHhCRl18W1xceEUwLVxceEVGXVtcXHg4MC1cXHhCRl17Mn18W1xceEYwLVxceEY3XVtcXHg4MC1cXHhCRl17M30vZztcbiAgICB2YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG4gICAgICAgIHN3aXRjaCAoY2NjYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICB2YXIgY3AgPSAoKDB4MDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4KVxuICAgICAgICAgICAgICAgICAgICB8ICgoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIpXG4gICAgICAgICAgICAgICAgICAgIHwgKCgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDIpKSA8PCA2KVxuICAgICAgICAgICAgICAgICAgICB8ICgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDMpKSwgb2Zmc2V0ID0gY3AgLSAweDEwMDAwO1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2Zyb21DQygob2Zmc2V0ID4+PiAxMCkgKyAweEQ4MDApXG4gICAgICAgICAgICAgICAgICAgICsgX2Zyb21DQygob2Zmc2V0ICYgMHgzRkYpICsgMHhEQzAwKSk7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mcm9tQ0MoKCgweDBmICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMilcbiAgICAgICAgICAgICAgICAgICAgfCAoKDB4M2YgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYpXG4gICAgICAgICAgICAgICAgICAgIHwgKDB4M2YgJiBjY2NjLmNoYXJDb2RlQXQoMikpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mcm9tQ0MoKCgweDFmICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2KVxuICAgICAgICAgICAgICAgICAgICB8ICgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDEpKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNob3VsZCBoYXZlIGJlZW4gaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBVVEYtMTYgc3RyaW5nXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVVRGLTggc3RyaW5nXG4gICAgICovXG4gICAgdmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikgeyByZXR1cm4gYi5yZXBsYWNlKHJlX2J0b3UsIGNiX2J0b3UpOyB9O1xuICAgIC8qKlxuICAgICAqIHBvbHlmaWxsIHZlcnNpb24gb2YgYGF0b2JgXG4gICAgICovXG4gICAgdmFyIGF0b2JQb2x5ZmlsbCA9IGZ1bmN0aW9uIChhc2MpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BvbHlmaWxsZWQnKTtcbiAgICAgICAgYXNjID0gYXNjLnJlcGxhY2UoL1xccysvZywgJycpO1xuICAgICAgICBpZiAoIWI2NHJlLnRlc3QoYXNjKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21hbGZvcm1lZCBiYXNlNjQuJyk7XG4gICAgICAgIGFzYyArPSAnPT0nLnNsaWNlKDIgLSAoYXNjLmxlbmd0aCAmIDMpKTtcbiAgICAgICAgdmFyIHUyNCwgYmluID0gJycsIHIxLCByMjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhc2MubGVuZ3RoOykge1xuICAgICAgICAgICAgdTI0ID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0gPDwgMThcbiAgICAgICAgICAgICAgICB8IGI2NHRhYlthc2MuY2hhckF0KGkrKyldIDw8IDEyXG4gICAgICAgICAgICAgICAgfCAocjEgPSBiNjR0YWJbYXNjLmNoYXJBdChpKyspXSkgPDwgNlxuICAgICAgICAgICAgICAgIHwgKHIyID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pO1xuICAgICAgICAgICAgYmluICs9IHIxID09PSA2NCA/IF9mcm9tQ0ModTI0ID4+IDE2ICYgMjU1KVxuICAgICAgICAgICAgICAgIDogcjIgPT09IDY0ID8gX2Zyb21DQyh1MjQgPj4gMTYgJiAyNTUsIHUyNCA+PiA4ICYgMjU1KVxuICAgICAgICAgICAgICAgICAgICA6IF9mcm9tQ0ModTI0ID4+IDE2ICYgMjU1LCB1MjQgPj4gOCAmIDI1NSwgdTI0ICYgMjU1KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmluO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogZG9lcyB3aGF0IGB3aW5kb3cuYXRvYmAgb2Ygd2ViIGJyb3dzZXJzIGRvLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhc2MgQmFzZTY0LWVuY29kZWQgc3RyaW5nXG4gICAgICogQHJldHVybnMge3N0cmluZ30gYmluYXJ5IHN0cmluZ1xuICAgICAqL1xuICAgIHZhciBfYXRvYiA9IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nID8gZnVuY3Rpb24gKGFzYykgeyByZXR1cm4gYXRvYihfdGlkeUI2NChhc2MpKTsgfVxuICAgICAgICA6IF9oYXNCdWZmZXIgPyBmdW5jdGlvbiAoYXNjKSB7IHJldHVybiBCdWZmZXIuZnJvbShhc2MsICdiYXNlNjQnKS50b1N0cmluZygnYmluYXJ5Jyk7IH1cbiAgICAgICAgICAgIDogYXRvYlBvbHlmaWxsO1xuICAgIC8vXG4gICAgdmFyIF90b1VpbnQ4QXJyYXkgPSBfaGFzQnVmZmVyXG4gICAgICAgID8gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIF9VOEFmcm9tKEJ1ZmZlci5mcm9tKGEsICdiYXNlNjQnKSk7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gX1U4QWZyb20oX2F0b2IoYSkuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5jaGFyQ29kZUF0KDApOyB9KSk7IH07XG4gICAgLyoqXG4gICAgICogY29udmVydHMgYSBCYXNlNjQgc3RyaW5nIHRvIGEgVWludDhBcnJheS5cbiAgICAgKi9cbiAgICB2YXIgdG9VaW50OEFycmF5ID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIF90b1VpbnQ4QXJyYXkoX3VuVVJJKGEpKTsgfTtcbiAgICAvL1xuICAgIHZhciBfZGVjb2RlID0gX2hhc0J1ZmZlclxuICAgICAgICA/IGZ1bmN0aW9uIChhKSB7IHJldHVybiBCdWZmZXIuZnJvbShhLCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0ZjgnKTsgfVxuICAgICAgICA6IF9URFxuICAgICAgICAgICAgPyBmdW5jdGlvbiAoYSkgeyByZXR1cm4gX1RELmRlY29kZShfdG9VaW50OEFycmF5KGEpKTsgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYnRvdShfYXRvYihhKSk7IH07XG4gICAgdmFyIF91blVSSSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBfdGlkeUI2NChhLnJlcGxhY2UoL1stX10vZywgZnVuY3Rpb24gKG0wKSB7IHJldHVybiBtMCA9PSAnLScgPyAnKycgOiAnLyc7IH0pKTsgfTtcbiAgICAvKipcbiAgICAgKiBjb252ZXJ0cyBhIEJhc2U2NCBzdHJpbmcgdG8gYSBVVEYtOCBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNyYyBCYXNlNjQgc3RyaW5nLiAgQm90aCBub3JtYWwgYW5kIFVSTC1zYWZlIGFyZSBzdXBwb3J0ZWRcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBVVEYtOCBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgZGVjb2RlID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gX2RlY29kZShfdW5VUkkoc3JjKSk7IH07XG4gICAgLyoqXG4gICAgICogY2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHZhbGlkIEJhc2U2NCBzdHJpbmdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3JjIGEgdmFsdWUgdG8gY2hlY2tcbiAgICAgICovXG4gICAgdmFyIGlzVmFsaWQgPSBmdW5jdGlvbiAoc3JjKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIHMgPSBzcmMucmVwbGFjZSgvXFxzKy9nLCAnJykucmVwbGFjZSgvPXswLDJ9JC8sICcnKTtcbiAgICAgICAgcmV0dXJuICEvW15cXHMwLTlhLXpBLVpcXCsvXS8udGVzdChzKSB8fCAhL1teXFxzMC05YS16QS1aXFwtX10vLnRlc3Qocyk7XG4gICAgfTtcbiAgICAvL1xuICAgIHZhciBfbm9FbnVtID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2LCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogZXh0ZW5kIFN0cmluZy5wcm90b3R5cGUgd2l0aCByZWxldmFudCBtZXRob2RzXG4gICAgICovXG4gICAgdmFyIGV4dGVuZFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hZGQgPSBmdW5jdGlvbiAobmFtZSwgYm9keSkgeyByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIG5hbWUsIF9ub0VudW0oYm9keSkpOyB9O1xuICAgICAgICBfYWRkKCdmcm9tQmFzZTY0JywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVjb2RlKHRoaXMpOyB9KTtcbiAgICAgICAgX2FkZCgndG9CYXNlNjQnLCBmdW5jdGlvbiAodXJsc2FmZSkgeyByZXR1cm4gZW5jb2RlKHRoaXMsIHVybHNhZmUpOyB9KTtcbiAgICAgICAgX2FkZCgndG9CYXNlNjRVUkknLCBmdW5jdGlvbiAoKSB7IHJldHVybiBlbmNvZGUodGhpcywgdHJ1ZSk7IH0pO1xuICAgICAgICBfYWRkKCd0b0Jhc2U2NFVSTCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVuY29kZSh0aGlzLCB0cnVlKTsgfSk7XG4gICAgICAgIF9hZGQoJ3RvVWludDhBcnJheScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRvVWludDhBcnJheSh0aGlzKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBleHRlbmQgVWludDhBcnJheS5wcm90b3R5cGUgd2l0aCByZWxldmFudCBtZXRob2RzXG4gICAgICovXG4gICAgdmFyIGV4dGVuZFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYWRkID0gZnVuY3Rpb24gKG5hbWUsIGJvZHkpIHsgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVaW50OEFycmF5LnByb3RvdHlwZSwgbmFtZSwgX25vRW51bShib2R5KSk7IH07XG4gICAgICAgIF9hZGQoJ3RvQmFzZTY0JywgZnVuY3Rpb24gKHVybHNhZmUpIHsgcmV0dXJuIGZyb21VaW50OEFycmF5KHRoaXMsIHVybHNhZmUpOyB9KTtcbiAgICAgICAgX2FkZCgndG9CYXNlNjRVUkknLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmcm9tVWludDhBcnJheSh0aGlzLCB0cnVlKTsgfSk7XG4gICAgICAgIF9hZGQoJ3RvQmFzZTY0VVJMJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJvbVVpbnQ4QXJyYXkodGhpcywgdHJ1ZSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogZXh0ZW5kIEJ1aWx0aW4gcHJvdG90eXBlcyB3aXRoIHJlbGV2YW50IG1ldGhvZHNcbiAgICAgKi9cbiAgICB2YXIgZXh0ZW5kQnVpbHRpbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV4dGVuZFN0cmluZygpO1xuICAgICAgICBleHRlbmRVaW50OEFycmF5KCk7XG4gICAgfTtcbiAgICB2YXIgZ0Jhc2U2NCA9IHtcbiAgICAgICAgdmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgVkVSU0lPTjogVkVSU0lPTixcbiAgICAgICAgYXRvYjogX2F0b2IsXG4gICAgICAgIGF0b2JQb2x5ZmlsbDogYXRvYlBvbHlmaWxsLFxuICAgICAgICBidG9hOiBfYnRvYSxcbiAgICAgICAgYnRvYVBvbHlmaWxsOiBidG9hUG9seWZpbGwsXG4gICAgICAgIGZyb21CYXNlNjQ6IGRlY29kZSxcbiAgICAgICAgdG9CYXNlNjQ6IGVuY29kZSxcbiAgICAgICAgZW5jb2RlOiBlbmNvZGUsXG4gICAgICAgIGVuY29kZVVSSTogZW5jb2RlVVJJLFxuICAgICAgICBlbmNvZGVVUkw6IGVuY29kZVVSSSxcbiAgICAgICAgdXRvYjogdXRvYixcbiAgICAgICAgYnRvdTogYnRvdSxcbiAgICAgICAgZGVjb2RlOiBkZWNvZGUsXG4gICAgICAgIGlzVmFsaWQ6IGlzVmFsaWQsXG4gICAgICAgIGZyb21VaW50OEFycmF5OiBmcm9tVWludDhBcnJheSxcbiAgICAgICAgdG9VaW50OEFycmF5OiB0b1VpbnQ4QXJyYXksXG4gICAgICAgIGV4dGVuZFN0cmluZzogZXh0ZW5kU3RyaW5nLFxuICAgICAgICBleHRlbmRVaW50OEFycmF5OiBleHRlbmRVaW50OEFycmF5LFxuICAgICAgICBleHRlbmRCdWlsdGluczogZXh0ZW5kQnVpbHRpbnNcbiAgICB9O1xuICAgIC8vXG4gICAgLy8gZXhwb3J0IEJhc2U2NCB0byB0aGUgbmFtZXNwYWNlXG4gICAgLy9cbiAgICAvLyBFUzUgaXMgeWV0IHRvIGhhdmUgT2JqZWN0LmFzc2lnbigpIHRoYXQgbWF5IG1ha2UgdHJhbnNwaWxlcnMgdW5oYXBweS5cbiAgICAvLyBnQmFzZTY0LkJhc2U2NCA9IE9iamVjdC5hc3NpZ24oe30sIGdCYXNlNjQpO1xuICAgIGdCYXNlNjQuQmFzZTY0ID0ge307XG4gICAgT2JqZWN0LmtleXMoZ0Jhc2U2NCkuZm9yRWFjaChmdW5jdGlvbiAoaykgeyByZXR1cm4gZ0Jhc2U2NC5CYXNlNjRba10gPSBnQmFzZTY0W2tdOyB9KTtcbiAgICByZXR1cm4gZ0Jhc2U2NDtcbn0pKTtcbiIsICJjb25zdCB0eXBlcyA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgdHlwZVRyaWVEYXRhID0gcmVxdWlyZShcIi4vdHlwZVRyaWUuanNvblwiKS5kYXRhO1xuY29uc3QgZXh0UGljdERhdGEgPSByZXF1aXJlKFwiLi9leHRQaWN0Lmpzb25cIikuZGF0YTtcbmNvbnN0IGluQ0JEYXRhID0gcmVxdWlyZShcIi4vaW5DQi5qc29uXCIpLmRhdGE7XG5cbmNvbnN0IFVuaWNvZGVUcmllID0gcmVxdWlyZShcInVuaWNvZGUtdHJpZVwiKTtcbmNvbnN0IEJhc2U2NCA9IHJlcXVpcmUoXCJqcy1iYXNlNjRcIikuQmFzZTY0O1xuXG5jb25zdCB0eXBlVHJpZSA9IG5ldyBVbmljb2RlVHJpZShCYXNlNjQudG9VaW50OEFycmF5KHR5cGVUcmllRGF0YSkpO1xuY29uc3QgZXh0UGljdCA9IG5ldyBVbmljb2RlVHJpZShCYXNlNjQudG9VaW50OEFycmF5KGV4dFBpY3REYXRhKSk7XG5jb25zdCBpbkNCID0gbmV3IFVuaWNvZGVUcmllKEJhc2U2NC50b1VpbnQ4QXJyYXkoaW5DQkRhdGEpKTtcblxuZnVuY3Rpb24gaXModHlwZSwgYml0KSB7XG4gIHJldHVybiAodHlwZSAmIGJpdCkgIT09IDA7XG59XG5cbmZ1bmN0aW9uIG5leHRHcmFwaGVtZUNsdXN0ZXJTaXplKHMsIHRzLCBzdGFydCkge1xuICBjb25zdCBMID0gdHMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSArIDEgPCBMOyBpKyspIHtcbiAgICBjb25zdCBjdXJyID0gdHNbaSArIDBdO1xuICAgIGNvbnN0IG5leHQgPSB0c1tpICsgMV07XG5cbiAgICAvLyBHQjljOiBcXHB7SW5DQj1Db25zb25hbnR9IFsgXFxwe0luQ0I9RXh0ZW5kfSBcXHB7SW5DQj1MaW5rZXJ9IF0qIFxccHtJbkNCPUxpbmtlcn0gWyBcXHB7SW5DQj1FeHRlbmR9IFxccHtJbkNCPUxpbmtlcn0gXSogXHUwMEQ3IFxccHtJbkNCPUNvbnNvbmFudH1cbiAgICBzd2l0Y2ggKHMuZ2I5Yykge1xuICAgIGNhc2UgMDpcbiAgICAgIGlmIChpcyhjdXJyLCB0eXBlcy5JbkNCX0NvbnNvbmFudCkpIHMuZ2I5YyA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuSW5DQl9FeHRlbmQpKSBzLmdiOWMgPSAxO1xuICAgICAgZWxzZSBpZiAoaXMoY3VyciwgdHlwZXMuSW5DQl9MaW5rZXIpKSBzLmdiOWMgPSAyO1xuICAgICAgZWxzZSBzLmdiOWMgPSBpcyhjdXJyLCB0eXBlcy5JbkNCX0NvbnNvbmFudCkgPyAxIDogMDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGlmIChpcyhjdXJyLCB0eXBlcy5JbkNCX0V4dGVuZCB8IHR5cGVzLkluQ0JfTGlua2VyKSkgcy5nYjljID0gMjtcbiAgICAgIGVsc2Ugcy5nYjljID0gaXMoY3VyciwgdHlwZXMuSW5DQl9Db25zb25hbnQpID8gMSA6IDA7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBHQjExOiBcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfSBFeHRlbmQqIFpXSiB4IFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9XG4gICAgc3dpdGNoIChzLmdiMTEpIHtcbiAgICBjYXNlIDA6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuRXh0ZW5kZWRfUGljdG9ncmFwaGljKSkgcy5nYjExID0gMTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIGlmIChpcyhjdXJyLCB0eXBlcy5FeHRlbmQpKSBzLmdiMTEgPSAxO1xuICAgICAgZWxzZSBpZiAoaXMoY3VyciwgdHlwZXMuWldKKSkgcy5nYjExID0gMjtcbiAgICAgIGVsc2Ugcy5nYjExID0gaXMoY3VyciwgdHlwZXMuRXh0ZW5kZWRfUGljdG9ncmFwaGljKSA/IDEgOiAwO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgcy5nYjExID0gaXMoY3VyciwgdHlwZXMuRXh0ZW5kZWRfUGljdG9ncmFwaGljKSA/IDEgOiAwO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gR0IxMjogc290IChSSSBSSSkqIFJJIFx1MDBENyBSSVxuICAgIHN3aXRjaCAocy5nYjEyKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKGlzKGN1cnIsIHR5cGVzLlJlZ2lvbmFsX0luZGljYXRvcikpIHMuZ2IxMiA9IDE7XG4gICAgICBlbHNlIHMuZ2IxMiA9IC0xO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgaWYgKGlzKGN1cnIsIHR5cGVzLlJlZ2lvbmFsX0luZGljYXRvcikpIHMuZ2IxMiA9IDA7XG4gICAgICBlbHNlIHMuZ2IxMiA9IC0xO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gR0IxMzogW15SSV0gKFJJIFJJKSogUkkgXHUwMEQ3IFJJXG4gICAgc3dpdGNoIChzLmdiMTMpIHtcbiAgICBjYXNlIDA6XG4gICAgICBpZiAoIWlzKGN1cnIsIHR5cGVzLlJlZ2lvbmFsX0luZGljYXRvcikpIHMuZ2IxMyA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuUmVnaW9uYWxfSW5kaWNhdG9yKSkgcy5nYjEzID0gMjtcbiAgICAgIGVsc2Ugcy5nYjEzID0gMTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHMuZ2IxMyA9IDE7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBHQjM6IENSIHggTEZcbiAgICBpZiAoaXMoY3VyciwgdHlwZXMuQ1IpICYmIGlzKG5leHQsIHR5cGVzLkxGKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCNDogKENvbnRyb2wgfCBDUiB8IExGKSBcdTAwRjdcbiAgICBpZiAoaXMoY3VyciwgdHlwZXMuQ29udHJvbCB8IHR5cGVzLkNSIHwgdHlwZXMuTEYpKSB7XG4gICAgICByZXR1cm4gaSArIDEgLSBzdGFydDtcbiAgICB9XG4gICAgLy8gR0I1OiBcdTAwRjcgKENvbnRyb2wgfCBDUiB8IExGKVxuICAgIGlmIChpcyhuZXh0LCB0eXBlcy5Db250cm9sIHwgdHlwZXMuQ1IgfCB0eXBlcy5MRikpIHtcbiAgICAgIHJldHVybiBpICsgMSAtIHN0YXJ0O1xuICAgIH1cbiAgICAvLyBHQjY6IEwgeCAoTCB8IFYgfCBMViB8IExWVClcbiAgICBpZiAoXG4gICAgICBpcyhjdXJyLCB0eXBlcy5MKSAmJlxuICAgICAgaXMobmV4dCwgdHlwZXMuTCB8IHR5cGVzLlYgfCB0eXBlcy5MViB8IHR5cGVzLkxWVClcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjc6IChMViB8IFYpIHggKFYgfCBUKVxuICAgIGlmIChpcyhjdXJyLCB0eXBlcy5MViB8IHR5cGVzLlYpICYmIGlzKG5leHQsIHR5cGVzLlYgfCB0eXBlcy5UKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCODogKExWVCB8IFQpIHggVFxuICAgIGlmIChpcyhjdXJyLCB0eXBlcy5MVlQgfCB0eXBlcy5UKSAmJiBpcyhuZXh0LCB0eXBlcy5UKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCOTogeCAoRXh0ZW5kIHwgWldKKVxuICAgIGlmIChpcyhuZXh0LCB0eXBlcy5FeHRlbmQgfCB0eXBlcy5aV0opKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0I5YTogeCBTcGFjaW5nTWFya1xuICAgIGlmIChpcyhuZXh0LCB0eXBlcy5TcGFjaW5nTWFyaykpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjliOiBQcmVwZW5kIHhcbiAgICBpZiAoaXMoY3VyciwgdHlwZXMuUHJlcGVuZCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjljOiBcXHB7SW5DQj1Db25zb25hbnR9IFsgXFxwe0luQ0I9RXh0ZW5kfSBcXHB7SW5DQj1MaW5rZXJ9IF0qIFxccHtJbkNCPUxpbmtlcn0gWyBcXHB7SW5DQj1FeHRlbmR9IFxccHtJbkNCPUxpbmtlcn0gXSogXHUwMEQ3IFxccHtJbkNCPUNvbnNvbmFudH1cbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuSW5DQl9Db25zb25hbnQpICYmIHMuZ2I5YyA9PT0gMikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCMTE6IFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9IEV4dGVuZCogWldKIHggXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY31cbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuRXh0ZW5kZWRfUGljdG9ncmFwaGljKSAmJiBzLmdiMTEgPT09IDIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjEyOiBzb3QgKFJJIFJJKSogUkkgeCBSSVxuICAgIGlmIChpcyhuZXh0LCB0eXBlcy5SZWdpb25hbF9JbmRpY2F0b3IpICYmIHMuZ2IxMiA9PT0gMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCMTM6IFteUkldIChSSSBSSSkqIFJJIHggUklcbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuUmVnaW9uYWxfSW5kaWNhdG9yKSAmJiBzLmdiMTMgPT09IDIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjk5OTogQW55IFx1MDBGNyBBbnlcbiAgICByZXR1cm4gaSArIDEgLSBzdGFydDtcbiAgfVxuICByZXR1cm4gTCAtIHN0YXJ0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwbGl0KHN0cikge1xuICBjb25zdCBncmFwaGVtZUNsdXN0ZXJzID0gW107XG5cbiAgY29uc3QgbWFwID0gWzBdO1xuICBjb25zdCB0cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICkge1xuICAgIGNvbnN0IGNvZGUgPSBzdHIuY29kZVBvaW50QXQoaSk7XG4gICAgdHMucHVzaCh0eXBlVHJpZS5nZXQoY29kZSkgfCBleHRQaWN0LmdldChjb2RlKSB8IGluQ0IuZ2V0KGNvZGUpKTtcbiAgICBpICs9IGNvZGUgPiA2NTUzNSA/IDIgOiAxO1xuICAgIG1hcC5wdXNoKGkpO1xuICB9XG4gIGNvbnN0IHMgPSB7XG4gICAgZ2I5YzogMCxcbiAgICBnYjExOiAwLFxuICAgIGdiMTI6IDAsXG4gICAgZ2IxMzogMCxcbiAgfTtcbiAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgdHMubGVuZ3RoOyApIHtcbiAgICBjb25zdCBzaXplID0gbmV4dEdyYXBoZW1lQ2x1c3RlclNpemUocywgdHMsIG9mZnNldCk7XG4gICAgY29uc3Qgc3RhcnQgPSBtYXBbb2Zmc2V0XTtcbiAgICBjb25zdCBlbmQgPSBtYXBbb2Zmc2V0ICsgc2l6ZV07XG4gICAgZ3JhcGhlbWVDbHVzdGVycy5wdXNoKHN0ci5zbGljZShzdGFydCwgZW5kKSk7XG4gICAgb2Zmc2V0ICs9IHNpemU7XG4gIH1cblxuICByZXR1cm4gZ3JhcGhlbWVDbHVzdGVycztcbn07XG4iLCAiaW1wb3J0ICogYXMgT1RQQXV0aCBmcm9tIFwib3RwYXV0aFwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgQWN0aW9uLFxuICBBY3Rpb25QYW5lbCxcbiAgQnJvd3NlckV4dGVuc2lvbixcbiAgQ2xpcGJvYXJkLFxuICBDb2xvcixcbiAgZW52aXJvbm1lbnQsXG4gIGdldFByZWZlcmVuY2VWYWx1ZXMsXG4gIEljb24sXG4gIExpc3QsXG4gIHNob3dUb2FzdCxcbiAgVG9hc3QsXG59IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZVByb21pc2UgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcblxuaW1wb3J0IFJvb3RFcnJvckJvdW5kYXJ5IGZyb20gXCJ+L2NvbXBvbmVudHMvUm9vdEVycm9yQm91bmRhcnlcIjtcbmltcG9ydCB7IEJpdHdhcmRlblByb3ZpZGVyIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IFNlc3Npb25Qcm92aWRlciB9IGZyb20gXCJ+L2NvbnRleHQvc2Vzc2lvblwiO1xuaW1wb3J0IHsgdXNlVmF1bHRDb250ZXh0LCBWYXVsdFByb3ZpZGVyIH0gZnJvbSBcIn4vY29udGV4dC92YXVsdFwiO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5pbXBvcnQgeyB1c2VJdGVtSWNvbiB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlSXRlbUljb25cIjtcbmltcG9ydCBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgU0VOU0lUSVZFX1ZBTFVFX1BMQUNFSE9MREVSIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCBWYXVsdEl0ZW1Db250ZXh0LCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZSB9IGZyb20gXCJ+L3V0aWxzL3ByZWZlcmVuY2VzXCI7XG5pbXBvcnQgeyBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlIH0gZnJvbSBcIn4vdXRpbHMvY2xpcGJvYXJkXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlRnJvbnRtb3N0QXBwbGljYXRpb25OYW1lXCI7XG5pbXBvcnQgeyBBY3Rpb25XaXRoUmVwcm9tcHQsIERlYnVnZ2luZ0J1Z1JlcG9ydGluZ0FjdGlvblNlY3Rpb24sIFZhdWx0QWN0aW9uc1NlY3Rpb24gfSBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnNcIjtcbmltcG9ydCB7IEVyciwgT2ssIFJlc3VsdCwgdHJ5Q2F0Y2ggfSBmcm9tIFwifi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IHVzZVZhdWx0U2VhcmNoIH0gZnJvbSBcIn4vdXRpbHMvc2VhcmNoXCI7XG5pbXBvcnQgTGlzdEZvbGRlckRyb3Bkb3duIGZyb20gXCJ+L2NvbXBvbmVudHMvTGlzdEZvbGRlckRyb3Bkb3duXCI7XG5pbXBvcnQgQ29tcG9uZW50UmV2ZXJzZXIgZnJvbSBcIn4vY29tcG9uZW50cy9Db21wb25lbnRSZXZlcnNlclwiO1xuaW1wb3J0IHsgdXNlU3RhdGVFZmZlY3QgfSBmcm9tIFwifi91dGlscy9ob29rcy91c2VTdGF0ZUVmZmVjdFwiO1xuXG5jb25zdCBBdXRoZW50aWNhdG9yQ29tbWFuZCA9ICgpID0+IChcbiAgPFJvb3RFcnJvckJvdW5kYXJ5PlxuICAgIDxCaXR3YXJkZW5Qcm92aWRlciBsb2FkaW5nRmFsbGJhY2s9ezxMaXN0IHNlYXJjaEJhclBsYWNlaG9sZGVyPVwiU2VhcmNoIGl0ZW1zXCIgaXNMb2FkaW5nIC8+fT5cbiAgICAgIDxTZXNzaW9uUHJvdmlkZXIgdW5sb2NrPlxuICAgICAgICA8VmF1bHRMaXN0ZW5lcnNQcm92aWRlcj5cbiAgICAgICAgICA8VmF1bHRQcm92aWRlcj5cbiAgICAgICAgICAgIDxBdXRoZW50aWNhdG9yTGlzdCAvPlxuICAgICAgICAgIDwvVmF1bHRQcm92aWRlcj5cbiAgICAgICAgPC9WYXVsdExpc3RlbmVyc1Byb3ZpZGVyPlxuICAgICAgPC9TZXNzaW9uUHJvdmlkZXI+XG4gICAgPC9CaXR3YXJkZW5Qcm92aWRlcj5cbiAgPC9Sb290RXJyb3JCb3VuZGFyeT5cbik7XG5cbmZ1bmN0aW9uIEF1dGhlbnRpY2F0b3JMaXN0KCkge1xuICBjb25zdCB2YXVsdCA9IHVzZVZhdWx0Q29udGV4dCgpO1xuICBjb25zdCB7IGRhdGE6IGFjdGl2ZVRhYlVybCwgaXNMb2FkaW5nOiBpc0FjdGl2ZVRhYkxvYWRpbmcgfSA9IHVzZUFjdGl2ZVRhYigpO1xuXG4gIGNvbnN0IHZhdWx0SXRlbXMgPSB2YXVsdC5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ubG9naW4/LnRvdHApO1xuICBjb25zdCB7IHNldFNlYXJjaFRleHQsIGZpbHRlcmVkSXRlbXMgfSA9IHVzZVZhdWx0U2VhcmNoKHZhdWx0SXRlbXMpO1xuXG4gIGNvbnN0IGl0ZW1NYXRjaGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVUYWJVcmwpIHJldHVybiB7IGl0ZW1zOiBmaWx0ZXJlZEl0ZW1zLCB0YWJJdGVtczogW10gfTtcblxuICAgIHJldHVybiBmaWx0ZXJlZEl0ZW1zLnJlZHVjZTx7IGl0ZW1zOiBJdGVtW107IHRhYkl0ZW1zOiBJdGVtW10gfT4oXG4gICAgICAoYWNjLCBpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXNVcmwgPSBpdGVtLmxvZ2luPy51cmlzPy5zb21lKCh7IHVyaSB9KSA9PiB1cmk/LmluY2x1ZGVzKGFjdGl2ZVRhYlVybC51cmwuaG9zdG5hbWUpKTtcbiAgICAgICAgaWYgKG1hdGNoZXNVcmwpIHtcbiAgICAgICAgICBhY2MudGFiSXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY2MuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHsgaXRlbXM6IFtdLCB0YWJJdGVtczogW10gfVxuICAgICk7XG4gIH0sIFtmaWx0ZXJlZEl0ZW1zLCBhY3RpdmVUYWJVcmxdKTtcblxuICBjb25zdCBpc0VtcHR5ID0gaXRlbU1hdGNoZXMuaXRlbXMubGVuZ3RoID09PSAwICYmIGl0ZW1NYXRjaGVzLnRhYkl0ZW1zLmxlbmd0aCA9PT0gMDtcblxuICBjb25zdCBvdGhlckl0ZW1zTGlzdCA9IGl0ZW1NYXRjaGVzLml0ZW1zLm1hcCgoaXRlbSkgPT4gPExpc3RJdGVtIGtleT17aXRlbS5pZH0gaXRlbT17aXRlbX0gLz4pO1xuXG4gIHJldHVybiAoXG4gICAgPExpc3RcbiAgICAgIGZpbHRlcmluZz17ZmFsc2V9XG4gICAgICBvblNlYXJjaFRleHRDaGFuZ2U9e3NldFNlYXJjaFRleHR9XG4gICAgICBzZWFyY2hCYXJQbGFjZWhvbGRlcj1cIlNlYXJjaCBpdGVtc1wiXG4gICAgICBpc0xvYWRpbmc9e3ZhdWx0LmlzTG9hZGluZyB8fCBpc0FjdGl2ZVRhYkxvYWRpbmd9XG4gICAgICBzZWFyY2hCYXJBY2Nlc3Nvcnk9ezxMaXN0Rm9sZGVyRHJvcGRvd24gLz59XG4gICAgICBhY3Rpb25zPXtcbiAgICAgICAgPEFjdGlvblBhbmVsPlxuICAgICAgICAgIDxDb21tb25BY3Rpb25zIC8+XG4gICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gICAgICB9XG4gICAgPlxuICAgICAge2FjdGl2ZVRhYlVybCAmJiBpdGVtTWF0Y2hlcy50YWJJdGVtcy5sZW5ndGggPiAwID8gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxMaXN0LlNlY3Rpb24gdGl0bGU9e2BBY3RpdmUgVGFiICgke2FjdGl2ZVRhYlVybC51cmwuaG9zdG5hbWV9KWB9PlxuICAgICAgICAgICAge2l0ZW1NYXRjaGVzLnRhYkl0ZW1zLm1hcCgoaXRlbSkgPT4gKFxuICAgICAgICAgICAgICA8TGlzdEl0ZW0ga2V5PXtpdGVtLmlkfSBpdGVtPXtpdGVtfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gICAgICAgICAgPExpc3QuU2VjdGlvbiB0aXRsZT1cIk90aGVyc1wiPntvdGhlckl0ZW1zTGlzdH08L0xpc3QuU2VjdGlvbj5cbiAgICAgICAgPC8+XG4gICAgICApIDogKFxuICAgICAgICBvdGhlckl0ZW1zTGlzdFxuICAgICAgKX1cbiAgICAgIDxMaXN0LkVtcHR5Vmlld1xuICAgICAgICBpY29uPXt7IHNvdXJjZTogXCJiaXR3YXJkZW4tNjQucG5nXCIgfX1cbiAgICAgICAgdGl0bGU9e2lzRW1wdHkgPyBcIk5vIGF1dGhlbnRpY2F0b3Iga2V5cyBmb3VuZFwiIDogXCJObyBtYXRjaGluZyBpdGVtcyBmb3VuZFwifVxuICAgICAgICBkZXNjcmlwdGlvbj1cIkhpdCB0aGUgc3luYyBidXR0b24gdG8gc3luYyB5b3VyIHZhdWx0XCJcbiAgICAgIC8+XG4gICAgPC9MaXN0PlxuICApO1xufVxuXG5mdW5jdGlvbiBMaXN0SXRlbSh7IGl0ZW0gfTogeyBpdGVtOiBJdGVtIH0pIHtcbiAgY29uc3QgaWNvbiA9IHVzZUl0ZW1JY29uKGl0ZW0pO1xuICBjb25zdCBwcmVmZXJlbmNlcyA9IGdldFByZWZlcmVuY2VWYWx1ZXM8UHJlZmVyZW5jZXMuQXV0aGVudGljYXRvcj4oKTtcblxuICBjb25zdCBbY2FuR2VuZXJhdGUsIHNldENhbkdlbmVyYXRlXSA9IHVzZVN0YXRlKCFpdGVtLnJlcHJvbXB0KTtcbiAgY29uc3QgeyBjb2RlLCB0aW1lLCBlcnJvciwgaXNMb2FkaW5nIH0gPSBhdXRoZW50aWNhdG9yLnVzZUNvZGUoaXRlbSwgY2FuR2VuZXJhdGUpO1xuXG4gIGZ1bmN0aW9uIGdldEFjY2Vzc29yaWVzKCk6IExpc3QuSXRlbS5Qcm9wc1tcImFjY2Vzc29yaWVzXCJdIHtcbiAgICBpZiAoIWNhbkdlbmVyYXRlKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogeyB2YWx1ZTogXCJOZWVkcyBjb25maXJtYXRpb25cIiwgY29sb3I6IENvbG9yLlllbGxvdyB9LFxuICAgICAgICAgIHRvb2x0aXA6IFwiTmVlZHMgbWFzdGVyIHBhc3N3b3JkIGNvbmZpcm1hdGlvblwiLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9XG4gICAgaWYgKCFpc0xvYWRpbmcpIHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW3sgdGV4dDogeyB2YWx1ZTogZXJyb3IubWVzc2FnZSwgY29sb3I6IENvbG9yLlJlZCB9IH1dO1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUgJiYgdGltZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHsgdGV4dDogY29kZSB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogeyB2YWx1ZTogU3RyaW5nKHRpbWUpLCBjb2xvcjogdGltZSA8PSA3ID8gQ29sb3IuUmVkIDogQ29sb3IuQmx1ZSB9LFxuICAgICAgICAgICAgdG9vbHRpcDogYCR7dGltZX0gc2Vjb25kcyByZW1haW5pbmdgLFxuICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbeyB0ZXh0OiBcIkxvYWRpbmcuLi5cIiB9XTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFZhdWx0SXRlbUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2l0ZW19PlxuICAgICAgPExpc3QuSXRlbVxuICAgICAgICB0aXRsZT17aXRlbS5uYW1lfVxuICAgICAgICBzdWJ0aXRsZT17aXRlbS5sb2dpbj8udXNlcm5hbWUgPz8gdW5kZWZpbmVkfVxuICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICBhY3Rpb25zPXtcbiAgICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgICB7Y2FuR2VuZXJhdGUgPyAoXG4gICAgICAgICAgICAgIDxDb21wb25lbnRSZXZlcnNlciByZXZlcnNlPXtwcmVmZXJlbmNlcy5wcmltYXJ5QWN0aW9uID09PSBcInBhc3RlXCJ9PlxuICAgICAgICAgICAgICAgIDxDb3B5Q29kZUFjdGlvbiAvPlxuICAgICAgICAgICAgICAgIDxQYXN0ZUNvZGVBY3Rpb24gLz5cbiAgICAgICAgICAgICAgPC9Db21wb25lbnRSZXZlcnNlcj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxDb25maXJtQWN0aW9uIG9uQ29uZmlybT17KCkgPT4gc2V0Q2FuR2VuZXJhdGUodHJ1ZSl9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPENvbW1vbkFjdGlvbnMgLz5cbiAgICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgICB9XG4gICAgICAgIGFjY2Vzc29yaWVzPXtnZXRBY2Nlc3NvcmllcygpfVxuICAgICAgLz5cbiAgICA8L1ZhdWx0SXRlbUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbmZ1bmN0aW9uIENvbW1vbkFjdGlvbnMoKSB7XG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxWYXVsdEFjdGlvbnNTZWN0aW9uIC8+XG4gICAgICA8RGVidWdnaW5nQnVnUmVwb3J0aW5nQWN0aW9uU2VjdGlvbiAvPlxuICAgIDwvPlxuICApO1xufVxuXG5mdW5jdGlvbiBDb25maXJtQWN0aW9uKHsgb25Db25maXJtIH06IHsgb25Db25maXJtOiAoKSA9PiB2b2lkIH0pIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcblxuICByZXR1cm4gKFxuICAgIDxBY3Rpb25XaXRoUmVwcm9tcHRcbiAgICAgIHRpdGxlPVwiQ29uZmlybSBQYXNzd29yZFwiXG4gICAgICBvbkFjdGlvbj17b25Db25maXJtfVxuICAgICAgaWNvbj17SWNvbi5Mb2NrfVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YEdlbmVyYXRpbmcgYW4gYXV0aGVudGljYXRpb24gY29kZSBmb3IgPCR7c2VsZWN0ZWRJdGVtLm5hbWV9PmB9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gQ29weUNvZGVBY3Rpb24oKSB7XG4gIGNvbnN0IGdldENvZGUgPSB1c2VHZXRDb2RlRm9yQWN0aW9uKFwiY29weVwiKTtcblxuICBjb25zdCBjb3B5ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNvZGUgPSBhd2FpdCBnZXRDb2RlKCk7XG4gICAgaWYgKGNvZGUpIHtcbiAgICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KGNvZGUsIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcIm90aGVyXCIpIH0pO1xuICAgICAgYXdhaXQgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZShcIkNvcGllZCBjb2RlIHRvIGNsaXBib2FyZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIDxBY3Rpb24gdGl0bGU9XCJDb3B5IENvZGVcIiBvbkFjdGlvbj17Y29weX0gaWNvbj17SWNvbi5DbGlwYm9hcmR9IC8+O1xufVxuXG5mdW5jdGlvbiBQYXN0ZUNvZGVBY3Rpb24oKSB7XG4gIGNvbnN0IGZyb250bW9zdEFwcE5hbWUgPSB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUoKTtcbiAgY29uc3QgZ2V0Q29kZSA9IHVzZUdldENvZGVGb3JBY3Rpb24oXCJwYXN0ZVwiKTtcblxuICBjb25zdCBwYXN0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjb2RlID0gYXdhaXQgZ2V0Q29kZSgpO1xuICAgIGlmIChjb2RlKSB7XG4gICAgICBhd2FpdCBDbGlwYm9hcmQucGFzdGUoY29kZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvblxuICAgICAgdGl0bGU9e2Zyb250bW9zdEFwcE5hbWUgPyBgUGFzdGUgQ29kZSBpbnRvICR7ZnJvbnRtb3N0QXBwTmFtZX1gIDogXCJQYXN0ZSBDb2RlXCJ9XG4gICAgICBvbkFjdGlvbj17cGFzdGV9XG4gICAgICBpY29uPXtJY29uLldpbmRvd31cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiB1c2VHZXRDb2RlRm9yQWN0aW9uKGFjdGlvbjogXCJjb3B5XCIgfCBcInBhc3RlXCIpIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VmF1bHRJdGVtID0gdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSgpO1xuXG4gIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRvdHAgPSBhd2FpdCBnZXRWYXVsdEl0ZW0oc2VsZWN0ZWRJdGVtLCAoaXRlbSkgPT4gaXRlbS5sb2dpbj8udG90cCwgXCJHZXR0aW5nIGNvZGUuLi5cIik7XG4gICAgICBpZiAoIXRvdHApIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgdG90cFwiKTtcblxuICAgICAgY29uc3QgW2dlbmVyYXRvciwgZXJyb3JdID0gYXV0aGVudGljYXRvci5nZXRHZW5lcmF0b3IodG90cCk7XG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgICByZXR1cm4gZ2VuZXJhdG9yLmdlbmVyYXRlKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgY29kZVwiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oYEZhaWxlZCB0byAke2FjdGlvbn0gY29kZWAsIGVycm9yKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VBY3RpdmVUYWIoKSB7XG4gIHJldHVybiB1c2VQcm9taXNlKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWVudmlyb25tZW50LmNhbkFjY2VzcyhCcm93c2VyRXh0ZW5zaW9uKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IFt0YWJzLCBlcnJvcl0gPSBhd2FpdCB0cnlDYXRjaChCcm93c2VyRXh0ZW5zaW9uLmdldFRhYnMoKSk7XG4gICAgaWYgKGVycm9yKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgYWN0aXZlVGFiID0gdGFicy5maW5kKCh0YWIpID0+IHRhYi5hY3RpdmUpO1xuICAgIHJldHVybiBhY3RpdmVUYWIgPyB7IC4uLmFjdGl2ZVRhYiwgdXJsOiBuZXcgVVJMKGFjdGl2ZVRhYi51cmwpIH0gOiB1bmRlZmluZWQ7XG4gIH0pO1xufVxuXG50eXBlIEF1dGhlbnRpY2F0b3JPcHRpb25zID0ge1xuICBzZWNyZXQ6IHN0cmluZztcbiAgcGVyaW9kOiBudW1iZXI7XG4gIGFsZ29yaXRobTogc3RyaW5nO1xuICBkaWdpdHM6IG51bWJlcjtcbn07XG5cbmNvbnN0IGF1dGhlbnRpY2F0b3IgPSB7XG4gIHBhcnNlVG90cCh0b3RwU3RyaW5nOiBzdHJpbmcpOiBBdXRoZW50aWNhdG9yT3B0aW9ucyB7XG4gICAgaWYgKHRvdHBTdHJpbmcuaW5jbHVkZXMoXCJvdHBhdXRoXCIpKSB7XG4gICAgICBjb25zdCBbdG90cCwgcGFyc2VFcnJvcl0gPSB0cnlDYXRjaCgoKSA9PiBPVFBBdXRoLlVSSS5wYXJzZSh0b3RwU3RyaW5nKSk7XG4gICAgICBpZiAocGFyc2VFcnJvcikgdGhyb3cgcGFyc2VFcnJvcjtcbiAgICAgIGlmICghKHRvdHAgaW5zdGFuY2VvZiBPVFBBdXRoLlRPVFApKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGF1dGhlbnRpY2F0b3Iga2V5XCIpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhbGdvcml0aG06IHRvdHAuYWxnb3JpdGhtLFxuICAgICAgICBzZWNyZXQ6IHRvdHAuc2VjcmV0LmJhc2UzMi50b1N0cmluZygpLFxuICAgICAgICBwZXJpb2Q6IHRvdHAucGVyaW9kLFxuICAgICAgICBkaWdpdHM6IHRvdHAuZGlnaXRzLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzZWNyZXQ6IHRvdHBTdHJpbmcsIHBlcmlvZDogMzAsIGFsZ29yaXRobTogXCJTSEExXCIsIGRpZ2l0czogNiB9O1xuICB9LFxuICBnZXRHZW5lcmF0b3IodG90cFN0cmluZzogc3RyaW5nKTogUmVzdWx0PE9UUEF1dGguVE9UUD4ge1xuICAgIGNvbnN0IFtvcHRpb25zLCBwYXJzZUVycm9yXSA9IHRyeUNhdGNoKCgpID0+IGF1dGhlbnRpY2F0b3IucGFyc2VUb3RwKHRvdHBTdHJpbmcpKTtcbiAgICBpZiAocGFyc2VFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBwYXJzZSBrZXlcIiwgcGFyc2VFcnJvcik7XG4gICAgICByZXR1cm4gRXJyKG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBhdXRoZW50aWNhdG9yIGtleVwiKSk7XG4gICAgfVxuICAgIGNvbnN0IFtnZW5lcmF0b3IsIGluaXRFcnJvcl0gPSB0cnlDYXRjaCgoKSA9PiBuZXcgT1RQQXV0aC5UT1RQKG9wdGlvbnMpKTtcbiAgICBpZiAoaW5pdEVycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgYXV0aGVudGljYXRvclwiLCBpbml0RXJyb3IpO1xuICAgICAgcmV0dXJuIEVycihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhdXRoZW50aWNhdG9yXCIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gT2soZ2VuZXJhdG9yKTtcbiAgfSxcbiAgdXNlQ29kZShpdGVtOiBJdGVtLCBjYW5HZW5lcmF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBbW2dlbmVyYXRvciwgZXJyb3IsIGlzTG9hZGluZyA9IGZhbHNlXSwgc2V0U3RhdGVdID0gdXNlU3RhdGVFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgeyB0b3RwIH0gPSBpdGVtLmxvZ2luID8/IHt9O1xuICAgICAgaWYgKCFjYW5HZW5lcmF0ZSkgcmV0dXJuIExvYWRpbmcobmV3IEVycm9yKFwiTmVlZHMgY29uZmlybWF0aW9uLi4uXCIpKTtcbiAgICAgIGlmICh0b3RwID09PSBTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVIpIHJldHVybiBMb2FkaW5nKG5ldyBFcnJvcihcIkxvYWRpbmcuLi5cIikpO1xuICAgICAgaWYgKCF0b3RwKSByZXR1cm4gRXJyKG5ldyBFcnJvcihcIk5vIFRPVFAgZm91bmRcIikpO1xuXG4gICAgICByZXR1cm4gYXV0aGVudGljYXRvci5nZXRHZW5lcmF0b3IodG90cCk7XG4gICAgfSwgW2l0ZW0sIGNhbkdlbmVyYXRlXSk7XG5cbiAgICBjb25zdCBbY29kZSwgc2V0Q29kZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbdGltZSwgc2V0VGltZV0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHJldHVybjtcblxuICAgICAgbGV0IGludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNldFRpbWVBbmRDb2RlID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRpbWVSZW1haW5pbmcgPSBNYXRoLmNlaWwoZ2VuZXJhdG9yLnJlbWFpbmluZygpIC8gMTAwMCk7XG4gICAgICAgICAgc2V0VGltZSh0aW1lUmVtYWluaW5nKTtcblxuICAgICAgICAgIGlmICh0aW1lUmVtYWluaW5nID09PSBnZW5lcmF0b3IucGVyaW9kKSB7XG4gICAgICAgICAgICBzZXRDb2RlKGdlbmVyYXRvci5nZW5lcmF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgc2V0U3RhdGUoRXJyKG5ldyBFcnJvcihcIkZhaWxlZCB0byByZWdlbmVyYXRlXCIpKSk7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gcmVnZW5lcmF0ZVwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIHNldCBhbiBpbml0aWFsIHRpbWVvdXQgdG8gZW5zdXJlIHRoZSBmaXJzdCBldmFsdWF0aW9uIGlzIHRpbWUgYWNjdXJhdGVcbiAgICAgICAgLy8gYW5kIHRoZW4ga2VlcCBldmFsdWF0aW5nIGV2ZXJ5IHNlY29uZFxuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZUFuZENvZGUoKTtcbiAgICAgICAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKHNldFRpbWVBbmRDb2RlLCAxMDAwKTtcbiAgICAgICAgfSwgZ2VuZXJhdG9yLnJlbWFpbmluZygpICUgMTAwMCk7XG5cbiAgICAgICAgc2V0Q29kZShnZW5lcmF0b3IuZ2VuZXJhdGUoKSk7IC8vIGZpcnN0IGdlbmVyYXRpb24gYmVmb3JlIHRoZSBpbnRlcnZhbCBzdGFydHNcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHNldFN0YXRlKEVycihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2VuZXJhdGVcIikpKTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGdlbmVyYXRlXCIsIGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNsZWFudXA7XG4gICAgfSwgW2l0ZW0sIGdlbmVyYXRvcl0pO1xuXG4gICAgcmV0dXJuIHsgY29kZSwgdGltZSwgZXJyb3IsIGlzTG9hZGluZyB9O1xuICB9LFxufTtcblxuZnVuY3Rpb24gTG9hZGluZyhlcnJvcjogRXJyb3IpIHtcbiAgcmV0dXJuIFtudWxsLCBlcnJvciwgdHJ1ZV0gYXMgY29uc3Q7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhlbnRpY2F0b3JDb21tYW5kO1xuIiwgIi8vISBvdHBhdXRoIDkuNC4wIHwgKGMpIEhcdTAwRTljdG9yIE1vbGluZXJvIEZlcm5cdTAwRTFuZGV6IHwgTUlUIHwgaHR0cHM6Ly9naXRodWIuY29tL2hlY3Rvcm0vb3RwYXV0aFxuLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCIuL290cGF1dGguZC50c1wiIC8+XG4vLyBAdHMtbm9jaGVja1xuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ25vZGU6Y3J5cHRvJztcblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBpbnRlZ2VyIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIEludGVnZXIuXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gVWludDhBcnJheS5cbiAqLyBjb25zdCB1aW50RGVjb2RlID0gKG51bSk9PntcbiAgICBjb25zdCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICBsZXQgYWNjID0gbnVtO1xuICAgIGZvcihsZXQgaSA9IDc7IGkgPj0gMDsgaS0tKXtcbiAgICAgICAgaWYgKGFjYyA9PT0gMCkgYnJlYWs7XG4gICAgICAgIGFycltpXSA9IGFjYyAmIDI1NTtcbiAgICAgICAgYWNjIC09IGFycltpXTtcbiAgICAgICAgYWNjIC89IDI1NjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn07XG5cbi8qKlxuICogXCJnbG9iYWxUaGlzXCIgcG9ueWZpbGwuXG4gKiBAc2VlIFtBIGhvcnJpZnlpbmcgZ2xvYmFsVGhpcyBwb2x5ZmlsbCBpbiB1bml2ZXJzYWwgSmF2YVNjcmlwdF0oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2dsb2JhbHRoaXMpXG4gKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsICo+fVxuICovIGNvbnN0IGdsb2JhbFNjb3BlID0gKCgpPT57XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSByZXR1cm4gZ2xvYmFsVGhpcztcbiAgICBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsIFwiX19HTE9CQUxUSElTX19cIiwge1xuICAgICAgICAgICAgZ2V0ICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX19HTE9CQUxUSElTX18gIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBfX0dMT0JBTFRISVNfXztcbiAgICAgICAgfSBmaW5hbGx5e1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgZGVsZXRlIE9iamVjdC5wcm90b3R5cGUuX19HTE9CQUxUSElTX187XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU3RpbGwgdW5hYmxlIHRvIGRldGVybWluZSBcImdsb2JhbFRoaXNcIiwgZmFsbCBiYWNrIHRvIGEgbmFpdmUgbWV0aG9kLlxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHNlbGY7XG4gICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHdpbmRvdztcbiAgICBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZ2xvYmFsO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59KSgpO1xuXG4vKipcbiAqIENhbm9uaWNhbGl6ZXMgYSBoYXNoIGFsZ29yaXRobSBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IGFsZ29yaXRobSBIYXNoIGFsZ29yaXRobSBuYW1lLlxuICogQHJldHVybnMge1wiU0hBMVwifFwiU0hBMjI0XCJ8XCJTSEEyNTZcInxcIlNIQTM4NFwifFwiU0hBNTEyXCJ8XCJTSEEzLTIyNFwifFwiU0hBMy0yNTZcInxcIlNIQTMtMzg0XCJ8XCJTSEEzLTUxMlwifSBDYW5vbmljYWxpemVkIGhhc2ggYWxnb3JpdGhtIG5hbWUuXG4gKi8gY29uc3QgY2Fub25pY2FsaXplQWxnb3JpdGhtID0gKGFsZ29yaXRobSk9PntcbiAgICBzd2l0Y2godHJ1ZSl7XG4gICAgICAgIGNhc2UgL14oPzpTSEEtPzF8U1NMMy1TSEExKSQvaS50ZXN0KGFsZ29yaXRobSk6XG4gICAgICAgICAgICByZXR1cm4gXCJTSEExXCI7XG4gICAgICAgIGNhc2UgL15TSEEoPzoyPy0pPzIyNCQvaS50ZXN0KGFsZ29yaXRobSk6XG4gICAgICAgICAgICByZXR1cm4gXCJTSEEyMjRcIjtcbiAgICAgICAgY2FzZSAvXlNIQSg/OjI/LSk/MjU2JC9pLnRlc3QoYWxnb3JpdGhtKTpcbiAgICAgICAgICAgIHJldHVybiBcIlNIQTI1NlwiO1xuICAgICAgICBjYXNlIC9eU0hBKD86Mj8tKT8zODQkL2kudGVzdChhbGdvcml0aG0pOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0hBMzg0XCI7XG4gICAgICAgIGNhc2UgL15TSEEoPzoyPy0pPzUxMiQvaS50ZXN0KGFsZ29yaXRobSk6XG4gICAgICAgICAgICByZXR1cm4gXCJTSEE1MTJcIjtcbiAgICAgICAgY2FzZSAvXlNIQTMtMjI0JC9pLnRlc3QoYWxnb3JpdGhtKTpcbiAgICAgICAgICAgIHJldHVybiBcIlNIQTMtMjI0XCI7XG4gICAgICAgIGNhc2UgL15TSEEzLTI1NiQvaS50ZXN0KGFsZ29yaXRobSk6XG4gICAgICAgICAgICByZXR1cm4gXCJTSEEzLTI1NlwiO1xuICAgICAgICBjYXNlIC9eU0hBMy0zODQkL2kudGVzdChhbGdvcml0aG0pOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0hBMy0zODRcIjtcbiAgICAgICAgY2FzZSAvXlNIQTMtNTEyJC9pLnRlc3QoYWxnb3JpdGhtKTpcbiAgICAgICAgICAgIHJldHVybiBcIlNIQTMtNTEyXCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIGhhc2ggYWxnb3JpdGhtOiAke2FsZ29yaXRobX1gKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDYWxjdWxhdGVzIGFuIEhNQUMgZGlnZXN0LlxuICogQHBhcmFtIHtzdHJpbmd9IGFsZ29yaXRobSBBbGdvcml0aG0uXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGtleSBLZXkuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG1lc3NhZ2UgTWVzc2FnZS5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBEaWdlc3QuXG4gKi8gY29uc3QgaG1hY0RpZ2VzdCA9IChhbGdvcml0aG0sIGtleSwgbWVzc2FnZSk9PntcbiAgICBpZiAoY3J5cHRvPy5jcmVhdGVIbWFjKSB7XG4gICAgICAgIGNvbnN0IGhtYWMgPSBjcnlwdG8uY3JlYXRlSG1hYyhhbGdvcml0aG0sIGdsb2JhbFNjb3BlLkJ1ZmZlci5mcm9tKGtleSkpO1xuICAgICAgICBobWFjLnVwZGF0ZShnbG9iYWxTY29wZS5CdWZmZXIuZnJvbShtZXNzYWdlKSk7XG4gICAgICAgIHJldHVybiBobWFjLmRpZ2VzdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgSE1BQyBmdW5jdGlvblwiKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJGQyA0NjQ4IGJhc2UzMiBhbHBoYWJldCB3aXRob3V0IHBhZC5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi8gY29uc3QgQUxQSEFCRVQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMjM0NTY3XCI7XG4vKipcbiAqIENvbnZlcnRzIGEgYmFzZTMyIHN0cmluZyB0byBhbiBVaW50OEFycmF5IChSRkMgNDY0OCkuXG4gKiBAc2VlIFtMaW51c1UvYmFzZTMyLWRlY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL0xpbnVzVS9iYXNlMzItZGVjb2RlKVxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBCYXNlMzIgc3RyaW5nLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFVpbnQ4QXJyYXkuXG4gKi8gY29uc3QgYmFzZTMyRGVjb2RlID0gKHN0cik9PntcbiAgICAvLyBSZW1vdmUgc3BhY2VzIChhbHRob3VnaCB0aGV5IGFyZSBub3QgYWxsb3dlZCBieSB0aGUgc3BlYywgc29tZSBpc3N1ZXJzIGFkZCB0aGVtIGZvciByZWFkYWJpbGl0eSkuXG4gICAgc3RyID0gc3RyLnJlcGxhY2UoLyAvZywgXCJcIik7XG4gICAgLy8gQ2Fub25pY2FsaXplIHRvIGFsbCB1cHBlciBjYXNlIGFuZCByZW1vdmUgcGFkZGluZyBpZiBpdCBleGlzdHMuXG4gICAgbGV0IGVuZCA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUoc3RyW2VuZCAtIDFdID09PSBcIj1cIiktLWVuZDtcbiAgICBzdHIgPSAoZW5kIDwgc3RyLmxlbmd0aCA/IHN0ci5zdWJzdHJpbmcoMCwgZW5kKSA6IHN0cikudG9VcHBlckNhc2UoKTtcbiAgICBjb25zdCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCAqIDUgLyA4IHwgMCk7XG4gICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICBsZXQgYml0cyA9IDA7XG4gICAgbGV0IHZhbHVlID0gMDtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBpZHggPSBBTFBIQUJFVC5pbmRleE9mKHN0cltpXSk7XG4gICAgICAgIGlmIChpZHggPT09IC0xKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGNoYXJhY3RlciBmb3VuZDogJHtzdHJbaV19YCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUgPDwgNSB8IGlkeDtcbiAgICAgICAgYml0cyArPSA1O1xuICAgICAgICBpZiAoYml0cyA+PSA4KSB7XG4gICAgICAgICAgICBiaXRzIC09IDg7XG4gICAgICAgICAgICBhcnJbaW5kZXgrK10gPSB2YWx1ZSA+Pj4gYml0cztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufTtcbi8qKlxuICogQ29udmVydHMgYW4gVWludDhBcnJheSB0byBhIGJhc2UzMiBzdHJpbmcgKFJGQyA0NjQ4KS5cbiAqIEBzZWUgW0xpbnVzVS9iYXNlMzItZW5jb2RlXShodHRwczovL2dpdGh1Yi5jb20vTGludXNVL2Jhc2UzMi1lbmNvZGUpXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGFyciBVaW50OEFycmF5LlxuICogQHJldHVybnMge3N0cmluZ30gQmFzZTMyIHN0cmluZy5cbiAqLyBjb25zdCBiYXNlMzJFbmNvZGUgPSAoYXJyKT0+e1xuICAgIGxldCBiaXRzID0gMDtcbiAgICBsZXQgdmFsdWUgPSAwO1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICB2YWx1ZSA9IHZhbHVlIDw8IDggfCBhcnJbaV07XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgd2hpbGUoYml0cyA+PSA1KXtcbiAgICAgICAgICAgIHN0ciArPSBBTFBIQUJFVFt2YWx1ZSA+Pj4gYml0cyAtIDUgJiAzMV07XG4gICAgICAgICAgICBiaXRzIC09IDU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJpdHMgPiAwKSB7XG4gICAgICAgIHN0ciArPSBBTFBIQUJFVFt2YWx1ZSA8PCA1IC0gYml0cyAmIDMxXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSBoZXhhZGVjaW1hbCBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgSGV4YWRlY2ltYWwgc3RyaW5nLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFVpbnQ4QXJyYXkuXG4gKi8gY29uc3QgaGV4RGVjb2RlID0gKHN0cik9PntcbiAgICAvLyBSZW1vdmUgc3BhY2VzIChhbHRob3VnaCB0aGV5IGFyZSBub3QgYWxsb3dlZCBieSB0aGUgc3BlYywgc29tZSBpc3N1ZXJzIGFkZCB0aGVtIGZvciByZWFkYWJpbGl0eSkuXG4gICAgc3RyID0gc3RyLnJlcGxhY2UoLyAvZywgXCJcIik7XG4gICAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGggLyAyKTtcbiAgICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IDIpe1xuICAgICAgICBhcnJbaSAvIDJdID0gcGFyc2VJbnQoc3RyLnN1YnN0cmluZyhpLCBpICsgMiksIDE2KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn07XG4vKipcbiAqIENvbnZlcnRzIGFuIFVpbnQ4QXJyYXkgdG8gYSBoZXhhZGVjaW1hbCBzdHJpbmcuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGFyciBVaW50OEFycmF5LlxuICogQHJldHVybnMge3N0cmluZ30gSGV4YWRlY2ltYWwgc3RyaW5nLlxuICovIGNvbnN0IGhleEVuY29kZSA9IChhcnIpPT57XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IGhleCA9IGFycltpXS50b1N0cmluZygxNik7XG4gICAgICAgIGlmIChoZXgubGVuZ3RoID09PSAxKSBzdHIgKz0gXCIwXCI7XG4gICAgICAgIHN0ciArPSBoZXg7XG4gICAgfVxuICAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKTtcbn07XG5cbi8qKlxuICogQ29udmVydHMgYSBMYXRpbi0xIHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBMYXRpbi0xIHN0cmluZy5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBVaW50OEFycmF5LlxuICovIGNvbnN0IGxhdGluMURlY29kZSA9IChzdHIpPT57XG4gICAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpO1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGFycltpXSA9IHN0ci5jaGFyQ29kZUF0KGkpICYgMHhmZjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn07XG4vKipcbiAqIENvbnZlcnRzIGFuIFVpbnQ4QXJyYXkgdG8gYSBMYXRpbi0xIHN0cmluZy5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYXJyIFVpbnQ4QXJyYXkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBMYXRpbi0xIHN0cmluZy5cbiAqLyBjb25zdCBsYXRpbjFFbmNvZGUgPSAoYXJyKT0+e1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufTtcblxuLyoqXG4gKiBUZXh0RW5jb2RlciBpbnN0YW5jZS5cbiAqIEB0eXBlIHtUZXh0RW5jb2RlcnxudWxsfVxuICovIGNvbnN0IEVOQ09ERVIgPSBnbG9iYWxTY29wZS5UZXh0RW5jb2RlciA/IG5ldyBnbG9iYWxTY29wZS5UZXh0RW5jb2RlcigpIDogbnVsbDtcbi8qKlxuICogVGV4dERlY29kZXIgaW5zdGFuY2UuXG4gKiBAdHlwZSB7VGV4dERlY29kZXJ8bnVsbH1cbiAqLyBjb25zdCBERUNPREVSID0gZ2xvYmFsU2NvcGUuVGV4dERlY29kZXIgPyBuZXcgZ2xvYmFsU2NvcGUuVGV4dERlY29kZXIoKSA6IG51bGw7XG4vKipcbiAqIENvbnZlcnRzIGFuIFVURi04IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBTdHJpbmcuXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gVWludDhBcnJheS5cbiAqLyBjb25zdCB1dGY4RGVjb2RlID0gKHN0cik9PntcbiAgICBpZiAoIUVOQ09ERVIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW5jb2RpbmcgQVBJIG5vdCBhdmFpbGFibGVcIik7XG4gICAgfVxuICAgIHJldHVybiBFTkNPREVSLmVuY29kZShzdHIpO1xufTtcbi8qKlxuICogQ29udmVydHMgYW4gVWludDhBcnJheSB0byBhbiBVVEYtOCBzdHJpbmcuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGFyciBVaW50OEFycmF5LlxuICogQHJldHVybnMge3N0cmluZ30gU3RyaW5nLlxuICovIGNvbnN0IHV0ZjhFbmNvZGUgPSAoYXJyKT0+e1xuICAgIGlmICghREVDT0RFUikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbmNvZGluZyBBUEkgbm90IGF2YWlsYWJsZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIERFQ09ERVIuZGVjb2RlKGFycik7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcmFuZG9tIGJ5dGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgU2l6ZS5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBSYW5kb20gYnl0ZXMuXG4gKi8gY29uc3QgcmFuZG9tQnl0ZXMgPSAoc2l6ZSk9PntcbiAgICBpZiAoY3J5cHRvPy5yYW5kb21CeXRlcykge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKHNpemUpO1xuICAgIH0gZWxzZSBpZiAoZ2xvYmFsU2NvcGUuY3J5cHRvPy5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFNjb3BlLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoc2l6ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNyeXB0b2dyYXBoeSBBUEkgbm90IGF2YWlsYWJsZVwiKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIE9UUCBzZWNyZXQga2V5LlxuICovIGNsYXNzIFNlY3JldCB7XG4gICAgLyoqXG4gICAqIENvbnZlcnRzIGEgTGF0aW4tMSBzdHJpbmcgdG8gYSBTZWNyZXQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIExhdGluLTEgc3RyaW5nLlxuICAgKiBAcmV0dXJucyB7U2VjcmV0fSBTZWNyZXQgb2JqZWN0LlxuICAgKi8gc3RhdGljIGZyb21MYXRpbjEoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VjcmV0KHtcbiAgICAgICAgICAgIGJ1ZmZlcjogbGF0aW4xRGVjb2RlKHN0cikuYnVmZmVyXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICogQ29udmVydHMgYW4gVVRGLTggc3RyaW5nIHRvIGEgU2VjcmV0IG9iamVjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciBVVEYtOCBzdHJpbmcuXG4gICAqIEByZXR1cm5zIHtTZWNyZXR9IFNlY3JldCBvYmplY3QuXG4gICAqLyBzdGF0aWMgZnJvbVVURjgoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VjcmV0KHtcbiAgICAgICAgICAgIGJ1ZmZlcjogdXRmOERlY29kZShzdHIpLmJ1ZmZlclxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIENvbnZlcnRzIGEgYmFzZTMyIHN0cmluZyB0byBhIFNlY3JldCBvYmplY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQmFzZTMyIHN0cmluZy5cbiAgICogQHJldHVybnMge1NlY3JldH0gU2VjcmV0IG9iamVjdC5cbiAgICovIHN0YXRpYyBmcm9tQmFzZTMyKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IFNlY3JldCh7XG4gICAgICAgICAgICBidWZmZXI6IGJhc2UzMkRlY29kZShzdHIpLmJ1ZmZlclxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIENvbnZlcnRzIGEgaGV4YWRlY2ltYWwgc3RyaW5nIHRvIGEgU2VjcmV0IG9iamVjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciBIZXhhZGVjaW1hbCBzdHJpbmcuXG4gICAqIEByZXR1cm5zIHtTZWNyZXR9IFNlY3JldCBvYmplY3QuXG4gICAqLyBzdGF0aWMgZnJvbUhleChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWNyZXQoe1xuICAgICAgICAgICAgYnVmZmVyOiBoZXhEZWNvZGUoc3RyKS5idWZmZXJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBTZWNyZXQga2V5IGJ1ZmZlci5cbiAgICogQGRlcHJlY2F0ZWQgRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSBcImJ5dGVzXCIgcHJvcGVydHkgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZC5cbiAgICogQHR5cGUge0FycmF5QnVmZmVyTGlrZX1cbiAgICovIGdldCBidWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ5dGVzLmJ1ZmZlcjtcbiAgICB9XG4gICAgLyoqXG4gICAqIExhdGluLTEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHNlY3JldCBrZXkuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqLyBnZXQgbGF0aW4xKCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXRpbjFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogbGF0aW4xRW5jb2RlKHRoaXMuYnl0ZXMpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5sYXRpbjE7XG4gICAgfVxuICAgIC8qKlxuICAgKiBVVEYtOCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2Ygc2VjcmV0IGtleS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovIGdldCB1dGY4KCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1dGY4XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IHV0ZjhFbmNvZGUodGhpcy5ieXRlcylcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnV0Zjg7XG4gICAgfVxuICAgIC8qKlxuICAgKiBCYXNlMzIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHNlY3JldCBrZXkuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqLyBnZXQgYmFzZTMyKCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJiYXNlMzJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogYmFzZTMyRW5jb2RlKHRoaXMuYnl0ZXMpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlMzI7XG4gICAgfVxuICAgIC8qKlxuICAgKiBIZXhhZGVjaW1hbCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2Ygc2VjcmV0IGtleS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovIGdldCBoZXgoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBoZXhFbmNvZGUodGhpcy5ieXRlcylcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmhleDtcbiAgICB9XG4gICAgLyoqXG4gICAqIENyZWF0ZXMgYSBzZWNyZXQga2V5IG9iamVjdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlckxpa2V9IFtjb25maWcuYnVmZmVyXSBTZWNyZXQga2V5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuc2l6ZT0yMF0gTnVtYmVyIG9mIHJhbmRvbSBieXRlcyB0byBnZW5lcmF0ZSwgaWdub3JlZCBpZiAnYnVmZmVyJyBpcyBwcm92aWRlZC5cbiAgICovIGNvbnN0cnVjdG9yKHsgYnVmZmVyLCBzaXplID0gMjAgfSA9IHt9KXtcbiAgICAgICAgLyoqXG4gICAgICogU2VjcmV0IGtleS5cbiAgICAgKiBAdHlwZSB7VWludDhBcnJheX1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi8gdGhpcy5ieXRlcyA9IHR5cGVvZiBidWZmZXIgPT09IFwidW5kZWZpbmVkXCIgPyByYW5kb21CeXRlcyhzaXplKSA6IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIC8vIFByZXZlbnQgdGhlIFwiYnl0ZXNcIiBwcm9wZXJ0eSBmcm9tIGJlaW5nIG1vZGlmaWVkLlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJieXRlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJ5dGVzXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBpcyBlcXVhbCB0byBiLCB3aXRob3V0IGxlYWtpbmcgdGltaW5nIGluZm9ybWF0aW9uIHRoYXQgd291bGQgYWxsb3cgYW4gYXR0YWNrZXIgdG8gZ3Vlc3Mgb25lIG9mIHRoZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gYSBTdHJpbmcgYS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBiIFN0cmluZyBiLlxuICogQHJldHVybnMge2Jvb2xlYW59IEVxdWFsaXR5IHJlc3VsdC5cbiAqLyBjb25zdCB0aW1pbmdTYWZlRXF1YWwgPSAoYSwgYik9PntcbiAgICBpZiAoY3J5cHRvPy50aW1pbmdTYWZlRXF1YWwpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by50aW1pbmdTYWZlRXF1YWwoZ2xvYmFsU2NvcGUuQnVmZmVyLmZyb20oYSksIGdsb2JhbFNjb3BlLkJ1ZmZlci5mcm9tKGIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW5wdXQgc3RyaW5ncyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgIGxldCBvdXQgPSAwO1xuICAgICAgICB3aGlsZSgrK2kgPCBhLmxlbmd0aCl7XG4gICAgICAgICAgICBvdXQgfD0gYS5jaGFyQ29kZUF0KGkpIF4gYi5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQgPT09IDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBIT1RQOiBBbiBITUFDLWJhc2VkIE9uZS10aW1lIFBhc3N3b3JkIEFsZ29yaXRobS5cbiAqIEBzZWUgW1JGQyA0MjI2XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzQyMjYpXG4gKi8gY2xhc3MgSE9UUCB7XG4gICAgLyoqXG4gICAqIERlZmF1bHQgY29uZmlndXJhdGlvbi5cbiAgICogQHR5cGUge3tcbiAgICogICBpc3N1ZXI6IHN0cmluZyxcbiAgICogICBsYWJlbDogc3RyaW5nLFxuICAgKiAgIGlzc3VlckluTGFiZWw6IGJvb2xlYW4sXG4gICAqICAgYWxnb3JpdGhtOiBzdHJpbmcsXG4gICAqICAgZGlnaXRzOiBudW1iZXIsXG4gICAqICAgY291bnRlcjogbnVtYmVyXG4gICAqICAgd2luZG93OiBudW1iZXJcbiAgICogfX1cbiAgICovIHN0YXRpYyBnZXQgZGVmYXVsdHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc3N1ZXI6IFwiXCIsXG4gICAgICAgICAgICBsYWJlbDogXCJPVFBBdXRoXCIsXG4gICAgICAgICAgICBpc3N1ZXJJbkxhYmVsOiB0cnVlLFxuICAgICAgICAgICAgYWxnb3JpdGhtOiBcIlNIQTFcIixcbiAgICAgICAgICAgIGRpZ2l0czogNixcbiAgICAgICAgICAgIGNvdW50ZXI6IDAsXG4gICAgICAgICAgICB3aW5kb3c6IDFcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbiBIT1RQIHRva2VuLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtTZWNyZXR9IGNvbmZpZy5zZWNyZXQgU2VjcmV0IGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuYWxnb3JpdGhtPSdTSEExJ10gSE1BQyBoYXNoaW5nIGFsZ29yaXRobS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuZGlnaXRzPTZdIFRva2VuIGxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuY291bnRlcj0wXSBDb3VudGVyIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUb2tlbi5cbiAgICovIHN0YXRpYyBnZW5lcmF0ZSh7IHNlY3JldCwgYWxnb3JpdGhtID0gSE9UUC5kZWZhdWx0cy5hbGdvcml0aG0sIGRpZ2l0cyA9IEhPVFAuZGVmYXVsdHMuZGlnaXRzLCBjb3VudGVyID0gSE9UUC5kZWZhdWx0cy5jb3VudGVyIH0pIHtcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gaG1hY0RpZ2VzdChhbGdvcml0aG0sIHNlY3JldC5ieXRlcywgdWludERlY29kZShjb3VudGVyKSk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGRpZ2VzdFtkaWdlc3QuYnl0ZUxlbmd0aCAtIDFdICYgMTU7XG4gICAgICAgIGNvbnN0IG90cCA9ICgoZGlnZXN0W29mZnNldF0gJiAxMjcpIDw8IDI0IHwgKGRpZ2VzdFtvZmZzZXQgKyAxXSAmIDI1NSkgPDwgMTYgfCAoZGlnZXN0W29mZnNldCArIDJdICYgMjU1KSA8PCA4IHwgZGlnZXN0W29mZnNldCArIDNdICYgMjU1KSAlIDEwICoqIGRpZ2l0cztcbiAgICAgICAgcmV0dXJuIG90cC50b1N0cmluZygpLnBhZFN0YXJ0KGRpZ2l0cywgXCIwXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICogR2VuZXJhdGVzIGFuIEhPVFAgdG9rZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLmNvdW50ZXI9dGhpcy5jb3VudGVyKytdIENvdW50ZXIgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRva2VuLlxuICAgKi8gZ2VuZXJhdGUoeyBjb3VudGVyID0gdGhpcy5jb3VudGVyKysgfSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBIT1RQLmdlbmVyYXRlKHtcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXG4gICAgICAgICAgICBhbGdvcml0aG06IHRoaXMuYWxnb3JpdGhtLFxuICAgICAgICAgICAgZGlnaXRzOiB0aGlzLmRpZ2l0cyxcbiAgICAgICAgICAgIGNvdW50ZXJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBWYWxpZGF0ZXMgYW4gSE9UUCB0b2tlbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcudG9rZW4gVG9rZW4gdmFsdWUuXG4gICAqIEBwYXJhbSB7U2VjcmV0fSBjb25maWcuc2VjcmV0IFNlY3JldCBrZXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmFsZ29yaXRobT0nU0hBMSddIEhNQUMgaGFzaGluZyBhbGdvcml0aG0uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLmRpZ2l0cz02XSBUb2tlbiBsZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLmNvdW50ZXI9MF0gQ291bnRlciB2YWx1ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcud2luZG93PTFdIFdpbmRvdyBvZiBjb3VudGVyIHZhbHVlcyB0byB0ZXN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfG51bGx9IFRva2VuIGRlbHRhIG9yIG51bGwgaWYgaXQgaXMgbm90IGZvdW5kIGluIHRoZSBzZWFyY2ggd2luZG93LCBpbiB3aGljaCBjYXNlIGl0IHNob3VsZCBiZSBjb25zaWRlcmVkIGludmFsaWQuXG4gICAqLyBzdGF0aWMgdmFsaWRhdGUoeyB0b2tlbiwgc2VjcmV0LCBhbGdvcml0aG0sIGRpZ2l0cyA9IEhPVFAuZGVmYXVsdHMuZGlnaXRzLCBjb3VudGVyID0gSE9UUC5kZWZhdWx0cy5jb3VudGVyLCB3aW5kb3cgPSBIT1RQLmRlZmF1bHRzLndpbmRvdyB9KSB7XG4gICAgICAgIC8vIFJldHVybiBlYXJseSBpZiB0aGUgdG9rZW4gbGVuZ3RoIGRvZXMgbm90IG1hdGNoIHRoZSBkaWdpdCBudW1iZXIuXG4gICAgICAgIGlmICh0b2tlbi5sZW5ndGggIT09IGRpZ2l0cykgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBkZWx0YSA9IG51bGw7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyBpKT0+e1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVkVG9rZW4gPSBIT1RQLmdlbmVyYXRlKHtcbiAgICAgICAgICAgICAgICBzZWNyZXQsXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtLFxuICAgICAgICAgICAgICAgIGRpZ2l0cyxcbiAgICAgICAgICAgICAgICBjb3VudGVyOiBpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aW1pbmdTYWZlRXF1YWwodG9rZW4sIGdlbmVyYXRlZFRva2VuKSkge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gaSAtIGNvdW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrKGNvdW50ZXIpO1xuICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDw9IHdpbmRvdyAmJiBkZWx0YSA9PT0gbnVsbDsgKytpKXtcbiAgICAgICAgICAgIGNoZWNrKGNvdW50ZXIgLSBpKTtcbiAgICAgICAgICAgIGlmIChkZWx0YSAhPT0gbnVsbCkgYnJlYWs7XG4gICAgICAgICAgICBjaGVjayhjb3VudGVyICsgaSk7XG4gICAgICAgICAgICBpZiAoZGVsdGEgIT09IG51bGwpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWx0YTtcbiAgICB9XG4gICAgLyoqXG4gICAqIFZhbGlkYXRlcyBhbiBIT1RQIHRva2VuLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy50b2tlbiBUb2tlbiB2YWx1ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuY291bnRlcj10aGlzLmNvdW50ZXJdIENvdW50ZXIgdmFsdWUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLndpbmRvdz0xXSBXaW5kb3cgb2YgY291bnRlciB2YWx1ZXMgdG8gdGVzdC5cbiAgICogQHJldHVybnMge251bWJlcnxudWxsfSBUb2tlbiBkZWx0YSBvciBudWxsIGlmIGl0IGlzIG5vdCBmb3VuZCBpbiB0aGUgc2VhcmNoIHdpbmRvdywgaW4gd2hpY2ggY2FzZSBpdCBzaG91bGQgYmUgY29uc2lkZXJlZCBpbnZhbGlkLlxuICAgKi8gdmFsaWRhdGUoeyB0b2tlbiwgY291bnRlciA9IHRoaXMuY291bnRlciwgd2luZG93IH0pIHtcbiAgICAgICAgcmV0dXJuIEhPVFAudmFsaWRhdGUoe1xuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBzZWNyZXQ6IHRoaXMuc2VjcmV0LFxuICAgICAgICAgICAgYWxnb3JpdGhtOiB0aGlzLmFsZ29yaXRobSxcbiAgICAgICAgICAgIGRpZ2l0czogdGhpcy5kaWdpdHMsXG4gICAgICAgICAgICBjb3VudGVyLFxuICAgICAgICAgICAgd2luZG93XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICogUmV0dXJucyBhIEdvb2dsZSBBdXRoZW50aWNhdG9yIGtleSBVUkkuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFVSSS5cbiAgICovIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xuICAgICAgICByZXR1cm4gXCJvdHBhdXRoOi8vaG90cC9cIiArIGAke3RoaXMuaXNzdWVyLmxlbmd0aCA+IDAgPyB0aGlzLmlzc3VlckluTGFiZWwgPyBgJHtlKHRoaXMuaXNzdWVyKX06JHtlKHRoaXMubGFiZWwpfT9pc3N1ZXI9JHtlKHRoaXMuaXNzdWVyKX0mYCA6IGAke2UodGhpcy5sYWJlbCl9P2lzc3Vlcj0ke2UodGhpcy5pc3N1ZXIpfSZgIDogYCR7ZSh0aGlzLmxhYmVsKX0/YH1gICsgYHNlY3JldD0ke2UodGhpcy5zZWNyZXQuYmFzZTMyKX0mYCArIGBhbGdvcml0aG09JHtlKHRoaXMuYWxnb3JpdGhtKX0mYCArIGBkaWdpdHM9JHtlKHRoaXMuZGlnaXRzKX0mYCArIGBjb3VudGVyPSR7ZSh0aGlzLmNvdW50ZXIpfWA7XG4gICAgfVxuICAgIC8qKlxuICAgKiBDcmVhdGVzIGFuIEhPVFAgb2JqZWN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5pc3N1ZXI9JyddIEFjY291bnQgcHJvdmlkZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmxhYmVsPSdPVFBBdXRoJ10gQWNjb3VudCBsYWJlbC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmlzc3VlckluTGFiZWw9dHJ1ZV0gSW5jbHVkZSBpc3N1ZXIgcHJlZml4IGluIGxhYmVsLlxuICAgKiBAcGFyYW0ge1NlY3JldHxzdHJpbmd9IFtjb25maWcuc2VjcmV0PVNlY3JldF0gU2VjcmV0IGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuYWxnb3JpdGhtPSdTSEExJ10gSE1BQyBoYXNoaW5nIGFsZ29yaXRobS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuZGlnaXRzPTZdIFRva2VuIGxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuY291bnRlcj0wXSBJbml0aWFsIGNvdW50ZXIgdmFsdWUuXG4gICAqLyBjb25zdHJ1Y3Rvcih7IGlzc3VlciA9IEhPVFAuZGVmYXVsdHMuaXNzdWVyLCBsYWJlbCA9IEhPVFAuZGVmYXVsdHMubGFiZWwsIGlzc3VlckluTGFiZWwgPSBIT1RQLmRlZmF1bHRzLmlzc3VlckluTGFiZWwsIHNlY3JldCA9IG5ldyBTZWNyZXQoKSwgYWxnb3JpdGhtID0gSE9UUC5kZWZhdWx0cy5hbGdvcml0aG0sIGRpZ2l0cyA9IEhPVFAuZGVmYXVsdHMuZGlnaXRzLCBjb3VudGVyID0gSE9UUC5kZWZhdWx0cy5jb3VudGVyIH0gPSB7fSl7XG4gICAgICAgIC8qKlxuICAgICAqIEFjY291bnQgcHJvdmlkZXIuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi8gdGhpcy5pc3N1ZXIgPSBpc3N1ZXI7XG4gICAgICAgIC8qKlxuICAgICAqIEFjY291bnQgbGFiZWwuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi8gdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgICAvKipcbiAgICAgKiBJbmNsdWRlIGlzc3VlciBwcmVmaXggaW4gbGFiZWwuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovIHRoaXMuaXNzdWVySW5MYWJlbCA9IGlzc3VlckluTGFiZWw7XG4gICAgICAgIC8qKlxuICAgICAqIFNlY3JldCBrZXkuXG4gICAgICogQHR5cGUge1NlY3JldH1cbiAgICAgKi8gdGhpcy5zZWNyZXQgPSB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gU2VjcmV0LmZyb21CYXNlMzIoc2VjcmV0KSA6IHNlY3JldDtcbiAgICAgICAgLyoqXG4gICAgICogSE1BQyBoYXNoaW5nIGFsZ29yaXRobS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqLyB0aGlzLmFsZ29yaXRobSA9IGNhbm9uaWNhbGl6ZUFsZ29yaXRobShhbGdvcml0aG0pO1xuICAgICAgICAvKipcbiAgICAgKiBUb2tlbiBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi8gdGhpcy5kaWdpdHMgPSBkaWdpdHM7XG4gICAgICAgIC8qKlxuICAgICAqIEluaXRpYWwgY291bnRlciB2YWx1ZS5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqLyB0aGlzLmNvdW50ZXIgPSBjb3VudGVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUT1RQOiBUaW1lLUJhc2VkIE9uZS1UaW1lIFBhc3N3b3JkIEFsZ29yaXRobS5cbiAqIEBzZWUgW1JGQyA2MjM4XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzYyMzgpXG4gKi8gY2xhc3MgVE9UUCB7XG4gICAgLyoqXG4gICAqIERlZmF1bHQgY29uZmlndXJhdGlvbi5cbiAgICogQHR5cGUge3tcbiAgICogICBpc3N1ZXI6IHN0cmluZyxcbiAgICogICBsYWJlbDogc3RyaW5nLFxuICAgKiAgIGlzc3VlckluTGFiZWw6IGJvb2xlYW4sXG4gICAqICAgYWxnb3JpdGhtOiBzdHJpbmcsXG4gICAqICAgZGlnaXRzOiBudW1iZXIsXG4gICAqICAgcGVyaW9kOiBudW1iZXJcbiAgICogICB3aW5kb3c6IG51bWJlclxuICAgKiB9fVxuICAgKi8gc3RhdGljIGdldCBkZWZhdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzc3VlcjogXCJcIixcbiAgICAgICAgICAgIGxhYmVsOiBcIk9UUEF1dGhcIixcbiAgICAgICAgICAgIGlzc3VlckluTGFiZWw6IHRydWUsXG4gICAgICAgICAgICBhbGdvcml0aG06IFwiU0hBMVwiLFxuICAgICAgICAgICAgZGlnaXRzOiA2LFxuICAgICAgICAgICAgcGVyaW9kOiAzMCxcbiAgICAgICAgICAgIHdpbmRvdzogMVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgY291bnRlci4gaS5lLiB0aGUgbnVtYmVyIG9mIHBlcmlvZHMgc2luY2UgdGltZXN0YW1wIDAuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLnBlcmlvZD0zMF0gVG9rZW4gdGltZS1zdGVwIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy50aW1lc3RhbXA9RGF0ZS5ub3ddIFRpbWVzdGFtcCB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IENvdW50ZXIuXG4gICAqLyBzdGF0aWMgY291bnRlcih7IHBlcmlvZCA9IFRPVFAuZGVmYXVsdHMucGVyaW9kLCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpIH0gPSB7fSkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aW1lc3RhbXAgLyAxMDAwIC8gcGVyaW9kKTtcbiAgICB9XG4gICAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGNvdW50ZXIuIGkuZS4gdGhlIG51bWJlciBvZiBwZXJpb2RzIHNpbmNlIHRpbWVzdGFtcCAwLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy50aW1lc3RhbXA9RGF0ZS5ub3ddIFRpbWVzdGFtcCB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IENvdW50ZXIuXG4gICAqLyBjb3VudGVyKHsgdGltZXN0YW1wID0gRGF0ZS5ub3coKSB9ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIFRPVFAuY291bnRlcih7XG4gICAgICAgICAgICBwZXJpb2Q6IHRoaXMucGVyaW9kLFxuICAgICAgICAgICAgdGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgcmVtYWluaW5nIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHVudGlsIHRoZSBuZXh0IHRva2VuIGlzIGdlbmVyYXRlZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcucGVyaW9kPTMwXSBUb2tlbiB0aW1lLXN0ZXAgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLnRpbWVzdGFtcD1EYXRlLm5vd10gVGltZXN0YW1wIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybnMge251bWJlcn0gY291bnRlci5cbiAgICovIHN0YXRpYyByZW1haW5pbmcoeyBwZXJpb2QgPSBUT1RQLmRlZmF1bHRzLnBlcmlvZCwgdGltZXN0YW1wID0gRGF0ZS5ub3coKSB9ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHBlcmlvZCAqIDEwMDAgLSB0aW1lc3RhbXAgJSAocGVyaW9kICogMTAwMCk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSByZW1haW5pbmcgdGltZSBpbiBtaWxsaXNlY29uZHMgdW50aWwgdGhlIG5leHQgdG9rZW4gaXMgZ2VuZXJhdGVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy50aW1lc3RhbXA9RGF0ZS5ub3ddIFRpbWVzdGFtcCB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IGNvdW50ZXIuXG4gICAqLyByZW1haW5pbmcoeyB0aW1lc3RhbXAgPSBEYXRlLm5vdygpIH0gPSB7fSkge1xuICAgICAgICByZXR1cm4gVE9UUC5yZW1haW5pbmcoe1xuICAgICAgICAgICAgcGVyaW9kOiB0aGlzLnBlcmlvZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIFRPVFAgdG9rZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge1NlY3JldH0gY29uZmlnLnNlY3JldCBTZWNyZXQga2V5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5hbGdvcml0aG09J1NIQTEnXSBITUFDIGhhc2hpbmcgYWxnb3JpdGhtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5kaWdpdHM9Nl0gVG9rZW4gbGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5wZXJpb2Q9MzBdIFRva2VuIHRpbWUtc3RlcCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcudGltZXN0YW1wPURhdGUubm93XSBUaW1lc3RhbXAgdmFsdWUgaW4gbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUb2tlbi5cbiAgICovIHN0YXRpYyBnZW5lcmF0ZSh7IHNlY3JldCwgYWxnb3JpdGhtLCBkaWdpdHMsIHBlcmlvZCA9IFRPVFAuZGVmYXVsdHMucGVyaW9kLCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpIH0pIHtcbiAgICAgICAgcmV0dXJuIEhPVFAuZ2VuZXJhdGUoe1xuICAgICAgICAgICAgc2VjcmV0LFxuICAgICAgICAgICAgYWxnb3JpdGhtLFxuICAgICAgICAgICAgZGlnaXRzLFxuICAgICAgICAgICAgY291bnRlcjogVE9UUC5jb3VudGVyKHtcbiAgICAgICAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIFRPVFAgdG9rZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLnRpbWVzdGFtcD1EYXRlLm5vd10gVGltZXN0YW1wIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybnMge3N0cmluZ30gVG9rZW4uXG4gICAqLyBnZW5lcmF0ZSh7IHRpbWVzdGFtcCA9IERhdGUubm93KCkgfSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBUT1RQLmdlbmVyYXRlKHtcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXG4gICAgICAgICAgICBhbGdvcml0aG06IHRoaXMuYWxnb3JpdGhtLFxuICAgICAgICAgICAgZGlnaXRzOiB0aGlzLmRpZ2l0cyxcbiAgICAgICAgICAgIHBlcmlvZDogdGhpcy5wZXJpb2QsXG4gICAgICAgICAgICB0aW1lc3RhbXBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBWYWxpZGF0ZXMgYSBUT1RQIHRva2VuLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy50b2tlbiBUb2tlbiB2YWx1ZS5cbiAgICogQHBhcmFtIHtTZWNyZXR9IGNvbmZpZy5zZWNyZXQgU2VjcmV0IGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuYWxnb3JpdGhtPSdTSEExJ10gSE1BQyBoYXNoaW5nIGFsZ29yaXRobS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcuZGlnaXRzPTZdIFRva2VuIGxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcucGVyaW9kPTMwXSBUb2tlbiB0aW1lLXN0ZXAgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLnRpbWVzdGFtcD1EYXRlLm5vd10gVGltZXN0YW1wIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcud2luZG93PTFdIFdpbmRvdyBvZiBjb3VudGVyIHZhbHVlcyB0byB0ZXN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfG51bGx9IFRva2VuIGRlbHRhIG9yIG51bGwgaWYgaXQgaXMgbm90IGZvdW5kIGluIHRoZSBzZWFyY2ggd2luZG93LCBpbiB3aGljaCBjYXNlIGl0IHNob3VsZCBiZSBjb25zaWRlcmVkIGludmFsaWQuXG4gICAqLyBzdGF0aWMgdmFsaWRhdGUoeyB0b2tlbiwgc2VjcmV0LCBhbGdvcml0aG0sIGRpZ2l0cywgcGVyaW9kID0gVE9UUC5kZWZhdWx0cy5wZXJpb2QsIHRpbWVzdGFtcCA9IERhdGUubm93KCksIHdpbmRvdyB9KSB7XG4gICAgICAgIHJldHVybiBIT1RQLnZhbGlkYXRlKHtcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgc2VjcmV0LFxuICAgICAgICAgICAgYWxnb3JpdGhtLFxuICAgICAgICAgICAgZGlnaXRzLFxuICAgICAgICAgICAgY291bnRlcjogVE9UUC5jb3VudGVyKHtcbiAgICAgICAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHdpbmRvd1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIFZhbGlkYXRlcyBhIFRPVFAgdG9rZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnLnRva2VuIFRva2VuIHZhbHVlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy50aW1lc3RhbXA9RGF0ZS5ub3ddIFRpbWVzdGFtcCB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLndpbmRvdz0xXSBXaW5kb3cgb2YgY291bnRlciB2YWx1ZXMgdG8gdGVzdC5cbiAgICogQHJldHVybnMge251bWJlcnxudWxsfSBUb2tlbiBkZWx0YSBvciBudWxsIGlmIGl0IGlzIG5vdCBmb3VuZCBpbiB0aGUgc2VhcmNoIHdpbmRvdywgaW4gd2hpY2ggY2FzZSBpdCBzaG91bGQgYmUgY29uc2lkZXJlZCBpbnZhbGlkLlxuICAgKi8gdmFsaWRhdGUoeyB0b2tlbiwgdGltZXN0YW1wLCB3aW5kb3cgfSkge1xuICAgICAgICByZXR1cm4gVE9UUC52YWxpZGF0ZSh7XG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXG4gICAgICAgICAgICBhbGdvcml0aG06IHRoaXMuYWxnb3JpdGhtLFxuICAgICAgICAgICAgZGlnaXRzOiB0aGlzLmRpZ2l0cyxcbiAgICAgICAgICAgIHBlcmlvZDogdGhpcy5wZXJpb2QsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICB3aW5kb3dcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBSZXR1cm5zIGEgR29vZ2xlIEF1dGhlbnRpY2F0b3Iga2V5IFVSSS5cbiAgICogQHJldHVybnMge3N0cmluZ30gVVJJLlxuICAgKi8gdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG4gICAgICAgIHJldHVybiBcIm90cGF1dGg6Ly90b3RwL1wiICsgYCR7dGhpcy5pc3N1ZXIubGVuZ3RoID4gMCA/IHRoaXMuaXNzdWVySW5MYWJlbCA/IGAke2UodGhpcy5pc3N1ZXIpfToke2UodGhpcy5sYWJlbCl9P2lzc3Vlcj0ke2UodGhpcy5pc3N1ZXIpfSZgIDogYCR7ZSh0aGlzLmxhYmVsKX0/aXNzdWVyPSR7ZSh0aGlzLmlzc3Vlcil9JmAgOiBgJHtlKHRoaXMubGFiZWwpfT9gfWAgKyBgc2VjcmV0PSR7ZSh0aGlzLnNlY3JldC5iYXNlMzIpfSZgICsgYGFsZ29yaXRobT0ke2UodGhpcy5hbGdvcml0aG0pfSZgICsgYGRpZ2l0cz0ke2UodGhpcy5kaWdpdHMpfSZgICsgYHBlcmlvZD0ke2UodGhpcy5wZXJpb2QpfWA7XG4gICAgfVxuICAgIC8qKlxuICAgKiBDcmVhdGVzIGEgVE9UUCBvYmplY3QuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmlzc3Vlcj0nJ10gQWNjb3VudCBwcm92aWRlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcubGFiZWw9J09UUEF1dGgnXSBBY2NvdW50IGxhYmVsLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuaXNzdWVySW5MYWJlbD10cnVlXSBJbmNsdWRlIGlzc3VlciBwcmVmaXggaW4gbGFiZWwuXG4gICAqIEBwYXJhbSB7U2VjcmV0fHN0cmluZ30gW2NvbmZpZy5zZWNyZXQ9U2VjcmV0XSBTZWNyZXQga2V5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5hbGdvcml0aG09J1NIQTEnXSBITUFDIGhhc2hpbmcgYWxnb3JpdGhtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5kaWdpdHM9Nl0gVG9rZW4gbGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5wZXJpb2Q9MzBdIFRva2VuIHRpbWUtc3RlcCBkdXJhdGlvbi5cbiAgICovIGNvbnN0cnVjdG9yKHsgaXNzdWVyID0gVE9UUC5kZWZhdWx0cy5pc3N1ZXIsIGxhYmVsID0gVE9UUC5kZWZhdWx0cy5sYWJlbCwgaXNzdWVySW5MYWJlbCA9IFRPVFAuZGVmYXVsdHMuaXNzdWVySW5MYWJlbCwgc2VjcmV0ID0gbmV3IFNlY3JldCgpLCBhbGdvcml0aG0gPSBUT1RQLmRlZmF1bHRzLmFsZ29yaXRobSwgZGlnaXRzID0gVE9UUC5kZWZhdWx0cy5kaWdpdHMsIHBlcmlvZCA9IFRPVFAuZGVmYXVsdHMucGVyaW9kIH0gPSB7fSl7XG4gICAgICAgIC8qKlxuICAgICAqIEFjY291bnQgcHJvdmlkZXIuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi8gdGhpcy5pc3N1ZXIgPSBpc3N1ZXI7XG4gICAgICAgIC8qKlxuICAgICAqIEFjY291bnQgbGFiZWwuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi8gdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgICAvKipcbiAgICAgKiBJbmNsdWRlIGlzc3VlciBwcmVmaXggaW4gbGFiZWwuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovIHRoaXMuaXNzdWVySW5MYWJlbCA9IGlzc3VlckluTGFiZWw7XG4gICAgICAgIC8qKlxuICAgICAqIFNlY3JldCBrZXkuXG4gICAgICogQHR5cGUge1NlY3JldH1cbiAgICAgKi8gdGhpcy5zZWNyZXQgPSB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gU2VjcmV0LmZyb21CYXNlMzIoc2VjcmV0KSA6IHNlY3JldDtcbiAgICAgICAgLyoqXG4gICAgICogSE1BQyBoYXNoaW5nIGFsZ29yaXRobS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqLyB0aGlzLmFsZ29yaXRobSA9IGNhbm9uaWNhbGl6ZUFsZ29yaXRobShhbGdvcml0aG0pO1xuICAgICAgICAvKipcbiAgICAgKiBUb2tlbiBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi8gdGhpcy5kaWdpdHMgPSBkaWdpdHM7XG4gICAgICAgIC8qKlxuICAgICAqIFRva2VuIHRpbWUtc3RlcCBkdXJhdGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqLyB0aGlzLnBlcmlvZCA9IHBlcmlvZDtcbiAgICB9XG59XG5cbi8qKlxuICogS2V5IFVSSSByZWdleCAob3RwYXV0aDovL1RZUEUvW0lTU1VFUjpdTEFCRUw/UEFSQU1FVEVSUykuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovIGNvbnN0IE9UUFVSSV9SRUdFWCA9IC9eb3RwYXV0aDpcXC9cXC8oW2h0XW90cClcXC8oLispXFw/KFtBLVowLTkufl8tXSs9W14/Jl0qKD86JltBLVowLTkufl8tXSs9W14/Jl0qKSopJC9pO1xuLyoqXG4gKiBSRkMgNDY0OCBiYXNlMzIgYWxwaGFiZXQgd2l0aCBwYWQuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovIGNvbnN0IFNFQ1JFVF9SRUdFWCA9IC9eWzItN0EtWl0rPSokL2k7XG4vKipcbiAqIFJlZ2V4IGZvciBzdXBwb3J0ZWQgYWxnb3JpdGhtcy5cbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi8gY29uc3QgQUxHT1JJVEhNX1JFR0VYID0gL15TSEEoPzoxfDIyNHwyNTZ8Mzg0fDUxMnwzLTIyNHwzLTI1NnwzLTM4NHwzLTUxMikkL2k7XG4vKipcbiAqIEludGVnZXIgcmVnZXguXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovIGNvbnN0IElOVEVHRVJfUkVHRVggPSAvXlsrLV0/XFxkKyQvO1xuLyoqXG4gKiBQb3NpdGl2ZSBpbnRlZ2VyIHJlZ2V4LlxuICogQHR5cGUge1JlZ0V4cH1cbiAqLyBjb25zdCBQT1NJVElWRV9JTlRFR0VSX1JFR0VYID0gL15cXCs/WzEtOV1cXGQqJC87XG4vKipcbiAqIEhPVFAvVE9UUCBvYmplY3Qvc3RyaW5nIGNvbnZlcnNpb24uXG4gKiBAc2VlIFtLZXkgVVJJIEZvcm1hdF0oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9nb29nbGUtYXV0aGVudGljYXRvci93aWtpL0tleS1VcmktRm9ybWF0KVxuICovIGNsYXNzIFVSSSB7XG4gICAgLyoqXG4gICAqIFBhcnNlcyBhIEdvb2dsZSBBdXRoZW50aWNhdG9yIGtleSBVUkkgYW5kIHJldHVybnMgYW4gSE9UUC9UT1RQIG9iamVjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVyaSBHb29nbGUgQXV0aGVudGljYXRvciBLZXkgVVJJLlxuICAgKiBAcmV0dXJucyB7SE9UUHxUT1RQfSBIT1RQL1RPVFAgb2JqZWN0LlxuICAgKi8gc3RhdGljIHBhcnNlKHVyaSkge1xuICAgICAgICBsZXQgdXJpR3JvdXBzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdXJpR3JvdXBzID0gdXJpLm1hdGNoKE9UUFVSSV9SRUdFWCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIC8qIEhhbmRsZWQgYmVsb3cgKi8gfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodXJpR3JvdXBzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVSSUVycm9yKFwiSW52YWxpZCBVUkkgZm9ybWF0XCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4dHJhY3QgVVJJIGdyb3Vwcy5cbiAgICAgICAgY29uc3QgdXJpVHlwZSA9IHVyaUdyb3Vwc1sxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB1cmlMYWJlbCA9IHVyaUdyb3Vwc1syXS5zcGxpdCgvKD86OnwlM0EpICooLispL2ksIDIpLm1hcChkZWNvZGVVUklDb21wb25lbnQpO1xuICAgICAgICAvKiogQHR5cGUge09iamVjdC48c3RyaW5nLCBzdHJpbmc+fSAqLyBjb25zdCB1cmlQYXJhbXMgPSB1cmlHcm91cHNbM10uc3BsaXQoXCImXCIpLnJlZHVjZSgoYWNjLCBjdXIpPT57XG4gICAgICAgICAgICBjb25zdCBwYWlyQXJyID0gY3VyLnNwbGl0KC89KC4qKS8sIDIpLm1hcChkZWNvZGVVUklDb21wb25lbnQpO1xuICAgICAgICAgICAgY29uc3QgcGFpcktleSA9IHBhaXJBcnJbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhaXJWYWwgPSBwYWlyQXJyWzFdO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgc3RyaW5nPn0gKi8gY29uc3QgcGFpckFjYyA9IGFjYztcbiAgICAgICAgICAgIHBhaXJBY2NbcGFpcktleV0gPSBwYWlyVmFsO1xuICAgICAgICAgICAgcmV0dXJuIHBhaXJBY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgLy8gJ09UUCcgd2lsbCBiZSBpbnN0YW50aWF0ZWQgd2l0aCAnY29uZmlnJyBhcmd1bWVudC5cbiAgICAgICAgbGV0IE9UUDtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge307XG4gICAgICAgIGlmICh1cmlUeXBlID09PSBcImhvdHBcIikge1xuICAgICAgICAgICAgT1RQID0gSE9UUDtcbiAgICAgICAgICAgIC8vIENvdW50ZXI6IHJlcXVpcmVkXG4gICAgICAgICAgICBpZiAodHlwZW9mIHVyaVBhcmFtcy5jb3VudGVyICE9PSBcInVuZGVmaW5lZFwiICYmIElOVEVHRVJfUkVHRVgudGVzdCh1cmlQYXJhbXMuY291bnRlcikpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuY291bnRlciA9IHBhcnNlSW50KHVyaVBhcmFtcy5jb3VudGVyLCAxMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNaXNzaW5nIG9yIGludmFsaWQgJ2NvdW50ZXInIHBhcmFtZXRlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh1cmlUeXBlID09PSBcInRvdHBcIikge1xuICAgICAgICAgICAgT1RQID0gVE9UUDtcbiAgICAgICAgICAgIC8vIFBlcmlvZDogb3B0aW9uYWxcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJpUGFyYW1zLnBlcmlvZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIGlmIChQT1NJVElWRV9JTlRFR0VSX1JFR0VYLnRlc3QodXJpUGFyYW1zLnBlcmlvZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBlcmlvZCA9IHBhcnNlSW50KHVyaVBhcmFtcy5wZXJpb2QsIDEwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncGVyaW9kJyBwYXJhbWV0ZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gT1RQIHR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGFiZWw6IHJlcXVpcmVkXG4gICAgICAgIC8vIElzc3Vlcjogb3B0aW9uYWxcbiAgICAgICAgaWYgKHR5cGVvZiB1cmlQYXJhbXMuaXNzdWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBjb25maWcuaXNzdWVyID0gdXJpUGFyYW1zLmlzc3VlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJpTGFiZWwubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBjb25maWcubGFiZWwgPSB1cmlMYWJlbFsxXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmlzc3VlciA9PT0gXCJ1bmRlZmluZWRcIiB8fCBjb25maWcuaXNzdWVyID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmlzc3VlciA9IHVyaUxhYmVsWzBdO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh1cmlMYWJlbFswXSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5pc3N1ZXJJbkxhYmVsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25maWcubGFiZWwgPSB1cmlMYWJlbFswXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmlzc3VlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25maWcuaXNzdWVyICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmlzc3VlckluTGFiZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZWNyZXQ6IHJlcXVpcmVkXG4gICAgICAgIGlmICh0eXBlb2YgdXJpUGFyYW1zLnNlY3JldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTRUNSRVRfUkVHRVgudGVzdCh1cmlQYXJhbXMuc2VjcmV0KSkge1xuICAgICAgICAgICAgY29uZmlnLnNlY3JldCA9IHVyaVBhcmFtcy5zZWNyZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWlzc2luZyBvciBpbnZhbGlkICdzZWNyZXQnIHBhcmFtZXRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGdvcml0aG06IG9wdGlvbmFsXG4gICAgICAgIGlmICh0eXBlb2YgdXJpUGFyYW1zLmFsZ29yaXRobSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKEFMR09SSVRITV9SRUdFWC50ZXN0KHVyaVBhcmFtcy5hbGdvcml0aG0pKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmFsZ29yaXRobSA9IHVyaVBhcmFtcy5hbGdvcml0aG07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdhbGdvcml0aG0nIHBhcmFtZXRlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBEaWdpdHM6IG9wdGlvbmFsXG4gICAgICAgIGlmICh0eXBlb2YgdXJpUGFyYW1zLmRpZ2l0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKFBPU0lUSVZFX0lOVEVHRVJfUkVHRVgudGVzdCh1cmlQYXJhbXMuZGlnaXRzKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5kaWdpdHMgPSBwYXJzZUludCh1cmlQYXJhbXMuZGlnaXRzLCAxMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdkaWdpdHMnIHBhcmFtZXRlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE9UUChjb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICogQ29udmVydHMgYW4gSE9UUC9UT1RQIG9iamVjdCB0byBhIEdvb2dsZSBBdXRoZW50aWNhdG9yIGtleSBVUkkuXG4gICAqIEBwYXJhbSB7SE9UUHxUT1RQfSBvdHAgSE9UUC9UT1RQIG9iamVjdC5cbiAgICogQHJldHVybnMge3N0cmluZ30gR29vZ2xlIEF1dGhlbnRpY2F0b3IgS2V5IFVSSS5cbiAgICovIHN0YXRpYyBzdHJpbmdpZnkob3RwKSB7XG4gICAgICAgIGlmIChvdHAgaW5zdGFuY2VvZiBIT1RQIHx8IG90cCBpbnN0YW5jZW9mIFRPVFApIHtcbiAgICAgICAgICAgIHJldHVybiBvdHAudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnSE9UUC9UT1RQJyBvYmplY3RcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIExpYnJhcnkgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi8gY29uc3QgdmVyc2lvbiA9IFwiOS40LjBcIjtcblxuZXhwb3J0IHsgSE9UUCwgU2VjcmV0LCBUT1RQLCBVUkksIHZlcnNpb24gfTtcbiIsICJ2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlcXVhbChmb28sIGJhcikge1xuXHR2YXIgY3RvciwgbGVuO1xuXHRpZiAoZm9vID09PSBiYXIpIHJldHVybiB0cnVlO1xuXG5cdGlmIChmb28gJiYgYmFyICYmIChjdG9yPWZvby5jb25zdHJ1Y3RvcikgPT09IGJhci5jb25zdHJ1Y3Rvcikge1xuXHRcdGlmIChjdG9yID09PSBEYXRlKSByZXR1cm4gZm9vLmdldFRpbWUoKSA9PT0gYmFyLmdldFRpbWUoKTtcblx0XHRpZiAoY3RvciA9PT0gUmVnRXhwKSByZXR1cm4gZm9vLnRvU3RyaW5nKCkgPT09IGJhci50b1N0cmluZygpO1xuXG5cdFx0aWYgKGN0b3IgPT09IEFycmF5KSB7XG5cdFx0XHRpZiAoKGxlbj1mb28ubGVuZ3RoKSA9PT0gYmFyLmxlbmd0aCkge1xuXHRcdFx0XHR3aGlsZSAobGVuLS0gJiYgZGVxdWFsKGZvb1tsZW5dLCBiYXJbbGVuXSkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGxlbiA9PT0gLTE7XG5cdFx0fVxuXG5cdFx0aWYgKCFjdG9yIHx8IHR5cGVvZiBmb28gPT09ICdvYmplY3QnKSB7XG5cdFx0XHRsZW4gPSAwO1xuXHRcdFx0Zm9yIChjdG9yIGluIGZvbykge1xuXHRcdFx0XHRpZiAoaGFzLmNhbGwoZm9vLCBjdG9yKSAmJiArK2xlbiAmJiAhaGFzLmNhbGwoYmFyLCBjdG9yKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZiAoIShjdG9yIGluIGJhcikgfHwgIWRlcXVhbChmb29bY3Rvcl0sIGJhcltjdG9yXSkpIHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBPYmplY3Qua2V5cyhiYXIpLmxlbmd0aCA9PT0gbGVuO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmb28gIT09IGZvbyAmJiBiYXIgIT09IGJhcjtcbn1cbiIsICIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIm5vZGVcIiAvPlxuXG5leHBvcnQgeyB1c2VQcm9taXNlIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuZXhwb3J0IHsgdXNlQ2FjaGVkU3RhdGUgfSBmcm9tIFwiLi91c2VDYWNoZWRTdGF0ZVwiO1xuZXhwb3J0IHsgdXNlQ2FjaGVkUHJvbWlzZSB9IGZyb20gXCIuL3VzZUNhY2hlZFByb21pc2VcIjtcbmV4cG9ydCB7IHVzZUZldGNoIH0gZnJvbSBcIi4vdXNlRmV0Y2hcIjtcbmV4cG9ydCB7IHVzZUV4ZWMgfSBmcm9tIFwiLi91c2VFeGVjXCI7XG5leHBvcnQgeyB1c2VTdHJlYW1KU09OIH0gZnJvbSBcIi4vdXNlU3RyZWFtSlNPTlwiO1xuZXhwb3J0IHsgdXNlU1FMIH0gZnJvbSBcIi4vdXNlU1FMXCI7XG5leHBvcnQgeyB1c2VGb3JtLCBGb3JtVmFsaWRhdGlvbiB9IGZyb20gXCIuL3VzZUZvcm1cIjtcbmV4cG9ydCB7IHVzZUFJIH0gZnJvbSBcIi4vdXNlQUlcIjtcbmV4cG9ydCB7IHVzZUZyZWNlbmN5U29ydGluZyB9IGZyb20gXCIuL3VzZUZyZWNlbmN5U29ydGluZ1wiO1xuZXhwb3J0IHsgdXNlTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vdXNlTG9jYWxTdG9yYWdlXCI7XG5cbmV4cG9ydCB7IGdldEF2YXRhckljb24sIGdldEZhdmljb24sIGdldFByb2dyZXNzSWNvbiB9IGZyb20gXCIuL2ljb25cIjtcblxuZXhwb3J0IHsgT0F1dGhTZXJ2aWNlLCB3aXRoQWNjZXNzVG9rZW4sIGdldEFjY2Vzc1Rva2VuIH0gZnJvbSBcIi4vb2F1dGhcIjtcblxuZXhwb3J0IHsgY3JlYXRlRGVlcGxpbmssIGNyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rLCBjcmVhdGVTY3JpcHRDb21tYW5kRGVlcGxpbmssIERlZXBsaW5rVHlwZSB9IGZyb20gXCIuL2NyZWF0ZURlZXBsaW5rXCI7XG5leHBvcnQgeyBleGVjdXRlU1FMIH0gZnJvbSBcIi4vZXhlY3V0ZVNRTFwiO1xuZXhwb3J0IHsgcnVuQXBwbGVTY3JpcHQgfSBmcm9tIFwiLi9ydW4tYXBwbGVzY3JpcHRcIjtcbmV4cG9ydCB7IHJ1blBvd2VyU2hlbGxTY3JpcHQgfSBmcm9tIFwiLi9ydW4tcG93ZXJzaGVsbC1zY3JpcHRcIjtcbmV4cG9ydCB7IHNob3dGYWlsdXJlVG9hc3QgfSBmcm9tIFwiLi9zaG93RmFpbHVyZVRvYXN0XCI7XG5leHBvcnQgeyB3aXRoQ2FjaGUgfSBmcm9tIFwiLi9jYWNoZVwiO1xuXG5leHBvcnQgdHlwZSB7IFByb21pc2VPcHRpb25zIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuZXhwb3J0IHR5cGUgeyBDYWNoZWRQcm9taXNlT3B0aW9ucyB9IGZyb20gXCIuL3VzZUNhY2hlZFByb21pc2VcIjtcbmV4cG9ydCB0eXBlIHtcbiAgT0F1dGhTZXJ2aWNlT3B0aW9ucyxcbiAgT25BdXRob3JpemVQYXJhbXMsXG4gIFdpdGhBY2Nlc3NUb2tlbkNvbXBvbmVudE9yRm4sXG4gIFByb3ZpZGVyV2l0aERlZmF1bHRDbGllbnRPcHRpb25zLFxuICBQcm92aWRlck9wdGlvbnMsXG59IGZyb20gXCIuL29hdXRoXCI7XG5leHBvcnQgdHlwZSB7IEFzeW5jU3RhdGUsIE11dGF0ZVByb21pc2UgfSBmcm9tIFwiLi90eXBlc1wiO1xuIiwgImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIFJlZk9iamVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQsIExhdW5jaFR5cGUsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlRGVlcE1lbW8gfSBmcm9tIFwiLi91c2VEZWVwTWVtb1wiO1xuaW1wb3J0IHtcbiAgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlLFxuICBNdXRhdGVQcm9taXNlLFxuICBVc2VQcm9taXNlUmV0dXJuVHlwZSxcbiAgQXN5bmNTdGF0ZSxcbiAgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLFxuICBVbndyYXBSZXR1cm4sXG4gIFBhZ2luYXRpb25PcHRpb25zLFxufSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIi4vc2hvd0ZhaWx1cmVUb2FzdFwiO1xuXG5leHBvcnQgdHlwZSBQcm9taXNlT3B0aW9uczxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlIHwgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlPiA9IHtcbiAgLyoqXG4gICAqIEEgcmVmZXJlbmNlIHRvIGFuIGBBYm9ydENvbnRyb2xsZXJgIHRvIGNhbmNlbCBhIHByZXZpb3VzIGNhbGwgd2hlbiB0cmlnZ2VyaW5nIGEgbmV3IG9uZVxuICAgKi9cbiAgYWJvcnRhYmxlPzogUmVmT2JqZWN0PEFib3J0Q29udHJvbGxlciB8IG51bGwgfCB1bmRlZmluZWQ+O1xuICAvKipcbiAgICogV2hldGhlciB0byBhY3R1YWxseSBleGVjdXRlIHRoZSBmdW5jdGlvbiBvciBub3QuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSBvbmUgb2YgdGhlIGZ1bmN0aW9uJ3MgYXJndW1lbnRzIGRlcGVuZHMgb24gc29tZXRoaW5nIHRoYXRcbiAgICogbWlnaHQgbm90IGJlIGF2YWlsYWJsZSByaWdodCBhd2F5IChmb3IgZXhhbXBsZSwgZGVwZW5kcyBvbiBzb21lIHVzZXIgaW5wdXRzKS4gQmVjYXVzZSBSZWFjdCByZXF1aXJlc1xuICAgKiBldmVyeSBob29rcyB0byBiZSBkZWZpbmVkIG9uIHRoZSByZW5kZXIsIHRoaXMgZmxhZyBlbmFibGVzIHlvdSB0byBkZWZpbmUgdGhlIGhvb2sgcmlnaHQgYXdheSBidXRcbiAgICogd2FpdCB1dGlsIHlvdSBoYXZlIGFsbCB0aGUgYXJndW1lbnRzIHJlYWR5IHRvIGV4ZWN1dGUgdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgZXhlY3V0ZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBPcHRpb25zIGZvciB0aGUgZ2VuZXJpYyBmYWlsdXJlIHRvYXN0LlxuICAgKiBJdCBhbGxvd3MgeW91IHRvIGN1c3RvbWl6ZSB0aGUgdGl0bGUsIG1lc3NhZ2UsIGFuZCBwcmltYXJ5IGFjdGlvbiBvZiB0aGUgZmFpbHVyZSB0b2FzdC5cbiAgICovXG4gIGZhaWx1cmVUb2FzdE9wdGlvbnM/OiBQYXJ0aWFsPFBpY2s8VG9hc3QuT3B0aW9ucywgXCJ0aXRsZVwiIHwgXCJwcmltYXJ5QWN0aW9uXCIgfCBcIm1lc3NhZ2VcIj4+O1xuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYW4gZXhlY3V0aW9uIGZhaWxzLiBCeSBkZWZhdWx0IGl0IHdpbGwgbG9nIHRoZSBlcnJvciBhbmQgc2hvd1xuICAgKiBhIGdlbmVyaWMgZmFpbHVyZSB0b2FzdC5cbiAgICovXG4gIG9uRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGFuIGV4ZWN1dGlvbiBzdWNjZWVkcy5cbiAgICovXG4gIG9uRGF0YT86IChkYXRhOiBVbndyYXBSZXR1cm48VD4sIHBhZ2luYXRpb24/OiBQYWdpbmF0aW9uT3B0aW9uczxVbndyYXBSZXR1cm48VD4+KSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGFuIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0XG4gICAqL1xuICBvbldpbGxFeGVjdXRlPzogKHBhcmFtZXRlcnM6IFBhcmFtZXRlcnM8VD4pID0+IHZvaWQ7XG59O1xuXG4vKipcbiAqIFdyYXBzIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgaW4gYW5vdGhlciBmdW5jdGlvbiwgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEByZW1hcmsgVGhpcyBvdmVybG9hZCBzaG91bGQgYmUgdXNlZCB3aGVuIHdvcmtpbmcgd2l0aCBwYWdpbmF0ZWQgZGF0YSBzb3VyY2VzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGltcG9ydCB7IHNldFRpbWVvdXQgfSBmcm9tIFwibm9kZTp0aW1lcnMvcHJvbWlzZXNcIjtcbiAqIGltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG4gKiBpbXBvcnQgeyBMaXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICpcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEsIHBhZ2luYXRpb24gfSA9IHVzZVByb21pc2UoXG4gKiAgICAgKHNlYXJjaFRleHQ6IHN0cmluZykgPT4gYXN5bmMgKG9wdGlvbnM6IHsgcGFnZTogbnVtYmVyIH0pID0+IHtcbiAqICAgICAgIGF3YWl0IHNldFRpbWVvdXQoMjAwKTtcbiAqICAgICAgIGNvbnN0IG5ld0RhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNSB9LCAoX3YsIGluZGV4KSA9PiAoe1xuICogICAgICAgICBpbmRleCxcbiAqICAgICAgICAgcGFnZTogb3B0aW9ucy5wYWdlLFxuICogICAgICAgICB0ZXh0OiBzZWFyY2hUZXh0LFxuICogICAgICAgfSkpO1xuICogICAgICAgcmV0dXJuIHsgZGF0YTogbmV3RGF0YSwgaGFzTW9yZTogb3B0aW9ucy5wYWdlIDwgMTAgfTtcbiAqICAgICB9LFxuICogICAgIFtzZWFyY2hUZXh0XVxuICogICApO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8TGlzdCBpc0xvYWRpbmc9e2lzTG9hZGluZ30gb25TZWFyY2hUZXh0Q2hhbmdlPXtzZXRTZWFyY2hUZXh0fSBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufT5cbiAqICAgICAgIHtkYXRhPy5tYXAoKGl0ZW0pID0+IChcbiAqICAgICAgICAgPExpc3QuSXRlbVxuICogICAgICAgICAgIGtleT17YCR7aXRlbS5wYWdlfSAke2l0ZW0uaW5kZXh9ICR7aXRlbS50ZXh0fWB9XG4gKiAgICAgICAgICAgdGl0bGU9e2BQYWdlICR7aXRlbS5wYWdlfSBJdGVtICR7aXRlbS5pbmRleH1gfVxuICogICAgICAgICAgIHN1YnRpdGxlPXtpdGVtLnRleHR9XG4gKiAgICAgICAgIC8+XG4gKiAgICAgICApKX1cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2U8W10+PihcbiAgZm46IFQsXG4pOiBVc2VQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVByb21pc2U8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZT4oXG4gIGZuOiBULFxuICBhcmdzOiBQYXJhbWV0ZXJzPFQ+LFxuICBvcHRpb25zPzogUHJvbWlzZU9wdGlvbnM8VD4sXG4pOiBVc2VQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4+O1xuXG4vKipcbiAqIFdyYXBzIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEByZW1hcmsgVGhlIGZ1bmN0aW9uIGlzIGFzc3VtZWQgdG8gYmUgY29uc3RhbnQgKGVnLiBjaGFuZ2luZyBpdCB3b24ndCB0cmlnZ2VyIGEgcmV2YWxpZGF0aW9uKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyB1c2VQcm9taXNlIH0gZnJvbSAnQHJheWNhc3QvdXRpbHMnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IGFib3J0YWJsZSA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXI+KCk7XG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhLCByZXZhbGlkYXRlIH0gPSB1c2VQcm9taXNlKGFzeW5jICh1cmw6IHN0cmluZykgPT4ge1xuICogICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IHNpZ25hbDogYWJvcnRhYmxlLmN1cnJlbnQ/LnNpZ25hbCB9KTtcbiAqICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gKiAgICAgcmV0dXJuIHJlc3VsdFxuICogICB9LFxuICogICBbJ2h0dHBzOi8vYXBpLmV4YW1wbGUnXSxcbiAqICAge1xuICogICAgIGFib3J0YWJsZVxuICogICB9KTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPERldGFpbFxuICogICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gKiAgICAgICBtYXJrZG93bj17ZGF0YX1cbiAqICAgICAgIGFjdGlvbnM9e1xuICogICAgICAgICA8QWN0aW9uUGFuZWw+XG4gKiAgICAgICAgICAgPEFjdGlvbiB0aXRsZT1cIlJlbG9hZFwiIG9uQWN0aW9uPXsoKSA9PiByZXZhbGlkYXRlKCl9IC8+XG4gKiAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gKiAgICAgICB9XG4gKiAgICAgLz5cbiAqICAgKTtcbiAqIH07XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVByb21pc2U8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZTxbXT4+KGZuOiBUKTogVXNlUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1Byb21pc2U+KFxuICBmbjogVCxcbiAgYXJnczogUGFyYW1ldGVyczxUPixcbiAgb3B0aW9ucz86IFByb21pc2VPcHRpb25zPFQ+LFxuKTogVXNlUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+PjtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByb21pc2U8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSB8IEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZT4oXG4gIGZuOiBULFxuICBhcmdzPzogUGFyYW1ldGVyczxUPixcbiAgb3B0aW9ucz86IFByb21pc2VPcHRpb25zPFQ+LFxuKTogVXNlUHJvbWlzZVJldHVyblR5cGU8YW55PiB7XG4gIGNvbnN0IGxhc3RDYWxsSWQgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0XSA9IHVzZVN0YXRlPEFzeW5jU3RhdGU8VW53cmFwUmV0dXJuPFQ+Pj4oeyBpc0xvYWRpbmc6IHRydWUgfSk7XG5cbiAgY29uc3QgZm5SZWYgPSB1c2VMYXRlc3QoZm4pO1xuICBjb25zdCBsYXRlc3RBYm9ydGFibGUgPSB1c2VMYXRlc3Qob3B0aW9ucz8uYWJvcnRhYmxlKTtcbiAgY29uc3QgbGF0ZXN0QXJncyA9IHVzZUxhdGVzdChhcmdzIHx8IFtdKTtcbiAgY29uc3QgbGF0ZXN0T25FcnJvciA9IHVzZUxhdGVzdChvcHRpb25zPy5vbkVycm9yKTtcbiAgY29uc3QgbGF0ZXN0T25EYXRhID0gdXNlTGF0ZXN0KG9wdGlvbnM/Lm9uRGF0YSk7XG4gIGNvbnN0IGxhdGVzdE9uV2lsbEV4ZWN1dGUgPSB1c2VMYXRlc3Qob3B0aW9ucz8ub25XaWxsRXhlY3V0ZSk7XG4gIGNvbnN0IGxhdGVzdEZhaWx1cmVUb2FzdCA9IHVzZUxhdGVzdChvcHRpb25zPy5mYWlsdXJlVG9hc3RPcHRpb25zKTtcbiAgY29uc3QgbGF0ZXN0VmFsdWUgPSB1c2VMYXRlc3Qoc3RhdGUuZGF0YSk7XG4gIGNvbnN0IGxhdGVzdENhbGxiYWNrID0gdXNlUmVmPCguLi5hcmdzOiBQYXJhbWV0ZXJzPFQ+KSA9PiBQcm9taXNlPFVud3JhcFJldHVybjxUPj4+KG51bGwpO1xuXG4gIGNvbnN0IHBhZ2luYXRpb25BcmdzUmVmID0gdXNlUmVmPFBhZ2luYXRpb25PcHRpb25zPih7IHBhZ2U6IDAgfSk7XG4gIGNvbnN0IHVzZVBhZ2luYXRpb25SZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBoYXNNb3JlUmVmID0gdXNlUmVmKHRydWUpO1xuICBjb25zdCBwYWdlU2l6ZVJlZiA9IHVzZVJlZig1MCk7XG5cbiAgY29uc3QgYWJvcnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGxhdGVzdEFib3J0YWJsZS5jdXJyZW50KSB7XG4gICAgICBsYXRlc3RBYm9ydGFibGUuY3VycmVudC5jdXJyZW50Py5hYm9ydCgpO1xuICAgICAgbGF0ZXN0QWJvcnRhYmxlLmN1cnJlbnQuY3VycmVudCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuICsrbGFzdENhbGxJZC5jdXJyZW50O1xuICB9LCBbbGF0ZXN0QWJvcnRhYmxlXSk7XG5cbiAgY29uc3QgY2FsbGJhY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoLi4uYXJnczogUGFyYW1ldGVyczxUPik6IFByb21pc2U8VW53cmFwUmV0dXJuPFQ+PiA9PiB7XG4gICAgICBjb25zdCBjYWxsSWQgPSBhYm9ydCgpO1xuXG4gICAgICBsYXRlc3RPbldpbGxFeGVjdXRlLmN1cnJlbnQ/LihhcmdzKTtcblxuICAgICAgc2V0KChwcmV2U3RhdGUpID0+ICh7IC4uLnByZXZTdGF0ZSwgaXNMb2FkaW5nOiB0cnVlIH0pKTtcblxuICAgICAgY29uc3QgcHJvbWlzZU9yUGFnaW5hdGVkUHJvbWlzZSA9IGJpbmRQcm9taXNlSWZOZWVkZWQoZm5SZWYuY3VycmVudCkoLi4uYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yOiBhbnkpIHtcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FsbElkID09PSBsYXN0Q2FsbElkLmN1cnJlbnQpIHtcbiAgICAgICAgICAvLyBoYW5kbGUgZXJyb3JzXG4gICAgICAgICAgaWYgKGxhdGVzdE9uRXJyb3IuY3VycmVudCkge1xuICAgICAgICAgICAgbGF0ZXN0T25FcnJvci5jdXJyZW50KGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGVudmlyb25tZW50LmxhdW5jaFR5cGUgIT09IExhdW5jaFR5cGUuQmFja2dyb3VuZCkge1xuICAgICAgICAgICAgICBzaG93RmFpbHVyZVRvYXN0KGVycm9yLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiRmFpbGVkIHRvIGZldGNoIGxhdGVzdCBkYXRhXCIsXG4gICAgICAgICAgICAgICAgcHJpbWFyeUFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUmV0cnlcIixcbiAgICAgICAgICAgICAgICAgIG9uQWN0aW9uKHRvYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0Q2FsbGJhY2suY3VycmVudD8uKC4uLigobGF0ZXN0QXJncy5jdXJyZW50IHx8IFtdKSBhcyBQYXJhbWV0ZXJzPFQ+KSk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4ubGF0ZXN0RmFpbHVyZVRvYXN0LmN1cnJlbnQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzZXQoeyBlcnJvciwgaXNMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBwcm9taXNlT3JQYWdpbmF0ZWRQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdXNlUGFnaW5hdGlvblJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHByb21pc2VPclBhZ2luYXRlZFByb21pc2UocGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudCkudGhlbihcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRvbyBjb21wbGljYXRlZCBmb3IgVFNcbiAgICAgICAgICAoeyBkYXRhLCBoYXNNb3JlLCBjdXJzb3IgfTogeyBkYXRhOiBVbndyYXBSZXR1cm48VD47IGhhc01vcmU6IGJvb2xlYW47IGN1cnNvcj86IGFueSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FsbElkID09PSBsYXN0Q2FsbElkLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgaWYgKHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50LmN1cnNvciA9IGN1cnNvcjtcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50Lmxhc3RJdGVtID0gZGF0YT8uW2RhdGEubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAobGF0ZXN0T25EYXRhLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBsYXRlc3RPbkRhdGEuY3VycmVudChkYXRhLCBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChoYXNNb3JlKSB7XG4gICAgICAgICAgICAgICAgcGFnZVNpemVSZWYuY3VycmVudCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGhhc01vcmVSZWYuY3VycmVudCA9IGhhc01vcmU7XG5cbiAgICAgICAgICAgICAgc2V0KChwcmV2aW91c0RhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5wYWdlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBpc0xvYWRpbmc6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igd2Uga25vdyBpdCdzIGFuIGFycmF5IGhlcmVcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiAocHJldmlvdXNEYXRhLmRhdGEgfHwgW10pPy5jb25jYXQoZGF0YSksIGlzTG9hZGluZzogZmFsc2UgfTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgICAgICAgICBoYXNNb3JlUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBQcm9taXNlPFVud3JhcFJldHVybjxUPj47XG4gICAgICB9XG5cbiAgICAgIHVzZVBhZ2luYXRpb25SZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHByb21pc2VPclBhZ2luYXRlZFByb21pc2UudGhlbigoZGF0YTogVW53cmFwUmV0dXJuPFQ+KSA9PiB7XG4gICAgICAgIGlmIChjYWxsSWQgPT09IGxhc3RDYWxsSWQuY3VycmVudCkge1xuICAgICAgICAgIGlmIChsYXRlc3RPbkRhdGEuY3VycmVudCkge1xuICAgICAgICAgICAgbGF0ZXN0T25EYXRhLmN1cnJlbnQoZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldCh7IGRhdGEsIGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0sIGhhbmRsZUVycm9yKSBhcyBQcm9taXNlPFVud3JhcFJldHVybjxUPj47XG4gICAgfSxcbiAgICBbXG4gICAgICBsYXRlc3RPbkRhdGEsXG4gICAgICBsYXRlc3RPbkVycm9yLFxuICAgICAgbGF0ZXN0QXJncyxcbiAgICAgIGZuUmVmLFxuICAgICAgc2V0LFxuICAgICAgbGF0ZXN0Q2FsbGJhY2ssXG4gICAgICBsYXRlc3RPbldpbGxFeGVjdXRlLFxuICAgICAgcGFnaW5hdGlvbkFyZ3NSZWYsXG4gICAgICBsYXRlc3RGYWlsdXJlVG9hc3QsXG4gICAgICBhYm9ydCxcbiAgICBdLFxuICApO1xuXG4gIGxhdGVzdENhbGxiYWNrLmN1cnJlbnQgPSBjYWxsYmFjaztcblxuICBjb25zdCByZXZhbGlkYXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIHJlc2V0IHRoZSBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudCA9IHsgcGFnZTogMCB9O1xuXG4gICAgY29uc3QgYXJncyA9IChsYXRlc3RBcmdzLmN1cnJlbnQgfHwgW10pIGFzIFBhcmFtZXRlcnM8VD47XG4gICAgcmV0dXJuIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICB9LCBbY2FsbGJhY2ssIGxhdGVzdEFyZ3NdKTtcblxuICBjb25zdCBtdXRhdGUgPSB1c2VDYWxsYmFjazxNdXRhdGVQcm9taXNlPEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4sIHVuZGVmaW5lZD4+KFxuICAgIGFzeW5jIChhc3luY1VwZGF0ZSwgb3B0aW9ucykgPT4ge1xuICAgICAgbGV0IGRhdGFCZWZvcmVPcHRpbWlzdGljVXBkYXRlOiBBd2FpdGVkPFJldHVyblR5cGU8VD4+IHwgdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm9wdGltaXN0aWNVcGRhdGUpIHtcbiAgICAgICAgICAvLyBjYW5jZWwgdGhlIGluLWZsaWdodCByZXF1ZXN0IHRvIG1ha2Ugc3VyZSBpdCB3b24ndCBvdmVyd3JpdGUgdGhlIG9wdGltaXN0aWMgdXBkYXRlXG4gICAgICAgICAgYWJvcnQoKTtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBcImZ1bmN0aW9uXCIgJiYgb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgZGF0YSBiZWZvcmUgdGhlIG9wdGltaXN0aWMgdXBkYXRlLFxuICAgICAgICAgICAgLy8gYnV0IG9ubHkgaWYgd2UgbmVlZCBpdCAoZWcuIG9ubHkgd2hlbiB3ZSB3YW50IHRvIGF1dG9tYXRpY2FsbHkgcm9sbGJhY2sgYWZ0ZXIpXG4gICAgICAgICAgICBkYXRhQmVmb3JlT3B0aW1pc3RpY1VwZGF0ZSA9IHN0cnVjdHVyZWRDbG9uZShsYXRlc3RWYWx1ZS5jdXJyZW50Py52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IG9wdGlvbnMub3B0aW1pc3RpY1VwZGF0ZTtcbiAgICAgICAgICBzZXQoKHByZXZTdGF0ZSkgPT4gKHsgLi4ucHJldlN0YXRlLCBkYXRhOiB1cGRhdGUocHJldlN0YXRlLmRhdGEpIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXdhaXQgYXN5bmNVcGRhdGU7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zPy5yb2xsYmFja09uRXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IG9wdGlvbnMucm9sbGJhY2tPbkVycm9yO1xuICAgICAgICAgIHNldCgocHJldlN0YXRlKSA9PiAoeyAuLi5wcmV2U3RhdGUsIGRhdGE6IHVwZGF0ZShwcmV2U3RhdGUuZGF0YSkgfSkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnM/Lm9wdGltaXN0aWNVcGRhdGUgJiYgb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBmYWxzZSkge1xuICAgICAgICAgIHNldCgocHJldlN0YXRlKSA9PiAoeyAuLi5wcmV2U3RhdGUsIGRhdGE6IGRhdGFCZWZvcmVPcHRpbWlzdGljVXBkYXRlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAob3B0aW9ucz8uc2hvdWxkUmV2YWxpZGF0ZUFmdGVyICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmIChlbnZpcm9ubWVudC5sYXVuY2hUeXBlID09PSBMYXVuY2hUeXBlLkJhY2tncm91bmQgfHwgZW52aXJvbm1lbnQuY29tbWFuZE1vZGUgPT09IFwibWVudS1iYXJcIikge1xuICAgICAgICAgICAgLy8gd2hlbiBpbiB0aGUgYmFja2dyb3VuZCBvciBpbiBhIG1lbnUgYmFyLCB3ZSBhcmUgZ29pbmcgdG8gYXdhaXQgdGhlIHJldmFsaWRhdGlvblxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIGdldCB0aGUgcmlnaHQgZGF0YSBhdCB0aGUgZW5kIG9mIHRoZSBtdXRhdGlvblxuICAgICAgICAgICAgYXdhaXQgcmV2YWxpZGF0ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXZhbGlkYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbcmV2YWxpZGF0ZSwgbGF0ZXN0VmFsdWUsIHNldCwgYWJvcnRdLFxuICApO1xuXG4gIGNvbnN0IG9uTG9hZE1vcmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5wYWdlICs9IDE7XG4gICAgY29uc3QgYXJncyA9IChsYXRlc3RBcmdzLmN1cnJlbnQgfHwgW10pIGFzIFBhcmFtZXRlcnM8VD47XG4gICAgY2FsbGJhY2soLi4uYXJncyk7XG4gIH0sIFtwYWdpbmF0aW9uQXJnc1JlZiwgbGF0ZXN0QXJncywgY2FsbGJhY2tdKTtcblxuICAvLyByZXZhbGlkYXRlIHdoZW4gdGhlIGFyZ3MgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gcmVzZXQgdGhlIHBhZ2luYXRpb25cbiAgICBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50ID0geyBwYWdlOiAwIH07XG5cbiAgICBpZiAob3B0aW9ucz8uZXhlY3V0ZSAhPT0gZmFsc2UpIHtcbiAgICAgIGNhbGxiYWNrKC4uLigoYXJncyB8fCBbXSkgYXMgUGFyYW1ldGVyczxUPikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjYW5jZWwgdGhlIHByZXZpb3VzIHJlcXVlc3QgaWYgd2UgZG9uJ3Qgd2FudCB0byBleGVjdXRlIGFueW1vcmVcbiAgICAgIGFib3J0KCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3VzZURlZXBNZW1vKFthcmdzLCBvcHRpb25zPy5leGVjdXRlLCBjYWxsYmFja10pLCBsYXRlc3RBYm9ydGFibGUsIHBhZ2luYXRpb25BcmdzUmVmXSk7XG5cbiAgLy8gYWJvcnQgcmVxdWVzdCB3aGVuIHVubW91bnRpbmdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYWJvcnQoKTtcbiAgICB9O1xuICB9LCBbYWJvcnRdKTtcblxuICAvLyB3ZSBvbmx5IHdhbnQgdG8gc2hvdyB0aGUgbG9hZGluZyBpbmRpY2F0b3IgaWYgdGhlIHByb21pc2UgaXMgZXhlY3V0aW5nXG4gIGNvbnN0IGlzTG9hZGluZyA9IG9wdGlvbnM/LmV4ZWN1dGUgIT09IGZhbHNlID8gc3RhdGUuaXNMb2FkaW5nIDogZmFsc2U7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBsb2FkaW5nIGlzIGhhcyBzb21lIGZpeGVkIHZhbHVlIGluIHRoZSBlbnVtIHdoaWNoXG4gIGNvbnN0IHN0YXRlV2l0aExvYWRpbmdGaXhlZDogQXN5bmNTdGF0ZTxBd2FpdGVkPFJldHVyblR5cGU8VD4+PiA9IHsgLi4uc3RhdGUsIGlzTG9hZGluZyB9O1xuXG4gIGNvbnN0IHBhZ2luYXRpb24gPSB1c2VQYWdpbmF0aW9uUmVmLmN1cnJlbnRcbiAgICA/IHtcbiAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplUmVmLmN1cnJlbnQsXG4gICAgICAgIGhhc01vcmU6IGhhc01vcmVSZWYuY3VycmVudCxcbiAgICAgICAgb25Mb2FkTW9yZSxcbiAgICAgIH1cbiAgICA6IHVuZGVmaW5lZDtcblxuICByZXR1cm4geyAuLi5zdGF0ZVdpdGhMb2FkaW5nRml4ZWQsIHJldmFsaWRhdGUsIG11dGF0ZSwgcGFnaW5hdGlvbiB9O1xufVxuXG4vKiogQmluZCB0aGUgZm4gaWYgaXQncyBhIFByb21pc2UgbWV0aG9kICovXG5mdW5jdGlvbiBiaW5kUHJvbWlzZUlmTmVlZGVkPFQ+KGZuOiBUKTogVCB7XG4gIGlmIChmbiA9PT0gKFByb21pc2UuYWxsIGFzIGFueSkpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMgZmluZVxuICAgIHJldHVybiBmbi5iaW5kKFByb21pc2UpO1xuICB9XG4gIGlmIChmbiA9PT0gKFByb21pc2UucmFjZSBhcyBhbnkpKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0aGlzIGlzIGZpbmVcbiAgICByZXR1cm4gZm4uYmluZChQcm9taXNlKTtcbiAgfVxuICBpZiAoZm4gPT09IChQcm9taXNlLnJlc29sdmUgYXMgYW55KSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdGhpcyBpcyBmaW5lXG4gICAgcmV0dXJuIGZuLmJpbmQoUHJvbWlzZSBhcyBhbnkpO1xuICB9XG4gIGlmIChmbiA9PT0gKFByb21pc2UucmVqZWN0IGFzIGFueSkpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMgZmluZVxuICAgIHJldHVybiBmbi5iaW5kKFByb21pc2UpO1xuICB9XG4gIHJldHVybiBmbjtcbn1cbiIsICJpbXBvcnQgeyB1c2VSZWYsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGRlcXVhbCB9IGZyb20gXCJkZXF1YWwvbGl0ZVwiO1xuXG4vKipcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gYmUgbWVtb2l6ZWQgKHVzdWFsbHkgYSBkZXBlbmRlbmN5IGxpc3QpXG4gKiBAcmV0dXJucyBhIG1lbW9pemVkIHZlcnNpb24gb2YgdGhlIHZhbHVlIGFzIGxvbmcgYXMgaXQgcmVtYWlucyBkZWVwbHkgZXF1YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZURlZXBNZW1vPFQ+KHZhbHVlOiBUKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxUPih2YWx1ZSk7XG4gIGNvbnN0IHNpZ25hbFJlZiA9IHVzZVJlZjxudW1iZXI+KDApO1xuXG4gIGlmICghZGVxdWFsKHZhbHVlLCByZWYuY3VycmVudCkpIHtcbiAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICAgIHNpZ25hbFJlZi5jdXJyZW50ICs9IDE7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHJlZi5jdXJyZW50LCBbc2lnbmFsUmVmLmN1cnJlbnRdKTtcbn1cbiIsICJpbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXRlc3Qgc3RhdGUuXG4gKlxuICogVGhpcyBpcyBtb3N0bHkgdXNlZnVsIHRvIGdldCBhY2Nlc3MgdG8gdGhlIGxhdGVzdCB2YWx1ZSBvZiBzb21lIHByb3BzIG9yIHN0YXRlIGluc2lkZSBhbiBhc3luY2hyb25vdXMgY2FsbGJhY2ssIGluc3RlYWQgb2YgdGhhdCB2YWx1ZSBhdCB0aGUgdGltZSB0aGUgY2FsbGJhY2sgd2FzIGNyZWF0ZWQgZnJvbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUxhdGVzdDxUPih2YWx1ZTogVCk6IHsgcmVhZG9ubHkgY3VycmVudDogVCB9IHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKHZhbHVlKTtcbiAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgcmV0dXJuIHJlZjtcbn1cbiIsICJpbXBvcnQgKiBhcyBmcyBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgeyBDbGlwYm9hcmQsIGVudmlyb25tZW50LCBvcGVuLCBUb2FzdCwgc2hvd1RvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuXG4vKipcbiAqIFNob3dzIGEgZmFpbHVyZSBUb2FzdCBmb3IgYSBnaXZlbiBFcnJvci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgc2hvd0hVRCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHJ1bkFwcGxlU2NyaXB0LCBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKCkge1xuICogICB0cnkge1xuICogICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJ1bkFwcGxlU2NyaXB0KFxuICogICAgICAgYFxuICogICAgICAgb24gcnVuIGFyZ3ZcbiAqICAgICAgICAgcmV0dXJuIFwiaGVsbG8sIFwiICYgaXRlbSAxIG9mIGFyZ3YgJiBcIi5cIlxuICogICAgICAgZW5kIHJ1blxuICogICAgICAgYCxcbiAqICAgICAgIFtcIndvcmxkXCJdXG4gKiAgICAgKTtcbiAqICAgICBhd2FpdCBzaG93SFVEKHJlcyk7XG4gKiAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgICAgc2hvd0ZhaWx1cmVUb2FzdChlcnJvciwgeyB0aXRsZTogXCJDb3VsZCBub3QgcnVuIEFwcGxlU2NyaXB0XCIgfSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0ZhaWx1cmVUb2FzdChcbiAgZXJyb3I6IHVua25vd24sXG4gIG9wdGlvbnM/OiBQYXJ0aWFsPFBpY2s8VG9hc3QuT3B0aW9ucywgXCJ0aXRsZVwiIHwgXCJwcmltYXJ5QWN0aW9uXCIgfCBcIm1lc3NhZ2VcIj4+LFxuKSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gIHJldHVybiBzaG93VG9hc3Qoe1xuICAgIHN0eWxlOiBUb2FzdC5TdHlsZS5GYWlsdXJlLFxuICAgIHRpdGxlOiBvcHRpb25zPy50aXRsZSA/PyBcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIsXG4gICAgbWVzc2FnZTogb3B0aW9ucz8ubWVzc2FnZSA/PyBtZXNzYWdlLFxuICAgIHByaW1hcnlBY3Rpb246IG9wdGlvbnM/LnByaW1hcnlBY3Rpb24gPz8gaGFuZGxlRXJyb3JUb2FzdEFjdGlvbihlcnJvciksXG4gICAgc2Vjb25kYXJ5QWN0aW9uOiBvcHRpb25zPy5wcmltYXJ5QWN0aW9uID8gaGFuZGxlRXJyb3JUb2FzdEFjdGlvbihlcnJvcikgOiB1bmRlZmluZWQsXG4gIH0pO1xufVxuXG5jb25zdCBoYW5kbGVFcnJvclRvYXN0QWN0aW9uID0gKGVycm9yOiB1bmtub3duKTogVG9hc3QuQWN0aW9uT3B0aW9ucyA9PiB7XG4gIGxldCBwcml2YXRlRXh0ZW5zaW9uID0gdHJ1ZTtcbiAgbGV0IHRpdGxlID0gXCJbRXh0ZW5zaW9uIE5hbWVdLi4uXCI7XG4gIGxldCBleHRlbnNpb25VUkwgPSBcIlwiO1xuICB0cnkge1xuICAgIGNvbnN0IHBhY2thZ2VKU09OID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocGF0aC5qb2luKGVudmlyb25tZW50LmFzc2V0c1BhdGgsIFwiLi5cIiwgXCJwYWNrYWdlLmpzb25cIiksIFwidXRmOFwiKSk7XG4gICAgdGl0bGUgPSBgWyR7cGFja2FnZUpTT04udGl0bGV9XS4uLmA7XG4gICAgZXh0ZW5zaW9uVVJMID0gYGh0dHBzOi8vcmF5Y2FzdC5jb20vJHtwYWNrYWdlSlNPTi5vd25lciB8fCBwYWNrYWdlSlNPTi5hdXRob3J9LyR7cGFja2FnZUpTT04ubmFtZX1gO1xuICAgIGlmICghcGFja2FnZUpTT04ub3duZXIgfHwgcGFja2FnZUpTT04uYWNjZXNzID09PSBcInB1YmxpY1wiKSB7XG4gICAgICBwcml2YXRlRXh0ZW5zaW9uID0gZmFsc2U7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBuby1vcFxuICB9XG5cbiAgLy8gaWYgaXQncyBhIHByaXZhdGUgZXh0ZW5zaW9uLCB3ZSBjYW4ndCBjb25zdHJ1Y3QgdGhlIFVSTCB0byByZXBvcnQgdGhlIGVycm9yXG4gIC8vIHNvIHdlIGZhbGxiYWNrIHRvIGNvcHlpbmcgdGhlIGVycm9yIHRvIHRoZSBjbGlwYm9hcmRcbiAgY29uc3QgZmFsbGJhY2sgPSBlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50IHx8IHByaXZhdGVFeHRlbnNpb247XG5cbiAgY29uc3Qgc3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3I/LnN0YWNrIHx8IGVycm9yPy5tZXNzYWdlIHx8IFwiXCIgOiBTdHJpbmcoZXJyb3IpO1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGU6IGZhbGxiYWNrID8gXCJDb3B5IExvZ3NcIiA6IFwiUmVwb3J0IEVycm9yXCIsXG4gICAgb25BY3Rpb24odG9hc3QpIHtcbiAgICAgIHRvYXN0LmhpZGUoKTtcbiAgICAgIGlmIChmYWxsYmFjaykge1xuICAgICAgICBDbGlwYm9hcmQuY29weShzdGFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGVuKFxuICAgICAgICAgIGBodHRwczovL2dpdGh1Yi5jb20vcmF5Y2FzdC9leHRlbnNpb25zL2lzc3Vlcy9uZXc/JmxhYmVscz1leHRlbnNpb24lMkNidWcmdGVtcGxhdGU9ZXh0ZW5zaW9uX2J1Z19yZXBvcnQueW1sJnRpdGxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgKX0mZXh0ZW5zaW9uLXVybD0ke2VuY29kZVVSSShleHRlbnNpb25VUkwpfSZkZXNjcmlwdGlvbj0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgIGAjIyMjIEVycm9yOlxuXFxgXFxgXFxgXG4ke3N0YWNrfVxuXFxgXFxgXFxgXG5gLFxuICAgICAgICAgICl9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufTtcbiIsICJpbXBvcnQgeyB1c2VDYWxsYmFjaywgRGlzcGF0Y2gsIFNldFN0YXRlQWN0aW9uLCB1c2VTeW5jRXh0ZXJuYWxTdG9yZSwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VMYXRlc3QgfSBmcm9tIFwiLi91c2VMYXRlc3RcIjtcbmltcG9ydCB7IHJlcGxhY2VyLCByZXZpdmVyIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG5jb25zdCByb290Q2FjaGUgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sKFwiY2FjaGUgd2l0aG91dCBuYW1lc3BhY2VcIik7XG5jb25zdCBjYWNoZU1hcCA9IC8qICNfX1BVUkVfXyAqLyBuZXcgTWFwPHN0cmluZyB8IHN5bWJvbCwgQ2FjaGU+KCk7XG5cbi8qKlxuICogUmV0dXJucyBhIHN0YXRlZnVsIHZhbHVlLCBhbmQgYSBmdW5jdGlvbiB0byB1cGRhdGUgaXQuIFRoZSB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQHJlbWFyayBUaGUgdmFsdWUgbmVlZHMgdG8gYmUgSlNPTiBzZXJpYWxpemFibGUuXG4gKlxuICogQHBhcmFtIGtleSAtIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgc3RhdGUuIFRoaXMgY2FuIGJlIHVzZWQgdG8gc2hhcmUgdGhlIHN0YXRlIGFjcm9zcyBjb21wb25lbnRzIGFuZC9vciBjb21tYW5kcy5cbiAqIEBwYXJhbSBpbml0aWFsU3RhdGUgLSBUaGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgc3RhdGUgaWYgdGhlcmUgYXJlbid0IGFueSBpbiB0aGUgQ2FjaGUgeWV0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkU3RhdGU8VD4oXG4gIGtleTogc3RyaW5nLFxuICBpbml0aWFsU3RhdGU6IFQsXG4gIGNvbmZpZz86IHsgY2FjaGVOYW1lc3BhY2U/OiBzdHJpbmcgfSxcbik6IFtULCBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxUPj5dO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlZFN0YXRlPFQgPSB1bmRlZmluZWQ+KGtleTogc3RyaW5nKTogW1QgfCB1bmRlZmluZWQsIERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFQgfCB1bmRlZmluZWQ+Pl07XG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkU3RhdGU8VD4oXG4gIGtleTogc3RyaW5nLFxuICBpbml0aWFsU3RhdGU/OiBULFxuICBjb25maWc/OiB7IGNhY2hlTmFtZXNwYWNlPzogc3RyaW5nIH0sXG4pOiBbVCwgRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248VD4+XSB7XG4gIGNvbnN0IGNhY2hlS2V5ID0gY29uZmlnPy5jYWNoZU5hbWVzcGFjZSB8fCByb290Q2FjaGU7XG4gIGNvbnN0IGNhY2hlID1cbiAgICBjYWNoZU1hcC5nZXQoY2FjaGVLZXkpIHx8IGNhY2hlTWFwLnNldChjYWNoZUtleSwgbmV3IENhY2hlKHsgbmFtZXNwYWNlOiBjb25maWc/LmNhY2hlTmFtZXNwYWNlIH0pKS5nZXQoY2FjaGVLZXkpO1xuXG4gIGlmICghY2FjaGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNhY2hlXCIpO1xuICB9XG5cbiAgY29uc3Qga2V5UmVmID0gdXNlTGF0ZXN0KGtleSk7XG4gIGNvbnN0IGluaXRpYWxWYWx1ZVJlZiA9IHVzZUxhdGVzdChpbml0aWFsU3RhdGUpO1xuXG4gIGNvbnN0IGNhY2hlZFN0YXRlID0gdXNlU3luY0V4dGVybmFsU3RvcmUoY2FjaGUuc3Vic2NyaWJlLCAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5UmVmLmN1cnJlbnQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGdldCBDYWNoZSBkYXRhOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc3RhdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGNhY2hlZFN0YXRlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAoY2FjaGVkU3RhdGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNhY2hlZFN0YXRlLCByZXZpdmVyKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB0aGUgZGF0YSBnb3QgY29ycnVwdGVkIHNvbWVob3dcbiAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIGNhY2hlZCBkYXRhIGlzIGNvcnJ1cHRlZFwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gaW5pdGlhbFZhbHVlUmVmLmN1cnJlbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpbml0aWFsVmFsdWVSZWYuY3VycmVudDtcbiAgICB9XG4gIH0sIFtjYWNoZWRTdGF0ZSwgaW5pdGlhbFZhbHVlUmVmXSk7XG5cbiAgY29uc3Qgc3RhdGVSZWYgPSB1c2VMYXRlc3Qoc3RhdGUpO1xuXG4gIGNvbnN0IHNldFN0YXRlQW5kQ2FjaGUgPSB1c2VDYWxsYmFjayhcbiAgICAodXBkYXRlcjogU2V0U3RhdGVBY3Rpb248VD4pID0+IHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMgc3RydWdnbGVzIHRvIGluZmVyIHRoZSB0eXBlcyBhcyBUIGNvdWxkIHBvdGVudGlhbGx5IGJlIGEgZnVuY3Rpb25cbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdHlwZW9mIHVwZGF0ZXIgPT09IFwiZnVuY3Rpb25cIiA/IHVwZGF0ZXIoc3RhdGVSZWYuY3VycmVudCkgOiB1cGRhdGVyO1xuICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBjYWNoZS5zZXQoa2V5UmVmLmN1cnJlbnQsIFwidW5kZWZpbmVkXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlLCByZXBsYWNlcik7XG4gICAgICAgIGNhY2hlLnNldChrZXlSZWYuY3VycmVudCwgc3RyaW5naWZpZWRWYWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3VmFsdWU7XG4gICAgfSxcbiAgICBbY2FjaGUsIGtleVJlZiwgc3RhdGVSZWZdLFxuICApO1xuXG4gIHJldHVybiBbc3RhdGUsIHNldFN0YXRlQW5kQ2FjaGVdO1xufVxuIiwgImltcG9ydCBjcnlwdG8gZnJvbSBcIm5vZGU6Y3J5cHRvXCI7XG5pbXBvcnQgeyB0eXBlSGFzaGVyIH0gZnJvbSBcIi4vdmVuZG9ycy90eXBlLWhhc2hlclwiO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VyKHRoaXM6IGFueSwga2V5OiBzdHJpbmcsIF92YWx1ZTogdW5rbm93bikge1xuICBjb25zdCB2YWx1ZSA9IHRoaXNba2V5XTtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHJldHVybiBgX19yYXljYXN0X2NhY2hlZF9kYXRlX18ke3ZhbHVlLnRvSVNPU3RyaW5nKCl9YDtcbiAgfVxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSkge1xuICAgIHJldHVybiBgX19yYXljYXN0X2NhY2hlZF9idWZmZXJfXyR7dmFsdWUudG9TdHJpbmcoXCJiYXNlNjRcIil9YDtcbiAgfVxuICByZXR1cm4gX3ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2aXZlcihfa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUuc3RhcnRzV2l0aChcIl9fcmF5Y2FzdF9jYWNoZWRfZGF0ZV9fXCIpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlLnJlcGxhY2UoXCJfX3JheWNhc3RfY2FjaGVkX2RhdGVfX1wiLCBcIlwiKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS5zdGFydHNXaXRoKFwiX19yYXljYXN0X2NhY2hlZF9idWZmZXJfX1wiKSkge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZS5yZXBsYWNlKFwiX19yYXljYXN0X2NhY2hlZF9idWZmZXJfX1wiLCBcIlwiKSwgXCJiYXNlNjRcIik7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzaChvYmplY3Q6IGFueSkge1xuICBjb25zdCBoYXNoaW5nU3RyZWFtID0gY3J5cHRvLmNyZWF0ZUhhc2goXCJzaGExXCIpO1xuICBjb25zdCBoYXNoZXIgPSB0eXBlSGFzaGVyKGhhc2hpbmdTdHJlYW0pO1xuICBoYXNoZXIuZGlzcGF0Y2gob2JqZWN0KTtcblxuICByZXR1cm4gaGFzaGluZ1N0cmVhbS5kaWdlc3QoXCJoZXhcIik7XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IGNyeXB0byBmcm9tIFwibm9kZTpjcnlwdG9cIjtcblxuLyoqIENoZWNrIGlmIHRoZSBnaXZlbiBmdW5jdGlvbiBpcyBhIG5hdGl2ZSBmdW5jdGlvbiAqL1xuZnVuY3Rpb24gaXNOYXRpdmVGdW5jdGlvbihmOiBhbnkpIHtcbiAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgZXhwID0gL15mdW5jdGlvblxccytcXHcqXFxzKlxcKFxccypcXClcXHMqe1xccytcXFtuYXRpdmUgY29kZVxcXVxccyt9JC9pO1xuICByZXR1cm4gZXhwLmV4ZWMoRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZikpICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBoYXNoUmVwbGFjZXIodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykge1xuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR5cGVIYXNoZXIoXG4gIHdyaXRlVG86XG4gICAgfCBjcnlwdG8uSGFzaFxuICAgIHwge1xuICAgICAgICBidWY6IHN0cmluZztcbiAgICAgICAgd3JpdGU6IChiOiBhbnkpID0+IHZvaWQ7XG4gICAgICAgIGVuZDogKGI6IGFueSkgPT4gdm9pZDtcbiAgICAgICAgcmVhZDogKCkgPT4gc3RyaW5nO1xuICAgICAgfSxcbiAgY29udGV4dDogYW55W10gPSBbXSxcbikge1xuICBmdW5jdGlvbiB3cml0ZShzdHI6IHN0cmluZykge1xuICAgIGlmIChcInVwZGF0ZVwiIGluIHdyaXRlVG8pIHtcbiAgICAgIHJldHVybiB3cml0ZVRvLnVwZGF0ZShzdHIsIFwidXRmOFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHdyaXRlVG8ud3JpdGUoc3RyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRpc3BhdGNoOiBmdW5jdGlvbiAodmFsdWU6IGFueSkge1xuICAgICAgdmFsdWUgPSBoYXNoUmVwbGFjZXIodmFsdWUpO1xuXG4gICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHRoaXNbXCJfbnVsbFwiXSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzW1wiX1wiICsgdHlwZV0odmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgX29iamVjdDogZnVuY3Rpb24gKG9iamVjdDogYW55KSB7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gL1xcW29iamVjdCAoLiopXFxdL2k7XG4gICAgICBjb25zdCBvYmpTdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICAgIGxldCBvYmpUeXBlID0gcGF0dGVybi5leGVjKG9ialN0cmluZyk/LlsxXSA/PyBcInVua25vd246W1wiICsgb2JqU3RyaW5nICsgXCJdXCI7XG4gICAgICBvYmpUeXBlID0gb2JqVHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBsZXQgb2JqZWN0TnVtYmVyID0gbnVsbCBhcyBhbnk7XG5cbiAgICAgIGlmICgob2JqZWN0TnVtYmVyID0gY29udGV4dC5pbmRleE9mKG9iamVjdCkpID49IDApIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaChcIltDSVJDVUxBUjpcIiArIG9iamVjdE51bWJlciArIFwiXVwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGV4dC5wdXNoKG9iamVjdCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSkge1xuICAgICAgICB3cml0ZShcImJ1ZmZlcjpcIik7XG4gICAgICAgIHJldHVybiB3cml0ZShvYmplY3QudG9TdHJpbmcoXCJ1dGY4XCIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9ialR5cGUgIT09IFwib2JqZWN0XCIgJiYgb2JqVHlwZSAhPT0gXCJmdW5jdGlvblwiICYmIG9ialR5cGUgIT09IFwiYXN5bmNmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHRoaXNbXCJfXCIgKyBvYmpUeXBlXSkge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICB0aGlzW1wiX1wiICsgb2JqVHlwZV0ob2JqZWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gb2JqZWN0IHR5cGUgXCInICsgb2JqVHlwZSArICdcIicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gICAgICAgIGtleXMgPSBrZXlzLnNvcnQoKTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIGluY29ycG9yYXRlIHNwZWNpYWwgcHJvcGVydGllcywgc29cbiAgICAgICAgLy8gVHlwZXMgd2l0aCBkaWZmZXJlbnQgcHJvdG90eXBlcyB3aWxsIHByb2R1Y2VcbiAgICAgICAgLy8gYSBkaWZmZXJlbnQgaGFzaCBhbmQgb2JqZWN0cyBkZXJpdmVkIGZyb21cbiAgICAgICAgLy8gZGlmZmVyZW50IGZ1bmN0aW9ucyAoYG5ldyBGb29gLCBgbmV3IEJhcmApIHdpbGxcbiAgICAgICAgLy8gcHJvZHVjZSBkaWZmZXJlbnQgaGFzaGVzLlxuICAgICAgICAvLyBXZSBuZXZlciBkbyB0aGlzIGZvciBuYXRpdmUgZnVuY3Rpb25zIHNpbmNlIHNvbWVcbiAgICAgICAgLy8gc2VlbSB0byBicmVhayBiZWNhdXNlIG9mIHRoYXQuXG4gICAgICAgIGlmICghaXNOYXRpdmVGdW5jdGlvbihvYmplY3QpKSB7XG4gICAgICAgICAga2V5cy5zcGxpY2UoMCwgMCwgXCJwcm90b3R5cGVcIiwgXCJfX3Byb3RvX19cIiwgXCJjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdyaXRlKFwib2JqZWN0OlwiICsga2V5cy5sZW5ndGggKyBcIjpcIik7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4ga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBzZWxmLmRpc3BhdGNoKGtleSk7XG4gICAgICAgICAgd3JpdGUoXCI6XCIpO1xuICAgICAgICAgIHNlbGYuZGlzcGF0Y2gob2JqZWN0W2tleV0pO1xuICAgICAgICAgIHdyaXRlKFwiLFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBfYXJyYXk6IGZ1bmN0aW9uIChhcnI6IGFueVtdLCB1bm9yZGVyZWQ6IGJvb2xlYW4pIHtcbiAgICAgIHVub3JkZXJlZCA9IHR5cGVvZiB1bm9yZGVyZWQgIT09IFwidW5kZWZpbmVkXCIgPyB1bm9yZGVyZWQgOiBmYWxzZTsgLy8gZGVmYXVsdCB0byBvcHRpb25zLnVub3JkZXJlZEFycmF5c1xuXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHdyaXRlKFwiYXJyYXk6XCIgKyBhcnIubGVuZ3RoICsgXCI6XCIpO1xuICAgICAgaWYgKCF1bm9yZGVyZWQgfHwgYXJyLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeTogYW55KSB7XG4gICAgICAgICAgc2VsZi5kaXNwYXRjaChlbnRyeSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZSB1bm9yZGVyZWQgY2FzZSBpcyBhIGxpdHRsZSBtb3JlIGNvbXBsaWNhdGVkOlxuICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2Fub25pY2FsIG9yZGVyaW5nIG9uIG9iamVjdHMsXG4gICAgICAvLyBpLmUuIHthOjF9IDwge2E6Mn0gYW5kIHthOjF9ID4ge2E6Mn0gYXJlIGJvdGggZmFsc2UsXG4gICAgICAvLyB3ZSBmaXJzdCBzZXJpYWxpemUgZWFjaCBlbnRyeSB1c2luZyBhIFBhc3NUaHJvdWdoIHN0cmVhbVxuICAgICAgLy8gYmVmb3JlIHNvcnRpbmcuXG4gICAgICAvLyBhbHNvOiB3ZSBjYW7igJl0IHVzZSB0aGUgc2FtZSBjb250ZXh0IGFycmF5IGZvciBhbGwgZW50cmllc1xuICAgICAgLy8gc2luY2UgdGhlIG9yZGVyIG9mIGhhc2hpbmcgc2hvdWxkICpub3QqIG1hdHRlci4gaW5zdGVhZCxcbiAgICAgIC8vIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGFkZGl0aW9ucyB0byBhIGNvcHkgb2YgdGhlIGNvbnRleHQgYXJyYXlcbiAgICAgIC8vIGFuZCBhZGQgYWxsIG9mIHRoZW0gdG8gdGhlIGdsb2JhbCBjb250ZXh0IGFycmF5IHdoZW4gd2XigJlyZSBkb25lXG4gICAgICBsZXQgY29udGV4dEFkZGl0aW9uczogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBhcnIubWFwKGZ1bmN0aW9uIChlbnRyeTogYW55KSB7XG4gICAgICAgIGNvbnN0IHN0cm0gPSBQYXNzVGhyb3VnaCgpO1xuICAgICAgICBjb25zdCBsb2NhbENvbnRleHQgPSBjb250ZXh0LnNsaWNlKCk7IC8vIG1ha2UgY29weVxuICAgICAgICBjb25zdCBoYXNoZXIgPSB0eXBlSGFzaGVyKHN0cm0sIGxvY2FsQ29udGV4dCk7XG4gICAgICAgIGhhc2hlci5kaXNwYXRjaChlbnRyeSk7XG4gICAgICAgIC8vIHRha2Ugb25seSB3aGF0IHdhcyBhZGRlZCB0byBsb2NhbENvbnRleHQgYW5kIGFwcGVuZCBpdCB0byBjb250ZXh0QWRkaXRpb25zXG4gICAgICAgIGNvbnRleHRBZGRpdGlvbnMgPSBjb250ZXh0QWRkaXRpb25zLmNvbmNhdChsb2NhbENvbnRleHQuc2xpY2UoY29udGV4dC5sZW5ndGgpKTtcbiAgICAgICAgcmV0dXJuIHN0cm0ucmVhZCgpLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnRleHQgPSBjb250ZXh0LmNvbmNhdChjb250ZXh0QWRkaXRpb25zKTtcbiAgICAgIGVudHJpZXMuc29ydCgpO1xuICAgICAgdGhpcy5fYXJyYXkoZW50cmllcywgZmFsc2UpO1xuICAgIH0sXG4gICAgX2RhdGU6IGZ1bmN0aW9uIChkYXRlOiBEYXRlKSB7XG4gICAgICB3cml0ZShcImRhdGU6XCIgKyBkYXRlLnRvSlNPTigpKTtcbiAgICB9LFxuICAgIF9zeW1ib2w6IGZ1bmN0aW9uIChzeW06IHN5bWJvbCkge1xuICAgICAgd3JpdGUoXCJzeW1ib2w6XCIgKyBzeW0udG9TdHJpbmcoKSk7XG4gICAgfSxcbiAgICBfZXJyb3I6IGZ1bmN0aW9uIChlcnI6IEVycm9yKSB7XG4gICAgICB3cml0ZShcImVycm9yOlwiICsgZXJyLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX2Jvb2xlYW46IGZ1bmN0aW9uIChib29sOiBib29sZWFuKSB7XG4gICAgICB3cml0ZShcImJvb2w6XCIgKyBib29sLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX3N0cmluZzogZnVuY3Rpb24gKHN0cmluZzogc3RyaW5nKSB7XG4gICAgICB3cml0ZShcInN0cmluZzpcIiArIHN0cmluZy5sZW5ndGggKyBcIjpcIik7XG4gICAgICB3cml0ZShzdHJpbmcudG9TdHJpbmcoKSk7XG4gICAgfSxcbiAgICBfZnVuY3Rpb246IGZ1bmN0aW9uIChmbjogYW55KSB7XG4gICAgICB3cml0ZShcImZuOlwiKTtcbiAgICAgIGlmIChpc05hdGl2ZUZ1bmN0aW9uKGZuKSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoKFwiW25hdGl2ZV1cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc3BhdGNoKGZuLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgd2UgY2FuIHN0aWxsIGRpc3Rpbmd1aXNoIG5hdGl2ZSBmdW5jdGlvbnNcbiAgICAgIC8vIGJ5IHRoZWlyIG5hbWUsIG90aGVyd2lzZSBTdHJpbmcgYW5kIEZ1bmN0aW9uIHdpbGxcbiAgICAgIC8vIGhhdmUgdGhlIHNhbWUgaGFzaFxuICAgICAgdGhpcy5kaXNwYXRjaChcImZ1bmN0aW9uLW5hbWU6XCIgKyBTdHJpbmcoZm4ubmFtZSkpO1xuXG4gICAgICB0aGlzLl9vYmplY3QoZm4pO1xuICAgIH0sXG4gICAgX251bWJlcjogZnVuY3Rpb24gKG51bWJlcjogbnVtYmVyKSB7XG4gICAgICB3cml0ZShcIm51bWJlcjpcIiArIG51bWJlci50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIF94bWw6IGZ1bmN0aW9uICh4bWw6IGFueSkge1xuICAgICAgd3JpdGUoXCJ4bWw6XCIgKyB4bWwudG9TdHJpbmcoKSk7XG4gICAgfSxcbiAgICBfbnVsbDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJOdWxsXCIpO1xuICAgIH0sXG4gICAgX3VuZGVmaW5lZDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJVbmRlZmluZWRcIik7XG4gICAgfSxcbiAgICBfcmVnZXhwOiBmdW5jdGlvbiAocmVnZXg6IFJlZ0V4cCkge1xuICAgICAgd3JpdGUoXCJyZWdleDpcIiArIHJlZ2V4LnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX3VpbnQ4YXJyYXk6IGZ1bmN0aW9uIChhcnI6IFVpbnQ4QXJyYXkpIHtcbiAgICAgIHdyaXRlKFwidWludDhhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX3VpbnQ4Y2xhbXBlZGFycmF5OiBmdW5jdGlvbiAoYXJyOiBVaW50OENsYW1wZWRBcnJheSkge1xuICAgICAgd3JpdGUoXCJ1aW50OGNsYW1wZWRhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2ludDhhcnJheTogZnVuY3Rpb24gKGFycjogSW50OEFycmF5KSB7XG4gICAgICB3cml0ZShcImludDhhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX3VpbnQxNmFycmF5OiBmdW5jdGlvbiAoYXJyOiBVaW50MTZBcnJheSkge1xuICAgICAgd3JpdGUoXCJ1aW50MTZhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2ludDE2YXJyYXk6IGZ1bmN0aW9uIChhcnI6IEludDE2QXJyYXkpIHtcbiAgICAgIHdyaXRlKFwiaW50MTZhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX3VpbnQzMmFycmF5OiBmdW5jdGlvbiAoYXJyOiBVaW50MzJBcnJheSkge1xuICAgICAgd3JpdGUoXCJ1aW50MzJhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2ludDMyYXJyYXk6IGZ1bmN0aW9uIChhcnI6IEludDMyQXJyYXkpIHtcbiAgICAgIHdyaXRlKFwiaW50MzJhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2Zsb2F0MzJhcnJheTogZnVuY3Rpb24gKGFycjogRmxvYXQzMkFycmF5KSB7XG4gICAgICB3cml0ZShcImZsb2F0MzJhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2Zsb2F0NjRhcnJheTogZnVuY3Rpb24gKGFycjogRmxvYXQ2NEFycmF5KSB7XG4gICAgICB3cml0ZShcImZsb2F0NjRhcnJheTpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycikpO1xuICAgIH0sXG4gICAgX2FycmF5YnVmZmVyOiBmdW5jdGlvbiAoYXJyOiBBcnJheUJ1ZmZlcikge1xuICAgICAgd3JpdGUoXCJhcnJheWJ1ZmZlcjpcIik7XG4gICAgICB0aGlzLmRpc3BhdGNoKG5ldyBVaW50OEFycmF5KGFycikpO1xuICAgIH0sXG4gICAgX3VybDogZnVuY3Rpb24gKHVybDogVVJMKSB7XG4gICAgICB3cml0ZShcInVybDpcIiArIHVybC50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIF9tYXA6IGZ1bmN0aW9uIChtYXA6IE1hcDxhbnksIGFueT4pIHtcbiAgICAgIHdyaXRlKFwibWFwOlwiKTtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmZyb20obWFwKTtcbiAgICAgIHRoaXMuX2FycmF5KGFyciwgdHJ1ZSk7XG4gICAgfSxcbiAgICBfc2V0OiBmdW5jdGlvbiAoc2V0OiBTZXQ8YW55Pikge1xuICAgICAgd3JpdGUoXCJzZXQ6XCIpO1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShzZXQpO1xuICAgICAgdGhpcy5fYXJyYXkoYXJyLCB0cnVlKTtcbiAgICB9LFxuICAgIF9maWxlOiBmdW5jdGlvbiAoZmlsZTogYW55KSB7XG4gICAgICB3cml0ZShcImZpbGU6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChbZmlsZS5uYW1lLCBmaWxlLnNpemUsIGZpbGUudHlwZSwgZmlsZS5sYXN0TW9kaWZpZWRdKTtcbiAgICB9LFxuICAgIF9ibG9iOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgXCJIYXNoaW5nIEJsb2Igb2JqZWN0cyBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZFxcblwiICtcbiAgICAgICAgICBcIihzZWUgaHR0cHM6Ly9naXRodWIuY29tL3B1bGVvcy9vYmplY3QtaGFzaC9pc3N1ZXMvMjYpXFxuXCIgK1xuICAgICAgICAgICdVc2UgXCJvcHRpb25zLnJlcGxhY2VyXCIgb3IgXCJvcHRpb25zLmlnbm9yZVVua25vd25cIlxcbicsXG4gICAgICApO1xuICAgIH0sXG4gICAgX2RvbXdpbmRvdzogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJkb213aW5kb3dcIik7XG4gICAgfSxcbiAgICBfYmlnaW50OiBmdW5jdGlvbiAobnVtYmVyOiBiaWdpbnQpIHtcbiAgICAgIHdyaXRlKFwiYmlnaW50OlwiICsgbnVtYmVyLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgLyogTm9kZS5qcyBzdGFuZGFyZCBuYXRpdmUgb2JqZWN0cyAqL1xuICAgIF9wcm9jZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInByb2Nlc3NcIik7XG4gICAgfSxcbiAgICBfdGltZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwidGltZXJcIik7XG4gICAgfSxcbiAgICBfcGlwZTogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJwaXBlXCIpO1xuICAgIH0sXG4gICAgX3RjcDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJ0Y3BcIik7XG4gICAgfSxcbiAgICBfdWRwOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInVkcFwiKTtcbiAgICB9LFxuICAgIF90dHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwidHR5XCIpO1xuICAgIH0sXG4gICAgX3N0YXR3YXRjaGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInN0YXR3YXRjaGVyXCIpO1xuICAgIH0sXG4gICAgX3NlY3VyZWNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwic2VjdXJlY29udGV4dFwiKTtcbiAgICB9LFxuICAgIF9jb25uZWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcImNvbm5lY3Rpb25cIik7XG4gICAgfSxcbiAgICBfemxpYjogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJ6bGliXCIpO1xuICAgIH0sXG4gICAgX2NvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiY29udGV4dFwiKTtcbiAgICB9LFxuICAgIF9ub2Rlc2NyaXB0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcIm5vZGVzY3JpcHRcIik7XG4gICAgfSxcbiAgICBfaHR0cHBhcnNlcjogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJodHRwcGFyc2VyXCIpO1xuICAgIH0sXG4gICAgX2RhdGF2aWV3OiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcImRhdGF2aWV3XCIpO1xuICAgIH0sXG4gICAgX3NpZ25hbDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJzaWduYWxcIik7XG4gICAgfSxcbiAgICBfZnNldmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJmc2V2ZW50XCIpO1xuICAgIH0sXG4gICAgX3Rsc3dyYXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwidGxzd3JhcFwiKTtcbiAgICB9LFxuICB9O1xufVxuXG4vLyBNaW5pLWltcGxlbWVudGF0aW9uIG9mIHN0cmVhbS5QYXNzVGhyb3VnaFxuLy8gV2UgYXJlIGZhciBmcm9tIGhhdmluZyBuZWVkIGZvciB0aGUgZnVsbCBpbXBsZW1lbnRhdGlvbiwgYW5kIHdlIGNhblxuLy8gbWFrZSBhc3N1bXB0aW9ucyBsaWtlIFwibWFueSB3cml0ZXMsIHRoZW4gb25seSBvbmUgZmluYWwgcmVhZFwiXG4vLyBhbmQgd2UgY2FuIGlnbm9yZSBlbmNvZGluZyBzcGVjaWZpY3NcbmZ1bmN0aW9uIFBhc3NUaHJvdWdoKCkge1xuICByZXR1cm4ge1xuICAgIGJ1ZjogXCJcIixcblxuICAgIHdyaXRlOiBmdW5jdGlvbiAoYjogc3RyaW5nKSB7XG4gICAgICB0aGlzLmJ1ZiArPSBiO1xuICAgIH0sXG5cbiAgICBlbmQ6IGZ1bmN0aW9uIChiOiBzdHJpbmcpIHtcbiAgICAgIHRoaXMuYnVmICs9IGI7XG4gICAgfSxcblxuICAgIHJlYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1ZjtcbiAgICB9LFxuICB9O1xufVxuIiwgImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlLFxuICBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZSxcbiAgTXV0YXRlUHJvbWlzZSxcbiAgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLFxuICBVbndyYXBSZXR1cm4sXG4gIFBhZ2luYXRpb25PcHRpb25zLFxufSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgdXNlQ2FjaGVkU3RhdGUgfSBmcm9tIFwiLi91c2VDYWNoZWRTdGF0ZVwiO1xuaW1wb3J0IHsgdXNlUHJvbWlzZSwgUHJvbWlzZU9wdGlvbnMgfSBmcm9tIFwiLi91c2VQcm9taXNlXCI7XG5pbXBvcnQgeyB1c2VMYXRlc3QgfSBmcm9tIFwiLi91c2VMYXRlc3RcIjtcbmltcG9ydCB7IGhhc2ggfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbi8vIFN5bWJvbCB0byBkaWZmZXJlbnRpYXRlIGFuIGVtcHR5IGNhY2hlIGZyb20gYHVuZGVmaW5lZGBcbmNvbnN0IGVtcHR5Q2FjaGUgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sKCk7XG5cbmV4cG9ydCB0eXBlIENhY2hlZFByb21pc2VPcHRpb25zPFxuICBUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlIHwgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLFxuICBVLFxuPiA9IFByb21pc2VPcHRpb25zPFQ+ICYge1xuICAvKipcbiAgICogVGhlIGluaXRpYWwgZGF0YSBpZiB0aGVyZSBhcmVuJ3QgYW55IGluIHRoZSBDYWNoZSB5ZXQuXG4gICAqL1xuICBpbml0aWFsRGF0YT86IFU7XG4gIC8qKlxuICAgKiBUZWxscyB0aGUgaG9vayB0byBrZWVwIHRoZSBwcmV2aW91cyByZXN1bHRzIGluc3RlYWQgb2YgcmV0dXJuaW5nIHRoZSBpbml0aWFsIHZhbHVlXG4gICAqIGlmIHRoZXJlIGFyZW4ndCBhbnkgaW4gdGhlIGNhY2hlIGZvciB0aGUgbmV3IGFyZ3VtZW50cy5cbiAgICogVGhpcyBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIHdoZW4gdXNlZCBmb3IgZGF0YSBmb3IgYSBMaXN0IHRvIGF2b2lkIGZsaWNrZXJpbmcuXG4gICAqL1xuICBrZWVwUHJldmlvdXNEYXRhPzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogV3JhcHMgYW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZSBpbiBhbm90aGVyIGZ1bmN0aW9uLCBhbmQgcmV0dXJucyB0aGUge0BsaW5rIEFzeW5jU3RhdGV9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZnVuY3Rpb24uIFRoZSBsYXN0IHZhbHVlIHdpbGwgYmUga2VwdCBiZXR3ZWVuIGNvbW1hbmQgcnVucy5cbiAqXG4gKiBAcmVtYXJrIFRoaXMgb3ZlcmxvYWQgc2hvdWxkIGJlIHVzZWQgd2hlbiB3b3JraW5nIHdpdGggcGFnaW5hdGVkIGRhdGEgc291cmNlcy5cbiAqIEByZW1hcmsgV2hlbiBwYWdpbmF0aW5nLCBvbmx5IHRoZSBmaXJzdCBwYWdlIHdpbGwgYmUgY2FjaGVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGltcG9ydCB7IHNldFRpbWVvdXQgfSBmcm9tIFwibm9kZTp0aW1lcnMvcHJvbWlzZXNcIjtcbiAqIGltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG4gKiBpbXBvcnQgeyBMaXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlQ2FjaGVkUHJvbWlzZSB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICpcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEsIHBhZ2luYXRpb24gfSA9IHVzZUNhY2hlZFByb21pc2UoXG4gKiAgICAgKHNlYXJjaFRleHQ6IHN0cmluZykgPT4gYXN5bmMgKG9wdGlvbnM6IHsgcGFnZTogbnVtYmVyIH0pID0+IHtcbiAqICAgICAgIGF3YWl0IHNldFRpbWVvdXQoMjAwKTtcbiAqICAgICAgIGNvbnN0IG5ld0RhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNSB9LCAoX3YsIGluZGV4KSA9PiAoe1xuICogICAgICAgICBpbmRleCxcbiAqICAgICAgICAgcGFnZTogb3B0aW9ucy5wYWdlLFxuICogICAgICAgICB0ZXh0OiBzZWFyY2hUZXh0LFxuICogICAgICAgfSkpO1xuICogICAgICAgcmV0dXJuIHsgZGF0YTogbmV3RGF0YSwgaGFzTW9yZTogb3B0aW9ucy5wYWdlIDwgMTAgfTtcbiAqICAgICB9LFxuICogICAgIFtzZWFyY2hUZXh0XSxcbiAqICAgKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IG9uU2VhcmNoVGV4dENoYW5nZT17c2V0U2VhcmNoVGV4dH0gcGFnaW5hdGlvbj17cGFnaW5hdGlvbn0+XG4gKiAgICAgICB7ZGF0YT8ubWFwKChpdGVtKSA9PiAoXG4gKiAgICAgICAgIDxMaXN0Lkl0ZW1cbiAqICAgICAgICAgICBrZXk9e2Ake2l0ZW0ucGFnZX0gJHtpdGVtLmluZGV4fSAke2l0ZW0udGV4dH1gfVxuICogICAgICAgICAgIHRpdGxlPXtgUGFnZSAke2l0ZW0ucGFnZX0gSXRlbSAke2l0ZW0uaW5kZXh9YH1cbiAqICAgICAgICAgICBzdWJ0aXRsZT17aXRlbS50ZXh0fVxuICogICAgICAgICAvPlxuICogICAgICAgKSl9XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDYWNoZWRQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2U8W10+PihcbiAgZm46IFQsXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4sIHVuZGVmaW5lZD47XG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBVIGV4dGVuZHMgYW55W10gPSBhbnlbXT4oXG4gIGZuOiBULFxuICBhcmdzOiBQYXJhbWV0ZXJzPFQ+LFxuICBvcHRpb25zPzogQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4sIFU+O1xuXG4vKipcbiAqIFdyYXBzIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZ1bmN0aW9uLiBUaGUgbGFzdCB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQHJlbWFyayBUaGUgdmFsdWUgbmVlZHMgdG8gYmUgSlNPTiBzZXJpYWxpemFibGUuXG4gKiBAcmVtYXJrIFRoZSBmdW5jdGlvbiBpcyBhc3N1bWVkIHRvIGJlIGNvbnN0YW50IChlZy4gY2hhbmdpbmcgaXQgd29uJ3QgdHJpZ2dlciBhIHJldmFsaWRhdGlvbikuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgdXNlQ2FjaGVkUHJvbWlzZSB9IGZyb20gJ0ByYXljYXN0L3V0aWxzJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPigpO1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcmV2YWxpZGF0ZSB9ID0gdXNlQ2FjaGVkUHJvbWlzZShhc3luYyAodXJsOiBzdHJpbmcpID0+IHtcbiAqICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwgfSk7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICogICAgIHJldHVybiByZXN1bHRcbiAqICAgfSxcbiAqICAgWydodHRwczovL2FwaS5leGFtcGxlJ10sXG4gKiAgIHtcbiAqICAgICBhYm9ydGFibGVcbiAqICAgfSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxEZXRhaWxcbiAqICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nfVxuICogICAgICAgbWFya2Rvd249e2RhdGF9XG4gKiAgICAgICBhY3Rpb25zPXtcbiAqICAgICAgICAgPEFjdGlvblBhbmVsPlxuICogICAgICAgICAgIDxBY3Rpb24gdGl0bGU9XCJSZWxvYWRcIiBvbkFjdGlvbj17KCkgPT4gcmV2YWxpZGF0ZSgpfSAvPlxuICogICAgICAgICA8L0FjdGlvblBhbmVsPlxuICogICAgICAgfVxuICogICAgIC8+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDYWNoZWRQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1Byb21pc2U8W10+PihcbiAgZm46IFQsXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4sIHVuZGVmaW5lZD47XG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlLCBVID0gdW5kZWZpbmVkPihcbiAgZm46IFQsXG4gIGFyZ3M6IFBhcmFtZXRlcnM8VD4sXG4gIG9wdGlvbnM/OiBDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFVud3JhcFJldHVybjxUPiwgVT47XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDYWNoZWRQcm9taXNlPFxuICBUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlIHwgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBVIGV4dGVuZHMgYW55W10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4+KGZuOiBULCBhcmdzPzogUGFyYW1ldGVyczxUPiwgb3B0aW9ucz86IENhY2hlZFByb21pc2VPcHRpb25zPFQsIFU+KSB7XG4gIC8qKlxuICAgKiBUaGUgaG9vayBnZW5lcmF0ZXMgYSBjYWNoZSBrZXkgZnJvbSB0aGUgcHJvbWlzZSBpdCByZWNlaXZlcyAmIGl0cyBhcmd1bWVudHMuXG4gICAqIFNvbWV0aW1lcyB0aGF0J3Mgbm90IGVub3VnaCB0byBndWFyYW50ZWUgdW5pcXVlbmVzcywgc28gaG9va3MgdGhhdCBidWlsZCBvbiB0b3Agb2YgYHVzZUNhY2hlZFByb21pc2VgIGNhblxuICAgKiB1c2UgYW4gYGludGVybmFsX2NhY2hlS2V5U3VmZml4YCB0byBoZWxwIGl0LlxuICAgKlxuICAgKiBAcmVtYXJrIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICovXG4gIGNvbnN0IHtcbiAgICBpbml0aWFsRGF0YSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIGludGVybmFsX2NhY2hlS2V5U3VmZml4LFxuICAgIC4uLnVzZVByb21pc2VPcHRpb25zXG4gIH06IENhY2hlZFByb21pc2VPcHRpb25zPFQsIFU+ICYgeyBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeD86IHN0cmluZyB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgbGFzdFVwZGF0ZUZyb20gPSB1c2VSZWY8XCJjYWNoZVwiIHwgXCJwcm9taXNlXCI+KG51bGwpO1xuXG4gIGNvbnN0IFtjYWNoZWREYXRhLCBtdXRhdGVDYWNoZV0gPSB1c2VDYWNoZWRTdGF0ZTx0eXBlb2YgZW1wdHlDYWNoZSB8IChVbndyYXBSZXR1cm48VD4gfCBVKT4oXG4gICAgaGFzaChhcmdzIHx8IFtdKSArIGludGVybmFsX2NhY2hlS2V5U3VmZml4LFxuICAgIGVtcHR5Q2FjaGUsXG4gICAge1xuICAgICAgY2FjaGVOYW1lc3BhY2U6IGhhc2goZm4pLFxuICAgIH0sXG4gICk7XG5cbiAgLy8gVXNlIGEgcmVmIHRvIHN0b3JlIHByZXZpb3VzIHJldHVybmVkIGRhdGEuIFVzZSB0aGUgaW5pdGFsIGRhdGEgYXMgaXRzIGluaXRhbCB2YWx1ZSBmcm9tIHRoZSBjYWNoZS5cbiAgY29uc3QgbGFnZ3lEYXRhUmVmID0gdXNlUmVmPEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4gfCBVPihjYWNoZWREYXRhICE9PSBlbXB0eUNhY2hlID8gY2FjaGVkRGF0YSA6IChpbml0aWFsRGF0YSBhcyBVKSk7XG4gIGNvbnN0IHBhZ2luYXRpb25BcmdzUmVmID0gdXNlUmVmPFBhZ2luYXRpb25PcHRpb25zPFVud3JhcFJldHVybjxUPiB8IFU+IHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4gIGNvbnN0IHtcbiAgICBtdXRhdGU6IF9tdXRhdGUsXG4gICAgcmV2YWxpZGF0ZSxcbiAgICAuLi5zdGF0ZVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZm4gaGFzIHRoZSBzYW1lIHNpZ25hdHVyZSBpbiBib3RoIHVzZVByb21pc2UgYW5kIHVzZUNhY2hlZFByb21pc2VcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICB9ID0gdXNlUHJvbWlzZShmbiwgYXJncyB8fCAoW10gYXMgYW55IGFzIFBhcmFtZXRlcnM8VD4pLCB7XG4gICAgLi4udXNlUHJvbWlzZU9wdGlvbnMsXG4gICAgb25EYXRhKGRhdGEsIHBhZ2luYXRpb24pIHtcbiAgICAgIHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQgPSBwYWdpbmF0aW9uO1xuICAgICAgaWYgKHVzZVByb21pc2VPcHRpb25zLm9uRGF0YSkge1xuICAgICAgICB1c2VQcm9taXNlT3B0aW9ucy5vbkRhdGEoZGF0YSwgcGFnaW5hdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAocGFnaW5hdGlvbiAmJiBwYWdpbmF0aW9uLnBhZ2UgPiAwKSB7XG4gICAgICAgIC8vIGRvbid0IGNhY2hlIGJleW9uZCB0aGUgZmlyc3QgcGFnZVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsYXN0VXBkYXRlRnJvbS5jdXJyZW50ID0gXCJwcm9taXNlXCI7XG4gICAgICBsYWdneURhdGFSZWYuY3VycmVudCA9IGRhdGE7XG4gICAgICBtdXRhdGVDYWNoZShkYXRhKTtcbiAgICB9LFxuICB9KTtcblxuICBsZXQgcmV0dXJuZWREYXRhOiBVIHwgQXdhaXRlZDxSZXR1cm5UeXBlPFQ+PiB8IFVud3JhcFJldHVybjxUPjtcbiAgY29uc3QgcGFnaW5hdGlvbiA9IHN0YXRlLnBhZ2luYXRpb247XG4gIC8vIHdoZW4gcGFnaW5hdGluZywgb25seSB0aGUgZmlyc3QgcGFnZSBnZXRzIGNhY2hlZCwgc28gd2UgcmV0dXJuIHRoZSBkYXRhIHdlIGdldCBmcm9tIGB1c2VQcm9taXNlYCwgYmVjYXVzZVxuICAvLyBpdCB3aWxsIGJlIGFjY3VtdWxhdGVkLlxuICBpZiAocGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudCAmJiBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50LnBhZ2UgPiAwICYmIHN0YXRlLmRhdGEpIHtcbiAgICByZXR1cm5lZERhdGEgPSBzdGF0ZS5kYXRhIGFzIFVud3JhcFJldHVybjxUPjtcbiAgICAvLyBpZiB0aGUgbGF0ZXN0IHVwZGF0ZSBpZiBmcm9tIHRoZSBQcm9taXNlLCB3ZSBrZWVwIGl0XG4gIH0gZWxzZSBpZiAobGFzdFVwZGF0ZUZyb20uY3VycmVudCA9PT0gXCJwcm9taXNlXCIpIHtcbiAgICByZXR1cm5lZERhdGEgPSBsYWdneURhdGFSZWYuY3VycmVudDtcbiAgfSBlbHNlIGlmIChrZWVwUHJldmlvdXNEYXRhICYmIGNhY2hlZERhdGEgIT09IGVtcHR5Q2FjaGUpIHtcbiAgICAvLyBpZiB3ZSB3YW50IHRvIGtlZXAgdGhlIGxhdGVzdCBkYXRhLCB3ZSBwaWNrIHRoZSBjYWNoZSBidXQgb25seSBpZiBpdCdzIG5vdCBlbXB0eVxuICAgIHJldHVybmVkRGF0YSA9IGNhY2hlZERhdGE7XG4gICAgaWYgKHBhZ2luYXRpb24pIHtcbiAgICAgIHBhZ2luYXRpb24uaGFzTW9yZSA9IHRydWU7XG4gICAgICBwYWdpbmF0aW9uLnBhZ2VTaXplID0gY2FjaGVkRGF0YS5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2UgaWYgKGtlZXBQcmV2aW91c0RhdGEgJiYgY2FjaGVkRGF0YSA9PT0gZW1wdHlDYWNoZSkge1xuICAgIC8vIGlmIHRoZSBjYWNoZSBpcyBlbXB0eSwgd2Ugd2lsbCByZXR1cm4gdGhlIHByZXZpb3VzIGRhdGFcbiAgICByZXR1cm5lZERhdGEgPSBsYWdneURhdGFSZWYuY3VycmVudDtcbiAgICAvLyB0aGVyZSBhcmUgbm8gc3BlY2lhbCBjYXNlcywgc28gZWl0aGVyIHJldHVybiB0aGUgY2FjaGUgb3IgaW5pdGlhbCBkYXRhXG4gIH0gZWxzZSBpZiAoY2FjaGVkRGF0YSAhPT0gZW1wdHlDYWNoZSkge1xuICAgIHJldHVybmVkRGF0YSA9IGNhY2hlZERhdGE7XG4gICAgaWYgKHBhZ2luYXRpb24pIHtcbiAgICAgIHBhZ2luYXRpb24uaGFzTW9yZSA9IHRydWU7XG4gICAgICBwYWdpbmF0aW9uLnBhZ2VTaXplID0gY2FjaGVkRGF0YS5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybmVkRGF0YSA9IGluaXRpYWxEYXRhIGFzIFU7XG4gIH1cblxuICBjb25zdCBsYXRlc3REYXRhID0gdXNlTGF0ZXN0KHJldHVybmVkRGF0YSk7XG5cbiAgLy8gd2UgcmV3cml0ZSB0aGUgbXV0YXRlIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgY2FjaGUgaW5zdGVhZFxuICBjb25zdCBtdXRhdGUgPSB1c2VDYWxsYmFjazxNdXRhdGVQcm9taXNlPEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4gfCBVPj4oXG4gICAgYXN5bmMgKGFzeW5jVXBkYXRlLCBvcHRpb25zKSA9PiB7XG4gICAgICBsZXQgZGF0YUJlZm9yZU9wdGltaXN0aWNVcGRhdGU7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAob3B0aW9ucz8ub3B0aW1pc3RpY1VwZGF0ZSkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBcImZ1bmN0aW9uXCIgJiYgb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgZGF0YSBiZWZvcmUgdGhlIG9wdGltaXN0aWMgdXBkYXRlLFxuICAgICAgICAgICAgLy8gYnV0IG9ubHkgaWYgd2UgbmVlZCBpdCAoZWcuIG9ubHkgd2hlbiB3ZSB3YW50IHRvIGF1dG9tYXRpY2FsbHkgcm9sbGJhY2sgYWZ0ZXIpXG4gICAgICAgICAgICBkYXRhQmVmb3JlT3B0aW1pc3RpY1VwZGF0ZSA9IHN0cnVjdHVyZWRDbG9uZShsYXRlc3REYXRhLmN1cnJlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5vcHRpbWlzdGljVXBkYXRlKGxhdGVzdERhdGEuY3VycmVudCk7XG4gICAgICAgICAgbGFzdFVwZGF0ZUZyb20uY3VycmVudCA9IFwiY2FjaGVcIjtcbiAgICAgICAgICBsYWdneURhdGFSZWYuY3VycmVudCA9IGRhdGE7XG4gICAgICAgICAgbXV0YXRlQ2FjaGUoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IF9tdXRhdGUoYXN5bmNVcGRhdGUsIHsgc2hvdWxkUmV2YWxpZGF0ZUFmdGVyOiBvcHRpb25zPy5zaG91bGRSZXZhbGlkYXRlQWZ0ZXIgfSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zPy5yb2xsYmFja09uRXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zLnJvbGxiYWNrT25FcnJvcihsYXRlc3REYXRhLmN1cnJlbnQpO1xuICAgICAgICAgIGxhc3RVcGRhdGVGcm9tLmN1cnJlbnQgPSBcImNhY2hlXCI7XG4gICAgICAgICAgbGFnZ3lEYXRhUmVmLmN1cnJlbnQgPSBkYXRhO1xuICAgICAgICAgIG11dGF0ZUNhY2hlKGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnM/Lm9wdGltaXN0aWNVcGRhdGUgJiYgb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxhc3RVcGRhdGVGcm9tLmN1cnJlbnQgPSBcImNhY2hlXCI7XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3aGVuIHVuZGVmaW5lZCwgaXQncyBleHBlY3RlZFxuICAgICAgICAgIGxhZ2d5RGF0YVJlZi5jdXJyZW50ID0gZGF0YUJlZm9yZU9wdGltaXN0aWNVcGRhdGU7XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3aGVuIHVuZGVmaW5lZCwgaXQncyBleHBlY3RlZFxuICAgICAgICAgIG11dGF0ZUNhY2hlKGRhdGFCZWZvcmVPcHRpbWlzdGljVXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfSxcbiAgICBbbXV0YXRlQ2FjaGUsIF9tdXRhdGUsIGxhdGVzdERhdGEsIGxhZ2d5RGF0YVJlZiwgbGFzdFVwZGF0ZUZyb21dLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhY2hlZERhdGEgIT09IGVtcHR5Q2FjaGUpIHtcbiAgICAgIGxhc3RVcGRhdGVGcm9tLmN1cnJlbnQgPSBcImNhY2hlXCI7XG4gICAgICBsYWdneURhdGFSZWYuY3VycmVudCA9IGNhY2hlZERhdGE7XG4gICAgfVxuICB9LCBbY2FjaGVkRGF0YV0pO1xuXG4gIHJldHVybiB7XG4gICAgZGF0YTogcmV0dXJuZWREYXRhLFxuICAgIGlzTG9hZGluZzogc3RhdGUuaXNMb2FkaW5nLFxuICAgIGVycm9yOiBzdGF0ZS5lcnJvcixcbiAgICBtdXRhdGU6IHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQgJiYgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5wYWdlID4gMCA/IF9tdXRhdGUgOiBtdXRhdGUsXG4gICAgcGFnaW5hdGlvbixcbiAgICByZXZhbGlkYXRlLFxuICB9O1xufVxuIiwgImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhY2hlZFByb21pc2UsIENhY2hlZFByb21pc2VPcHRpb25zIH0gZnJvbSBcIi4vdXNlQ2FjaGVkUHJvbWlzZVwiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2UsIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSwgVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaXNKU09OIH0gZnJvbSBcIi4vZmV0Y2gtdXRpbHNcIjtcbmltcG9ydCB7IGhhc2ggfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGRlZmF1bHRQYXJzaW5nKHJlc3BvbnNlOiBSZXNwb25zZSkge1xuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICB9XG5cbiAgY29uc3QgY29udGVudFR5cGVIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcblxuICBpZiAoY29udGVudFR5cGVIZWFkZXIgJiYgaXNKU09OKGNvbnRlbnRUeXBlSGVhZGVyKSkge1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdE1hcHBpbmc8ViwgVCBleHRlbmRzIHVua25vd25bXT4ocmVzdWx0OiBWKTogeyBkYXRhOiBUOyBoYXNNb3JlPzogYm9vbGVhbjsgY3Vyc29yPzogYW55IH0ge1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgYXMgdW5rbm93biBhcyBULCBoYXNNb3JlOiBmYWxzZSB9O1xufVxuXG50eXBlIFJlcXVlc3RJbmZvID0gc3RyaW5nIHwgVVJMIHwgZ2xvYmFsVGhpcy5SZXF1ZXN0O1xudHlwZSBQYWdpbmF0ZWRSZXF1ZXN0SW5mbyA9IChwYWdpbmF0aW9uOiB7IHBhZ2U6IG51bWJlcjsgbGFzdEl0ZW0/OiBhbnk7IGN1cnNvcj86IGFueSB9KSA9PiBSZXF1ZXN0SW5mbztcblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBwYWdpbmF0ZWRVUkwgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZldGNoLiBUaGUgbGFzdCB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQHJlbWFyayBUaGlzIG92ZXJsb2FkIHNob3VsZCBiZSB1c2VkIHdoZW4gd29ya2luZyB3aXRoIHBhZ2luYXRlZCBkYXRhIHNvdXJjZXMuXG4gKiBAcmVtYXJrIFdoZW4gcGFnaW5hdGluZywgb25seSB0aGUgZmlyc3QgcGFnZSB3aWxsIGJlIGNhY2hlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBJY29uLCBJbWFnZSwgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZUZldGNoIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKiBpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICpcbiAqIHR5cGUgU2VhcmNoUmVzdWx0ID0geyBjb21wYW5pZXM6IENvbXBhbnlbXTsgcGFnZTogbnVtYmVyOyB0b3RhbFBhZ2VzOiBudW1iZXIgfTtcbiAqIHR5cGUgQ29tcGFueSA9IHsgaWQ6IG51bWJlcjsgbmFtZTogc3RyaW5nOyBzbWFsbExvZ29Vcmw/OiBzdHJpbmcgfTtcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcGFnaW5hdGlvbiB9ID0gdXNlRmV0Y2goXG4gKiAgICAgKG9wdGlvbnMpID0+XG4gKiAgICAgICBcImh0dHBzOi8vYXBpLnljb21iaW5hdG9yLmNvbS92MC4xL2NvbXBhbmllcz9cIiArXG4gKiAgICAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgcGFnZTogU3RyaW5nKG9wdGlvbnMucGFnZSArIDEpLCBxOiBzZWFyY2hUZXh0IH0pLnRvU3RyaW5nKCksXG4gKiAgICAge1xuICogICAgICAgbWFwUmVzdWx0KHJlc3VsdDogU2VhcmNoUmVzdWx0KSB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgZGF0YTogcmVzdWx0LmNvbXBhbmllcyxcbiAqICAgICAgICAgICBoYXNNb3JlOiByZXN1bHQucGFnZSA8IHJlc3VsdC50b3RhbFBhZ2VzLFxuICogICAgICAgICB9O1xuICogICAgICAgfSxcbiAqICAgICAgIGtlZXBQcmV2aW91c0RhdGE6IHRydWUsXG4gKiAgICAgICBpbml0aWFsRGF0YTogW10sXG4gKiAgICAgfSxcbiAqICAgKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IHBhZ2luYXRpb249e3BhZ2luYXRpb259IG9uU2VhcmNoVGV4dENoYW5nZT17c2V0U2VhcmNoVGV4dH0+XG4gKiAgICAgICB7ZGF0YS5tYXAoKGNvbXBhbnkpID0+IChcbiAqICAgICAgICAgPExpc3QuSXRlbVxuICogICAgICAgICAgIGtleT17Y29tcGFueS5pZH1cbiAqICAgICAgICAgICBpY29uPXt7IHNvdXJjZTogY29tcGFueS5zbWFsbExvZ29VcmwgPz8gSWNvbi5NaW51c0NpcmNsZSwgbWFzazogSW1hZ2UuTWFzay5Sb3VuZGVkUmVjdGFuZ2xlIH19XG4gKiAgICAgICAgICAgdGl0bGU9e2NvbXBhbnkubmFtZX1cbiAqICAgICAgICAgLz5cbiAqICAgICAgICkpfVxuICogICAgIDwvTGlzdD5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRmV0Y2g8ViA9IHVua25vd24sIFUgPSB1bmRlZmluZWQsIFQgZXh0ZW5kcyB1bmtub3duW10gPSB1bmtub3duW10+KFxuICB1cmw6IFBhZ2luYXRlZFJlcXVlc3RJbmZvLFxuICBvcHRpb25zOiBSZXF1ZXN0SW5pdCAmIHtcbiAgICBtYXBSZXN1bHQ6IChyZXN1bHQ6IFYpID0+IHsgZGF0YTogVDsgaGFzTW9yZT86IGJvb2xlYW47IGN1cnNvcj86IGFueSB9O1xuICAgIHBhcnNlUmVzcG9uc2U/OiAocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiBQcm9taXNlPFY+O1xuICB9ICYgT21pdDxDYWNoZWRQcm9taXNlT3B0aW9uczwodXJsOiBSZXF1ZXN0SW5mbywgb3B0aW9ucz86IFJlcXVlc3RJbml0KSA9PiBQcm9taXNlPFQ+LCBVPiwgXCJhYm9ydGFibGVcIj4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPjtcbi8qKlxuICogRmV0Y2ggdGhlIFVSTCBhbmQgcmV0dXJucyB0aGUge0BsaW5rIEFzeW5jU3RhdGV9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgZmV0Y2guIFRoZSBsYXN0IHZhbHVlIHdpbGwgYmUga2VwdCBiZXR3ZWVuIGNvbW1hbmQgcnVucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyB1c2VGZXRjaCB9IGZyb20gJ0ByYXljYXN0L3V0aWxzJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcmV2YWxpZGF0ZSB9ID0gdXNlRmV0Y2goJ2h0dHBzOi8vYXBpLmV4YW1wbGUnKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPERldGFpbFxuICogICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gKiAgICAgICBtYXJrZG93bj17ZGF0YX1cbiAqICAgICAgIGFjdGlvbnM9e1xuICogICAgICAgICA8QWN0aW9uUGFuZWw+XG4gKiAgICAgICAgICAgPEFjdGlvbiB0aXRsZT1cIlJlbG9hZFwiIG9uQWN0aW9uPXsoKSA9PiByZXZhbGlkYXRlKCl9IC8+XG4gKiAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gKiAgICAgICB9XG4gKiAgICAgLz5cbiAqICAgKTtcbiAqIH07XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZldGNoPFYgPSB1bmtub3duLCBVID0gdW5kZWZpbmVkLCBUID0gVj4oXG4gIHVybDogUmVxdWVzdEluZm8sXG4gIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCAmIHtcbiAgICBtYXBSZXN1bHQ/OiAocmVzdWx0OiBWKSA9PiB7IGRhdGE6IFQ7IGhhc01vcmU/OiBib29sZWFuOyBjdXJzb3I/OiBhbnkgfTtcbiAgICBwYXJzZVJlc3BvbnNlPzogKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gUHJvbWlzZTxWPjtcbiAgfSAmIE9taXQ8Q2FjaGVkUHJvbWlzZU9wdGlvbnM8KHVybDogUmVxdWVzdEluZm8sIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkgPT4gUHJvbWlzZTxUPiwgVT4sIFwiYWJvcnRhYmxlXCI+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCwgVT4gJiB7IHBhZ2luYXRpb246IHVuZGVmaW5lZCB9O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlRmV0Y2g8ViA9IHVua25vd24sIFUgPSB1bmRlZmluZWQsIFQgZXh0ZW5kcyB1bmtub3duW10gPSB1bmtub3duW10+KFxuICB1cmw6IFJlcXVlc3RJbmZvIHwgUGFnaW5hdGVkUmVxdWVzdEluZm8sXG4gIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCAmIHtcbiAgICBtYXBSZXN1bHQ/OiAocmVzdWx0OiBWKSA9PiB7IGRhdGE6IFQ7IGhhc01vcmU/OiBib29sZWFuOyBjdXJzb3I/OiBhbnkgfTtcbiAgICBwYXJzZVJlc3BvbnNlPzogKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gUHJvbWlzZTxWPjtcbiAgfSAmIE9taXQ8Q2FjaGVkUHJvbWlzZU9wdGlvbnM8KHVybDogUmVxdWVzdEluZm8sIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkgPT4gUHJvbWlzZTxUPiwgVT4sIFwiYWJvcnRhYmxlXCI+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCwgVT4ge1xuICBjb25zdCB7XG4gICAgcGFyc2VSZXNwb25zZSxcbiAgICBtYXBSZXN1bHQsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgZXhlY3V0ZSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIG9uRXJyb3IsXG4gICAgb25EYXRhLFxuICAgIG9uV2lsbEV4ZWN1dGUsXG4gICAgZmFpbHVyZVRvYXN0T3B0aW9ucyxcbiAgICAuLi5mZXRjaE9wdGlvbnNcbiAgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgY29uc3QgdXNlQ2FjaGVkUHJvbWlzZU9wdGlvbnM6IENhY2hlZFByb21pc2VPcHRpb25zPCh1cmw6IFJlcXVlc3RJbmZvLCBvcHRpb25zPzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8VD4sIFU+ID0ge1xuICAgIGluaXRpYWxEYXRhLFxuICAgIGV4ZWN1dGUsXG4gICAga2VlcFByZXZpb3VzRGF0YSxcbiAgICBvbkVycm9yLFxuICAgIG9uRGF0YSxcbiAgICBvbldpbGxFeGVjdXRlLFxuICAgIGZhaWx1cmVUb2FzdE9wdGlvbnMsXG4gIH07XG5cbiAgY29uc3QgcGFyc2VSZXNwb25zZVJlZiA9IHVzZUxhdGVzdChwYXJzZVJlc3BvbnNlIHx8IGRlZmF1bHRQYXJzaW5nKTtcbiAgY29uc3QgbWFwUmVzdWx0UmVmID0gdXNlTGF0ZXN0KG1hcFJlc3VsdCB8fCBkZWZhdWx0TWFwcGluZyk7XG4gIGNvbnN0IHVybFJlZiA9IHVzZVJlZjxSZXF1ZXN0SW5mbyB8IFBhZ2luYXRlZFJlcXVlc3RJbmZvPihudWxsKTtcbiAgY29uc3QgZmlyc3RQYWdlVXJsUmVmID0gdXNlUmVmPFJlcXVlc3RJbmZvIHwgdW5kZWZpbmVkPihudWxsKTtcbiAgY29uc3QgZmlyc3RQYWdlVXJsID0gdHlwZW9mIHVybCA9PT0gXCJmdW5jdGlvblwiID8gdXJsKHsgcGFnZTogMCB9KSA6IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIFdoZW4gcGFnaW5hdGluZywgYHVybGAgaXMgYSBgUGFnaW5hdGVkUmVxdWVzdEluZm9gLCBzbyB3ZSBvbmx5IHdhbnQgdG8gdXBkYXRlIHRoZSByZWYgd2hlbiB0aGUgYGZpcnN0UGFnZVVybGAgY2hhbmdlcy5cbiAgICogV2hlbiBub3QgcGFnaW5hdGluZywgYHVybGAgaXMgYSBgUmVxdWVzdEluZm9gLCBzbyB3ZSB3YW50IHRvIHVwZGF0ZSB0aGUgcmVmIHdoZW5ldmVyIGB1cmxgIGNoYW5nZXMuXG4gICAqL1xuICBpZiAoIXVybFJlZi5jdXJyZW50IHx8IHR5cGVvZiBmaXJzdFBhZ2VVcmxSZWYuY3VycmVudCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBmaXJzdFBhZ2VVcmxSZWYuY3VycmVudCAhPT0gZmlyc3RQYWdlVXJsKSB7XG4gICAgdXJsUmVmLmN1cnJlbnQgPSB1cmw7XG4gIH1cbiAgZmlyc3RQYWdlVXJsUmVmLmN1cnJlbnQgPSBmaXJzdFBhZ2VVcmw7XG4gIGNvbnN0IGFib3J0YWJsZSA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXI+KG51bGwpO1xuXG4gIGNvbnN0IHBhZ2luYXRlZEZuOiBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2U8W1BhZ2luYXRlZFJlcXVlc3RJbmZvLCB0eXBlb2YgZmV0Y2hPcHRpb25zXSwgVD4gPSB1c2VDYWxsYmFjayhcbiAgICAodXJsOiBQYWdpbmF0ZWRSZXF1ZXN0SW5mbywgb3B0aW9ucz86IFJlcXVlc3RJbml0KSA9PiBhc3luYyAocGFnaW5hdGlvbjogeyBwYWdlOiBudW1iZXIgfSkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKHBhZ2luYXRpb24pLCB7IHNpZ25hbDogYWJvcnRhYmxlLmN1cnJlbnQ/LnNpZ25hbCwgLi4ub3B0aW9ucyB9KTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IChhd2FpdCBwYXJzZVJlc3BvbnNlUmVmLmN1cnJlbnQocmVzKSkgYXMgVjtcbiAgICAgIHJldHVybiBtYXBSZXN1bHRSZWYuY3VycmVudD8uKHBhcnNlZCk7XG4gICAgfSxcbiAgICBbcGFyc2VSZXNwb25zZVJlZiwgbWFwUmVzdWx0UmVmXSxcbiAgKTtcbiAgY29uc3QgZm46IEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZTxbUmVxdWVzdEluZm8sIFJlcXVlc3RJbml0P10sIFQ+ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHVybDogUmVxdWVzdEluZm8sIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IHNpZ25hbDogYWJvcnRhYmxlLmN1cnJlbnQ/LnNpZ25hbCwgLi4ub3B0aW9ucyB9KTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IChhd2FpdCBwYXJzZVJlc3BvbnNlUmVmLmN1cnJlbnQocmVzKSkgYXMgVjtcbiAgICAgIGNvbnN0IG1hcHBlZCA9IG1hcFJlc3VsdFJlZi5jdXJyZW50KHBhcnNlZCk7XG4gICAgICByZXR1cm4gbWFwcGVkPy5kYXRhIGFzIHVua25vd24gYXMgVDtcbiAgICB9LFxuICAgIFtwYXJzZVJlc3BvbnNlUmVmLCBtYXBSZXN1bHRSZWZdLFxuICApO1xuXG4gIGNvbnN0IHByb21pc2UgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoZmlyc3RQYWdlVXJsUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiBwYWdpbmF0ZWRGbjtcbiAgICB9XG4gICAgcmV0dXJuIGZuO1xuICB9LCBbZmlyc3RQYWdlVXJsUmVmLCBmbiwgcGFnaW5hdGVkRm5dKTtcblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIGxhc3RJdGVtIGNhbid0IGJlIGluZmVycmVkIHByb3Blcmx5XG4gIHJldHVybiB1c2VDYWNoZWRQcm9taXNlKHByb21pc2UsIFt1cmxSZWYuY3VycmVudCBhcyBQYWdpbmF0ZWRSZXF1ZXN0SW5mbywgZmV0Y2hPcHRpb25zXSwge1xuICAgIC4uLnVzZUNhY2hlZFByb21pc2VPcHRpb25zLFxuICAgIGludGVybmFsX2NhY2hlS2V5U3VmZml4OiBmaXJzdFBhZ2VVcmxSZWYuY3VycmVudCArIGhhc2gobWFwUmVzdWx0UmVmLmN1cnJlbnQpICsgaGFzaChwYXJzZVJlc3BvbnNlUmVmLmN1cnJlbnQpLFxuICAgIGFib3J0YWJsZSxcbiAgfSk7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGlzSlNPTihjb250ZW50VHlwZUhlYWRlcjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoY29udGVudFR5cGVIZWFkZXIpIHtcbiAgICBjb25zdCBtZWRpYVR5cGUgPSBwYXJzZUNvbnRlbnRUeXBlKGNvbnRlbnRUeXBlSGVhZGVyKTtcblxuICAgIGlmICghbWVkaWFUeXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG1lZGlhVHlwZS5zdWJ0eXBlID09PSBcImpzb25cIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKG1lZGlhVHlwZS5zdWZmaXggPT09IFwianNvblwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobWVkaWFUeXBlLnN1ZmZpeCAmJiAvXFxianNvblxcYi9pLnRlc3QobWVkaWFUeXBlLnN1ZmZpeCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChtZWRpYVR5cGUuc3VidHlwZSAmJiAvXFxianNvblxcYi9pLnRlc3QobWVkaWFUeXBlLnN1YnR5cGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJlZ0V4cCB0byBtYXRjaCB0eXBlIGluIFJGQyA2ODM4IHdpdGggYW4gb3B0aW9uYWwgdHJhaWxpbmcgYDtgIGJlY2F1c2Ugc29tZSBBcHBsZSBBUElzIHJldHVybnMgb25lLi4uXG4gKlxuICogdHlwZS1uYW1lID0gcmVzdHJpY3RlZC1uYW1lXG4gKiBzdWJ0eXBlLW5hbWUgPSByZXN0cmljdGVkLW5hbWVcbiAqIHJlc3RyaWN0ZWQtbmFtZSA9IHJlc3RyaWN0ZWQtbmFtZS1maXJzdCAqMTI2cmVzdHJpY3RlZC1uYW1lLWNoYXJzXG4gKiByZXN0cmljdGVkLW5hbWUtZmlyc3QgID0gQUxQSEEgLyBESUdJVFxuICogcmVzdHJpY3RlZC1uYW1lLWNoYXJzICA9IEFMUEhBIC8gRElHSVQgLyBcIiFcIiAvIFwiI1wiIC9cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBcIiRcIiAvIFwiJlwiIC8gXCItXCIgLyBcIl5cIiAvIFwiX1wiXG4gKiByZXN0cmljdGVkLW5hbWUtY2hhcnMgPS8gXCIuXCIgOyBDaGFyYWN0ZXJzIGJlZm9yZSBmaXJzdCBkb3QgYWx3YXlzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsgc3BlY2lmeSBhIGZhY2V0IG5hbWVcbiAqIHJlc3RyaWN0ZWQtbmFtZS1jaGFycyA9LyBcIitcIiA7IENoYXJhY3RlcnMgYWZ0ZXIgbGFzdCBwbHVzIGFsd2F5c1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7IHNwZWNpZnkgYSBzdHJ1Y3R1cmVkIHN5bnRheCBzdWZmaXhcbiAqIEFMUEhBID0gICV4NDEtNUEgLyAleDYxLTdBICAgOyBBLVogLyBhLXpcbiAqIERJR0lUID0gICV4MzAtMzkgICAgICAgICAgICAgOyAwLTlcbiAqL1xuY29uc3QgTUVESUFfVFlQRV9SRUdFWFAgPSAvXihbQS1aYS16MC05XVtBLVphLXowLTkhIyQmXl8tXXswLDEyNn0pXFwvKFtBLVphLXowLTldW0EtWmEtejAtOSEjJCZeXy4rLV17MCwxMjZ9KTs/JC87XG5cbmZ1bmN0aW9uIHBhcnNlQ29udGVudFR5cGUoaGVhZGVyOiBzdHJpbmcpIHtcbiAgY29uc3QgaGVhZGVyRGVsaW1pdGF0aW9uaW5kZXggPSBoZWFkZXIuaW5kZXhPZihcIjtcIik7XG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gaGVhZGVyRGVsaW1pdGF0aW9uaW5kZXggIT09IC0xID8gaGVhZGVyLnNsaWNlKDAsIGhlYWRlckRlbGltaXRhdGlvbmluZGV4KS50cmltKCkgOiBoZWFkZXIudHJpbSgpO1xuXG4gIGNvbnN0IG1hdGNoID0gTUVESUFfVFlQRV9SRUdFWFAuZXhlYyhjb250ZW50VHlwZS50b0xvd2VyQ2FzZSgpLnRvTG93ZXJDYXNlKCkpO1xuXG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0eXBlID0gbWF0Y2hbMV07XG4gIGxldCBzdWJ0eXBlID0gbWF0Y2hbMl07XG4gIGxldCBzdWZmaXg7XG5cbiAgLy8gc3VmZml4IGFmdGVyIGxhc3QgK1xuICBjb25zdCBpbmRleCA9IHN1YnR5cGUubGFzdEluZGV4T2YoXCIrXCIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgc3VmZml4ID0gc3VidHlwZS5zdWJzdHJpbmcoaW5kZXggKyAxKTtcbiAgICBzdWJ0eXBlID0gc3VidHlwZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICB9XG5cbiAgcmV0dXJuIHsgdHlwZSwgc3VidHlwZSwgc3VmZml4IH07XG59XG4iLCAiLypcbiAqIEluc3BpcmVkIGJ5IEV4ZWNhXG4gKi9cblxuaW1wb3J0IGNoaWxkUHJvY2VzcyBmcm9tIFwibm9kZTpjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCB7IHVzZUNhY2hlZFByb21pc2UsIENhY2hlZFByb21pc2VPcHRpb25zIH0gZnJvbSBcIi4vdXNlQ2FjaGVkUHJvbWlzZVwiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQge1xuICBnZXRTcGF3bmVkUHJvbWlzZSxcbiAgZ2V0U3Bhd25lZFJlc3VsdCxcbiAgaGFuZGxlT3V0cHV0LFxuICBkZWZhdWx0UGFyc2luZyxcbiAgUGFyc2VFeGVjT3V0cHV0SGFuZGxlcixcbn0gZnJvbSBcIi4vZXhlYy11dGlsc1wiO1xuXG50eXBlIEV4ZWNPcHRpb25zID0ge1xuICAvKipcbiAgICogSWYgYHRydWVgLCBydW5zIHRoZSBjb21tYW5kIGluc2lkZSBvZiBhIHNoZWxsLiBVc2VzIGAvYmluL3NoYC4gQSBkaWZmZXJlbnQgc2hlbGwgY2FuIGJlIHNwZWNpZmllZCBhcyBhIHN0cmluZy4gVGhlIHNoZWxsIHNob3VsZCB1bmRlcnN0YW5kIHRoZSBgLWNgIHN3aXRjaC5cbiAgICpcbiAgICogV2UgcmVjb21tZW5kIGFnYWluc3QgdXNpbmcgdGhpcyBvcHRpb24gc2luY2UgaXQgaXM6XG4gICAqIC0gbm90IGNyb3NzLXBsYXRmb3JtLCBlbmNvdXJhZ2luZyBzaGVsbC1zcGVjaWZpYyBzeW50YXguXG4gICAqIC0gc2xvd2VyLCBiZWNhdXNlIG9mIHRoZSBhZGRpdGlvbmFsIHNoZWxsIGludGVycHJldGF0aW9uLlxuICAgKiAtIHVuc2FmZSwgcG90ZW50aWFsbHkgYWxsb3dpbmcgY29tbWFuZCBpbmplY3Rpb24uXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBzaGVsbD86IGJvb2xlYW4gfCBzdHJpbmc7XG4gIC8qKlxuICAgKiBTdHJpcCB0aGUgZmluYWwgbmV3bGluZSBjaGFyYWN0ZXIgZnJvbSB0aGUgb3V0cHV0LlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBzdHJpcEZpbmFsTmV3bGluZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5IG9mIHRoZSBjaGlsZCBwcm9jZXNzLlxuICAgKiBAZGVmYXVsdCBwcm9jZXNzLmN3ZCgpXG4gICAqL1xuICBjd2Q/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFbnZpcm9ubWVudCBrZXktdmFsdWUgcGFpcnMuIEV4dGVuZHMgYXV0b21hdGljYWxseSBmcm9tIGBwcm9jZXNzLmVudmAuXG4gICAqIEBkZWZhdWx0IHByb2Nlc3MuZW52XG4gICAqL1xuICBlbnY/OiBOb2RlSlMuUHJvY2Vzc0VudjtcbiAgLyoqXG4gICAqIFNwZWNpZnkgdGhlIGNoYXJhY3RlciBlbmNvZGluZyB1c2VkIHRvIGRlY29kZSB0aGUgc3Rkb3V0IGFuZCBzdGRlcnIgb3V0cHV0LiBJZiBzZXQgdG8gYFwiYnVmZmVyXCJgLCB0aGVuIHN0ZG91dCBhbmQgc3RkZXJyIHdpbGwgYmUgYSBCdWZmZXIgaW5zdGVhZCBvZiBhIHN0cmluZy5cbiAgICpcbiAgICogQGRlZmF1bHQgXCJ1dGY4XCJcbiAgICovXG4gIGVuY29kaW5nPzogQnVmZmVyRW5jb2RpbmcgfCBcImJ1ZmZlclwiO1xuICAvKipcbiAgICogV3JpdGUgc29tZSBpbnB1dCB0byB0aGUgYHN0ZGluYCBvZiB5b3VyIGJpbmFyeS5cbiAgICovXG4gIGlucHV0Pzogc3RyaW5nIHwgQnVmZmVyO1xuICAvKiogSWYgdGltZW91dCBpcyBncmVhdGVyIHRoYW4gYDBgLCB0aGUgcGFyZW50IHdpbGwgc2VuZCB0aGUgc2lnbmFsIGBTSUdURVJNYCBpZiB0aGUgY2hpbGQgcnVucyBsb25nZXIgdGhhbiB0aW1lb3V0IG1pbGxpc2Vjb25kcy5cbiAgICpcbiAgICogQGRlZmF1bHQgMTAwMDBcbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59O1xuXG5jb25zdCBTUEFDRVNfUkVHRVhQID0gLyArL2c7XG5mdW5jdGlvbiBwYXJzZUNvbW1hbmQoY29tbWFuZDogc3RyaW5nLCBhcmdzPzogc3RyaW5nW10pIHtcbiAgaWYgKGFyZ3MpIHtcbiAgICByZXR1cm4gW2NvbW1hbmQsIC4uLmFyZ3NdO1xuICB9XG4gIGNvbnN0IHRva2Vuczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCB0b2tlbiBvZiBjb21tYW5kLnRyaW0oKS5zcGxpdChTUEFDRVNfUkVHRVhQKSkge1xuICAgIC8vIEFsbG93IHNwYWNlcyB0byBiZSBlc2NhcGVkIGJ5IGEgYmFja3NsYXNoIGlmIG5vdCBtZWFudCBhcyBhIGRlbGltaXRlclxuICAgIGNvbnN0IHByZXZpb3VzVG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgIGlmIChwcmV2aW91c1Rva2VuICYmIHByZXZpb3VzVG9rZW4uZW5kc1dpdGgoXCJcXFxcXCIpKSB7XG4gICAgICAvLyBNZXJnZSBwcmV2aW91cyB0b2tlbiB3aXRoIGN1cnJlbnQgb25lXG4gICAgICB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdID0gYCR7cHJldmlvdXNUb2tlbi5zbGljZSgwLCAtMSl9ICR7dG9rZW59YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbnR5cGUgRXhlY0NhY2hlZFByb21pc2VPcHRpb25zPFQsIFU+ID0gT21pdDxcbiAgQ2FjaGVkUHJvbWlzZU9wdGlvbnM8XG4gICAgKF9jb21tYW5kOiBzdHJpbmcsIF9hcmdzOiBzdHJpbmdbXSwgX29wdGlvbnM/OiBFeGVjT3B0aW9ucywgaW5wdXQ/OiBzdHJpbmcgfCBCdWZmZXIpID0+IFByb21pc2U8VD4sXG4gICAgVVxuICA+LFxuICBcImFib3J0YWJsZVwiXG4+O1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBhbmQgcmV0dXJucyB0aGUge0BsaW5rIEFzeW5jU3RhdGV9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZC4gVGhlIGxhc3QgdmFsdWUgd2lsbCBiZSBrZXB0IGJldHdlZW4gY29tbWFuZCBydW5zLlxuICpcbiAqIEByZW1hcmsgV2hlbiBzcGVjaWZ5aW5nIHRoZSBhcmd1bWVudHMgdmlhIHRoZSBgY29tbWFuZGAgc3RyaW5nLCBpZiB0aGUgZmlsZSBvciBhbiBhcmd1bWVudCBvZiB0aGUgY29tbWFuZCBjb250YWlucyBzcGFjZXMsIHRoZXkgbXVzdCBiZSBlc2NhcGVkIHdpdGggYmFja3NsYXNoZXMuIFRoaXMgbWF0dGVycyBlc3BlY2lhbGx5IGlmIGBjb21tYW5kYCBpcyBub3QgYSBjb25zdGFudCBidXQgYSB2YXJpYWJsZSwgZm9yIGV4YW1wbGUgd2l0aCBgX19kaXJuYW1lYCBvciBgcHJvY2Vzcy5jd2QoKWAuIEV4Y2VwdCBmb3Igc3BhY2VzLCBubyBlc2NhcGluZy9xdW90aW5nIGlzIG5lZWRlZC5cbiAqXG4gKiBUaGUgYHNoZWxsYCBvcHRpb24gbXVzdCBiZSB1c2VkIGlmIHRoZSBjb21tYW5kIHVzZXMgc2hlbGwtc3BlY2lmaWMgZmVhdHVyZXMgKGZvciBleGFtcGxlLCBgJiZgIG9yIGB8fGApLCBhcyBvcHBvc2VkIHRvIGJlaW5nIGEgc2ltcGxlIGZpbGUgZm9sbG93ZWQgYnkgaXRzIGFyZ3VtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyB1c2VFeGVjIH0gZnJvbSAnQHJheWNhc3QvdXRpbHMnO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhLCByZXZhbGlkYXRlIH0gPSB1c2VFeGVjKFwiYnJld1wiLCBbXCJpbmZvXCIsIFwiLS1qc29uPXYyXCIsIFwiLS1pbnN0YWxsZWRcIl0pO1xuICogICBjb25zdCByZXN1bHRzID0gdXNlTWVtbzx7fVtdPigoKSA9PiBKU09OLnBhcnNlKGRhdGEgfHwgXCJbXVwiKSwgW2RhdGFdKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9PlxuICogICAgICB7KGRhdGEgfHwgW10pLm1hcCgoaXRlbSkgPT4gKFxuICogICAgICAgIDxMaXN0Lkl0ZW0ga2V5PXtpdGVtLmlkfSB0aXRsZT17aXRlbS5uYW1lfSAvPlxuICogICAgICApKX1cbiAqICAgIDwvTGlzdD5cbiAqICAgKTtcbiAqIH07XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV4ZWM8VCA9IEJ1ZmZlciwgVSA9IHVuZGVmaW5lZD4oXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBCdWZmZXIsIEV4ZWNPcHRpb25zPjtcbiAgfSAmIEV4ZWNPcHRpb25zICYge1xuICAgICAgZW5jb2Rpbmc6IFwiYnVmZmVyXCI7XG4gICAgfSAmIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV4ZWM8VCA9IHN0cmluZywgVSA9IHVuZGVmaW5lZD4oXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBFeGVjT3B0aW9ucz47XG4gIH0gJiBFeGVjT3B0aW9ucyAmIHtcbiAgICAgIGVuY29kaW5nPzogQnVmZmVyRW5jb2Rpbmc7XG4gICAgfSAmIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV4ZWM8VCA9IEJ1ZmZlciwgVSA9IHVuZGVmaW5lZD4oXG4gIGZpbGU6IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgZmlsZS4gTm8gZXNjYXBpbmcvcXVvdGluZyBpcyBuZWVkZWQuXG4gICAqXG4gICAqIElmIGRlZmluZWQsIHRoZSBjb21tYW5kcyBuZWVkcyB0byBiZSBhIGZpbGUgdG8gZXhlY3V0ZS4gSWYgdW5kZWZpbmVkLCB0aGUgYXJndW1lbnRzIHdpbGwgYmUgcGFyc2VkIGZyb20gdGhlIGNvbW1hbmQuXG4gICAqL1xuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9uczoge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBCdWZmZXIsIEV4ZWNPcHRpb25zPjtcbiAgfSAmIEV4ZWNPcHRpb25zICYge1xuICAgICAgZW5jb2Rpbmc6IFwiYnVmZmVyXCI7XG4gICAgfSAmIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV4ZWM8VCA9IHN0cmluZywgVSA9IHVuZGVmaW5lZD4oXG4gIGZpbGU6IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgZmlsZS4gTm8gZXNjYXBpbmcvcXVvdGluZyBpcyBuZWVkZWQuXG4gICAqXG4gICAqIElmIGRlZmluZWQsIHRoZSBjb21tYW5kcyBuZWVkcyB0byBiZSBhIGZpbGUgdG8gZXhlY3V0ZS4gSWYgdW5kZWZpbmVkLCB0aGUgYXJndW1lbnRzIHdpbGwgYmUgcGFyc2VkIGZyb20gdGhlIGNvbW1hbmQuXG4gICAqL1xuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBFeGVjT3B0aW9ucz47XG4gIH0gJiBFeGVjT3B0aW9ucyAmIHtcbiAgICAgIGVuY29kaW5nPzogQnVmZmVyRW5jb2Rpbmc7XG4gICAgfSAmIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV4ZWM8VCwgVSA9IHVuZGVmaW5lZD4oXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgb3B0aW9uc09yQXJncz86XG4gICAgfCBzdHJpbmdbXVxuICAgIHwgKHtcbiAgICAgICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIEJ1ZmZlciwgRXhlY09wdGlvbnM+IHwgUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIEV4ZWNPcHRpb25zPjtcbiAgICAgIH0gJiBFeGVjT3B0aW9ucyAmXG4gICAgICAgIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPiksXG4gIG9wdGlvbnM/OiB7XG4gICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIEJ1ZmZlciwgRXhlY09wdGlvbnM+IHwgUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIEV4ZWNPcHRpb25zPjtcbiAgfSAmIEV4ZWNPcHRpb25zICZcbiAgICBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPiB7XG4gIGNvbnN0IHtcbiAgICBwYXJzZU91dHB1dCxcbiAgICBpbnB1dCxcbiAgICBvbkRhdGEsXG4gICAgb25XaWxsRXhlY3V0ZSxcbiAgICBpbml0aWFsRGF0YSxcbiAgICBleGVjdXRlLFxuICAgIGtlZXBQcmV2aW91c0RhdGEsXG4gICAgb25FcnJvcixcbiAgICBmYWlsdXJlVG9hc3RPcHRpb25zLFxuICAgIC4uLmV4ZWNPcHRpb25zXG4gIH0gPSBBcnJheS5pc0FycmF5KG9wdGlvbnNPckFyZ3MpID8gb3B0aW9ucyB8fCB7fSA6IG9wdGlvbnNPckFyZ3MgfHwge307XG5cbiAgY29uc3QgdXNlQ2FjaGVkUHJvbWlzZU9wdGlvbnM6IEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPiA9IHtcbiAgICBpbml0aWFsRGF0YSxcbiAgICBleGVjdXRlLFxuICAgIGtlZXBQcmV2aW91c0RhdGEsXG4gICAgb25FcnJvcixcbiAgICBvbkRhdGEsXG4gICAgb25XaWxsRXhlY3V0ZSxcbiAgICBmYWlsdXJlVG9hc3RPcHRpb25zLFxuICB9O1xuXG4gIGNvbnN0IGFib3J0YWJsZSA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXI+KG51bGwpO1xuICBjb25zdCBwYXJzZU91dHB1dFJlZiA9IHVzZUxhdGVzdChwYXJzZU91dHB1dCB8fCBkZWZhdWx0UGFyc2luZyk7XG5cbiAgY29uc3QgZm4gPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoX2NvbW1hbmQ6IHN0cmluZywgX2FyZ3M6IHN0cmluZ1tdLCBfb3B0aW9ucz86IEV4ZWNPcHRpb25zLCBpbnB1dD86IHN0cmluZyB8IEJ1ZmZlcikgPT4ge1xuICAgICAgY29uc3QgW2ZpbGUsIC4uLmFyZ3NdID0gcGFyc2VDb21tYW5kKF9jb21tYW5kLCBfYXJncyk7XG4gICAgICBjb25zdCBjb21tYW5kID0gW2ZpbGUsIC4uLmFyZ3NdLmpvaW4oXCIgXCIpO1xuXG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSxcbiAgICAgICAgLi4uX29wdGlvbnMsXG4gICAgICAgIHRpbWVvdXQ6IF9vcHRpb25zPy50aW1lb3V0IHx8IDEwMDAwLFxuICAgICAgICBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwsXG4gICAgICAgIGVuY29kaW5nOiBfb3B0aW9ucz8uZW5jb2RpbmcgPT09IG51bGwgPyBcImJ1ZmZlclwiIDogX29wdGlvbnM/LmVuY29kaW5nIHx8IFwidXRmOFwiLFxuICAgICAgICBlbnY6IHsgUEFUSDogXCIvdXNyL2xvY2FsL2JpbjovdXNyL2JpbjovYmluOi91c3Ivc2Jpbjovc2JpblwiLCAuLi5wcm9jZXNzLmVudiwgLi4uX29wdGlvbnM/LmVudiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3Qgc3Bhd25lZCA9IGNoaWxkUHJvY2Vzcy5zcGF3bihmaWxlLCBhcmdzLCBvcHRpb25zKTtcbiAgICAgIGNvbnN0IHNwYXduZWRQcm9taXNlID0gZ2V0U3Bhd25lZFByb21pc2Uoc3Bhd25lZCwgb3B0aW9ucyk7XG5cbiAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICBzcGF3bmVkLnN0ZGluLmVuZChpbnB1dCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFt7IGVycm9yLCBleGl0Q29kZSwgc2lnbmFsLCB0aW1lZE91dCB9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdF0gPSBhd2FpdCBnZXRTcGF3bmVkUmVzdWx0KFxuICAgICAgICBzcGF3bmVkLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBzcGF3bmVkUHJvbWlzZSxcbiAgICAgICk7XG4gICAgICBjb25zdCBzdGRvdXQgPSBoYW5kbGVPdXRwdXQob3B0aW9ucywgc3Rkb3V0UmVzdWx0KTtcbiAgICAgIGNvbnN0IHN0ZGVyciA9IGhhbmRsZU91dHB1dChvcHRpb25zLCBzdGRlcnJSZXN1bHQpO1xuXG4gICAgICByZXR1cm4gcGFyc2VPdXRwdXRSZWYuY3VycmVudCh7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdG9vIG1hbnkgZ2VuZXJpY3MsIEkgZ2l2ZSB1cFxuICAgICAgICBzdGRvdXQsXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdG9vIG1hbnkgZ2VuZXJpY3MsIEkgZ2l2ZSB1cFxuICAgICAgICBzdGRlcnIsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBleGl0Q29kZSxcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICB0aW1lZE91dCxcbiAgICAgICAgY29tbWFuZCxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcGFyZW50RXJyb3I6IG5ldyBFcnJvcigpLFxuICAgICAgfSkgYXMgVDtcbiAgICB9LFxuICAgIFtwYXJzZU91dHB1dFJlZl0sXG4gICk7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBUIGNhbid0IGJlIGEgUHJvbWlzZSBzbyBpdCdzIGFjdHVhbGx5IHRoZSBzYW1lXG4gIHJldHVybiB1c2VDYWNoZWRQcm9taXNlKGZuLCBbY29tbWFuZCwgQXJyYXkuaXNBcnJheShvcHRpb25zT3JBcmdzKSA/IG9wdGlvbnNPckFyZ3MgOiBbXSwgZXhlY09wdGlvbnMsIGlucHV0XSwge1xuICAgIC4uLnVzZUNhY2hlZFByb21pc2VPcHRpb25zLFxuICAgIGFib3J0YWJsZSxcbiAgfSk7XG59XG4iLCAiaW1wb3J0IGNoaWxkUHJvY2VzcyBmcm9tIFwibm9kZTpjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyBjb25zdGFudHMgYXMgQnVmZmVyQ29uc3RhbnRzIH0gZnJvbSBcIm5vZGU6YnVmZmVyXCI7XG5pbXBvcnQgU3RyZWFtIGZyb20gXCJub2RlOnN0cmVhbVwiO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSBcIm5vZGU6dXRpbFwiO1xuaW1wb3J0IHsgb25FeGl0IH0gZnJvbSBcIi4vdmVuZG9ycy9zaWduYWwtZXhpdFwiO1xuXG5leHBvcnQgdHlwZSBTcGF3bmVkUHJvbWlzZSA9IFByb21pc2U8e1xuICBleGl0Q29kZTogbnVtYmVyIHwgbnVsbDtcbiAgZXJyb3I/OiBFcnJvcjtcbiAgc2lnbmFsOiBOb2RlSlMuU2lnbmFscyB8IG51bGw7XG4gIHRpbWVkT3V0OiBib29sZWFuO1xufT47XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcGF3bmVkUHJvbWlzZShcbiAgc3Bhd25lZDogY2hpbGRQcm9jZXNzLkNoaWxkUHJvY2Vzc1dpdGhvdXROdWxsU3RyZWFtcyxcbiAgeyB0aW1lb3V0IH06IHsgdGltZW91dD86IG51bWJlciB9ID0ge30sXG4pOiBTcGF3bmVkUHJvbWlzZSB7XG4gIGNvbnN0IHNwYXduZWRQcm9taXNlOiBTcGF3bmVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBzcGF3bmVkLm9uKFwiZXhpdFwiLCAoZXhpdENvZGUsIHNpZ25hbCkgPT4ge1xuICAgICAgcmVzb2x2ZSh7IGV4aXRDb2RlLCBzaWduYWwsIHRpbWVkT3V0OiBmYWxzZSB9KTtcbiAgICB9KTtcblxuICAgIHNwYXduZWQub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgIHJlamVjdChlcnJvcik7XG4gICAgfSk7XG5cbiAgICBpZiAoc3Bhd25lZC5zdGRpbikge1xuICAgICAgc3Bhd25lZC5zdGRpbi5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCByZW1vdmVFeGl0SGFuZGxlciA9IG9uRXhpdCgoKSA9PiB7XG4gICAgc3Bhd25lZC5raWxsKCk7XG4gIH0pO1xuXG4gIGlmICh0aW1lb3V0ID09PSAwIHx8IHRpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBzcGF3bmVkUHJvbWlzZS5maW5hbGx5KCgpID0+IHJlbW92ZUV4aXRIYW5kbGVyKCkpO1xuICB9XG5cbiAgbGV0IHRpbWVvdXRJZDogTm9kZUpTLlRpbWVvdXQ7XG4gIGNvbnN0IHRpbWVvdXRQcm9taXNlOiBTcGF3bmVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzcGF3bmVkLmtpbGwoXCJTSUdURVJNXCIpO1xuICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24obmV3IEVycm9yKFwiVGltZWQgb3V0XCIpLCB7IHRpbWVkT3V0OiB0cnVlLCBzaWduYWw6IFwiU0lHVEVSTVwiIH0pKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgfSk7XG5cbiAgY29uc3Qgc2FmZVNwYXduZWRQcm9taXNlID0gc3Bhd25lZFByb21pc2UuZmluYWxseSgoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gIH0pO1xuXG4gIHJldHVybiBQcm9taXNlLnJhY2UoW3RpbWVvdXRQcm9taXNlLCBzYWZlU3Bhd25lZFByb21pc2VdKS5maW5hbGx5KCgpID0+IHJlbW92ZUV4aXRIYW5kbGVyKCkpO1xufVxuXG5jbGFzcyBNYXhCdWZmZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJUaGUgb3V0cHV0IGlzIHRvbyBiaWdcIik7XG4gICAgdGhpcy5uYW1lID0gXCJNYXhCdWZmZXJFcnJvclwiO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ1ZmZlclN0cmVhbTxUIGV4dGVuZHMgc3RyaW5nIHwgQnVmZmVyPihvcHRpb25zOiB7IGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IFwiYnVmZmVyXCIgfSkge1xuICBjb25zdCB7IGVuY29kaW5nIH0gPSBvcHRpb25zO1xuICBjb25zdCBpc0J1ZmZlciA9IGVuY29kaW5nID09PSBcImJ1ZmZlclwiO1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgbWlzc2luZyB0aGUgbWV0aG9kcyB3ZSBhcmUgYWRkaW5nIGJlbG93XG4gIGNvbnN0IHN0cmVhbTogU3RyZWFtLlBhc3NUaHJvdWdoICYgeyBnZXRCdWZmZXJlZFZhbHVlOiAoKSA9PiBUOyBnZXRCdWZmZXJlZExlbmd0aDogKCkgPT4gbnVtYmVyIH0gPVxuICAgIG5ldyBTdHJlYW0uUGFzc1Rocm91Z2goeyBvYmplY3RNb2RlOiBmYWxzZSB9KTtcblxuICBpZiAoZW5jb2RpbmcgJiYgZW5jb2RpbmcgIT09IFwiYnVmZmVyXCIpIHtcbiAgICBzdHJlYW0uc2V0RW5jb2RpbmcoZW5jb2RpbmcpO1xuICB9XG5cbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGNvbnN0IGNodW5rczogYW55W10gPSBbXTtcblxuICBzdHJlYW0ub24oXCJkYXRhXCIsIChjaHVuaykgPT4ge1xuICAgIGNodW5rcy5wdXNoKGNodW5rKTtcblxuICAgIGxlbmd0aCArPSBjaHVuay5sZW5ndGg7XG4gIH0pO1xuXG4gIHN0cmVhbS5nZXRCdWZmZXJlZFZhbHVlID0gKCkgPT4ge1xuICAgIHJldHVybiAoaXNCdWZmZXIgPyBCdWZmZXIuY29uY2F0KGNodW5rcywgbGVuZ3RoKSA6IGNodW5rcy5qb2luKFwiXCIpKSBhcyBUO1xuICB9O1xuXG4gIHN0cmVhbS5nZXRCdWZmZXJlZExlbmd0aCA9ICgpID0+IGxlbmd0aDtcblxuICByZXR1cm4gc3RyZWFtO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRTdHJlYW08VCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlcj4oXG4gIGlucHV0U3RyZWFtOiBTdHJlYW0uUmVhZGFibGUsXG4gIG9wdGlvbnM6IHsgZW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nIHwgXCJidWZmZXJcIiB9LFxuKSB7XG4gIGNvbnN0IHN0cmVhbSA9IGJ1ZmZlclN0cmVhbTxUPihvcHRpb25zKTtcblxuICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVqZWN0UHJvbWlzZSA9IChlcnJvcjogRXJyb3IgJiB7IGJ1ZmZlcmVkRGF0YT86IFQgfSkgPT4ge1xuICAgICAgLy8gRG9uJ3QgcmV0cmlldmUgYW4gb3ZlcnNpemVkIGJ1ZmZlci5cbiAgICAgIGlmIChlcnJvciAmJiBzdHJlYW0uZ2V0QnVmZmVyZWRMZW5ndGgoKSA8PSBCdWZmZXJDb25zdGFudHMuTUFYX0xFTkdUSCkge1xuICAgICAgICBlcnJvci5idWZmZXJlZERhdGEgPSBzdHJlYW0uZ2V0QnVmZmVyZWRWYWx1ZSgpO1xuICAgICAgfVxuXG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH07XG5cbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcHJvbWlzaWZ5KFN0cmVhbS5waXBlbGluZSkoaW5wdXRTdHJlYW0sIHN0cmVhbSk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdFByb21pc2UoZXJyb3IgYXMgYW55KTtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgc3RyZWFtLm9uKFwiZGF0YVwiLCAoKSA9PiB7XG4gICAgICAvLyA4MG1iXG4gICAgICBpZiAoc3RyZWFtLmdldEJ1ZmZlcmVkTGVuZ3RoKCkgPiAxMDAwICogMTAwMCAqIDgwKSB7XG4gICAgICAgIHJlamVjdFByb21pc2UobmV3IE1heEJ1ZmZlckVycm9yKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gc3RyZWFtLmdldEJ1ZmZlcmVkVmFsdWUoKTtcbn1cblxuLy8gT24gZmFpbHVyZSwgYHJlc3VsdC5zdGRvdXR8c3RkZXJyYCBzaG91bGQgY29udGFpbiB0aGUgY3VycmVudGx5IGJ1ZmZlcmVkIHN0cmVhbVxuYXN5bmMgZnVuY3Rpb24gZ2V0QnVmZmVyZWREYXRhPFQgZXh0ZW5kcyBzdHJpbmcgfCBCdWZmZXI+KHN0cmVhbTogU3RyZWFtLlJlYWRhYmxlLCBzdHJlYW1Qcm9taXNlOiBQcm9taXNlPFQ+KSB7XG4gIHN0cmVhbS5kZXN0cm95KCk7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgc3RyZWFtUHJvbWlzZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gKGVycm9yIGFzIGFueSBhcyB7IGJ1ZmZlcmVkRGF0YTogVCB9KS5idWZmZXJlZERhdGE7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNwYXduZWRSZXN1bHQ8VCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlcj4oXG4gIHsgc3Rkb3V0LCBzdGRlcnIgfTogY2hpbGRQcm9jZXNzLkNoaWxkUHJvY2Vzc1dpdGhvdXROdWxsU3RyZWFtcyxcbiAgeyBlbmNvZGluZyB9OiB7IGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IFwiYnVmZmVyXCIgfSxcbiAgcHJvY2Vzc0RvbmU6IFNwYXduZWRQcm9taXNlLFxuKSB7XG4gIGNvbnN0IHN0ZG91dFByb21pc2UgPSBnZXRTdHJlYW08VD4oc3Rkb3V0LCB7IGVuY29kaW5nIH0pO1xuICBjb25zdCBzdGRlcnJQcm9taXNlID0gZ2V0U3RyZWFtPFQ+KHN0ZGVyciwgeyBlbmNvZGluZyB9KTtcblxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChbcHJvY2Vzc0RvbmUsIHN0ZG91dFByb21pc2UsIHN0ZGVyclByb21pc2VdKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB7XG4gICAgICAgIGVycm9yOiBlcnJvciBhcyBFcnJvcixcbiAgICAgICAgZXhpdENvZGU6IG51bGwsXG4gICAgICAgIHNpZ25hbDogZXJyb3Iuc2lnbmFsIGFzIE5vZGVKUy5TaWduYWxzIHwgbnVsbCxcbiAgICAgICAgdGltZWRPdXQ6IChlcnJvci50aW1lZE91dCBhcyBib29sZWFuKSB8fCBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBnZXRCdWZmZXJlZERhdGEoc3Rkb3V0LCBzdGRvdXRQcm9taXNlKSxcbiAgICAgIGdldEJ1ZmZlcmVkRGF0YShzdGRlcnIsIHN0ZGVyclByb21pc2UpLFxuICAgIF0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0cmlwRmluYWxOZXdsaW5lPFQgZXh0ZW5kcyBzdHJpbmcgfCBCdWZmZXI+KGlucHV0OiBUKSB7XG4gIGNvbnN0IExGID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gXCJcXG5cIiA6IFwiXFxuXCIuY2hhckNvZGVBdCgwKTtcbiAgY29uc3QgQ1IgPSB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgPyBcIlxcclwiIDogXCJcXHJcIi5jaGFyQ29kZUF0KDApO1xuXG4gIGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gTEYpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHdlIGFyZSBkb2luZyBzb21lIG5hc3R5IHN0dWZmIGhlcmVcbiAgICBpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcbiAgfVxuXG4gIGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gQ1IpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHdlIGFyZSBkb2luZyBzb21lIG5hc3R5IHN0dWZmIGhlcmVcbiAgICBpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcbiAgfVxuXG4gIHJldHVybiBpbnB1dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZU91dHB1dDxUIGV4dGVuZHMgc3RyaW5nIHwgQnVmZmVyPihvcHRpb25zOiB7IHN0cmlwRmluYWxOZXdsaW5lPzogYm9vbGVhbiB9LCB2YWx1ZTogVCkge1xuICBpZiAob3B0aW9ucy5zdHJpcEZpbmFsTmV3bGluZSkge1xuICAgIHJldHVybiBzdHJpcEZpbmFsTmV3bGluZSh2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yUHJlZml4KHtcbiAgdGltZWRPdXQsXG4gIHRpbWVvdXQsXG4gIHNpZ25hbCxcbiAgZXhpdENvZGUsXG59OiB7XG4gIGV4aXRDb2RlOiBudW1iZXIgfCBudWxsO1xuICBzaWduYWw6IE5vZGVKUy5TaWduYWxzIHwgbnVsbDtcbiAgdGltZWRPdXQ6IGJvb2xlYW47XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59KSB7XG4gIGlmICh0aW1lZE91dCkge1xuICAgIHJldHVybiBgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH0gbWlsbGlzZWNvbmRzYDtcbiAgfVxuXG4gIGlmIChzaWduYWwgIT09IHVuZGVmaW5lZCAmJiBzaWduYWwgIT09IG51bGwpIHtcbiAgICByZXR1cm4gYHdhcyBraWxsZWQgd2l0aCAke3NpZ25hbH1gO1xuICB9XG5cbiAgaWYgKGV4aXRDb2RlICE9PSB1bmRlZmluZWQgJiYgZXhpdENvZGUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gYGZhaWxlZCB3aXRoIGV4aXQgY29kZSAke2V4aXRDb2RlfWA7XG4gIH1cblxuICByZXR1cm4gXCJmYWlsZWRcIjtcbn1cblxuZnVuY3Rpb24gbWFrZUVycm9yKHtcbiAgc3Rkb3V0LFxuICBzdGRlcnIsXG4gIGVycm9yLFxuICBzaWduYWwsXG4gIGV4aXRDb2RlLFxuICBjb21tYW5kLFxuICB0aW1lZE91dCxcbiAgb3B0aW9ucyxcbiAgcGFyZW50RXJyb3IsXG59OiB7XG4gIHN0ZG91dDogc3RyaW5nIHwgQnVmZmVyO1xuICBzdGRlcnI6IHN0cmluZyB8IEJ1ZmZlcjtcbiAgZXJyb3I/OiBFcnJvcjtcbiAgZXhpdENvZGU6IG51bWJlciB8IG51bGw7XG4gIHNpZ25hbDogTm9kZUpTLlNpZ25hbHMgfCBudWxsO1xuICB0aW1lZE91dDogYm9vbGVhbjtcbiAgY29tbWFuZDogc3RyaW5nO1xuICBvcHRpb25zPzogeyB0aW1lb3V0PzogbnVtYmVyIH07XG4gIHBhcmVudEVycm9yOiBFcnJvcjtcbn0pIHtcbiAgY29uc3QgcHJlZml4ID0gZ2V0RXJyb3JQcmVmaXgoeyB0aW1lZE91dCwgdGltZW91dDogb3B0aW9ucz8udGltZW91dCwgc2lnbmFsLCBleGl0Q29kZSB9KTtcbiAgY29uc3QgZXhlY2FNZXNzYWdlID0gYENvbW1hbmQgJHtwcmVmaXh9OiAke2NvbW1hbmR9YDtcbiAgY29uc3Qgc2hvcnRNZXNzYWdlID0gZXJyb3IgPyBgJHtleGVjYU1lc3NhZ2V9XFxuJHtlcnJvci5tZXNzYWdlfWAgOiBleGVjYU1lc3NhZ2U7XG4gIGNvbnN0IG1lc3NhZ2UgPSBbc2hvcnRNZXNzYWdlLCBzdGRlcnIsIHN0ZG91dF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cIik7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3Qgb24gRXJyb3JcbiAgICBlcnJvci5vcmlnaW5hbE1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICB9IGVsc2Uge1xuICAgIGVycm9yID0gcGFyZW50RXJyb3I7XG4gIH1cblxuICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZTtcblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBvbiBFcnJvclxuICBlcnJvci5zaG9ydE1lc3NhZ2UgPSBzaG9ydE1lc3NhZ2U7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3Igbm90IG9uIEVycm9yXG4gIGVycm9yLmNvbW1hbmQgPSBjb21tYW5kO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBvbiBFcnJvclxuICBlcnJvci5leGl0Q29kZSA9IGV4aXRDb2RlO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBvbiBFcnJvclxuICBlcnJvci5zaWduYWwgPSBzaWduYWw7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3Igbm90IG9uIEVycm9yXG4gIGVycm9yLnN0ZG91dCA9IHN0ZG91dDtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3Qgb24gRXJyb3JcbiAgZXJyb3Iuc3RkZXJyID0gc3RkZXJyO1xuXG4gIGlmIChcImJ1ZmZlcmVkRGF0YVwiIGluIGVycm9yKSB7XG4gICAgZGVsZXRlIGVycm9yW1wiYnVmZmVyZWREYXRhXCJdO1xuICB9XG5cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5leHBvcnQgdHlwZSBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFxuICBULFxuICBEZWNvZGVkT3V0cHV0IGV4dGVuZHMgc3RyaW5nIHwgQnVmZmVyID0gc3RyaW5nIHwgQnVmZmVyLFxuICBPcHRpb25zID0gdW5rbm93bixcbj4gPSAoYXJnczoge1xuICAvKiogVGhlIG91dHB1dCBvZiB0aGUgcHJvY2VzcyBvbiBzdGRvdXQuICovXG4gIHN0ZG91dDogRGVjb2RlZE91dHB1dDtcbiAgLyoqIFRoZSBvdXRwdXQgb2YgdGhlIHByb2Nlc3Mgb24gc3RkZXJyLiAqL1xuICBzdGRlcnI6IERlY29kZWRPdXRwdXQ7XG4gIGVycm9yPzogRXJyb3I7XG4gIC8qKiBUaGUgbnVtZXJpYyBleGl0IGNvZGUgb2YgdGhlIHByb2Nlc3MgdGhhdCB3YXMgcnVuLiAqL1xuICBleGl0Q29kZTogbnVtYmVyIHwgbnVsbDtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBzaWduYWwgdGhhdCB3YXMgdXNlZCB0byB0ZXJtaW5hdGUgdGhlIHByb2Nlc3MuIEZvciBleGFtcGxlLCBTSUdGUEUuXG4gICAqXG4gICAqIElmIGEgc2lnbmFsIHRlcm1pbmF0ZWQgdGhlIHByb2Nlc3MsIHRoaXMgcHJvcGVydHkgaXMgZGVmaW5lZC4gT3RoZXJ3aXNlIGl0IGlzIG51bGwuXG4gICAqL1xuICBzaWduYWw6IE5vZGVKUy5TaWduYWxzIHwgbnVsbDtcbiAgLyoqIFdoZXRoZXIgdGhlIHByb2Nlc3MgdGltZWQgb3V0LiAqL1xuICB0aW1lZE91dDogYm9vbGVhbjtcbiAgLyoqIFRoZSBjb21tYW5kIHRoYXQgd2FzIHJ1biwgZm9yIGxvZ2dpbmcgcHVycG9zZXMuICovXG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgb3B0aW9ucz86IE9wdGlvbnM7XG59KSA9PiBUO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFBhcnNpbmc8VCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlcj4oe1xuICBzdGRvdXQsXG4gIHN0ZGVycixcbiAgZXJyb3IsXG4gIGV4aXRDb2RlLFxuICBzaWduYWwsXG4gIHRpbWVkT3V0LFxuICBjb21tYW5kLFxuICBvcHRpb25zLFxuICBwYXJlbnRFcnJvcixcbn06IHtcbiAgc3Rkb3V0OiBUO1xuICBzdGRlcnI6IFQ7XG4gIGVycm9yPzogRXJyb3I7XG4gIGV4aXRDb2RlOiBudW1iZXIgfCBudWxsO1xuICBzaWduYWw6IE5vZGVKUy5TaWduYWxzIHwgbnVsbDtcbiAgdGltZWRPdXQ6IGJvb2xlYW47XG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgb3B0aW9ucz86IHsgdGltZW91dD86IG51bWJlciB9O1xuICBwYXJlbnRFcnJvcjogRXJyb3I7XG59KSB7XG4gIGlmIChlcnJvciB8fCBleGl0Q29kZSAhPT0gMCB8fCBzaWduYWwgIT09IG51bGwpIHtcbiAgICBjb25zdCByZXR1cm5lZEVycm9yID0gbWFrZUVycm9yKHtcbiAgICAgIGVycm9yLFxuICAgICAgZXhpdENvZGUsXG4gICAgICBzaWduYWwsXG4gICAgICBzdGRvdXQsXG4gICAgICBzdGRlcnIsXG4gICAgICBjb21tYW5kLFxuICAgICAgdGltZWRPdXQsXG4gICAgICBvcHRpb25zLFxuICAgICAgcGFyZW50RXJyb3IsXG4gICAgfSk7XG5cbiAgICB0aHJvdyByZXR1cm5lZEVycm9yO1xuICB9XG5cbiAgcmV0dXJuIHN0ZG91dDtcbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8vIE5vdGU6IHNpbmNlIG55YyB1c2VzIHRoaXMgbW9kdWxlIHRvIG91dHB1dCBjb3ZlcmFnZSwgYW55IGxpbmVzXG4vLyB0aGF0IGFyZSBpbiB0aGUgZGlyZWN0IHN5bmMgZmxvdyBvZiBueWMncyBvdXRwdXRDb3ZlcmFnZSBhcmVcbi8vIGlnbm9yZWQsIHNpbmNlIHdlIGNhbiBuZXZlciBnZXQgY292ZXJhZ2UgZm9yIHRoZW0uXG4vLyBncmFiIGEgcmVmZXJlbmNlIHRvIG5vZGUncyByZWFsIHByb2Nlc3Mgb2JqZWN0IHJpZ2h0IGF3YXlcblxuY29uc3QgcHJvY2Vzc09rID0gKHByb2Nlc3M6IGFueSkgPT5cbiAgISFwcm9jZXNzICYmXG4gIHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmXG4gIHR5cGVvZiBwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIHByb2Nlc3MuZW1pdCA9PT0gXCJmdW5jdGlvblwiICYmXG4gIHR5cGVvZiBwcm9jZXNzLnJlYWxseUV4aXQgPT09IFwiZnVuY3Rpb25cIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5saXN0ZW5lcnMgPT09IFwiZnVuY3Rpb25cIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5raWxsID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIHByb2Nlc3MucGlkID09PSBcIm51bWJlclwiICYmXG4gIHR5cGVvZiBwcm9jZXNzLm9uID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBrRXhpdEVtaXR0ZXIgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcInNpZ25hbC1leGl0IGVtaXR0ZXJcIik7XG4vLyB0ZWVueSBzcGVjaWFsIHB1cnBvc2UgZWVcbmNsYXNzIEVtaXR0ZXIge1xuICBlbWl0dGVkID0ge1xuICAgIGFmdGVyRXhpdDogZmFsc2UsXG4gICAgZXhpdDogZmFsc2UsXG4gIH07XG4gIGxpc3RlbmVycyA9IHtcbiAgICBhZnRlckV4aXQ6IFtdLFxuICAgIGV4aXQ6IFtdLFxuICB9O1xuICBjb3VudCA9IDA7XG4gIGlkID0gTWF0aC5yYW5kb20oKTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChnbG9iYWxba0V4aXRFbWl0dGVyXSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgcmV0dXJuIGdsb2JhbFtrRXhpdEVtaXR0ZXJdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCBrRXhpdEVtaXR0ZXIsIHtcbiAgICAgIHZhbHVlOiB0aGlzLFxuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIH0pO1xuICB9XG4gIG9uKGV2OiBhbnksIGZuOiBhbnkpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdGhpcy5saXN0ZW5lcnNbZXZdLnB1c2goZm4pO1xuICB9XG4gIHJlbW92ZUxpc3RlbmVyKGV2OiBhbnksIGZuOiBhbnkpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgbGlzdCA9IHRoaXMubGlzdGVuZXJzW2V2XTtcbiAgICBjb25zdCBpID0gbGlzdC5pbmRleE9mKGZuKTtcbiAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyogYzggaWdub3JlIHN0b3AgKi9cbiAgICBpZiAoaSA9PT0gMCAmJiBsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH1cbiAgZW1pdChldjogYW55LCBjb2RlOiBhbnksIHNpZ25hbDogYW55KTogYW55IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKHRoaXMuZW1pdHRlZFtldl0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHRoaXMuZW1pdHRlZFtldl0gPSB0cnVlO1xuICAgIGxldCByZXQgPSBmYWxzZTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBmbiBvZiB0aGlzLmxpc3RlbmVyc1tldl0pIHtcbiAgICAgIHJldCA9IGZuKGNvZGUsIHNpZ25hbCkgPT09IHRydWUgfHwgcmV0O1xuICAgIH1cbiAgICBpZiAoZXYgPT09IFwiZXhpdFwiKSB7XG4gICAgICByZXQgPSB0aGlzLmVtaXQoXCJhZnRlckV4aXRcIiwgY29kZSwgc2lnbmFsKSB8fCByZXQ7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cblxuY2xhc3MgU2lnbmFsRXhpdEZhbGxiYWNrIHtcbiAgb25FeGl0KCkge1xuICAgIHJldHVybiAoKSA9PiB7fTtcbiAgfVxuICBsb2FkKCkge31cbiAgdW5sb2FkKCkge31cbn1cbmNsYXNzIFNpZ25hbEV4aXQge1xuICAvLyBcIlNJR0hVUFwiIHRocm93cyBhbiBgRU5PU1lTYCBlcnJvciBvbiBXaW5kb3dzLFxuICAvLyBzbyB1c2UgYSBzdXBwb3J0ZWQgc2lnbmFsIGluc3RlYWRcbiAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gIC8vIEB0cy1pZ25vcmVcbiAgI2h1cFNpZyA9IHByb2Nlc3MucGxhdGZvcm0gPT09IFwid2luMzJcIiA/IFwiU0lHSU5UXCIgOiBcIlNJR0hVUFwiO1xuICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAjZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICNwcm9jZXNzOiBhbnk7XG4gICNvcmlnaW5hbFByb2Nlc3NFbWl0OiBhbnk7XG4gICNvcmlnaW5hbFByb2Nlc3NSZWFsbHlFeGl0OiBhbnk7XG4gICNzaWdMaXN0ZW5lcnMgPSB7fTtcbiAgI2xvYWRlZCA9IGZhbHNlO1xuICAjc2lnbmFsczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3RydWN0b3IocHJvY2VzczogYW55KSB7XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBub3QgdGhlIHNldCBvZiBhbGwgcG9zc2libGUgc2lnbmFscy5cbiAgICAgKlxuICAgICAqIEl0IElTLCBob3dldmVyLCB0aGUgc2V0IG9mIGFsbCBzaWduYWxzIHRoYXQgdHJpZ2dlclxuICAgICAqIGFuIGV4aXQgb24gZWl0aGVyIExpbnV4IG9yIEJTRCBzeXN0ZW1zLiAgTGludXggaXMgYVxuICAgICAqIHN1cGVyc2V0IG9mIHRoZSBzaWduYWwgbmFtZXMgc3VwcG9ydGVkIG9uIEJTRCwgYW5kXG4gICAgICogdGhlIHVua25vd24gc2lnbmFscyBqdXN0IGZhaWwgdG8gcmVnaXN0ZXIsIHNvIHdlIGNhblxuICAgICAqIGNhdGNoIHRoYXQgZWFzaWx5IGVub3VnaC5cbiAgICAgKlxuICAgICAqIFdpbmRvd3Mgc2lnbmFscyBhcmUgYSBkaWZmZXJlbnQgc2V0LCBzaW5jZSB0aGVyZSBhcmVcbiAgICAgKiBzaWduYWxzIHRoYXQgdGVybWluYXRlIFdpbmRvd3MgcHJvY2Vzc2VzLCBidXQgZG9uJ3RcbiAgICAgKiB0ZXJtaW5hdGUgKG9yIGRvbid0IGV2ZW4gZXhpc3QpIG9uIFBvc2l4IHN5c3RlbXMuXG4gICAgICpcbiAgICAgKiBEb24ndCBib3RoZXIgd2l0aCBTSUdLSUxMLiAgSXQncyB1bmNhdGNoYWJsZSwgd2hpY2hcbiAgICAgKiBtZWFucyB0aGF0IHdlIGNhbid0IGZpcmUgYW55IGNhbGxiYWNrcyBhbnl3YXkuXG4gICAgICpcbiAgICAgKiBJZiBhIHVzZXIgZG9lcyBoYXBwZW4gdG8gcmVnaXN0ZXIgYSBoYW5kbGVyIG9uIGEgbm9uLVxuICAgICAqIGZhdGFsIHNpZ25hbCBsaWtlIFNJR1dJTkNIIG9yIHNvbWV0aGluZywgYW5kIHRoZW5cbiAgICAgKiBleGl0LCBpdCdsbCBlbmQgdXAgZmlyaW5nIGBwcm9jZXNzLmVtaXQoJ2V4aXQnKWAsIHNvXG4gICAgICogdGhlIGhhbmRsZXIgd2lsbCBiZSBmaXJlZCBhbnl3YXkuXG4gICAgICpcbiAgICAgKiBTSUdCVVMsIFNJR0ZQRSwgU0lHU0VHViBhbmQgU0lHSUxMLCB3aGVuIG5vdCByYWlzZWRcbiAgICAgKiBhcnRpZmljaWFsbHksIGluaGVyZW50bHkgbGVhdmUgdGhlIHByb2Nlc3MgaW4gYVxuICAgICAqIHN0YXRlIGZyb20gd2hpY2ggaXQgaXMgbm90IHNhZmUgdG8gdHJ5IGFuZCBlbnRlciBKU1xuICAgICAqIGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICB0aGlzLiNzaWduYWxzLnB1c2goXCJTSUdIVVBcIiwgXCJTSUdJTlRcIiwgXCJTSUdURVJNXCIpO1xuICAgIGlmIChnbG9iYWxUaGlzLnByb2Nlc3MucGxhdGZvcm0gIT09IFwid2luMzJcIikge1xuICAgICAgdGhpcy4jc2lnbmFscy5wdXNoKFxuICAgICAgICBcIlNJR0FMUk1cIixcbiAgICAgICAgXCJTSUdBQlJUXCIsXG4gICAgICAgIFwiU0lHVlRBTFJNXCIsXG4gICAgICAgIFwiU0lHWENQVVwiLFxuICAgICAgICBcIlNJR1hGU1pcIixcbiAgICAgICAgXCJTSUdVU1IyXCIsXG4gICAgICAgIFwiU0lHVFJBUFwiLFxuICAgICAgICBcIlNJR1NZU1wiLFxuICAgICAgICBcIlNJR1FVSVRcIixcbiAgICAgICAgXCJTSUdJT1RcIixcbiAgICAgICAgLy8gc2hvdWxkIGRldGVjdCBwcm9maWxlciBhbmQgZW5hYmxlL2Rpc2FibGUgYWNjb3JkaW5nbHkuXG4gICAgICAgIC8vIHNlZSAjMjFcbiAgICAgICAgLy8gJ1NJR1BST0YnXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZ2xvYmFsVGhpcy5wcm9jZXNzLnBsYXRmb3JtID09PSBcImxpbnV4XCIpIHtcbiAgICAgIHRoaXMuI3NpZ25hbHMucHVzaChcIlNJR0lPXCIsIFwiU0lHUE9MTFwiLCBcIlNJR1BXUlwiLCBcIlNJR1NUS0ZMVFwiKTtcbiAgICB9XG4gICAgdGhpcy4jcHJvY2VzcyA9IHByb2Nlc3M7XG4gICAgLy8geyA8c2lnbmFsPjogPGxpc3RlbmVyIGZuPiwgLi4uIH1cbiAgICB0aGlzLiNzaWdMaXN0ZW5lcnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHNpZyBvZiB0aGlzLiNzaWduYWxzKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLiNzaWdMaXN0ZW5lcnNbc2lnXSA9ICgpID0+IHtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIG90aGVyIGxpc3RlbmVycywgYW4gZXhpdCBpcyBjb21pbmchXG4gICAgICAgIC8vIFNpbXBsZXN0IHdheTogcmVtb3ZlIHVzIGFuZCB0aGVuIHJlLXNlbmQgdGhlIHNpZ25hbC5cbiAgICAgICAgLy8gV2Uga25vdyB0aGF0IHRoaXMgd2lsbCBraWxsIHRoZSBwcm9jZXNzLCBzbyB3ZSBjYW5cbiAgICAgICAgLy8gc2FmZWx5IGVtaXQgbm93LlxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLiNwcm9jZXNzLmxpc3RlbmVycyhzaWcpO1xuICAgICAgICBsZXQgeyBjb3VudCB9ID0gdGhpcy4jZW1pdHRlcjtcbiAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoZSBmYWN0IHRoYXQgc2lnbmFsLWV4aXQgdjMgYW5kIHNpZ25hbFxuICAgICAgICAvLyBleGl0IHY0IGFyZSBub3QgYXdhcmUgb2YgZWFjaCBvdGhlciwgYW5kIGVhY2ggd2lsbCBhdHRlbXB0IHRvIGxldFxuICAgICAgICAvLyB0aGUgb3RoZXIgaGFuZGxlIGl0LCBzbyBuZWl0aGVyIG9mIHRoZW0gZG8uIFRvIGNvcnJlY3QgdGhpcywgd2VcbiAgICAgICAgLy8gZGV0ZWN0IGlmIHdlJ3JlIHRoZSBvbmx5IGhhbmRsZXIgKmV4Y2VwdCogZm9yIHByZXZpb3VzIHZlcnNpb25zXG4gICAgICAgIC8vIG9mIHNpZ25hbC1leGl0LCBhbmQgaW5jcmVtZW50IGJ5IHRoZSBjb3VudCBvZiBsaXN0ZW5lcnMgaXQgaGFzXG4gICAgICAgIC8vIGNyZWF0ZWQuXG4gICAgICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgICAgICBjb25zdCBwID0gcHJvY2VzcztcbiAgICAgICAgaWYgKHR5cGVvZiBwLl9fc2lnbmFsX2V4aXRfZW1pdHRlcl9fID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwLl9fc2lnbmFsX2V4aXRfZW1pdHRlcl9fLmNvdW50ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgY291bnQgKz0gcC5fX3NpZ25hbF9leGl0X2VtaXR0ZXJfXy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gY291bnQpIHtcbiAgICAgICAgICB0aGlzLnVubG9hZCgpO1xuICAgICAgICAgIGNvbnN0IHJldCA9IHRoaXMuI2VtaXR0ZXIuZW1pdChcImV4aXRcIiwgbnVsbCwgc2lnKTtcbiAgICAgICAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICAgICAgICBjb25zdCBzID0gc2lnID09PSBcIlNJR0hVUFwiID8gdGhpcy4jaHVwU2lnIDogc2lnO1xuICAgICAgICAgIGlmICghcmV0KSBwcm9jZXNzLmtpbGwocHJvY2Vzcy5waWQsIHMpO1xuICAgICAgICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuI29yaWdpbmFsUHJvY2Vzc1JlYWxseUV4aXQgPSBwcm9jZXNzLnJlYWxseUV4aXQ7XG4gICAgdGhpcy4jb3JpZ2luYWxQcm9jZXNzRW1pdCA9IHByb2Nlc3MuZW1pdDtcbiAgfVxuICBvbkV4aXQoY2I6IGFueSwgb3B0czogYW55KSB7XG4gICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgaWYgKCFwcm9jZXNzT2sodGhpcy4jcHJvY2VzcykpIHtcbiAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICB9XG4gICAgLyogYzggaWdub3JlIHN0b3AgKi9cbiAgICBpZiAodGhpcy4jbG9hZGVkID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfVxuICAgIGNvbnN0IGV2ID0gb3B0cz8uYWx3YXlzTGFzdCA/IFwiYWZ0ZXJFeGl0XCIgOiBcImV4aXRcIjtcbiAgICB0aGlzLiNlbWl0dGVyLm9uKGV2LCBjYik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuI2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXYsIGNiKTtcbiAgICAgIGlmICh0aGlzLiNlbWl0dGVyLmxpc3RlbmVyc1tcImV4aXRcIl0ubGVuZ3RoID09PSAwICYmIHRoaXMuI2VtaXR0ZXIubGlzdGVuZXJzW1wiYWZ0ZXJFeGl0XCJdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnVubG9hZCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgbG9hZCgpIHtcbiAgICBpZiAodGhpcy4jbG9hZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2xvYWRlZCA9IHRydWU7XG4gICAgLy8gVGhpcyBpcyB0aGUgbnVtYmVyIG9mIG9uU2lnbmFsRXhpdCdzIHRoYXQgYXJlIGluIHBsYXkuXG4gICAgLy8gSXQncyBpbXBvcnRhbnQgc28gdGhhdCB3ZSBjYW4gY291bnQgdGhlIGNvcnJlY3QgbnVtYmVyIG9mXG4gICAgLy8gbGlzdGVuZXJzIG9uIHNpZ25hbHMsIGFuZCBkb24ndCB3YWl0IGZvciB0aGUgb3RoZXIgb25lIHRvXG4gICAgLy8gaGFuZGxlIGl0IGluc3RlYWQgb2YgdXMuXG4gICAgdGhpcy4jZW1pdHRlci5jb3VudCArPSAxO1xuICAgIGZvciAoY29uc3Qgc2lnIG9mIHRoaXMuI3NpZ25hbHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZm4gPSB0aGlzLiNzaWdMaXN0ZW5lcnNbc2lnXTtcbiAgICAgICAgaWYgKGZuKSB0aGlzLiNwcm9jZXNzLm9uKHNpZywgZm4pO1xuICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAvLyBuby1vcFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiNwcm9jZXNzLmVtaXQgPSAoZXY6IGFueSwgLi4uYTogYW55KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy4jcHJvY2Vzc0VtaXQoZXYsIC4uLmEpO1xuICAgIH07XG4gICAgdGhpcy4jcHJvY2Vzcy5yZWFsbHlFeGl0ID0gKGNvZGU6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuI3Byb2Nlc3NSZWFsbHlFeGl0KGNvZGUpO1xuICAgIH07XG4gIH1cbiAgdW5sb2FkKCkge1xuICAgIGlmICghdGhpcy4jbG9hZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuI2xvYWRlZCA9IGZhbHNlO1xuICAgIHRoaXMuI3NpZ25hbHMuZm9yRWFjaCgoc2lnKSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMuI3NpZ0xpc3RlbmVyc1tzaWddO1xuICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxpc3RlbmVyIG5vdCBkZWZpbmVkIGZvciBzaWduYWw6IFwiICsgc2lnKTtcbiAgICAgIH1cbiAgICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLiNwcm9jZXNzLnJlbW92ZUxpc3RlbmVyKHNpZywgbGlzdGVuZXIpO1xuICAgICAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgLy8gbm8tb3BcbiAgICAgIH1cbiAgICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgfSk7XG4gICAgdGhpcy4jcHJvY2Vzcy5lbWl0ID0gdGhpcy4jb3JpZ2luYWxQcm9jZXNzRW1pdDtcbiAgICB0aGlzLiNwcm9jZXNzLnJlYWxseUV4aXQgPSB0aGlzLiNvcmlnaW5hbFByb2Nlc3NSZWFsbHlFeGl0O1xuICAgIHRoaXMuI2VtaXR0ZXIuY291bnQgLT0gMTtcbiAgfVxuICAjcHJvY2Vzc1JlYWxseUV4aXQoY29kZTogYW55KSB7XG4gICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgaWYgKCFwcm9jZXNzT2sodGhpcy4jcHJvY2VzcykpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICB0aGlzLiNwcm9jZXNzLmV4aXRDb2RlID0gY29kZSB8fCAwO1xuICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgdGhpcy4jZW1pdHRlci5lbWl0KFwiZXhpdFwiLCB0aGlzLiNwcm9jZXNzLmV4aXRDb2RlLCBudWxsKTtcbiAgICByZXR1cm4gdGhpcy4jb3JpZ2luYWxQcm9jZXNzUmVhbGx5RXhpdC5jYWxsKHRoaXMuI3Byb2Nlc3MsIHRoaXMuI3Byb2Nlc3MuZXhpdENvZGUpO1xuICB9XG4gICNwcm9jZXNzRW1pdChldjogYW55LCAuLi5hcmdzOiBhbnkpIHtcbiAgICBjb25zdCBvZyA9IHRoaXMuI29yaWdpbmFsUHJvY2Vzc0VtaXQ7XG4gICAgaWYgKGV2ID09PSBcImV4aXRcIiAmJiBwcm9jZXNzT2sodGhpcy4jcHJvY2VzcykpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICB0aGlzLiNwcm9jZXNzLmV4aXRDb2RlID0gYXJnc1swXTtcbiAgICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICB9XG4gICAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICAgIGNvbnN0IHJldCA9IG9nLmNhbGwodGhpcy4jcHJvY2VzcywgZXYsIC4uLmFyZ3MpO1xuICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICB0aGlzLiNlbWl0dGVyLmVtaXQoXCJleGl0XCIsIHRoaXMuI3Byb2Nlc3MuZXhpdENvZGUsIG51bGwpO1xuICAgICAgLyogYzggaWdub3JlIHN0b3AgKi9cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvZy5jYWxsKHRoaXMuI3Byb2Nlc3MsIGV2LCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cbn1cblxubGV0IHNpZ25hbEV4aXQ6IFNpZ25hbEV4aXQgfCBTaWduYWxFeGl0RmFsbGJhY2sgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IG9uRXhpdCA9IChcbiAgY2I6IGFueSxcbiAgb3B0cz86IHtcbiAgICBhbHdheXNMYXN0PzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgfSxcbikgPT4ge1xuICBpZiAoIXNpZ25hbEV4aXQpIHtcbiAgICBzaWduYWxFeGl0ID0gcHJvY2Vzc09rKHByb2Nlc3MpID8gbmV3IFNpZ25hbEV4aXQocHJvY2VzcykgOiBuZXcgU2lnbmFsRXhpdEZhbGxiYWNrKCk7XG4gIH1cbiAgcmV0dXJuIHNpZ25hbEV4aXQub25FeGl0KGNiLCBvcHRzKTtcbn07XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBjcmVhdGVSZWFkU3RyZWFtLCBjcmVhdGVXcml0ZVN0cmVhbSwgbWtkaXJTeW5jLCBTdGF0cyB9IGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgeyBzdGF0IH0gZnJvbSBcIm5vZGU6ZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGpvaW4sIG5vcm1hbGl6ZSB9IGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCB7IHBpcGVsaW5lIH0gZnJvbSBcIm5vZGU6c3RyZWFtL3Byb21pc2VzXCI7XG5pbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBDaGFpbiBmcm9tIFwiLi92ZW5kb3JzL3N0cmVhbS1jaGFpblwiO1xuaW1wb3J0IHsgcGFyc2VyLCBQaWNrUGFyc2VyLCBTdHJlYW1BcnJheSB9IGZyb20gXCIuL3ZlbmRvcnMvc3RyZWFtLWpzb25cIjtcbmltcG9ydCB7IGlzSlNPTiB9IGZyb20gXCIuL2ZldGNoLXV0aWxzXCI7XG5pbXBvcnQgeyBGbGF0dGVuLCBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2UsIFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IENhY2hlZFByb21pc2VPcHRpb25zLCB1c2VDYWNoZWRQcm9taXNlIH0gZnJvbSBcIi4vdXNlQ2FjaGVkUHJvbWlzZVwiO1xuaW1wb3J0IHsgaGFzaCB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxudHlwZSBSZXF1ZXN0SW5mbyA9IHN0cmluZyB8IFVSTCB8IGdsb2JhbFRoaXMuUmVxdWVzdDtcblxuYXN5bmMgZnVuY3Rpb24gY2FjaGUodXJsOiBSZXF1ZXN0SW5mbywgZGVzdGluYXRpb246IHN0cmluZywgZmV0Y2hPcHRpb25zPzogUmVxdWVzdEluaXQpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgfHwgdXJsLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpIHx8IHVybC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcbiAgICByZXR1cm4gYXdhaXQgY2FjaGVVUkwodXJsLCBkZXN0aW5hdGlvbiwgZmV0Y2hPcHRpb25zKTtcbiAgfSBlbHNlIGlmICh1cmwuc3RhcnRzV2l0aChcImZpbGU6Ly9cIikpIHtcbiAgICByZXR1cm4gYXdhaXQgY2FjaGVGaWxlKFxuICAgICAgbm9ybWFsaXplKGRlY29kZVVSSUNvbXBvbmVudChuZXcgVVJMKHVybCkucGF0aG5hbWUpKSxcbiAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgZmV0Y2hPcHRpb25zPy5zaWduYWwgPyBmZXRjaE9wdGlvbnMuc2lnbmFsIDogdW5kZWZpbmVkLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBIVFRQKFMpIG9yIGZpbGUgVVJMcyBhcmUgc3VwcG9ydGVkXCIpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlVVJMKHVybDogUmVxdWVzdEluZm8sIGRlc3RpbmF0aW9uOiBzdHJpbmcsIGZldGNoT3B0aW9ucz86IFJlcXVlc3RJbml0KSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBmZXRjaE9wdGlvbnMpO1xuXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggVVJMXCIpO1xuICB9XG5cbiAgaWYgKCFpc0pTT04ocmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVVJMIGRvZXMgbm90IHJldHVybiBKU09OXCIpO1xuICB9XG4gIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSBleHBlY3RlZCBKU09OIGNvbnRlbnQ6IFJlc3BvbnNlIGJvZHkgaXMgbWlzc2luZyBvciBpbmFjY2Vzc2libGUuXCIpO1xuICB9XG4gIGF3YWl0IHBpcGVsaW5lKFxuICAgIHJlc3BvbnNlLmJvZHkgYXMgdW5rbm93biBhcyBOb2RlSlMuUmVhZGFibGVTdHJlYW0sXG4gICAgY3JlYXRlV3JpdGVTdHJlYW0oZGVzdGluYXRpb24pLFxuICAgIGZldGNoT3B0aW9ucz8uc2lnbmFsID8geyBzaWduYWw6IGZldGNoT3B0aW9ucy5zaWduYWwgfSA6IHVuZGVmaW5lZCxcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2FjaGVGaWxlKHNvdXJjZTogc3RyaW5nLCBkZXN0aW5hdGlvbjogc3RyaW5nLCBhYm9ydFNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gIGF3YWl0IHBpcGVsaW5lKFxuICAgIGNyZWF0ZVJlYWRTdHJlYW0oc291cmNlKSxcbiAgICBjcmVhdGVXcml0ZVN0cmVhbShkZXN0aW5hdGlvbiksXG4gICAgYWJvcnRTaWduYWwgPyB7IHNpZ25hbDogYWJvcnRTaWduYWwgfSA6IHVuZGVmaW5lZCxcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2FjaGVVUkxJZk5lY2Vzc2FyeShcbiAgdXJsOiBSZXF1ZXN0SW5mbyxcbiAgZm9sZGVyOiBzdHJpbmcsXG4gIGZpbGVOYW1lOiBzdHJpbmcsXG4gIGZvcmNlVXBkYXRlOiBib29sZWFuLFxuICBmZXRjaE9wdGlvbnM/OiBSZXF1ZXN0SW5pdCxcbikge1xuICBjb25zdCBkZXN0aW5hdGlvbiA9IGpvaW4oZm9sZGVyLCBmaWxlTmFtZSk7XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBzdGF0KGZvbGRlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBta2RpclN5bmMoZm9sZGVyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBjYWNoZSh1cmwsIGRlc3RpbmF0aW9uLCBmZXRjaE9wdGlvbnMpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZm9yY2VVcGRhdGUpIHtcbiAgICBhd2FpdCBjYWNoZSh1cmwsIGRlc3RpbmF0aW9uLCBmZXRjaE9wdGlvbnMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBzdGF0czogU3RhdHMgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIHRyeSB7XG4gICAgc3RhdHMgPSBhd2FpdCBzdGF0KGRlc3RpbmF0aW9uKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGF3YWl0IGNhY2hlKHVybCwgZGVzdGluYXRpb24sIGZldGNoT3B0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgfHwgdXJsLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpIHx8IHVybC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcbiAgICBjb25zdCBoZWFkUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgLi4uZmV0Y2hPcHRpb25zLCBtZXRob2Q6IFwiSEVBRFwiIH0pO1xuICAgIGlmICghaGVhZFJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmV0Y2ggVVJMXCIpO1xuICAgIH1cblxuICAgIGlmICghaXNKU09OKGhlYWRSZXNwb25zZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVSTCBkb2VzIG5vdCByZXR1cm4gSlNPTlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBsYXN0TW9kaWZpZWQgPSBEYXRlLnBhcnNlKGhlYWRSZXNwb25zZS5oZWFkZXJzLmdldChcImxhc3QtbW9kaWZpZWRcIikgPz8gXCJcIik7XG4gICAgaWYgKHN0YXRzLnNpemUgPT09IDAgfHwgTnVtYmVyLmlzTmFOKGxhc3RNb2RpZmllZCkgfHwgbGFzdE1vZGlmaWVkID4gc3RhdHMubXRpbWVNcykge1xuICAgICAgYXdhaXQgY2FjaGUodXJsLCBkZXN0aW5hdGlvbiwgZmV0Y2hPcHRpb25zKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSBpZiAodXJsLnN0YXJ0c1dpdGgoXCJmaWxlOi8vXCIpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNvdXJjZVN0YXRzID0gYXdhaXQgc3RhdChub3JtYWxpemUoZGVjb2RlVVJJQ29tcG9uZW50KG5ldyBVUkwodXJsKS5wYXRobmFtZSkpKTtcbiAgICAgIGlmIChzb3VyY2VTdGF0cy5tdGltZU1zID4gc3RhdHMubXRpbWVNcykge1xuICAgICAgICBhd2FpdCBjYWNoZSh1cmwsIGRlc3RpbmF0aW9uLCBmZXRjaE9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBmaWxlIGNvdWxkIG5vdCBiZSByZWFkXCIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IEhUVFAoUykgb3IgZmlsZSBVUkxzIGFyZSBzdXBwb3J0ZWRcIik7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24qIHN0cmVhbUpzb25GaWxlPFQ+KFxuICBmaWxlUGF0aDogc3RyaW5nLFxuICBwYWdlU2l6ZTogbnVtYmVyLFxuICBhYm9ydFNpZ25hbD86IEFib3J0U2lnbmFsLFxuICBkYXRhUGF0aD86IHN0cmluZyB8IFJlZ0V4cCxcbiAgZmlsdGVyRm4/OiAoaXRlbTogRmxhdHRlbjxUPikgPT4gYm9vbGVhbixcbiAgdHJhbnNmb3JtRm4/OiAoaXRlbTogYW55KSA9PiBULFxuKTogQXN5bmNHZW5lcmF0b3I8VCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW10+IHtcbiAgbGV0IHBhZ2U6IFQgZXh0ZW5kcyB1bmtub3duW10gPyBUIDogVFtdID0gW10gYXMgVCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW107XG5cbiAgY29uc3QgcGlwZWxpbmUgPSBDaGFpbihbXG4gICAgY3JlYXRlUmVhZFN0cmVhbShmaWxlUGF0aCksXG4gICAgZGF0YVBhdGggPyBQaWNrUGFyc2VyKHsgZmlsdGVyOiBkYXRhUGF0aCB9KSA6IHBhcnNlcigpLFxuICAgIFN0cmVhbUFycmF5KCksXG4gICAgKGRhdGE6IGFueSkgPT4gdHJhbnNmb3JtRm4/LihkYXRhLnZhbHVlKSA/PyBkYXRhLnZhbHVlLFxuICBdKTtcblxuICBhYm9ydFNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICBwaXBlbGluZS5kZXN0cm95KCk7XG4gIH0pO1xuXG4gIHRyeSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBkYXRhIG9mIHBpcGVsaW5lKSB7XG4gICAgICBpZiAoYWJvcnRTaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFmaWx0ZXJGbiB8fCBmaWx0ZXJGbihkYXRhKSkge1xuICAgICAgICBwYWdlLnB1c2goZGF0YSk7XG4gICAgICB9XG4gICAgICBpZiAocGFnZS5sZW5ndGggPj0gcGFnZVNpemUpIHtcbiAgICAgICAgeWllbGQgcGFnZTtcbiAgICAgICAgcGFnZSA9IFtdIGFzIFQgZXh0ZW5kcyB1bmtub3duW10gPyBUIDogVFtdO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHBpcGVsaW5lLmRlc3Ryb3koKTtcbiAgICB0aHJvdyBlO1xuICB9XG5cbiAgaWYgKHBhZ2UubGVuZ3RoID4gMCkge1xuICAgIHlpZWxkIHBhZ2U7XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbnR5cGUgT3B0aW9uczxUPiA9IHtcbiAgLyoqXG4gICAqIFRoZSBob29rIGV4cGVjdHMgdG8gaXRlcmF0ZSB0aHJvdWdoIGFuIGFycmF5IG9mIGRhdGEsIHNvIGJ5IGRlZmF1bHQsIGl0IGFzc3VtZXMgdGhlIEpTT04gaXQgcmVjZWl2ZXMgaXRzZWxmIHJlcHJlc2VudHMgYW4gYXJyYXkuIEhvd2V2ZXIsIHNvbWV0aW1lcyB0aGUgYXJyYXkgb2YgZGF0YSBpcyB3cmFwcGVkIGluIGFuIG9iamVjdCxcbiAgICogaS5lLiBgeyBcInN1Y2Nlc3NcIjogdHJ1ZSwgXCJkYXRhXCI6IFvigKZdIH1gLCBvciBldmVuIGB7IFwic3VjY2Vzc1wiOiB0cnVlLCBcInJlc3VsdHNcIjogeyBcImRhdGFcIjogW+KApl0gfSB9YC4gSW4gdGhvc2UgY2FzZXMsIHlvdSBjYW4gdXNlIGBkYXRhUGF0aGAgdG8gc3BlY2lmeSB3aGVyZSB0aGUgZGF0YSBhcnJheSBjYW4gYmUgZm91bmQuXG4gICAqXG4gICAqIEByZW1hcmsgSWYgeW91ciBKU09OIG9iamVjdCBoYXMgbXVsdGlwbGUgYXJyYXlzIHRoYXQgeW91IHdhbnQgdG8gc3RyZWFtIGRhdGEgZnJvbSwgeW91IGNhbiBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIHRvIHN0cmVhbSB0aHJvdWdoIGFsbCBvZiB0aGVtLlxuICAgKlxuICAgKiBAZXhhbXBsZSBGb3IgYHsgXCJzdWNjZXNzXCI6IHRydWUsIFwiZGF0YVwiOiBb4oCmXSB9YCwgZGF0YVBhdGggd291bGQgYmUgYGRhdGFgXG4gICAqIEBleGFtcGxlIEZvciBgeyBcInN1Y2Nlc3NcIjogdHJ1ZSwgXCJyZXN1bHRzXCI6IHsgXCJkYXRhXCI6IFvigKZdIH0gfWAsIGRhdGFQYXRoIHdvdWxkIGJlIGByZXN1bHRzLmRhdGFgXG4gICAqIEBleGFtcGxlIEZvciBgeyBcInN1Y2Nlc3NcIjogdHJ1ZSwgXCJyZXN1bHRzXCI6IHsgXCJmaXJzdF9saXN0XCI6IFvigKZdLCBcInNlY29uZF9saXN0XCI6IFvigKZdLCBcInRoaXJkX2xpc3RcIjogW+KApl0gfSB9YCwgZGF0YVBhdGggd291bGQgYmUgYC9ecmVzdWx0c1xcLihmaXJzdF9saXN0fHNlY29uZF9saXN0fHRoaXJkX2xpc3QpJFxuL2AuXG4gICAqL1xuICBkYXRhUGF0aD86IHN0cmluZyB8IFJlZ0V4cDtcbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdG8gZGVjaWRlIHdoZXRoZXIgYSBwYXJ0aWN1bGFyIGl0ZW0gc2hvdWxkIGJlIGtlcHQgb3Igbm90LlxuICAgKiBEZWZhdWx0cyB0byBgdW5kZWZpbmVkYCwga2VlcGluZyBhbnkgZW5jb3VudGVyZWQgaXRlbS5cbiAgICpcbiAgICogQHJlbWFyayBUaGUgaG9vayB3aWxsIHJldmFsaWRhdGUgZXZlcnkgdGltZSB0aGUgZmlsdGVyIGZ1bmN0aW9uIGNoYW5nZXMsIHNvIHlvdSBuZWVkIHRvIHVzZSBbdXNlQ2FsbGJhY2tdKGh0dHBzOi8vcmVhY3QuZGV2L3JlZmVyZW5jZS9yZWFjdC91c2VDYWxsYmFjaykgdG8gbWFrZSBzdXJlIGl0IG9ubHkgY2hhbmdlcyB3aGVuIGl0IG5lZWRzIHRvLlxuICAgKi9cbiAgZmlsdGVyPzogKGl0ZW06IEZsYXR0ZW48VD4pID0+IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBhcyBpdCBpcyBlbmNvdW50ZXJlZC4gVXNlZnVsIGZvciBhIGNvdXBsZSBvZiB0aGluZ3M6XG4gICAqIDEuIGVuc3VyaW5nIHRoYXQgYWxsIGl0ZW1zIGhhdmUgdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMsIGFuZCwgYXMgb24gb3B0aW1pemF0aW9uLCBmb3IgZ2V0dGluZyByaWQgb2YgdGhlIHByb3BlcnRpZXMgdGhhdCB5b3UgZG9uJ3QgY2FyZSBhYm91dC5cbiAgICogMi4gd2hlbiB0b3AtbGV2ZWwgb2JqZWN0cyBhY3R1YWxseSByZXByZXNlbnQgbmVzdGVkIGRhdGEsIHdoaWNoIHNob3VsZCBiZSBmbGF0dGVuZWQuIEluIHRoaXMgY2FzZSwgYHRyYW5zZm9ybWAgY2FuIHJldHVybiBhbiBhcnJheSBvZiBpdGVtcywgYW5kIHRoZSBob29rIHdpbGwgc3RyZWFtIHRocm91Z2ggZWFjaCBvbmUgb2YgdGhvc2UgaXRlbXMsXG4gICAqIHBhc3NpbmcgdGhlbSB0byBgZmlsdGVyYCBldGMuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGEgcGFzc3Rocm91Z2ggZnVuY3Rpb24gaWYgbm90IHByb3ZpZGVkLlxuICAgKlxuICAgKiBAcmVtYXJrIFRoZSBob29rIHdpbGwgcmV2YWxpZGF0ZSBldmVyeSB0aW1lIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gY2hhbmdlcywgc28gaXQgaXMgaW1wb3J0YW50IHRvIHVzZSBbdXNlQ2FsbGJhY2tdKGh0dHBzOi8vcmVhY3QuZGV2L3JlZmVyZW5jZS9yZWFjdC91c2VDYWxsYmFjaykgdG8gZW5zdXJlIGl0IG9ubHkgY2hhbmdlcyB3aGVuIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgb3IgY29tcHV0YXRpb25zLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBcbiAgICogLy8gRm9yIGRhdGE6IGB7IFwiZGF0YVwiOiBbIHsgXCJ0eXBlXCI6IFwiZm9sZGVyXCIsIFwibmFtZVwiOiBcIml0ZW0gMVwiLCBcImNoaWxkcmVuXCI6IFsgeyBcInR5cGVcIjogXCJpdGVtXCIsIFwibmFtZVwiOiBcIml0ZW0gMlwiIH0sIHsgXCJ0eXBlXCI6IFwiaXRlbVwiLCBcIm5hbWVcIjogXCJpdGVtIDNcIiB9IF0gfSwgeyBcInR5cGVcIjogXCJmb2xkZXJcIiwgXCJuYW1lXCI6IFwiaXRlbSA0XCIsIGNoaWxkcmVuOiBbXSB9IF0gfWBcbiAgICpcbiAgICogdHlwZSBJdGVtID0ge1xuICAgKiAgdHlwZTogXCJpdGVtXCI7XG4gICAqICBuYW1lOiBzdHJpbmc7XG4gICAqIH07XG4gICAqXG4gICAqIHR5cGUgRm9sZGVyID0ge1xuICAgKiAgIHR5cGU6IFwiZm9sZGVyXCI7XG4gICAqICAgbmFtZTogc3RyaW5nO1xuICAgKiAgIGNoaWxkcmVuOiAoSXRlbSB8IEZvbGRlcilbXTtcbiAgICogfTtcbiAgICpcbiAgICogZnVuY3Rpb24gZmxhdHRlbihpdGVtOiBJdGVtIHwgRm9sZGVyKTogeyBuYW1lOiBzdHJpbmcgfVtdIHtcbiAgICogICBjb25zdCBmbGF0dGVuZWQ6IHsgbmFtZTogc3RyaW5nIH1bXSA9IFtdO1xuICAgKiAgIGlmIChpdGVtLnR5cGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICogICAgIGZsYXR0ZW5lZC5wdXNoKC4uLml0ZW0uY2hpbGRyZW4ubWFwKGZsYXR0ZW4pLmZsYXQoKSk7XG4gICAqICAgfVxuICAgKiAgIGlmIChpdGVtLnR5cGUgPT09IFwiaXRlbVwiKSB7XG4gICAqICAgICBmbGF0dGVuZWQucHVzaCh7IG5hbWU6IGl0ZW0ubmFtZSB9KTtcbiAgICogICB9XG4gICAqICAgcmV0dXJuIGZsYXR0ZW5lZDtcbiAgICogfVxuICAgKlxuICAgKiBjb25zdCB0cmFuc2Zvcm0gPSB1c2VDYWxsYmFjayhmbGF0dGVuLCBbXSk7XG4gICAqIGNvbnN0IGZpbHRlciA9IHVzZUNhbGxiYWNrKChpdGVtOiB7IG5hbWU6IHN0cmluZyB9KSA9PiB7XG4gICAqICAg4oCmXG4gICAqIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgdHJhbnNmb3JtPzogKGl0ZW06IGFueSkgPT4gVDtcbiAgLyoqXG4gICAqIFRoZSBhbW91bnQgb2YgaXRlbXMgdG8gcmV0dXJuIGZvciBlYWNoIHBhZ2UuXG4gICAqIERlZmF1bHRzIHRvIGAyMGAuXG4gICAqL1xuICBwYWdlU2l6ZT86IG51bWJlcjtcbn07XG5cbi8qKlxuICogVGFrZXMgYSBgaHR0cDovL2AsIGBodHRwczovL2Agb3IgYGZpbGU6Ly8vYCBVUkwgcG9pbnRpbmcgdG8gYSBKU09OIHJlc291cmNlLCBjYWNoZXMgaXQgdG8gdGhlIGNvbW1hbmQncyBzdXBwb3J0XG4gKiBmb2xkZXIsIGFuZCBzdHJlYW1zIHRocm91Z2ggaXRzIGNvbnRlbnQuIFVzZWZ1bCB3aGVuIGRlYWxpbmcgd2l0aCBsYXJnZSBKU09OIGFycmF5cyB3aGljaCB3b3VsZCBiZSB0b28gYmlnIHRvIGZpdFxuICogaW4gdGhlIGNvbW1hbmQncyBtZW1vcnkuXG4gKlxuICogQHJlbWFyayBUaGUgSlNPTiByZXNvdXJjZSBuZWVkcyB0byBjb25zaXN0IG9mIGFuIGFycmF5IG9mIG9iamVjdHNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBMaXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlU3RyZWFtSlNPTiB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIHR5cGUgRm9ybXVsYSA9IHsgbmFtZTogc3RyaW5nOyBkZXNjPzogc3RyaW5nIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFpbigpOiBSZWFjdC5KU1guRWxlbWVudCB7XG4gKiAgIGNvbnN0IHsgZGF0YSwgaXNMb2FkaW5nLCBwYWdpbmF0aW9uIH0gPSB1c2VTdHJlYW1KU09OPEZvcm11bGE+KFwiaHR0cHM6Ly9mb3JtdWxhZS5icmV3LnNoL2FwaS9mb3JtdWxhLmpzb25cIik7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfSBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufT5cbiAqICAgICAgIDxMaXN0LlNlY3Rpb24gdGl0bGU9XCJGb3JtdWxhZVwiPlxuICogICAgICAgICB7ZGF0YT8ubWFwKChkKSA9PiA8TGlzdC5JdGVtIGtleT17ZC5uYW1lfSB0aXRsZT17ZC5uYW1lfSBzdWJ0aXRsZT17ZC5kZXNjfSAvPil9XG4gKiAgICAgICA8L0xpc3QuU2VjdGlvbj5cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBMaXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlU3RyZWFtSlNPTiB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICogaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gXCJvc1wiO1xuICogaW1wb3J0IHsgam9pbiB9IGZyb20gXCJwYXRoXCI7XG4gKlxuICogdHlwZSBGb3JtdWxhID0geyBuYW1lOiBzdHJpbmc7IGRlc2M/OiBzdHJpbmcgfTtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNYWluKCk6IFJlYWN0LkpTWC5FbGVtZW50IHtcbiAqICAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIHBhZ2luYXRpb24gfSA9IHVzZVN0cmVhbUpTT048Rm9ybXVsYT4oYGZpbGU6Ly8vJHtqb2luKGhvbWVkaXIoKSwgXCJEb3dubG9hZHNcIiwgXCJmb3JtdWxhZS5qc29uXCIpfWApO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8TGlzdCBpc0xvYWRpbmc9e2lzTG9hZGluZ30gcGFnaW5hdGlvbj17cGFnaW5hdGlvbn0+XG4gKiAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiRm9ybXVsYWVcIj5cbiAqICAgICAgICAge2RhdGE/Lm1hcCgoZCkgPT4gPExpc3QuSXRlbSBrZXk9e2QubmFtZX0gdGl0bGU9e2QubmFtZX0gc3VidGl0bGU9e2QuZGVzY30gLz4pfVxuICogICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdHJlYW1KU09OPFQsIFUgPSB1bmtub3duPih1cmw6IFJlcXVlc3RJbmZvKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCwgVT47XG5cbi8qKlxuICogVGFrZXMgYSBgaHR0cDovL2AsIGBodHRwczovL2Agb3IgYGZpbGU6Ly8vYCBVUkwgcG9pbnRpbmcgdG8gYSBKU09OIHJlc291cmNlLCBjYWNoZXMgaXQgdG8gdGhlIGNvbW1hbmQncyBzdXBwb3J0XG4gKiBmb2xkZXIsIGFuZCBzdHJlYW1zIHRocm91Z2ggaXRzIGNvbnRlbnQuIFVzZWZ1bCB3aGVuIGRlYWxpbmcgd2l0aCBsYXJnZSBKU09OIGFycmF5cyB3aGljaCB3b3VsZCBiZSB0b28gYmlnIHRvIGZpdFxuICogaW4gdGhlIGNvbW1hbmQncyBtZW1vcnkuXG4gKlxuICogQHJlbWFyayBUaGUgSlNPTiByZXNvdXJjZSBuZWVkcyB0byBjb25zaXN0IG9mIGFuIGFycmF5IG9mIG9iamVjdHNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBMaXN0LCBlbnZpcm9ubWVudCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZVN0cmVhbUpTT04gfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqIGltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbiAqIGltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICpcbiAqIHR5cGUgRm9ybXVsYSA9IHsgbmFtZTogc3RyaW5nOyBkZXNjPzogc3RyaW5nIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFpbigpOiBSZWFjdC5KU1guRWxlbWVudCB7XG4gKiAgIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICpcbiAqICAgY29uc3QgZm9ybXVsYUZpbHRlciA9IHVzZUNhbGxiYWNrKFxuICogICAgIChpdGVtOiBGb3JtdWxhKSA9PiB7XG4gKiAgICAgICBpZiAoIXNlYXJjaFRleHQpIHJldHVybiB0cnVlO1xuICogICAgICAgcmV0dXJuIGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuICogICAgIH0sXG4gKiAgICAgW3NlYXJjaFRleHRdLFxuICogICApO1xuICpcbiAqICAgY29uc3QgZm9ybXVsYVRyYW5zZm9ybSA9IHVzZUNhbGxiYWNrKChpdGVtOiBhbnkpOiBGb3JtdWxhID0+IHtcbiAqICAgICByZXR1cm4geyBuYW1lOiBpdGVtLm5hbWUsIGRlc2M6IGl0ZW0uZGVzYyB9O1xuICogICB9LCBbXSk7XG4gKlxuICogICBjb25zdCB7IGRhdGEsIGlzTG9hZGluZywgcGFnaW5hdGlvbiB9ID0gdXNlU3RyZWFtSlNPTihcImh0dHBzOi8vZm9ybXVsYWUuYnJldy5zaC9hcGkvZm9ybXVsYS5qc29uXCIsIHtcbiAqICAgICBpbml0aWFsRGF0YTogW10gYXMgRm9ybXVsYVtdLFxuICogICAgIHBhZ2VTaXplOiAyMCxcbiAqICAgICBmaWx0ZXI6IGZvcm11bGFGaWx0ZXIsXG4gKiAgICAgdHJhbnNmb3JtOiBmb3JtdWxhVHJhbnNmb3JtLFxuICogICB9KTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IHBhZ2luYXRpb249e3BhZ2luYXRpb259IG9uU2VhcmNoVGV4dENoYW5nZT17c2V0U2VhcmNoVGV4dH0+XG4gKiAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiRm9ybXVsYWVcIj5cbiAqICAgICAgICAge2RhdGEubWFwKChkKSA9PiAoXG4gKiAgICAgICAgICAgPExpc3QuSXRlbSBrZXk9e2QubmFtZX0gdGl0bGU9e2QubmFtZX0gc3VidGl0bGU9e2QuZGVzY30gLz5cbiAqICAgICAgICAgKSl9XG4gKiAgICAgICA8L0xpc3QuU2VjdGlvbj5cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGAgc3VwcG9ydCBmb2xkZXIsIGFuZCBzdHJlYW1zIHRocm91Z2ggaXRzIGNvbnRlbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgTGlzdCwgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyB1c2VTdHJlYW1KU09OIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKiBpbXBvcnQgeyBqb2luIH0gZnJvbSBcInBhdGhcIjtcbiAqIGltcG9ydCB7IGhvbWVkaXIgfSBmcm9tIFwib3NcIjtcbiAqIGltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICpcbiAqIHR5cGUgRm9ybXVsYSA9IHsgbmFtZTogc3RyaW5nOyBkZXNjPzogc3RyaW5nIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFpbigpOiBSZWFjdC5KU1guRWxlbWVudCB7XG4gKiAgIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICpcbiAqICAgY29uc3QgZm9ybXVsYUZpbHRlciA9IHVzZUNhbGxiYWNrKFxuICogICAgIChpdGVtOiBGb3JtdWxhKSA9PiB7XG4gKiAgICAgICBpZiAoIXNlYXJjaFRleHQpIHJldHVybiB0cnVlO1xuICogICAgICAgcmV0dXJuIGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuICogICAgIH0sXG4gKiAgICAgW3NlYXJjaFRleHRdLFxuICogICApO1xuICpcbiAqICAgY29uc3QgZm9ybXVsYVRyYW5zZm9ybSA9IHVzZUNhbGxiYWNrKChpdGVtOiBhbnkpOiBGb3JtdWxhID0+IHtcbiAqICAgICByZXR1cm4geyBuYW1lOiBpdGVtLm5hbWUsIGRlc2M6IGl0ZW0uZGVzYyB9O1xuICogICB9LCBbXSk7XG4gKlxuICogICBjb25zdCB7IGRhdGEsIGlzTG9hZGluZywgcGFnaW5hdGlvbiB9ID0gdXNlU3RyZWFtSlNPTihgZmlsZTovLy8ke2pvaW4oaG9tZWRpcigpLCBcIkRvd25sb2Fkc1wiLCBcImZvcm11bGFlLmpzb25cIil9YCwge1xuICogICAgIGluaXRpYWxEYXRhOiBbXSBhcyBGb3JtdWxhW10sXG4gKiAgICAgcGFnZVNpemU6IDIwLFxuICogICAgIGZpbHRlcjogZm9ybXVsYUZpbHRlcixcbiAqICAgICB0cmFuc2Zvcm06IGZvcm11bGFUcmFuc2Zvcm0sXG4gKiAgIH0pO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8TGlzdCBpc0xvYWRpbmc9e2lzTG9hZGluZ30gcGFnaW5hdGlvbj17cGFnaW5hdGlvbn0gb25TZWFyY2hUZXh0Q2hhbmdlPXtzZXRTZWFyY2hUZXh0fT5cbiAqICAgICAgIDxMaXN0LlNlY3Rpb24gdGl0bGU9XCJGb3JtdWxhZVwiPlxuICogICAgICAgICB7ZGF0YS5tYXAoKGQpID0+IChcbiAqICAgICAgICAgICA8TGlzdC5JdGVtIGtleT17ZC5uYW1lfSB0aXRsZT17ZC5uYW1lfSBzdWJ0aXRsZT17ZC5kZXNjfSAvPlxuICogICAgICAgICApKX1cbiAqICAgICAgIDwvTGlzdC5TZWN0aW9uPlxuICogICAgIDwvTGlzdD5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RyZWFtSlNPTjxULCBVIGV4dGVuZHMgYW55W10gPSBhbnlbXT4oXG4gIHVybDogUmVxdWVzdEluZm8sXG4gIG9wdGlvbnM6IE9wdGlvbnM8VD4gJiBSZXF1ZXN0SW5pdCAmIE9taXQ8Q2FjaGVkUHJvbWlzZU9wdGlvbnM8RnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBVPiwgXCJhYm9ydGFibGVcIj4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXSwgVT47XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdHJlYW1KU09OPFQsIFUgZXh0ZW5kcyBhbnlbXSA9IGFueVtdPihcbiAgdXJsOiBSZXF1ZXN0SW5mbyxcbiAgb3B0aW9ucz86IE9wdGlvbnM8VD4gJiBSZXF1ZXN0SW5pdCAmIE9taXQ8Q2FjaGVkUHJvbWlzZU9wdGlvbnM8RnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBVPiwgXCJhYm9ydGFibGVcIj4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXSwgVT4ge1xuICBjb25zdCB7XG4gICAgaW5pdGlhbERhdGEsXG4gICAgZXhlY3V0ZSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIG9uRXJyb3IsXG4gICAgb25EYXRhLFxuICAgIG9uV2lsbEV4ZWN1dGUsXG4gICAgZmFpbHVyZVRvYXN0T3B0aW9ucyxcbiAgICBkYXRhUGF0aCxcbiAgICBmaWx0ZXIsXG4gICAgdHJhbnNmb3JtLFxuICAgIHBhZ2VTaXplID0gMjAsXG4gICAgLi4uZmV0Y2hPcHRpb25zXG4gIH0gPSBvcHRpb25zID8/IHt9O1xuICBjb25zdCBwcmV2aW91c1VybCA9IHVzZVJlZjxSZXF1ZXN0SW5mbz4obnVsbCk7XG4gIGNvbnN0IHByZXZpb3VzRGVzdGluYXRpb24gPSB1c2VSZWY8c3RyaW5nPihudWxsKTtcblxuICBjb25zdCB1c2VDYWNoZWRQcm9taXNlT3B0aW9uczogQ2FjaGVkUHJvbWlzZU9wdGlvbnM8RnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBVPiA9IHtcbiAgICBpbml0aWFsRGF0YSxcbiAgICBleGVjdXRlLFxuICAgIGtlZXBQcmV2aW91c0RhdGEsXG4gICAgb25FcnJvcixcbiAgICBvbkRhdGEsXG4gICAgb25XaWxsRXhlY3V0ZSxcbiAgICBmYWlsdXJlVG9hc3RPcHRpb25zLFxuICB9O1xuXG4gIGNvbnN0IGdlbmVyYXRvclJlZiA9IHVzZVJlZjxBc3luY0dlbmVyYXRvcjxUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXT4gfCBudWxsPihudWxsKTtcbiAgY29uc3QgY29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgaGFzTW9yZVJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgcmV0dXJuIHVzZUNhY2hlZFByb21pc2UoXG4gICAgKFxuICAgICAgdXJsOiBSZXF1ZXN0SW5mbyxcbiAgICAgIHBhZ2VTaXplOiBudW1iZXIsXG4gICAgICBmZXRjaE9wdGlvbnM6IFJlcXVlc3RJbml0IHwgdW5kZWZpbmVkLFxuICAgICAgZGF0YVBhdGg6IHN0cmluZyB8IFJlZ0V4cCB8IHVuZGVmaW5lZCxcbiAgICAgIGZpbHRlcjogKChpdGVtOiBGbGF0dGVuPFQ+KSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZCxcbiAgICAgIHRyYW5zZm9ybTogKChpdGVtOiB1bmtub3duKSA9PiBUKSB8IHVuZGVmaW5lZCxcbiAgICApID0+XG4gICAgICBhc3luYyAoeyBwYWdlIH0pID0+IHtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBoYXNoKHVybCkgKyBcIi5qc29uXCI7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGVudmlyb25tZW50LnN1cHBvcnRQYXRoO1xuICAgICAgICBpZiAocGFnZSA9PT0gMCkge1xuICAgICAgICAgIGNvbnRyb2xsZXJSZWYuY3VycmVudD8uYWJvcnQoKTtcbiAgICAgICAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBqb2luKGZvbGRlciwgZmlsZU5hbWUpO1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEZvcmNlIHVwZGF0ZSB0aGUgY2FjaGUgd2hlbiB0aGUgVVJMIGNoYW5nZXMgYnV0IHRoZSBjYWNoZSBkZXN0aW5hdGlvbiBkb2VzIG5vdC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25zdCBmb3JjZUNhY2hlVXBkYXRlID0gQm9vbGVhbihcbiAgICAgICAgICAgIHByZXZpb3VzVXJsLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICAgcHJldmlvdXNVcmwuY3VycmVudCAhPT0gdXJsICYmXG4gICAgICAgICAgICAgIHByZXZpb3VzRGVzdGluYXRpb24uY3VycmVudCAmJlxuICAgICAgICAgICAgICBwcmV2aW91c0Rlc3RpbmF0aW9uLmN1cnJlbnQgPT09IGRlc3RpbmF0aW9uLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcHJldmlvdXNVcmwuY3VycmVudCA9IHVybDtcbiAgICAgICAgICBwcmV2aW91c0Rlc3RpbmF0aW9uLmN1cnJlbnQgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgICBhd2FpdCBjYWNoZVVSTElmTmVjZXNzYXJ5KHVybCwgZm9sZGVyLCBmaWxlTmFtZSwgZm9yY2VDYWNoZVVwZGF0ZSwge1xuICAgICAgICAgICAgLi4uZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyUmVmLmN1cnJlbnQ/LnNpZ25hbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnZW5lcmF0b3JSZWYuY3VycmVudCA9IHN0cmVhbUpzb25GaWxlKFxuICAgICAgICAgICAgZGVzdGluYXRpb24sXG4gICAgICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJSZWYuY3VycmVudD8uc2lnbmFsLFxuICAgICAgICAgICAgZGF0YVBhdGgsXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICB0cmFuc2Zvcm0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdlbmVyYXRvclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHsgaGFzTW9yZTogaGFzTW9yZVJlZi5jdXJyZW50LCBkYXRhOiBbXSBhcyBUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdmFsdWU6IG5ld0RhdGEsIGRvbmUgfSA9IGF3YWl0IGdlbmVyYXRvclJlZi5jdXJyZW50Lm5leHQoKTtcbiAgICAgICAgaGFzTW9yZVJlZi5jdXJyZW50ID0gIWRvbmU7XG4gICAgICAgIHJldHVybiB7IGhhc01vcmU6IGhhc01vcmVSZWYuY3VycmVudCwgZGF0YTogKG5ld0RhdGEgPz8gW10pIGFzIFQgZXh0ZW5kcyB1bmtub3duW10gPyBUIDogVFtdIH07XG4gICAgICB9LFxuICAgIFt1cmwsIHBhZ2VTaXplLCBmZXRjaE9wdGlvbnMsIGRhdGFQYXRoLCBmaWx0ZXIsIHRyYW5zZm9ybV0sXG4gICAgdXNlQ2FjaGVkUHJvbWlzZU9wdGlvbnMsXG4gICk7XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG5pbXBvcnQgeyBSZWFkYWJsZSwgV3JpdGFibGUsIER1cGxleCB9IGZyb20gXCJub2RlOnN0cmVhbVwiO1xuXG5leHBvcnQgY29uc3Qgbm9uZSA9IC8qICNfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwib2JqZWN0LXN0cmVhbS5ub25lXCIpO1xuY29uc3Qgc3RvcCA9IC8qICNfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwib2JqZWN0LXN0cmVhbS5zdG9wXCIpO1xuXG5jb25zdCBmaW5hbFN5bWJvbCA9IC8qICNfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwib2JqZWN0LXN0cmVhbS5maW5hbFwiKTtcbmNvbnN0IG1hbnlTeW1ib2wgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcIm9iamVjdC1zdHJlYW0ubWFueVwiKTtcbmNvbnN0IGZsdXNoU3ltYm9sID0gLyogI19fUFVSRV9fICovIFN5bWJvbC5mb3IoXCJvYmplY3Qtc3RyZWFtLmZsdXNoXCIpO1xuY29uc3QgZkxpc3RTeW1ib2wgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcIm9iamVjdC1zdHJlYW0uZkxpc3RcIik7XG5cbmNvbnN0IGZpbmFsVmFsdWUgPSAodmFsdWU6IGFueSkgPT4gKHsgW2ZpbmFsU3ltYm9sXTogMSwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgbWFueSA9ICh2YWx1ZXM6IGFueSkgPT4gKHsgW21hbnlTeW1ib2xdOiAxLCB2YWx1ZXMgfSk7XG5cbmNvbnN0IGlzRmluYWxWYWx1ZSA9IChvOiBhbnkpID0+IG8gJiYgb1tmaW5hbFN5bWJvbF0gPT09IDE7XG5jb25zdCBpc01hbnkgPSAobzogYW55KSA9PiBvICYmIG9bbWFueVN5bWJvbF0gPT09IDE7XG5jb25zdCBpc0ZsdXNoYWJsZSA9IChvOiBhbnkpID0+IG8gJiYgb1tmbHVzaFN5bWJvbF0gPT09IDE7XG5jb25zdCBpc0Z1bmN0aW9uTGlzdCA9IChvOiBhbnkpID0+IG8gJiYgb1tmTGlzdFN5bWJvbF0gPT09IDE7XG5cbmNvbnN0IGdldEZpbmFsVmFsdWUgPSAobzogYW55KSA9PiBvLnZhbHVlO1xuY29uc3QgZ2V0TWFueVZhbHVlcyA9IChvOiBhbnkpID0+IG8udmFsdWVzO1xuY29uc3QgZ2V0RnVuY3Rpb25MaXN0ID0gKG86IGFueSkgPT4gby5mTGlzdDtcblxuZXhwb3J0IGNvbnN0IGNvbWJpbmVNYW55TXV0ID0gKGE6IGFueSwgYjogYW55KSA9PiB7XG4gIGNvbnN0IHZhbHVlcyA9IGEgPT09IG5vbmUgPyBbXSA6IGE/LlttYW55U3ltYm9sXSA9PT0gMSA/IGEudmFsdWVzIDogW2FdO1xuICBpZiAoYiA9PT0gbm9uZSkge1xuICAgIC8vIGRvIG5vdGhpbmdcbiAgfSBlbHNlIGlmIChiPy5bbWFueVN5bWJvbF0gPT09IDEpIHtcbiAgICB2YWx1ZXMucHVzaCguLi5iLnZhbHVlcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWVzLnB1c2goYik7XG4gIH1cbiAgcmV0dXJuIG1hbnkodmFsdWVzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmbHVzaGFibGUgPSAod3JpdGU6ICh2YWx1ZTogYW55KSA9PiBhbnksIGZpbmFsID0gbnVsbCkgPT4ge1xuICBjb25zdCBmbiA9IGZpbmFsID8gKHZhbHVlOiBhbnkpID0+ICh2YWx1ZSA9PT0gbm9uZSA/IGZpbmFsVmFsdWUodW5kZWZpbmVkKSA6IHdyaXRlKHZhbHVlKSkgOiB3cml0ZTtcbiAgLy8gQHRzLWlnbm9yZVxuICBmbltmbHVzaFN5bWJvbF0gPSAxO1xuICByZXR1cm4gZm47XG59O1xuXG5jb25zdCBzZXRGdW5jdGlvbkxpc3QgPSAobzogYW55LCBmbnM6IGFueSkgPT4ge1xuICBvLmZMaXN0ID0gZm5zO1xuICBvW2ZMaXN0U3ltYm9sXSA9IDE7XG4gIHJldHVybiBvO1xufTtcblxuLy8gaXMqTm9kZVN0cmVhbSBmdW5jdGlvbnMgdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9tYXN0ZXIvbGliL2ludGVybmFsL3N0cmVhbXMvdXRpbHMuanNcbmNvbnN0IGlzUmVhZGFibGVOb2RlU3RyZWFtID0gKG9iajogYW55KSA9PlxuICBvYmogJiZcbiAgdHlwZW9mIG9iai5waXBlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIG9iai5vbiA9PT0gXCJmdW5jdGlvblwiICYmXG4gICghb2JqLl93cml0YWJsZVN0YXRlIHx8ICh0eXBlb2Ygb2JqLl9yZWFkYWJsZVN0YXRlID09PSBcIm9iamVjdFwiID8gb2JqLl9yZWFkYWJsZVN0YXRlLnJlYWRhYmxlIDogbnVsbCkgIT09IGZhbHNlKSAmJiAvLyBEdXBsZXhcbiAgKCFvYmouX3dyaXRhYmxlU3RhdGUgfHwgb2JqLl9yZWFkYWJsZVN0YXRlKTsgLy8gV3JpdGFibGUgaGFzIC5waXBlLlxuXG5jb25zdCBpc1dyaXRhYmxlTm9kZVN0cmVhbSA9IChvYmo6IGFueSkgPT5cbiAgb2JqICYmXG4gIHR5cGVvZiBvYmoud3JpdGUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICB0eXBlb2Ygb2JqLm9uID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgKCFvYmouX3JlYWRhYmxlU3RhdGUgfHwgKHR5cGVvZiBvYmouX3dyaXRhYmxlU3RhdGUgPT09IFwib2JqZWN0XCIgPyBvYmouX3dyaXRhYmxlU3RhdGUud3JpdGFibGUgOiBudWxsKSAhPT0gZmFsc2UpOyAvLyBEdXBsZXhcblxuY29uc3QgaXNEdXBsZXhOb2RlU3RyZWFtID0gKG9iajogYW55KSA9PlxuICBvYmogJiZcbiAgdHlwZW9mIG9iai5waXBlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgb2JqLl9yZWFkYWJsZVN0YXRlICYmXG4gIHR5cGVvZiBvYmoub24gPT09IFwiZnVuY3Rpb25cIiAmJlxuICB0eXBlb2Ygb2JqLndyaXRlID09PSBcImZ1bmN0aW9uXCI7XG5cbmNvbnN0IGlzUmVhZGFibGVXZWJTdHJlYW0gPSAob2JqOiBhbnkpID0+IG9iaiAmJiBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtICYmIG9iaiBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5cbmNvbnN0IGlzV3JpdGFibGVXZWJTdHJlYW0gPSAob2JqOiBhbnkpID0+IG9iaiAmJiBnbG9iYWxUaGlzLldyaXRhYmxlU3RyZWFtICYmIG9iaiBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuV3JpdGFibGVTdHJlYW07XG5cbmNvbnN0IGlzRHVwbGV4V2ViU3RyZWFtID0gKG9iajogYW55KSA9PlxuICBvYmogJiZcbiAgZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSAmJlxuICBvYmoucmVhZGFibGUgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtICYmXG4gIGdsb2JhbFRoaXMuV3JpdGFibGVTdHJlYW0gJiZcbiAgb2JqLndyaXRhYmxlIGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5Xcml0YWJsZVN0cmVhbTtcblxuY29uc3QgZ3JvdXBGdW5jdGlvbnMgPSAob3V0cHV0OiBhbnksIGZuOiBhbnksIGluZGV4OiBhbnksIGZuczogYW55KSA9PiB7XG4gIGlmIChcbiAgICBpc0R1cGxleE5vZGVTdHJlYW0oZm4pIHx8XG4gICAgKCFpbmRleCAmJiBpc1JlYWRhYmxlTm9kZVN0cmVhbShmbikpIHx8XG4gICAgKGluZGV4ID09PSBmbnMubGVuZ3RoIC0gMSAmJiBpc1dyaXRhYmxlTm9kZVN0cmVhbShmbikpXG4gICkge1xuICAgIG91dHB1dC5wdXNoKGZuKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIGlmIChpc0R1cGxleFdlYlN0cmVhbShmbikpIHtcbiAgICBvdXRwdXQucHVzaChEdXBsZXguZnJvbVdlYihmbiwgeyBvYmplY3RNb2RlOiB0cnVlIH0pKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIGlmICghaW5kZXggJiYgaXNSZWFkYWJsZVdlYlN0cmVhbShmbikpIHtcbiAgICBvdXRwdXQucHVzaChSZWFkYWJsZS5mcm9tV2ViKGZuLCB7IG9iamVjdE1vZGU6IHRydWUgfSkpO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbiAgaWYgKGluZGV4ID09PSBmbnMubGVuZ3RoIC0gMSAmJiBpc1dyaXRhYmxlV2ViU3RyZWFtKGZuKSkge1xuICAgIG91dHB1dC5wdXNoKFdyaXRhYmxlLmZyb21XZWIoZm4sIHsgb2JqZWN0TW9kZTogdHJ1ZSB9KSk7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBpZiAodHlwZW9mIGZuICE9IFwiZnVuY3Rpb25cIikgdGhyb3cgVHlwZUVycm9yKFwiSXRlbSAjXCIgKyBpbmRleCArIFwiIGlzIG5vdCBhIHByb3BlciBzdHJlYW0sIG5vciBhIGZ1bmN0aW9uLlwiKTtcbiAgaWYgKCFvdXRwdXQubGVuZ3RoKSBvdXRwdXQucHVzaChbXSk7XG4gIGNvbnN0IGxhc3QgPSBvdXRwdXRbb3V0cHV0Lmxlbmd0aCAtIDFdO1xuICBpZiAoQXJyYXkuaXNBcnJheShsYXN0KSkge1xuICAgIGxhc3QucHVzaChmbik7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0LnB1c2goW2ZuXSk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbmNsYXNzIFN0b3AgZXh0ZW5kcyBFcnJvciB7fVxuXG5leHBvcnQgY29uc3QgYXNTdHJlYW0gPSAoZm46IGFueSkgPT4ge1xuICBpZiAodHlwZW9mIGZuICE9IFwiZnVuY3Rpb25cIikgdGhyb3cgVHlwZUVycm9yKFwiT25seSBhIGZ1bmN0aW9uIGlzIGFjY2VwdGVkIGFzIHRoZSBmaXJzdCBhcmd1bWVudFwiKTtcblxuICAvLyBwdW1wIHZhcmlhYmxlc1xuICBsZXQgcGF1c2VkID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIGxldCByZXNvbHZlUGF1c2VkOiAoKHZhbHVlOiB2b2lkIHwgUHJvbWlzZUxpa2U8dm9pZD4pID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIGNvbnN0IHF1ZXVlOiBhbnlbXSA9IFtdO1xuXG4gIC8vIHBhdXNlL3Jlc3VtZVxuICBjb25zdCByZXN1bWU6IGFueSA9ICgpID0+IHtcbiAgICBpZiAoIXJlc29sdmVQYXVzZWQpIHJldHVybjtcbiAgICByZXNvbHZlUGF1c2VkKCk7XG4gICAgcmVzb2x2ZVBhdXNlZCA9IG51bGw7XG4gICAgcGF1c2VkID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG4gIGNvbnN0IHBhdXNlOiBhbnkgPSAoKSA9PiB7XG4gICAgaWYgKHJlc29sdmVQYXVzZWQpIHJldHVybjtcbiAgICBwYXVzZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gKHJlc29sdmVQYXVzZWQgPSByZXNvbHZlKSk7XG4gIH07XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICBsZXQgc3RyZWFtOiBEdXBsZXg7IC8vIHdpbGwgYmUgYXNzaWduZWQgbGF0ZXJcblxuICAvLyBkYXRhIHByb2Nlc3NpbmdcbiAgY29uc3QgcHVzaFJlc3VsdHM6IGFueSA9ICh2YWx1ZXM6IGFueSkgPT4ge1xuICAgIGlmICh2YWx1ZXMgJiYgdHlwZW9mIHZhbHVlcy5uZXh0ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgLy8gZ2VuZXJhdG9yXG4gICAgICBxdWV1ZS5wdXNoKHZhbHVlcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFycmF5XG4gICAgcXVldWUucHVzaCh2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSgpKTtcbiAgfTtcbiAgY29uc3QgcHVtcDogYW55ID0gYXN5bmMgKCkgPT4ge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IHBhdXNlZDtcbiAgICAgIGNvbnN0IGdlbiA9IHF1ZXVlW3F1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgbGV0IHJlc3VsdCA9IGdlbi5uZXh0KCk7XG4gICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgIHF1ZXVlLnBvcCgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHNhbml0aXplKHZhbHVlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNhbml0aXplOiBhbnkgPSBhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSBub25lKSByZXR1cm47XG4gICAgaWYgKHZhbHVlID09PSBzdG9wKSB0aHJvdyBuZXcgU3RvcCgpO1xuXG4gICAgaWYgKGlzTWFueSh2YWx1ZSkpIHtcbiAgICAgIHB1c2hSZXN1bHRzKGdldE1hbnlWYWx1ZXModmFsdWUpKTtcbiAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgfVxuXG4gICAgaWYgKGlzRmluYWxWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgIC8vIGEgZmluYWwgdmFsdWUgaXMgbm90IHN1cHBvcnRlZCwgaXQgaXMgdHJlYXRlZCBhcyBhIHJlZ3VsYXIgdmFsdWVcbiAgICAgIHZhbHVlID0gZ2V0RmluYWxWYWx1ZSh2YWx1ZSk7XG4gICAgICByZXR1cm4gcHJvY2Vzc1ZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0cmVhbS5wdXNoKHZhbHVlKSkge1xuICAgICAgcGF1c2UoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NDaHVuazogYW55ID0gYXN5bmMgKGNodW5rOiBhbnksIGVuY29kaW5nOiBhbnkpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsdWUgPSBmbihjaHVuaywgZW5jb2RpbmcpO1xuICAgICAgYXdhaXQgcHJvY2Vzc1ZhbHVlKHZhbHVlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU3RvcCkge1xuICAgICAgICBzdHJlYW0ucHVzaChudWxsKTtcbiAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzVmFsdWU6IGFueSA9IGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgLy8gdGhlbmFibGVcbiAgICAgIHJldHVybiB2YWx1ZS50aGVuKCh2YWx1ZTogYW55KSA9PiBwcm9jZXNzVmFsdWUodmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5uZXh0ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgLy8gZ2VuZXJhdG9yXG4gICAgICBwdXNoUmVzdWx0cyh2YWx1ZSk7XG4gICAgICByZXR1cm4gcHVtcCgpO1xuICAgIH1cbiAgICByZXR1cm4gc2FuaXRpemUodmFsdWUpO1xuICB9O1xuXG4gIHN0cmVhbSA9IG5ldyBEdXBsZXgoXG4gICAgT2JqZWN0LmFzc2lnbih7IHdyaXRhYmxlT2JqZWN0TW9kZTogdHJ1ZSwgcmVhZGFibGVPYmplY3RNb2RlOiB0cnVlIH0sIHVuZGVmaW5lZCwge1xuICAgICAgd3JpdGUoY2h1bms6IGFueSwgZW5jb2Rpbmc6IGFueSwgY2FsbGJhY2s6IGFueSkge1xuICAgICAgICBwcm9jZXNzQ2h1bmsoY2h1bmssIGVuY29kaW5nKS50aGVuKFxuICAgICAgICAgICgpID0+IGNhbGxiYWNrKG51bGwpLFxuICAgICAgICAgIChlcnJvcjogYW55KSA9PiBjYWxsYmFjayhlcnJvciksXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgZmluYWwoY2FsbGJhY2s6IGFueSkge1xuICAgICAgICBpZiAoIWlzRmx1c2hhYmxlKGZuKSkge1xuICAgICAgICAgIHN0cmVhbS5wdXNoKG51bGwpO1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzQ2h1bmsobm9uZSwgbnVsbCkudGhlbihcbiAgICAgICAgICAoKSA9PiAoc3RyZWFtLnB1c2gobnVsbCksIGNhbGxiYWNrKG51bGwpKSxcbiAgICAgICAgICAoZXJyb3I6IGFueSkgPT4gY2FsbGJhY2soZXJyb3IpLFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIHJlYWQoKSB7XG4gICAgICAgIHJlc3VtZSgpO1xuICAgICAgfSxcbiAgICB9KSxcbiAgKTtcblxuICByZXR1cm4gc3RyZWFtO1xufTtcblxuY29uc3QgcHJvZHVjZVN0cmVhbXMgPSAoaXRlbTogYW55KSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7XG4gICAgaWYgKCFpdGVtLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKGl0ZW0ubGVuZ3RoID09IDEpIHJldHVybiBpdGVtWzBdICYmIGFzU3RyZWFtKGl0ZW1bMF0pO1xuICAgIHJldHVybiBhc1N0cmVhbShnZW4oLi4uaXRlbSkpO1xuICB9XG4gIHJldHVybiBpdGVtO1xufTtcblxuY29uc3QgbmV4dDogYW55ID0gYXN5bmMgZnVuY3Rpb24qICh2YWx1ZTogYW55LCBmbnM6IGFueSwgaW5kZXg6IGFueSkge1xuICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPD0gZm5zLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgLy8gdGhlbmFibGVcbiAgICAgIHZhbHVlID0gYXdhaXQgdmFsdWU7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gbm9uZSkgYnJlYWs7XG4gICAgaWYgKHZhbHVlID09PSBzdG9wKSB0aHJvdyBuZXcgU3RvcCgpO1xuICAgIGlmIChpc0ZpbmFsVmFsdWUodmFsdWUpKSB7XG4gICAgICB5aWVsZCBnZXRGaW5hbFZhbHVlKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaXNNYW55KHZhbHVlKSkge1xuICAgICAgY29uc3QgdmFsdWVzID0gZ2V0TWFueVZhbHVlcyh2YWx1ZSk7XG4gICAgICBpZiAoaSA9PSBmbnMubGVuZ3RoKSB7XG4gICAgICAgIHlpZWxkKiB2YWx1ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHZhbHVlcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgIHlpZWxkKiBuZXh0KHZhbHVlc1tqXSwgZm5zLCBpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUubmV4dCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIGdlbmVyYXRvclxuICAgICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgZGF0YSA9IHZhbHVlLm5leHQoKTtcbiAgICAgICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEudGhlbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBkYXRhID0gYXdhaXQgZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5kb25lKSBicmVhaztcbiAgICAgICAgaWYgKGkgPT0gZm5zLmxlbmd0aCkge1xuICAgICAgICAgIHlpZWxkIGRhdGEudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeWllbGQqIG5leHQoZGF0YS52YWx1ZSwgZm5zLCBpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpID09IGZucy5sZW5ndGgpIHtcbiAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGYgPSBmbnNbaV07XG4gICAgdmFsdWUgPSBmKHZhbHVlKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdlbiA9ICguLi5mbnM6IGFueSkgPT4ge1xuICBmbnMgPSBmbnNcbiAgICAuZmlsdGVyKChmbjogYW55KSA9PiBmbilcbiAgICAuZmxhdChJbmZpbml0eSlcbiAgICAubWFwKChmbjogYW55KSA9PiAoaXNGdW5jdGlvbkxpc3QoZm4pID8gZ2V0RnVuY3Rpb25MaXN0KGZuKSA6IGZuKSlcbiAgICAuZmxhdChJbmZpbml0eSk7XG4gIGlmICghZm5zLmxlbmd0aCkge1xuICAgIGZucyA9IFsoeDogYW55KSA9PiB4XTtcbiAgfVxuICBsZXQgZmx1c2hlZCA9IGZhbHNlO1xuICBsZXQgZyA9IGFzeW5jIGZ1bmN0aW9uKiAodmFsdWU6IGFueSkge1xuICAgIGlmIChmbHVzaGVkKSB0aHJvdyBFcnJvcihcIkNhbGwgdG8gYSBmbHVzaGVkIHBpcGUuXCIpO1xuICAgIGlmICh2YWx1ZSAhPT0gbm9uZSkge1xuICAgICAgeWllbGQqIG5leHQodmFsdWUsIGZucywgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsdXNoZWQgPSB0cnVlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgZiA9IGZuc1tpXTtcbiAgICAgICAgaWYgKGlzRmx1c2hhYmxlKGYpKSB7XG4gICAgICAgICAgeWllbGQqIG5leHQoZihub25lKSwgZm5zLCBpICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IG5lZWRUb0ZsdXNoID0gZm5zLnNvbWUoKGZuOiBhbnkpID0+IGlzRmx1c2hhYmxlKGZuKSk7XG4gIGlmIChuZWVkVG9GbHVzaCkgZyA9IGZsdXNoYWJsZShnKTtcbiAgcmV0dXJuIHNldEZ1bmN0aW9uTGlzdChnLCBmbnMpO1xufTtcblxuY29uc3Qgd3JpdGUgPSAoaW5wdXQ6IGFueSwgY2h1bms6IGFueSwgZW5jb2Rpbmc6IGFueSwgY2FsbGJhY2s6IGFueSkgPT4ge1xuICBsZXQgZXJyb3I6IGFueSA9IG51bGw7XG4gIHRyeSB7XG4gICAgaW5wdXQud3JpdGUoY2h1bmssIGVuY29kaW5nLCAoZTogYW55KSA9PiBjYWxsYmFjayhlIHx8IGVycm9yKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBlcnJvciA9IGU7XG4gIH1cbn07XG5cbmNvbnN0IGZpbmFsID0gKGlucHV0OiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHtcbiAgbGV0IGVycm9yOiBhbnkgPSBudWxsO1xuICB0cnkge1xuICAgIGlucHV0LmVuZChudWxsLCBudWxsLCAoZTogYW55KSA9PiBjYWxsYmFjayhlIHx8IGVycm9yKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBlcnJvciA9IGU7XG4gIH1cbn07XG5cbmNvbnN0IHJlYWQgPSAob3V0cHV0OiBhbnkpID0+IHtcbiAgb3V0cHV0LnJlc3VtZSgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2hhaW4oZm5zOiBhbnkpIHtcbiAgZm5zID0gZm5zLmZsYXQoSW5maW5pdHkpLmZpbHRlcigoZm46IGFueSkgPT4gZm4pO1xuXG4gIGNvbnN0IHN0cmVhbXMgPSBmbnNcbiAgICAgIC5tYXAoKGZuOiBhbnkpID0+IChpc0Z1bmN0aW9uTGlzdChmbikgPyBnZXRGdW5jdGlvbkxpc3QoZm4pIDogZm4pKVxuICAgICAgLmZsYXQoSW5maW5pdHkpXG4gICAgICAucmVkdWNlKGdyb3VwRnVuY3Rpb25zLCBbXSlcbiAgICAgIC5tYXAocHJvZHVjZVN0cmVhbXMpXG4gICAgICAuZmlsdGVyKChzOiBhbnkpID0+IHMpLFxuICAgIGlucHV0ID0gc3RyZWFtc1swXSxcbiAgICBvdXRwdXQgPSBzdHJlYW1zLnJlZHVjZSgob3V0cHV0OiBhbnksIGl0ZW06IGFueSkgPT4gKG91dHB1dCAmJiBvdXRwdXQucGlwZShpdGVtKSkgfHwgaXRlbSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICBsZXQgc3RyZWFtOiBEdXBsZXg7IC8vIHdpbGwgYmUgYXNzaWduZWQgbGF0ZXJcblxuICBsZXQgd3JpdGVNZXRob2QgPSAoY2h1bms6IGFueSwgZW5jb2Rpbmc6IGFueSwgY2FsbGJhY2s6IGFueSkgPT4gd3JpdGUoaW5wdXQsIGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spLFxuICAgIGZpbmFsTWV0aG9kID0gKGNhbGxiYWNrOiBhbnkpID0+IGZpbmFsKGlucHV0LCBjYWxsYmFjayksXG4gICAgcmVhZE1ldGhvZCA9ICgpID0+IHJlYWQob3V0cHV0KTtcblxuICBpZiAoIWlzV3JpdGFibGVOb2RlU3RyZWFtKGlucHV0KSkge1xuICAgIHdyaXRlTWV0aG9kID0gKF8xLCBfMiwgY2FsbGJhY2spID0+IGNhbGxiYWNrKG51bGwpO1xuICAgIGZpbmFsTWV0aG9kID0gKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhudWxsKTtcbiAgICBpbnB1dC5vbihcImVuZFwiLCAoKSA9PiBzdHJlYW0uZW5kKCkpO1xuICB9XG5cbiAgaWYgKGlzUmVhZGFibGVOb2RlU3RyZWFtKG91dHB1dCkpIHtcbiAgICBvdXRwdXQub24oXCJkYXRhXCIsIChjaHVuazogYW55KSA9PiAhc3RyZWFtLnB1c2goY2h1bmspICYmIG91dHB1dC5wYXVzZSgpKTtcbiAgICBvdXRwdXQub24oXCJlbmRcIiwgKCkgPT4gc3RyZWFtLnB1c2gobnVsbCkpO1xuICB9IGVsc2Uge1xuICAgIHJlYWRNZXRob2QgPSAoKSA9PiB7fTsgLy8gbm9wXG4gICAgb3V0cHV0Lm9uKFwiZmluaXNoXCIsICgpID0+IHN0cmVhbS5wdXNoKG51bGwpKTtcbiAgfVxuXG4gIHN0cmVhbSA9IG5ldyBEdXBsZXgoXG4gICAgT2JqZWN0LmFzc2lnbihcbiAgICAgIHsgd3JpdGFibGVPYmplY3RNb2RlOiB0cnVlLCByZWFkYWJsZU9iamVjdE1vZGU6IHRydWUgfSxcbiAgICAgIHtcbiAgICAgICAgcmVhZGFibGU6IGlzUmVhZGFibGVOb2RlU3RyZWFtKG91dHB1dCksXG4gICAgICAgIHdyaXRhYmxlOiBpc1dyaXRhYmxlTm9kZVN0cmVhbShpbnB1dCksXG4gICAgICAgIHdyaXRlOiB3cml0ZU1ldGhvZCxcbiAgICAgICAgZmluYWw6IGZpbmFsTWV0aG9kLFxuICAgICAgICByZWFkOiByZWFkTWV0aG9kLFxuICAgICAgfSxcbiAgICApLFxuICApO1xuICAvLyBAdHMtaWdub3JlXG4gIHN0cmVhbS5zdHJlYW1zID0gc3RyZWFtcztcbiAgLy8gQHRzLWlnbm9yZVxuICBzdHJlYW0uaW5wdXQgPSBpbnB1dDtcbiAgLy8gQHRzLWlnbm9yZVxuICBzdHJlYW0ub3V0cHV0ID0gb3V0cHV0O1xuXG4gIGlmICghaXNSZWFkYWJsZU5vZGVTdHJlYW0ob3V0cHV0KSkge1xuICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgfVxuXG4gIC8vIGNvbm5lY3QgZXZlbnRzXG4gIHN0cmVhbXMuZm9yRWFjaCgoaXRlbTogYW55KSA9PiBpdGVtLm9uKFwiZXJyb3JcIiwgKGVycm9yOiBhbnkpID0+IHN0cmVhbS5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpKSk7XG5cbiAgcmV0dXJuIHN0cmVhbTtcbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRyb2wtcmVnZXggKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXG5pbXBvcnQgeyBmbHVzaGFibGUsIGdlbiwgbWFueSwgbm9uZSwgY29tYmluZU1hbnlNdXQgfSBmcm9tIFwiLi9zdHJlYW0tY2hhaW5cIjtcbmltcG9ydCB7IFN0cmluZ0RlY29kZXIgfSBmcm9tIFwibm9kZTpzdHJpbmdfZGVjb2RlclwiO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwibm9kZTpldmVudHNcIjtcblxuY29uc3QgZml4VXRmOFN0cmVhbSA9ICgpID0+IHtcbiAgY29uc3Qgc3RyaW5nRGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKCk7XG4gIGxldCBpbnB1dCA9IFwiXCI7XG4gIHJldHVybiBmbHVzaGFibGUoKGNodW5rOiBhbnkpID0+IHtcbiAgICBpZiAoY2h1bmsgPT09IG5vbmUpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGlucHV0ICsgc3RyaW5nRGVjb2Rlci5lbmQoKTtcbiAgICAgIGlucHV0ID0gXCJcIjtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2h1bmsgPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuIGNodW5rO1xuICAgICAgY29uc3QgcmVzdWx0ID0gaW5wdXQgKyBjaHVuaztcbiAgICAgIGlucHV0ID0gXCJcIjtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChjaHVuayBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgY29uc3QgcmVzdWx0ID0gaW5wdXQgKyBzdHJpbmdEZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICAgIGlucHV0ID0gXCJcIjtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBhIHN0cmluZyBvciBhIEJ1ZmZlclwiKTtcbiAgfSk7XG59O1xuXG5jb25zdCBwYXR0ZXJucyA9IHtcbiAgdmFsdWUxOiAvW1xcXCJcXHtcXFtcXF1cXC1cXGRdfHRydWVcXGJ8ZmFsc2VcXGJ8bnVsbFxcYnxcXHN7MSwyNTZ9L3ksXG4gIHN0cmluZzogL1teXFx4MDAtXFx4MWZcXFwiXFxcXF17MSwyNTZ9fFxcXFxbYmZucnRcXFwiXFxcXFxcL118XFxcXHVbXFxkYS1mQS1GXXs0fXxcXFwiL3ksXG4gIGtleTE6IC9bXFxcIlxcfV18XFxzezEsMjU2fS95LFxuICBjb2xvbjogL1xcOnxcXHN7MSwyNTZ9L3ksXG4gIGNvbW1hOiAvW1xcLFxcXVxcfV18XFxzezEsMjU2fS95LFxuICB3czogL1xcc3sxLDI1Nn0veSxcbiAgbnVtYmVyU3RhcnQ6IC9cXGQveSxcbiAgbnVtYmVyRGlnaXQ6IC9cXGR7MCwyNTZ9L3ksXG4gIG51bWJlckZyYWN0aW9uOiAvW1xcLmVFXS95LFxuICBudW1iZXJFeHBvbmVudDogL1tlRV0veSxcbiAgbnVtYmVyRXhwU2lnbjogL1stK10veSxcbn07XG5jb25zdCBNQVhfUEFUVEVSTl9TSVpFID0gMTY7XG5cbmNvbnN0IHZhbHVlczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHsgdHJ1ZTogdHJ1ZSwgZmFsc2U6IGZhbHNlLCBudWxsOiBudWxsIH0sXG4gIGV4cGVjdGVkOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0geyBvYmplY3Q6IFwib2JqZWN0U3RvcFwiLCBhcnJheTogXCJhcnJheVN0b3BcIiwgXCJcIjogXCJkb25lXCIgfTtcblxuLy8gbG9uZyBoZXhhZGVjaW1hbCBjb2RlczogXFx1WFhYWFxuY29uc3QgZnJvbUhleCA9IChzOiBzdHJpbmcpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQocy5zbGljZSgyKSwgMTYpKTtcblxuLy8gc2hvcnQgY29kZXM6IFxcYiBcXGYgXFxuIFxcciBcXHQgXFxcIiBcXFxcIFxcL1xuY29uc3QgY29kZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gIGI6IFwiXFxiXCIsXG4gIGY6IFwiXFxmXCIsXG4gIG46IFwiXFxuXCIsXG4gIHI6IFwiXFxyXCIsXG4gIHQ6IFwiXFx0XCIsXG4gICdcIic6ICdcIicsXG4gIFwiXFxcXFwiOiBcIlxcXFxcIixcbiAgXCIvXCI6IFwiL1wiLFxufTtcblxuY29uc3QganNvblBhcnNlciA9IChvcHRpb25zPzogYW55KSA9PiB7XG4gIGxldCBwYWNrS2V5cyA9IHRydWUsXG4gICAgcGFja1N0cmluZ3MgPSB0cnVlLFxuICAgIHBhY2tOdW1iZXJzID0gdHJ1ZSxcbiAgICBzdHJlYW1LZXlzID0gdHJ1ZSxcbiAgICBzdHJlYW1TdHJpbmdzID0gdHJ1ZSxcbiAgICBzdHJlYW1OdW1iZXJzID0gdHJ1ZSxcbiAgICBqc29uU3RyZWFtaW5nID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBcInBhY2tWYWx1ZXNcIiBpbiBvcHRpb25zICYmIChwYWNrS2V5cyA9IHBhY2tTdHJpbmdzID0gcGFja051bWJlcnMgPSBvcHRpb25zLnBhY2tWYWx1ZXMpO1xuICAgIFwicGFja0tleXNcIiBpbiBvcHRpb25zICYmIChwYWNrS2V5cyA9IG9wdGlvbnMucGFja0tleXMpO1xuICAgIFwicGFja1N0cmluZ3NcIiBpbiBvcHRpb25zICYmIChwYWNrU3RyaW5ncyA9IG9wdGlvbnMucGFja1N0cmluZ3MpO1xuICAgIFwicGFja051bWJlcnNcIiBpbiBvcHRpb25zICYmIChwYWNrTnVtYmVycyA9IG9wdGlvbnMucGFja051bWJlcnMpO1xuICAgIFwic3RyZWFtVmFsdWVzXCIgaW4gb3B0aW9ucyAmJiAoc3RyZWFtS2V5cyA9IHN0cmVhbVN0cmluZ3MgPSBzdHJlYW1OdW1iZXJzID0gb3B0aW9ucy5zdHJlYW1WYWx1ZXMpO1xuICAgIFwic3RyZWFtS2V5c1wiIGluIG9wdGlvbnMgJiYgKHN0cmVhbUtleXMgPSBvcHRpb25zLnN0cmVhbUtleXMpO1xuICAgIFwic3RyZWFtU3RyaW5nc1wiIGluIG9wdGlvbnMgJiYgKHN0cmVhbVN0cmluZ3MgPSBvcHRpb25zLnN0cmVhbVN0cmluZ3MpO1xuICAgIFwic3RyZWFtTnVtYmVyc1wiIGluIG9wdGlvbnMgJiYgKHN0cmVhbU51bWJlcnMgPSBvcHRpb25zLnN0cmVhbU51bWJlcnMpO1xuICAgIGpzb25TdHJlYW1pbmcgPSBvcHRpb25zLmpzb25TdHJlYW1pbmc7XG4gIH1cblxuICAhcGFja0tleXMgJiYgKHN0cmVhbUtleXMgPSB0cnVlKTtcbiAgIXBhY2tTdHJpbmdzICYmIChzdHJlYW1TdHJpbmdzID0gdHJ1ZSk7XG4gICFwYWNrTnVtYmVycyAmJiAoc3RyZWFtTnVtYmVycyA9IHRydWUpO1xuXG4gIGxldCBkb25lID0gZmFsc2UsXG4gICAgZXhwZWN0ID0ganNvblN0cmVhbWluZyA/IFwiZG9uZVwiIDogXCJ2YWx1ZVwiLFxuICAgIHBhcmVudCA9IFwiXCIsXG4gICAgb3Blbk51bWJlciA9IGZhbHNlLFxuICAgIGFjY3VtdWxhdG9yID0gXCJcIixcbiAgICBidWZmZXIgPSBcIlwiO1xuXG4gIGNvbnN0IHN0YWNrOiBhbnlbXSA9IFtdO1xuXG4gIHJldHVybiBmbHVzaGFibGUoKGJ1ZjogYW55KSA9PiB7XG4gICAgY29uc3QgdG9rZW5zOiBhbnlbXSA9IFtdO1xuXG4gICAgaWYgKGJ1ZiA9PT0gbm9uZSkge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZmZlciArPSBidWY7XG4gICAgfVxuXG4gICAgbGV0IG1hdGNoOiBhbnk7XG4gICAgbGV0IHZhbHVlOiBhbnk7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIG1haW46IGZvciAoOzspIHtcbiAgICAgIHN3aXRjaCAoZXhwZWN0KSB7XG4gICAgICAgIGNhc2UgXCJ2YWx1ZTFcIjpcbiAgICAgICAgY2FzZSBcInZhbHVlXCI6XG4gICAgICAgICAgcGF0dGVybnMudmFsdWUxLmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMudmFsdWUxLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoZG9uZSB8fCBpbmRleCArIE1BWF9QQVRURVJOX1NJWkUgPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkIGEgdmFsdWVcIik7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBoYXMgZXhwZWN0ZWQgYSB2YWx1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlICdcIic6XG4gICAgICAgICAgICAgIGlmIChzdHJlYW1TdHJpbmdzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnRTdHJpbmdcIiB9KTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwie1wiOlxuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnRPYmplY3RcIiB9KTtcbiAgICAgICAgICAgICAgc3RhY2sucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICBwYXJlbnQgPSBcIm9iamVjdFwiO1xuICAgICAgICAgICAgICBleHBlY3QgPSBcImtleTFcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiW1wiOlxuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnRBcnJheVwiIH0pO1xuICAgICAgICAgICAgICBzdGFjay5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgIHBhcmVudCA9IFwiYXJyYXlcIjtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJ2YWx1ZTFcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiXVwiOlxuICAgICAgICAgICAgICBpZiAoZXhwZWN0ICE9PSBcInZhbHVlMVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiB1bmV4cGVjdGVkIHRva2VuICddJ1wiKTtcbiAgICAgICAgICAgICAgaWYgKG9wZW5OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZE51bWJlclwiIH0pO1xuICAgICAgICAgICAgICAgIG9wZW5OdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocGFja051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJWYWx1ZVwiLCB2YWx1ZTogYWNjdW11bGF0b3IgfSk7XG4gICAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmRBcnJheVwiIH0pO1xuICAgICAgICAgICAgICBwYXJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiLVwiOlxuICAgICAgICAgICAgICBvcGVuTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnROdW1iZXJcIiB9LCB7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IFwiLVwiIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciA9IFwiLVwiKTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJTdGFydFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIwXCI6XG4gICAgICAgICAgICAgIG9wZW5OdW1iZXIgPSB0cnVlO1xuICAgICAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykge1xuICAgICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJzdGFydE51bWJlclwiIH0sIHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogXCIwXCIgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yID0gXCIwXCIpO1xuICAgICAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckZyYWN0aW9uXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjFcIjpcbiAgICAgICAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgICAgICBjYXNlIFwiM1wiOlxuICAgICAgICAgICAgY2FzZSBcIjRcIjpcbiAgICAgICAgICAgIGNhc2UgXCI1XCI6XG4gICAgICAgICAgICBjYXNlIFwiNlwiOlxuICAgICAgICAgICAgY2FzZSBcIjdcIjpcbiAgICAgICAgICAgIGNhc2UgXCI4XCI6XG4gICAgICAgICAgICBjYXNlIFwiOVwiOlxuICAgICAgICAgICAgICBvcGVuTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnROdW1iZXJcIiB9LCB7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciA9IHZhbHVlKTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJEaWdpdFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ0cnVlXCI6XG4gICAgICAgICAgICBjYXNlIFwiZmFsc2VcIjpcbiAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoIC0gaW5kZXggPT09IHZhbHVlLmxlbmd0aCAmJiAhZG9uZSkgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IHZhbHVlICsgXCJWYWx1ZVwiLCB2YWx1ZTogdmFsdWVzW3ZhbHVlXSB9KTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyBkZWZhdWx0OiAvLyB3c1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJrZXlWYWxcIjpcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgIHBhdHRlcm5zLnN0cmluZy5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLnN0cmluZy5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCAmJiAoZG9uZSB8fCBidWZmZXIubGVuZ3RoIC0gaW5kZXggPj0gNikpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGVzY2FwZWQgY2hhcmFjdGVyc1wiKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgaGFzIGV4cGVjdGVkIGEgc3RyaW5nIHZhbHVlXCIpO1xuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ1wiJykge1xuICAgICAgICAgICAgaWYgKGV4cGVjdCA9PT0gXCJrZXlWYWxcIikge1xuICAgICAgICAgICAgICBpZiAoc3RyZWFtS2V5cykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZEtleVwiIH0pO1xuICAgICAgICAgICAgICBpZiAocGFja0tleXMpIHtcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwia2V5VmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gXCJcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBleHBlY3QgPSBcImNvbG9uXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoc3RyZWFtU3RyaW5ncykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZFN0cmluZ1wiIH0pO1xuICAgICAgICAgICAgICBpZiAocGFja1N0cmluZ3MpIHtcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RyaW5nVmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gXCJcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBleHBlY3QgPSBleHBlY3RlZFtwYXJlbnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoID4gMSAmJiB2YWx1ZS5jaGFyQXQoMCkgPT09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdmFsdWUubGVuZ3RoID09IDIgPyBjb2Rlc1t2YWx1ZS5jaGFyQXQoMSldIDogZnJvbUhleCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZXhwZWN0ID09PSBcImtleVZhbFwiID8gc3RyZWFtS2V5cyA6IHN0cmVhbVN0cmluZ3MpIHtcbiAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0cmluZ0NodW5rXCIsIHZhbHVlOiB0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGVjdCA9PT0gXCJrZXlWYWxcIiA/IHBhY2tLZXlzIDogcGFja1N0cmluZ3MpIHtcbiAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGV4cGVjdCA9PT0gXCJrZXlWYWxcIiA/IHN0cmVhbUtleXMgOiBzdHJlYW1TdHJpbmdzKSB7XG4gICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJzdHJpbmdDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhwZWN0ID09PSBcImtleVZhbFwiID8gcGFja0tleXMgOiBwYWNrU3RyaW5ncykge1xuICAgICAgICAgICAgICBhY2N1bXVsYXRvciArPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwia2V5MVwiOlxuICAgICAgICBjYXNlIFwia2V5XCI6XG4gICAgICAgICAgcGF0dGVybnMua2V5MS5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLmtleTEuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggfHwgZG9uZSkgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogZXhwZWN0ZWQgYW4gb2JqZWN0IGtleVwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdcIicpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1LZXlzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnRLZXlcIiB9KTtcbiAgICAgICAgICAgIGV4cGVjdCA9IFwia2V5VmFsXCI7XG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gXCJ9XCIpIHtcbiAgICAgICAgICAgIGlmIChleHBlY3QgIT09IFwia2V5MVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiB1bmV4cGVjdGVkIHRva2VuICd9J1wiKTtcbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmRPYmplY3RcIiB9KTtcbiAgICAgICAgICAgIHBhcmVudCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY29sb25cIjpcbiAgICAgICAgICBwYXR0ZXJucy5jb2xvbi5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLmNvbG9uLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkICc6J1wiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICB2YWx1ZSA9PT0gXCI6XCIgJiYgKGV4cGVjdCA9IFwidmFsdWVcIik7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYXJyYXlTdG9wXCI6XG4gICAgICAgIGNhc2UgXCJvYmplY3RTdG9wXCI6XG4gICAgICAgICAgcGF0dGVybnMuY29tbWEubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5jb21tYS5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCAnLCdcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvcGVuTnVtYmVyKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZE51bWJlclwiIH0pO1xuICAgICAgICAgICAgb3Blbk51bWJlciA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHBhY2tOdW1iZXJzKSB7XG4gICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJWYWx1ZVwiLCB2YWx1ZTogYWNjdW11bGF0b3IgfSk7XG4gICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUgPT09IFwiLFwiKSB7XG4gICAgICAgICAgICBleHBlY3QgPSBleHBlY3QgPT09IFwiYXJyYXlTdG9wXCIgPyBcInZhbHVlXCIgOiBcImtleVwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IFwifVwiIHx8IHZhbHVlID09PSBcIl1cIikge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcIn1cIiA/IGV4cGVjdCA9PT0gXCJhcnJheVN0b3BcIiA6IGV4cGVjdCAhPT0gXCJhcnJheVN0b3BcIikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCAnXCIgKyAoZXhwZWN0ID09PSBcImFycmF5U3RvcFwiID8gXCJdXCIgOiBcIn1cIikgKyBcIidcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IHZhbHVlID09PSBcIn1cIiA/IFwiZW5kT2JqZWN0XCIgOiBcImVuZEFycmF5XCIgfSk7XG4gICAgICAgICAgICBwYXJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gbnVtYmVyIGNodW5rc1xuICAgICAgICBjYXNlIFwibnVtYmVyU3RhcnRcIjogLy8gWzAtOV1cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJTdGFydC5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlclN0YXJ0LmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkIGEgc3RhcnRpbmcgZGlnaXRcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICBleHBlY3QgPSB2YWx1ZSA9PT0gXCIwXCIgPyBcIm51bWJlckZyYWN0aW9uXCIgOiBcIm51bWJlckRpZ2l0XCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRGlnaXRcIjogLy8gWzAtOV0qXG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyRGlnaXQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJEaWdpdC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCBhIGRpZ2l0XCIpO1xuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRnJhY3Rpb25cIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBleHBlY3RlZFtwYXJlbnRdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJudW1iZXJGcmFjdGlvblwiOiAvLyBbXFwuZUVdP1xuICAgICAgICAgIHBhdHRlcm5zLm51bWJlckZyYWN0aW9uLmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMubnVtYmVyRnJhY3Rpb24uZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggfHwgZG9uZSkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBleHBlY3RlZFtwYXJlbnRdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgIGV4cGVjdCA9IHZhbHVlID09PSBcIi5cIiA/IFwibnVtYmVyRnJhY1N0YXJ0XCIgOiBcIm51bWJlckV4cFNpZ25cIjtcbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJudW1iZXJGcmFjU3RhcnRcIjogLy8gWzAtOV1cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJTdGFydC5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlclN0YXJ0LmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkIGEgZnJhY3Rpb25hbCBwYXJ0IG9mIGEgbnVtYmVyXCIpO1xuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciArPSB2YWx1ZSk7XG4gICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJGcmFjRGlnaXRcIjtcbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJudW1iZXJGcmFjRGlnaXRcIjogLy8gWzAtOV0qXG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyRGlnaXQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJEaWdpdC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckV4cG9uZW50XCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRXhwb25lbnRcIjogLy8gW2VFXT9cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJFeHBvbmVudC5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlckV4cG9uZW50LmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJkb25lXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciArPSB2YWx1ZSk7XG4gICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJFeHBTaWduXCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRXhwU2lnblwiOiAvLyBbLStdP1xuICAgICAgICAgIHBhdHRlcm5zLm51bWJlckV4cFNpZ24ubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJFeHBTaWduLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRXhwU3RhcnRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZG9uZSkgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGhhcyBleHBlY3RlZCBhbiBleHBvbmVudCB2YWx1ZSBvZiBhIG51bWJlclwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRXhwU3RhcnRcIjtcbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJudW1iZXJFeHBTdGFydFwiOiAvLyBbMC05XVxuICAgICAgICAgIHBhdHRlcm5zLm51bWJlclN0YXJ0Lmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMubnVtYmVyU3RhcnQuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggfHwgZG9uZSlcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogZXhwZWN0ZWQgYW4gZXhwb25lbnQgcGFydCBvZiBhIG51bWJlclwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRXhwRGlnaXRcIjtcbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJudW1iZXJFeHBEaWdpdFwiOiAvLyBbMC05XSpcbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJEaWdpdC5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlckRpZ2l0LmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZG9uZVwiOlxuICAgICAgICAgIHBhdHRlcm5zLndzLmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMud3MuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgaWYgKGpzb25TdHJlYW1pbmcpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QgPSBcInZhbHVlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogdW5leHBlY3RlZCBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmIChvcGVuTnVtYmVyKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZE51bWJlclwiIH0pO1xuICAgICAgICAgICAgb3Blbk51bWJlciA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHBhY2tOdW1iZXJzKSB7XG4gICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJWYWx1ZVwiLCB2YWx1ZTogYWNjdW11bGF0b3IgfSk7XG4gICAgICAgICAgICAgIGFjY3VtdWxhdG9yID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZG9uZSAmJiBvcGVuTnVtYmVyKSB7XG4gICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcImVuZE51bWJlclwiIH0pO1xuICAgICAgb3Blbk51bWJlciA9IGZhbHNlO1xuICAgICAgaWYgKHBhY2tOdW1iZXJzKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJWYWx1ZVwiLCB2YWx1ZTogYWNjdW11bGF0b3IgfSk7XG4gICAgICAgIGFjY3VtdWxhdG9yID0gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGluZGV4KTtcbiAgICByZXR1cm4gdG9rZW5zLmxlbmd0aCA/IG1hbnkodG9rZW5zKSA6IG5vbmU7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlciA9IChvcHRpb25zPzogYW55KSA9PiBnZW4oZml4VXRmOFN0cmVhbSgpLCBqc29uUGFyc2VyKG9wdGlvbnMpKTtcblxuY29uc3Qgd2l0aFBhcnNlciA9IChmbjogYW55LCBvcHRpb25zPzogYW55KSA9PiBnZW4ocGFyc2VyKG9wdGlvbnMpLCBmbihvcHRpb25zKSk7XG5cbmNvbnN0IGNoZWNrYWJsZVRva2VucyA9IHtcbiAgICBzdGFydE9iamVjdDogMSxcbiAgICBzdGFydEFycmF5OiAxLFxuICAgIHN0YXJ0U3RyaW5nOiAxLFxuICAgIHN0YXJ0TnVtYmVyOiAxLFxuICAgIG51bGxWYWx1ZTogMSxcbiAgICB0cnVlVmFsdWU6IDEsXG4gICAgZmFsc2VWYWx1ZTogMSxcbiAgICBzdHJpbmdWYWx1ZTogMSxcbiAgICBudW1iZXJWYWx1ZTogMSxcbiAgfSxcbiAgc3RvcFRva2VucyA9IHtcbiAgICBzdGFydE9iamVjdDogXCJlbmRPYmplY3RcIixcbiAgICBzdGFydEFycmF5OiBcImVuZEFycmF5XCIsXG4gICAgc3RhcnRTdHJpbmc6IFwiZW5kU3RyaW5nXCIsXG4gICAgc3RhcnROdW1iZXI6IFwiZW5kTnVtYmVyXCIsXG4gIH0sXG4gIG9wdGlvbmFsVG9rZW5zID0geyBlbmRTdHJpbmc6IFwic3RyaW5nVmFsdWVcIiwgZW5kTnVtYmVyOiBcIm51bWJlclZhbHVlXCIgfTtcblxuY29uc3QgZGVmYXVsdEZpbHRlciA9IChfc3RhY2s6IHN0cmluZ1tdLCBfYTogYW55KSA9PiB0cnVlO1xuXG5jb25zdCBzdHJpbmdGaWx0ZXIgPSAoc3RyaW5nOiBzdHJpbmcsIHNlcGFyYXRvcjogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHN0cmluZ1dpdGhTZXBhcmF0b3IgPSBzdHJpbmcgKyBzZXBhcmF0b3I7XG4gIHJldHVybiAoc3RhY2s6IHN0cmluZ1tdLCBfYTogYW55KSA9PiB7XG4gICAgY29uc3QgcGF0aCA9IHN0YWNrLmpvaW4oc2VwYXJhdG9yKTtcbiAgICByZXR1cm4gcGF0aCA9PT0gc3RyaW5nIHx8IHBhdGguc3RhcnRzV2l0aChzdHJpbmdXaXRoU2VwYXJhdG9yKTtcbiAgfTtcbn07XG5cbmNvbnN0IHJlZ0V4cEZpbHRlciA9IChyZWdFeHA6IFJlZ0V4cCwgc2VwYXJhdG9yOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIChzdGFjazogc3RyaW5nW10sIF9hOiBhbnkpID0+IHJlZ0V4cC50ZXN0KHN0YWNrLmpvaW4oc2VwYXJhdG9yKSk7XG59O1xuXG5jb25zdCBmaWx0ZXJCYXNlID1cbiAgKHtcbiAgICBzcGVjaWFsQWN0aW9uID0gXCJhY2NlcHRcIixcbiAgICBkZWZhdWx0QWN0aW9uID0gXCJpZ25vcmVcIixcbiAgICBub25DaGVja2FibGVBY3Rpb24gPSBcInByb2Nlc3Mta2V5XCIsXG4gICAgdHJhbnNpdGlvbiA9IHVuZGVmaW5lZCBhcyBhbnksXG4gIH0gPSB7fSkgPT5cbiAgKG9wdGlvbnM6IGFueSkgPT4ge1xuICAgIGNvbnN0IG9uY2UgPSBvcHRpb25zPy5vbmNlLFxuICAgICAgc2VwYXJhdG9yID0gb3B0aW9ucz8ucGF0aFNlcGFyYXRvciB8fCBcIi5cIjtcbiAgICBsZXQgZmlsdGVyID0gZGVmYXVsdEZpbHRlcixcbiAgICAgIHN0cmVhbUtleXMgPSB0cnVlO1xuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmlsdGVyID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuZmlsdGVyID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZmlsdGVyID0gc3RyaW5nRmlsdGVyKG9wdGlvbnMuZmlsdGVyLCBzZXBhcmF0b3IpO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmZpbHRlciBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICBmaWx0ZXIgPSByZWdFeHBGaWx0ZXIob3B0aW9ucy5maWx0ZXIsIHNlcGFyYXRvcik7XG4gICAgICB9XG4gICAgICBpZiAoXCJzdHJlYW1WYWx1ZXNcIiBpbiBvcHRpb25zKSBzdHJlYW1LZXlzID0gb3B0aW9ucy5zdHJlYW1WYWx1ZXM7XG4gICAgICBpZiAoXCJzdHJlYW1LZXlzXCIgaW4gb3B0aW9ucykgc3RyZWFtS2V5cyA9IG9wdGlvbnMuc3RyZWFtS2V5cztcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHsgZmlsdGVyLCBzdHJlYW1LZXlzLCBzZXBhcmF0b3IgfSk7XG4gICAgbGV0IHN0YXRlID0gXCJjaGVja1wiO1xuICAgIGNvbnN0IHN0YWNrOiBhbnlbXSA9IFtdO1xuICAgIGxldCBkZXB0aCA9IDAsXG4gICAgICBwcmV2aW91c1Rva2VuID0gXCJcIixcbiAgICAgIGVuZFRva2VuID0gXCJcIixcbiAgICAgIG9wdGlvbmFsVG9rZW4gPSBcIlwiLFxuICAgICAgc3RhcnRUcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgcmV0dXJuIGZsdXNoYWJsZSgoY2h1bmspID0+IHtcbiAgICAgIC8vIHRoZSBmbHVzaFxuICAgICAgaWYgKGNodW5rID09PSBub25lKSByZXR1cm4gdHJhbnNpdGlvbiA/IHRyYW5zaXRpb24oW10sIG51bGwsIFwiZmx1c2hcIiwgc2FuaXRpemVkT3B0aW9ucykgOiBub25lO1xuXG4gICAgICAvLyBwcm9jZXNzIHRoZSBvcHRpb25hbCB2YWx1ZSB0b2tlbiAodW5maW5pc2hlZClcbiAgICAgIGlmIChvcHRpb25hbFRva2VuKSB7XG4gICAgICAgIGlmIChvcHRpb25hbFRva2VuID09PSBjaHVuay5uYW1lKSB7XG4gICAgICAgICAgbGV0IHJldHVyblRva2VuID0gbm9uZTtcbiAgICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFwicHJvY2Vzcy1rZXlcIjpcbiAgICAgICAgICAgICAgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFjY2VwdC12YWx1ZVwiOlxuICAgICAgICAgICAgICByZXR1cm5Ub2tlbiA9IGNodW5rO1xuICAgICAgICAgICAgICBzdGF0ZSA9IG9uY2UgPyBcInBhc3NcIiA6IFwiY2hlY2tcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBzdGF0ZSA9IG9uY2UgPyBcImFsbFwiIDogXCJjaGVja1wiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgb3B0aW9uYWxUb2tlbiA9IFwiXCI7XG4gICAgICAgICAgcmV0dXJuIHJldHVyblRva2VuO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbmFsVG9rZW4gPSBcIlwiO1xuICAgICAgICBzdGF0ZSA9IG9uY2UgJiYgc3RhdGUgIT09IFwicHJvY2Vzcy1rZXlcIiA/IFwicGFzc1wiIDogXCJjaGVja1wiO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmV0dXJuVG9rZW46IGFueSA9IG5vbmU7XG5cbiAgICAgIHJlY2hlY2s6IGZvciAoOzspIHtcbiAgICAgICAgLy8gYWNjZXB0L3JlamVjdCB0b2tlbnNcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJwcm9jZXNzLWtleVwiOlxuICAgICAgICAgICAgaWYgKGNodW5rLm5hbWUgPT09IFwiZW5kS2V5XCIpIG9wdGlvbmFsVG9rZW4gPSBcImtleVZhbHVlXCI7XG4gICAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgICBjYXNlIFwicGFzc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgY2FzZSBcImFsbFwiOlxuICAgICAgICAgICAgcmV0dXJuIGNodW5rO1xuICAgICAgICAgIGNhc2UgXCJhY2NlcHRcIjpcbiAgICAgICAgICBjYXNlIFwicmVqZWN0XCI6XG4gICAgICAgICAgICBpZiAoc3RhcnRUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgIHN0YXJ0VHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm5Ub2tlbiA9IHRyYW5zaXRpb24oc3RhY2ssIGNodW5rLCBzdGF0ZSwgc2FuaXRpemVkT3B0aW9ucykgfHwgbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoY2h1bmsubmFtZSkge1xuICAgICAgICAgICAgICBjYXNlIFwic3RhcnRPYmplY3RcIjpcbiAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0QXJyYXlcIjpcbiAgICAgICAgICAgICAgICArK2RlcHRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiZW5kT2JqZWN0XCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRBcnJheVwiOlxuICAgICAgICAgICAgICAgIC0tZGVwdGg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFwiYWNjZXB0XCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSBjb21iaW5lTWFueU11dChyZXR1cm5Ub2tlbiwgY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkZXB0aCkge1xuICAgICAgICAgICAgICBpZiAob25jZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gc3RhdGUgPT09IFwiYWNjZXB0XCIgPyBcInBhc3NcIiA6IFwiYWxsXCI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5Ub2tlbjtcbiAgICAgICAgICBjYXNlIFwiYWNjZXB0LXZhbHVlXCI6XG4gICAgICAgICAgY2FzZSBcInJlamVjdC12YWx1ZVwiOlxuICAgICAgICAgICAgaWYgKHN0YXJ0VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICBzdGFydFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSB0cmFuc2l0aW9uKHN0YWNrLCBjaHVuaywgc3RhdGUsIHNhbml0aXplZE9wdGlvbnMpIHx8IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFwiYWNjZXB0LXZhbHVlXCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSBjb21iaW5lTWFueU11dChyZXR1cm5Ub2tlbiwgY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNodW5rLm5hbWUgPT09IGVuZFRva2VuKSB7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgb3B0aW9uYWxUb2tlbiA9IG9wdGlvbmFsVG9rZW5zW2VuZFRva2VuXSB8fCBcIlwiO1xuICAgICAgICAgICAgICBlbmRUb2tlbiA9IFwiXCI7XG4gICAgICAgICAgICAgIGlmICghb3B0aW9uYWxUb2tlbikge1xuICAgICAgICAgICAgICAgIGlmIChvbmNlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0YXRlID09PSBcImFjY2VwdC12YWx1ZVwiID8gXCJwYXNzXCIgOiBcImFsbFwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZSA9IFwiY2hlY2tcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5Ub2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGFzdCBpbmRleCBpbiB0aGUgc3RhY2tcbiAgICAgICAgaWYgKHR5cGVvZiBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgLy8gYXJyYXlcbiAgICAgICAgICBzd2l0Y2ggKGNodW5rLm5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydE9iamVjdFwiOlxuICAgICAgICAgICAgY2FzZSBcInN0YXJ0QXJyYXlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydFN0cmluZ1wiOlxuICAgICAgICAgICAgY2FzZSBcInN0YXJ0TnVtYmVyXCI6XG4gICAgICAgICAgICBjYXNlIFwibnVsbFZhbHVlXCI6XG4gICAgICAgICAgICBjYXNlIFwidHJ1ZVZhbHVlXCI6XG4gICAgICAgICAgICBjYXNlIFwiZmFsc2VWYWx1ZVwiOlxuICAgICAgICAgICAgICArK3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJudW1iZXJWYWx1ZVwiOlxuICAgICAgICAgICAgICBpZiAocHJldmlvdXNUb2tlbiAhPT0gXCJlbmROdW1iZXJcIikgKytzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nVmFsdWVcIjpcbiAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVG9rZW4gIT09IFwiZW5kU3RyaW5nXCIpICsrc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2h1bmsubmFtZSA9PT0gXCJrZXlWYWx1ZVwiKSBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9IGNodW5rLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzVG9rZW4gPSBjaHVuay5uYW1lO1xuXG4gICAgICAgIC8vIGNoZWNrIHRoZSB0b2tlblxuICAgICAgICBjb25zdCBhY3Rpb24gPVxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjaGVja2FibGVUb2tlbnNbY2h1bmsubmFtZV0gIT09IDEgPyBub25DaGVja2FibGVBY3Rpb24gOiBmaWx0ZXIoc3RhY2ssIGNodW5rKSA/IHNwZWNpYWxBY3Rpb24gOiBkZWZhdWx0QWN0aW9uO1xuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZW5kVG9rZW4gPSBzdG9wVG9rZW5zW2NodW5rLm5hbWVdIHx8IFwiXCI7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgY2FzZSBcInByb2Nlc3Mta2V5XCI6XG4gICAgICAgICAgICBpZiAoY2h1bmsubmFtZSA9PT0gXCJzdGFydEtleVwiKSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gXCJwcm9jZXNzLWtleVwiO1xuICAgICAgICAgICAgICBjb250aW51ZSByZWNoZWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFjY2VwdC10b2tlblwiOlxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgaWYgKGVuZFRva2VuICYmIG9wdGlvbmFsVG9rZW5zW2VuZFRva2VuXSkge1xuICAgICAgICAgICAgICBzdGF0ZSA9IFwiYWNjZXB0LXZhbHVlXCI7XG4gICAgICAgICAgICAgIHN0YXJ0VHJhbnNpdGlvbiA9ICEhdHJhbnNpdGlvbjtcbiAgICAgICAgICAgICAgY29udGludWUgcmVjaGVjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uKSByZXR1cm5Ub2tlbiA9IHRyYW5zaXRpb24oc3RhY2ssIGNodW5rLCBhY3Rpb24sIHNhbml0aXplZE9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSBjb21iaW5lTWFueU11dChyZXR1cm5Ub2tlbiwgY2h1bmspO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFjY2VwdFwiOlxuICAgICAgICAgICAgaWYgKGVuZFRva2VuKSB7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgc3RhdGUgPSBvcHRpb25hbFRva2Vuc1tlbmRUb2tlbl0gPyBcImFjY2VwdC12YWx1ZVwiIDogXCJhY2NlcHRcIjtcbiAgICAgICAgICAgICAgc3RhcnRUcmFuc2l0aW9uID0gISF0cmFuc2l0aW9uO1xuICAgICAgICAgICAgICBjb250aW51ZSByZWNoZWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHJldHVyblRva2VuID0gdHJhbnNpdGlvbihzdGFjaywgY2h1bmssIGFjdGlvbiwgc2FuaXRpemVkT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm5Ub2tlbiA9IGNvbWJpbmVNYW55TXV0KHJldHVyblRva2VuLCBjaHVuayk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwicmVqZWN0XCI6XG4gICAgICAgICAgICBpZiAoZW5kVG9rZW4pIHtcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBzdGF0ZSA9IG9wdGlvbmFsVG9rZW5zW2VuZFRva2VuXSA/IFwicmVqZWN0LXZhbHVlXCIgOiBcInJlamVjdFwiO1xuICAgICAgICAgICAgICBzdGFydFRyYW5zaXRpb24gPSAhIXRyYW5zaXRpb247XG4gICAgICAgICAgICAgIGNvbnRpbnVlIHJlY2hlY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikgcmV0dXJuVG9rZW4gPSB0cmFuc2l0aW9uKHN0YWNrLCBjaHVuaywgYWN0aW9uLCBzYW5pdGl6ZWRPcHRpb25zKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJwYXNzXCI6XG4gICAgICAgICAgICBzdGF0ZSA9IFwicGFzc1wiO1xuICAgICAgICAgICAgY29udGludWUgcmVjaGVjaztcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgdGhlIHN0YWNrXG4gICAgICBzd2l0Y2ggKGNodW5rLm5hbWUpIHtcbiAgICAgICAgY2FzZSBcInN0YXJ0T2JqZWN0XCI6XG4gICAgICAgICAgc3RhY2sucHVzaChudWxsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0YXJ0QXJyYXlcIjpcbiAgICAgICAgICBzdGFjay5wdXNoKC0xKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImVuZE9iamVjdFwiOlxuICAgICAgICBjYXNlIFwiZW5kQXJyYXlcIjpcbiAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldHVyblRva2VuO1xuICAgIH0pO1xuICB9O1xuXG5leHBvcnQgY29uc3QgUGlja1BhcnNlciA9IChvcHRpb25zPzogYW55KSA9PiB3aXRoUGFyc2VyKGZpbHRlckJhc2UoKSwgT2JqZWN0LmFzc2lnbih7IHBhY2tLZXlzOiB0cnVlIH0sIG9wdGlvbnMpKTtcblxuY2xhc3MgQ291bnRlciB7XG4gIGRlcHRoOiBudW1iZXI7XG4gIGNvbnN0cnVjdG9yKGluaXRpYWxEZXB0aDogbnVtYmVyKSB7XG4gICAgdGhpcy5kZXB0aCA9IGluaXRpYWxEZXB0aDtcbiAgfVxuICBzdGFydE9iamVjdCgpIHtcbiAgICArK3RoaXMuZGVwdGg7XG4gIH1cbiAgZW5kT2JqZWN0KCkge1xuICAgIC0tdGhpcy5kZXB0aDtcbiAgfVxuICBzdGFydEFycmF5KCkge1xuICAgICsrdGhpcy5kZXB0aDtcbiAgfVxuICBlbmRBcnJheSgpIHtcbiAgICAtLXRoaXMuZGVwdGg7XG4gIH1cbn1cblxuY2xhc3MgQXNzZW1ibGVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgc3RhdGljIGNvbm5lY3RUbyhzdHJlYW06IGFueSwgb3B0aW9uczogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBBc3NlbWJsZXIob3B0aW9ucykuY29ubmVjdFRvKHN0cmVhbSk7XG4gIH1cblxuICBzdGFjazogYW55O1xuICBjdXJyZW50OiBhbnk7XG4gIGtleTogYW55O1xuICBkb25lOiBib29sZWFuO1xuICByZXZpdmVyOiBhbnk7XG4gIC8vIEB0cy1pZ25vcmVcbiAgc3RyaW5nVmFsdWU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICB0YXBDaGFpbjogKGNodW5rOiBhbnkpID0+IGFueTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBhbnkpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmtleSA9IG51bGw7XG4gICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgdGhpcy5yZXZpdmVyID0gdHlwZW9mIG9wdGlvbnMucmV2aXZlciA9PSBcImZ1bmN0aW9uXCIgJiYgb3B0aW9ucy5yZXZpdmVyO1xuICAgICAgaWYgKHRoaXMucmV2aXZlcikge1xuICAgICAgICB0aGlzLnN0cmluZ1ZhbHVlID0gdGhpcy5fc2F2ZVZhbHVlID0gdGhpcy5fc2F2ZVZhbHVlV2l0aFJldml2ZXI7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5udW1iZXJBc1N0cmluZykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMubnVtYmVyVmFsdWUgPSB0aGlzLnN0cmluZ1ZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudGFwQ2hhaW4gPSAoY2h1bmspID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGlmICh0aGlzW2NodW5rLm5hbWVdKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpc1tjaHVuay5uYW1lXShjaHVuay52YWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLmRvbmUpIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9uZTtcbiAgICB9O1xuXG4gICAgdGhpcy5zdHJpbmdWYWx1ZSA9IHRoaXMuX3NhdmVWYWx1ZTtcbiAgfVxuXG4gIGNvbm5lY3RUbyhzdHJlYW06IGFueSkge1xuICAgIHN0cmVhbS5vbihcImRhdGFcIiwgKGNodW5rOiBhbnkpID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGlmICh0aGlzW2NodW5rLm5hbWVdKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpc1tjaHVuay5uYW1lXShjaHVuay52YWx1ZSk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHRoaXMuZG9uZSkgdGhpcy5lbWl0KFwiZG9uZVwiLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldCBkZXB0aCgpIHtcbiAgICByZXR1cm4gKHRoaXMuc3RhY2subGVuZ3RoID4+IDEpICsgKHRoaXMuZG9uZSA/IDAgOiAxKTtcbiAgfVxuXG4gIGdldCBwYXRoKCkge1xuICAgIGNvbnN0IHBhdGg6IGFueVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YWNrLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLnN0YWNrW2kgKyAxXTtcbiAgICAgIHBhdGgucHVzaChrZXkgPT09IG51bGwgPyB0aGlzLnN0YWNrW2ldLmxlbmd0aCA6IGtleSk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgZHJvcFRvTGV2ZWwobGV2ZWw6IGFueSkge1xuICAgIGlmIChsZXZlbCA8IHRoaXMuZGVwdGgpIHtcbiAgICAgIGlmIChsZXZlbCA+IDApIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSAobGV2ZWwgLSAxKSA8PCAxO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0YWNrW2luZGV4XTtcbiAgICAgICAgdGhpcy5rZXkgPSB0aGlzLnN0YWNrW2luZGV4ICsgMV07XG4gICAgICAgIHRoaXMuc3RhY2suc3BsaWNlKGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5rZXkgPSBudWxsO1xuICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNvbnN1bWUoY2h1bms6IGFueSkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0aGlzW2NodW5rLm5hbWVdICYmIHRoaXNbY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAga2V5VmFsdWUodmFsdWU6IGFueSkge1xuICAgIHRoaXMua2V5ID0gdmFsdWU7XG4gIH1cblxuICAvL3N0cmluZ1ZhbHVlKCkgLSBhbGlhc2VkIGJlbG93IHRvIF9zYXZlVmFsdWUoKVxuXG4gIG51bWJlclZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLl9zYXZlVmFsdWUocGFyc2VGbG9hdCh2YWx1ZSkpO1xuICB9XG4gIG51bGxWYWx1ZSgpIHtcbiAgICB0aGlzLl9zYXZlVmFsdWUobnVsbCk7XG4gIH1cbiAgdHJ1ZVZhbHVlKCkge1xuICAgIHRoaXMuX3NhdmVWYWx1ZSh0cnVlKTtcbiAgfVxuICBmYWxzZVZhbHVlKCkge1xuICAgIHRoaXMuX3NhdmVWYWx1ZShmYWxzZSk7XG4gIH1cblxuICBzdGFydE9iamVjdCgpIHtcbiAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuY3VycmVudCwgdGhpcy5rZXkpO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSBuZXcgT2JqZWN0KCk7XG4gICAgdGhpcy5rZXkgPSBudWxsO1xuICB9XG5cbiAgZW5kT2JqZWN0KCkge1xuICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmtleSA9IHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5fc2F2ZVZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBzdGFydEFycmF5KCkge1xuICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5jdXJyZW50LCB0aGlzLmtleSk7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudCA9IFtdO1xuICAgIHRoaXMua2V5ID0gbnVsbDtcbiAgfVxuXG4gIGVuZEFycmF5KCkge1xuICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmtleSA9IHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5fc2F2ZVZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBfc2F2ZVZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY3VycmVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRoaXMuY3VycmVudC5wdXNoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VycmVudFt0aGlzLmtleV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5rZXkgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfc2F2ZVZhbHVlV2l0aFJldml2ZXIodmFsdWU6IGFueSkge1xuICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucmV2aXZlcihcIlwiLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMucmV2aXZlcihcIlwiICsgdGhpcy5jdXJyZW50Lmxlbmd0aCwgdmFsdWUpO1xuICAgICAgICB0aGlzLmN1cnJlbnQucHVzaCh2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuY3VycmVudFt0aGlzLmN1cnJlbnQubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5yZXZpdmVyKHRoaXMua2V5LCB2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50W3RoaXMua2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc3RyZWFtQmFzZSA9XG4gICh7IHB1c2gsIGZpcnN0LCBsZXZlbCB9OiBhbnkpID0+XG4gIChvcHRpb25zID0ge30gYXMgYW55KSA9PiB7XG4gICAgY29uc3QgeyBvYmplY3RGaWx0ZXIsIGluY2x1ZGVVbmRlY2lkZWQgfSA9IG9wdGlvbnM7XG4gICAgbGV0IGFzbSA9IG5ldyBBc3NlbWJsZXIob3B0aW9ucykgYXMgYW55LFxuICAgICAgc3RhdGUgPSBmaXJzdCA/IFwiZmlyc3RcIiA6IFwiY2hlY2tcIixcbiAgICAgIHNhdmVkQXNtID0gbnVsbCBhcyBhbnk7XG5cbiAgICBpZiAodHlwZW9mIG9iamVjdEZpbHRlciAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIG5vIG9iamVjdCBmaWx0ZXIgKyBubyBmaXJzdCBjaGVja1xuICAgICAgaWYgKHN0YXRlID09PSBcImNoZWNrXCIpXG4gICAgICAgIHJldHVybiAoY2h1bms6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChhc21bY2h1bmsubmFtZV0pIHtcbiAgICAgICAgICAgIGFzbVtjaHVuay5uYW1lXShjaHVuay52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoYXNtLmRlcHRoID09PSBsZXZlbCkge1xuICAgICAgICAgICAgICByZXR1cm4gcHVzaChhc20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgICAgfTtcbiAgICAgIC8vIG5vIG9iamVjdCBmaWx0ZXJcbiAgICAgIHJldHVybiAoY2h1bms6IGFueSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgY2FzZSBcImZpcnN0XCI6XG4gICAgICAgICAgICBmaXJzdChjaHVuayk7XG4gICAgICAgICAgICBzdGF0ZSA9IFwiYWNjZXB0XCI7XG4gICAgICAgICAgLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgY2FzZSBcImFjY2VwdFwiOlxuICAgICAgICAgICAgaWYgKGFzbVtjaHVuay5uYW1lXSkge1xuICAgICAgICAgICAgICBhc21bY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAgICAgICBpZiAoYXNtLmRlcHRoID09PSBsZXZlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdXNoKGFzbSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub25lO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBvYmplY3QgZmlsdGVyICsgYSBwb3NzaWJsZSBmaXJzdCBjaGVja1xuICAgIHJldHVybiAoY2h1bms6IGFueSkgPT4ge1xuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIFwiZmlyc3RcIjpcbiAgICAgICAgICBmaXJzdChjaHVuayk7XG4gICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICBjYXNlIFwiY2hlY2tcIjpcbiAgICAgICAgICBpZiAoYXNtW2NodW5rLm5hbWVdKSB7XG4gICAgICAgICAgICBhc21bY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0RmlsdGVyKGFzbSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gXCJhY2NlcHRcIjtcbiAgICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHJldHVybiBwdXNoKGFzbSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHJldHVybiBwdXNoKGFzbSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIHN0YXRlID0gXCJyZWplY3RcIjtcbiAgICAgICAgICAgICAgc2F2ZWRBc20gPSBhc207XG4gICAgICAgICAgICAgIGFzbSA9IG5ldyBDb3VudGVyKHNhdmVkQXNtLmRlcHRoKTtcbiAgICAgICAgICAgICAgc2F2ZWRBc20uZHJvcFRvTGV2ZWwobGV2ZWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHJldHVybiBwdXNoKGFzbSwgIWluY2x1ZGVVbmRlY2lkZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFjY2VwdFwiOlxuICAgICAgICAgIGlmIChhc21bY2h1bmsubmFtZV0pIHtcbiAgICAgICAgICAgIGFzbVtjaHVuay5uYW1lXShjaHVuay52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoYXNtLmRlcHRoID09PSBsZXZlbCkge1xuICAgICAgICAgICAgICBzdGF0ZSA9IFwiY2hlY2tcIjtcbiAgICAgICAgICAgICAgcmV0dXJuIHB1c2goYXNtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJyZWplY3RcIjpcbiAgICAgICAgICBpZiAoYXNtW2NodW5rLm5hbWVdKSB7XG4gICAgICAgICAgICBhc21bY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgICAgICAgIGFzbSA9IHNhdmVkQXNtO1xuICAgICAgICAgICAgICBzYXZlZEFzbSA9IG51bGw7XG4gICAgICAgICAgICAgIHJldHVybiBwdXNoKGFzbSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfTtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IFN0cmVhbUFycmF5ID0gKG9wdGlvbnM/OiBhbnkpID0+IHtcbiAgbGV0IGtleSA9IDA7XG4gIHJldHVybiBzdHJlYW1CYXNlKHtcbiAgICBsZXZlbDogMSxcblxuICAgIGZpcnN0KGNodW5rOiBhbnkpIHtcbiAgICAgIGlmIChjaHVuay5uYW1lICE9PSBcInN0YXJ0QXJyYXlcIikgdGhyb3cgbmV3IEVycm9yKFwiVG9wLWxldmVsIG9iamVjdCBzaG91bGQgYmUgYW4gYXJyYXkuXCIpO1xuICAgIH0sXG5cbiAgICBwdXNoKGFzbTogYW55LCBkaXNjYXJkOiBhbnkpIHtcbiAgICAgIGlmIChhc20uY3VycmVudC5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGRpc2NhcmQpIHtcbiAgICAgICAgICArK2tleTtcbiAgICAgICAgICBhc20uY3VycmVudC5wb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBrZXk6IGtleSsrLCB2YWx1ZTogYXNtLmN1cnJlbnQucG9wKCkgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfSxcbiAgfSkob3B0aW9ucyk7XG59O1xuIiwgImltcG9ydCB7IExpc3QsIE1lbnVCYXJFeHRyYSwgSWNvbiwgb3BlbiwgTGF1bmNoVHlwZSwgZW52aXJvbm1lbnQsIEFjdGlvblBhbmVsLCBBY3Rpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCBvcyBmcm9tIFwibm9kZTpvc1wiO1xuaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVByb21pc2UsIFByb21pc2VPcHRpb25zIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIi4vc2hvd0ZhaWx1cmVUb2FzdFwiO1xuaW1wb3J0IHsgYmFzZUV4ZWN1dGVTUUwsIFBlcm1pc3Npb25FcnJvciwgaXNQZXJtaXNzaW9uRXJyb3IgfSBmcm9tIFwiLi9zcWwtdXRpbHNcIjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhIHF1ZXJ5IG9uIGEgbG9jYWwgU1FMIGRhdGFiYXNlIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgQXN5bmNTdGF0ZX0gY29ycmVzcG9uZGluZyB0byB0aGUgcXVlcnkgb2YgdGhlIGNvbW1hbmQuIFRoZSBsYXN0IHZhbHVlIHdpbGwgYmUga2VwdCBiZXR3ZWVuIGNvbW1hbmQgcnVucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyB1c2VTUUwgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqIGltcG9ydCB7IHJlc29sdmUgfSBmcm9tIFwicGF0aFwiO1xuICogaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gXCJvc1wiO1xuICpcbiAqIGNvbnN0IE5PVEVTX0RCID0gcmVzb2x2ZShob21lZGlyKCksIFwiTGlicmFyeS9Hcm91cCBDb250YWluZXJzL2dyb3VwLmNvbS5hcHBsZS5ub3Rlcy9Ob3RlU3RvcmUuc3FsaXRlXCIpO1xuICogY29uc3Qgbm90ZXNRdWVyeSA9IGBTRUxFQ1QgaWQsIHRpdGxlIEZST00gLi4uYDtcbiAqIHR5cGUgTm90ZUl0ZW0gPSB7XG4gKiAgIGlkOiBzdHJpbmc7XG4gKiAgIHRpdGxlOiBzdHJpbmc7XG4gKiB9O1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhLCBwZXJtaXNzaW9uVmlldyB9ID0gdXNlU1FMPE5vdGVJdGVtPihOT1RFU19EQiwgbm90ZXNRdWVyeSk7XG4gKlxuICogICBpZiAocGVybWlzc2lvblZpZXcpIHtcbiAqICAgICByZXR1cm4gcGVybWlzc2lvblZpZXc7XG4gKiAgIH1cbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9PlxuICogICAgICAgeyhkYXRhIHx8IFtdKS5tYXAoKGl0ZW0pID0+IChcbiAqICAgICAgICAgPExpc3QuSXRlbSBrZXk9e2l0ZW0uaWR9IHRpdGxlPXtpdGVtLnRpdGxlfSAvPlxuICogICAgICAgKSl9XG4gKiAgICAgPC9MaXN0PlxuICogICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTUUw8VCA9IHVua25vd24+KFxuICBkYXRhYmFzZVBhdGg6IHN0cmluZyxcbiAgcXVlcnk6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICAvKiogQSBzdHJpbmcgZXhwbGFpbmluZyB3aHkgdGhlIGV4dGVuc2lvbiBuZWVkcyBmdWxsIGRpc2sgYWNjZXNzLiBGb3IgZXhhbXBsZSwgdGhlIEFwcGxlIE5vdGVzIGV4dGVuc2lvbiB1c2VzIGBcIlRoaXMgaXMgcmVxdWlyZWQgdG8gc2VhcmNoIHlvdXIgQXBwbGUgTm90ZXMuXCJgLiBXaGlsZSBpdCBpcyBvcHRpb25hbCwgd2UgcmVjb21tZW5kIHNldHRpbmcgaXQgdG8gaGVscCB1c2VycyB1bmRlcnN0YW5kLiAqL1xuICAgIHBlcm1pc3Npb25QcmltaW5nPzogc3RyaW5nO1xuICB9ICYgT21pdDxQcm9taXNlT3B0aW9uczwoZGF0YWJhc2U6IHN0cmluZywgcXVlcnk6IHN0cmluZykgPT4gUHJvbWlzZTxUW10+PiwgXCJhYm9ydGFibGVcIj4sXG4pIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBjb25zdCB7IHBlcm1pc3Npb25QcmltaW5nLCAuLi51c2VQcm9taXNlT3B0aW9ucyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICBjb25zdCBbcGVybWlzc2lvblZpZXcsIHNldFBlcm1pc3Npb25WaWV3XSA9IHVzZVN0YXRlPFJlYWN0LkpTWC5FbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGxhdGVzdE9wdGlvbnMgPSB1c2VMYXRlc3Qob3B0aW9ucyB8fCB7fSk7XG4gIGNvbnN0IGFib3J0YWJsZSA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXI+KG51bGwpO1xuXG4gIGNvbnN0IGhhbmRsZUVycm9yID0gdXNlQ2FsbGJhY2soXG4gICAgKF9lcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoX2Vycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yID1cbiAgICAgICAgX2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgX2Vycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJhdXRob3JpemF0aW9uIGRlbmllZFwiKVxuICAgICAgICAgID8gbmV3IFBlcm1pc3Npb25FcnJvcihcIllvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyB0aGUgZGF0YWJhc2UuXCIpXG4gICAgICAgICAgOiAoX2Vycm9yIGFzIEVycm9yKTtcblxuICAgICAgaWYgKGlzUGVybWlzc2lvbkVycm9yKGVycm9yKSkge1xuICAgICAgICBzZXRQZXJtaXNzaW9uVmlldyg8UGVybWlzc2lvbkVycm9yU2NyZWVuIHByaW1pbmc9e2xhdGVzdE9wdGlvbnMuY3VycmVudC5wZXJtaXNzaW9uUHJpbWluZ30gLz4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxhdGVzdE9wdGlvbnMuY3VycmVudC5vbkVycm9yKSB7XG4gICAgICAgICAgbGF0ZXN0T3B0aW9ucy5jdXJyZW50Lm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChlbnZpcm9ubWVudC5sYXVuY2hUeXBlICE9PSBMYXVuY2hUeXBlLkJhY2tncm91bmQpIHtcbiAgICAgICAgICAgIHNob3dGYWlsdXJlVG9hc3QoZXJyb3IsIHtcbiAgICAgICAgICAgICAgdGl0bGU6IFwiQ2Fubm90IHF1ZXJ5IHRoZSBkYXRhXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFtsYXRlc3RPcHRpb25zXSxcbiAgKTtcblxuICBjb25zdCBmbiA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghZXhpc3RzU3luYyhkYXRhYmFzZVBhdGgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZGF0YWJhc2UgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzeW5jIChkYXRhYmFzZVBhdGg6IHN0cmluZywgcXVlcnk6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgYWJvcnRTaWduYWwgPSBhYm9ydGFibGUuY3VycmVudD8uc2lnbmFsO1xuICAgICAgcmV0dXJuIGJhc2VFeGVjdXRlU1FMPFQ+KGRhdGFiYXNlUGF0aCwgcXVlcnksIHsgc2lnbmFsOiBhYm9ydFNpZ25hbCB9KTtcbiAgICB9O1xuICB9LCBbZGF0YWJhc2VQYXRoXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi51c2VQcm9taXNlKGZuLCBbZGF0YWJhc2VQYXRoLCBxdWVyeV0sIHsgLi4udXNlUHJvbWlzZU9wdGlvbnMsIG9uRXJyb3I6IGhhbmRsZUVycm9yIH0pLFxuICAgIHBlcm1pc3Npb25WaWV3LFxuICB9O1xufVxuXG5mdW5jdGlvbiBQZXJtaXNzaW9uRXJyb3JTY3JlZW4ocHJvcHM6IHsgcHJpbWluZz86IHN0cmluZyB9KSB7XG4gIGNvbnN0IG1hY29zVmVudHVyYUFuZExhdGVyID0gcGFyc2VJbnQob3MucmVsZWFzZSgpLnNwbGl0KFwiLlwiKVswXSkgPj0gMjI7XG4gIGNvbnN0IHByZWZlcmVuY2VzU3RyaW5nID0gbWFjb3NWZW50dXJhQW5kTGF0ZXIgPyBcIlNldHRpbmdzXCIgOiBcIlByZWZlcmVuY2VzXCI7XG5cbiAgY29uc3QgYWN0aW9uID0gbWFjb3NWZW50dXJhQW5kTGF0ZXJcbiAgICA/IHtcbiAgICAgICAgdGl0bGU6IFwiT3BlbiBTeXN0ZW0gU2V0dGluZ3MgLT4gUHJpdmFjeVwiLFxuICAgICAgICB0YXJnZXQ6IFwieC1hcHBsZS5zeXN0ZW1wcmVmZXJlbmNlczpjb20uYXBwbGUucHJlZmVyZW5jZS5zZWN1cml0eT9Qcml2YWN5X0FsbEZpbGVzXCIsXG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIHRpdGxlOiBcIk9wZW4gU3lzdGVtIFByZWZlcmVuY2VzIC0+IFNlY3VyaXR5XCIsXG4gICAgICAgIHRhcmdldDogXCJ4LWFwcGxlLnN5c3RlbXByZWZlcmVuY2VzOmNvbS5hcHBsZS5wcmVmZXJlbmNlLnNlY3VyaXR5P1ByaXZhY3lfQWxsRmlsZXNcIixcbiAgICAgIH07XG5cbiAgaWYgKGVudmlyb25tZW50LmNvbW1hbmRNb2RlID09PSBcIm1lbnUtYmFyXCIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPE1lbnVCYXJFeHRyYSBpY29uPXtJY29uLldhcm5pbmd9IHRpdGxlPXtlbnZpcm9ubWVudC5jb21tYW5kTmFtZX0+XG4gICAgICAgIDxNZW51QmFyRXh0cmEuSXRlbVxuICAgICAgICAgIHRpdGxlPVwiUmF5Y2FzdCBuZWVkcyBmdWxsIGRpc2sgYWNjZXNzXCJcbiAgICAgICAgICB0b29sdGlwPXtgWW91IGNhbiByZXZlcnQgdGhpcyBhY2Nlc3MgaW4gJHtwcmVmZXJlbmNlc1N0cmluZ30gd2hlbmV2ZXIgeW91IHdhbnRgfVxuICAgICAgICAvPlxuICAgICAgICB7cHJvcHMucHJpbWluZyA/IChcbiAgICAgICAgICA8TWVudUJhckV4dHJhLkl0ZW1cbiAgICAgICAgICAgIHRpdGxlPXtwcm9wcy5wcmltaW5nfVxuICAgICAgICAgICAgdG9vbHRpcD17YFlvdSBjYW4gcmV2ZXJ0IHRoaXMgYWNjZXNzIGluICR7cHJlZmVyZW5jZXNTdHJpbmd9IHdoZW5ldmVyIHlvdSB3YW50YH1cbiAgICAgICAgICAvPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPE1lbnVCYXJFeHRyYS5TZXBhcmF0b3IgLz5cbiAgICAgICAgPE1lbnVCYXJFeHRyYS5JdGVtIHRpdGxlPXthY3Rpb24udGl0bGV9IG9uQWN0aW9uPXsoKSA9PiBvcGVuKGFjdGlvbi50YXJnZXQpfSAvPlxuICAgICAgPC9NZW51QmFyRXh0cmE+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPExpc3Q+XG4gICAgICA8TGlzdC5FbXB0eVZpZXdcbiAgICAgICAgaWNvbj17e1xuICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgbGlnaHQ6IFwiaHR0cHM6Ly9yYXljYXN0LmNvbS91cGxvYWRzL2V4dGVuc2lvbnMtdXRpbHMtc2VjdXJpdHktcGVybWlzc2lvbnMtbGlnaHQucG5nXCIsXG4gICAgICAgICAgICBkYXJrOiBcImh0dHBzOi8vcmF5Y2FzdC5jb20vdXBsb2Fkcy9leHRlbnNpb25zLXV0aWxzLXNlY3VyaXR5LXBlcm1pc3Npb25zLWRhcmsucG5nXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfX1cbiAgICAgICAgdGl0bGU9XCJSYXljYXN0IG5lZWRzIGZ1bGwgZGlzayBhY2Nlc3MuXCJcbiAgICAgICAgZGVzY3JpcHRpb249e2Ake1xuICAgICAgICAgIHByb3BzLnByaW1pbmcgPyBwcm9wcy5wcmltaW5nICsgXCJcXG5cIiA6IFwiXCJcbiAgICAgICAgfVlvdSBjYW4gcmV2ZXJ0IHRoaXMgYWNjZXNzIGluICR7cHJlZmVyZW5jZXNTdHJpbmd9IHdoZW5ldmVyIHlvdSB3YW50LmB9XG4gICAgICAgIGFjdGlvbnM9e1xuICAgICAgICAgIDxBY3Rpb25QYW5lbD5cbiAgICAgICAgICAgIDxBY3Rpb24uT3BlbiB7Li4uYWN0aW9ufSAvPlxuICAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gICAgICAgIH1cbiAgICAgIC8+XG4gICAgPC9MaXN0PlxuICApO1xufVxuIiwgImltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0IHsgY29weUZpbGUsIG1rZGlyLCB3cml0ZUZpbGUgfSBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xuaW1wb3J0IG9zIGZyb20gXCJub2RlOm9zXCI7XG5pbXBvcnQgY2hpbGRQcm9jZXNzIGZyb20gXCJub2RlOmNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCB7IGdldFNwYXduZWRQcm9taXNlLCBnZXRTcGF3bmVkUmVzdWx0IH0gZnJvbSBcIi4vZXhlYy11dGlsc1wiO1xuaW1wb3J0IHsgaGFzaCB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJQZXJtaXNzaW9uRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQZXJtaXNzaW9uRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBQZXJtaXNzaW9uRXJyb3Ige1xuICByZXR1cm4gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSBcIlBlcm1pc3Npb25FcnJvclwiO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmFzZUV4ZWN1dGVTUUw8VCA9IHVua25vd24+KFxuICBkYXRhYmFzZVBhdGg6IHN0cmluZyxcbiAgcXVlcnk6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbDtcbiAgfSxcbik6IFByb21pc2U8VFtdPiB7XG4gIGlmICghZXhpc3RzU3luYyhkYXRhYmFzZVBhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRhdGFiYXNlIGRvZXMgbm90IGV4aXN0XCIpO1xuICB9XG5cbiAgbGV0IHNxbGl0ZTM6IHR5cGVvZiBpbXBvcnQoXCJub2RlOnNxbGl0ZVwiKTtcbiAgdHJ5IHtcbiAgICAvLyB0aGlzIGlzIGEgYml0IHVnbHkgYnV0IHdlIGNhbid0IGRpcmVjdGx5IGltcG9ydCBcIm5vZGU6c3FsaXRlXCIgaGVyZSBiZWNhdXNlIHBhcmNlbCB3aWxsIGhvaXN0IGl0IGFueXdheSBhbmQgaXQgd2lsbCBicmVhayB3aGVuIGl0J3Mgbm90IGF2YWlsYWJsZVxuICAgIGNvbnN0IGR5bmFtaWNJbXBvcnQgPSAobW9kdWxlOiBzdHJpbmcpID0+IGltcG9ydChtb2R1bGUpO1xuICAgIHNxbGl0ZTMgPSBhd2FpdCBkeW5hbWljSW1wb3J0KFwibm9kZTpzcWxpdGVcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gSWYgc3FsaXRlMyBpcyBub3QgYXZhaWxhYmxlLCB3ZSBmYWxsYmFjayB0byB1c2luZyB0aGUgc3FsaXRlMyBDTEkgKGF2YWlsYWJsZSBvbiBtYWNPUyBhbmQgTGludXggYnkgZGVmYXVsdCkuXG4gICAgcmV0dXJuIHNxbGl0ZUZhbGxiYWNrPFQ+KGRhdGFiYXNlUGF0aCwgcXVlcnksIG9wdGlvbnMpO1xuICB9XG5cbiAgbGV0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2VTeW5jKGRhdGFiYXNlUGF0aCwgeyBvcGVuOiBmYWxzZSwgcmVhZE9ubHk6IHRydWUgfSk7XG5cbiAgY29uc3QgYWJvcnRTaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG5cbiAgdHJ5IHtcbiAgICBkYi5vcGVuKCk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UubWF0Y2goXCIoNSlcIikgfHwgZXJyb3IubWVzc2FnZS5tYXRjaChcIigxNClcIikpIHtcbiAgICAgIC8vIFRoYXQgbWVhbnMgdGhhdCB0aGUgREIgaXMgYnVzeSBiZWNhdXNlIG9mIGFub3RoZXIgYXBwIGlzIGxvY2tpbmcgaXRcbiAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIENocm9tZSBvciBBcmMgaXMgb3BlbmVkOiB0aGV5IGxvY2sgdGhlIEhpc3RvcnkgZGIuXG4gICAgICAvLyBBcyBhbiB1Z2x5IHdvcmthcm91bmQsIHdlIGR1cGxpY2F0ZSB0aGUgZmlsZSBhbmQgcmVhZCB0aGF0IGluc3RlYWRcbiAgICAgIC8vICh3aXRoIHZmcyB1bml4IC0gbm9uZSB0byBqdXN0IG5vdCBjYXJlIGFib3V0IGxvY2tzKVxuICAgICAgbGV0IHdvcmthcm91bmRDb3BpZWREYjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgaWYgKCF3b3JrYXJvdW5kQ29waWVkRGIpIHtcbiAgICAgICAgY29uc3QgdGVtcEZvbGRlciA9IHBhdGguam9pbihvcy50bXBkaXIoKSwgXCJ1c2VTUUxcIiwgaGFzaChkYXRhYmFzZVBhdGgpKTtcbiAgICAgICAgYXdhaXQgbWtkaXIodGVtcEZvbGRlciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICAgIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG5cbiAgICAgICAgd29ya2Fyb3VuZENvcGllZERiID0gcGF0aC5qb2luKHRlbXBGb2xkZXIsIFwiZGIuZGJcIik7XG4gICAgICAgIGF3YWl0IGNvcHlGaWxlKGRhdGFiYXNlUGF0aCwgd29ya2Fyb3VuZENvcGllZERiKTtcblxuICAgICAgICBhd2FpdCB3cml0ZUZpbGUod29ya2Fyb3VuZENvcGllZERiICsgXCItc2htXCIsIFwiXCIpO1xuICAgICAgICBhd2FpdCB3cml0ZUZpbGUod29ya2Fyb3VuZENvcGllZERiICsgXCItd2FsXCIsIFwiXCIpO1xuXG4gICAgICAgIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG4gICAgICB9XG5cbiAgICAgIGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2VTeW5jKHdvcmthcm91bmRDb3BpZWREYiwgeyBvcGVuOiBmYWxzZSwgcmVhZE9ubHk6IHRydWUgfSk7XG4gICAgICBkYi5vcGVuKCk7XG4gICAgICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN0YXRlbWVudCA9IGRiLnByZXBhcmUocXVlcnkpO1xuICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHN0YXRlbWVudC5hbGwoKTtcblxuICBkYi5jbG9zZSgpO1xuXG4gIHJldHVybiByZXN1bHQgYXMgVFtdO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzcWxpdGVGYWxsYmFjazxUID0gdW5rbm93bj4oXG4gIGRhdGFiYXNlUGF0aDogc3RyaW5nLFxuICBxdWVyeTogc3RyaW5nLFxuICBvcHRpb25zPzoge1xuICAgIHNpZ25hbD86IEFib3J0U2lnbmFsO1xuICB9LFxuKTogUHJvbWlzZTxUW10+IHtcbiAgY29uc3QgYWJvcnRTaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG5cbiAgbGV0IHNwYXduZWQgPSBjaGlsZFByb2Nlc3Muc3Bhd24oXCJzcWxpdGUzXCIsIFtcIi0tanNvblwiLCBcIi0tcmVhZG9ubHlcIiwgZGF0YWJhc2VQYXRoLCBxdWVyeV0sIHsgc2lnbmFsOiBhYm9ydFNpZ25hbCB9KTtcbiAgbGV0IHNwYXduZWRQcm9taXNlID0gZ2V0U3Bhd25lZFByb21pc2Uoc3Bhd25lZCk7XG4gIGxldCBbeyBlcnJvciwgZXhpdENvZGUsIHNpZ25hbCB9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdF0gPSBhd2FpdCBnZXRTcGF3bmVkUmVzdWx0PHN0cmluZz4oXG4gICAgc3Bhd25lZCxcbiAgICB7IGVuY29kaW5nOiBcInV0Zi04XCIgfSxcbiAgICBzcGF3bmVkUHJvbWlzZSxcbiAgKTtcbiAgY2hlY2tBYm9ydGVkKGFib3J0U2lnbmFsKTtcblxuICBpZiAoc3RkZXJyUmVzdWx0Lm1hdGNoKFwiKDUpXCIpIHx8IHN0ZGVyclJlc3VsdC5tYXRjaChcIigxNClcIikpIHtcbiAgICAvLyBUaGF0IG1lYW5zIHRoYXQgdGhlIERCIGlzIGJ1c3kgYmVjYXVzZSBvZiBhbm90aGVyIGFwcCBpcyBsb2NraW5nIGl0XG4gICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gQ2hyb21lIG9yIEFyYyBpcyBvcGVuZWQ6IHRoZXkgbG9jayB0aGUgSGlzdG9yeSBkYi5cbiAgICAvLyBBcyBhbiB1Z2x5IHdvcmthcm91bmQsIHdlIGR1cGxpY2F0ZSB0aGUgZmlsZSBhbmQgcmVhZCB0aGF0IGluc3RlYWRcbiAgICAvLyAod2l0aCB2ZnMgdW5peCAtIG5vbmUgdG8ganVzdCBub3QgY2FyZSBhYm91dCBsb2NrcylcbiAgICBsZXQgd29ya2Fyb3VuZENvcGllZERiOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKCF3b3JrYXJvdW5kQ29waWVkRGIpIHtcbiAgICAgIGNvbnN0IHRlbXBGb2xkZXIgPSBwYXRoLmpvaW4ob3MudG1wZGlyKCksIFwidXNlU1FMXCIsIGhhc2goZGF0YWJhc2VQYXRoKSk7XG4gICAgICBhd2FpdCBta2Rpcih0ZW1wRm9sZGVyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG5cbiAgICAgIHdvcmthcm91bmRDb3BpZWREYiA9IHBhdGguam9pbih0ZW1wRm9sZGVyLCBcImRiLmRiXCIpO1xuICAgICAgYXdhaXQgY29weUZpbGUoZGF0YWJhc2VQYXRoLCB3b3JrYXJvdW5kQ29waWVkRGIpO1xuXG4gICAgICBhd2FpdCB3cml0ZUZpbGUod29ya2Fyb3VuZENvcGllZERiICsgXCItc2htXCIsIFwiXCIpO1xuICAgICAgYXdhaXQgd3JpdGVGaWxlKHdvcmthcm91bmRDb3BpZWREYiArIFwiLXdhbFwiLCBcIlwiKTtcblxuICAgICAgY2hlY2tBYm9ydGVkKGFib3J0U2lnbmFsKTtcbiAgICB9XG5cbiAgICBzcGF3bmVkID0gY2hpbGRQcm9jZXNzLnNwYXduKFwic3FsaXRlM1wiLCBbXCItLWpzb25cIiwgXCItLXJlYWRvbmx5XCIsIFwiLS12ZnNcIiwgXCJ1bml4LW5vbmVcIiwgd29ya2Fyb3VuZENvcGllZERiLCBxdWVyeV0sIHtcbiAgICAgIHNpZ25hbDogYWJvcnRTaWduYWwsXG4gICAgfSk7XG4gICAgc3Bhd25lZFByb21pc2UgPSBnZXRTcGF3bmVkUHJvbWlzZShzcGF3bmVkKTtcbiAgICBbeyBlcnJvciwgZXhpdENvZGUsIHNpZ25hbCB9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdF0gPSBhd2FpdCBnZXRTcGF3bmVkUmVzdWx0PHN0cmluZz4oXG4gICAgICBzcGF3bmVkLFxuICAgICAgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sXG4gICAgICBzcGF3bmVkUHJvbWlzZSxcbiAgICApO1xuICAgIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG4gIH1cblxuICBpZiAoZXJyb3IgfHwgZXhpdENvZGUgIT09IDAgfHwgc2lnbmFsICE9PSBudWxsKSB7XG4gICAgaWYgKHN0ZGVyclJlc3VsdC5pbmNsdWRlcyhcImF1dGhvcml6YXRpb24gZGVuaWVkXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgUGVybWlzc2lvbkVycm9yKFwiWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBkYXRhYmFzZS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihzdGRlcnJSZXN1bHQgfHwgXCJVbmtub3duIGVycm9yXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBKU09OLnBhcnNlKHN0ZG91dFJlc3VsdC50cmltKCkgfHwgXCJbXVwiKSBhcyBUW107XG59XG5cbmZ1bmN0aW9uIGNoZWNrQWJvcnRlZChzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICBpZiAoc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJhYm9ydGVkXCIpO1xuICAgIGVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIiwgImltcG9ydCB7IEZvcm0gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVJlZiwgU2V0U3RhdGVBY3Rpb24gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuXG4vKipcbiAqIFNob3J0aGFuZHMgZm9yIGNvbW1vbiB2YWxpZGF0aW9uIGNhc2VzXG4gKi9cbmV4cG9ydCBlbnVtIEZvcm1WYWxpZGF0aW9uIHtcbiAgLyoqIFNob3cgYW4gZXJyb3Igd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGl0ZW0gaXMgZW1wdHkgKi9cbiAgUmVxdWlyZWQgPSBcInJlcXVpcmVkXCIsXG59XG5cbnR5cGUgVmFsaWRhdGlvbkVycm9yID0gc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbDtcbnR5cGUgVmFsaWRhdG9yPFZhbHVlVHlwZT4gPSAoKHZhbHVlOiBWYWx1ZVR5cGUgfCB1bmRlZmluZWQpID0+IFZhbGlkYXRpb25FcnJvcikgfCBGb3JtVmFsaWRhdGlvbjtcblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yPFZhbHVlVHlwZT4oXG4gIHZhbGlkYXRpb246IFZhbGlkYXRvcjxWYWx1ZVR5cGU+IHwgdW5kZWZpbmVkLFxuICB2YWx1ZTogVmFsdWVUeXBlIHwgdW5kZWZpbmVkLFxuKTogVmFsaWRhdGlvbkVycm9yIHtcbiAgaWYgKHZhbGlkYXRpb24pIHtcbiAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb24odmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodmFsaWRhdGlvbiA9PT0gRm9ybVZhbGlkYXRpb24uUmVxdWlyZWQpIHtcbiAgICAgIGxldCB2YWx1ZUlzVmFsaWQgPSB0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgIT09IG51bGw7XG4gICAgICBpZiAodmFsdWVJc1ZhbGlkKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgdmFsdWVJc1ZhbGlkID0gdmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICB2YWx1ZUlzVmFsaWQgPSB2YWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgdmFsdWVJc1ZhbGlkID0gdmFsdWUuZ2V0VGltZSgpID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZUlzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIFwiVGhlIGl0ZW0gaXMgcmVxdWlyZWRcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxudHlwZSBWYWxpZGF0aW9uPFQgZXh0ZW5kcyBGb3JtLlZhbHVlcz4gPSB7IFtpZCBpbiBrZXlvZiBUXT86IFZhbGlkYXRvcjxUW2lkXT4gfTtcblxuaW50ZXJmYWNlIEZvcm1Qcm9wczxUIGV4dGVuZHMgRm9ybS5WYWx1ZXM+IHtcbiAgLyoqIEZ1bmN0aW9uIHRvIHBhc3MgdG8gdGhlIGBvblN1Ym1pdGAgcHJvcCBvZiB0aGUgYDxBY3Rpb24uU3VibWl0Rm9ybT5gIGVsZW1lbnQuIEl0IHdyYXBzIHRoZSBpbml0aWFsIGBvblN1Ym1pdGAgYXJndW1lbnQgd2l0aCBzb21lIGdvb2RpZXMgcmVsYXRlZCB0byB0aGUgdmFsaWRhdGlvbi4gKi9cbiAgaGFuZGxlU3VibWl0OiAodmFsdWVzOiBUKSA9PiB2b2lkIHwgYm9vbGVhbiB8IFByb21pc2U8dm9pZCB8IGJvb2xlYW4+O1xuICAvKiogVGhlIHByb3BzIHRoYXQgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIGA8Rm9ybS5JdGVtPmAgZWxlbWVudHMgdG8gaGFuZGxlIHRoZSB2YWxpZGF0aW9ucy4gKi9cbiAgaXRlbVByb3BzOiB7XG4gICAgW2lkIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogUGFydGlhbDxGb3JtLkl0ZW1Qcm9wczxUW2lkXT4+ICYge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICAvKiogRnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBwcm9ncmFtbWF0aWNhbGx5IHNldCB0aGUgdmFsaWRhdGlvbiBvZiBhIHNwZWNpZmljIGZpZWxkLiAqL1xuICBzZXRWYWxpZGF0aW9uRXJyb3I6IChpZDoga2V5b2YgVCwgZXJyb3I6IFZhbGlkYXRpb25FcnJvcikgPT4gdm9pZDtcbiAgLyoqIEZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvZ3JhbW1hdGljYWxseSBzZXQgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWMgZmllbGQuICovXG4gIHNldFZhbHVlOiA8SyBleHRlbmRzIGtleW9mIFQ+KGlkOiBLLCB2YWx1ZTogU2V0U3RhdGVBY3Rpb248VFtLXT4pID0+IHZvaWQ7XG4gIC8qKiBUaGUgY3VycmVudCB2YWx1ZXMgb2YgdGhlIGZvcm0uICovXG4gIHZhbHVlczogVDtcbiAgLyoqIEZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvZ3JhbW1hdGljYWxseSBmb2N1cyBhIHNwZWNpZmljIGZpZWxkLiAqL1xuICBmb2N1czogKGlkOiBrZXlvZiBUKSA9PiB2b2lkO1xuICAvKiogRnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldCB0aGUgdmFsdWVzIG9mIHRoZSBGb3JtLiAqL1xuICByZXNldDogKGluaXRpYWxWYWx1ZXM/OiBQYXJ0aWFsPFQ+KSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIEhvb2sgdGhhdCBwcm92aWRlcyBhIGhpZ2gtbGV2ZWwgaW50ZXJmYWNlIHRvIHdvcmsgd2l0aCBGb3JtcywgYW5kIG1vcmUgcGFydGljdWxhcmx5LCB3aXRoIEZvcm0gdmFsaWRhdGlvbnMuIEl0IGluY29ycG9yYXRlcyBhbGwgdGhlIGdvb2QgcHJhY3RpY2VzIHRvIHByb3ZpZGUgYSBncmVhdCBVc2VyIEV4cGVyaWVuY2UgZm9yIHlvdXIgRm9ybXMuXG4gKlxuICogQHJldHVybnMgYW4gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBuZWNlc3NhcnkgbWV0aG9kcyBhbmQgcHJvcHMgdG8gcHJvdmlkZSBhIGdvb2QgVXNlciBFeHBlcmllbmNlIGluIHlvdXIgRm9ybS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBBY3Rpb24sIEFjdGlvblBhbmVsLCBGb3JtLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlRm9ybSwgRm9ybVZhbGlkYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBpbnRlcmZhY2UgU2lnblVwRm9ybVZhbHVlcyB7XG4gKiAgIG5pY2tuYW1lOiBzdHJpbmc7XG4gKiAgIHBhc3N3b3JkOiBzdHJpbmc7XG4gKiB9XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29tbWFuZCgpIHtcbiAqICAgY29uc3QgeyBoYW5kbGVTdWJtaXQsIGl0ZW1Qcm9wcyB9ID0gdXNlRm9ybTxTaWduVXBGb3JtVmFsdWVzPih7XG4gKiAgICAgb25TdWJtaXQodmFsdWVzKSB7XG4gKiAgICAgICBzaG93VG9hc3QoVG9hc3QuU3R5bGUuU3VjY2VzcywgXCJZYXkhXCIsIGAke3ZhbHVlcy5uaWNrbmFtZX0gYWNjb3VudCBjcmVhdGVkYCk7XG4gKiAgICAgfSxcbiAqICAgICB2YWxpZGF0aW9uOiB7XG4gKiAgICAgICBuaWNrbmFtZTogRm9ybVZhbGlkYXRpb24uUmVxdWlyZWQsXG4gKiAgICAgICBwYXNzd29yZDogKHZhbHVlKSA9PiB7XG4gKiAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPCA4KSB7XG4gKiAgICAgICAgICAgcmV0dXJuIFwiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IHN5bWJvbHNcIjtcbiAqICAgICAgICAgfSBlbHNlIGlmICghdmFsdWUpIHtcbiAqICAgICAgICAgICByZXR1cm4gXCJUaGUgaXRlbSBpcyByZXF1aXJlZFwiO1xuICogICAgICAgICB9XG4gKiAgICAgICB9LFxuICogICAgIH0sXG4gKiAgIH0pO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8Rm9ybVxuICogICAgICAgYWN0aW9ucz17XG4gKiAgICAgICAgIDxBY3Rpb25QYW5lbD5cbiAqICAgICAgICAgICA8QWN0aW9uLlN1Ym1pdEZvcm0gdGl0bGU9XCJTdWJtaXRcIiBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSAvPlxuICogICAgICAgICA8L0FjdGlvblBhbmVsPlxuICogICAgICAgfVxuICogICAgID5cbiAqICAgICAgIDxGb3JtLlRleHRGaWVsZCB0aXRsZT1cIk5pY2tuYW1lXCIgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIG5pY2tuYW1lXCIgey4uLml0ZW1Qcm9wcy5uaWNrbmFtZX0gLz5cbiAqICAgICAgIDxGb3JtLlBhc3N3b3JkRmllbGRcbiAqICAgICAgICAgdGl0bGU9XCJQYXNzd29yZFwiXG4gKiAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgcGFzc3dvcmQgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmdcIlxuICogICAgICAgICB7Li4uaXRlbVByb3BzLnBhc3N3b3JkfVxuICogICAgICAgLz5cbiAqICAgICA8L0Zvcm0+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm08VCBleHRlbmRzIEZvcm0uVmFsdWVzPihwcm9wczoge1xuICAvKiogQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZCBhbmQgYWxsIHZhbGlkYXRpb25zIHBhc3MuICovXG4gIG9uU3VibWl0OiAodmFsdWVzOiBUKSA9PiB2b2lkIHwgYm9vbGVhbiB8IFByb21pc2U8dm9pZCB8IGJvb2xlYW4+O1xuICAvKiogVGhlIGluaXRpYWwgdmFsdWVzIHRvIHNldCB3aGVuIHRoZSBGb3JtIGlzIGZpcnN0IHJlbmRlcmVkLiAqL1xuICBpbml0aWFsVmFsdWVzPzogUGFydGlhbDxUPjtcbiAgLyoqIFRoZSB2YWxpZGF0aW9uIHJ1bGVzIGZvciB0aGUgRm9ybS4gQSB2YWxpZGF0aW9uIGZvciBhIEZvcm0gaXRlbSBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGl0ZW0gYXMgYW4gYXJndW1lbnQgYW5kIG11c3QgcmV0dXJuIGEgc3RyaW5nIHdoZW4gdGhlIHZhbGlkYXRpb24gaXMgZmFpbGluZy5cbiAgICpcbiAgICogVGhlcmUgYXJlIGFsc28gc29tZSBzaG9ydGhhbmRzIGZvciBjb21tb24gY2FzZXMsIHNlZSB7QGxpbmsgRm9ybVZhbGlkYXRpb259LlxuICAgKiAqL1xuICB2YWxpZGF0aW9uPzogVmFsaWRhdGlvbjxUPjtcbn0pOiBGb3JtUHJvcHM8VD4ge1xuICBjb25zdCB7IG9uU3VibWl0OiBfb25TdWJtaXQsIHZhbGlkYXRpb24sIGluaXRpYWxWYWx1ZXMgPSB7fSB9ID0gcHJvcHM7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBpdCdzIGZpbmUgaWYgd2UgZG9uJ3Qgc3BlY2lmeSBhbGwgdGhlIHZhbHVlc1xuICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGU8VD4oaW5pdGlhbFZhbHVlcyk7XG4gIGNvbnN0IFtlcnJvcnMsIHNldEVycm9yc10gPSB1c2VTdGF0ZTx7IFtpZCBpbiBrZXlvZiBUXT86IFZhbGlkYXRpb25FcnJvciB9Pih7fSk7XG4gIGNvbnN0IHJlZnMgPSB1c2VSZWY8eyBbaWQgaW4ga2V5b2YgVF0/OiBGb3JtLkl0ZW1SZWZlcmVuY2UgfT4oe30pO1xuXG4gIGNvbnN0IGxhdGVzdFZhbGlkYXRpb24gPSB1c2VMYXRlc3Q8VmFsaWRhdGlvbjxUPj4odmFsaWRhdGlvbiB8fCB7fSk7XG4gIGNvbnN0IGxhdGVzdE9uU3VibWl0ID0gdXNlTGF0ZXN0KF9vblN1Ym1pdCk7XG5cbiAgY29uc3QgZm9jdXMgPSB1c2VDYWxsYmFjayhcbiAgICAoaWQ6IGtleW9mIFQpID0+IHtcbiAgICAgIHJlZnMuY3VycmVudFtpZF0/LmZvY3VzKCk7XG4gICAgfSxcbiAgICBbcmVmc10sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHZhbHVlczogVCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgICAgbGV0IHZhbGlkYXRpb25FcnJvcnM6IGZhbHNlIHwgeyBba2V5IGluIGtleW9mIFRdPzogVmFsaWRhdGlvbkVycm9yIH0gPSBmYWxzZTtcbiAgICAgIGZvciAoY29uc3QgW2lkLCB2YWxpZGF0aW9uXSBvZiBPYmplY3QuZW50cmllcyhsYXRlc3RWYWxpZGF0aW9uLmN1cnJlbnQpKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdmFsaWRhdGlvbkVycm9yKHZhbGlkYXRpb24sIHZhbHVlc1tpZF0pO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAoIXZhbGlkYXRpb25FcnJvcnMpIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSB7fTtcbiAgICAgICAgICAgIC8vIHdlIGZvY3VzIHRoZSBmaXJzdCBpdGVtIHRoYXQgaGFzIGFuIGVycm9yXG4gICAgICAgICAgICBmb2N1cyhpZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnNbaWQgYXMga2V5b2YgVF0gPSBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMpIHtcbiAgICAgICAgc2V0RXJyb3JzKHZhbGlkYXRpb25FcnJvcnMpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsYXRlc3RPblN1Ym1pdC5jdXJyZW50KHZhbHVlcyk7XG4gICAgICByZXR1cm4gdHlwZW9mIHJlc3VsdCA9PT0gXCJib29sZWFuXCIgPyByZXN1bHQgOiB0cnVlO1xuICAgIH0sXG4gICAgW2xhdGVzdFZhbGlkYXRpb24sIGxhdGVzdE9uU3VibWl0LCBmb2N1c10sXG4gICk7XG5cbiAgY29uc3Qgc2V0VmFsaWRhdGlvbkVycm9yID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBrZXlvZiBULCBlcnJvcjogVmFsaWRhdGlvbkVycm9yKSA9PiB7XG4gICAgICBzZXRFcnJvcnMoKGVycm9ycykgPT4gKHsgLi4uZXJyb3JzLCBbaWRdOiBlcnJvciB9KSk7XG4gICAgfSxcbiAgICBbc2V0RXJyb3JzXSxcbiAgKTtcblxuICBjb25zdCBzZXRWYWx1ZSA9IHVzZUNhbGxiYWNrKFxuICAgIGZ1bmN0aW9uIDxLIGV4dGVuZHMga2V5b2YgVD4oaWQ6IEssIHZhbHVlOiBTZXRTdGF0ZUFjdGlvbjxUW0tdPikge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyBpcyBhbHdheXMgY29uZnVzZWQgYWJvdXQgU2V0U3RhdGVBY3Rpb24sIGJ1dCBpdCdzIGZpbmUgaGVyZVxuICAgICAgc2V0VmFsdWVzKCh2YWx1ZXMpID0+ICh7IC4uLnZhbHVlcywgW2lkXTogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyB2YWx1ZSh2YWx1ZXNbaWRdKSA6IHZhbHVlIH0pKTtcbiAgICB9LFxuICAgIFtzZXRWYWx1ZXNdLFxuICApO1xuXG4gIGNvbnN0IGl0ZW1Qcm9wcyA9IHVzZU1lbW88eyBbaWQgaW4ga2V5b2YgUmVxdWlyZWQ8VD5dOiBQYXJ0aWFsPEZvcm0uSXRlbVByb3BzPFRbaWRdPj4gJiB7IGlkOiBzdHJpbmcgfSB9PigoKSA9PiB7XG4gICAgLy8gd2UgaGF2ZSB0byB1c2UgYSBwcm94eSBiZWNhdXNlIHdlIGRvbid0IGFjdHVhbGx5IGhhdmUgYW55IG9iamVjdCB0byBpdGVyYXRlIHRocm91Z2hcbiAgICAvLyBzbyBpbnN0ZWFkIHdlIGR5bmFtaWNhbGx5IGNyZWF0ZSB0aGUgcHJvcHMgd2hlbiByZXF1aXJlZFxuICAgIHJldHVybiBuZXcgUHJveHk8eyBbaWQgaW4ga2V5b2YgUmVxdWlyZWQ8VD5dOiBQYXJ0aWFsPEZvcm0uSXRlbVByb3BzPFRbaWRdPj4gJiB7IGlkOiBzdHJpbmcgfSB9PihcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdGhlIHdob2xlIHBvaW50IG9mIGEgcHJveHkuLi5cbiAgICAgIHt9LFxuICAgICAge1xuICAgICAgICBnZXQodGFyZ2V0LCBpZDoga2V5b2YgVCkge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBsYXRlc3RWYWxpZGF0aW9uLmN1cnJlbnRbaWRdO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2lkXTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25DaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKGVycm9yc1tpZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkVycm9yKGlkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzZXRWYWx1ZShpZCwgdmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQmx1cihldmVudCkge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uLCBldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uRXJyb3IoaWQsIGVycm9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvcnNbaWRdLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGRuJ3QgcmV0dXJuIGB1bmRlZmluZWRgIG90aGVyd2lzZSBpdCB3aWxsIGJlIGFuIHVuY29udHJvbGxlZCBjb21wb25lbnRcbiAgICAgICAgICAgIHZhbHVlOiB0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogdmFsdWUsXG4gICAgICAgICAgICByZWY6IChpbnN0YW5jZTogRm9ybS5JdGVtUmVmZXJlbmNlKSA9PiB7XG4gICAgICAgICAgICAgIHJlZnMuY3VycmVudFtpZF0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSBhcyBQYXJ0aWFsPEZvcm0uSXRlbVByb3BzPFRba2V5b2YgVF0+PiAmIHsgaWQ6IHN0cmluZyB9O1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICApO1xuICB9LCBbZXJyb3JzLCBsYXRlc3RWYWxpZGF0aW9uLCBzZXRWYWxpZGF0aW9uRXJyb3IsIHZhbHVlcywgcmVmcywgc2V0VmFsdWVdKTtcblxuICBjb25zdCByZXNldCA9IHVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZXM/OiBQYXJ0aWFsPFQ+KSA9PiB7XG4gICAgICBzZXRFcnJvcnMoe30pO1xuICAgICAgT2JqZWN0LmVudHJpZXMocmVmcy5jdXJyZW50KS5mb3JFYWNoKChbaWQsIHJlZl0pID0+IHtcbiAgICAgICAgaWYgKCF2YWx1ZXM/LltpZF0pIHtcbiAgICAgICAgICByZWY/LnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGl0J3MgZmluZSBpZiB3ZSBkb24ndCBzcGVjaWZ5IGFsbCB0aGUgdmFsdWVzXG4gICAgICAgIHNldFZhbHVlcyh2YWx1ZXMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3NldFZhbHVlcywgc2V0RXJyb3JzLCByZWZzXSxcbiAgKTtcblxuICByZXR1cm4geyBoYW5kbGVTdWJtaXQsIHNldFZhbGlkYXRpb25FcnJvciwgc2V0VmFsdWUsIHZhbHVlcywgaXRlbVByb3BzLCBmb2N1cywgcmVzZXQgfTtcbn1cbiIsICJpbXBvcnQgeyB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBSSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IFByb21pc2VPcHRpb25zLCB1c2VQcm9taXNlIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuaW1wb3J0IHsgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLyoqXG4gKiBTdHJlYW0gYSBwcm9tcHQgY29tcGxldGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgRGV0YWlsLCBMYXVuY2hQcm9wcyB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZSBBSSB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQocHJvcHM6IExhdW5jaFByb3BzPHsgYXJndW1lbnRzOiB7IHByb21wdDogc3RyaW5nIH0gfT4pIHtcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEgfSA9IHVzZUFJKHByb3BzLmFyZ3VtZW50cy5wcm9tcHQpO1xuICpcbiAqICAgcmV0dXJuIDxEZXRhaWwgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IG1hcmtkb3duPXtkYXRhfSAvPjtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQUkoXG4gIHByb21wdDogc3RyaW5nLFxuICBvcHRpb25zOiB7XG4gICAgLyoqXG4gICAgICogQ29uY3JldGUgdGFza3MsIHN1Y2ggYXMgZml4aW5nIGdyYW1tYXIsIHJlcXVpcmUgbGVzcyBjcmVhdGl2aXR5IHdoaWxlIG9wZW4tZW5kZWQgcXVlc3Rpb25zLCBzdWNoIGFzIGdlbmVyYXRpbmcgaWRlYXMsIHJlcXVpcmUgbW9yZS5cbiAgICAgKiBJZiBhIG51bWJlciBpcyBwYXNzZWQsIGl0IG5lZWRzIHRvIGJlIGluIHRoZSByYW5nZSAwLTIuIEZvciBsYXJnZXIgdmFsdWVzLCAyIHdpbGwgYmUgdXNlZC4gRm9yIGxvd2VyIHZhbHVlcywgMCB3aWxsIGJlIHVzZWQuXG4gICAgICovXG4gICAgY3JlYXRpdml0eT86IEFJLkNyZWF0aXZpdHk7XG4gICAgLyoqXG4gICAgICogVGhlIEFJIG1vZGVsIHRvIHVzZSB0byBhbnN3ZXIgdG8gdGhlIHByb21wdC5cbiAgICAgKi9cbiAgICBtb2RlbD86IEFJLk1vZGVsO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3RyZWFtIHRoZSBhbnN3ZXIgb3Igb25seSB1cGRhdGUgdGhlIGRhdGEgd2hlbiB0aGUgZW50aXJlIGFuc3dlciBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgKi9cbiAgICBzdHJlYW0/OiBib29sZWFuO1xuICB9ICYgT21pdDxQcm9taXNlT3B0aW9uczxGdW5jdGlvblJldHVybmluZ1Byb21pc2U+LCBcImFib3J0YWJsZVwiPiA9IHt9LFxuKSB7XG4gIGNvbnN0IHsgY3JlYXRpdml0eSwgc3RyZWFtLCBtb2RlbCwgLi4udXNlUHJvbWlzZU9wdGlvbnMgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPihudWxsKTtcbiAgY29uc3QgeyBpc0xvYWRpbmcsIGVycm9yLCByZXZhbGlkYXRlIH0gPSB1c2VQcm9taXNlKFxuICAgIGFzeW5jIChwcm9tcHQ6IHN0cmluZywgY3JlYXRpdml0eT86IEFJLkNyZWF0aXZpdHksIHNob3VsZFN0cmVhbT86IGJvb2xlYW4pID0+IHtcbiAgICAgIHNldERhdGEoXCJcIik7XG4gICAgICBjb25zdCBzdHJlYW0gPSBBSS5hc2socHJvbXB0LCB7IGNyZWF0aXZpdHksIG1vZGVsLCBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwgfSk7XG4gICAgICBpZiAoc2hvdWxkU3RyZWFtID09PSBmYWxzZSkge1xuICAgICAgICBzZXREYXRhKGF3YWl0IHN0cmVhbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJlYW0ub24oXCJkYXRhXCIsIChkYXRhKSA9PiB7XG4gICAgICAgICAgc2V0RGF0YSgoeCkgPT4geCArIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgc3RyZWFtO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Byb21wdCwgY3JlYXRpdml0eSwgc3RyZWFtXSxcbiAgICB7IC4uLnVzZVByb21pc2VPcHRpb25zLCBhYm9ydGFibGUgfSxcbiAgKTtcblxuICByZXR1cm4geyBpc0xvYWRpbmcsIGRhdGEsIGVycm9yLCByZXZhbGlkYXRlIH07XG59XG4iLCAiaW1wb3J0IHsgdXNlTWVtbywgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuaW1wb3J0IHsgdXNlQ2FjaGVkU3RhdGUgfSBmcm9tIFwiLi91c2VDYWNoZWRTdGF0ZVwiO1xuXG4vLyBUaGUgYWxnb3JpdGhtIGJlbG93IGlzIGluc3BpcmVkIGJ5IHRoZSBvbmUgdXNlZCBieSBGaXJlZm94OlxuLy8gaHR0cHM6Ly93aWtpLm1vemlsbGEub3JnL1VzZXI6SmVzc2UvTmV3RnJlY2VuY3lcblxudHlwZSBGcmVjZW5jeSA9IHtcbiAgbGFzdFZpc2l0ZWQ6IG51bWJlcjtcbiAgZnJlY2VuY3k6IG51bWJlcjtcbn07XG5cbmNvbnN0IEhBTEZfTElGRV9EQVlTID0gMTA7XG5cbmNvbnN0IE1TX1BFUl9EQVkgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG5jb25zdCBWSVNJVF9UWVBFX1BPSU5UUyA9IHtcbiAgRGVmYXVsdDogMTAwLFxuICBFbWJlZDogMCxcbiAgQm9va21hcms6IDE0MCxcbn07XG5cbmZ1bmN0aW9uIGdldE5ld0ZyZWNlbmN5KGl0ZW0/OiBGcmVjZW5jeSk6IEZyZWNlbmN5IHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgbGFzdFZpc2l0ZWQgPSBpdGVtID8gaXRlbS5sYXN0VmlzaXRlZCA6IDA7XG4gIGNvbnN0IGZyZWNlbmN5ID0gaXRlbSA/IGl0ZW0uZnJlY2VuY3kgOiAwO1xuXG4gIGNvbnN0IHZpc2l0QWdlSW5EYXlzID0gKG5vdyAtIGxhc3RWaXNpdGVkKSAvIE1TX1BFUl9EQVk7XG4gIGNvbnN0IERFQ0FZX1JBVEVfQ09OU1RBTlQgPSBNYXRoLmxvZygyKSAvIChIQUxGX0xJRkVfREFZUyAqIE1TX1BFUl9EQVkpO1xuICBjb25zdCBjdXJyZW50VmlzaXRWYWx1ZSA9IFZJU0lUX1RZUEVfUE9JTlRTLkRlZmF1bHQgKiBNYXRoLmV4cCgtREVDQVlfUkFURV9DT05TVEFOVCAqIHZpc2l0QWdlSW5EYXlzKTtcbiAgY29uc3QgdG90YWxWaXNpdFZhbHVlID0gZnJlY2VuY3kgKyBjdXJyZW50VmlzaXRWYWx1ZTtcblxuICByZXR1cm4ge1xuICAgIGxhc3RWaXNpdGVkOiBub3csXG4gICAgZnJlY2VuY3k6IHRvdGFsVmlzaXRWYWx1ZSxcbiAgfTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNvbnN0IGRlZmF1bHRLZXkgPSAoaXRlbTogYW55KTogc3RyaW5nID0+IHtcbiAgaWYgKFxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJlxuICAgICh0eXBlb2YgaXRlbSAhPT0gXCJvYmplY3RcIiB8fCAhaXRlbSB8fCAhKFwiaWRcIiBpbiBpdGVtKSB8fCB0eXBlb2YgaXRlbS5pZCAhPSBcInN0cmluZ1wiKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVjaWZ5IGEga2V5IGZ1bmN0aW9uIG9yIG1ha2Ugc3VyZSB5b3VyIGl0ZW1zIGhhdmUgYW4gJ2lkJyBwcm9wZXJ0eVwiKTtcbiAgfVxuICByZXR1cm4gaXRlbS5pZDtcbn07XG5cbi8qKlxuICogU29ydCBhbiBhcnJheSBieSBpdHMgZnJlY2VuY3kgYW5kIHByb3ZpZGUgbWV0aG9kcyB0byB1cGRhdGUgdGhlIGZyZWNlbmN5IG9mIGl0cyBpdGVtcy5cbiAqIEZyZWNlbmN5IGlzIGEgbWVhc3VyZSB0aGF0IGNvbWJpbmVzIGZyZXF1ZW5jeSBhbmQgcmVjZW5jeS4gVGhlIG1vcmUgb2Z0ZW4gYW4gaXRlbSBpcyB2aXNpdGVkL3VzZWQsIGFuZCB0aGUgbW9yZSByZWNlbnRseSBhbiBpdGVtIGlzIHZpc2l0ZWQvdXNlZCwgdGhlIGhpZ2hlciBpdCB3aWxsIHJhbmsuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgTGlzdCwgQWN0aW9uUGFuZWwsIEFjdGlvbiwgSWNvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZUZldGNoLCB1c2VGcmVjZW5jeVNvcnRpbmcgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSB9ID0gdXNlRmV0Y2goXCJodHRwczovL2FwaS5leGFtcGxlXCIpO1xuICogICBjb25zdCB7IGRhdGE6IHNvcnRlZERhdGEsIHZpc2l0SXRlbSwgcmVzZXRSYW5raW5nIH0gPSB1c2VGcmVjZW5jeVNvcnRpbmcoZGF0YSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAqICAgICAgIHtzb3J0ZWREYXRhLm1hcCgoaXRlbSkgPT4gKFxuICogICAgICAgICA8TGlzdC5JdGVtXG4gKiAgICAgICAgICAga2V5PXtpdGVtLmlkfVxuICogICAgICAgICAgIHRpdGxlPXtpdGVtLnRpdGxlfVxuICogICAgICAgICAgIGFjdGlvbnM9e1xuICogICAgICAgICAgICAgPEFjdGlvblBhbmVsPlxuICogICAgICAgICAgICAgICA8QWN0aW9uLk9wZW5JbkJyb3dzZXIgdXJsPXtpdGVtLnVybH0gb25PcGVuPXsoKSA9PiB2aXNpdEl0ZW0oaXRlbSl9IC8+XG4gKiAgICAgICAgICAgICAgIDxBY3Rpb24uQ29weVRvQ2xpcGJvYXJkIHRpdGxlPVwiQ29weSBMaW5rXCIgY29udGVudD17aXRlbS51cmx9IG9uQ29weT17KCkgPT4gdmlzaXRJdGVtKGl0ZW0pfSAvPlxuICogICAgICAgICAgICAgICA8QWN0aW9uIHRpdGxlPVwiUmVzZXQgUmFua2luZ1wiIGljb249e0ljb24uQXJyb3dDb3VudGVyQ2xvY2t3aXNlfSBvbkFjdGlvbj17KCkgPT4gcmVzZXRSYW5raW5nKGl0ZW0pfSAvPlxuICogICAgICAgICAgICAgPC9BY3Rpb25QYW5lbD5cbiAqICAgICAgICAgICB9XG4gKiAgICAgICAgIC8+XG4gKiAgICAgICApKX1cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGcmVjZW5jeVNvcnRpbmc8VCBleHRlbmRzIHsgaWQ6IHN0cmluZyB9PihcbiAgZGF0YT86IFRbXSxcbiAgb3B0aW9ucz86IHsgbmFtZXNwYWNlPzogc3RyaW5nOyBrZXk/OiAoaXRlbTogVCkgPT4gc3RyaW5nOyBzb3J0VW52aXNpdGVkPzogKGE6IFQsIGI6IFQpID0+IG51bWJlciB9LFxuKToge1xuICBkYXRhOiBUW107XG4gIHZpc2l0SXRlbTogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG4gIHJlc2V0UmFua2luZzogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZyZWNlbmN5U29ydGluZzxUPihcbiAgZGF0YTogVFtdIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zOiB7IG5hbWVzcGFjZT86IHN0cmluZzsga2V5OiAoaXRlbTogVCkgPT4gc3RyaW5nOyBzb3J0VW52aXNpdGVkPzogKGE6IFQsIGI6IFQpID0+IG51bWJlciB9LFxuKToge1xuICBkYXRhOiBUW107XG4gIHZpc2l0SXRlbTogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG4gIHJlc2V0UmFua2luZzogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZyZWNlbmN5U29ydGluZzxUPihcbiAgZGF0YT86IFRbXSxcbiAgb3B0aW9ucz86IHsgbmFtZXNwYWNlPzogc3RyaW5nOyBrZXk/OiAoaXRlbTogVCkgPT4gc3RyaW5nOyBzb3J0VW52aXNpdGVkPzogKGE6IFQsIGI6IFQpID0+IG51bWJlciB9LFxuKToge1xuICBkYXRhOiBUW107XG4gIHZpc2l0SXRlbTogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG4gIHJlc2V0UmFua2luZzogKGl0ZW06IFQpID0+IFByb21pc2U8dm9pZD47XG59IHtcbiAgY29uc3Qga2V5UmVmID0gdXNlTGF0ZXN0KG9wdGlvbnM/LmtleSB8fCBkZWZhdWx0S2V5KTtcbiAgY29uc3Qgc29ydFVudmlzaXRlZFJlZiA9IHVzZUxhdGVzdChvcHRpb25zPy5zb3J0VW52aXNpdGVkKTtcblxuICBjb25zdCBbc3RvcmVkRnJlY2VuY2llcywgc2V0U3RvcmVkRnJlY2VuY2llc10gPSB1c2VDYWNoZWRTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBGcmVjZW5jeSB8IHVuZGVmaW5lZD4+KFxuICAgIGByYXljYXN0X2ZyZWNlbmN5XyR7b3B0aW9ucz8ubmFtZXNwYWNlfWAsXG4gICAge30sXG4gICk7XG5cbiAgY29uc3QgdmlzaXRJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRnJlY2VuY3koaXRlbTogVCkge1xuICAgICAgY29uc3QgaXRlbUtleSA9IGtleVJlZi5jdXJyZW50KGl0ZW0pO1xuXG4gICAgICBzZXRTdG9yZWRGcmVjZW5jaWVzKChzdG9yZWRGcmVjZW5jaWVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGZyZWNlbmN5ID0gc3RvcmVkRnJlY2VuY2llc1tpdGVtS2V5XTtcbiAgICAgICAgY29uc3QgbmV3RnJlY2VuY3kgPSBnZXROZXdGcmVjZW5jeShmcmVjZW5jeSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdG9yZWRGcmVjZW5jaWVzLFxuICAgICAgICAgIFtpdGVtS2V5XTogbmV3RnJlY2VuY3ksXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtrZXlSZWYsIHNldFN0b3JlZEZyZWNlbmNpZXNdLFxuICApO1xuXG4gIGNvbnN0IHJlc2V0UmFua2luZyA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZyZWNlbmN5KGl0ZW06IFQpIHtcbiAgICAgIGNvbnN0IGl0ZW1LZXkgPSBrZXlSZWYuY3VycmVudChpdGVtKTtcblxuICAgICAgc2V0U3RvcmVkRnJlY2VuY2llcygoc3RvcmVkRnJlY2VuY2llcykgPT4ge1xuICAgICAgICBjb25zdCBuZXdGcmVuY2VuY2llcyA9IHsgLi4uc3RvcmVkRnJlY2VuY2llcyB9O1xuICAgICAgICBkZWxldGUgbmV3RnJlbmNlbmNpZXNbaXRlbUtleV07XG5cbiAgICAgICAgcmV0dXJuIG5ld0ZyZW5jZW5jaWVzO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBba2V5UmVmLCBzZXRTdG9yZWRGcmVjZW5jaWVzXSxcbiAgKTtcblxuICBjb25zdCBzb3J0ZWREYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGEuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZnJlY2VuY3lBID0gc3RvcmVkRnJlY2VuY2llc1trZXlSZWYuY3VycmVudChhKV07XG4gICAgICBjb25zdCBmcmVjZW5jeUIgPSBzdG9yZWRGcmVjZW5jaWVzW2tleVJlZi5jdXJyZW50KGIpXTtcblxuICAgICAgLy8gSWYgYSBoYXMgYSBmcmVjZW5jeSwgYnV0IGIgZG9lc24ndCwgYSBzaG91bGQgY29tZSBmaXJzdFxuICAgICAgaWYgKGZyZWNlbmN5QSAmJiAhZnJlY2VuY3lCKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYiBoYXMgYSBmcmVjZW5jeSwgYnV0IGEgZG9lc24ndCwgYiBzaG91bGQgY29tZSBmaXJzdFxuICAgICAgaWYgKCFmcmVjZW5jeUEgJiYgZnJlY2VuY3lCKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBib3RoIGZyZWNlbmNpZXMgYXJlIGRlZmluZWQscHV0IHRoZSBvbmUgd2l0aCB0aGUgaGlnaGVyIGZyZWNlbmN5IGZpcnN0XG4gICAgICBpZiAoZnJlY2VuY3lBICYmIGZyZWNlbmN5Qikge1xuICAgICAgICByZXR1cm4gZnJlY2VuY3lCLmZyZWNlbmN5IC0gZnJlY2VuY3lBLmZyZWNlbmN5O1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBib3RoIGZyZWNlbmNpZXMgYXJlIHVuZGVmaW5lZCwga2VlcCB0aGUgb3JpZ2luYWwgb3JkZXJcbiAgICAgIHJldHVybiBzb3J0VW52aXNpdGVkUmVmLmN1cnJlbnQgPyBzb3J0VW52aXNpdGVkUmVmLmN1cnJlbnQoYSwgYikgOiAwO1xuICAgIH0pO1xuICB9LCBbc3RvcmVkRnJlY2VuY2llcywgZGF0YSwga2V5UmVmLCBzb3J0VW52aXNpdGVkUmVmXSk7XG5cbiAgcmV0dXJuIHsgZGF0YTogc29ydGVkRGF0YSwgdmlzaXRJdGVtLCByZXNldFJhbmtpbmcgfTtcbn1cbiIsICJpbXBvcnQgeyBMb2NhbFN0b3JhZ2UgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIi4vc2hvd0ZhaWx1cmVUb2FzdFwiO1xuaW1wb3J0IHsgcmVwbGFjZXIsIHJldml2ZXIgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5pbXBvcnQgeyB1c2VQcm9taXNlIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuXG4vKipcbiAqIEEgaG9vayB0byBtYW5hZ2UgYSB2YWx1ZSBpbiB0aGUgbG9jYWwgc3RvcmFnZS5cbiAqXG4gKiBAcmVtYXJrIFRoZSB2YWx1ZSBpcyBzdG9yZWQgYXMgYSBKU09OIHN0cmluZyBpbiB0aGUgbG9jYWwgc3RvcmFnZS5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byB1c2UgZm9yIHRoZSB2YWx1ZSBpbiB0aGUgbG9jYWwgc3RvcmFnZS5cbiAqIEBwYXJhbSBpbml0aWFsVmFsdWUgLSBUaGUgaW5pdGlhbCB2YWx1ZSB0byB1c2UgaWYgdGhlIGtleSBkb2Vzbid0IGV4aXN0IGluIHRoZSBsb2NhbCBzdG9yYWdlLlxuICogQHJldHVybnMgQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogLSBgdmFsdWVgOiBUaGUgdmFsdWUgZnJvbSB0aGUgbG9jYWwgc3RvcmFnZSBvciB0aGUgaW5pdGlhbCB2YWx1ZSBpZiB0aGUga2V5IGRvZXNuJ3QgZXhpc3QuXG4gKiAtIGBzZXRWYWx1ZWA6IEEgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSB2YWx1ZSBpbiB0aGUgbG9jYWwgc3RvcmFnZS5cbiAqIC0gYHJlbW92ZVZhbHVlYDogQSBmdW5jdGlvbiB0byByZW1vdmUgdGhlIHZhbHVlIGZyb20gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKiAtIGBpc0xvYWRpbmdgOiBBIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgdmFsdWUgaXMgbG9hZGluZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBjb25zdCB7IHZhbHVlLCBzZXRWYWx1ZSB9ID0gdXNlTG9jYWxTdG9yYWdlPHN0cmluZz4oXCJteS1rZXlcIik7XG4gKiBjb25zdCB7IHZhbHVlLCBzZXRWYWx1ZSB9ID0gdXNlTG9jYWxTdG9yYWdlPHN0cmluZz4oXCJteS1rZXlcIiwgXCJkZWZhdWx0IHZhbHVlXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2U8VD4oa2V5OiBzdHJpbmcsIGluaXRpYWxWYWx1ZT86IFQpIHtcbiAgY29uc3Qge1xuICAgIGRhdGE6IHZhbHVlLFxuICAgIGlzTG9hZGluZyxcbiAgICBtdXRhdGUsXG4gIH0gPSB1c2VQcm9taXNlKFxuICAgIGFzeW5jIChzdG9yYWdlS2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KHN0b3JhZ2VLZXkpO1xuXG4gICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gIT09IFwidW5kZWZpbmVkXCIgPyAoSlNPTi5wYXJzZShpdGVtLCByZXZpdmVyKSBhcyBUKSA6IGluaXRpYWxWYWx1ZTtcbiAgICB9LFxuICAgIFtrZXldLFxuICApO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlOiBUKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG11dGF0ZShMb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlLCByZXBsYWNlcikpLCB7XG4gICAgICAgIG9wdGltaXN0aWNVcGRhdGUodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd0ZhaWx1cmVUb2FzdChlcnJvciwgeyB0aXRsZTogXCJGYWlsZWQgdG8gc2V0IHZhbHVlIGluIGxvY2FsIHN0b3JhZ2VcIiB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiByZW1vdmVWYWx1ZSgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbXV0YXRlKExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSksIHtcbiAgICAgICAgb3B0aW1pc3RpY1VwZGF0ZSgpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dGYWlsdXJlVG9hc3QoZXJyb3IsIHsgdGl0bGU6IFwiRmFpbGVkIHRvIHJlbW92ZSB2YWx1ZSBmcm9tIGxvY2FsIHN0b3JhZ2VcIiB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyB2YWx1ZSwgc2V0VmFsdWUsIHJlbW92ZVZhbHVlLCBpc0xvYWRpbmcgfTtcbn1cbiIsICJleHBvcnQgeyBnZXRBdmF0YXJJY29uIH0gZnJvbSBcIi4vYXZhdGFyXCI7XG5leHBvcnQgeyBnZXRGYXZpY29uIH0gZnJvbSBcIi4vZmF2aWNvblwiO1xuZXhwb3J0IHsgZ2V0UHJvZ3Jlc3NJY29uIH0gZnJvbSBcIi4vcHJvZ3Jlc3NcIjtcbiIsICJpbXBvcnQgdHlwZSB7IEltYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgc2xpZ2h0bHlMaWdodGVyQ29sb3IsIHNsaWdodGx5RGFya2VyQ29sb3IgfSBmcm9tIFwiLi9jb2xvclwiO1xuXG5mdW5jdGlvbiBnZXRXaG9sZUNoYXJBbmRJKHN0cjogc3RyaW5nLCBpOiBudW1iZXIpOiBbc3RyaW5nLCBudW1iZXJdIHtcbiAgY29uc3QgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXG4gIGlmIChOdW1iZXIuaXNOYU4oY29kZSkpIHtcbiAgICByZXR1cm4gW1wiXCIsIGldO1xuICB9XG4gIGlmIChjb2RlIDwgMHhkODAwIHx8IGNvZGUgPiAweGRmZmYpIHtcbiAgICByZXR1cm4gW3N0ci5jaGFyQXQoaSksIGldOyAvLyBOb3JtYWwgY2hhcmFjdGVyLCBrZWVwaW5nICdpJyB0aGUgc2FtZVxuICB9XG5cbiAgLy8gSGlnaCBzdXJyb2dhdGUgKGNvdWxkIGNoYW5nZSBsYXN0IGhleCB0byAweERCN0YgdG8gdHJlYXQgaGlnaCBwcml2YXRlXG4gIC8vIHN1cnJvZ2F0ZXMgYXMgc2luZ2xlIGNoYXJhY3RlcnMpXG4gIGlmICgweGQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4ZGJmZikge1xuICAgIGlmIChzdHIubGVuZ3RoIDw9IGkgKyAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIaWdoIHN1cnJvZ2F0ZSB3aXRob3V0IGZvbGxvd2luZyBsb3cgc3Vycm9nYXRlXCIpO1xuICAgIH1cbiAgICBjb25zdCBuZXh0ID0gc3RyLmNoYXJDb2RlQXQoaSArIDEpO1xuICAgIGlmICgweGRjMDAgPiBuZXh0IHx8IG5leHQgPiAweGRmZmYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkhpZ2ggc3Vycm9nYXRlIHdpdGhvdXQgZm9sbG93aW5nIGxvdyBzdXJyb2dhdGVcIik7XG4gICAgfVxuICAgIHJldHVybiBbc3RyLmNoYXJBdChpKSArIHN0ci5jaGFyQXQoaSArIDEpLCBpICsgMV07XG4gIH1cblxuICAvLyBMb3cgc3Vycm9nYXRlICgweERDMDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REZGRilcbiAgaWYgKGkgPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb3cgc3Vycm9nYXRlIHdpdGhvdXQgcHJlY2VkaW5nIGhpZ2ggc3Vycm9nYXRlXCIpO1xuICB9XG5cbiAgY29uc3QgcHJldiA9IHN0ci5jaGFyQ29kZUF0KGkgLSAxKTtcblxuICAvLyAoY291bGQgY2hhbmdlIGxhc3QgaGV4IHRvIDB4REI3RiB0byB0cmVhdCBoaWdoIHByaXZhdGUgc3Vycm9nYXRlc1xuICAvLyBhcyBzaW5nbGUgY2hhcmFjdGVycylcbiAgaWYgKDB4ZDgwMCA+IHByZXYgfHwgcHJldiA+IDB4ZGJmZikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkxvdyBzdXJyb2dhdGUgd2l0aG91dCBwcmVjZWRpbmcgaGlnaCBzdXJyb2dhdGVcIik7XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIG5leHQgY2hhcmFjdGVyIGluc3RlYWQgKGFuZCBpbmNyZW1lbnQpXG4gIHJldHVybiBbc3RyLmNoYXJBdChpICsgMSksIGkgKyAxXTtcbn1cblxuY29uc3QgYXZhdGFyQ29sb3JTZXQgPSBbXG4gIFwiI0RDODI5QVwiLCAvLyBQaW5rXG4gIFwiI0Q2NDg1NFwiLCAvLyBSZWRcbiAgXCIjRDQ3NjAwXCIsIC8vIFllbGxvd09yYW5nZVxuICBcIiNEMzZDRERcIiwgLy8gTWFnZW50YVxuICBcIiM1MkE5RTRcIiwgLy8gQXF1YVxuICBcIiM3ODcxRThcIiwgLy8gSW5kaWdvXG4gIFwiIzcwOTIwRlwiLCAvLyBZZWxsb3dHcmVlblxuICBcIiM0M0I5M0FcIiwgLy8gR3JlZW5cbiAgXCIjRUI2QjNFXCIsIC8vIE9yYW5nZVxuICBcIiMyNkI3OTVcIiwgLy8gQmx1ZUdyZWVuXG4gIFwiI0Q4NUE5QlwiLCAvLyBIb3RQaW5rXG4gIFwiI0EwNjdEQ1wiLCAvLyBQdXJwbGVcbiAgXCIjQkQ5NTAwXCIsIC8vIFllbGxvd1xuICBcIiM1Mzg1RDlcIiwgLy8gQmx1ZVxuXTtcblxuLyoqXG4gKiBJY29uIHRvIHJlcHJlc2VudCBhbiBhdmF0YXIgd2hlbiB5b3UgZG9uJ3QgaGF2ZSBvbmUuIFRoZSBnZW5lcmF0ZWQgYXZhdGFyXG4gKiB3aWxsIGJlIGdlbmVyYXRlZCBmcm9tIHRoZSBpbml0aWFscyBvZiB0aGUgbmFtZSBhbmQgaGF2ZSBhIGNvbG9yZnVsIGJ1dCBjb25zaXN0ZW50IGJhY2tncm91bmQuXG4gKlxuICogQHJldHVybnMgYW4gSW1hZ2UgdGhhdCBjYW4gYmUgdXNlZCB3aGVyZSBSYXljYXN0IGV4cGVjdHMgdGhlbS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiA8TGlzdC5JdGVtIGljb249e2dldEF2YXRhckljb24oJ01hdGhpZXUgRHV0b3VyJyl9IHRpdGxlPVwiUHJvamVjdFwiIC8+XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF2YXRhckljb24oXG4gIG5hbWU6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICAvKipcbiAgICAgKiBDdXN0b20gYmFja2dyb3VuZCBjb2xvclxuICAgICAqL1xuICAgIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byB1c2UgYSBncmFkaWVudCBmb3IgdGhlIGJhY2tncm91bmQgb3Igbm90LlxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBncmFkaWVudD86IGJvb2xlYW47XG4gIH0sXG4pOiBJbWFnZS5Bc3NldCB7XG4gIGNvbnN0IHdvcmRzID0gbmFtZS50cmltKCkuc3BsaXQoXCIgXCIpO1xuICBsZXQgaW5pdGlhbHM6IHN0cmluZztcbiAgaWYgKHdvcmRzLmxlbmd0aCA9PSAxICYmIGdldFdob2xlQ2hhckFuZEkod29yZHNbMF0sIDApWzBdKSB7XG4gICAgaW5pdGlhbHMgPSBnZXRXaG9sZUNoYXJBbmRJKHdvcmRzWzBdLCAwKVswXTtcbiAgfSBlbHNlIGlmICh3b3Jkcy5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgZmlyc3RXb3JkRmlyc3RMZXR0ZXIgPSBnZXRXaG9sZUNoYXJBbmRJKHdvcmRzWzBdLCAwKVswXSB8fCBcIlwiO1xuICAgIGNvbnN0IGxhc3RXb3JkRmlyc3RMZXR0ZXIgPSBnZXRXaG9sZUNoYXJBbmRJKHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdLCAwKVswXSA/PyBcIlwiO1xuICAgIGluaXRpYWxzID0gZmlyc3RXb3JkRmlyc3RMZXR0ZXIgKyBsYXN0V29yZEZpcnN0TGV0dGVyO1xuICB9IGVsc2Uge1xuICAgIGluaXRpYWxzID0gXCJcIjtcbiAgfVxuXG4gIGxldCBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZztcblxuICBpZiAob3B0aW9ucz8uYmFja2dyb3VuZCkge1xuICAgIGJhY2tncm91bmRDb2xvciA9IG9wdGlvbnM/LmJhY2tncm91bmQ7XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluaXRpYWxzQ2hhckluZGV4ID0gMDtcbiAgICBsZXQgW2NoYXIsIGldID0gZ2V0V2hvbGVDaGFyQW5kSShpbml0aWFscywgMCk7XG4gICAgd2hpbGUgKGNoYXIpIHtcbiAgICAgIGluaXRpYWxzQ2hhckluZGV4ICs9IGNoYXIuY2hhckNvZGVBdCgwKTtcbiAgICAgIFtjaGFyLCBpXSA9IGdldFdob2xlQ2hhckFuZEkoaW5pdGlhbHMsIGkgKyAxKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvckluZGV4ID0gaW5pdGlhbHNDaGFySW5kZXggJSBhdmF0YXJDb2xvclNldC5sZW5ndGg7XG4gICAgYmFja2dyb3VuZENvbG9yID0gYXZhdGFyQ29sb3JTZXRbY29sb3JJbmRleF07XG4gIH1cblxuICBjb25zdCBwYWRkaW5nID0gMDtcbiAgY29uc3QgcmFkaXVzID0gNTAgLSBwYWRkaW5nO1xuXG4gIGNvbnN0IHN2ZyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIj5cbiAgJHtcbiAgICBvcHRpb25zPy5ncmFkaWVudCAhPT0gZmFsc2VcbiAgICAgID8gYDxkZWZzPlxuICAgICAgPGxpbmVhckdyYWRpZW50IGlkPVwiR3JhZGllbnRcIiB4MT1cIjAuMjVcIiB4Mj1cIjAuNzVcIiB5MT1cIjBcIiB5Mj1cIjFcIj5cbiAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wLWNvbG9yPVwiJHtzbGlnaHRseUxpZ2h0ZXJDb2xvcihiYWNrZ3JvdW5kQ29sb3IpfVwiLz5cbiAgICAgICAgPHN0b3Agb2Zmc2V0PVwiNTAlXCIgc3RvcC1jb2xvcj1cIiR7YmFja2dyb3VuZENvbG9yfVwiLz5cbiAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMTAwJVwiIHN0b3AtY29sb3I9XCIke3NsaWdodGx5RGFya2VyQ29sb3IoYmFja2dyb3VuZENvbG9yKX1cIi8+XG4gICAgICA8L2xpbmVhckdyYWRpZW50PlxuICA8L2RlZnM+YFxuICAgICAgOiBcIlwiXG4gIH1cbiAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiJHtyYWRpdXN9XCIgZmlsbD1cIiR7XG4gICAgICAgIG9wdGlvbnM/LmdyYWRpZW50ICE9PSBmYWxzZSA/IFwidXJsKCNHcmFkaWVudClcIiA6IGJhY2tncm91bmRDb2xvclxuICAgICAgfVwiIC8+XG4gICAgICAke1xuICAgICAgICBpbml0aWFsc1xuICAgICAgICAgID8gYDx0ZXh0IHg9XCI1MFwiIHk9XCI4MFwiIGZvbnQtc2l6ZT1cIiR7XG4gICAgICAgICAgICAgIHJhZGl1cyAtIDFcbiAgICAgICAgICAgIH1cIiBmb250LWZhbWlseT1cIkludGVyLCBzYW5zLXNlcmlmXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBmaWxsPVwid2hpdGVcIj4ke2luaXRpYWxzLnRvVXBwZXJDYXNlKCl9PC90ZXh0PmBcbiAgICAgICAgICA6IFwiXCJcbiAgICAgIH1cbiAgICA8L3N2Zz5cbiAgYC5yZXBsYWNlQWxsKFwiXFxuXCIsIFwiXCIpO1xuICByZXR1cm4gYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChzdmcpfWA7XG59XG4iLCAiZnVuY3Rpb24gaGV4VG9SR0IoaGV4OiBzdHJpbmcpIHtcbiAgbGV0IHIgPSAwO1xuICBsZXQgZyA9IDA7XG4gIGxldCBiID0gMDtcblxuICAvLyAzIGRpZ2l0c1xuICBpZiAoaGV4Lmxlbmd0aCA9PT0gNCkge1xuICAgIHIgPSBwYXJzZUludChgJHtoZXhbMV19JHtoZXhbMV19YCwgMTYpO1xuICAgIGcgPSBwYXJzZUludChgJHtoZXhbMl19JHtoZXhbMl19YCwgMTYpO1xuICAgIGIgPSBwYXJzZUludChgJHtoZXhbM119JHtoZXhbM119YCwgMTYpO1xuXG4gICAgLy8gNiBkaWdpdHNcbiAgfSBlbHNlIGlmIChoZXgubGVuZ3RoID09PSA3KSB7XG4gICAgciA9IHBhcnNlSW50KGAke2hleFsxXX0ke2hleFsyXX1gLCAxNik7XG4gICAgZyA9IHBhcnNlSW50KGAke2hleFszXX0ke2hleFs0XX1gLCAxNik7XG4gICAgYiA9IHBhcnNlSW50KGAke2hleFs1XX0ke2hleFs2XX1gLCAxNik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNYWxmb3JtZWQgaGV4IGNvbG9yOiAke2hleH1gKTtcbiAgfVxuXG4gIHJldHVybiB7IHIsIGcsIGIgfTtcbn1cblxuZnVuY3Rpb24gcmdiVG9IZXgoeyByLCBnLCBiIH06IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlciB9KSB7XG4gIGxldCByU3RyaW5nID0gci50b1N0cmluZygxNik7XG4gIGxldCBnU3RyaW5nID0gZy50b1N0cmluZygxNik7XG4gIGxldCBiU3RyaW5nID0gYi50b1N0cmluZygxNik7XG5cbiAgaWYgKHJTdHJpbmcubGVuZ3RoID09PSAxKSB7XG4gICAgclN0cmluZyA9IGAwJHtyU3RyaW5nfWA7XG4gIH1cbiAgaWYgKGdTdHJpbmcubGVuZ3RoID09PSAxKSB7XG4gICAgZ1N0cmluZyA9IGAwJHtnU3RyaW5nfWA7XG4gIH1cbiAgaWYgKGJTdHJpbmcubGVuZ3RoID09PSAxKSB7XG4gICAgYlN0cmluZyA9IGAwJHtiU3RyaW5nfWA7XG4gIH1cblxuICByZXR1cm4gYCMke3JTdHJpbmd9JHtnU3RyaW5nfSR7YlN0cmluZ31gO1xufVxuXG5mdW5jdGlvbiByZ2JUb0hTTCh7IHIsIGcsIGIgfTogeyByOiBudW1iZXI7IGc6IG51bWJlcjsgYjogbnVtYmVyIH0pIHtcbiAgLy8gTWFrZSByLCBnLCBhbmQgYiBmcmFjdGlvbnMgb2YgMVxuICByIC89IDI1NTtcbiAgZyAvPSAyNTU7XG4gIGIgLz0gMjU1O1xuXG4gIC8vIEZpbmQgZ3JlYXRlc3QgYW5kIHNtYWxsZXN0IGNoYW5uZWwgdmFsdWVzXG4gIGNvbnN0IGNtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgY29uc3QgY21heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xuICBjb25zdCBkZWx0YSA9IGNtYXggLSBjbWluO1xuICBsZXQgaCA9IDA7XG4gIGxldCBzID0gMDtcbiAgbGV0IGwgPSAwO1xuXG4gIC8vIENhbGN1bGF0ZSBodWVcbiAgLy8gTm8gZGlmZmVyZW5jZVxuICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICBoID0gMDtcbiAgfVxuICAvLyBSZWQgaXMgbWF4XG4gIGVsc2UgaWYgKGNtYXggPT09IHIpIHtcbiAgICBoID0gKChnIC0gYikgLyBkZWx0YSkgJSA2O1xuICB9XG4gIC8vIEdyZWVuIGlzIG1heFxuICBlbHNlIGlmIChjbWF4ID09PSBnKSB7XG4gICAgaCA9IChiIC0gcikgLyBkZWx0YSArIDI7XG4gIH1cbiAgLy8gQmx1ZSBpcyBtYXhcbiAgZWxzZSB7XG4gICAgaCA9IChyIC0gZykgLyBkZWx0YSArIDQ7XG4gIH1cblxuICBoID0gTWF0aC5yb3VuZChoICogNjApO1xuXG4gIC8vIE1ha2UgbmVnYXRpdmUgaHVlcyBwb3NpdGl2ZSBiZWhpbmQgMzYwwrBcbiAgaWYgKGggPCAwKSB7XG4gICAgaCArPSAzNjA7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgbGlnaHRuZXNzXG4gIGwgPSAoY21heCArIGNtaW4pIC8gMjtcblxuICAvLyBDYWxjdWxhdGUgc2F0dXJhdGlvblxuICBzID0gZGVsdGEgPT09IDAgPyAwIDogZGVsdGEgLyAoMSAtIE1hdGguYWJzKDIgKiBsIC0gMSkpO1xuXG4gIC8vIE11bHRpcGx5IGwgYW5kIHMgYnkgMTAwXG4gIHMgPSArKHMgKiAxMDApLnRvRml4ZWQoMSk7XG4gIGwgPSArKGwgKiAxMDApLnRvRml4ZWQoMSk7XG5cbiAgcmV0dXJuIHsgaCwgcywgbCB9O1xufVxuXG5mdW5jdGlvbiBoc2xUb1JHQih7IGgsIHMsIGwgfTogeyBoOiBudW1iZXI7IHM6IG51bWJlcjsgbDogbnVtYmVyIH0pIHtcbiAgLy8gTXVzdCBiZSBmcmFjdGlvbnMgb2YgMVxuICBzIC89IDEwMDtcbiAgbCAvPSAxMDA7XG5cbiAgY29uc3QgYyA9ICgxIC0gTWF0aC5hYnMoMiAqIGwgLSAxKSkgKiBzO1xuICBjb25zdCB4ID0gYyAqICgxIC0gTWF0aC5hYnMoKChoIC8gNjApICUgMikgLSAxKSk7XG4gIGNvbnN0IG0gPSBsIC0gYyAvIDI7XG4gIGxldCByID0gMDtcbiAgbGV0IGcgPSAwO1xuICBsZXQgYiA9IDA7XG5cbiAgaWYgKGggPj0gMCAmJiBoIDwgNjApIHtcbiAgICByID0gYztcbiAgICBnID0geDtcbiAgICBiID0gMDtcbiAgfSBlbHNlIGlmIChoID49IDYwICYmIGggPCAxMjApIHtcbiAgICByID0geDtcbiAgICBnID0gYztcbiAgICBiID0gMDtcbiAgfSBlbHNlIGlmIChoID49IDEyMCAmJiBoIDwgMTgwKSB7XG4gICAgciA9IDA7XG4gICAgZyA9IGM7XG4gICAgYiA9IHg7XG4gIH0gZWxzZSBpZiAoaCA+PSAxODAgJiYgaCA8IDI0MCkge1xuICAgIHIgPSAwO1xuICAgIGcgPSB4O1xuICAgIGIgPSBjO1xuICB9IGVsc2UgaWYgKGggPj0gMjQwICYmIGggPCAzMDApIHtcbiAgICByID0geDtcbiAgICBnID0gMDtcbiAgICBiID0gYztcbiAgfSBlbHNlIGlmIChoID49IDMwMCAmJiBoIDwgMzYwKSB7XG4gICAgciA9IGM7XG4gICAgZyA9IDA7XG4gICAgYiA9IHg7XG4gIH1cbiAgciA9IE1hdGgucm91bmQoKHIgKyBtKSAqIDI1NSk7XG4gIGcgPSBNYXRoLnJvdW5kKChnICsgbSkgKiAyNTUpO1xuICBiID0gTWF0aC5yb3VuZCgoYiArIG0pICogMjU1KTtcblxuICByZXR1cm4geyByLCBnLCBiIH07XG59XG5cbmZ1bmN0aW9uIGhleFRvSFNMKGhleDogc3RyaW5nKSB7XG4gIHJldHVybiByZ2JUb0hTTChoZXhUb1JHQihoZXgpKTtcbn1cblxuZnVuY3Rpb24gaHNsVG9IZXgoaHNsOiB7IGg6IG51bWJlcjsgczogbnVtYmVyOyBsOiBudW1iZXIgfSkge1xuICByZXR1cm4gcmdiVG9IZXgoaHNsVG9SR0IoaHNsKSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICByZXR1cm4gbWluIDwgbWF4ID8gKHZhbHVlIDwgbWluID8gbWluIDogdmFsdWUgPiBtYXggPyBtYXggOiB2YWx1ZSkgOiB2YWx1ZSA8IG1heCA/IG1heCA6IHZhbHVlID4gbWluID8gbWluIDogdmFsdWU7XG59XG5cbmNvbnN0IG9mZnNldCA9IDEyO1xuXG5leHBvcnQgZnVuY3Rpb24gc2xpZ2h0bHlEYXJrZXJDb2xvcihoZXg6IHN0cmluZykge1xuICBjb25zdCBoc2wgPSBoZXhUb0hTTChoZXgpO1xuXG4gIHJldHVybiBoc2xUb0hleCh7XG4gICAgaDogaHNsLmgsXG4gICAgczogaHNsLnMsXG4gICAgbDogY2xhbXAoaHNsLmwgLSBvZmZzZXQsIDAsIDEwMCksXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2xpZ2h0bHlMaWdodGVyQ29sb3IoaGV4OiBzdHJpbmcpIHtcbiAgY29uc3QgaHNsID0gaGV4VG9IU0woaGV4KTtcblxuICByZXR1cm4gaHNsVG9IZXgoe1xuICAgIGg6IGhzbC5oLFxuICAgIHM6IGhzbC5zLFxuICAgIGw6IGNsYW1wKGhzbC5sICsgb2Zmc2V0LCAwLCAxMDApLFxuICB9KTtcbn1cbiIsICJpbXBvcnQgeyBJY29uLCBJbWFnZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IFVSTCB9IGZyb20gXCJub2RlOnVybFwiO1xuXG4vKipcbiAqIEljb24gc2hvd2luZyB0aGUgZmF2aWNvbiBvZiBhIHdlYnNpdGUuXG4gKlxuICogQSBmYXZpY29uIChmYXZvcml0ZSBpY29uKSBpcyBhIHRpbnkgaWNvbiBpbmNsdWRlZCBhbG9uZyB3aXRoIGEgd2Vic2l0ZSwgd2hpY2ggaXMgZGlzcGxheWVkIGluIHBsYWNlcyBsaWtlIHRoZSBicm93c2VyJ3MgYWRkcmVzcyBiYXIsIHBhZ2UgdGFicywgYW5kIGJvb2ttYXJrcyBtZW51LlxuICpcbiAqIEBwYXJhbSB1cmwgVGhlIFVSTCBvZiB0aGUgd2Vic2l0ZSB0byByZXByZXNlbnQuXG4gKlxuICogQHJldHVybnMgYW4gSW1hZ2UgdGhhdCBjYW4gYmUgdXNlZCB3aGVyZSBSYXljYXN0IGV4cGVjdHMgdGhlbS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiA8TGlzdC5JdGVtIGljb249e2dldEZhdmljb24oXCJodHRwczovL3JheWNhc3QuY29tXCIpfSB0aXRsZT1cIlJheWNhc3QgV2Vic2l0ZVwiIC8+XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZhdmljb24oXG4gIHVybDogc3RyaW5nIHwgVVJMLFxuICBvcHRpb25zPzoge1xuICAgIC8qKlxuICAgICAqIFNpemUgb2YgdGhlIEZhdmljb25cbiAgICAgKiBAZGVmYXVsdCA2NFxuICAgICAqL1xuICAgIHNpemU/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogRmFsbGJhY2sgaWNvbiBpbiBjYXNlIHRoZSBGYXZpY29uIGlzIG5vdCBmb3VuZC5cbiAgICAgKiBAZGVmYXVsdCBJY29uLkxpbmtcbiAgICAgKi9cbiAgICBmYWxsYmFjaz86IEltYWdlLkZhbGxiYWNrO1xuICAgIC8qKlxuICAgICAqIEEge0BsaW5rIEltYWdlLk1hc2t9IHRvIGFwcGx5IHRvIHRoZSBGYXZpY29uLlxuICAgICAqL1xuICAgIG1hc2s/OiBJbWFnZS5NYXNrO1xuICB9LFxuKTogSW1hZ2UuSW1hZ2VMaWtlIHtcbiAgdHJ5IHtcbiAgICAvLyBhIGZ1bmMgYWRkaW5nIGh0dHBzOi8vIHRvIHRoZSBVUkxcbiAgICAvLyBmb3IgY2FzZXMgd2hlcmUgdGhlIFVSTCBpcyBub3QgYSBmdWxsIFVSTFxuICAgIC8vIGUuZy4gXCJyYXljYXN0LmNvbVwiXG4gICAgY29uc3Qgc2FuaXRpemUgPSAodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghdXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke3VybH1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9O1xuXG4gICAgY29uc3QgdXJsT2JqID0gdHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIiA/IG5ldyBVUkwoc2FuaXRpemUodXJsKSkgOiB1cmw7XG4gICAgY29uc3QgaG9zdG5hbWUgPSB1cmxPYmouaG9zdG5hbWU7XG5cbiAgICBjb25zdCBmYXZpY29uUHJvdmlkZXI6IFwibm9uZVwiIHwgXCJyYXljYXN0XCIgfCBcImFwcGxlXCIgfCBcImdvb2dsZVwiIHwgXCJkdWNrRHVja0dvXCIgfCBcImR1Y2tkdWNrZ29cIiB8IFwibGVnYWN5XCIgPVxuICAgICAgKHByb2Nlc3MuZW52LkZBVklDT05fUFJPVklERVIgYXMgYW55KSA/PyBcInJheWNhc3RcIjtcblxuICAgIHN3aXRjaCAoZmF2aWNvblByb3ZpZGVyKSB7XG4gICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNvdXJjZTogb3B0aW9ucz8uZmFsbGJhY2sgPz8gSWNvbi5MaW5rLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnM/Lm1hc2ssXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwiYXBwbGVcIjpcbiAgICAgICAgLy8gd2UgY2FuJ3Qgc3VwcG9ydCBhcHBsZSBmYXZpY29ucyBhcyBpdCdzIGEgbmF0aXZlIEFQSVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNvdXJjZTogb3B0aW9ucz8uZmFsbGJhY2sgPz8gSWNvbi5MaW5rLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnM/Lm1hc2ssXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwiZHVja2R1Y2tnb1wiOlxuICAgICAgY2FzZSBcImR1Y2tEdWNrR29cIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IGBodHRwczovL2ljb25zLmR1Y2tkdWNrZ28uY29tL2lwMy8ke2hvc3RuYW1lfS5pY29gLFxuICAgICAgICAgIGZhbGxiYWNrOiBvcHRpb25zPy5mYWxsYmFjayA/PyBJY29uLkxpbmssXG4gICAgICAgICAgbWFzazogb3B0aW9ucz8ubWFzayxcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgXCJnb29nbGVcIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IGBodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP3N6PSR7b3B0aW9ucz8uc2l6ZSA/PyA2NH0mZG9tYWluPSR7aG9zdG5hbWV9YCxcbiAgICAgICAgICBmYWxsYmFjazogb3B0aW9ucz8uZmFsbGJhY2sgPz8gSWNvbi5MaW5rLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnM/Lm1hc2ssXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwibGVnYWN5XCI6XG4gICAgICBjYXNlIFwicmF5Y2FzdFwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IGBodHRwczovL2FwaS5yYXkuc28vZmF2aWNvbj91cmw9JHtob3N0bmFtZX0mc2l6ZT0ke29wdGlvbnM/LnNpemUgPz8gNjR9YCxcbiAgICAgICAgICBmYWxsYmFjazogb3B0aW9ucz8uZmFsbGJhY2sgPz8gSWNvbi5MaW5rLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnM/Lm1hc2ssXG4gICAgICAgIH07XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICByZXR1cm4gSWNvbi5MaW5rO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQsIENvbG9yIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHR5cGUgeyBJbWFnZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZnVuY3Rpb24gcG9sYXJUb0NhcnRlc2lhbihjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIGFuZ2xlSW5EZWdyZWVzOiBudW1iZXIpIHtcbiAgY29uc3QgYW5nbGVJblJhZGlhbnMgPSAoKGFuZ2xlSW5EZWdyZWVzIC0gOTApICogTWF0aC5QSSkgLyAxODAuMDtcblxuICByZXR1cm4ge1xuICAgIHg6IGNlbnRlclggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyksXG4gICAgeTogY2VudGVyWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGVzY3JpYmVBcmMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIpIHtcbiAgY29uc3Qgc3RhcnQgPSBwb2xhclRvQ2FydGVzaWFuKHgsIHksIHJhZGl1cywgZW5kQW5nbGUpO1xuICBjb25zdCBlbmQgPSBwb2xhclRvQ2FydGVzaWFuKHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSk7XG5cbiAgY29uc3QgbGFyZ2VBcmNGbGFnID0gZW5kQW5nbGUgLSBzdGFydEFuZ2xlIDw9IDE4MCA/IFwiMFwiIDogXCIxXCI7XG5cbiAgY29uc3QgZCA9IFtcIk1cIiwgc3RhcnQueCwgc3RhcnQueSwgXCJBXCIsIHJhZGl1cywgcmFkaXVzLCAwLCBsYXJnZUFyY0ZsYWcsIDAsIGVuZC54LCBlbmQueV0uam9pbihcIiBcIik7XG5cbiAgcmV0dXJuIGQ7XG59XG5cbi8qKlxuICogSWNvbiB0byByZXByZXNlbnQgdGhlIHByb2dyZXNzIG9mIF9zb21ldGhpbmdfLlxuICpcbiAqIEBwYXJhbSBwcm9ncmVzcyBOdW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICogQHBhcmFtIGNvbG9yIEhleCBjb2xvciAoZGVmYXVsdCBgXCIjRkY2MzYzXCJgKSBvciBDb2xvci5cbiAqXG4gKiBAcmV0dXJucyBhbiBJbWFnZSB0aGF0IGNhbiBiZSB1c2VkIHdoZXJlIFJheWNhc3QgZXhwZWN0cyB0aGVtLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIDxMaXN0Lkl0ZW0gaWNvbj17Z2V0UHJvZ3Jlc3NJY29uKDAuMSl9IHRpdGxlPVwiUHJvamVjdFwiIC8+XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2dyZXNzSWNvbihcbiAgcHJvZ3Jlc3M6IG51bWJlcixcbiAgY29sb3I6IENvbG9yIHwgc3RyaW5nID0gQ29sb3IuUmVkLFxuICBvcHRpb25zPzogeyBiYWNrZ3JvdW5kPzogQ29sb3IgfCBzdHJpbmc7IGJhY2tncm91bmRPcGFjaXR5PzogbnVtYmVyIH0sXG4pOiBJbWFnZS5Bc3NldCB7XG4gIGNvbnN0IGJhY2tncm91bmQgPSBvcHRpb25zPy5iYWNrZ3JvdW5kIHx8IChlbnZpcm9ubWVudC5hcHBlYXJhbmNlID09PSBcImxpZ2h0XCIgPyBcImJsYWNrXCIgOiBcIndoaXRlXCIpO1xuICBjb25zdCBiYWNrZ3JvdW5kT3BhY2l0eSA9IG9wdGlvbnM/LmJhY2tncm91bmRPcGFjaXR5IHx8IDAuMTtcblxuICBjb25zdCBzdHJva2UgPSAxMDtcbiAgY29uc3QgcGFkZGluZyA9IDU7XG4gIGNvbnN0IHJhZGl1cyA9IDUwIC0gcGFkZGluZyAtIHN0cm9rZSAvIDI7XG5cbiAgY29uc3Qgc3ZnID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMTAwcHhcIiBoZWlnaHQ9XCIxMDBweFwiPlxuICAgICAgPGNpcmNsZSBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCIke3JhZGl1c31cIiBzdHJva2Utd2lkdGg9XCIke3N0cm9rZX1cIiBzdHJva2U9XCIke1xuICAgICAgICBwcm9ncmVzcyA8IDEgPyBiYWNrZ3JvdW5kIDogY29sb3JcbiAgICAgIH1cIiBvcGFjaXR5PVwiJHtwcm9ncmVzcyA8IDEgPyBiYWNrZ3JvdW5kT3BhY2l0eSA6IFwiMVwifVwiIGZpbGw9XCJub25lXCIgLz5cbiAgICAgICR7XG4gICAgICAgIHByb2dyZXNzID4gMCAmJiBwcm9ncmVzcyA8IDFcbiAgICAgICAgICA/IGA8cGF0aCBkPVwiJHtkZXNjcmliZUFyYyhcbiAgICAgICAgICAgICAgNTAsXG4gICAgICAgICAgICAgIDUwLFxuICAgICAgICAgICAgICByYWRpdXMsXG4gICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgIHByb2dyZXNzICogMzYwLFxuICAgICAgICAgICAgKX1cIiBzdHJva2U9XCIke2NvbG9yfVwiIHN0cm9rZS13aWR0aD1cIiR7c3Ryb2tlfVwiIGZpbGw9XCJub25lXCIgLz5gXG4gICAgICAgICAgOiBcIlwiXG4gICAgICB9XG4gICAgPC9zdmc+XG4gIGAucmVwbGFjZUFsbChcIlxcblwiLCBcIlwiKTtcbiAgcmV0dXJuIGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoc3ZnKX1gO1xufVxuIiwgImV4cG9ydCB7IE9BdXRoU2VydmljZSB9IGZyb20gXCIuL09BdXRoU2VydmljZVwiO1xuZXhwb3J0IHsgd2l0aEFjY2Vzc1Rva2VuLCBnZXRBY2Nlc3NUb2tlbiB9IGZyb20gXCIuL3dpdGhBY2Nlc3NUb2tlblwiO1xuXG5leHBvcnQgdHlwZSB7IFdpdGhBY2Nlc3NUb2tlbkNvbXBvbmVudE9yRm4gfSBmcm9tIFwiLi93aXRoQWNjZXNzVG9rZW5cIjtcbmV4cG9ydCB0eXBlIHtcbiAgT25BdXRob3JpemVQYXJhbXMsXG4gIE9BdXRoU2VydmljZU9wdGlvbnMsXG4gIFByb3ZpZGVyV2l0aERlZmF1bHRDbGllbnRPcHRpb25zLFxuICBQcm92aWRlck9wdGlvbnMsXG59IGZyb20gXCIuL3R5cGVzXCI7XG4iLCAiaW1wb3J0IHsgQ29sb3IsIE9BdXRoIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgUFJPVklERVJfQ0xJRU5UX0lEUyB9IGZyb20gXCIuL3Byb3ZpZGVyc1wiO1xuaW1wb3J0IHR5cGUge1xuICBPQXV0aFNlcnZpY2VPcHRpb25zLFxuICBPbkF1dGhvcml6ZVBhcmFtcyxcbiAgUHJvdmlkZXJPcHRpb25zLFxuICBQcm92aWRlcldpdGhEZWZhdWx0Q2xpZW50T3B0aW9ucyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLyoqXG4gKiBDbGFzcyBhbGxvd2luZyB0byBjcmVhdGUgYW4gT0F1dGggc2VydmljZSB1c2luZyB0aGUgdGhlIFBLQ0UgKFByb29mIEtleSBmb3IgQ29kZSBFeGNoYW5nZSkgZmxvdy5cbiAqXG4gKiBUaGlzIHNlcnZpY2UgaXMgY2FwYWJsZSBvZiBzdGFydGluZyB0aGUgYXV0aG9yaXphdGlvbiBwcm9jZXNzLCBmZXRjaGluZyBhbmQgcmVmcmVzaGluZyB0b2tlbnMsXG4gKiBhcyB3ZWxsIGFzIG1hbmFnaW5nIHRoZSBhdXRoZW50aWNhdGlvbiBzdGF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3Qgb2F1dGhDbGllbnQgPSBuZXcgT0F1dGguUEtDRUNsaWVudCh7IC4uLiB9KTtcbiAqIGNvbnN0IG9hdXRoU2VydmljZSA9IG5ldyBPQXV0aFNlcnZpY2Uoe1xuICogICBjbGllbnQ6IG9hdXRoQ2xpZW50LFxuICogICBjbGllbnRJZDogJ3lvdXItY2xpZW50LWlkJyxcbiAqICAgc2NvcGU6ICdyZXF1aXJlZCBzY29wZXMnLFxuICogICBhdXRob3JpemVVcmw6ICdodHRwczovL3Byb3ZpZGVyLmNvbS9vYXV0aC9hdXRob3JpemUnLFxuICogICB0b2tlblVybDogJ2h0dHBzOi8vcHJvdmlkZXIuY29tL29hdXRoL3Rva2VuJyxcbiAqICAgcmVmcmVzaFRva2VuVXJsOiAnaHR0cHM6Ly9wcm92aWRlci5jb20vb2F1dGgvdG9rZW4nLFxuICogICBleHRyYVBhcmFtZXRlcnM6IHsgJ2FkZGl0aW9uYWxfcGFyYW0nOiAndmFsdWUnIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBPQXV0aFNlcnZpY2UgaW1wbGVtZW50cyBPQXV0aFNlcnZpY2VPcHRpb25zIHtcbiAgcHVibGljIGNsaWVudElkOiBzdHJpbmc7XG4gIHB1YmxpYyBzY29wZTogc3RyaW5nO1xuICBwdWJsaWMgY2xpZW50OiBPQXV0aC5QS0NFQ2xpZW50O1xuICBwdWJsaWMgZXh0cmFQYXJhbWV0ZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgcHVibGljIGF1dGhvcml6ZVVybDogc3RyaW5nO1xuICBwdWJsaWMgdG9rZW5Vcmw6IHN0cmluZztcbiAgcHVibGljIHJlZnJlc2hUb2tlblVybD86IHN0cmluZztcbiAgcHVibGljIGJvZHlFbmNvZGluZz86IFwianNvblwiIHwgXCJ1cmwtZW5jb2RlZFwiO1xuICBwdWJsaWMgcGVyc29uYWxBY2Nlc3NUb2tlbj86IHN0cmluZztcbiAgb25BdXRob3JpemU/OiAocGFyYW1zOiBPbkF1dGhvcml6ZVBhcmFtcykgPT4gdm9pZDtcbiAgdG9rZW5SZXNwb25zZVBhcnNlcjogKHJlc3BvbnNlOiB1bmtub3duKSA9PiBPQXV0aC5Ub2tlblJlc3BvbnNlO1xuICB0b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcjogKHJlc3BvbnNlOiB1bmtub3duKSA9PiBPQXV0aC5Ub2tlblJlc3BvbnNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE9BdXRoU2VydmljZU9wdGlvbnMpIHtcbiAgICB0aGlzLmNsaWVudElkID0gb3B0aW9ucy5jbGllbnRJZDtcbiAgICB0aGlzLnNjb3BlID0gQXJyYXkuaXNBcnJheShvcHRpb25zLnNjb3BlKSA/IG9wdGlvbnMuc2NvcGUuam9pbihcIiBcIikgOiBvcHRpb25zLnNjb3BlO1xuICAgIHRoaXMucGVyc29uYWxBY2Nlc3NUb2tlbiA9IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbjtcbiAgICB0aGlzLmJvZHlFbmNvZGluZyA9IG9wdGlvbnMuYm9keUVuY29kaW5nO1xuICAgIHRoaXMuY2xpZW50ID0gb3B0aW9ucy5jbGllbnQ7XG4gICAgdGhpcy5leHRyYVBhcmFtZXRlcnMgPSBvcHRpb25zLmV4dHJhUGFyYW1ldGVycztcbiAgICB0aGlzLmF1dGhvcml6ZVVybCA9IG9wdGlvbnMuYXV0aG9yaXplVXJsO1xuICAgIHRoaXMudG9rZW5VcmwgPSBvcHRpb25zLnRva2VuVXJsO1xuICAgIHRoaXMucmVmcmVzaFRva2VuVXJsID0gb3B0aW9ucy5yZWZyZXNoVG9rZW5Vcmw7XG4gICAgdGhpcy5vbkF1dGhvcml6ZSA9IG9wdGlvbnMub25BdXRob3JpemU7XG4gICAgdGhpcy50b2tlblJlc3BvbnNlUGFyc2VyID0gb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyID8/ICgoeCkgPT4geCBhcyBPQXV0aC5Ub2tlblJlc3BvbnNlKTtcbiAgICB0aGlzLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyID0gb3B0aW9ucy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlciA/PyAoKHgpID0+IHggYXMgT0F1dGguVG9rZW5SZXNwb25zZSk7XG4gICAgdGhpcy5hdXRob3JpemUgPSB0aGlzLmF1dGhvcml6ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzYW5hIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgYXNhbmEgPSBPQXV0aFNlcnZpY2UuYXNhbmEoeyBzY29wZTogJ2RlZmF1bHQnIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhc2FuYShvcHRpb25zOiBQcm92aWRlcldpdGhEZWZhdWx0Q2xpZW50T3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAgICAgIGNsaWVudDogbmV3IE9BdXRoLlBLQ0VDbGllbnQoe1xuICAgICAgICByZWRpcmVjdE1ldGhvZDogT0F1dGguUmVkaXJlY3RNZXRob2QuV2ViLFxuICAgICAgICBwcm92aWRlck5hbWU6IFwiQXNhbmFcIixcbiAgICAgICAgcHJvdmlkZXJJY29uOiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI1MVwiIGhlaWdodD1cIjIzMlwiIGZpbGw9XCJub25lXCI+PHBhdGggZmlsbD1cIiNGMDZBNkFcIiBkPVwiTTE3OS4zODMgNTQuMzczYzAgMzAuMDE3LTI0LjMzNyA1NC4zNzQtNTQuMzU0IDU0LjM3NC0zMC4wMzUgMC01NC4zNzMtMjQuMzM4LTU0LjM3My01NC4zNzRDNzAuNjU2IDI0LjMzOCA5NC45OTMgMCAxMjUuMDI5IDBjMzAuMDE3IDAgNTQuMzU0IDI0LjMzOCA1NC4zNTQgNTQuMzczWk01NC4zOTMgMTIyLjMzQzI0LjM3NiAxMjIuMzMuMDIgMTQ2LjY2OC4wMiAxNzYuNjg1YzAgMzAuMDE3IDI0LjMzNyA1NC4zNzMgNTQuMzczIDU0LjM3MyAzMC4wMzUgMCA1NC4zNzMtMjQuMzM4IDU0LjM3My01NC4zNzMgMC0zMC4wMTctMjQuMzM4LTU0LjM1NS01NC4zNzMtNTQuMzU1Wm0xNDEuMjUzIDBjLTMwLjAzNSAwLTU0LjM3MyAyNC4zMzgtNTQuMzczIDU0LjM3NCAwIDMwLjAzNSAyNC4zMzggNTQuMzczIDU0LjM3MyA1NC4zNzMgMzAuMDE3IDAgNTQuMzc0LTI0LjMzOCA1NC4zNzQtNTQuMzczIDAtMzAuMDM2LTI0LjMzOC01NC4zNzQtNTQuMzc0LTU0LjM3NFpcIi8+PC9zdmc+YCxcbiAgICAgICAgKX1gLFxuICAgICAgICBwcm92aWRlcklkOiBcImFzYW5hXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbm5lY3QgeW91ciBBc2FuYSBhY2NvdW50XCIsXG4gICAgICB9KSxcbiAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkID8/IFBST1ZJREVSX0NMSUVOVF9JRFMuYXNhbmEsXG4gICAgICBhdXRob3JpemVVcmw6IG9wdGlvbnMuYXV0aG9yaXplVXJsID8/IFwiaHR0cHM6Ly9hc2FuYS5vYXV0aC5yYXljYXN0LmNvbS9hdXRob3JpemVcIixcbiAgICAgIHRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsID8/IFwiaHR0cHM6Ly9hc2FuYS5vYXV0aC5yYXljYXN0LmNvbS90b2tlblwiLFxuICAgICAgcmVmcmVzaFRva2VuVXJsOiBvcHRpb25zLnJlZnJlc2hUb2tlblVybCA/PyBcImh0dHBzOi8vYXNhbmEub2F1dGgucmF5Y2FzdC5jb20vcmVmcmVzaC10b2tlblwiLFxuICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBwZXJzb25hbEFjY2Vzc1Rva2VuOiBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4sXG4gICAgICBvbkF1dGhvcml6ZTogb3B0aW9ucy5vbkF1dGhvcml6ZSxcbiAgICAgIGJvZHlFbmNvZGluZzogb3B0aW9ucy5ib2R5RW5jb2RpbmcsXG4gICAgICB0b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcixcbiAgICAgIHRva2VuUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZXNwb25zZVBhcnNlcixcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXRIdWIgT0F1dGggc2VydmljZSBwcm92aWRlZCBvdXQgb2YgdGhlIGJveC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCBnaXRodWIgPSBPQXV0aFNlcnZpY2UuZ2l0aHViKHsgc2NvcGU6ICdyZXBvIHVzZXInIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnaXRodWIob3B0aW9uczogUHJvdmlkZXJXaXRoRGVmYXVsdENsaWVudE9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9BdXRoU2VydmljZSh7XG4gICAgICBjbGllbnQ6IG5ldyBPQXV0aC5QS0NFQ2xpZW50KHtcbiAgICAgICAgcmVkaXJlY3RNZXRob2Q6IE9BdXRoLlJlZGlyZWN0TWV0aG9kLldlYixcbiAgICAgICAgcHJvdmlkZXJOYW1lOiBcIkdpdEh1YlwiLFxuICAgICAgICBwcm92aWRlckljb246IHtcbiAgICAgICAgICBzb3VyY2U6IGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI2NFwiIGhlaWdodD1cIjY0XCIgdmlld0JveD1cIjAgMCAxNiAxNlwiPjxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTggMEMzLjU4IDAgMCAzLjU4IDAgOGMwIDMuNTQgMi4yOSA2LjUzIDUuNDcgNy41OS40LjA3LjU1LS4xNy41NS0uMzggMC0uMTktLjAxLS44Mi0uMDEtMS40OS0yLjAxLjM3LTIuNTMtLjQ5LTIuNjktLjk0LS4wOS0uMjMtLjQ4LS45NC0uODItMS4xMy0uMjgtLjE1LS42OC0uNTItLjAxLS41My42My0uMDEgMS4wOC41OCAxLjIzLjgyLjcyIDEuMjEgMS44Ny44NyAyLjMzLjY2LjA3LS41Mi4yOC0uODcuNTEtMS4wNy0xLjc4LS4yLTMuNjQtLjg5LTMuNjQtMy45NSAwLS44Ny4zMS0xLjU5LjgyLTIuMTUtLjA4LS4yLS4zNi0xLjAyLjA4LTIuMTIgMCAwIC42Ny0uMjEgMi4yLjgyLjY0LS4xOCAxLjMyLS4yNyAyLS4yNy42OCAwIDEuMzYuMDkgMiAuMjcgMS41My0xLjA0IDIuMi0uODIgMi4yLS44Mi40NCAxLjEuMTYgMS45Mi4wOCAyLjEyLjUxLjU2LjgyIDEuMjcuODIgMi4xNSAwIDMuMDctMS44NyAzLjc1LTMuNjUgMy45NS4yOS4yNS41NC43My41NCAxLjQ4IDAgMS4wNy0uMDEgMS45My0uMDEgMi4yIDAgLjIxLjE1LjQ2LjU1LjM4QTguMDEzIDguMDEzIDAgMCAwIDE2IDhjMC00LjQyLTMuNTgtOC04LTh6XCIvPjwvc3ZnPmAsXG4gICAgICAgICAgKX1gLFxuXG4gICAgICAgICAgdGludENvbG9yOiBDb2xvci5QcmltYXJ5VGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXJJZDogXCJnaXRodWJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29ubmVjdCB5b3VyIEdpdEh1YiBhY2NvdW50XCIsXG4gICAgICB9KSxcbiAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkID8/IFBST1ZJREVSX0NMSUVOVF9JRFMuZ2l0aHViLFxuICAgICAgYXV0aG9yaXplVXJsOiBvcHRpb25zLmF1dGhvcml6ZVVybCA/PyBcImh0dHBzOi8vZ2l0aHViLm9hdXRoLnJheWNhc3QuY29tL2F1dGhvcml6ZVwiLFxuICAgICAgdG9rZW5Vcmw6IG9wdGlvbnMudG9rZW5VcmwgPz8gXCJodHRwczovL2dpdGh1Yi5vYXV0aC5yYXljYXN0LmNvbS90b2tlblwiLFxuICAgICAgcmVmcmVzaFRva2VuVXJsOiBvcHRpb25zLnJlZnJlc2hUb2tlblVybCA/PyBcImh0dHBzOi8vZ2l0aHViLm9hdXRoLnJheWNhc3QuY29tL3JlZnJlc2gtdG9rZW5cIixcbiAgICAgIHNjb3BlOiBvcHRpb25zLnNjb3BlLFxuICAgICAgcGVyc29uYWxBY2Nlc3NUb2tlbjogb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuLFxuICAgICAgb25BdXRob3JpemU6IG9wdGlvbnMub25BdXRob3JpemUsXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMuYm9keUVuY29kaW5nLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICB0b2tlblJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVzcG9uc2VQYXJzZXIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR29vZ2xlIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgZ29vZ2xlID0gT0F1dGhTZXJ2aWNlLmdvb2dsZSh7XG4gICAqICAgY2xpZW50SWQ6ICdjdXN0b20tY2xpZW50LWlkJyxcbiAgICogICBhdXRob3JpemVVcmw6ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvdjIvYXV0aCcsXG4gICAqICAgdG9rZW5Vcmw6ICdodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbicsXG4gICAqICAgc2NvcGU6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5JyxcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnb29nbGUob3B0aW9uczogUHJvdmlkZXJPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5BcHBVUkksXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJHb29nbGVcIixcbiAgICAgICAgcHJvdmlkZXJJY29uOiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBzdHlsZT1cImRpc3BsYXk6YmxvY2tcIiB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+PHBhdGggZmlsbD1cIiNFQTQzMzVcIiBkPVwiTTI0IDkuNWMzLjU0IDAgNi43MSAxLjIyIDkuMjEgMy42bDYuODUtNi44NUMzNS45IDIuMzggMzAuNDcgMCAyNCAwIDE0LjYyIDAgNi41MSA1LjM4IDIuNTYgMTMuMjJsNy45OCA2LjE5QzEyLjQzIDEzLjcyIDE3Ljc0IDkuNSAyNCA5LjV6XCIvPjxwYXRoIGZpbGw9XCIjNDI4NUY0XCIgZD1cIk00Ni45OCAyNC41NWMwLTEuNTctLjE1LTMuMDktLjM4LTQuNTVIMjR2OS4wMmgxMi45NGMtLjU4IDIuOTYtMi4yNiA1LjQ4LTQuNzggNy4xOGw3LjczIDZjNC41MS00LjE4IDcuMDktMTAuMzYgNy4wOS0xNy42NXpcIi8+PHBhdGggZmlsbD1cIiNGQkJDMDVcIiBkPVwiTTEwLjUzIDI4LjU5Yy0uNDgtMS40NS0uNzYtMi45OS0uNzYtNC41OXMuMjctMy4xNC43Ni00LjU5bC03Ljk4LTYuMTlDLjkyIDE2LjQ2IDAgMjAuMTIgMCAyNGMwIDMuODguOTIgNy41NCAyLjU2IDEwLjc4bDcuOTctNi4xOXpcIi8+PHBhdGggZmlsbD1cIiMzNEE4NTNcIiBkPVwiTTI0IDQ4YzYuNDggMCAxMS45My0yLjEzIDE1Ljg5LTUuODFsLTcuNzMtNmMtMi4xNSAxLjQ1LTQuOTIgMi4zLTguMTYgMi4zLTYuMjYgMC0xMS41Ny00LjIyLTEzLjQ3LTkuOTFsLTcuOTggNi4xOUM2LjUxIDQyLjYyIDE0LjYyIDQ4IDI0IDQ4elwiLz48cGF0aCBmaWxsPVwibm9uZVwiIGQ9XCJNMCAwaDQ4djQ4SDB6XCIvPjwvc3ZnPmAsXG4gICAgICAgICl9YCxcbiAgICAgICAgcHJvdmlkZXJJZDogXCJnb29nbGVcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29ubmVjdCB5b3VyIEdvb2dsZSBhY2NvdW50XCIsXG4gICAgICB9KSxcbiAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgYXV0aG9yaXplVXJsOiBvcHRpb25zLmF1dGhvcml6ZVVybCA/PyBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi92Mi9hdXRoXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuXCIsXG4gICAgICByZWZyZXNoVG9rZW5Vcmw6IG9wdGlvbnMudG9rZW5VcmwsXG4gICAgICBzY29wZTogb3B0aW9ucy5zY29wZSxcbiAgICAgIHBlcnNvbmFsQWNjZXNzVG9rZW46IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbixcbiAgICAgIGJvZHlFbmNvZGluZzogb3B0aW9ucy5ib2R5RW5jb2RpbmcgPz8gXCJ1cmwtZW5jb2RlZFwiLFxuICAgICAgb25BdXRob3JpemU6IG9wdGlvbnMub25BdXRob3JpemUsXG4gICAgICB0b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcixcbiAgICAgIHRva2VuUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZXNwb25zZVBhcnNlcixcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKaXJhIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgamlyYSA9IE9BdXRoU2VydmljZS5qaXJhKHtcbiAgICogICBjbGllbnRJZDogJ2N1c3RvbS1jbGllbnQtaWQnLFxuICAgKiAgIGF1dGhvcml6ZVVybDogJ2h0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL2F1dGhvcml6ZScsXG4gICAqICAgdG9rZW5Vcmw6ICdodHRwczovL2FwaS5hdGxhc3NpYW4uY29tL29hdXRoL3Rva2VuJyxcbiAgICogICBzY29wZTogJ3JlYWQ6amlyYS11c2VyIHJlYWQ6amlyYS13b3JrIG9mZmxpbmVfYWNjZXNzJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGppcmEob3B0aW9uczogUHJvdmlkZXJPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5XZWIsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJKaXJhXCIsXG4gICAgICAgIHByb3ZpZGVySWNvbjogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgd2lkdGg9XCIyMzYxXCIgaGVpZ2h0PVwiMjUwMFwiIHZpZXdCb3g9XCIyLjU5IDAgMjE0LjA5MSAyMjRcIj48bGluZWFyR3JhZGllbnQgaWQ9XCJhXCIgeDE9XCIxMDIuNFwiIHgyPVwiNTYuMTVcIiB5MT1cIjIxOC42M1wiIHkyPVwiMTcyLjM5XCIgZ3JhZGllbnRUcmFuc2Zvcm09XCJtYXRyaXgoMSAwIDAgLTEgMCAyNjQpXCIgZ3JhZGllbnRVbml0cz1cInVzZXJTcGFjZU9uVXNlXCI+PHN0b3Agb2Zmc2V0PVwiLjE4XCIgc3RvcC1jb2xvcj1cIiMwMDUyY2NcIi8+PHN0b3Agb2Zmc2V0PVwiMVwiIHN0b3AtY29sb3I9XCIjMjY4NGZmXCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHhsaW5rOmhyZWY9XCIjYVwiIGlkPVwiYlwiIHgxPVwiMTE0LjY1XCIgeDI9XCIxNjAuODFcIiB5MT1cIjg1Ljc3XCIgeTI9XCIxMzEuOTJcIi8+PHBhdGggZmlsbD1cIiMyNjg0ZmZcIiBkPVwiTTIxNC4wNiAxMDUuNzMgMTE3LjY3IDkuMzQgMTA4LjMzIDAgMzUuNzcgNzIuNTYgMi41OSAxMDUuNzNhOC44OSA4Ljg5IDAgMCAwIDAgMTIuNTRsNjYuMjkgNjYuMjlMMTA4LjMzIDIyNGw3Mi41NS03Mi41NiAxLjEzLTEuMTIgMzIuMDUtMzJhOC44NyA4Ljg3IDAgMCAwIDAtMTIuNTl6bS0xMDUuNzMgMzkuMzlMNzUuMjEgMTEybDMzLjEyLTMzLjEyTDE0MS40NCAxMTJ6XCIvPjxwYXRoIGZpbGw9XCJ1cmwoI2EpXCIgZD1cIk0xMDguMzMgNzguODhhNTUuNzUgNTUuNzUgMCAwIDEtLjI0LTc4LjYxTDM1LjYyIDcyLjcxbDM5LjQ0IDM5LjQ0elwiLz48cGF0aCBmaWxsPVwidXJsKCNiKVwiIGQ9XCJtMTQxLjUzIDExMS45MS0zMy4yIDMzLjIxYTU1Ljc3IDU1Ljc3IDAgMCAxIDAgNzguODZMMTgxIDE1MS4zNXpcIi8+PC9zdmc+YCxcbiAgICAgICAgKX1gLFxuICAgICAgICBwcm92aWRlcklkOiBcImppcmFcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29ubmVjdCB5b3VyIEppcmEgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL2F1dGguYXRsYXNzaWFuLmNvbS9hdXRob3JpemVcIixcbiAgICAgIHRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsID8/IFwiaHR0cHM6Ly9hdXRoLmF0bGFzc2lhbi5jb20vb2F1dGgvdG9rZW5cIixcbiAgICAgIHJlZnJlc2hUb2tlblVybDogb3B0aW9ucy5yZWZyZXNoVG9rZW5VcmwsXG4gICAgICBzY29wZTogb3B0aW9ucy5zY29wZSxcbiAgICAgIHBlcnNvbmFsQWNjZXNzVG9rZW46IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbixcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgYm9keUVuY29kaW5nOiBvcHRpb25zLmJvZHlFbmNvZGluZyxcbiAgICAgIHRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyLFxuICAgICAgdG9rZW5SZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbmVhciBPQXV0aCBzZXJ2aWNlIHByb3ZpZGVkIG91dCBvZiB0aGUgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGxpbmVhciA9IE9BdXRoU2VydmljZS5saW5lYXIoeyBzY29wZTogJ3JlYWQgd3JpdGUnIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBsaW5lYXIob3B0aW9uczogUHJvdmlkZXJXaXRoRGVmYXVsdENsaWVudE9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9BdXRoU2VydmljZSh7XG4gICAgICBjbGllbnQ6IG5ldyBPQXV0aC5QS0NFQ2xpZW50KHtcbiAgICAgICAgcmVkaXJlY3RNZXRob2Q6IE9BdXRoLlJlZGlyZWN0TWV0aG9kLldlYixcbiAgICAgICAgcHJvdmlkZXJOYW1lOiBcIkxpbmVhclwiLFxuICAgICAgICBwcm92aWRlckljb246IHtcbiAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgIGxpZ2h0OiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIiMyMjIzMjZcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiPjxwYXRoIGQ9XCJNMS4yMjU0MSA2MS41MjI4Yy0uMjIyNS0uOTQ4NS45MDc0OC0xLjU0NTkgMS41OTYzOC0uODU3TDM5LjMzNDIgOTcuMTc4MmMuNjg4OS42ODg5LjA5MTUgMS44MTg5LS44NTcgMS41OTY0QzIwLjA1MTUgOTQuNDUyMiA1LjU0Nzc5IDc5Ljk0ODUgMS4yMjU0MSA2MS41MjI4Wk0uMDAxODkxMzUgNDYuODg5MWMtLjAxNzY0Mzc1LjI4MzMuMDg4ODcyMTUuNTU5OS4yODk1NzE2NS43NjA2TDUyLjM1MDMgOTkuNzA4NWMuMjAwNy4yMDA3LjQ3NzMuMzA3NS43NjA2LjI4OTYgMi4zNjkyLS4xNDc2IDQuNjkzOC0uNDYgNi45NjI0LS45MjU5Ljc2NDUtLjE1NyAxLjAzMDEtMS4wOTYzLjQ3ODItMS42NDgxTDIuNTc1OTUgMzkuNDQ4NWMtLjU1MTg2LS41NTE5LTEuNDkxMTctLjI4NjMtMS42NDgxNzQuNDc4Mi0uNDY1OTE1IDIuMjY4Ni0uNzc4MzIgNC41OTMyLS45MjU4ODQ2NSA2Ljk2MjRaTTQuMjEwOTMgMjkuNzA1NGMtLjE2NjQ5LjM3MzgtLjA4MTY5LjgxMDYuMjA3NjUgMS4xbDY0Ljc3NjAyIDY0Ljc3NmMuMjg5NC4yODk0LjcyNjIuMzc0MiAxLjEuMjA3NyAxLjc4NjEtLjc5NTYgMy41MTcxLTEuNjkyNyA1LjE4NTUtMi42ODQuNTUyMS0uMzI4LjYzNzMtMS4wODY3LjE4MzItMS41NDA3TDguNDM1NjYgMjQuMzM2N2MtLjQ1NDA5LS40NTQxLTEuMjEyNzEtLjM2ODktMS41NDA3NC4xODMyLS45OTEzMiAxLjY2ODQtMS44ODg0MyAzLjM5OTQtMi42ODM5OSA1LjE4NTVaTTEyLjY1ODcgMTguMDc0Yy0uMzcwMS0uMzcwMS0uMzkzLS45NjM3LS4wNDQzLTEuMzU0MUMyMS43Nzk1IDYuNDU5MzEgMzUuMTExNCAwIDQ5Ljk1MTkgMCA3Ny41OTI3IDAgMTAwIDIyLjQwNzMgMTAwIDUwLjA0ODFjMCAxNC44NDA1LTYuNDU5MyAyOC4xNzI0LTE2LjcxOTkgMzcuMzM3NS0uMzkwMy4zNDg3LS45ODQuMzI1OC0xLjM1NDItLjA0NDNMMTIuNjU4NyAxOC4wNzRaXCIvPjwvc3ZnPmAsXG4gICAgICAgICAgICApfWAsXG4gICAgICAgICAgICBkYXJrOiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIiNmZmZcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiPjxwYXRoIGQ9XCJNMS4yMjU0MSA2MS41MjI4Yy0uMjIyNS0uOTQ4NS45MDc0OC0xLjU0NTkgMS41OTYzOC0uODU3TDM5LjMzNDIgOTcuMTc4MmMuNjg4OS42ODg5LjA5MTUgMS44MTg5LS44NTcgMS41OTY0QzIwLjA1MTUgOTQuNDUyMiA1LjU0Nzc5IDc5Ljk0ODUgMS4yMjU0MSA2MS41MjI4Wk0uMDAxODkxMzUgNDYuODg5MWMtLjAxNzY0Mzc1LjI4MzMuMDg4ODcyMTUuNTU5OS4yODk1NzE2NS43NjA2TDUyLjM1MDMgOTkuNzA4NWMuMjAwNy4yMDA3LjQ3NzMuMzA3NS43NjA2LjI4OTYgMi4zNjkyLS4xNDc2IDQuNjkzOC0uNDYgNi45NjI0LS45MjU5Ljc2NDUtLjE1NyAxLjAzMDEtMS4wOTYzLjQ3ODItMS42NDgxTDIuNTc1OTUgMzkuNDQ4NWMtLjU1MTg2LS41NTE5LTEuNDkxMTctLjI4NjMtMS42NDgxNzQuNDc4Mi0uNDY1OTE1IDIuMjY4Ni0uNzc4MzIgNC41OTMyLS45MjU4ODQ2NSA2Ljk2MjRaTTQuMjEwOTMgMjkuNzA1NGMtLjE2NjQ5LjM3MzgtLjA4MTY5LjgxMDYuMjA3NjUgMS4xbDY0Ljc3NjAyIDY0Ljc3NmMuMjg5NC4yODk0LjcyNjIuMzc0MiAxLjEuMjA3NyAxLjc4NjEtLjc5NTYgMy41MTcxLTEuNjkyNyA1LjE4NTUtMi42ODQuNTUyMS0uMzI4LjYzNzMtMS4wODY3LjE4MzItMS41NDA3TDguNDM1NjYgMjQuMzM2N2MtLjQ1NDA5LS40NTQxLTEuMjEyNzEtLjM2ODktMS41NDA3NC4xODMyLS45OTEzMiAxLjY2ODQtMS44ODg0MyAzLjM5OTQtMi42ODM5OSA1LjE4NTVaTTEyLjY1ODcgMTguMDc0Yy0uMzcwMS0uMzcwMS0uMzkzLS45NjM3LS4wNDQzLTEuMzU0MUMyMS43Nzk1IDYuNDU5MzEgMzUuMTExNCAwIDQ5Ljk1MTkgMCA3Ny41OTI3IDAgMTAwIDIyLjQwNzMgMTAwIDUwLjA0ODFjMCAxNC44NDA1LTYuNDU5MyAyOC4xNzI0LTE2LjcxOTkgMzcuMzM3NS0uMzkwMy4zNDg3LS45ODQuMzI1OC0xLjM1NDItLjA0NDNMMTIuNjU4NyAxOC4wNzRaXCIgLz48L3N2Zz5gLFxuICAgICAgICAgICAgKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHByb3ZpZGVySWQ6IFwibGluZWFyXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbm5lY3QgeW91ciBMaW5lYXIgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCA/PyBQUk9WSURFUl9DTElFTlRfSURTLmxpbmVhcixcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL2xpbmVhci5vYXV0aC5yYXljYXN0LmNvbS9hdXRob3JpemVcIixcbiAgICAgIHRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsID8/IFwiaHR0cHM6Ly9saW5lYXIub2F1dGgucmF5Y2FzdC5jb20vdG9rZW5cIixcbiAgICAgIHJlZnJlc2hUb2tlblVybDogb3B0aW9ucy5yZWZyZXNoVG9rZW5VcmwgPz8gXCJodHRwczovL2xpbmVhci5vYXV0aC5yYXljYXN0LmNvbS9yZWZyZXNoLXRva2VuXCIsXG4gICAgICBzY29wZTogb3B0aW9ucy5zY29wZSxcbiAgICAgIGV4dHJhUGFyYW1ldGVyczoge1xuICAgICAgICBhY3RvcjogXCJ1c2VyXCIsXG4gICAgICB9LFxuICAgICAgb25BdXRob3JpemU6IG9wdGlvbnMub25BdXRob3JpemUsXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMuYm9keUVuY29kaW5nLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICB0b2tlblJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVzcG9uc2VQYXJzZXIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2xhY2sgT0F1dGggc2VydmljZSBwcm92aWRlZCBvdXQgb2YgdGhlIGJveC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCBzbGFjayA9IE9BdXRoU2VydmljZS5zbGFjayh7IHNjb3BlOiAnZW1vamk6cmVhZCcgfSlcbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNsYWNrKG9wdGlvbnM6IFByb3ZpZGVyV2l0aERlZmF1bHRDbGllbnRPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5XZWIsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJTbGFja1wiLFxuICAgICAgICBwcm92aWRlckljb246IGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCI3MyA3MyAxMjQgMTI0XCI+PHN0eWxlPi5zdDB7ZmlsbDojZTAxZTVhfS5zdDF7ZmlsbDojMzZjNWYwfS5zdDJ7ZmlsbDojMmViNjdkfS5zdDN7ZmlsbDojZWNiMjJlfTwvc3R5bGU+PHBhdGggZD1cIk05OS40IDE1MS4yYzAgNy4xLTUuOCAxMi45LTEyLjkgMTIuOS03LjEgMC0xMi45LTUuOC0xMi45LTEyLjkgMC03LjEgNS44LTEyLjkgMTIuOS0xMi45aDEyLjl2MTIuOXpNMTA1LjkgMTUxLjJjMC03LjEgNS44LTEyLjkgMTIuOS0xMi45czEyLjkgNS44IDEyLjkgMTIuOXYzMi4zYzAgNy4xLTUuOCAxMi45LTEyLjkgMTIuOXMtMTIuOS01LjgtMTIuOS0xMi45di0zMi4zelwiIGNsYXNzPVwic3QwXCIvPjxwYXRoIGQ9XCJNMTE4LjggOTkuNGMtNy4xIDAtMTIuOS01LjgtMTIuOS0xMi45IDAtNy4xIDUuOC0xMi45IDEyLjktMTIuOXMxMi45IDUuOCAxMi45IDEyLjl2MTIuOWgtMTIuOXpNMTE4LjggMTA1LjljNy4xIDAgMTIuOSA1LjggMTIuOSAxMi45cy01LjggMTIuOS0xMi45IDEyLjlIODYuNWMtNy4xIDAtMTIuOS01LjgtMTIuOS0xMi45czUuOC0xMi45IDEyLjktMTIuOWgzMi4zelwiIGNsYXNzPVwic3QxXCIvPjxwYXRoIGQ9XCJNMTcwLjYgMTE4LjhjMC03LjEgNS44LTEyLjkgMTIuOS0xMi45IDcuMSAwIDEyLjkgNS44IDEyLjkgMTIuOXMtNS44IDEyLjktMTIuOSAxMi45aC0xMi45di0xMi45ek0xNjQuMSAxMTguOGMwIDcuMS01LjggMTIuOS0xMi45IDEyLjktNy4xIDAtMTIuOS01LjgtMTIuOS0xMi45Vjg2LjVjMC03LjEgNS44LTEyLjkgMTIuOS0xMi45IDcuMSAwIDEyLjkgNS44IDEyLjkgMTIuOXYzMi4zelwiIGNsYXNzPVwic3QyXCIvPjxwYXRoIGQ9XCJNMTUxLjIgMTcwLjZjNy4xIDAgMTIuOSA1LjggMTIuOSAxMi45IDAgNy4xLTUuOCAxMi45LTEyLjkgMTIuOS03LjEgMC0xMi45LTUuOC0xMi45LTEyLjl2LTEyLjloMTIuOXpNMTUxLjIgMTY0LjFjLTcuMSAwLTEyLjktNS44LTEyLjktMTIuOSAwLTcuMSA1LjgtMTIuOSAxMi45LTEyLjloMzIuM2M3LjEgMCAxMi45IDUuOCAxMi45IDEyLjkgMCA3LjEtNS44IDEyLjktMTIuOSAxMi45aC0zMi4zelwiIGNsYXNzPVwic3QzXCIvPjwvc3ZnPmAsXG4gICAgICAgICl9YCxcbiAgICAgICAgcHJvdmlkZXJJZDogXCJzbGFja1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDb25uZWN0IHlvdXIgU2xhY2sgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCA/PyBQUk9WSURFUl9DTElFTlRfSURTLnNsYWNrLFxuICAgICAgYXV0aG9yaXplVXJsOiBvcHRpb25zLmF1dGhvcml6ZVVybCA/PyBcImh0dHBzOi8vc2xhY2sub2F1dGgucmF5Y2FzdC5jb20vYXV0aG9yaXplXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vc2xhY2sub2F1dGgucmF5Y2FzdC5jb20vdG9rZW5cIixcbiAgICAgIHJlZnJlc2hUb2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vc2xhY2sub2F1dGgucmF5Y2FzdC5jb20vcmVmcmVzaC10b2tlblwiLFxuICAgICAgc2NvcGU6IFwiXCIsXG4gICAgICBleHRyYVBhcmFtZXRlcnM6IHtcbiAgICAgICAgdXNlcl9zY29wZTogb3B0aW9ucy5zY29wZSxcbiAgICAgIH0sXG4gICAgICBwZXJzb25hbEFjY2Vzc1Rva2VuOiBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4sXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMudG9rZW5VcmwgPyBvcHRpb25zLmJvZHlFbmNvZGluZyA/PyBcInVybC1lbmNvZGVkXCIgOiBcImpzb25cIixcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgdG9rZW5SZXNwb25zZVBhcnNlcjpcbiAgICAgICAgb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyID8/XG4gICAgICAgICgocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IHJlc3BvbnNlLmF1dGhlZF91c2VyLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgIHNjb3BlOiByZXNwb25zZS5hdXRoZWRfdXNlci5zY29wZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBab29tIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3Qgem9vbSA9IE9BdXRoU2VydmljZS56b29tKHtcbiAgICogICBjbGllbnRJZDogJ2N1c3RvbS1jbGllbnQtaWQnLFxuICAgKiAgIGF1dGhvcml6ZVVybDogJ2h0dHBzOi8vem9vbS51cy9vYXV0aC9hdXRob3JpemUnLFxuICAgKiAgIHRva2VuVXJsOiAnaHR0cHM6Ly96b29tLnVzL29hdXRoL3Rva2VuJyxcbiAgICogICBzY29wZTogJ21lZXRpbmc6d3JpdGUnLFxuICAgKiAgIHBlcnNvbmFsQWNjZXNzVG9rZW46ICdwZXJzb25hbC1hY2Nlc3MtdG9rZW4nLFxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHpvb20ob3B0aW9uczogUHJvdmlkZXJPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5XZWIsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJab29tXCIsXG4gICAgICAgIHByb3ZpZGVySWNvbjogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAzNTEuODQ1IDgwXCI+PHBhdGggZD1cIk03My43ODYgNzguODM1SDEwLjg4QTEwLjg0MiAxMC44NDIgMCAwIDEgLjgzMyA3Mi4xMjJhMTAuODQxIDEwLjg0MSAwIDAgMSAyLjM1Ny0xMS44NUw0Ni43NjQgMTYuN2gtMzEuMjNDNi45NTQgMTYuNjk5IDAgOS43NDQgMCAxLjE2NWg1OC4wMTRjNC40MTQgMCA4LjM1NyAyLjYzNCAxMC4wNDYgNi43MTJhMTAuODQzIDEwLjg0MyAwIDAgMS0yLjM1NiAxMS44NUwyMi4xMyA2My4zMDJoMzYuMTIyYzguNTggMCAxNS41MzQgNi45NTUgMTUuNTM0IDE1LjUzNFptMjc4LjA1OS00OC41NDRDMzUxLjg0NSAxMy41ODggMzM4LjI1NiAwIDMyMS41NTMgMGMtOC45MzQgMC0xNi45NzUgMy44OS0yMi41MjQgMTAuMDYzQzI5My40OCAzLjg5IDI4NS40NCAwIDI3Ni41MDUgMGMtMTYuNzAzIDAtMzAuMjkxIDEzLjU4OC0zMC4yOTEgMzAuMjkxdjQ4LjU0NGM4LjU3OSAwIDE1LjUzNC02Ljk1NSAxNS41MzQtMTUuNTM0di0zMy4wMWMwLTguMTM3IDYuNjItMTQuNzU3IDE0Ljc1Ny0xNC43NTdzMTQuNzU3IDYuNjIgMTQuNzU3IDE0Ljc1N3YzMy4wMWMwIDguNTggNi45NTUgMTUuNTM0IDE1LjUzNCAxNS41MzRWMzAuMjkxYzAtOC4xMzcgNi42Mi0xNC43NTcgMTQuNzU3LTE0Ljc1N3MxNC43NTggNi42MiAxNC43NTggMTQuNzU3djMzLjAxYzAgOC41OCA2Ljk1NCAxNS41MzQgMTUuNTM0IDE1LjUzNFYzMC4yOTFaTTIzOC40NDcgNDBjMCAyMi4wOTEtMTcuOTA5IDQwLTQwIDQwcy00MC0xNy45MDktNDAtNDAgMTcuOTA4LTQwIDQwLTQwIDQwIDE3LjkwOSA0MCA0MFptLTE1LjUzNCAwYzAtMTMuNTEyLTEwLjk1NC0yNC40NjYtMjQuNDY2LTI0LjQ2NlMxNzMuOTggMjYuNDg4IDE3My45OCA0MHMxMC45NTMgMjQuNDY2IDI0LjQ2NiAyNC40NjZTMjIyLjkxMyA1My41MTIgMjIyLjkxMyA0MFptLTcwLjY4IDBjMCAyMi4wOTEtMTcuOTA5IDQwLTQwIDQwcy00MC0xNy45MDktNDAtNDAgMTcuOTA5LTQwIDQwLTQwIDQwIDE3LjkwOSA0MCA0MFptLTE1LjUzNCAwYzAtMTMuNTEyLTEwLjk1NC0yNC40NjYtMjQuNDY2LTI0LjQ2NlM4Ny43NjcgMjYuNDg4IDg3Ljc2NyA0MHMxMC45NTQgMjQuNDY2IDI0LjQ2NiAyNC40NjZTMTM2LjY5OSA1My41MTIgMTM2LjY5OSA0MFpcIiBzdHlsZT1cImZpbGw6IzBiNWNmZlwiLz48L3N2Zz5gLFxuICAgICAgICApfWAsXG4gICAgICAgIHByb3ZpZGVySWQ6IFwiem9vbVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDb25uZWN0IHlvdXIgWm9vbSBhY2NvdW50XCIsXG4gICAgICB9KSxcbiAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgYXV0aG9yaXplVXJsOiBvcHRpb25zLmF1dGhvcml6ZVVybCA/PyBcImh0dHBzOi8vem9vbS51cy9vYXV0aC9hdXRob3JpemVcIixcbiAgICAgIHRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsID8/IFwiaHR0cHM6Ly96b29tLnVzL29hdXRoL3Rva2VuXCIsXG4gICAgICByZWZyZXNoVG9rZW5Vcmw6IG9wdGlvbnMucmVmcmVzaFRva2VuVXJsLFxuICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBwZXJzb25hbEFjY2Vzc1Rva2VuOiBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4sXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMuYm9keUVuY29kaW5nID8/IFwidXJsLWVuY29kZWRcIixcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICB0b2tlblJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVzcG9uc2VQYXJzZXIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhdGVzIHRoZSBPQXV0aCBhdXRob3JpemF0aW9uIHByb2Nlc3Mgb3IgcmVmcmVzaGVzIGV4aXN0aW5nIHRva2VucyBpZiBuZWNlc3NhcnkuXG4gICAqIElmIHRoZSBjdXJyZW50IHRva2VuIHNldCBoYXMgYSByZWZyZXNoIHRva2VuIGFuZCBpdCBpcyBleHBpcmVkLCB0aGVuIHRoZSBmdW5jdGlvbiB3aWxsIHJlZnJlc2ggdGhlIHRva2Vucy5cbiAgICogSWYgbm8gdG9rZW5zIGV4aXN0LCBpdCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBhdXRob3JpemF0aW9uIHByb2Nlc3MgYW5kIGZldGNoIHRoZSB0b2tlbnMuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGFjY2VzcyB0b2tlbiBvYnRhaW5lZCBmcm9tIHRoZSBhdXRob3JpemF0aW9uIGZsb3csIG9yIG51bGwgaWYgdGhlIHRva2VuIGNvdWxkIG5vdCBiZSBvYnRhaW5lZC5cbiAgICovXG4gIGFzeW5jIGF1dGhvcml6ZSgpIHtcbiAgICBjb25zdCBjdXJyZW50VG9rZW5TZXQgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXRUb2tlbnMoKTtcbiAgICBpZiAoY3VycmVudFRva2VuU2V0Py5hY2Nlc3NUb2tlbikge1xuICAgICAgaWYgKGN1cnJlbnRUb2tlblNldC5yZWZyZXNoVG9rZW4gJiYgY3VycmVudFRva2VuU2V0LmlzRXhwaXJlZCgpKSB7XG4gICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHRoaXMucmVmcmVzaFRva2Vucyh7XG4gICAgICAgICAgdG9rZW46IGN1cnJlbnRUb2tlblNldC5yZWZyZXNoVG9rZW4sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIHdoZXJlIHRoZSByZWZyZXNoIHRva2VuIGZsb3dzIGZhaWxzLCBub3RoaW5nIGlzIHJldHVybmVkIGFuZCB0aGUgYXV0aG9yaXplIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2Fpbi5cbiAgICAgICAgaWYgKHRva2Vucykge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnNldFRva2Vucyh0b2tlbnMpO1xuICAgICAgICAgIHJldHVybiB0b2tlbnMuYWNjZXNzX3Rva2VuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudFRva2VuU2V0LmFjY2Vzc1Rva2VuO1xuICAgIH1cblxuICAgIGNvbnN0IGF1dGhSZXF1ZXN0ID0gYXdhaXQgdGhpcy5jbGllbnQuYXV0aG9yaXphdGlvblJlcXVlc3Qoe1xuICAgICAgZW5kcG9pbnQ6IHRoaXMuYXV0aG9yaXplVXJsLFxuICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICBzY29wZTogdGhpcy5zY29wZSxcbiAgICAgIGV4dHJhUGFyYW1ldGVyczogdGhpcy5leHRyYVBhcmFtZXRlcnMsXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IGF1dGhvcml6YXRpb25Db2RlIH0gPSBhd2FpdCB0aGlzLmNsaWVudC5hdXRob3JpemUoYXV0aFJlcXVlc3QpO1xuICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHRoaXMuZmV0Y2hUb2tlbnMoe1xuICAgICAgYXV0aFJlcXVlc3QsXG4gICAgICBhdXRob3JpemF0aW9uQ29kZSxcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMuY2xpZW50LnNldFRva2Vucyh0b2tlbnMpO1xuXG4gICAgcmV0dXJuIHRva2Vucy5hY2Nlc3NfdG9rZW47XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoVG9rZW5zKHtcbiAgICBhdXRoUmVxdWVzdCxcbiAgICBhdXRob3JpemF0aW9uQ29kZSxcbiAgfToge1xuICAgIGF1dGhSZXF1ZXN0OiBPQXV0aC5BdXRob3JpemF0aW9uUmVxdWVzdDtcbiAgICBhdXRob3JpemF0aW9uQ29kZTogc3RyaW5nO1xuICB9KSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMuYm9keUVuY29kaW5nID09PSBcInVybC1lbmNvZGVkXCIpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJjbGllbnRfaWRcIiwgdGhpcy5jbGllbnRJZCk7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwiY29kZVwiLCBhdXRob3JpemF0aW9uQ29kZSk7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwiY29kZV92ZXJpZmllclwiLCBhdXRoUmVxdWVzdC5jb2RlVmVyaWZpZXIpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImdyYW50X3R5cGVcIiwgXCJhdXRob3JpemF0aW9uX2NvZGVcIik7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwicmVkaXJlY3RfdXJpXCIsIGF1dGhSZXF1ZXN0LnJlZGlyZWN0VVJJKTtcblxuICAgICAgb3B0aW9ucyA9IHsgYm9keTogcGFyYW1zIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgY29kZTogYXV0aG9yaXphdGlvbkNvZGUsXG4gICAgICAgICAgY29kZV92ZXJpZmllcjogYXV0aFJlcXVlc3QuY29kZVZlcmlmaWVyLFxuICAgICAgICAgIGdyYW50X3R5cGU6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgICAgICAgcmVkaXJlY3RfdXJpOiBhdXRoUmVxdWVzdC5yZWRpcmVjdFVSSSxcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnRva2VuVXJsLCB7IG1ldGhvZDogXCJQT1NUXCIsIC4uLm9wdGlvbnMgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgY29uc29sZS5lcnJvcihcImZldGNoIHRva2VucyBlcnJvcjpcIiwgcmVzcG9uc2VUZXh0KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3Igd2hpbGUgZmV0Y2hpbmcgdG9rZW5zOiAke3Jlc3BvbnNlLnN0YXR1c30gKCR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0pXFxuJHtyZXNwb25zZVRleHR9YCk7XG4gICAgfVxuICAgIGNvbnN0IHRva2VucyA9IHRoaXMudG9rZW5SZXNwb25zZVBhcnNlcihhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuXG4gICAgLy8gU29tZSBjbGllbnRzIHN1Y2ggYXMgTGluZWFyIGNhbiByZXR1cm4gYSBzY29wZSBhcnJheSBpbnN0ZWFkIG9mIGEgc3RyaW5nXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodG9rZW5zLnNjb3BlKSA/IHsgLi4udG9rZW5zLCBzY29wZTogdG9rZW5zLnNjb3BlLmpvaW4oXCIgXCIpIH0gOiB0b2tlbnM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlZnJlc2hUb2tlbnMoeyB0b2tlbiB9OiB7IHRva2VuOiBzdHJpbmcgfSkge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmICh0aGlzLmJvZHlFbmNvZGluZyA9PT0gXCJ1cmwtZW5jb2RlZFwiKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwiY2xpZW50X2lkXCIsIHRoaXMuY2xpZW50SWQpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcInJlZnJlc2hfdG9rZW5cIiwgdG9rZW4pO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImdyYW50X3R5cGVcIiwgXCJyZWZyZXNoX3Rva2VuXCIpO1xuXG4gICAgICBvcHRpb25zID0geyBib2R5OiBwYXJhbXMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICByZWZyZXNoX3Rva2VuOiB0b2tlbixcbiAgICAgICAgICBncmFudF90eXBlOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlZnJlc2hUb2tlblVybCA/PyB0aGlzLnRva2VuVXJsLCB7IG1ldGhvZDogXCJQT1NUXCIsIC4uLm9wdGlvbnMgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgY29uc29sZS5lcnJvcihcInJlZnJlc2ggdG9rZW5zIGVycm9yOlwiLCByZXNwb25zZVRleHQpO1xuICAgICAgLy8gSWYgdGhlIHJlZnJlc2ggdG9rZW4gaXMgaW52YWxpZCwgc3RvcCB0aGUgZmxvdyBoZXJlLCBsb2cgb3V0IHRoZSB1c2VyIGFuZCBwcm9tcHQgdGhlbSB0byByZS1hdXRob3JpemUuXG4gICAgICB0aGlzLmNsaWVudC5kZXNjcmlwdGlvbiA9IGAke3RoaXMuY2xpZW50LnByb3ZpZGVyTmFtZX0gbmVlZHMgeW91IHRvIHNpZ24taW4gYWdhaW4uIFByZXNzIOKPjiBvciBjbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIGNvbnRpbnVlLmA7XG4gICAgICBhd2FpdCB0aGlzLmNsaWVudC5yZW1vdmVUb2tlbnMoKTtcbiAgICAgIGF3YWl0IHRoaXMuYXV0aG9yaXplKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRva2VuUmVzcG9uc2UgPSB0aGlzLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICB0b2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW4gPSB0b2tlblJlc3BvbnNlLnJlZnJlc2hfdG9rZW4gPz8gdG9rZW47XG4gICAgICByZXR1cm4gdG9rZW5SZXNwb25zZTtcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgUFJPVklERVJfQ0xJRU5UX0lEUyA9IHtcbiAgYXNhbmE6IFwiMTE5MTIwMTc0NTY4NDMxMlwiLFxuICBnaXRodWI6IFwiNzIzNWZlOGQ0MjE1N2YxZjM4YzBcIixcbiAgbGluZWFyOiBcImM4ZmYzN2I5MjI1YzNjOWFlZmQ3ZDY2ZWEwZTViNmYxXCIsXG4gIHNsYWNrOiBcIjg1MTc1Njg4NDY5Mi41NTQ2OTI3MjkwMjEyXCIsXG59O1xuIiwgImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGVudmlyb25tZW50LCBPQXV0aCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB0eXBlIHsgT0F1dGhUeXBlLCBPbkF1dGhvcml6ZVBhcmFtcyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmxldCB0b2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5sZXQgdHlwZTogT0F1dGhUeXBlIHwgbnVsbCA9IG51bGw7XG5sZXQgYXV0aG9yaXplOiBQcm9taXNlPHN0cmluZz4gfCBudWxsID0gbnVsbDtcbmxldCBnZXRJZFRva2VuOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4gfCBudWxsID0gbnVsbDtcbmxldCBvbkF1dGhvcml6ZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsO1xuXG50eXBlIFdpdGhBY2Nlc3NUb2tlblBhcmFtZXRlcnMgPSB7XG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBpbnN0YW5jZSBvZiBhIFBLQ0UgQ2xpZW50IHRoYXQgeW91IGNhbiBjcmVhdGUgdXNpbmcgUmF5Y2FzdCBBUEkuXG4gICAqIFRoaXMgY2xpZW50IGlzIHVzZWQgdG8gcmV0dXJuIHRoZSBgaWRUb2tlbmAgYXMgcGFydCBvZiB0aGUgYG9uQXV0aG9yaXplYCBjYWxsYmFjay5cbiAgICovXG4gIGNsaWVudD86IE9BdXRoLlBLQ0VDbGllbnQ7XG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgaW5pdGlhdGVzIHRoZSBPQXV0aCB0b2tlbiByZXRyaWV2YWwgcHJvY2Vzc1xuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhY2Nlc3MgdG9rZW4uXG4gICAqL1xuICBhdXRob3JpemU6ICgpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgYW4gYWxyZWFkeSBvYnRhaW5lZCBwZXJzb25hbCBhY2Nlc3MgdG9rZW5cbiAgICovXG4gIHBlcnNvbmFsQWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBvbmNlIHRoZSB1c2VyIGhhcyBiZWVuIHByb3Blcmx5IGxvZ2dlZCBpbiB0aHJvdWdoIE9BdXRoLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zIC0gUGFyYW1ldGVycyBvZiB0aGUgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudG9rZW4gLSBUaGUgcmV0cmlldmVkIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy50eXBlIC0gVGhlIGFjY2VzcyB0b2tlbidzIHR5cGUgKGVpdGhlciBgb2F1dGhgIG9yIGBwZXJzb25hbGApXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmlkVG9rZW4gLSBUaGUgb3B0aW9uYWwgaWQgdG9rZW4uIFRoZSBgaWRUb2tlbmAgaXMgcmV0dXJuZWQgaWYgYG9wdGlvbnMuY2xpZW50YCBpcyBwcm92aWRlZCBhbmQgaWYgaXQncyByZXR1cm5lZCBpbiB0aGUgaW5pdGlhbCB0b2tlbiBzZXQuXG4gICAqL1xuICBvbkF1dGhvcml6ZT86IChwYXJhbXM6IE9uQXV0aG9yaXplUGFyYW1zKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBUaGUgY29tcG9uZW50IChmb3IgYSB2aWV3L21lbnUtYmFyIGNvbW1hbmRzKSBvciBmdW5jdGlvbiAoZm9yIGEgbm8tdmlldyBjb21tYW5kKSB0aGF0IGlzIHBhc3NlZCB0byB3aXRoQWNjZXNzVG9rZW4uXG4gKi9cbmV4cG9ydCB0eXBlIFdpdGhBY2Nlc3NUb2tlbkNvbXBvbmVudE9yRm48VCA9IGFueSwgVSA9IGFueT4gPSAoKHBhcmFtczogVCkgPT4gUHJvbWlzZTxVPiB8IFUpIHwgUmVhY3QuQ29tcG9uZW50VHlwZTxUPjtcblxuLyoqXG4gKiBIaWdoZXItb3JkZXIgY29tcG9uZW50IHRvIHdyYXAgYSBnaXZlbiBjb21wb25lbnQgb3IgZnVuY3Rpb24gYW5kIHNldCBhbiBhY2Nlc3MgdG9rZW4gaW4gYSBzaGFyZWQgZ2xvYmFsIHZhcmlhYmxlLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBpbnRlcmNlcHRzIHRoZSBjb21wb25lbnQgcmVuZGVyaW5nIHByb2Nlc3MgdG8gZWl0aGVyIGZldGNoIGFuIE9BdXRoIHRva2VuIGFzeW5jaHJvbm91c2x5XG4gKiBvciB1c2UgYSBwcm92aWRlZCBwZXJzb25hbCBhY2Nlc3MgdG9rZW4uIEEgZ2xvYmFsIHZhcmlhYmxlIHdpbGwgYmUgdGhlbiBzZXQgd2l0aCB0aGUgcmVjZWl2ZWQgdG9rZW5cbiAqIHRoYXQgeW91IGNhbiBnZXQgd2l0aCB0aGUgYGdldEFjY2Vzc1Rva2VuYCBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgRGV0YWlsIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgT0F1dGhTZXJ2aWNlLCBnZXRBY2Nlc3NUb2tlbiwgd2l0aEFjY2Vzc1Rva2VuIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogY29uc3QgZ2l0aHViID0gT0F1dGhTZXJ2aWNlLmdpdGh1Yih7IHNjb3BlOiBcIm5vdGlmaWNhdGlvbnMgcmVwbyByZWFkOm9yZyByZWFkOnVzZXIgcmVhZDpwcm9qZWN0XCIgfSk7XG4gKlxuICogZnVuY3Rpb24gQXV0aG9yaXplZENvbXBvbmVudCgpIHtcbiAqICBjb25zdCB7IHRva2VuIH0gPSBnZXRBY2Nlc3NUb2tlbigpO1xuICogIC4uLlxuICogfVxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IHdpdGhBY2Nlc3NUb2tlbihnaXRodWIpKEF1dGhvcml6ZWRDb21wb25lbnQpO1xuICogYGBgXG4gKlxuICogQHJldHVybnMge1JlYWN0LkNvbXBvbmVudFR5cGU8VD59IFRoZSB3cmFwcGVkIGNvbXBvbmVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBY2Nlc3NUb2tlbjxUID0gYW55LCBVID0gYW55PihcbiAgb3B0aW9uczogV2l0aEFjY2Vzc1Rva2VuUGFyYW1ldGVycyxcbik6IDxWIGV4dGVuZHMgV2l0aEFjY2Vzc1Rva2VuQ29tcG9uZW50T3JGbjxULCBVPj4oXG4gIGZuT3JDb21wb25lbnQ6IFYsXG4pID0+IFYgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnRUeXBlPFQ+ID8gUmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8VD4gOiAocHJvcHM6IFQpID0+IFByb21pc2U8VT47XG5leHBvcnQgZnVuY3Rpb24gd2l0aEFjY2Vzc1Rva2VuPFQ+KG9wdGlvbnM6IFdpdGhBY2Nlc3NUb2tlblBhcmFtZXRlcnMpIHtcbiAgaWYgKGVudmlyb25tZW50LmNvbW1hbmRNb2RlID09PSBcIm5vLXZpZXdcIikge1xuICAgIHJldHVybiAoZm46IChwcm9wczogVCkgPT4gUHJvbWlzZTx2b2lkPiB8ICgoKSA9PiB2b2lkKSkgPT4ge1xuICAgICAgY29uc3Qgbm9WaWV3Rm4gPSBhc3luYyAocHJvcHM6IFQpID0+IHtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgIHRva2VuID0gb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuID8/IChhd2FpdCBvcHRpb25zLmF1dGhvcml6ZSgpKTtcbiAgICAgICAgICB0eXBlID0gb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuID8gXCJwZXJzb25hbFwiIDogXCJvYXV0aFwiO1xuICAgICAgICAgIGNvbnN0IGlkVG9rZW4gPSAoYXdhaXQgb3B0aW9ucy5jbGllbnQ/LmdldFRva2VucygpKT8uaWRUb2tlbjtcblxuICAgICAgICAgIGlmIChvcHRpb25zLm9uQXV0aG9yaXplKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUob3B0aW9ucy5vbkF1dGhvcml6ZSh7IHRva2VuLCB0eXBlLCBpZFRva2VuIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm4ocHJvcHMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIG5vVmlld0ZuO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gKENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxUPikgPT4ge1xuICAgIGNvbnN0IFdyYXBwZWRDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8VD4gPSAocHJvcHMpID0+IHtcbiAgICAgIGlmIChvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4pIHtcbiAgICAgICAgdG9rZW4gPSBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW47XG4gICAgICAgIHR5cGUgPSBcInBlcnNvbmFsXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWF1dGhvcml6ZSkge1xuICAgICAgICAgIGF1dGhvcml6ZSA9IG9wdGlvbnMuYXV0aG9yaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW4gPSBSZWFjdC51c2UoYXV0aG9yaXplKTtcbiAgICAgICAgdHlwZSA9IFwib2F1dGhcIjtcbiAgICAgIH1cblxuICAgICAgbGV0IGlkVG9rZW46IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGlmIChvcHRpb25zLmNsaWVudCkge1xuICAgICAgICBpZiAoIWdldElkVG9rZW4pIHtcbiAgICAgICAgICBnZXRJZFRva2VuID0gb3B0aW9ucy5jbGllbnQ/LmdldFRva2VucygpLnRoZW4oKHRva2VucykgPT4gdG9rZW5zPy5pZFRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpZFRva2VuID0gUmVhY3QudXNlKGdldElkVG9rZW4pO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5vbkF1dGhvcml6ZSkge1xuICAgICAgICBpZiAoIW9uQXV0aG9yaXplKSB7XG4gICAgICAgICAgb25BdXRob3JpemUgPSBQcm9taXNlLnJlc29sdmUob3B0aW9ucy5vbkF1dGhvcml6ZSh7IHRva2VuOiB0b2tlbiEsIHR5cGUsIGlkVG9rZW4gfSkpO1xuICAgICAgICB9XG4gICAgICAgIFJlYWN0LnVzZShvbkF1dGhvcml6ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgIC8vIEB0cy1pZ25vcmUgdG9vIGNvbXBsaWNhdGVkIGZvciBUU1xuICAgICAgcmV0dXJuIDxDb21wb25lbnQgey4uLnByb3BzfSAvPjtcbiAgICB9O1xuXG4gICAgV3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSA9IGB3aXRoQWNjZXNzVG9rZW4oJHtDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWV9KWA7XG5cbiAgICByZXR1cm4gV3JhcHBlZENvbXBvbmVudDtcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhY2Nlc3MgdG9rZW4gYW5kIGl0cyB0eXBlLiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCBpbiBhIGNvbXBvbmVudCB3cmFwcGVkIHdpdGggYHdpdGhBY2Nlc3NUb2tlbmAuXG4gKlxuICogV2lsbCB0aHJvdyBhbiBFcnJvciBpZiBjYWxsZWQgb3V0c2lkZSBvZiBhIGZ1bmN0aW9uIG9yIGNvbXBvbmVudCB3cmFwcGVkIHdpdGggYHdpdGhBY2Nlc3NUb2tlbmBcbiAqXG4gKiBAcmV0dXJucyB7eyB0b2tlbjogc3RyaW5nLCB0eXBlOiBcIm9hdXRoXCIgfCBcInBlcnNvbmFsXCIgfX0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGB0b2tlbmBcbiAqIGFuZCBpdHMgYHR5cGVgLCB3aGVyZSB0eXBlIGNhbiBiZSBlaXRoZXIgJ29hdXRoJyBmb3IgT0F1dGggdG9rZW5zIG9yICdwZXJzb25hbCcgZm9yIGFcbiAqIHBlcnNvbmFsIGFjY2VzcyB0b2tlbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKCk6IHtcbiAgdG9rZW46IHN0cmluZztcbiAgLyoqIGBvYXV0aGAgZm9yIE9BdXRoIHRva2VucyBvciBgcGVyc29uYWxgIGZvciBwZXJzb25hbCBhY2Nlc3MgdG9rZW4gKi9cbiAgdHlwZTogXCJvYXV0aFwiIHwgXCJwZXJzb25hbFwiO1xufSB7XG4gIGlmICghdG9rZW4gfHwgIXR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZXRBY2Nlc3NUb2tlbiBtdXN0IGJlIHVzZWQgd2hlbiBhdXRoZW50aWNhdGVkIChlZy4gdXNlZCBpbnNpZGUgYHdpdGhBY2Nlc3NUb2tlbmApXCIpO1xuICB9XG5cbiAgcmV0dXJuIHsgdG9rZW4sIHR5cGUgfTtcbn1cbiIsICJpbXBvcnQgeyBlbnZpcm9ubWVudCwgTGF1bmNoUHJvcHMsIExhdW5jaFR5cGUgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgZnMgZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcblxuZXhwb3J0IGVudW0gRGVlcGxpbmtUeXBlIHtcbiAgLyoqIEEgc2NyaXB0IGNvbW1hbmQgKi9cbiAgU2NyaXB0Q29tbWFuZCA9IFwic2NyaXB0LWNvbW1hbmRcIixcbiAgLyoqIEFuIGV4dGVuc2lvbiBjb21tYW5kICovXG4gIEV4dGVuc2lvbiA9IFwiZXh0ZW5zaW9uXCIsXG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBkZWVwbGluayB0byBhIHNjcmlwdCBjb21tYW5kLlxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVTY3JpcHRDb21tYW5kRGVlcGxpbmtPcHRpb25zID0ge1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZGVlcGxpbmssIHdoaWNoIHNob3VsZCBiZSBcInNjcmlwdC1jb21tYW5kXCIuXG4gICAqL1xuICB0eXBlOiBEZWVwbGlua1R5cGUuU2NyaXB0Q29tbWFuZDtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjb21tYW5kLlxuICAgKi9cbiAgY29tbWFuZDogc3RyaW5nO1xuICAvKipcbiAgICogSWYgdGhlIGNvbW1hbmQgYWNjZXB0cyBhcmd1bWVudHMsIHRoZXkgY2FuIGJlIHBhc3NlZCB1c2luZyB0aGlzIHF1ZXJ5IHBhcmFtZXRlci5cbiAgICovXG4gIGFyZ3VtZW50cz86IHN0cmluZ1tdO1xufTtcblxuLyoqXG4gKiBCYXNlIG9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgZGVlcGxpbmsgdG8gYW4gZXh0ZW5zaW9uLlxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVFeHRlbnNpb25EZWVwbGlua0Jhc2VPcHRpb25zID0ge1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZGVlcGxpbmssIHdoaWNoIHNob3VsZCBiZSBcImV4dGVuc2lvblwiLlxuICAgKi9cbiAgdHlwZT86IERlZXBsaW5rVHlwZS5FeHRlbnNpb247XG4gIC8qKlxuICAgKiBUaGUgY29tbWFuZCBhc3NvY2lhdGVkIHdpdGggdGhlIGV4dGVuc2lvbi5cbiAgICovXG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEVpdGhlciBcInVzZXJJbml0aWF0ZWRcIiwgd2hpY2ggcnVucyB0aGUgY29tbWFuZCBpbiB0aGUgZm9yZWdyb3VuZCwgb3IgXCJiYWNrZ3JvdW5kXCIsIHdoaWNoIHNraXBzIGJyaW5naW5nIFJheWNhc3QgdG8gdGhlIGZyb250LlxuICAgKi9cbiAgbGF1bmNoVHlwZT86IExhdW5jaFR5cGU7XG4gIC8qKlxuICAgKiBJZiB0aGUgY29tbWFuZCBhY2NlcHRzIGFyZ3VtZW50cywgdGhleSBjYW4gYmUgcGFzc2VkIHVzaW5nIHRoaXMgcXVlcnkgcGFyYW1ldGVyLlxuICAgKi9cbiAgYXJndW1lbnRzPzogTGF1bmNoUHJvcHNbXCJhcmd1bWVudHNcIl07XG4gIC8qKlxuICAgKiBJZiB0aGUgY29tbWFuZCBtYWtlIHVzZSBvZiBMYXVuY2hDb250ZXh0LCBpdCBjYW4gYmUgcGFzc2VkIHVzaW5nIHRoaXMgcXVlcnkgcGFyYW1ldGVyLlxuICAgKi9cbiAgY29udGV4dD86IExhdW5jaFByb3BzW1wibGF1bmNoQ29udGV4dFwiXTtcbiAgLyoqXG4gICAqIFNvbWUgdGV4dCB0byBwcmVmaWxsIHRoZSBzZWFyY2ggYmFyIG9yIGZpcnN0IHRleHQgaW5wdXQgb2YgdGhlIGNvbW1hbmRcbiAgICovXG4gIGZhbGxiYWNrVGV4dD86IHN0cmluZztcbn07XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBkZWVwbGluayB0byBhbiBleHRlbnNpb24gZnJvbSBhbm90aGVyIGV4dGVuc2lvbi5cbiAqIFJlcXVpcmVzIGJvdGggdGhlIG93bmVyT3JBdXRob3JOYW1lIGFuZCBleHRlbnNpb25OYW1lLlxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVJbnRlckV4dGVuc2lvbkRlZXBsaW5rT3B0aW9ucyA9IENyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rQmFzZU9wdGlvbnMgJiB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgb3duZXIgb3IgYXV0aG9yIG9mIHRoZSBleHRlbnNpb24uXG4gICAqL1xuICBvd25lck9yQXV0aG9yTmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGV4dGVuc2lvbi5cbiAgICovXG4gIGV4dGVuc2lvbk5hbWU6IHN0cmluZztcbn07XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBkZWVwbGluayB0byBhbiBleHRlbnNpb24uXG4gKi9cbmV4cG9ydCB0eXBlIENyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rT3B0aW9ucyA9IENyZWF0ZUludGVyRXh0ZW5zaW9uRGVlcGxpbmtPcHRpb25zIHwgQ3JlYXRlRXh0ZW5zaW9uRGVlcGxpbmtCYXNlT3B0aW9ucztcblxuLyoqXG4gKiBPcHRpb25zIGZvciBjcmVhdGluZyBhIGRlZXBsaW5rLlxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVEZWVwbGlua09wdGlvbnMgPSBDcmVhdGVTY3JpcHRDb21tYW5kRGVlcGxpbmtPcHRpb25zIHwgQ3JlYXRlRXh0ZW5zaW9uRGVlcGxpbmtPcHRpb25zO1xuXG5mdW5jdGlvbiBnZXRQcm90b2NvbCgpIHtcbiAgcmV0dXJuIGVudmlyb25tZW50LnJheWNhc3RWZXJzaW9uLmluY2x1ZGVzKFwiYWxwaGFcIikgPyBcInJheWNhc3RpbnRlcm5hbDovL1wiIDogXCJyYXljYXN0Oi8vXCI7XG59XG5cbmZ1bmN0aW9uIGdldE93bmVyT3JBdXRob3JOYW1lKCkge1xuICBjb25zdCBwYWNrYWdlSlNPTiA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihlbnZpcm9ubWVudC5hc3NldHNQYXRoLCBcIi4uXCIsIFwicGFja2FnZS5qc29uXCIpLCBcInV0ZjhcIikpO1xuICByZXR1cm4gcGFja2FnZUpTT04ub3duZXIgfHwgcGFja2FnZUpTT04uYXV0aG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2NyaXB0Q29tbWFuZERlZXBsaW5rKG9wdGlvbnM6IENyZWF0ZVNjcmlwdENvbW1hbmREZWVwbGlua09wdGlvbnMpOiBzdHJpbmcge1xuICBsZXQgdXJsID0gYCR7Z2V0UHJvdG9jb2woKX1zY3JpcHQtY29tbWFuZHMvJHtvcHRpb25zLmNvbW1hbmR9YDtcblxuICBpZiAob3B0aW9ucy5hcmd1bWVudHMpIHtcbiAgICBsZXQgcGFyYW1zID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IGFyZyBvZiBvcHRpb25zLmFyZ3VtZW50cykge1xuICAgICAgcGFyYW1zICs9IFwiJmFyZ3VtZW50cz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhcmcpO1xuICAgIH1cbiAgICB1cmwgKz0gXCI/XCIgKyBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rKG9wdGlvbnM6IENyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rT3B0aW9ucyk6IHN0cmluZyB7XG4gIGxldCBvd25lck9yQXV0aG9yTmFtZSA9IGdldE93bmVyT3JBdXRob3JOYW1lKCk7XG4gIGxldCBleHRlbnNpb25OYW1lID0gZW52aXJvbm1lbnQuZXh0ZW5zaW9uTmFtZTtcblxuICBpZiAoXCJvd25lck9yQXV0aG9yTmFtZVwiIGluIG9wdGlvbnMgJiYgXCJleHRlbnNpb25OYW1lXCIgaW4gb3B0aW9ucykge1xuICAgIG93bmVyT3JBdXRob3JOYW1lID0gb3B0aW9ucy5vd25lck9yQXV0aG9yTmFtZTtcbiAgICBleHRlbnNpb25OYW1lID0gb3B0aW9ucy5leHRlbnNpb25OYW1lO1xuICB9XG5cbiAgbGV0IHVybCA9IGAke2dldFByb3RvY29sKCl9ZXh0ZW5zaW9ucy8ke293bmVyT3JBdXRob3JOYW1lfS8ke2V4dGVuc2lvbk5hbWV9LyR7b3B0aW9ucy5jb21tYW5kfWA7XG5cbiAgbGV0IHBhcmFtcyA9IFwiXCI7XG4gIGlmIChvcHRpb25zLmxhdW5jaFR5cGUpIHtcbiAgICBwYXJhbXMgKz0gXCImbGF1bmNoVHlwZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmxhdW5jaFR5cGUpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuYXJndW1lbnRzKSB7XG4gICAgcGFyYW1zICs9IFwiJmFyZ3VtZW50cz1cIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShvcHRpb25zLmFyZ3VtZW50cykpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuY29udGV4dCkge1xuICAgIHBhcmFtcyArPSBcIiZjb250ZXh0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuY29udGV4dCkpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuZmFsbGJhY2tUZXh0KSB7XG4gICAgcGFyYW1zICs9IFwiJmZhbGxiYWNrVGV4dD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmZhbGxiYWNrVGV4dCk7XG4gIH1cblxuICBpZiAocGFyYW1zKSB7XG4gICAgdXJsICs9IFwiP1wiICsgcGFyYW1zLnN1YnN0cmluZygxKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlZXBsaW5rIHRvIGEgc2NyaXB0IGNvbW1hbmQgb3IgZXh0ZW5zaW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVlcGxpbmsob3B0aW9uczogQ3JlYXRlRGVlcGxpbmtPcHRpb25zKTogc3RyaW5nIHtcbiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gRGVlcGxpbmtUeXBlLlNjcmlwdENvbW1hbmQpIHtcbiAgICByZXR1cm4gY3JlYXRlU2NyaXB0Q29tbWFuZERlZXBsaW5rKG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVFeHRlbnNpb25EZWVwbGluayhvcHRpb25zKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IGJhc2VFeGVjdXRlU1FMIH0gZnJvbSBcIi4vc3FsLXV0aWxzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYSBTUUwgcXVlcnkgb24gYSBsb2NhbCBTUUxpdGUgZGF0YWJhc2UgYW5kIHJldHVybnMgdGhlIHF1ZXJ5IHJlc3VsdCBpbiBKU09OIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0gZGF0YWJhc2VQYXRoIC0gVGhlIHBhdGggdG8gdGhlIFNRTGl0ZSBkYXRhYmFzZSBmaWxlLlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIFNRTCBxdWVyeSB0byBleGVjdXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2Ygb2JqZWN0cyByZXByZXNlbnRpbmcgdGhlIHF1ZXJ5IHJlc3VsdHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IGNsb3NlTWFpbldpbmRvdywgQ2xpcGJvYXJkIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgZXhlY3V0ZVNRTCB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIHR5cGUgTWVzc2FnZSA9IHsgYm9keTogc3RyaW5nOyBjb2RlOiBzdHJpbmcgfTtcbiAqXG4gKiBjb25zdCBEQl9QQVRIID0gXCIvcGF0aC90by9jaGF0LmRiXCI7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gQ29tbWFuZCgpIHtcbiAqICAgY29uc3QgcXVlcnkgPSBgU0VMRUNUIGJvZHksIGNvZGUgRlJPTSAuLi5gXG4gKlxuICogICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGV4ZWN1dGVTUUw8TWVzc2FnZT4oREJfUEFUSCwgcXVlcnkpO1xuICpcbiAqICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAqICAgICBjb25zdCBsYXRlc3RDb2RlID0gbWVzc2FnZXNbMF0uY29kZTtcbiAqICAgICBhd2FpdCBDbGlwYm9hcmQucGFzdGUobGF0ZXN0Q29kZSk7XG4gKiAgICAgYXdhaXQgY2xvc2VNYWluV2luZG93KCk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhlY3V0ZVNRTDxUID0gdW5rbm93bj4oZGF0YWJhc2VQYXRoOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpIHtcbiAgcmV0dXJuIGJhc2VFeGVjdXRlU1FMPFQ+KGRhdGFiYXNlUGF0aCwgcXVlcnkpO1xufVxuIiwgImltcG9ydCBjaGlsZFByb2Nlc3MgZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHtcbiAgZGVmYXVsdFBhcnNpbmcsXG4gIGdldFNwYXduZWRQcm9taXNlLFxuICBnZXRTcGF3bmVkUmVzdWx0LFxuICBoYW5kbGVPdXRwdXQsXG4gIFBhcnNlRXhlY091dHB1dEhhbmRsZXIsXG59IGZyb20gXCIuL2V4ZWMtdXRpbHNcIjtcblxudHlwZSBBcHBsZVNjcmlwdE9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0LCBgcnVuQXBwbGVTY3JpcHRgIHJldHVybnMgaXRzIHJlc3VsdHMgaW4gaHVtYW4tcmVhZGFibGUgZm9ybTogc3RyaW5ncyBkbyBub3QgaGF2ZSBxdW90ZXMgYXJvdW5kIHRoZW0sIGNoYXJhY3RlcnMgYXJlIG5vdCBlc2NhcGVkLCBicmFjZXMgZm9yIGxpc3RzIGFuZCByZWNvcmRzIGFyZSBvbWl0dGVkLCBldGMuIFRoaXMgaXMgZ2VuZXJhbGx5IG1vcmUgdXNlZnVsLCBidXQgY2FuIGludHJvZHVjZSBhbWJpZ3VpdGllcy4gRm9yIGV4YW1wbGUsIHRoZSBsaXN0cyBge1wiZm9vXCIsIFwiYmFyXCJ9YCBhbmQgYHt7XCJmb29cIiwge1wiYmFyXCJ9fX1gIHdvdWxkIGJvdGggYmUgZGlzcGxheWVkIGFzIOKAmGZvbywgYmFy4oCZLiBUbyBzZWUgdGhlIHJlc3VsdHMgaW4gYW4gdW5hbWJpZ3VvdXMgZm9ybSB0aGF0IGNvdWxkIGJlIHJlY29tcGlsZWQgaW50byB0aGUgc2FtZSB2YWx1ZSwgc2V0IGBodW1hblJlYWRhYmxlT3V0cHV0YCB0byBgZmFsc2VgLlxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBodW1hblJlYWRhYmxlT3V0cHV0PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNjcmlwdCBpcyB1c2luZyBbYEFwcGxlU2NyaXB0YF0oaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvYXJjaGl2ZS9kb2N1bWVudGF0aW9uL0FwcGxlU2NyaXB0L0NvbmNlcHR1YWwvQXBwbGVTY3JpcHRMYW5nR3VpZGUvaW50cm9kdWN0aW9uL0FTTFJfaW50cm8uaHRtbCMvL2FwcGxlX3JlZi9kb2MvdWlkL1RQNDAwMDA5ODMpIG9yIFtgSmF2YVNjcmlwdGBdKGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2FyY2hpdmUvcmVsZWFzZW5vdGVzL0ludGVyYXBwbGljYXRpb25Db21tdW5pY2F0aW9uL1JOLUphdmFTY3JpcHRGb3JBdXRvbWF0aW9uL0FydGljbGVzL0ludHJvZHVjdGlvbi5odG1sIy8vYXBwbGVfcmVmL2RvYy91aWQvVFA0MDAxNDUwOC1DSDExMS1TVzEpLlxuICAgKlxuICAgKiBAZGVmYXVsdCBcIkFwcGxlU2NyaXB0XCJcbiAgICovXG4gIGxhbmd1YWdlPzogXCJBcHBsZVNjcmlwdFwiIHwgXCJKYXZhU2NyaXB0XCI7XG4gIC8qKlxuICAgKiBBIFNpZ25hbCBvYmplY3QgdGhhdCBhbGxvd3MgeW91IHRvIGFib3J0IHRoZSByZXF1ZXN0IGlmIHJlcXVpcmVkIHZpYSBhbiBBYm9ydENvbnRyb2xsZXIgb2JqZWN0LlxuICAgKi9cbiAgc2lnbmFsPzogQWJvcnRTaWduYWw7XG4gIC8qKiBJZiB0aW1lb3V0IGlzIGdyZWF0ZXIgdGhhbiBgMGAsIHRoZSBwYXJlbnQgd2lsbCBzZW5kIHRoZSBzaWduYWwgYFNJR1RFUk1gIGlmIHRoZSBjaGlsZCBydW5zIGxvbmdlciB0aGFuIHRpbWVvdXQgbWlsbGlzZWNvbmRzLlxuICAgKlxuICAgKiBAZGVmYXVsdCAxMDAwMFxuICAgKi9cbiAgdGltZW91dD86IG51bWJlcjtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gQXBwbGVTY3JpcHQgc2NyaXB0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBzaG93SFVEIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgcnVuQXBwbGVTY3JpcHQsIHNob3dGYWlsdXJlVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gKiAgIHRyeSB7XG4gKiAgICAgY29uc3QgcmVzID0gYXdhaXQgcnVuQXBwbGVTY3JpcHQoXG4gKiAgICAgICBgXG4gKiAgICAgICBvbiBydW4gYXJndlxuICogICAgICAgICByZXR1cm4gXCJoZWxsbywgXCIgJiBpdGVtIDEgb2YgYXJndiAmIFwiLlwiXG4gKiAgICAgICBlbmQgcnVuXG4gKiAgICAgICBgLFxuICogICAgICAgW1wid29ybGRcIl1cbiAqICAgICApO1xuICogICAgIGF3YWl0IHNob3dIVUQocmVzKTtcbiAqICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAqICAgICBzaG93RmFpbHVyZVRvYXN0KGVycm9yLCB7IHRpdGxlOiBcIkNvdWxkIG5vdCBydW4gQXBwbGVTY3JpcHRcIiB9KTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5BcHBsZVNjcmlwdDxUID0gc3RyaW5nPihcbiAgc2NyaXB0OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBBcHBsZVNjcmlwdE9wdGlvbnMgJiB7XG4gICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIHN0cmluZywgQXBwbGVTY3JpcHRPcHRpb25zPjtcbiAgfSxcbik6IFByb21pc2U8c3RyaW5nPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5BcHBsZVNjcmlwdDxUID0gc3RyaW5nPihcbiAgc2NyaXB0OiBzdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHNjcmlwdC5cbiAgICovXG4gIGFyZ3M6IHN0cmluZ1tdLFxuICBvcHRpb25zPzogQXBwbGVTY3JpcHRPcHRpb25zICYge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIEFwcGxlU2NyaXB0T3B0aW9ucz47XG4gIH0sXG4pOiBQcm9taXNlPHN0cmluZz47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuQXBwbGVTY3JpcHQ8VCA9IHN0cmluZz4oXG4gIHNjcmlwdDogc3RyaW5nLFxuICBvcHRpb25zT3JBcmdzPzpcbiAgICB8IHN0cmluZ1tdXG4gICAgfCAoQXBwbGVTY3JpcHRPcHRpb25zICYge1xuICAgICAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBBcHBsZVNjcmlwdE9wdGlvbnM+O1xuICAgICAgfSksXG4gIG9wdGlvbnM/OiBBcHBsZVNjcmlwdE9wdGlvbnMgJiB7XG4gICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIHN0cmluZywgQXBwbGVTY3JpcHRPcHRpb25zPjtcbiAgfSxcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmIChwcm9jZXNzLnBsYXRmb3JtICE9PSBcImRhcndpblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXBwbGVTY3JpcHQgaXMgb25seSBzdXBwb3J0ZWQgb24gbWFjT1NcIik7XG4gIH1cblxuICBjb25zdCB7IGh1bWFuUmVhZGFibGVPdXRwdXQsIGxhbmd1YWdlLCB0aW1lb3V0LCAuLi5leGVjT3B0aW9ucyB9ID0gQXJyYXkuaXNBcnJheShvcHRpb25zT3JBcmdzKVxuICAgID8gb3B0aW9ucyB8fCB7fVxuICAgIDogb3B0aW9uc09yQXJncyB8fCB7fTtcblxuICBjb25zdCBvdXRwdXRBcmd1bWVudHMgPSBodW1hblJlYWRhYmxlT3V0cHV0ICE9PSBmYWxzZSA/IFtdIDogW1wiLXNzXCJdO1xuICBpZiAobGFuZ3VhZ2UgPT09IFwiSmF2YVNjcmlwdFwiKSB7XG4gICAgb3V0cHV0QXJndW1lbnRzLnB1c2goXCItbFwiLCBcIkphdmFTY3JpcHRcIik7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9uc09yQXJncykpIHtcbiAgICBvdXRwdXRBcmd1bWVudHMucHVzaChcIi1cIiwgLi4ub3B0aW9uc09yQXJncyk7XG4gIH1cblxuICBjb25zdCBzcGF3bmVkID0gY2hpbGRQcm9jZXNzLnNwYXduKFwib3Nhc2NyaXB0XCIsIG91dHB1dEFyZ3VtZW50cywge1xuICAgIC4uLmV4ZWNPcHRpb25zLFxuICAgIGVudjogeyBQQVRIOiBcIi91c3IvbG9jYWwvYmluOi91c3IvYmluOi9iaW46L3Vzci9zYmluOi9zYmluXCIgfSxcbiAgfSk7XG4gIGNvbnN0IHNwYXduZWRQcm9taXNlID0gZ2V0U3Bhd25lZFByb21pc2Uoc3Bhd25lZCwgeyB0aW1lb3V0OiB0aW1lb3V0ID8/IDEwMDAwIH0pO1xuXG4gIHNwYXduZWQuc3RkaW4uZW5kKHNjcmlwdCk7XG5cbiAgY29uc3QgW3sgZXJyb3IsIGV4aXRDb2RlLCBzaWduYWwsIHRpbWVkT3V0IH0sIHN0ZG91dFJlc3VsdCwgc3RkZXJyUmVzdWx0XSA9IGF3YWl0IGdldFNwYXduZWRSZXN1bHQ8c3RyaW5nPihcbiAgICBzcGF3bmVkLFxuICAgIHsgZW5jb2Rpbmc6IFwidXRmOFwiIH0sXG4gICAgc3Bhd25lZFByb21pc2UsXG4gICk7XG4gIGNvbnN0IHN0ZG91dCA9IGhhbmRsZU91dHB1dCh7IHN0cmlwRmluYWxOZXdsaW5lOiB0cnVlIH0sIHN0ZG91dFJlc3VsdCk7XG4gIGNvbnN0IHN0ZGVyciA9IGhhbmRsZU91dHB1dCh7IHN0cmlwRmluYWxOZXdsaW5lOiB0cnVlIH0sIHN0ZGVyclJlc3VsdCk7XG5cbiAgcmV0dXJuIGRlZmF1bHRQYXJzaW5nKHtcbiAgICBzdGRvdXQsXG4gICAgc3RkZXJyLFxuICAgIGVycm9yLFxuICAgIGV4aXRDb2RlLFxuICAgIHNpZ25hbCxcbiAgICB0aW1lZE91dCxcbiAgICBjb21tYW5kOiBcIm9zYXNjcmlwdFwiLFxuICAgIG9wdGlvbnMsXG4gICAgcGFyZW50RXJyb3I6IG5ldyBFcnJvcigpLFxuICB9KTtcbn1cbiIsICJpbXBvcnQgY2hpbGRQcm9jZXNzIGZyb20gXCJub2RlOmNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7XG4gIGRlZmF1bHRQYXJzaW5nLFxuICBnZXRTcGF3bmVkUHJvbWlzZSxcbiAgZ2V0U3Bhd25lZFJlc3VsdCxcbiAgaGFuZGxlT3V0cHV0LFxuICBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyLFxufSBmcm9tIFwiLi9leGVjLXV0aWxzXCI7XG5cbnR5cGUgUG93ZXJTaGVsbFNjcmlwdE9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBBIFNpZ25hbCBvYmplY3QgdGhhdCBhbGxvd3MgeW91IHRvIGFib3J0IHRoZSByZXF1ZXN0IGlmIHJlcXVpcmVkIHZpYSBhbiBBYm9ydENvbnRyb2xsZXIgb2JqZWN0LlxuICAgKi9cbiAgc2lnbmFsPzogQWJvcnRTaWduYWw7XG4gIC8qKiBJZiB0aW1lb3V0IGlzIGdyZWF0ZXIgdGhhbiBgMGAsIHRoZSBwYXJlbnQgd2lsbCBzZW5kIHRoZSBzaWduYWwgYFNJR1RFUk1gIGlmIHRoZSBjaGlsZCBydW5zIGxvbmdlciB0aGFuIHRpbWVvdXQgbWlsbGlzZWNvbmRzLlxuICAgKlxuICAgKiBAZGVmYXVsdCAxMDAwMFxuICAgKi9cbiAgdGltZW91dD86IG51bWJlcjtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgYSBQb3dlclNoZWxsIHNjcmlwdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgc2hvd0hVRCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHJ1blBvd2VyU2hlbGxTY3JpcHQsIHNob3dGYWlsdXJlVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gKiAgIHRyeSB7XG4gKiAgICAgY29uc3QgcmVzID0gYXdhaXQgcnVuUG93ZXJTaGVsbFNjcmlwdChcbiAqICAgICAgIGBcbiAqICAgICAgIFdyaXRlLUhvc3QgXCJoZWxsbywgd29ybGQuXCJcbiAqICAgICAgIGAsXG4gKiAgICAgKTtcbiAqICAgICBhd2FpdCBzaG93SFVEKHJlcyk7XG4gKiAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgICAgc2hvd0ZhaWx1cmVUb2FzdChlcnJvciwgeyB0aXRsZTogXCJDb3VsZCBub3QgcnVuIFBvd2VyU2hlbGxcIiB9KTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Qb3dlclNoZWxsU2NyaXB0PFQgPSBzdHJpbmc+KFxuICBzY3JpcHQ6IHN0cmluZyxcbiAgb3B0aW9ucz86IFBvd2VyU2hlbGxTY3JpcHRPcHRpb25zICYge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIFBvd2VyU2hlbGxTY3JpcHRPcHRpb25zPjtcbiAgfSxcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmIChwcm9jZXNzLnBsYXRmb3JtICE9PSBcIndpbjMyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQb3dlclNoZWxsIGlzIG9ubHkgc3VwcG9ydGVkIG9uIFdpbmRvd3NcIik7XG4gIH1cblxuICBjb25zdCB7IHRpbWVvdXQsIC4uLmV4ZWNPcHRpb25zIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gIGNvbnN0IG91dHB1dEFyZ3VtZW50cyA9IFtcIi1Ob0xvZ29cIiwgXCItTm9Qcm9maWxlXCIsIFwiLU5vbkludGVyYWN0aXZlXCIsIFwiLUNvbW1hbmRcIiwgXCItXCJdO1xuXG4gIGNvbnN0IHNwYXduZWQgPSBjaGlsZFByb2Nlc3Muc3Bhd24oXCJwb3dlcnNoZWxsLmV4ZVwiLCBvdXRwdXRBcmd1bWVudHMsIHtcbiAgICAuLi5leGVjT3B0aW9ucyxcbiAgfSk7XG4gIGNvbnN0IHNwYXduZWRQcm9taXNlID0gZ2V0U3Bhd25lZFByb21pc2Uoc3Bhd25lZCwgeyB0aW1lb3V0OiB0aW1lb3V0ID8/IDEwMDAwIH0pO1xuXG4gIHNwYXduZWQuc3RkaW4uZW5kKHNjcmlwdCk7XG5cbiAgY29uc3QgW3sgZXJyb3IsIGV4aXRDb2RlLCBzaWduYWwsIHRpbWVkT3V0IH0sIHN0ZG91dFJlc3VsdCwgc3RkZXJyUmVzdWx0XSA9IGF3YWl0IGdldFNwYXduZWRSZXN1bHQ8c3RyaW5nPihcbiAgICBzcGF3bmVkLFxuICAgIHsgZW5jb2Rpbmc6IFwidXRmOFwiIH0sXG4gICAgc3Bhd25lZFByb21pc2UsXG4gICk7XG4gIGNvbnN0IHN0ZG91dCA9IGhhbmRsZU91dHB1dCh7IHN0cmlwRmluYWxOZXdsaW5lOiB0cnVlIH0sIHN0ZG91dFJlc3VsdCk7XG4gIGNvbnN0IHN0ZGVyciA9IGhhbmRsZU91dHB1dCh7IHN0cmlwRmluYWxOZXdsaW5lOiB0cnVlIH0sIHN0ZGVyclJlc3VsdCk7XG5cbiAgcmV0dXJuIGRlZmF1bHRQYXJzaW5nKHtcbiAgICBzdGRvdXQsXG4gICAgc3RkZXJyLFxuICAgIGVycm9yLFxuICAgIGV4aXRDb2RlLFxuICAgIHNpZ25hbCxcbiAgICB0aW1lZE91dCxcbiAgICBjb21tYW5kOiBcInBvd2Vyc2hlbGwuZXhlXCIsXG4gICAgb3B0aW9ucyxcbiAgICBwYXJlbnRFcnJvcjogbmV3IEVycm9yKCksXG4gIH0pO1xufVxuIiwgImltcG9ydCB7IENhY2hlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgaGFzaCwgcmVwbGFjZXIsIHJldml2ZXIgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbi8qKlxuICogV3JhcHMgYSBmdW5jdGlvbiB3aXRoIGNhY2hpbmcgZnVuY3Rpb25hbGl0eSB1c2luZyBSYXljYXN0J3MgQ2FjaGUgQVBJLlxuICogQWxsb3dzIGZvciBjYWNoaW5nIG9mIGV4cGVuc2l2ZSBmdW5jdGlvbnMgbGlrZSBwYWdpbmF0ZWQgQVBJIGNhbGxzIHRoYXQgcmFyZWx5IGNoYW5nZS5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gY2FjaGUgcmVzdWx0cyBmcm9tXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjYWNoZSBiZWhhdmlvclxuICogQHBhcmFtIG9wdGlvbnMudmFsaWRhdGUgLSBPcHRpb25hbCB2YWxpZGF0aW9uIGZ1bmN0aW9uIGZvciBjYWNoZWQgZGF0YVxuICogQHBhcmFtIG9wdGlvbnMubWF4QWdlIC0gTWF4aW11bSBhZ2Ugb2YgY2FjaGVkIGRhdGEgaW4gbWlsbGlzZWNvbmRzXG4gKiBAcmV0dXJucyBBbiBhc3luYyBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24sIGVpdGhlciBmcm9tIGNhY2hlIG9yIGZyZXNoIGV4ZWN1dGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgY2FjaGVkRnVuY3Rpb24gPSB3aXRoQ2FjaGUoZmV0Y2hFeHBlbnNpdmVEYXRhLCB7XG4gKiAgIG1heEFnZTogNSAqIDYwICogMTAwMCAvLyBDYWNoZSBmb3IgNSBtaW51dGVzXG4gKiB9KTtcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZWRGdW5jdGlvbihxdWVyeSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDYWNoZTxGbiBleHRlbmRzICguLi5hcmdzOiBhbnkpID0+IFByb21pc2U8YW55Pj4oXG4gIGZuOiBGbixcbiAgb3B0aW9ucz86IHtcbiAgICAvKiogZnVuY3Rpb24gdGhhdCByZWNlaXZlcyB0aGUgY2FjaGVkIGRhdGEgYW5kIHJldHVybnMgYSBib29sZWFuIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBkYXRhIGlzIHN0aWxsIHZhbGlkIG9yIG5vdC4gKi9cbiAgICB2YWxpZGF0ZT86IChkYXRhOiBBd2FpdGVkPFJldHVyblR5cGU8Rm4+PikgPT4gYm9vbGVhbjtcbiAgICAvKiogTWF4aW11bSBhZ2Ugb2YgY2FjaGVkIGRhdGEgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBkYXRhIHdpbGwgYmUgY29uc2lkZXJlZCBpbnZhbGlkICovXG4gICAgbWF4QWdlPzogbnVtYmVyO1xuICB9LFxuKTogRm4gJiB7IGNsZWFyQ2FjaGU6ICgpID0+IHZvaWQgfSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlKHsgbmFtZXNwYWNlOiBoYXNoKGZuKSB9KTtcblxuICBjb25zdCB3cmFwcGVkRm4gPSBhc3luYyAoLi4uYXJnczogUGFyYW1ldGVyczxGbj4pID0+IHtcbiAgICBjb25zdCBrZXkgPVxuICAgICAgaGFzaChhcmdzIHx8IFtdKSArIChvcHRpb25zIGFzIHVua25vd24gYXMgeyBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeD86IHN0cmluZyB9KT8uaW50ZXJuYWxfY2FjaGVLZXlTdWZmaXg7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgY29uc3QgeyBkYXRhLCB0aW1lc3RhbXAgfSA9IEpTT04ucGFyc2UoY2FjaGVkLCByZXZpdmVyKTtcbiAgICAgIGNvbnN0IGlzRXhwaXJlZCA9IG9wdGlvbnM/Lm1heEFnZSAmJiBEYXRlLm5vdygpIC0gdGltZXN0YW1wID4gb3B0aW9ucy5tYXhBZ2U7XG4gICAgICBpZiAoIWlzRXhwaXJlZCAmJiAoIW9wdGlvbnM/LnZhbGlkYXRlIHx8IG9wdGlvbnMudmFsaWRhdGUoZGF0YSkpKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oLi4uYXJncyk7XG4gICAgY2FjaGUuc2V0KFxuICAgICAga2V5LFxuICAgICAgSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIHtcbiAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9LFxuICAgICAgICByZXBsYWNlcixcbiAgICAgICksXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHdyYXBwZWRGbi5jbGVhckNhY2hlID0gKCkgPT4ge1xuICAgIGNhY2hlLmNsZWFyKCk7XG4gIH07XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciB0b28gY29tcGxleCBmb3IgVFNcbiAgcmV0dXJuIHdyYXBwZWRGbjtcbn1cbiIsICJpbXBvcnQgeyBlbnZpcm9ubWVudCwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgRXJyb3JJbmZvLCBSZWFjdE5vZGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcm91Ymxlc2hvb3RpbmdHdWlkZSBmcm9tIFwifi9jb21wb25lbnRzL1Ryb3VibGVzaG9vdGluZ0d1aWRlXCI7XG5pbXBvcnQgeyBNYW51YWxseVRocm93bkVycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNoaWxkcmVuPzogUmVhY3ROb2RlO1xufTtcblxudHlwZSBTdGF0ZSA9IHtcbiAgaGFzRXJyb3I6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9vdEVycm9yQm91bmRhcnkgZXh0ZW5kcyBDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0geyBoYXNFcnJvcjogZmFsc2UgfTtcbiAgfVxuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoKSB7XG4gICAgcmV0dXJuIHsgaGFzRXJyb3I6IHRydWUgfTtcbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNYW51YWxseVRocm93bkVycm9yKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSkgPT4gKHsgLi4uc3RhdGUsIGhhc0Vycm9yOiB0cnVlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSk7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgZXJyb3IubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoeyAuLi5zdGF0ZSwgaGFzRXJyb3I6IHRydWUsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IsIGVycm9ySW5mbyk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikgcmV0dXJuIDxUcm91Ymxlc2hvb3RpbmdHdWlkZSBlcnJvcj17dGhpcy5zdGF0ZS5lcnJvcn0gLz47XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiA8VHJvdWJsZXNob290aW5nR3VpZGUgLz47XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQWN0aW9uUGFuZWwsIEFjdGlvbiwgRGV0YWlsLCBnZXRQcmVmZXJlbmNlVmFsdWVzLCBlbnZpcm9ubWVudCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uLCBCdWdSZXBvcnRPcGVuQWN0aW9uIH0gZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zXCI7XG5pbXBvcnQgeyBCVUdfUkVQT1JUX1VSTCB9IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9CdWdSZXBvcnRPcGVuQWN0aW9uXCI7XG5pbXBvcnQgeyBFbnN1cmVDbGlCaW5FcnJvciwgSW5zdGFsbGVkQ0xJTm90Rm91bmRFcnJvciwgZ2V0RXJyb3JTdHJpbmcgfSBmcm9tIFwifi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIn4vdXRpbHMvcGxhdGZvcm1cIjtcblxuY29uc3QgTElORV9CUkVBSyA9IFwiXFxuXFxuXCI7XG5jb25zdCBDTElfSU5TVEFMTEFUSU9OX0hFTFBfVVJMID0gXCJodHRwczovL2JpdHdhcmRlbi5jb20vaGVscC9jbGkvI2Rvd25sb2FkLWFuZC1pbnN0YWxsXCI7XG5cbmNvbnN0IGdldENvZGVCbG9jayA9IChjb250ZW50OiBzdHJpbmcpID0+IGBcXGBcXGBcXGBcXG4ke2NvbnRlbnR9XFxuXFxgXFxgXFxgYDtcblxudHlwZSBNZXNzYWdlcyA9IHN0cmluZyB8IG51bWJlciB8IGZhbHNlIHwgMCB8IFwiXCIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBUcm91Ymxlc2hvb3RpbmdHdWlkZVByb3BzID0ge1xuICBlcnJvcj86IGFueTtcbn07XG5cbmNvbnN0IFRyb3VibGVzaG9vdGluZ0d1aWRlID0gKHsgZXJyb3IgfTogVHJvdWJsZXNob290aW5nR3VpZGVQcm9wcykgPT4ge1xuICBjb25zdCBlcnJvclN0cmluZyA9IGdldEVycm9yU3RyaW5nKGVycm9yKTtcbiAgY29uc3QgbG9jYWxDbGlQYXRoID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKS5jbGlQYXRoO1xuICBjb25zdCBpc0NsaURvd25sb2FkRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVuc3VyZUNsaUJpbkVycm9yO1xuICBjb25zdCBuZWVkc1RvSW5zdGFsbENsaSA9IGxvY2FsQ2xpUGF0aCB8fCBlcnJvciBpbnN0YW5jZW9mIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3I7XG5cbiAgY29uc3QgbWVzc2FnZXM6IE1lc3NhZ2VzW10gPSBbXTtcblxuICBpZiAobmVlZHNUb0luc3RhbGxDbGkgJiYgIWlzQ2xpRG93bmxvYWRFcnJvcikge1xuICAgIG1lc3NhZ2VzLnB1c2goXCIjIFx1MjZBMFx1RkUwRiBCaXR3YXJkZW4gQ0xJIG5vdCBmb3VuZFwiKTtcbiAgfSBlbHNlIHtcbiAgICBtZXNzYWdlcy5wdXNoKFwiIyBcdUQ4M0RcdURDQTUgV2hvb3BzISBTb21ldGhpbmcgd2VudCB3cm9uZ1wiKTtcbiAgfVxuXG4gIGlmIChpc0NsaURvd25sb2FkRXJyb3IpIHtcbiAgICBtZXNzYWdlcy5wdXNoKFxuICAgICAgYFdlIGNvdWxkbid0IGRvd25sb2FkIHRoZSBbQml0d2FyZGVuIENMSV0oJHtDTElfSU5TVEFMTEFUSU9OX0hFTFBfVVJMfSksIHlvdSBjYW4gYWx3YXlzIGluc3RhbGwgaXQgb24geW91ciBtYWNoaW5lLmBcbiAgICApO1xuICB9IGVsc2UgaWYgKG5lZWRzVG9JbnN0YWxsQ2xpKSB7XG4gICAgY29uc3QgY2xpUGF0aFN0cmluZyA9IGxvY2FsQ2xpUGF0aCA/IGAgKCR7bG9jYWxDbGlQYXRofSlgIDogXCJcIjtcbiAgICBtZXNzYWdlcy5wdXNoKFxuICAgICAgYFdlIGNvdWxkbid0IGZpbmQgdGhlIFtCaXR3YXJkZW4gQ0xJXSgke0NMSV9JTlNUQUxMQVRJT05fSEVMUF9VUkx9KSBpbnN0YWxsZWQgb24geW91ciBtYWNoaW5lJHtjbGlQYXRoU3RyaW5nfS5gXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBtZXNzYWdlcy5wdXNoKGBUaGUgXFxgJHtlbnZpcm9ubWVudC5jb21tYW5kTmFtZX1cXGAgY29tbWFuZCBjcmFzaGVkIHdoZW4gd2Ugd2VyZSBub3QgZXhwZWN0aW5nIGl0IHRvLmApO1xuICB9XG5cbiAgbWVzc2FnZXMucHVzaChcbiAgICBcIj4gUGxlYXNlIHJlYWQgdGhlIGBTZXR1cGAgc2VjdGlvbiBpbiB0aGUgW2V4dGVuc2lvbidzIGRlc2NyaXB0aW9uXShodHRwczovL3d3dy5yYXljYXN0LmNvbS9qb21pZmVwZS9iaXR3YXJkZW4pIHRvIGVuc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgaXMgcHJvcGVybHkgY29uZmlndXJlZC5cIlxuICApO1xuXG4gIG1lc3NhZ2VzLnB1c2goXG4gICAgYCoqVHJ5IHJlc3RhcnRpbmcgdGhlIGNvbW1hbmQuIElmIHRoZSBpc3N1ZSBwZXJzaXN0cywgY29uc2lkZXIgW3JlcG9ydGluZyBhIGJ1ZyBvbiBHaXRIdWJdKCR7QlVHX1JFUE9SVF9VUkx9KSB0byBoZWxwIHVzIGZpeCBpdC4qKmBcbiAgKTtcblxuICBpZiAoZXJyb3JTdHJpbmcpIHtcbiAgICBjb25zdCBpc0FyY2hFcnJvciA9IC9pbmNvbXBhdGlibGUgYXJjaGl0ZWN0dXJlL2dpLnRlc3QoZXJyb3JTdHJpbmcpO1xuICAgIG1lc3NhZ2VzLnB1c2goXG4gICAgICBcIj4jIyBUZWNobmljYWwgZGV0YWlscyBcdUQ4M0VcdUREMTNcIixcbiAgICAgIGlzQXJjaEVycm9yICYmXG4gICAgICAgIGBcdTI2QTBcdUZFMEYgV2Ugc3VzcGVjdCB0aGF0IHlvdXIgQml0d2FyZGVuIENMSSB3YXMgaW5zdGFsbGVkIHVzaW5nIGEgdmVyc2lvbiBvZiBOb2RlSlMgdGhhdCdzIGluY29tcGF0aWJsZSB3aXRoIHlvdXIgc3lzdGVtIGFyY2hpdGVjdHVyZSAoZS5nLiB4NjQgTm9kZUpTIG9uIGEgTTEvQXBwbGUgU2lsaWNvbiBNYWMpLiBQbGVhc2UgbWFrZSBzdXJlIHlvdXIgaGF2ZSB0aGUgY29ycmVjdCB2ZXJzaW9ucyBvZiB5b3VyIHNvZnR3YXJlIGluc3RhbGxlZCAoZS5nLiwgJHtcbiAgICAgICAgICBwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiID8gXCJIb21lYnJldywgXCIgOiBcIlwiXG4gICAgICAgIH1Ob2RlSlMsIGFuZCBCaXR3YXJkZW4gQ0xJKS5gLFxuICAgICAgZ2V0Q29kZUJsb2NrKGVycm9yU3RyaW5nKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxEZXRhaWxcbiAgICAgIG1hcmtkb3duPXttZXNzYWdlcy5maWx0ZXIoQm9vbGVhbikuam9pbihMSU5FX0JSRUFLKX1cbiAgICAgIGFjdGlvbnM9e1xuICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9XCJCdWcgUmVwb3J0XCI+XG4gICAgICAgICAgICA8QnVnUmVwb3J0T3BlbkFjdGlvbiAvPlxuICAgICAgICAgICAgPEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uIC8+XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgIHtuZWVkc1RvSW5zdGFsbENsaSAmJiAoXG4gICAgICAgICAgICA8QWN0aW9uLk9wZW5JbkJyb3dzZXIgdGl0bGU9XCJPcGVuIEluc3RhbGxhdGlvbiBHdWlkZVwiIHVybD17Q0xJX0lOU1RBTExBVElPTl9IRUxQX1VSTH0gLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgIC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUcm91Ymxlc2hvb3RpbmdHdWlkZTtcbiIsICJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VSZXByb21wdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VSZXByb21wdFwiO1xuXG5leHBvcnQgdHlwZSBBY3Rpb25XaXRoUmVwcm9tcHRQcm9wcyA9IE9taXQ8QWN0aW9uLlByb3BzLCBcIm9uQWN0aW9uXCI+ICYge1xuICByZXByb21wdERlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBvbkFjdGlvbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG59O1xuXG5mdW5jdGlvbiBBY3Rpb25XaXRoUmVwcm9tcHQocHJvcHM6IEFjdGlvbldpdGhSZXByb21wdFByb3BzKSB7XG4gIGNvbnN0IHsgcmVwcm9tcHREZXNjcmlwdGlvbiwgb25BY3Rpb24sIC4uLmNvbXBvbmVudFByb3BzIH0gPSBwcm9wcztcbiAgY29uc3QgeyByZXByb21wdCB9ID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgcmVwcm9tcHRBbmRQZXJmb3JtQWN0aW9uID0gdXNlUmVwcm9tcHQob25BY3Rpb24sIHsgZGVzY3JpcHRpb246IHJlcHJvbXB0RGVzY3JpcHRpb24gfSk7XG5cbiAgcmV0dXJuIDxBY3Rpb24gey4uLmNvbXBvbmVudFByb3BzfSBvbkFjdGlvbj17cmVwcm9tcHQgPyByZXByb21wdEFuZFBlcmZvcm1BY3Rpb24gOiBvbkFjdGlvbn0gLz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvbldpdGhSZXByb21wdDtcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuY29uc3QgVmF1bHRJdGVtQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8SXRlbSB8IG51bGw+KG51bGwpO1xuXG5leHBvcnQgY29uc3QgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gPSAoKSA9PiB7XG4gIGNvbnN0IHNlc3Npb24gPSB1c2VDb250ZXh0KFZhdWx0SXRlbUNvbnRleHQpO1xuICBpZiAoc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlU2VsZWN0VmF1bHRJdGVtIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBWYXVsdEl0ZW1Db250ZXh0LlByb3ZpZGVyXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWYXVsdEl0ZW1Db250ZXh0O1xuIiwgImltcG9ydCB7IHNob3dUb2FzdCwgVG9hc3QsIHVzZU5hdmlnYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgUmVwcm9tcHRGb3JtIGZyb20gXCJ+L2NvbXBvbmVudHMvUmVwcm9tcHRGb3JtXCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uXCI7XG5cbmV4cG9ydCB0eXBlIFVzZXJSZXByb21wdEFjdGlvblByb3AgPSB7IGNsb3NlRm9ybTogKCkgPT4gdm9pZCB9O1xuZXhwb3J0IHR5cGUgVXNlUmVwcm9tcHRBY3Rpb24gPSAocHJvcHM6IFVzZXJSZXByb21wdEFjdGlvblByb3ApID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+O1xuXG5leHBvcnQgdHlwZSBVc2VSZXByb21wdE9wdGlvbnMgPSB7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gZm9yIGFuIEFjdGlvbiB0aGF0IHdpbGwgbmF2aWdhdGUgdG8gdGhlIHtAbGluayBSZXByb21wdEZvcm19LlxuICogVGhlIHBhc3N3b3JkIGlzIG5vdCBjb25maXJtIGluIHRoaXMgaG9vaywgb25seSBwYXNzZWQgZG93biB0byB0aGUgYWN0aW9uLlxuICovXG5mdW5jdGlvbiB1c2VSZXByb21wdChhY3Rpb246ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LCBvcHRpb25zPzogVXNlUmVwcm9tcHRPcHRpb25zKSB7XG4gIGNvbnN0IHsgZGVzY3JpcHRpb24gPSBcIlBlcmZvcm1pbmcgYW4gYWN0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIG1hc3RlciBwYXNzd29yZFwiIH0gPSBvcHRpb25zID8/IHt9O1xuICBjb25zdCBzZXNzaW9uID0gdXNlU2Vzc2lvbigpO1xuICBjb25zdCB7IHB1c2gsIHBvcCB9ID0gdXNlTmF2aWdhdGlvbigpO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNvbmZpcm0ocGFzc3dvcmQ6IHN0cmluZykge1xuICAgIGNvbnN0IGlzUGFzc3dvcmRDb3JyZWN0ID0gYXdhaXQgc2Vzc2lvbi5jb25maXJtTWFzdGVyUGFzc3dvcmQocGFzc3dvcmQpO1xuICAgIGlmICghaXNQYXNzd29yZENvcnJlY3QpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byB1bmxvY2sgdmF1bHRcIiwgXCJDaGVjayB5b3VyIGNyZWRlbnRpYWxzXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3AoKTtcblxuICAgIC8qIHVzaW5nIGEgc2V0VGltZW91dCBoZXJlIGZpeGVzIGEgYnVnIHdoZXJlIHRoZSBSZXByb21wdEZvcm0gZmxhc2hlcyB3aGVuIHlvdSBwb3AgYmFjayB0byB0aGUgcHJldmlvdXMgc2NyZWVuLiBcbiAgICBUaGlzIGNvbWVzIHdpdGggdGhlIHRyYWRlLW9mZiBvZiBhIHRpbnkgdmlzaWJsZSBkZWxheSBiZXR3ZWVuIHRoZSBSZXByb21wdEZvcm0gcG9wIGFuZCB0aGUgYWN0aW9uIHB1c2hpbmcgYSBuZXcgc2NyZWVuICovXG4gICAgc2V0VGltZW91dChhY3Rpb24sIDEpO1xuICB9XG5cbiAgcmV0dXJuICgpID0+IHB1c2goPFJlcHJvbXB0Rm9ybSBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259IG9uQ29uZmlybT17aGFuZGxlQ29uZmlybX0gLz4pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VSZXByb21wdDtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEFjdGlvblBhbmVsLCBGb3JtIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuXG5leHBvcnQgdHlwZSBSZXByb21wdEZvcm1Qcm9wcyA9IHtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgb25Db25maXJtOiAocGFzc3dvcmQ6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFJlcHJvbXB0Rm9ybSA9IChwcm9wczogUmVwcm9tcHRGb3JtUHJvcHMpID0+IHtcbiAgY29uc3QgeyBkZXNjcmlwdGlvbiwgb25Db25maXJtIH0gPSBwcm9wcztcblxuICBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXM6IHsgcGFzc3dvcmQ6IHN0cmluZyB9KSB7XG4gICAgb25Db25maXJtKHZhbHVlcy5wYXNzd29yZCk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxGb3JtXG4gICAgICBuYXZpZ2F0aW9uVGl0bGU9XCJDb25maXJtYXRpb24gUmVxdWlyZWRcIlxuICAgICAgYWN0aW9ucz17XG4gICAgICAgIDxBY3Rpb25QYW5lbD5cbiAgICAgICAgICA8QWN0aW9uLlN1Ym1pdEZvcm0gdGl0bGU9XCJDb25maXJtXCIgb25TdWJtaXQ9e29uU3VibWl0fSAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgID5cbiAgICAgIDxGb3JtLkRlc2NyaXB0aW9uIHRpdGxlPVwiQ29uZmlybWF0aW9uIFJlcXVpcmVkIGZvclwiIHRleHQ9e2Rlc2NyaXB0aW9ufSAvPlxuICAgICAgPEZvcm0uUGFzc3dvcmRGaWVsZCBhdXRvRm9jdXMgaWQ9XCJwYXNzd29yZFwiIHRpdGxlPVwiTWFzdGVyIFBhc3N3b3JkXCIgLz5cbiAgICA8L0Zvcm0+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZXByb21wdEZvcm07XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlLCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgUHJvcHNXaXRoQ2hpbGRyZW4sIFJlYWN0Tm9kZSwgdXNlQ29udGV4dCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgVW5sb2NrRm9ybSBmcm9tIFwifi9jb21wb25lbnRzL1VubG9ja0Zvcm1cIjtcbmltcG9ydCB7IFZhdWx0TG9hZGluZ0ZhbGxiYWNrIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9WYXVsdExvYWRpbmdGYWxsYmFja1wiO1xuaW1wb3J0IHsgTE9DQUxfU1RPUkFHRV9LRVksIFZBVUxUX0xPQ0tfTUVTU0FHRVMgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgVkFVTFRfVElNRU9VVCB9IGZyb20gXCJ+L2NvbnN0YW50cy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgdXNlQml0d2FyZGVuIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IHVzZVNlc3Npb25SZWR1Y2VyIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uL3JlZHVjZXJcIjtcbmltcG9ydCB7XG4gIGNoZWNrU3lzdGVtTG9ja2VkU2luY2VMYXN0QWNjZXNzLFxuICBjaGVja1N5c3RlbVNsZXB0U2luY2VMYXN0QWNjZXNzLFxuICBTZXNzaW9uU3RvcmFnZSxcbn0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBTZXNzaW9uU3RhdGUgfSBmcm9tIFwifi90eXBlcy9zZXNzaW9uXCI7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCJ+L3V0aWxzL2NhY2hlXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VPbmNlRWZmZWN0IGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZU9uY2VFZmZlY3RcIjtcbmltcG9ydCB7IGhhc2hNYXN0ZXJQYXNzd29yZEZvclJlcHJvbXB0aW5nIH0gZnJvbSBcIn4vdXRpbHMvcGFzc3dvcmRzXCI7XG5pbXBvcnQgeyBwbGF0Zm9ybSB9IGZyb20gXCJ+L3V0aWxzL3BsYXRmb3JtXCI7XG5cbmV4cG9ydCB0eXBlIFNlc3Npb24gPSB7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgY29uZmlybU1hc3RlclBhc3N3b3JkOiAocGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbn0gJiBQaWNrPFNlc3Npb25TdGF0ZSwgXCJ0b2tlblwiIHwgXCJpc0xvYWRpbmdcIiB8IFwiaXNMb2NrZWRcIiB8IFwiaXNBdXRoZW50aWNhdGVkXCI+O1xuXG5leHBvcnQgY29uc3QgU2Vzc2lvbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFNlc3Npb24gfCBudWxsPihudWxsKTtcblxuZXhwb3J0IHR5cGUgU2Vzc2lvblByb3ZpZGVyUHJvcHMgPSBQcm9wc1dpdGhDaGlsZHJlbjx7XG4gIGxvYWRpbmdGYWxsYmFjaz86IFJlYWN0Tm9kZTtcbiAgdW5sb2NrPzogYm9vbGVhbjtcbn0+O1xuXG4vKipcbiAqIENvbXBvbmVudCB3aGljaCBwcm92aWRlcyBhIHNlc3Npb24gdmlhIHRoZSB7QGxpbmsgdXNlU2Vzc2lvbn0gaG9vay5cbiAqIEBwYXJhbSBwcm9wcy51bmxvY2sgSWYgdHJ1ZSwgYW4gdW5sb2NrIGZvcm0gd2lsbCBiZSBkaXNwbGF5ZWQgaWYgdGhlIHZhdWx0IGlzIGxvY2tlZCBvciB1bmF1dGhlbnRpY2F0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTZXNzaW9uUHJvdmlkZXIocHJvcHM6IFNlc3Npb25Qcm92aWRlclByb3BzKSB7XG4gIGNvbnN0IHsgY2hpbGRyZW4sIGxvYWRpbmdGYWxsYmFjayA9IDxWYXVsdExvYWRpbmdGYWxsYmFjayAvPiwgdW5sb2NrIH0gPSBwcm9wcztcblxuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VTZXNzaW9uUmVkdWNlcigpO1xuICBjb25zdCBwZW5kaW5nQWN0aW9uUmVmID0gdXNlUmVmPFByb21pc2U8YW55Pj4oUHJvbWlzZS5yZXNvbHZlKCkpO1xuXG4gIHVzZU9uY2VFZmZlY3QoYm9vdHN0cmFwU2Vzc2lvbiwgYml0d2FyZGVuKTtcblxuICBhc3luYyBmdW5jdGlvbiBib290c3RyYXBTZXNzaW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBiaXR3YXJkZW5cbiAgICAgICAgLnNldEFjdGlvbkxpc3RlbmVyKFwibG9ja1wiLCBoYW5kbGVMb2NrKVxuICAgICAgICAuc2V0QWN0aW9uTGlzdGVuZXIoXCJ1bmxvY2tcIiwgaGFuZGxlVW5sb2NrKVxuICAgICAgICAuc2V0QWN0aW9uTGlzdGVuZXIoXCJsb2dvdXRcIiwgaGFuZGxlTG9nb3V0KTtcblxuICAgICAgY29uc3QgW3Rva2VuLCBwYXNzd29yZEhhc2gsIGxhc3RBY3Rpdml0eVRpbWVTdHJpbmcsIGxhc3RWYXVsdFN0YXR1c10gPSBhd2FpdCBTZXNzaW9uU3RvcmFnZS5nZXRTYXZlZFNlc3Npb24oKTtcbiAgICAgIGlmICghdG9rZW4gfHwgIXBhc3N3b3JkSGFzaCkgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKCk7XG5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJsb2FkU3RhdGVcIiwgdG9rZW4sIHBhc3N3b3JkSGFzaCB9KTtcbiAgICAgIGJpdHdhcmRlbi5zZXRTZXNzaW9uVG9rZW4odG9rZW4pO1xuXG4gICAgICBpZiAoYml0d2FyZGVuLndhc0NsaVVwZGF0ZWQpIHRocm93IG5ldyBMb2dvdXRWYXVsdEVycm9yKFZBVUxUX0xPQ0tfTUVTU0FHRVMuQ0xJX1VQREFURUQpO1xuICAgICAgaWYgKGxhc3RWYXVsdFN0YXR1cyA9PT0gXCJsb2NrZWRcIikgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKCk7XG4gICAgICBpZiAobGFzdFZhdWx0U3RhdHVzID09PSBcInVuYXV0aGVudGljYXRlZFwiKSB0aHJvdyBuZXcgTG9nb3V0VmF1bHRFcnJvcigpO1xuXG4gICAgICBpZiAobGFzdEFjdGl2aXR5VGltZVN0cmluZykge1xuICAgICAgICBjb25zdCBsYXN0QWN0aXZpdHlUaW1lID0gbmV3IERhdGUobGFzdEFjdGl2aXR5VGltZVN0cmluZyk7XG5cbiAgICAgICAgY29uc3QgdmF1bHRUaW1lb3V0TXMgPSArZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKS5yZXByb21wdElnbm9yZUR1cmF0aW9uO1xuICAgICAgICBpZiAocGxhdGZvcm0gPT09IFwibWFjb3NcIiAmJiB2YXVsdFRpbWVvdXRNcyA9PT0gVkFVTFRfVElNRU9VVC5TWVNURU1fTE9DSykge1xuICAgICAgICAgIGlmIChhd2FpdCBjaGVja1N5c3RlbUxvY2tlZFNpbmNlTGFzdEFjY2VzcyhsYXN0QWN0aXZpdHlUaW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKFZBVUxUX0xPQ0tfTUVTU0FHRVMuU1lTVEVNX0xPQ0spO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiICYmIHZhdWx0VGltZW91dE1zID09PSBWQVVMVF9USU1FT1VULlNZU1RFTV9TTEVFUCkge1xuICAgICAgICAgIGlmIChhd2FpdCBjaGVja1N5c3RlbVNsZXB0U2luY2VMYXN0QWNjZXNzKGxhc3RBY3Rpdml0eVRpbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTG9ja1ZhdWx0RXJyb3IoVkFVTFRfTE9DS19NRVNTQUdFUy5TWVNURU1fU0xFRVApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh2YXVsdFRpbWVvdXRNcyAhPT0gVkFVTFRfVElNRU9VVC5ORVZFUikge1xuICAgICAgICAgIGNvbnN0IHRpbWVFbGFwc2VTaW5jZUxhc3RBY3Rpdml0eSA9IERhdGUubm93KCkgLSBsYXN0QWN0aXZpdHlUaW1lLmdldFRpbWUoKTtcbiAgICAgICAgICBpZiAodmF1bHRUaW1lb3V0TXMgPT09IFZBVUxUX1RJTUVPVVQuSU1NRURJQVRFTFkgfHwgdGltZUVsYXBzZVNpbmNlTGFzdEFjdGl2aXR5ID49IHZhdWx0VGltZW91dE1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTG9ja1ZhdWx0RXJyb3IoVkFVTFRfTE9DS19NRVNTQUdFUy5USU1FT1VUKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImZpbmlzaExvYWRpbmdTYXZlZFN0YXRlXCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIExvY2tWYXVsdEVycm9yKSB7XG4gICAgICAgIHBlbmRpbmdBY3Rpb25SZWYuY3VycmVudCA9IGJpdHdhcmRlbi5sb2NrKHsgcmVhc29uOiBlcnJvci5tZXNzYWdlLCBpbW1lZGlhdGU6IHRydWUsIGNoZWNrVmF1bHRTdGF0dXM6IHRydWUgfSk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgTG9nb3V0VmF1bHRFcnJvcikge1xuICAgICAgICBwZW5kaW5nQWN0aW9uUmVmLmN1cnJlbnQgPSBiaXR3YXJkZW4ubG9nb3V0KHsgcmVhc29uOiBlcnJvci5tZXNzYWdlLCBpbW1lZGlhdGU6IHRydWUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZW5kaW5nQWN0aW9uUmVmLmN1cnJlbnQgPSBiaXR3YXJkZW4ubG9jayh7IGltbWVkaWF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImZhaWxMb2FkaW5nU2F2ZWRTdGF0ZVwiIH0pO1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGJvb3RzdHJhcCBzZXNzaW9uIHN0YXRlXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVVbmxvY2socGFzc3dvcmQ6IHN0cmluZywgdG9rZW46IHN0cmluZykge1xuICAgIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGhhc2hNYXN0ZXJQYXNzd29yZEZvclJlcHJvbXB0aW5nKHBhc3N3b3JkKTtcbiAgICBhd2FpdCBTZXNzaW9uU3RvcmFnZS5zYXZlU2Vzc2lvbih0b2tlbiwgcGFzc3dvcmRIYXNoKTtcbiAgICBhd2FpdCBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MT0NLX1JFQVNPTik7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcInVubG9ja1wiLCB0b2tlbiwgcGFzc3dvcmRIYXNoIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9jayhyZWFzb24/OiBzdHJpbmcpIHtcbiAgICBhd2FpdCBTZXNzaW9uU3RvcmFnZS5jbGVhclNlc3Npb24oKTtcbiAgICBpZiAocmVhc29uKSBhd2FpdCBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MT0NLX1JFQVNPTiwgcmVhc29uKTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6IFwibG9ja1wiIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9nb3V0KHJlYXNvbj86IHN0cmluZykge1xuICAgIGF3YWl0IFNlc3Npb25TdG9yYWdlLmNsZWFyU2Vzc2lvbigpO1xuICAgIENhY2hlLmNsZWFyKCk7XG4gICAgaWYgKHJlYXNvbikgYXdhaXQgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTE9DS19SRUFTT04sIHJlYXNvbik7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcImxvZ291dFwiIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gY29uZmlybU1hc3RlclBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBlbnRlcmVkUGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaE1hc3RlclBhc3N3b3JkRm9yUmVwcm9tcHRpbmcocGFzc3dvcmQpO1xuICAgIHJldHVybiBlbnRlcmVkUGFzc3dvcmRIYXNoID09PSBzdGF0ZS5wYXNzd29yZEhhc2g7XG4gIH1cblxuICBjb25zdCBjb250ZXh0VmFsdWU6IFNlc3Npb24gPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICB0b2tlbjogc3RhdGUudG9rZW4sXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyxcbiAgICAgIGlzQXV0aGVudGljYXRlZDogc3RhdGUuaXNBdXRoZW50aWNhdGVkLFxuICAgICAgaXNMb2NrZWQ6IHN0YXRlLmlzTG9ja2VkLFxuICAgICAgYWN0aXZlOiAhc3RhdGUuaXNMb2FkaW5nICYmIHN0YXRlLmlzQXV0aGVudGljYXRlZCAmJiAhc3RhdGUuaXNMb2NrZWQsXG4gICAgICBjb25maXJtTWFzdGVyUGFzc3dvcmQsXG4gICAgfSksXG4gICAgW3N0YXRlLCBjb25maXJtTWFzdGVyUGFzc3dvcmRdXG4gICk7XG5cbiAgaWYgKHN0YXRlLmlzTG9hZGluZykgcmV0dXJuIGxvYWRpbmdGYWxsYmFjaztcblxuICBjb25zdCBzaG93VW5sb2NrRm9ybSA9IHN0YXRlLmlzTG9ja2VkIHx8ICFzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7XG4gIGNvbnN0IF9jaGlsZHJlbiA9IHN0YXRlLnRva2VuID8gY2hpbGRyZW4gOiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAge3Nob3dVbmxvY2tGb3JtICYmIHVubG9jayA/IDxVbmxvY2tGb3JtIHBlbmRpbmdBY3Rpb249e3BlbmRpbmdBY3Rpb25SZWYuY3VycmVudH0gLz4gOiBfY2hpbGRyZW59XG4gICAgPC9TZXNzaW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNlc3Npb24oKTogU2Vzc2lvbiB7XG4gIGNvbnN0IHNlc3Npb24gPSB1c2VDb250ZXh0KFNlc3Npb25Db250ZXh0KTtcbiAgaWYgKHNlc3Npb24gPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZVNlc3Npb24gbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFNlc3Npb25Qcm92aWRlclwiKTtcbiAgfVxuXG4gIHJldHVybiBzZXNzaW9uO1xufVxuXG5jbGFzcyBMb2NrVmF1bHRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobG9ja1JlYXNvbj86IHN0cmluZykge1xuICAgIHN1cGVyKGxvY2tSZWFzb24pO1xuICB9XG59XG5cbmNsYXNzIExvZ291dFZhdWx0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGxvY2tSZWFzb24/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihsb2NrUmVhc29uKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFjdGlvbiwgQWN0aW9uUGFuZWwsIENsaXBib2FyZCwgRm9ybSwgZ2V0UHJlZmVyZW5jZVZhbHVlcywgSWNvbiwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEZWJ1Z2dpbmdCdWdSZXBvcnRpbmdBY3Rpb25TZWN0aW9uIH0gZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zXCI7XG5pbXBvcnQgeyBMT0NBTF9TVE9SQUdFX0tFWSB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyB1c2VCaXR3YXJkZW4gfSBmcm9tIFwifi9jb250ZXh0L2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgdHJlYXRFcnJvciB9IGZyb20gXCJ+L3V0aWxzL2RlYnVnXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VWYXVsdE1lc3NhZ2VzIGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZVZhdWx0TWVzc2FnZXNcIjtcbmltcG9ydCB7IHVzZUxvY2FsU3RvcmFnZUl0ZW0gfSBmcm9tIFwifi91dGlscy9sb2NhbHN0b3JhZ2VcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIn4vdXRpbHMvcGxhdGZvcm1cIjtcbmltcG9ydCB7IGdldExhYmVsRm9yVGltZW91dFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG50eXBlIFVubG9ja0Zvcm1Qcm9wcyA9IHtcbiAgcGVuZGluZ0FjdGlvbj86IFByb21pc2U8dm9pZD47XG59O1xuXG4vKiogRm9ybSBmb3IgdW5sb2NraW5nIG9yIGxvZ2dpbmcgaW4gdG8gdGhlIEJpdHdhcmRlbiB2YXVsdC4gKi9cbmNvbnN0IFVubG9ja0Zvcm0gPSAoeyBwZW5kaW5nQWN0aW9uID0gUHJvbWlzZS5yZXNvbHZlKCkgfTogVW5sb2NrRm9ybVByb3BzKSA9PiB7XG4gIGNvbnN0IGJpdHdhcmRlbiA9IHVzZUJpdHdhcmRlbigpO1xuICBjb25zdCB7IHVzZXJNZXNzYWdlLCBzZXJ2ZXJNZXNzYWdlLCBzaG91bGRTaG93U2VydmVyIH0gPSB1c2VWYXVsdE1lc3NhZ2VzKCk7XG5cbiAgY29uc3QgW2lzTG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1bmxvY2tFcnJvciwgc2V0VW5sb2NrRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBjb25zdCBbc2hvd1Bhc3N3b3JkLCBzZXRTaG93UGFzc3dvcmRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFzc3dvcmQsIHNldFBhc3N3b3JkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbG9ja1JlYXNvbiwgeyByZW1vdmU6IGNsZWFyTG9ja1JlYXNvbiB9XSA9IHVzZUxvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTE9DS19SRUFTT04pO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KCkge1xuICAgIGlmIChwYXNzd29yZC5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIGNvbnN0IHRvYXN0ID0gYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkFuaW1hdGVkLCBcIlVubG9ja2luZyBWYXVsdC4uLlwiLCBcIlBsZWFzZSB3YWl0XCIpO1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0VW5sb2NrRXJyb3IodW5kZWZpbmVkKTtcblxuICAgICAgYXdhaXQgcGVuZGluZ0FjdGlvbjtcblxuICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0OiB2YXVsdFN0YXRlIH0gPSBhd2FpdCBiaXR3YXJkZW4uc3RhdHVzKCk7XG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgICBpZiAodmF1bHRTdGF0ZS5zdGF0dXMgPT09IFwidW5hdXRoZW50aWNhdGVkXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBiaXR3YXJkZW4ubG9naW4oKTtcbiAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRpc3BsYXlhYmxlRXJyb3IgPSBgUGxlYXNlIGNoZWNrIHlvdXIgJHtzaG91bGRTaG93U2VydmVyID8gXCJTZXJ2ZXIgVVJMLCBcIiA6IFwiXCJ9QVBJIEtleSBhbmQgU2VjcmV0LmAsXG4gICAgICAgICAgICB0cmVhdGVkRXJyb3IsXG4gICAgICAgICAgfSA9IGdldFVzZWZ1bEVycm9yKGVycm9yLCBwYXNzd29yZCk7XG4gICAgICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIGxvZyBpblwiLCBkaXNwbGF5YWJsZUVycm9yKTtcbiAgICAgICAgICBzZXRVbmxvY2tFcnJvcih0cmVhdGVkRXJyb3IpO1xuICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbG9nIGluXCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgYml0d2FyZGVuLnVubG9jayhwYXNzd29yZCk7XG4gICAgICBhd2FpdCBjbGVhckxvY2tSZWFzb24oKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgeyBkaXNwbGF5YWJsZUVycm9yID0gXCJQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFsc1wiLCB0cmVhdGVkRXJyb3IgfSA9IGdldFVzZWZ1bEVycm9yKGVycm9yLCBwYXNzd29yZCk7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgXCJGYWlsZWQgdG8gdW5sb2NrIHZhdWx0XCIsIGRpc3BsYXlhYmxlRXJyb3IpO1xuICAgICAgc2V0VW5sb2NrRXJyb3IodHJlYXRlZEVycm9yKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gdW5sb2NrIHZhdWx0XCIsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29weVVubG9ja0Vycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdW5sb2NrRXJyb3IpIHJldHVybjtcbiAgICBhd2FpdCBDbGlwYm9hcmQuY29weSh1bmxvY2tFcnJvcik7XG4gICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLlN1Y2Nlc3MsIFwiRXJyb3IgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcbiAgfTtcblxuICBsZXQgUGFzc3dvcmRGaWVsZCA9IEZvcm0uUGFzc3dvcmRGaWVsZDtcbiAgbGV0IHBhc3N3b3JkRmllbGRJZCA9IFwicGFzc3dvcmRcIjtcbiAgaWYgKHNob3dQYXNzd29yZCkge1xuICAgIFBhc3N3b3JkRmllbGQgPSBGb3JtLlRleHRGaWVsZDtcbiAgICBwYXNzd29yZEZpZWxkSWQgPSBcInBsYWluUGFzc3dvcmRcIjtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEZvcm1cbiAgICAgIGFjdGlvbnM9e1xuICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgeyFpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPEFjdGlvbi5TdWJtaXRGb3JtIGljb249e0ljb24uTG9ja1VubG9ja2VkfSB0aXRsZT1cIlVubG9ja1wiIG9uU3VibWl0PXtvblN1Ym1pdH0gLz5cbiAgICAgICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgICAgIGljb249e3Nob3dQYXNzd29yZCA/IEljb24uRXllRGlzYWJsZWQgOiBJY29uLkV5ZX1cbiAgICAgICAgICAgICAgICB0aXRsZT17c2hvd1Bhc3N3b3JkID8gXCJIaWRlIFBhc3N3b3JkXCIgOiBcIlNob3cgUGFzc3dvcmRcIn1cbiAgICAgICAgICAgICAgICBvbkFjdGlvbj17KCkgPT4gc2V0U2hvd1Bhc3N3b3JkKChwcmV2KSA9PiAhcHJldil9XG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ9e3sgbWFjT1M6IHsga2V5OiBcImVcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIl0gfSwgd2luZG93czogeyBrZXk6IFwiZVwiLCBtb2RpZmllcnM6IFtcImFsdFwiXSB9IH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHshIXVubG9ja0Vycm9yICYmIChcbiAgICAgICAgICAgIDxBY3Rpb25cbiAgICAgICAgICAgICAgb25BY3Rpb249e2NvcHlVbmxvY2tFcnJvcn1cbiAgICAgICAgICAgICAgdGl0bGU9XCJDb3B5IExhc3QgRXJyb3JcIlxuICAgICAgICAgICAgICBpY29uPXtJY29uLkJ1Z31cbiAgICAgICAgICAgICAgc3R5bGU9e0FjdGlvbi5TdHlsZS5EZXN0cnVjdGl2ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8RGVidWdnaW5nQnVnUmVwb3J0aW5nQWN0aW9uU2VjdGlvbiAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgID5cbiAgICAgIHtzaG91bGRTaG93U2VydmVyICYmIDxGb3JtLkRlc2NyaXB0aW9uIHRpdGxlPVwiU2VydmVyIFVSTFwiIHRleHQ9e3NlcnZlck1lc3NhZ2V9IC8+fVxuICAgICAgPEZvcm0uRGVzY3JpcHRpb24gdGl0bGU9XCJWYXVsdCBTdGF0dXNcIiB0ZXh0PXt1c2VyTWVzc2FnZX0gLz5cbiAgICAgIDxQYXNzd29yZEZpZWxkXG4gICAgICAgIGlkPXtwYXNzd29yZEZpZWxkSWR9XG4gICAgICAgIHRpdGxlPVwiTWFzdGVyIFBhc3N3b3JkXCJcbiAgICAgICAgdmFsdWU9e3Bhc3N3b3JkfVxuICAgICAgICBvbkNoYW5nZT17c2V0UGFzc3dvcmR9XG4gICAgICAgIHJlZj17KGZpZWxkKSA9PiBmaWVsZD8uZm9jdXMoKX1cbiAgICAgIC8+XG4gICAgICA8Rm9ybS5EZXNjcmlwdGlvblxuICAgICAgICB0aXRsZT1cIlwiXG4gICAgICAgIHRleHQ9e2BQcmVzcyAke3BsYXRmb3JtID09PSBcIm1hY29zXCIgPyBcIlx1MjMyNVwiIDogXCJBbHRcIn0rRSB0byAke3Nob3dQYXNzd29yZCA/IFwiaGlkZVwiIDogXCJzaG93XCJ9IHBhc3N3b3JkYH1cbiAgICAgIC8+XG4gICAgICB7ISFsb2NrUmVhc29uICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8Rm9ybS5EZXNjcmlwdGlvbiB0aXRsZT1cIlx1MjEzOVx1RkUwRlwiIHRleHQ9e2xvY2tSZWFzb259IC8+XG4gICAgICAgICAgPFRpbWVvdXRJbmZvRGVzY3JpcHRpb24gLz5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvRm9ybT5cbiAgKTtcbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXRJbmZvRGVzY3JpcHRpb24oKSB7XG4gIGNvbnN0IHZhdWx0VGltZW91dE1zID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxBbGxQcmVmZXJlbmNlcz4oKS5yZXByb21wdElnbm9yZUR1cmF0aW9uO1xuICBjb25zdCB0aW1lb3V0TGFiZWwgPSBnZXRMYWJlbEZvclRpbWVvdXRQcmVmZXJlbmNlKHZhdWx0VGltZW91dE1zKTtcblxuICBpZiAoIXRpbWVvdXRMYWJlbCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAoXG4gICAgPEZvcm0uRGVzY3JpcHRpb25cbiAgICAgIHRpdGxlPVwiXCJcbiAgICAgIHRleHQ9e2BUaW1lb3V0IGlzIHNldCB0byAke3RpbWVvdXRMYWJlbH0sIHRoaXMgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gdGhlIGV4dGVuc2lvbiBzZXR0aW5nc2B9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0VXNlZnVsRXJyb3IoZXJyb3I6IHVua25vd24sIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgdHJlYXRlZEVycm9yID0gdHJlYXRFcnJvcihlcnJvciwgeyBvbWl0U2Vuc2l0aXZlVmFsdWU6IHBhc3N3b3JkIH0pO1xuICBsZXQgZGlzcGxheWFibGVFcnJvcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBpZiAoL0ludmFsaWQgbWFzdGVyIHBhc3N3b3JkL2kudGVzdCh0cmVhdGVkRXJyb3IpKSB7XG4gICAgZGlzcGxheWFibGVFcnJvciA9IFwiSW52YWxpZCBtYXN0ZXIgcGFzc3dvcmRcIjtcbiAgfSBlbHNlIGlmICgvSW52YWxpZCBBUEkgS2V5L2kudGVzdCh0cmVhdGVkRXJyb3IpKSB7XG4gICAgZGlzcGxheWFibGVFcnJvciA9IFwiSW52YWxpZCBDbGllbnQgSUQgb3IgU2VjcmV0XCI7XG4gIH1cbiAgcmV0dXJuIHsgZGlzcGxheWFibGVFcnJvciwgdHJlYXRlZEVycm9yIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVubG9ja0Zvcm07XG4iLCAiLyogUHV0IGNvbnN0YW50cyB0aGF0IHlvdSBmZWVsIGxpa2UgdGhleSBzdGlsbCBkb24ndCBkZXNlcnZlIGEgZmlsZSBvZiB0aGVpciBvd24gaGVyZSAqL1xuXG5pbXBvcnQgeyBJY29uLCBLZXlib2FyZCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IEl0ZW1UeXBlIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VSVkVSX1VSTCA9IFwiaHR0cHM6Ly9iaXR3YXJkZW4uY29tXCI7XG5cbmV4cG9ydCBjb25zdCBTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVIgPSBcIkhJRERFTi1WQUxVRVwiO1xuXG5leHBvcnQgY29uc3QgTE9DQUxfU1RPUkFHRV9LRVkgPSB7XG4gIFBBU1NXT1JEX09QVElPTlM6IFwiYnctZ2VuZXJhdGUtcGFzc3dvcmQtb3B0aW9uc1wiLFxuICBQQVNTV09SRF9PTkVfVElNRV9XQVJOSU5HOiBcImJ3LWdlbmVyYXRlLXBhc3N3b3JkLXdhcm5pbmctYWNjZXB0ZWRcIixcbiAgU0VTU0lPTl9UT0tFTjogXCJzZXNzaW9uVG9rZW5cIixcbiAgUkVQUk9NUFRfSEFTSDogXCJzZXNzaW9uUmVwcm9tcHRIYXNoXCIsXG4gIFNFUlZFUl9VUkw6IFwiY2xpU2VydmVyXCIsXG4gIExBU1RfQUNUSVZJVFlfVElNRTogXCJsYXN0QWN0aXZpdHlUaW1lXCIsXG4gIFZBVUxUX0xPQ0tfUkVBU09OOiBcInZhdWx0TG9ja1JlYXNvblwiLFxuICBWQVVMVF9GQVZPUklURV9PUkRFUjogXCJ2YXVsdEZhdm9yaXRlT3JkZXJcIixcbiAgVkFVTFRfTEFTVF9TVEFUVVM6IFwibGFzdFZhdWx0U3RhdHVzXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgVkFVTFRfTE9DS19NRVNTQUdFUyA9IHtcbiAgVElNRU9VVDogXCJWYXVsdCB0aW1lZCBvdXQgZHVlIHRvIGluYWN0aXZpdHlcIixcbiAgTUFOVUFMOiBcIk1hbnVhbGx5IGxvY2tlZCBieSB0aGUgdXNlclwiLFxuICBTWVNURU1fTE9DSzogXCJTY3JlZW4gd2FzIGxvY2tlZFwiLFxuICBTWVNURU1fU0xFRVA6IFwiU3lzdGVtIHdlbnQgdG8gc2xlZXBcIixcbiAgQ0xJX1VQREFURUQ6IFwiQml0d2FyZGVuIGhhcyBiZWVuIHVwZGF0ZWQuIFBsZWFzZSBsb2dpbiBhZ2Fpbi5cIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBTSE9SVENVVF9LRVlfU0VRVUVOQ0U6IEtleWJvYXJkLktleUVxdWl2YWxlbnRbXSA9IFtcbiAgXCIxXCIsXG4gIFwiMlwiLFxuICBcIjNcIixcbiAgXCI0XCIsXG4gIFwiNVwiLFxuICBcIjZcIixcbiAgXCI3XCIsXG4gIFwiOFwiLFxuICBcIjlcIixcbiAgXCJiXCIsXG4gIFwiY1wiLFxuICBcImRcIixcbiAgXCJlXCIsXG4gIFwiZlwiLFxuICBcImdcIixcbiAgXCJoXCIsXG4gIFwiaVwiLFxuICBcImpcIixcbiAgXCJrXCIsXG4gIFwibFwiLFxuICBcIm1cIixcbiAgXCJuXCIsXG4gIFwib1wiLFxuICBcInBcIixcbiAgXCJxXCIsXG4gIFwiclwiLFxuICBcInNcIixcbiAgXCJ0XCIsXG4gIFwidVwiLFxuICBcInZcIixcbiAgXCJ3XCIsXG4gIFwieFwiLFxuICBcInlcIixcbiAgXCJ6XCIsXG4gIFwiK1wiLFxuICBcIi1cIixcbiAgXCIuXCIsXG4gIFwiLFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEZPTERFUl9PUFRJT05TID0ge1xuICBBTEw6IFwiYWxsXCIsXG4gIE5PX0ZPTERFUjogXCJuby1mb2xkZXJcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBDQUNIRV9LRVlTID0ge1xuICBJVjogXCJpdlwiLFxuICBWQVVMVDogXCJ2YXVsdFwiLFxuICBDVVJSRU5UX0ZPTERFUl9JRDogXCJjdXJyZW50Rm9sZGVySWRcIixcbiAgU0VORF9UWVBFX0ZJTFRFUjogXCJzZW5kVHlwZUZpbHRlclwiLFxuICBDTElfVkVSU0lPTjogXCJjbGlWZXJzaW9uXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgSVRFTV9UWVBFX1RPX0lDT05fTUFQOiBSZWNvcmQ8SXRlbVR5cGUsIEljb24+ID0ge1xuICBbSXRlbVR5cGUuTE9HSU5dOiBJY29uLkdsb2JlLFxuICBbSXRlbVR5cGUuQ0FSRF06IEljb24uQ3JlZGl0Q2FyZCxcbiAgW0l0ZW1UeXBlLklERU5USVRZXTogSWNvbi5QZXJzb24sXG4gIFtJdGVtVHlwZS5OT1RFXTogSWNvbi5Eb2N1bWVudCxcbiAgW0l0ZW1UeXBlLlNTSF9LRVldOiBJY29uLktleSxcbn07XG4iLCAiZXhwb3J0IGludGVyZmFjZSBJdGVtIHtcbiAgb2JqZWN0OiBcIml0ZW1cIjtcbiAgaWQ6IHN0cmluZztcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyB8IG51bGw7XG4gIGZvbGRlcklkOiBzdHJpbmcgfCBudWxsO1xuICB0eXBlOiBJdGVtVHlwZTtcbiAgcmVwcm9tcHQ6IFJlcHJvbXB0O1xuICBuYW1lOiBzdHJpbmc7XG4gIG5vdGVzOiBzdHJpbmcgfCBudWxsO1xuICBmYXZvcml0ZTogYm9vbGVhbjtcbiAgbG9naW4/OiBMb2dpbjtcbiAgY29sbGVjdGlvbklkczogc3RyaW5nW107XG4gIHJldmlzaW9uRGF0ZTogc3RyaW5nO1xuICBjcmVhdGlvbkRhdGU6IHN0cmluZztcbiAgZGVsZXRlZERhdGU6IHN0cmluZyB8IG51bGw7XG4gIGlkZW50aXR5PzogSWRlbnRpdHk7XG4gIGZpZWxkcz86IEZpZWxkW107XG4gIHBhc3N3b3JkSGlzdG9yeT86IFBhc3N3b3JkSGlzdG9yeVtdO1xuICBzZWN1cmVOb3RlPzogU2VjdXJlTm90ZTtcbiAgY2FyZD86IENhcmQ7XG4gIHNzaEtleT86IFNzaEtleTtcbn1cblxuZXhwb3J0IGVudW0gSXRlbVR5cGUge1xuICBMT0dJTiA9IDEsXG4gIE5PVEUgPSAyLFxuICBDQVJEID0gMyxcbiAgSURFTlRJVFkgPSA0LFxuICBTU0hfS0VZID0gNSxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb2xkZXIge1xuICBvYmplY3Q6IFwiZm9sZGVyXCI7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IElERU5USVRZX1RJVExFUyA9IHtcbiAgTVI6IFwiTXJcIixcbiAgTVJTOiBcIk1yc1wiLFxuICBNUzogXCJNc1wiLFxuICBNWDogXCJNeFwiLFxuICBEUjogXCJEclwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgSWRlbnRpdHlUaXRsZSA9ICh0eXBlb2YgSURFTlRJVFlfVElUTEVTKVtrZXlvZiB0eXBlb2YgSURFTlRJVFlfVElUTEVTXTtcblxuZXhwb3J0IGludGVyZmFjZSBJZGVudGl0eSB7XG4gIHRpdGxlOiBJZGVudGl0eVRpdGxlIHwgbnVsbDtcbiAgZmlyc3ROYW1lOiBzdHJpbmcgfCBudWxsO1xuICBtaWRkbGVOYW1lOiBzdHJpbmcgfCBudWxsO1xuICBsYXN0TmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgYWRkcmVzczE6IHN0cmluZyB8IG51bGw7XG4gIGFkZHJlc3MyOiBzdHJpbmcgfCBudWxsO1xuICBhZGRyZXNzMzogc3RyaW5nIHwgbnVsbDtcbiAgY2l0eTogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdGU6IHN0cmluZyB8IG51bGw7XG4gIHBvc3RhbENvZGU6IHN0cmluZyB8IG51bGw7XG4gIGNvdW50cnk6IHN0cmluZyB8IG51bGw7XG4gIGNvbXBhbnk6IHN0cmluZyB8IG51bGw7XG4gIGVtYWlsOiBzdHJpbmcgfCBudWxsO1xuICBwaG9uZTogc3RyaW5nIHwgbnVsbDtcbiAgc3NuOiBzdHJpbmcgfCBudWxsO1xuICB1c2VybmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcGFzc3BvcnROdW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIGxpY2Vuc2VOdW1iZXI6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBjb25zdCBDQVJEX0JSQU5EUyA9IHtcbiAgVklTQTogXCJWaXNhXCIsXG4gIE1BU1RFUkNBUkQ6IFwiTWFzdGVyY2FyZFwiLFxuICBBTUVYOiBcIkFtZXhcIixcbiAgRElTQ09WRVI6IFwiRGlzY292ZXJcIixcbiAgRElORVJTX0NMVUI6IFwiRGluZXJzIENsdWJcIixcbiAgSkNCOiBcIkpDQlwiLFxuICBNQUVTVFJPOiBcIk1hZXN0cm9cIixcbiAgVU5JT05fUEFZOiBcIlVuaW9uUGF5XCIsXG4gIFJVX1BBWTogXCJSdVBheVwiLFxuICBPVEhFUjogXCJPdGhlclwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgQ2FyZEJyYW5kID0gKHR5cGVvZiBDQVJEX0JSQU5EUylba2V5b2YgdHlwZW9mIENBUkRfQlJBTkRTXTtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkIHtcbiAgY2FyZGhvbGRlck5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGJyYW5kOiBDYXJkQnJhbmQgfCBudWxsO1xuICBudW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIGV4cE1vbnRoOiBzdHJpbmcgfCBudWxsO1xuICBleHBZZWFyOiBzdHJpbmcgfCBudWxsO1xuICBjb2RlOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNzaEtleSB7XG4gIHByaXZhdGVLZXk6IHN0cmluZztcbiAgcHVibGljS2V5OiBzdHJpbmc7XG4gIGtleUZpbmdlcnByaW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkVHlwZSB7XG4gIFRFWFQgPSAwLFxuICBISURERU4gPSAxLFxuICBCT09MRUFOID0gMixcbiAgTElOS0VEID0gMyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgdHlwZTogRmllbGRUeXBlO1xuICBsaW5rZWRJZDogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dpbiB7XG4gIHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBwYXNzd29yZDogc3RyaW5nIHwgbnVsbDtcbiAgdG90cDogc3RyaW5nIHwgbnVsbDtcbiAgcGFzc3dvcmRSZXZpc2lvbkRhdGU6IHN0cmluZyB8IG51bGw7XG4gIHVyaXM/OiBVcmlzW107XG4gIGZpZG8yQ3JlZGVudGlhbHM/OiBGaWRvMkNyZWRlbnRpYWxbXTtcbn1cblxuZXhwb3J0IGVudW0gVXJpTWF0Y2gge1xuICBCQVNFX0RPTUFJTiA9IDAsXG4gIEhPU1QgPSAxLFxuICBTVEFSVFNfV0lUSCA9IDIsXG4gIEVYQUNUID0gMyxcbiAgUkVHVUxBUl9FWFBSRVNTSU9OID0gNCxcbiAgTkVWRVIgPSA1LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVyaXMge1xuICBtYXRjaDogVXJpTWF0Y2ggfCBudWxsO1xuICB1cmk6IHN0cmluZyB8IG51bGw7XG59XG5cbmludGVyZmFjZSBGaWRvMkNyZWRlbnRpYWwge1xuICBjcmVkZW50aWFsSWQ6IHN0cmluZztcbiAga2V5VHlwZTogc3RyaW5nO1xuICBrZXlBbGdvcml0aG06IHN0cmluZztcbiAga2V5Q3VydmU6IHN0cmluZztcbiAga2V5VmFsdWU6IHN0cmluZztcbiAgcnBJZDogc3RyaW5nO1xuICB1c2VySGFuZGxlOiBzdHJpbmc7XG4gIHVzZXJOYW1lOiBzdHJpbmc7XG4gIGNvdW50ZXI6IHN0cmluZztcbiAgcnBOYW1lOiBzdHJpbmc7XG4gIHVzZXJEaXNwbGF5TmFtZTogc3RyaW5nO1xuICBkaXNjb3ZlcmFibGU6IHN0cmluZztcbiAgY3JlYXRpb25EYXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFzc3dvcmRIaXN0b3J5IHtcbiAgbGFzdFVzZWREYXRlOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJlTm90ZSB7XG4gIHR5cGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGVudW0gUmVwcm9tcHQge1xuICBOTyA9IDAsXG4gIFJFUVVJUkVEID0gMSxcbn1cblxuZXhwb3J0IHR5cGUgVmF1bHQgPSB7XG4gIGl0ZW1zOiBJdGVtW107XG4gIGZvbGRlcnM6IEZvbGRlcltdO1xufTtcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBQcm9wc1dpdGhDaGlsZHJlbiwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQml0d2FyZGVuIH0gZnJvbSBcIn4vYXBpL2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgTG9hZGluZ0ZhbGxiYWNrIH0gZnJvbSBcIn4vY29tcG9uZW50cy9Mb2FkaW5nRmFsbGJhY2tcIjtcbmltcG9ydCBUcm91Ymxlc2hvb3RpbmdHdWlkZSBmcm9tIFwifi9jb21wb25lbnRzL1Ryb3VibGVzaG9vdGluZ0d1aWRlXCI7XG5pbXBvcnQgeyBJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgdXNlT25jZUVmZmVjdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VPbmNlRWZmZWN0XCI7XG5cbmNvbnN0IEJpdHdhcmRlbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0PEJpdHdhcmRlbiB8IG51bGw+KG51bGwpO1xuXG5leHBvcnQgdHlwZSBCaXR3YXJkZW5Qcm92aWRlclByb3BzID0gUHJvcHNXaXRoQ2hpbGRyZW48e1xuICBsb2FkaW5nRmFsbGJhY2s/OiBSZWFjdE5vZGU7XG59PjtcblxuZXhwb3J0IGNvbnN0IEJpdHdhcmRlblByb3ZpZGVyID0gKHsgY2hpbGRyZW4sIGxvYWRpbmdGYWxsYmFjayA9IDxMb2FkaW5nRmFsbGJhY2sgLz4gfTogQml0d2FyZGVuUHJvdmlkZXJQcm9wcykgPT4ge1xuICBjb25zdCBbYml0d2FyZGVuLCBzZXRCaXR3YXJkZW5dID0gdXNlU3RhdGU8Qml0d2FyZGVuPigpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPEVycm9yPigpO1xuXG4gIHVzZU9uY2VFZmZlY3QoKCkgPT4ge1xuICAgIHZvaWQgbmV3IEJpdHdhcmRlbigpLmluaXRpYWxpemUoKS50aGVuKHNldEJpdHdhcmRlbikuY2F0Y2goaGFuZGxlQndJbml0RXJyb3IpO1xuICB9KTtcblxuICBmdW5jdGlvbiBoYW5kbGVCd0luaXRFcnJvcihlcnJvcjogRXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlcnJvcikgcmV0dXJuIDxUcm91Ymxlc2hvb3RpbmdHdWlkZSBlcnJvcj17ZXJyb3J9IC8+O1xuICBpZiAoIWJpdHdhcmRlbikgcmV0dXJuIGxvYWRpbmdGYWxsYmFjaztcblxuICByZXR1cm4gPEJpdHdhcmRlbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2JpdHdhcmRlbn0+e2NoaWxkcmVufTwvQml0d2FyZGVuQ29udGV4dC5Qcm92aWRlcj47XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQml0d2FyZGVuID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChCaXR3YXJkZW5Db250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUJpdHdhcmRlbiBtdXN0IGJlIHVzZWQgd2l0aGluIGEgQml0d2FyZGVuUHJvdmlkZXJcIik7XG4gIH1cblxuICByZXR1cm4gY29udGV4dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJpdHdhcmRlbkNvbnRleHQ7XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQsIGdldFByZWZlcmVuY2VWYWx1ZXMsIExvY2FsU3RvcmFnZSwgb3Blbiwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGV4ZWNhLCBFeGVjYUNoaWxkUHJvY2VzcywgRXhlY2FFcnJvciwgRXhlY2FSZXR1cm5WYWx1ZSB9IGZyb20gXCJleGVjYVwiO1xuaW1wb3J0IHsgZXhpc3RzU3luYywgdW5saW5rU3luYywgd3JpdGVGaWxlU3luYywgYWNjZXNzU3luYywgY29uc3RhbnRzLCBjaG1vZFN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfS0VZLCBERUZBVUxUX1NFUlZFUl9VUkwsIENBQ0hFX0tFWVMgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgVmF1bHRTdGF0ZSwgVmF1bHRTdGF0dXMgfSBmcm9tIFwifi90eXBlcy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnMgfSBmcm9tIFwifi90eXBlcy9wYXNzd29yZHNcIjtcbmltcG9ydCB7IEZvbGRlciwgSXRlbSwgSXRlbVR5cGUsIExvZ2luIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IGdldFBhc3N3b3JkR2VuZXJhdGluZ0FyZ3MgfSBmcm9tIFwifi91dGlscy9wYXNzd29yZHNcIjtcbmltcG9ydCB7IGdldFNlcnZlclVybFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHtcbiAgRW5zdXJlQ2xpQmluRXJyb3IsXG4gIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IsXG4gIE1hbnVhbGx5VGhyb3duRXJyb3IsXG4gIE5vdExvZ2dlZEluRXJyb3IsXG4gIFByZW1pdW1GZWF0dXJlRXJyb3IsXG4gIFNlbmRJbnZhbGlkUGFzc3dvcmRFcnJvcixcbiAgU2VuZE5lZWRzUGFzc3dvcmRFcnJvcixcbiAgdHJ5RXhlYyxcbiAgVmF1bHRJc0xvY2tlZEVycm9yLFxufSBmcm9tIFwifi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IGpvaW4sIGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2htb2QsIHJlbmFtZSwgcm0gfSBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlY29tcHJlc3NGaWxlLCByZW1vdmVGaWxlc1RoYXRTdGFydFdpdGgsIHVubGlua0FsbFN5bmMsIHdhaXRGb3JGaWxlQXZhaWxhYmxlIH0gZnJvbSBcIn4vdXRpbHMvZnNcIjtcbmltcG9ydCB7IGRvd25sb2FkIH0gZnJvbSBcIn4vdXRpbHMvbmV0d29ya1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBSZWNlaXZlZFNlbmQsIFNlbmQsIFNlbmRDcmVhdGVQYXlsb2FkLCBTZW5kVHlwZSB9IGZyb20gXCJ+L3R5cGVzL3NlbmRcIjtcbmltcG9ydCB7IHByZXBhcmVTZW5kUGF5bG9hZCB9IGZyb20gXCJ+L2FwaS9iaXR3YXJkZW4uaGVscGVyc1wiO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tIFwifi91dGlscy9jYWNoZVwiO1xuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwifi91dGlscy9wbGF0Zm9ybVwiO1xuXG50eXBlIEVudiA9IHtcbiAgQklUV0FSREVOQ0xJX0FQUERBVEFfRElSOiBzdHJpbmc7XG4gIEJXX0NMSUVOVFNFQ1JFVDogc3RyaW5nO1xuICBCV19DTElFTlRJRDogc3RyaW5nO1xuICBQQVRIOiBzdHJpbmc7XG4gIE5PREVfRVhUUkFfQ0FfQ0VSVFM/OiBzdHJpbmc7XG4gIEJXX1NFU1NJT04/OiBzdHJpbmc7XG59O1xuXG50eXBlIEFjdGlvbkxpc3RlbmVycyA9IHtcbiAgbG9naW4/OiAoKSA9PiBNYXliZVByb21pc2U8dm9pZD47XG4gIGxvZ291dD86IChyZWFzb24/OiBzdHJpbmcpID0+IE1heWJlUHJvbWlzZTx2b2lkPjtcbiAgbG9jaz86IChyZWFzb24/OiBzdHJpbmcpID0+IE1heWJlUHJvbWlzZTx2b2lkPjtcbiAgdW5sb2NrPzogKHBhc3N3b3JkOiBzdHJpbmcsIHNlc3Npb25Ub2tlbjogc3RyaW5nKSA9PiBNYXliZVByb21pc2U8dm9pZD47XG59O1xuXG50eXBlIEFjdGlvbkxpc3RlbmVyc01hcDxUIGV4dGVuZHMga2V5b2YgQWN0aW9uTGlzdGVuZXJzID0ga2V5b2YgQWN0aW9uTGlzdGVuZXJzPiA9IE1hcDxULCBTZXQ8QWN0aW9uTGlzdGVuZXJzW1RdPj47XG5cbnR5cGUgTWF5YmVFcnJvcjxUID0gdW5kZWZpbmVkPiA9IHsgcmVzdWx0OiBUOyBlcnJvcj86IHVuZGVmaW5lZCB9IHwgeyByZXN1bHQ/OiB1bmRlZmluZWQ7IGVycm9yOiBNYW51YWxseVRocm93bkVycm9yIH07XG5cbnR5cGUgRXhlY1Byb3BzID0ge1xuICAvKiogUmVzZXQgdGhlIHRpbWUgb2YgdGhlIGxhc3QgY29tbWFuZCB0aGF0IGFjY2Vzc2VkIGRhdGEgb3IgbW9kaWZpZWQgdGhlIHZhdWx0LCB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgdmF1bHQgdGltZWQgb3V0ICovXG4gIHJlc2V0VmF1bHRUaW1lb3V0OiBib29sZWFuO1xuICBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXI7XG4gIGlucHV0Pzogc3RyaW5nO1xufTtcblxudHlwZSBMb2NrT3B0aW9ucyA9IHtcbiAgLyoqIFRoZSByZWFzb24gZm9yIGxvY2tpbmcgdGhlIHZhdWx0ICovXG4gIHJlYXNvbj86IHN0cmluZztcbiAgY2hlY2tWYXVsdFN0YXR1cz86IGJvb2xlYW47XG4gIC8qKiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgYmVmb3JlIHRoZSBvcGVyYXRpb24gaXMgZmluaXNoZWQgKG9wdGltaXN0aWMpICovXG4gIGltbWVkaWF0ZT86IGJvb2xlYW47XG59O1xuXG50eXBlIExvZ291dE9wdGlvbnMgPSB7XG4gIC8qKiBUaGUgcmVhc29uIGZvciBsb2NraW5nIHRoZSB2YXVsdCAqL1xuICByZWFzb24/OiBzdHJpbmc7XG4gIC8qKiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgYmVmb3JlIHRoZSBvcGVyYXRpb24gaXMgZmluaXNoZWQgKG9wdGltaXN0aWMpICovXG4gIGltbWVkaWF0ZT86IGJvb2xlYW47XG59O1xuXG50eXBlIFJlY2VpdmVTZW5kT3B0aW9ucyA9IHtcbiAgc2F2ZVBhdGg/OiBzdHJpbmc7XG4gIHBhc3N3b3JkPzogc3RyaW5nO1xufTtcblxudHlwZSBDcmVhdGVMb2dpbkl0ZW1PcHRpb25zID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHVzZXJuYW1lPzogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBmb2xkZXJJZDogc3RyaW5nIHwgbnVsbDtcbiAgdXJpPzogc3RyaW5nO1xufTtcblxuY29uc3QgeyBzdXBwb3J0UGF0aCB9ID0gZW52aXJvbm1lbnQ7XG5cbmNvbnN0IFx1MDM5NCA9IFwiNFwiOyAvLyBjaGFuZ2luZyB0aGlzIGZvcmNlcyBhIG5ldyBiaW4gZG93bmxvYWQgZm9yIHBlb3BsZSB0aGF0IGhhZCBhIGZhaWxlZCBvbmVcbmNvbnN0IEJpbkRvd25sb2FkTG9nZ2VyID0gKCgpID0+IHtcbiAgLyogVGhlIGlkZWEgb2YgdGhpcyBsb2dnZXIgaXMgdG8gd3JpdGUgYSBsb2cgZmlsZSB3aGVuIHRoZSBiaW4gZG93bmxvYWQgZmFpbHMsIHNvIHRoYXQgd2UgY2FuIGxldCB0aGUgZXh0ZW5zaW9uIGNyYXNoLFxuICAgYnV0IGZhbGxiYWNrIHRvIHRoZSBsb2NhbCBjbGkgcGF0aCBpbiB0aGUgbmV4dCBsYXVuY2guIFRoaXMgYWxsb3dzIHRoZSBlcnJvciB0byBiZSByZXBvcnRlZCBpbiB0aGUgaXNzdWVzIGRhc2hib2FyZC4gSXQgdXNlcyBmaWxlcyB0byBrZWVwIGl0IHN5bmNocm9ub3VzLCBhcyBpdCdzIG5lZWRlZCBpbiB0aGUgY29uc3RydWN0b3IuXG4gICBBbHRob3VnaCwgdGhlIHBsYW4gaXMgdG8gZGlzY29udGludWUgdGhpcyBtZXRob2QsIGlmIHRoZXJlJ3MgYSBiZXR0ZXIgd2F5IG9mIGxvZ2dpbmcgZXJyb3JzIGluIHRoZSBpc3N1ZXMgZGFzaGJvYXJkXG4gICBvciB0aGVyZSBhcmUgbm8gY3Jhc2hlcyByZXBvcnRlZCB3aXRoIHRoZSBiaW4gZG93bmxvYWQgYWZ0ZXIgc29tZSB0aW1lLiAqL1xuICBjb25zdCBmaWxlUGF0aCA9IGpvaW4oc3VwcG9ydFBhdGgsIGBidy1iaW4tZG93bmxvYWQtZXJyb3ItJHtcdTAzOTR9LmxvZ2ApO1xuICByZXR1cm4ge1xuICAgIGxvZ0Vycm9yOiAoZXJyb3I6IGFueSkgPT4gdHJ5RXhlYygoKSA9PiB3cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBlcnJvcj8ubWVzc2FnZSA/PyBcIlVuZXhwZWN0ZWQgZXJyb3JcIikpLFxuICAgIGNsZWFyRXJyb3I6ICgpID0+IHRyeUV4ZWMoKCkgPT4gdW5saW5rU3luYyhmaWxlUGF0aCkpLFxuICAgIGhhc0Vycm9yOiAoKSA9PiB0cnlFeGVjKCgpID0+IGV4aXN0c1N5bmMoZmlsZVBhdGgpLCBmYWxzZSksXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgY2xpSW5mbyA9IHtcbiAgdmVyc2lvbjogXCIyMDI1LjIuMFwiLFxuICBnZXQgc2hhMjU2KCkge1xuICAgIGlmIChwbGF0Zm9ybSA9PT0gXCJ3aW5kb3dzXCIpIHJldHVybiBcIjMzYTEzMTAxN2FjOWM5OWQ3MjFlNDMwYTg2ZTkyOTM4MzMxNGQzZjkxYzlmMmZiZjQxM2Q4NzI1NjU2NTRjMThcIjtcbiAgICByZXR1cm4gXCJmYWRlNTEwMTJhNDYwMTFjMDE2YTJlNWFlZTJmMmU1MzRjMWVkMDc4ZTQ5ZDExNzhhNjllMjg4OWQyODEyYTk2XCI7XG4gIH0sXG4gIGRvd25sb2FkUGFnZTogXCJodHRwczovL2dpdGh1Yi5jb20vYml0d2FyZGVuL2NsaWVudHMvcmVsZWFzZXNcIixcbiAgcGF0aDoge1xuICAgIGdldCBkb3dubG9hZGVkQmluKCkge1xuICAgICAgcmV0dXJuIGpvaW4oc3VwcG9ydFBhdGgsIGNsaUluZm8uYmluRmlsZW5hbWVWZXJzaW9uZWQpO1xuICAgIH0sXG4gICAgZ2V0IGluc3RhbGxlZEJpbigpIHtcbiAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IGl0IHdhcyBpbnN0YWxsZWQgdXNpbmcgQ2hvY29sYXRleSwgaWYgbm90LCBpdCdzIGhhcmQgdG8gbWFrZSBhIGdvb2QgZ3Vlc3MuXG4gICAgICBpZiAocGxhdGZvcm0gPT09IFwid2luZG93c1wiKSByZXR1cm4gXCJDOlxcXFxQcm9ncmFtRGF0YVxcXFxjaG9jb2xhdGV5XFxcXGJpblxcXFxidy5leGVcIjtcbiAgICAgIHJldHVybiBwcm9jZXNzLmFyY2ggPT09IFwiYXJtNjRcIiA/IFwiL29wdC9ob21lYnJldy9iaW4vYndcIiA6IFwiL3Vzci9sb2NhbC9iaW4vYndcIjtcbiAgICB9LFxuICAgIGdldCBiaW4oKSB7XG4gICAgICByZXR1cm4gIUJpbkRvd25sb2FkTG9nZ2VyLmhhc0Vycm9yKCkgPyB0aGlzLmRvd25sb2FkZWRCaW4gOiB0aGlzLmluc3RhbGxlZEJpbjtcbiAgICB9LFxuICB9LFxuICBnZXQgYmluRmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHBsYXRmb3JtID09PSBcIndpbmRvd3NcIiA/IFwiYncuZXhlXCIgOiBcImJ3XCI7XG4gIH0sXG4gIGdldCBiaW5GaWxlbmFtZVZlcnNpb25lZCgpIHtcbiAgICBjb25zdCBuYW1lID0gYGJ3LSR7dGhpcy52ZXJzaW9ufWA7XG4gICAgcmV0dXJuIHBsYXRmb3JtID09PSBcIndpbmRvd3NcIiA/IGAke25hbWV9LmV4ZWAgOiBgJHtuYW1lfWA7XG4gIH0sXG4gIGdldCBkb3dubG9hZFVybCgpIHtcbiAgICBsZXQgYXJjaFN1ZmZpeCA9IFwiXCI7XG4gICAgaWYgKHBsYXRmb3JtID09PSBcIm1hY29zXCIpIHtcbiAgICAgIGFyY2hTdWZmaXggPSBwcm9jZXNzLmFyY2ggPT09IFwiYXJtNjRcIiA/IFwiLWFybTY0XCIgOiBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBgJHt0aGlzLmRvd25sb2FkUGFnZX0vZG93bmxvYWQvY2xpLXYke3RoaXMudmVyc2lvbn0vYnctJHtwbGF0Zm9ybX0ke2FyY2hTdWZmaXh9LSR7dGhpcy52ZXJzaW9ufS56aXBgO1xuICB9LFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNsYXNzIEJpdHdhcmRlbiB7XG4gIHByaXZhdGUgZW52OiBFbnY7XG4gIHByaXZhdGUgaW5pdFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gIHByaXZhdGUgdGVtcFNlc3Npb25Ub2tlbj86IHN0cmluZztcbiAgcHJpdmF0ZSBhY3Rpb25MaXN0ZW5lcnM6IEFjdGlvbkxpc3RlbmVyc01hcCA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBwcmVmZXJlbmNlcyA9IGdldFByZWZlcmVuY2VWYWx1ZXM8UHJlZmVyZW5jZXM+KCk7XG4gIHByaXZhdGUgY2xpUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIHRvYXN0SW5zdGFuY2U6IFRvYXN0IHwgdW5kZWZpbmVkO1xuICB3YXNDbGlVcGRhdGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IodG9hc3RJbnN0YW5jZT86IFRvYXN0KSB7XG4gICAgY29uc3QgeyBjbGlQYXRoOiBjbGlQYXRoUHJlZmVyZW5jZSwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgc2VydmVyQ2VydHNQYXRoIH0gPSB0aGlzLnByZWZlcmVuY2VzO1xuICAgIGNvbnN0IHNlcnZlclVybCA9IGdldFNlcnZlclVybFByZWZlcmVuY2UoKTtcblxuICAgIHRoaXMudG9hc3RJbnN0YW5jZSA9IHRvYXN0SW5zdGFuY2U7XG4gICAgdGhpcy5jbGlQYXRoID0gY2xpUGF0aFByZWZlcmVuY2UgfHwgY2xpSW5mby5wYXRoLmJpbjtcbiAgICB0aGlzLmVudiA9IHtcbiAgICAgIEJJVFdBUkRFTkNMSV9BUFBEQVRBX0RJUjogc3VwcG9ydFBhdGgsXG4gICAgICBCV19DTElFTlRTRUNSRVQ6IGNsaWVudFNlY3JldC50cmltKCksXG4gICAgICBCV19DTElFTlRJRDogY2xpZW50SWQudHJpbSgpLFxuICAgICAgUEFUSDogZGlybmFtZShwcm9jZXNzLmV4ZWNQYXRoKSxcbiAgICAgIC4uLihzZXJ2ZXJVcmwgJiYgc2VydmVyQ2VydHNQYXRoID8geyBOT0RFX0VYVFJBX0NBX0NFUlRTOiBzZXJ2ZXJDZXJ0c1BhdGggfSA6IHt9KSxcbiAgICB9O1xuXG4gICAgdGhpcy5pbml0UHJvbWlzZSA9IChhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUNsaUJpbmFyeSgpO1xuICAgICAgdm9pZCB0aGlzLnJldHJpZXZlQW5kQ2FjaGVDbGlWZXJzaW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmNoZWNrU2VydmVyVXJsKHNlcnZlclVybCk7XG4gICAgfSkoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlQ2xpQmluYXJ5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmNoZWNrQ2xpQmluSXNSZWFkeSh0aGlzLmNsaVBhdGgpKSByZXR1cm47XG4gICAgaWYgKHRoaXMuY2xpUGF0aCA9PT0gdGhpcy5wcmVmZXJlbmNlcy5jbGlQYXRoIHx8IHRoaXMuY2xpUGF0aCA9PT0gY2xpSW5mby5wYXRoLmluc3RhbGxlZEJpbikge1xuICAgICAgdGhyb3cgbmV3IEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IoYEJpdHdhcmRlbiBDTEkgbm90IGZvdW5kIGF0ICR7dGhpcy5jbGlQYXRofWApO1xuICAgIH1cbiAgICBpZiAoQmluRG93bmxvYWRMb2dnZXIuaGFzRXJyb3IoKSkgQmluRG93bmxvYWRMb2dnZXIuY2xlYXJFcnJvcigpO1xuXG4gICAgLy8gcmVtb3ZlIG9sZCBiaW5hcmllcyB0byBjaGVjayBpZiBpdCdzIGFuIHVwZGF0ZSBhbmQgYmVjYXVzZSB0aGV5IGFyZSAxMDBNQitcbiAgICBjb25zdCBoYWRPbGRCaW5hcmllcyA9IGF3YWl0IHJlbW92ZUZpbGVzVGhhdFN0YXJ0V2l0aChcImJ3LVwiLCBzdXBwb3J0UGF0aCk7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCB0aGlzLnNob3dUb2FzdCh7XG4gICAgICB0aXRsZTogYCR7aGFkT2xkQmluYXJpZXMgPyBcIlVwZGF0aW5nXCIgOiBcIkluaXRpYWxpemluZ1wifSBCaXR3YXJkZW4gQ0xJYCxcbiAgICAgIHN0eWxlOiBUb2FzdC5TdHlsZS5BbmltYXRlZCxcbiAgICAgIHByaW1hcnlBY3Rpb246IHsgdGl0bGU6IFwiT3BlbiBEb3dubG9hZCBQYWdlXCIsIG9uQWN0aW9uOiAoKSA9PiBvcGVuKGNsaUluZm8uZG93bmxvYWRQYWdlKSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHRtcEZpbGVOYW1lID0gXCJidy56aXBcIjtcbiAgICBjb25zdCB6aXBQYXRoID0gam9pbihzdXBwb3J0UGF0aCwgdG1wRmlsZU5hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIkRvd25sb2FkaW5nLi4uXCI7XG4gICAgICAgIGF3YWl0IGRvd25sb2FkKGNsaUluZm8uZG93bmxvYWRVcmwsIHppcFBhdGgsIHtcbiAgICAgICAgICBvblByb2dyZXNzOiAocGVyY2VudCkgPT4gKHRvYXN0Lm1lc3NhZ2UgPSBgRG93bmxvYWRpbmcgJHtwZXJjZW50fSVgKSxcbiAgICAgICAgICBzaGEyNTY6IGNsaUluZm8uc2hhMjU2LFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGRvd25sb2FkRXJyb3IpIHtcbiAgICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBkb3dubG9hZCBCaXR3YXJkZW4gQ0xJXCI7XG4gICAgICAgIHRocm93IGRvd25sb2FkRXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIkV4dHJhY3RpbmcuLi5cIjtcbiAgICAgICAgYXdhaXQgZGVjb21wcmVzc0ZpbGUoemlwUGF0aCwgc3VwcG9ydFBhdGgpO1xuICAgICAgICBjb25zdCBkZWNvbXByZXNzZWRCaW5QYXRoID0gam9pbihzdXBwb3J0UGF0aCwgY2xpSW5mby5iaW5GaWxlbmFtZSk7XG5cbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHRoaXMgcmVuYW1lIHN0YXJ0ZWQgdGhyb3dpbmcgYW4gZXJyb3IgYWZ0ZXIgc3VjY2VlZGluZywgc28gZm9yIG5vdyB3ZSdyZSBqdXN0XG4gICAgICAgIC8vIGNhdGNoaW5nIGl0IGFuZCBjaGVja2luZyBpZiB0aGUgZmlsZSBleGlzdHMgXHUwMEFGXFxfKFx1MzBDNClfL1x1MDBBRlxuICAgICAgICBhd2FpdCByZW5hbWUoZGVjb21wcmVzc2VkQmluUGF0aCwgdGhpcy5jbGlQYXRoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgYXdhaXQgd2FpdEZvckZpbGVBdmFpbGFibGUodGhpcy5jbGlQYXRoKTtcblxuICAgICAgICBhd2FpdCBjaG1vZCh0aGlzLmNsaVBhdGgsIFwiNzU1XCIpO1xuICAgICAgICBhd2FpdCBybSh6aXBQYXRoLCB7IGZvcmNlOiB0cnVlIH0pO1xuXG4gICAgICAgIENhY2hlLnNldChDQUNIRV9LRVlTLkNMSV9WRVJTSU9OLCBjbGlJbmZvLnZlcnNpb24pO1xuICAgICAgICB0aGlzLndhc0NsaVVwZGF0ZWQgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXh0cmFjdEVycm9yKSB7XG4gICAgICAgIHRvYXN0LnRpdGxlID0gXCJGYWlsZWQgdG8gZXh0cmFjdCBCaXR3YXJkZW4gQ0xJXCI7XG4gICAgICAgIHRocm93IGV4dHJhY3RFcnJvcjtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QubWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRW5zdXJlQ2xpQmluRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJQbGVhc2UgdHJ5IGFnYWluXCI7XG4gICAgICB0b2FzdC5zdHlsZSA9IFRvYXN0LlN0eWxlLkZhaWx1cmU7XG5cbiAgICAgIHVubGlua0FsbFN5bmMoemlwUGF0aCwgdGhpcy5jbGlQYXRoKTtcblxuICAgICAgaWYgKCFlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSBCaW5Eb3dubG9hZExvZ2dlci5sb2dFcnJvcihlcnJvcik7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgdGhyb3cgbmV3IEVuc3VyZUNsaUJpbkVycm9yKGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCB0b2FzdC5yZXN0b3JlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyaWV2ZUFuZENhY2hlQ2xpVmVyc2lvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0IH0gPSBhd2FpdCB0aGlzLmdldFZlcnNpb24oKTtcbiAgICAgIGlmICghZXJyb3IpIENhY2hlLnNldChDQUNIRV9LRVlTLkNMSV9WRVJTSU9OLCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHJldHJpZXZlIGFuZCBjYWNoZSBjbGkgdmVyc2lvblwiLCBlcnJvciwgeyBjYXB0dXJlVG9SYXljYXN0OiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tDbGlCaW5Jc1JlYWR5KGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFleGlzdHNTeW5jKHRoaXMuY2xpUGF0aCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGFjY2Vzc1N5bmMoZmlsZVBhdGgsIGNvbnN0YW50cy5YX09LKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgY2htb2RTeW5jKGZpbGVQYXRoLCBcIjc1NVwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHNldFNlc3Npb25Ub2tlbih0b2tlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5lbnYgPSB7XG4gICAgICAuLi50aGlzLmVudixcbiAgICAgIEJXX1NFU1NJT046IHRva2VuLFxuICAgIH07XG4gIH1cblxuICBjbGVhclNlc3Npb25Ub2tlbigpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5lbnYuQldfU0VTU0lPTjtcbiAgfVxuXG4gIHdpdGhTZXNzaW9uKHRva2VuOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLnRlbXBTZXNzaW9uVG9rZW4gPSB0b2tlbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgYXdhaXQgdGhpcy5pbml0UHJvbWlzZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2VydmVyVXJsKHNlcnZlclVybDogc3RyaW5nIHwgdW5kZWZpbmVkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2hlY2sgdGhlIENMSSBoYXMgYmVlbiBjb25maWd1cmVkIHRvIHVzZSB0aGUgcHJlZmVyZW5jZSBVcmxcbiAgICBjb25zdCBzdG9yZWRTZXJ2ZXIgPSBhd2FpdCBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KExPQ0FMX1NUT1JBR0VfS0VZLlNFUlZFUl9VUkwpO1xuICAgIGlmICghc2VydmVyVXJsIHx8IHN0b3JlZFNlcnZlciA9PT0gc2VydmVyVXJsKSByZXR1cm47XG5cbiAgICAvLyBVcGRhdGUgdGhlIHNlcnZlciBVcmxcbiAgICBjb25zdCB0b2FzdCA9IGF3YWl0IHRoaXMuc2hvd1RvYXN0KHtcbiAgICAgIHN0eWxlOiBUb2FzdC5TdHlsZS5BbmltYXRlZCxcbiAgICAgIHRpdGxlOiBcIlN3aXRjaGluZyBzZXJ2ZXIuLi5cIixcbiAgICAgIG1lc3NhZ2U6IFwiQml0d2FyZGVuIHNlcnZlciBwcmVmZXJlbmNlIGNoYW5nZWRcIixcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2dvdXQoKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBJdCBkb2Vzbid0IG1hdHRlciBpZiB3ZSB3ZXJlbid0IGxvZ2dlZCBpbi5cbiAgICAgIH1cbiAgICAgIC8vIElmIFVSTCBpcyBlbXB0eSwgc2V0IGl0IHRvIHRoZSBkZWZhdWx0XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wiY29uZmlnXCIsIFwic2VydmVyXCIsIHNlcnZlclVybCB8fCBERUZBVUxUX1NFUlZFUl9VUkxdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlNFUlZFUl9VUkwsIHNlcnZlclVybCk7XG5cbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuU3VjY2VzcztcbiAgICAgIHRvYXN0LnRpdGxlID0gXCJTdWNjZXNzXCI7XG4gICAgICB0b2FzdC5tZXNzYWdlID0gXCJCaXR3YXJkZW4gc2VydmVyIGNoYW5nZWRcIjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3Quc3R5bGUgPSBUb2FzdC5TdHlsZS5GYWlsdXJlO1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBzd2l0Y2ggc2VydmVyXCI7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0b2FzdC5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIjtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXdhaXQgdG9hc3QucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlYyhhcmdzOiBzdHJpbmdbXSwgb3B0aW9uczogRXhlY1Byb3BzKTogUHJvbWlzZTxFeGVjYUNoaWxkUHJvY2Vzcz4ge1xuICAgIGNvbnN0IHsgYWJvcnRDb250cm9sbGVyLCBpbnB1dCA9IFwiXCIsIHJlc2V0VmF1bHRUaW1lb3V0IH0gPSBvcHRpb25zID8/IHt9O1xuXG4gICAgbGV0IGVudiA9IHRoaXMuZW52O1xuICAgIGlmICh0aGlzLnRlbXBTZXNzaW9uVG9rZW4pIHtcbiAgICAgIGVudiA9IHsgLi4uZW52LCBCV19TRVNTSU9OOiB0aGlzLnRlbXBTZXNzaW9uVG9rZW4gfTtcbiAgICAgIHRoaXMudGVtcFNlc3Npb25Ub2tlbiA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjYSh0aGlzLmNsaVBhdGgsIGFyZ3MsIHsgaW5wdXQsIGVudiwgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXI/LnNpZ25hbCB9KTtcblxuICAgIGlmICh0aGlzLmlzUHJvbXB0V2FpdGluZ0Zvck1hc3RlclBhc3N3b3JkKHJlc3VsdCkpIHtcbiAgICAgIC8qIHNpbmNlIHdlIGhhdmUgdGhlIHNlc3Npb24gdG9rZW4gaW4gdGhlIGVudiwgdGhlIHBhc3N3b3JkIFxuICAgICAgc2hvdWxkIG5vdCBiZSByZXF1ZXN0ZWQsIHVubGVzcyB0aGUgdmF1bHQgaXMgbG9ja2VkICovXG4gICAgICBhd2FpdCB0aGlzLmxvY2soKTtcbiAgICAgIHRocm93IG5ldyBWYXVsdElzTG9ja2VkRXJyb3IoKTtcbiAgICB9XG5cbiAgICBpZiAocmVzZXRWYXVsdFRpbWVvdXQpIHtcbiAgICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLkxBU1RfQUNUSVZJVFlfVElNRSwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgYXN5bmMgZ2V0VmVyc2lvbigpOiBQcm9taXNlPE1heWJlRXJyb3I8c3RyaW5nPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dDogcmVzdWx0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiLS12ZXJzaW9uXCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgY2xpIHZlcnNpb25cIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvZ2luKCk6IFByb21pc2U8TWF5YmVFcnJvcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9naW5cIiwgXCItLWFwaWtleVwiXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImxvZ2luXCIsIFwidW5sb2NrZWRcIik7XG4gICAgICBhd2FpdCB0aGlzLmNhbGxBY3Rpb25MaXN0ZW5lcnMoXCJsb2dpblwiKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvZ2luXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2dvdXQob3B0aW9ucz86IExvZ291dE9wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICBjb25zdCB7IHJlYXNvbiwgaW1tZWRpYXRlID0gZmFsc2UgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpbW1lZGlhdGUpIGF3YWl0IHRoaXMuaGFuZGxlUG9zdExvZ291dChyZWFzb24pO1xuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9nb3V0XCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImxvZ291dFwiLCBcInVuYXV0aGVudGljYXRlZFwiKTtcbiAgICAgIGlmICghaW1tZWRpYXRlKSBhd2FpdCB0aGlzLmhhbmRsZVBvc3RMb2dvdXQocmVhc29uKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvZ291dFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9jayhvcHRpb25zPzogTG9ja09wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICBjb25zdCB7IHJlYXNvbiwgY2hlY2tWYXVsdFN0YXR1cyA9IGZhbHNlLCBpbW1lZGlhdGUgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICB0cnkge1xuICAgICAgaWYgKGltbWVkaWF0ZSkgYXdhaXQgdGhpcy5jYWxsQWN0aW9uTGlzdGVuZXJzKFwibG9ja1wiLCByZWFzb24pO1xuICAgICAgaWYgKGNoZWNrVmF1bHRTdGF0dXMpIHtcbiAgICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0IH0gPSBhd2FpdCB0aGlzLnN0YXR1cygpO1xuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ1bmF1dGhlbnRpY2F0ZWRcIikgcmV0dXJuIHsgZXJyb3I6IG5ldyBOb3RMb2dnZWRJbkVycm9yKFwiTm90IGxvZ2dlZCBpblwiKSB9O1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9ja1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJsb2NrXCIsIFwibG9ja2VkXCIpO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcImxvY2tcIiwgcmVhc29uKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvY2sgdmF1bHRcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVubG9jayhwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPHN0cmluZz4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQ6IHNlc3Npb25Ub2tlbiB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInVubG9ja1wiLCBwYXNzd29yZCwgXCItLXJhd1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuc2V0U2Vzc2lvblRva2VuKHNlc3Npb25Ub2tlbik7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJ1bmxvY2tcIiwgXCJ1bmxvY2tlZFwiKTtcbiAgICAgIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcInVubG9ja1wiLCBwYXNzd29yZCwgc2Vzc2lvblRva2VuKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogc2Vzc2lvblRva2VuIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHVubG9jayB2YXVsdFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3luYygpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5leGVjKFtcInN5bmNcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBzeW5jIHZhdWx0XCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRJdGVtKGlkOiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8SXRlbT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZXRcIiwgXCJpdGVtXCIsIGlkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxJdGVtPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGdldCBpdGVtXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsaXN0SXRlbXMoKTogUHJvbWlzZTxNYXliZUVycm9yPEl0ZW1bXT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJsaXN0XCIsIFwiaXRlbXNcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBpdGVtcyA9IEpTT04ucGFyc2U8SXRlbVtdPihzdGRvdXQpO1xuICAgICAgLy8gRmlsdGVyIG91dCBpdGVtcyB3aXRob3V0IGEgbmFtZSBwcm9wZXJ0eSAodGhleSBhcmUgbm90IGRpc3BsYXllZCBpbiB0aGUgYml0d2FyZGVuIGFwcClcbiAgICAgIHJldHVybiB7IHJlc3VsdDogaXRlbXMuZmlsdGVyKChpdGVtOiBJdGVtKSA9PiAhIWl0ZW0ubmFtZSkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbGlzdCBpdGVtc1wiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlTG9naW5JdGVtKG9wdGlvbnM6IENyZWF0ZUxvZ2luSXRlbU9wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I8SXRlbT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvcjogaXRlbVRlbXBsYXRlRXJyb3IsIHJlc3VsdDogaXRlbVRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlPEl0ZW0+KFwiaXRlbVwiKTtcbiAgICAgIGlmIChpdGVtVGVtcGxhdGVFcnJvcikgdGhyb3cgaXRlbVRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHsgZXJyb3I6IGxvZ2luVGVtcGxhdGVFcnJvciwgcmVzdWx0OiBsb2dpblRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlPExvZ2luPihcIml0ZW0ubG9naW5cIik7XG4gICAgICBpZiAobG9naW5UZW1wbGF0ZUVycm9yKSB0aHJvdyBsb2dpblRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGl0ZW1UZW1wbGF0ZS5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgaXRlbVRlbXBsYXRlLnR5cGUgPSBJdGVtVHlwZS5MT0dJTjtcbiAgICAgIGl0ZW1UZW1wbGF0ZS5mb2xkZXJJZCA9IG9wdGlvbnMuZm9sZGVySWQgfHwgbnVsbDtcbiAgICAgIGl0ZW1UZW1wbGF0ZS5sb2dpbiA9IGxvZ2luVGVtcGxhdGU7XG4gICAgICBpdGVtVGVtcGxhdGUubm90ZXMgPSBudWxsO1xuXG4gICAgICBsb2dpblRlbXBsYXRlLnVzZXJuYW1lID0gb3B0aW9ucy51c2VybmFtZSB8fCBudWxsO1xuICAgICAgbG9naW5UZW1wbGF0ZS5wYXNzd29yZCA9IG9wdGlvbnMucGFzc3dvcmQ7XG4gICAgICBsb2dpblRlbXBsYXRlLnRvdHAgPSBudWxsO1xuICAgICAgbG9naW5UZW1wbGF0ZS5maWRvMkNyZWRlbnRpYWxzID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAob3B0aW9ucy51cmkpIHtcbiAgICAgICAgbG9naW5UZW1wbGF0ZS51cmlzID0gW3sgbWF0Y2g6IG51bGwsIHVyaTogb3B0aW9ucy51cmkgfV07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0OiBlbmNvZGVkSXRlbSwgZXJyb3I6IGVuY29kZUVycm9yIH0gPSBhd2FpdCB0aGlzLmVuY29kZShKU09OLnN0cmluZ2lmeShpdGVtVGVtcGxhdGUpKTtcbiAgICAgIGlmIChlbmNvZGVFcnJvcikgdGhyb3cgZW5jb2RlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiY3JlYXRlXCIsIFwiaXRlbVwiLCBlbmNvZGVkSXRlbV0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8SXRlbT4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjcmVhdGUgbG9naW4gaXRlbVwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbGlzdEZvbGRlcnMoKTogUHJvbWlzZTxNYXliZUVycm9yPEZvbGRlcltdPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcImxpc3RcIiwgXCJmb2xkZXJzXCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBKU09OLnBhcnNlPEZvbGRlcltdPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxpc3QgZm9sZGVyXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVGb2xkZXIobmFtZTogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IsIHJlc3VsdDogZm9sZGVyIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlKFwiZm9sZGVyXCIpO1xuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgICAgZm9sZGVyLm5hbWUgPSBuYW1lO1xuICAgICAgY29uc3QgeyByZXN1bHQ6IGVuY29kZWRGb2xkZXIsIGVycm9yOiBlbmNvZGVFcnJvciB9ID0gYXdhaXQgdGhpcy5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoZm9sZGVyKSk7XG4gICAgICBpZiAoZW5jb2RlRXJyb3IpIHRocm93IGVuY29kZUVycm9yO1xuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wiY3JlYXRlXCIsIFwiZm9sZGVyXCIsIGVuY29kZWRGb2xkZXJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiB1bmRlZmluZWQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY3JlYXRlIGZvbGRlclwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VG90cChpZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPHN0cmluZz4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gdGhpcyBjb3VsZCByZXR1cm4gc29tZXRoaW5nIGxpa2UgXCJOb3QgZm91bmQuXCIgYnV0IGNoZWNrcyBmb3IgdG90cCBjb2RlIGFyZSBkb25lIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb25cbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiZ2V0XCIsIFwidG90cFwiLCBpZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHN0ZG91dCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgVE9UUFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3RhdHVzKCk6IFByb21pc2U8TWF5YmVFcnJvcjxWYXVsdFN0YXRlPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInN0YXR1c1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8VmF1bHRTdGF0ZT4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgc3RhdHVzXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0xvY2tTdGF0dXMoKTogUHJvbWlzZTxWYXVsdFN0YXR1cz4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1widW5sb2NrXCIsIFwiLS1jaGVja1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJjaGVja0xvY2tTdGF0dXNcIiwgXCJ1bmxvY2tlZFwiKTtcbiAgICAgIHJldHVybiBcInVubG9ja2VkXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY2hlY2sgbG9jayBzdGF0dXNcIiwgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKGVycm9yIGFzIEV4ZWNhRXJyb3IpLnN0ZGVycjtcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UgPT09IFwiVmF1bHQgaXMgbG9ja2VkLlwiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImNoZWNrTG9ja1N0YXR1c1wiLCBcImxvY2tlZFwiKTtcbiAgICAgICAgcmV0dXJuIFwibG9ja2VkXCI7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJjaGVja0xvY2tTdGF0dXNcIiwgXCJ1bmF1dGhlbnRpY2F0ZWRcIik7XG4gICAgICByZXR1cm4gXCJ1bmF1dGhlbnRpY2F0ZWRcIjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRUZW1wbGF0ZTxUID0gYW55Pih0eXBlOiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8VD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZXRcIiwgXCJ0ZW1wbGF0ZVwiLCB0eXBlXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxUPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGdldCB0ZW1wbGF0ZVwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW5jb2RlKGlucHV0OiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8c3RyaW5nPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcImVuY29kZVwiXSwgeyBpbnB1dCwgcmVzZXRWYXVsdFRpbWVvdXQ6IGZhbHNlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBzdGRvdXQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gZW5jb2RlXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZVBhc3N3b3JkKG9wdGlvbnM/OiBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnMsIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgYXJncyA9IG9wdGlvbnMgPyBnZXRQYXNzd29yZEdlbmVyYXRpbmdBcmdzKG9wdGlvbnMpIDogW107XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZW5lcmF0ZVwiLCAuLi5hcmdzXSwgeyBhYm9ydENvbnRyb2xsZXIsIHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICByZXR1cm4gc3Rkb3V0O1xuICB9XG5cbiAgYXN5bmMgbGlzdFNlbmRzKCk6IFByb21pc2U8TWF5YmVFcnJvcjxTZW5kW10+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wic2VuZFwiLCBcImxpc3RcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8U2VuZFtdPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxpc3Qgc2VuZHNcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNlbmQodmFsdWVzOiBTZW5kQ3JlYXRlUGF5bG9hZCk6IFByb21pc2U8TWF5YmVFcnJvcjxTZW5kPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yOiB0ZW1wbGF0ZUVycm9yLCByZXN1bHQ6IHRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlKFxuICAgICAgICB2YWx1ZXMudHlwZSA9PT0gU2VuZFR5cGUuVGV4dCA/IFwic2VuZC50ZXh0XCIgOiBcInNlbmQuZmlsZVwiXG4gICAgICApO1xuICAgICAgaWYgKHRlbXBsYXRlRXJyb3IpIHRocm93IHRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHBheWxvYWQgPSBwcmVwYXJlU2VuZFBheWxvYWQodGVtcGxhdGUsIHZhbHVlcyk7XG4gICAgICBjb25zdCB7IHJlc3VsdDogZW5jb2RlZFBheWxvYWQsIGVycm9yOiBlbmNvZGVFcnJvciB9ID0gYXdhaXQgdGhpcy5lbmNvZGUoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgaWYgKGVuY29kZUVycm9yKSB0aHJvdyBlbmNvZGVFcnJvcjtcblxuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiY3JlYXRlXCIsIGVuY29kZWRQYXlsb2FkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBKU09OLnBhcnNlPFNlbmQ+KHN0ZG91dCkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY3JlYXRlIHNlbmRcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVkaXRTZW5kKHZhbHVlczogU2VuZENyZWF0ZVBheWxvYWQpOiBQcm9taXNlPE1heWJlRXJyb3I8U2VuZD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyByZXN1bHQ6IGVuY29kZWRQYXlsb2FkLCBlcnJvcjogZW5jb2RlRXJyb3IgfSA9IGF3YWl0IHRoaXMuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHZhbHVlcykpO1xuICAgICAgaWYgKGVuY29kZUVycm9yKSB0aHJvdyBlbmNvZGVFcnJvcjtcblxuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiZWRpdFwiLCBlbmNvZGVkUGF5bG9hZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8U2VuZD4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBkZWxldGUgc2VuZFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlU2VuZChpZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiZGVsZXRlXCIsIGlkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGRlbGV0ZSBzZW5kXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVTZW5kUGFzc3dvcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8TWF5YmVFcnJvcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wic2VuZFwiLCBcInJlbW92ZS1wYXNzd29yZFwiLCBpZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byByZW1vdmUgc2VuZCBwYXNzd29yZFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVjZWl2ZVNlbmRJbmZvKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVjZWl2ZVNlbmRPcHRpb25zKTogUHJvbWlzZTxNYXliZUVycm9yPFJlY2VpdmVkU2VuZD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInNlbmRcIiwgXCJyZWNlaXZlXCIsIHVybCwgXCItLW9ialwiXSwge1xuICAgICAgICByZXNldFZhdWx0VGltZW91dDogdHJ1ZSxcbiAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LnBhc3N3b3JkLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXN0ZG91dCAmJiAvSW52YWxpZCBwYXNzd29yZC9pLnRlc3Qoc3RkZXJyKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kSW52YWxpZFBhc3N3b3JkRXJyb3IoKSB9O1xuICAgICAgaWYgKCFzdGRvdXQgJiYgL1NlbmQgcGFzc3dvcmQvaS50ZXN0KHN0ZGVycikpIHJldHVybiB7IGVycm9yOiBuZXcgU2VuZE5lZWRzUGFzc3dvcmRFcnJvcigpIH07XG5cbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxSZWNlaXZlZFNlbmQ+KHN0ZG91dCkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChleGVjRXJyb3IgYXMgRXhlY2FFcnJvcikuc3RkZXJyO1xuICAgICAgaWYgKC9JbnZhbGlkIHBhc3N3b3JkL2dpLnRlc3QoZXJyb3JNZXNzYWdlKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kSW52YWxpZFBhc3N3b3JkRXJyb3IoKSB9O1xuICAgICAgaWYgKC9TZW5kIHBhc3N3b3JkL2dpLnRlc3QoZXJyb3JNZXNzYWdlKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kTmVlZHNQYXNzd29yZEVycm9yKCkgfTtcblxuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byByZWNlaXZlIHNlbmQgb2JqXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWNlaXZlU2VuZCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlY2VpdmVTZW5kT3B0aW9ucyk6IFByb21pc2U8TWF5YmVFcnJvcjxzdHJpbmc+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2F2ZVBhdGgsIHBhc3N3b3JkIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgY29uc3QgYXJncyA9IFtcInNlbmRcIiwgXCJyZWNlaXZlXCIsIHVybF07XG4gICAgICBpZiAoc2F2ZVBhdGgpIGFyZ3MucHVzaChcIi0tb3V0cHV0XCIsIHNhdmVQYXRoKTtcbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoYXJncywgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSwgaW5wdXQ6IHBhc3N3b3JkIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBzdGRvdXQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gcmVjZWl2ZSBzZW5kXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICAvLyB1dGlscyBiZWxvd1xuXG4gIGFzeW5jIHNhdmVMYXN0VmF1bHRTdGF0dXMoY2FsbE5hbWU6IHN0cmluZywgc3RhdHVzOiBWYXVsdFN0YXR1cyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlZBVUxUX0xBU1RfU1RBVFVTLCBzdGF0dXMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGFzdFNhdmVkVmF1bHRTdGF0dXMoKTogUHJvbWlzZTxWYXVsdFN0YXR1cyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGxhc3RTYXZlZFN0YXR1cyA9IGF3YWl0IExvY2FsU3RvcmFnZS5nZXRJdGVtPFZhdWx0U3RhdHVzPihMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MQVNUX1NUQVRVUyk7XG4gICAgaWYgKCFsYXN0U2F2ZWRTdGF0dXMpIHtcbiAgICAgIGNvbnN0IHZhdWx0U3RhdHVzID0gYXdhaXQgdGhpcy5zdGF0dXMoKTtcbiAgICAgIHJldHVybiB2YXVsdFN0YXR1cy5yZXN1bHQ/LnN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RTYXZlZFN0YXR1cztcbiAgfVxuXG4gIHByaXZhdGUgaXNQcm9tcHRXYWl0aW5nRm9yTWFzdGVyUGFzc3dvcmQocmVzdWx0OiBFeGVjYVJldHVyblZhbHVlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKHJlc3VsdC5zdGRlcnIgJiYgcmVzdWx0LnN0ZGVyci5pbmNsdWRlcyhcIk1hc3RlciBwYXNzd29yZFwiKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVBvc3RMb2dvdXQocmVhc29uPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jbGVhclNlc3Npb25Ub2tlbigpO1xuICAgIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcImxvZ291dFwiLCByZWFzb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDb21tb25FcnJvcnMoZXJyb3I6IGFueSk6IFByb21pc2U8eyBlcnJvcj86IE1hbnVhbGx5VGhyb3duRXJyb3IgfT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlcnJvciBhcyBFeGVjYUVycm9yKS5zdGRlcnI7XG4gICAgaWYgKCFlcnJvck1lc3NhZ2UpIHJldHVybiB7fTtcblxuICAgIGlmICgvbm90IGxvZ2dlZCBpbi9pLnRlc3QoZXJyb3JNZXNzYWdlKSkge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVQb3N0TG9nb3V0KCk7XG4gICAgICByZXR1cm4geyBlcnJvcjogbmV3IE5vdExvZ2dlZEluRXJyb3IoXCJOb3QgbG9nZ2VkIGluXCIpIH07XG4gICAgfVxuICAgIGlmICgvUHJlbWl1bSBzdGF0dXMvaS50ZXN0KGVycm9yTWVzc2FnZSkpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBuZXcgUHJlbWl1bUZlYXR1cmVFcnJvcigpIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHNldEFjdGlvbkxpc3RlbmVyPEEgZXh0ZW5kcyBrZXlvZiBBY3Rpb25MaXN0ZW5lcnM+KGFjdGlvbjogQSwgbGlzdGVuZXI6IEFjdGlvbkxpc3RlbmVyc1tBXSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuYWN0aW9uTGlzdGVuZXJzLmdldChhY3Rpb24pO1xuICAgIGlmIChsaXN0ZW5lcnMgJiYgbGlzdGVuZXJzLnNpemUgPiAwKSB7XG4gICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3Rpb25MaXN0ZW5lcnMuc2V0KGFjdGlvbiwgbmV3IFNldChbbGlzdGVuZXJdKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVtb3ZlQWN0aW9uTGlzdGVuZXI8QSBleHRlbmRzIGtleW9mIEFjdGlvbkxpc3RlbmVycz4oYWN0aW9uOiBBLCBsaXN0ZW5lcjogQWN0aW9uTGlzdGVuZXJzW0FdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5hY3Rpb25MaXN0ZW5lcnMuZ2V0KGFjdGlvbik7XG4gICAgaWYgKGxpc3RlbmVycyAmJiBsaXN0ZW5lcnMuc2l6ZSA+IDApIHtcbiAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsbEFjdGlvbkxpc3RlbmVyczxBIGV4dGVuZHMga2V5b2YgQWN0aW9uTGlzdGVuZXJzPihcbiAgICBhY3Rpb246IEEsXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxOb25OdWxsYWJsZTxBY3Rpb25MaXN0ZW5lcnNbQV0+PlxuICApIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmFjdGlvbkxpc3RlbmVycy5nZXQoYWN0aW9uKTtcbiAgICBpZiAobGlzdGVuZXJzICYmIGxpc3RlbmVycy5zaXplID4gMCkge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCAobGlzdGVuZXIgYXMgYW55KT8uKC4uLmFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oYEVycm9yIGNhbGxpbmcgYml0d2FyZGVuIGFjdGlvbiBsaXN0ZW5lciBmb3IgJHthY3Rpb259YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93VG9hc3QgPSBhc3luYyAodG9hc3RPcHRzOiBUb2FzdC5PcHRpb25zKTogUHJvbWlzZTxUb2FzdCAmIHsgcmVzdG9yZTogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PiA9PiB7XG4gICAgaWYgKHRoaXMudG9hc3RJbnN0YW5jZSkge1xuICAgICAgY29uc3QgcHJldmlvdXNTdGF0ZVRvYXN0T3B0czogVG9hc3QuT3B0aW9ucyA9IHtcbiAgICAgICAgbWVzc2FnZTogdGhpcy50b2FzdEluc3RhbmNlLm1lc3NhZ2UsXG4gICAgICAgIHRpdGxlOiB0aGlzLnRvYXN0SW5zdGFuY2UudGl0bGUsXG4gICAgICAgIHByaW1hcnlBY3Rpb246IHRoaXMudG9hc3RJbnN0YW5jZS5wcmltYXJ5QWN0aW9uLFxuICAgICAgICBzZWNvbmRhcnlBY3Rpb246IHRoaXMudG9hc3RJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb24sXG4gICAgICB9O1xuXG4gICAgICBpZiAodG9hc3RPcHRzLnN0eWxlKSB0aGlzLnRvYXN0SW5zdGFuY2Uuc3R5bGUgPSB0b2FzdE9wdHMuc3R5bGU7XG4gICAgICB0aGlzLnRvYXN0SW5zdGFuY2UubWVzc2FnZSA9IHRvYXN0T3B0cy5tZXNzYWdlO1xuICAgICAgdGhpcy50b2FzdEluc3RhbmNlLnRpdGxlID0gdG9hc3RPcHRzLnRpdGxlO1xuICAgICAgdGhpcy50b2FzdEluc3RhbmNlLnByaW1hcnlBY3Rpb24gPSB0b2FzdE9wdHMucHJpbWFyeUFjdGlvbjtcbiAgICAgIHRoaXMudG9hc3RJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb24gPSB0b2FzdE9wdHMuc2Vjb25kYXJ5QWN0aW9uO1xuICAgICAgYXdhaXQgdGhpcy50b2FzdEluc3RhbmNlLnNob3coKTtcblxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGhpcy50b2FzdEluc3RhbmNlLCB7XG4gICAgICAgIHJlc3RvcmU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNob3dUb2FzdChwcmV2aW91c1N0YXRlVG9hc3RPcHRzKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b2FzdCA9IGF3YWl0IHNob3dUb2FzdCh0b2FzdE9wdHMpO1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odG9hc3QsIHsgcmVzdG9yZTogKCkgPT4gdG9hc3QuaGlkZSgpIH0pO1xuICAgIH1cbiAgfTtcbn1cbiIsICJpbXBvcnQge0J1ZmZlcn0gZnJvbSAnbm9kZTpidWZmZXInO1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCBjaGlsZFByb2Nlc3MgZnJvbSAnbm9kZTpjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5pbXBvcnQgY3Jvc3NTcGF3biBmcm9tICdjcm9zcy1zcGF3bic7XG5pbXBvcnQgc3RyaXBGaW5hbE5ld2xpbmUgZnJvbSAnc3RyaXAtZmluYWwtbmV3bGluZSc7XG5pbXBvcnQge25wbVJ1blBhdGhFbnZ9IGZyb20gJ25wbS1ydW4tcGF0aCc7XG5pbXBvcnQgb25ldGltZSBmcm9tICdvbmV0aW1lJztcbmltcG9ydCB7bWFrZUVycm9yfSBmcm9tICcuL2xpYi9lcnJvci5qcyc7XG5pbXBvcnQge25vcm1hbGl6ZVN0ZGlvLCBub3JtYWxpemVTdGRpb05vZGV9IGZyb20gJy4vbGliL3N0ZGlvLmpzJztcbmltcG9ydCB7c3Bhd25lZEtpbGwsIHNwYXduZWRDYW5jZWwsIHNldHVwVGltZW91dCwgdmFsaWRhdGVUaW1lb3V0LCBzZXRFeGl0SGFuZGxlcn0gZnJvbSAnLi9saWIva2lsbC5qcyc7XG5pbXBvcnQge2hhbmRsZUlucHV0LCBnZXRTcGF3bmVkUmVzdWx0LCBtYWtlQWxsU3RyZWFtLCB2YWxpZGF0ZUlucHV0U3luY30gZnJvbSAnLi9saWIvc3RyZWFtLmpzJztcbmltcG9ydCB7bWVyZ2VQcm9taXNlLCBnZXRTcGF3bmVkUHJvbWlzZX0gZnJvbSAnLi9saWIvcHJvbWlzZS5qcyc7XG5pbXBvcnQge2pvaW5Db21tYW5kLCBwYXJzZUNvbW1hbmQsIGdldEVzY2FwZWRDb21tYW5kfSBmcm9tICcuL2xpYi9jb21tYW5kLmpzJztcblxuY29uc3QgREVGQVVMVF9NQVhfQlVGRkVSID0gMTAwMCAqIDEwMDAgKiAxMDA7XG5cbmNvbnN0IGdldEVudiA9ICh7ZW52OiBlbnZPcHRpb24sIGV4dGVuZEVudiwgcHJlZmVyTG9jYWwsIGxvY2FsRGlyLCBleGVjUGF0aH0pID0+IHtcblx0Y29uc3QgZW52ID0gZXh0ZW5kRW52ID8gey4uLnByb2Nlc3MuZW52LCAuLi5lbnZPcHRpb259IDogZW52T3B0aW9uO1xuXG5cdGlmIChwcmVmZXJMb2NhbCkge1xuXHRcdHJldHVybiBucG1SdW5QYXRoRW52KHtlbnYsIGN3ZDogbG9jYWxEaXIsIGV4ZWNQYXRofSk7XG5cdH1cblxuXHRyZXR1cm4gZW52O1xufTtcblxuY29uc3QgaGFuZGxlQXJndW1lbnRzID0gKGZpbGUsIGFyZ3MsIG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBwYXJzZWQgPSBjcm9zc1NwYXduLl9wYXJzZShmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0ZmlsZSA9IHBhcnNlZC5jb21tYW5kO1xuXHRhcmdzID0gcGFyc2VkLmFyZ3M7XG5cdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblxuXHRvcHRpb25zID0ge1xuXHRcdG1heEJ1ZmZlcjogREVGQVVMVF9NQVhfQlVGRkVSLFxuXHRcdGJ1ZmZlcjogdHJ1ZSxcblx0XHRzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSxcblx0XHRleHRlbmRFbnY6IHRydWUsXG5cdFx0cHJlZmVyTG9jYWw6IGZhbHNlLFxuXHRcdGxvY2FsRGlyOiBvcHRpb25zLmN3ZCB8fCBwcm9jZXNzLmN3ZCgpLFxuXHRcdGV4ZWNQYXRoOiBwcm9jZXNzLmV4ZWNQYXRoLFxuXHRcdGVuY29kaW5nOiAndXRmOCcsXG5cdFx0cmVqZWN0OiB0cnVlLFxuXHRcdGNsZWFudXA6IHRydWUsXG5cdFx0YWxsOiBmYWxzZSxcblx0XHR3aW5kb3dzSGlkZTogdHJ1ZSxcblx0XHQuLi5vcHRpb25zLFxuXHR9O1xuXG5cdG9wdGlvbnMuZW52ID0gZ2V0RW52KG9wdGlvbnMpO1xuXG5cdG9wdGlvbnMuc3RkaW8gPSBub3JtYWxpemVTdGRpbyhvcHRpb25zKTtcblxuXHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyAmJiBwYXRoLmJhc2VuYW1lKGZpbGUsICcuZXhlJykgPT09ICdjbWQnKSB7XG5cdFx0Ly8gIzExNlxuXHRcdGFyZ3MudW5zaGlmdCgnL3EnKTtcblx0fVxuXG5cdHJldHVybiB7ZmlsZSwgYXJncywgb3B0aW9ucywgcGFyc2VkfTtcbn07XG5cbmNvbnN0IGhhbmRsZU91dHB1dCA9IChvcHRpb25zLCB2YWx1ZSwgZXJyb3IpID0+IHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHtcblx0XHQvLyBXaGVuIGBleGVjYVN5bmMoKWAgZXJyb3JzLCB3ZSBub3JtYWxpemUgaXQgdG8gJycgdG8gbWltaWMgYGV4ZWNhKClgXG5cdFx0cmV0dXJuIGVycm9yID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiAnJztcblx0fVxuXG5cdGlmIChvcHRpb25zLnN0cmlwRmluYWxOZXdsaW5lKSB7XG5cdFx0cmV0dXJuIHN0cmlwRmluYWxOZXdsaW5lKHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYShmaWxlLCBhcmdzLCBvcHRpb25zKSB7XG5cdGNvbnN0IHBhcnNlZCA9IGhhbmRsZUFyZ3VtZW50cyhmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0Y29uc3QgY29tbWFuZCA9IGpvaW5Db21tYW5kKGZpbGUsIGFyZ3MpO1xuXHRjb25zdCBlc2NhcGVkQ29tbWFuZCA9IGdldEVzY2FwZWRDb21tYW5kKGZpbGUsIGFyZ3MpO1xuXG5cdHZhbGlkYXRlVGltZW91dChwYXJzZWQub3B0aW9ucyk7XG5cblx0bGV0IHNwYXduZWQ7XG5cdHRyeSB7XG5cdFx0c3Bhd25lZCA9IGNoaWxkUHJvY2Vzcy5zcGF3bihwYXJzZWQuZmlsZSwgcGFyc2VkLmFyZ3MsIHBhcnNlZC5vcHRpb25zKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBFbnN1cmUgdGhlIHJldHVybmVkIGVycm9yIGlzIGFsd2F5cyBib3RoIGEgcHJvbWlzZSBhbmQgYSBjaGlsZCBwcm9jZXNzXG5cdFx0Y29uc3QgZHVtbXlTcGF3bmVkID0gbmV3IGNoaWxkUHJvY2Vzcy5DaGlsZFByb2Nlc3MoKTtcblx0XHRjb25zdCBlcnJvclByb21pc2UgPSBQcm9taXNlLnJlamVjdChtYWtlRXJyb3Ioe1xuXHRcdFx0ZXJyb3IsXG5cdFx0XHRzdGRvdXQ6ICcnLFxuXHRcdFx0c3RkZXJyOiAnJyxcblx0XHRcdGFsbDogJycsXG5cdFx0XHRjb21tYW5kLFxuXHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRwYXJzZWQsXG5cdFx0XHR0aW1lZE91dDogZmFsc2UsXG5cdFx0XHRpc0NhbmNlbGVkOiBmYWxzZSxcblx0XHRcdGtpbGxlZDogZmFsc2UsXG5cdFx0fSkpO1xuXHRcdHJldHVybiBtZXJnZVByb21pc2UoZHVtbXlTcGF3bmVkLCBlcnJvclByb21pc2UpO1xuXHR9XG5cblx0Y29uc3Qgc3Bhd25lZFByb21pc2UgPSBnZXRTcGF3bmVkUHJvbWlzZShzcGF3bmVkKTtcblx0Y29uc3QgdGltZWRQcm9taXNlID0gc2V0dXBUaW1lb3V0KHNwYXduZWQsIHBhcnNlZC5vcHRpb25zLCBzcGF3bmVkUHJvbWlzZSk7XG5cdGNvbnN0IHByb2Nlc3NEb25lID0gc2V0RXhpdEhhbmRsZXIoc3Bhd25lZCwgcGFyc2VkLm9wdGlvbnMsIHRpbWVkUHJvbWlzZSk7XG5cblx0Y29uc3QgY29udGV4dCA9IHtpc0NhbmNlbGVkOiBmYWxzZX07XG5cblx0c3Bhd25lZC5raWxsID0gc3Bhd25lZEtpbGwuYmluZChudWxsLCBzcGF3bmVkLmtpbGwuYmluZChzcGF3bmVkKSk7XG5cdHNwYXduZWQuY2FuY2VsID0gc3Bhd25lZENhbmNlbC5iaW5kKG51bGwsIHNwYXduZWQsIGNvbnRleHQpO1xuXG5cdGNvbnN0IGhhbmRsZVByb21pc2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3QgW3tlcnJvciwgZXhpdENvZGUsIHNpZ25hbCwgdGltZWRPdXR9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdCwgYWxsUmVzdWx0XSA9IGF3YWl0IGdldFNwYXduZWRSZXN1bHQoc3Bhd25lZCwgcGFyc2VkLm9wdGlvbnMsIHByb2Nlc3NEb25lKTtcblx0XHRjb25zdCBzdGRvdXQgPSBoYW5kbGVPdXRwdXQocGFyc2VkLm9wdGlvbnMsIHN0ZG91dFJlc3VsdCk7XG5cdFx0Y29uc3Qgc3RkZXJyID0gaGFuZGxlT3V0cHV0KHBhcnNlZC5vcHRpb25zLCBzdGRlcnJSZXN1bHQpO1xuXHRcdGNvbnN0IGFsbCA9IGhhbmRsZU91dHB1dChwYXJzZWQub3B0aW9ucywgYWxsUmVzdWx0KTtcblxuXHRcdGlmIChlcnJvciB8fCBleGl0Q29kZSAhPT0gMCB8fCBzaWduYWwgIT09IG51bGwpIHtcblx0XHRcdGNvbnN0IHJldHVybmVkRXJyb3IgPSBtYWtlRXJyb3Ioe1xuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0ZXhpdENvZGUsXG5cdFx0XHRcdHNpZ25hbCxcblx0XHRcdFx0c3Rkb3V0LFxuXHRcdFx0XHRzdGRlcnIsXG5cdFx0XHRcdGFsbCxcblx0XHRcdFx0Y29tbWFuZCxcblx0XHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRcdHBhcnNlZCxcblx0XHRcdFx0dGltZWRPdXQsXG5cdFx0XHRcdGlzQ2FuY2VsZWQ6IGNvbnRleHQuaXNDYW5jZWxlZCB8fCAocGFyc2VkLm9wdGlvbnMuc2lnbmFsID8gcGFyc2VkLm9wdGlvbnMuc2lnbmFsLmFib3J0ZWQgOiBmYWxzZSksXG5cdFx0XHRcdGtpbGxlZDogc3Bhd25lZC5raWxsZWQsXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5yZWplY3QpIHtcblx0XHRcdFx0cmV0dXJuIHJldHVybmVkRXJyb3I7XG5cdFx0XHR9XG5cblx0XHRcdHRocm93IHJldHVybmVkRXJyb3I7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbW1hbmQsXG5cdFx0XHRlc2NhcGVkQ29tbWFuZCxcblx0XHRcdGV4aXRDb2RlOiAwLFxuXHRcdFx0c3Rkb3V0LFxuXHRcdFx0c3RkZXJyLFxuXHRcdFx0YWxsLFxuXHRcdFx0ZmFpbGVkOiBmYWxzZSxcblx0XHRcdHRpbWVkT3V0OiBmYWxzZSxcblx0XHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdFx0a2lsbGVkOiBmYWxzZSxcblx0XHR9O1xuXHR9O1xuXG5cdGNvbnN0IGhhbmRsZVByb21pc2VPbmNlID0gb25ldGltZShoYW5kbGVQcm9taXNlKTtcblxuXHRoYW5kbGVJbnB1dChzcGF3bmVkLCBwYXJzZWQub3B0aW9ucy5pbnB1dCk7XG5cblx0c3Bhd25lZC5hbGwgPSBtYWtlQWxsU3RyZWFtKHNwYXduZWQsIHBhcnNlZC5vcHRpb25zKTtcblxuXHRyZXR1cm4gbWVyZ2VQcm9taXNlKHNwYXduZWQsIGhhbmRsZVByb21pc2VPbmNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWNhU3luYyhmaWxlLCBhcmdzLCBvcHRpb25zKSB7XG5cdGNvbnN0IHBhcnNlZCA9IGhhbmRsZUFyZ3VtZW50cyhmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0Y29uc3QgY29tbWFuZCA9IGpvaW5Db21tYW5kKGZpbGUsIGFyZ3MpO1xuXHRjb25zdCBlc2NhcGVkQ29tbWFuZCA9IGdldEVzY2FwZWRDb21tYW5kKGZpbGUsIGFyZ3MpO1xuXG5cdHZhbGlkYXRlSW5wdXRTeW5jKHBhcnNlZC5vcHRpb25zKTtcblxuXHRsZXQgcmVzdWx0O1xuXHR0cnkge1xuXHRcdHJlc3VsdCA9IGNoaWxkUHJvY2Vzcy5zcGF3blN5bmMocGFyc2VkLmZpbGUsIHBhcnNlZC5hcmdzLCBwYXJzZWQub3B0aW9ucyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0dGhyb3cgbWFrZUVycm9yKHtcblx0XHRcdGVycm9yLFxuXHRcdFx0c3Rkb3V0OiAnJyxcblx0XHRcdHN0ZGVycjogJycsXG5cdFx0XHRhbGw6ICcnLFxuXHRcdFx0Y29tbWFuZCxcblx0XHRcdGVzY2FwZWRDb21tYW5kLFxuXHRcdFx0cGFyc2VkLFxuXHRcdFx0dGltZWRPdXQ6IGZhbHNlLFxuXHRcdFx0aXNDYW5jZWxlZDogZmFsc2UsXG5cdFx0XHRraWxsZWQ6IGZhbHNlLFxuXHRcdH0pO1xuXHR9XG5cblx0Y29uc3Qgc3Rkb3V0ID0gaGFuZGxlT3V0cHV0KHBhcnNlZC5vcHRpb25zLCByZXN1bHQuc3Rkb3V0LCByZXN1bHQuZXJyb3IpO1xuXHRjb25zdCBzdGRlcnIgPSBoYW5kbGVPdXRwdXQocGFyc2VkLm9wdGlvbnMsIHJlc3VsdC5zdGRlcnIsIHJlc3VsdC5lcnJvcik7XG5cblx0aWYgKHJlc3VsdC5lcnJvciB8fCByZXN1bHQuc3RhdHVzICE9PSAwIHx8IHJlc3VsdC5zaWduYWwgIT09IG51bGwpIHtcblx0XHRjb25zdCBlcnJvciA9IG1ha2VFcnJvcih7XG5cdFx0XHRzdGRvdXQsXG5cdFx0XHRzdGRlcnIsXG5cdFx0XHRlcnJvcjogcmVzdWx0LmVycm9yLFxuXHRcdFx0c2lnbmFsOiByZXN1bHQuc2lnbmFsLFxuXHRcdFx0ZXhpdENvZGU6IHJlc3VsdC5zdGF0dXMsXG5cdFx0XHRjb21tYW5kLFxuXHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRwYXJzZWQsXG5cdFx0XHR0aW1lZE91dDogcmVzdWx0LmVycm9yICYmIHJlc3VsdC5lcnJvci5jb2RlID09PSAnRVRJTUVET1VUJyxcblx0XHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdFx0a2lsbGVkOiByZXN1bHQuc2lnbmFsICE9PSBudWxsLFxuXHRcdH0pO1xuXG5cdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5yZWplY3QpIHtcblx0XHRcdHJldHVybiBlcnJvcjtcblx0XHR9XG5cblx0XHR0aHJvdyBlcnJvcjtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Y29tbWFuZCxcblx0XHRlc2NhcGVkQ29tbWFuZCxcblx0XHRleGl0Q29kZTogMCxcblx0XHRzdGRvdXQsXG5cdFx0c3RkZXJyLFxuXHRcdGZhaWxlZDogZmFsc2UsXG5cdFx0dGltZWRPdXQ6IGZhbHNlLFxuXHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdGtpbGxlZDogZmFsc2UsXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYUNvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuXHRjb25zdCBbZmlsZSwgLi4uYXJnc10gPSBwYXJzZUNvbW1hbmQoY29tbWFuZCk7XG5cdHJldHVybiBleGVjYShmaWxlLCBhcmdzLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWNhQ29tbWFuZFN5bmMoY29tbWFuZCwgb3B0aW9ucykge1xuXHRjb25zdCBbZmlsZSwgLi4uYXJnc10gPSBwYXJzZUNvbW1hbmQoY29tbWFuZCk7XG5cdHJldHVybiBleGVjYVN5bmMoZmlsZSwgYXJncywgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYU5vZGUoc2NyaXB0UGF0aCwgYXJncywgb3B0aW9ucyA9IHt9KSB7XG5cdGlmIChhcmdzICYmICFBcnJheS5pc0FycmF5KGFyZ3MpICYmIHR5cGVvZiBhcmdzID09PSAnb2JqZWN0Jykge1xuXHRcdG9wdGlvbnMgPSBhcmdzO1xuXHRcdGFyZ3MgPSBbXTtcblx0fVxuXG5cdGNvbnN0IHN0ZGlvID0gbm9ybWFsaXplU3RkaW9Ob2RlKG9wdGlvbnMpO1xuXHRjb25zdCBkZWZhdWx0RXhlY0FyZ3YgPSBwcm9jZXNzLmV4ZWNBcmd2LmZpbHRlcihhcmcgPT4gIWFyZy5zdGFydHNXaXRoKCctLWluc3BlY3QnKSk7XG5cblx0Y29uc3Qge1xuXHRcdG5vZGVQYXRoID0gcHJvY2Vzcy5leGVjUGF0aCxcblx0XHRub2RlT3B0aW9ucyA9IGRlZmF1bHRFeGVjQXJndixcblx0fSA9IG9wdGlvbnM7XG5cblx0cmV0dXJuIGV4ZWNhKFxuXHRcdG5vZGVQYXRoLFxuXHRcdFtcblx0XHRcdC4uLm5vZGVPcHRpb25zLFxuXHRcdFx0c2NyaXB0UGF0aCxcblx0XHRcdC4uLihBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFtdKSxcblx0XHRdLFxuXHRcdHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRzdGRpbjogdW5kZWZpbmVkLFxuXHRcdFx0c3Rkb3V0OiB1bmRlZmluZWQsXG5cdFx0XHRzdGRlcnI6IHVuZGVmaW5lZCxcblx0XHRcdHN0ZGlvLFxuXHRcdFx0c2hlbGw6IGZhbHNlLFxuXHRcdH0sXG5cdCk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RyaXBGaW5hbE5ld2xpbmUoaW5wdXQpIHtcblx0Y29uc3QgTEYgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gJ1xcbicgOiAnXFxuJy5jaGFyQ29kZUF0KCk7XG5cdGNvbnN0IENSID0gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyA/ICdcXHInIDogJ1xccicuY2hhckNvZGVBdCgpO1xuXG5cdGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gTEYpIHtcblx0XHRpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcblx0fVxuXG5cdGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gQ1IpIHtcblx0XHRpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cbiIsICJpbXBvcnQgcHJvY2VzcyBmcm9tICdub2RlOnByb2Nlc3MnO1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB1cmwgZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHBhdGhLZXkgZnJvbSAncGF0aC1rZXknO1xuXG5leHBvcnQgZnVuY3Rpb24gbnBtUnVuUGF0aChvcHRpb25zID0ge30pIHtcblx0Y29uc3Qge1xuXHRcdGN3ZCA9IHByb2Nlc3MuY3dkKCksXG5cdFx0cGF0aDogcGF0aF8gPSBwcm9jZXNzLmVudltwYXRoS2V5KCldLFxuXHRcdGV4ZWNQYXRoID0gcHJvY2Vzcy5leGVjUGF0aCxcblx0fSA9IG9wdGlvbnM7XG5cblx0bGV0IHByZXZpb3VzO1xuXHRjb25zdCBjd2RTdHJpbmcgPSBjd2QgaW5zdGFuY2VvZiBVUkwgPyB1cmwuZmlsZVVSTFRvUGF0aChjd2QpIDogY3dkO1xuXHRsZXQgY3dkUGF0aCA9IHBhdGgucmVzb2x2ZShjd2RTdHJpbmcpO1xuXHRjb25zdCByZXN1bHQgPSBbXTtcblxuXHR3aGlsZSAocHJldmlvdXMgIT09IGN3ZFBhdGgpIHtcblx0XHRyZXN1bHQucHVzaChwYXRoLmpvaW4oY3dkUGF0aCwgJ25vZGVfbW9kdWxlcy8uYmluJykpO1xuXHRcdHByZXZpb3VzID0gY3dkUGF0aDtcblx0XHRjd2RQYXRoID0gcGF0aC5yZXNvbHZlKGN3ZFBhdGgsICcuLicpO1xuXHR9XG5cblx0Ly8gRW5zdXJlIHRoZSBydW5uaW5nIGBub2RlYCBiaW5hcnkgaXMgdXNlZC5cblx0cmVzdWx0LnB1c2gocGF0aC5yZXNvbHZlKGN3ZFN0cmluZywgZXhlY1BhdGgsICcuLicpKTtcblxuXHRyZXR1cm4gWy4uLnJlc3VsdCwgcGF0aF9dLmpvaW4ocGF0aC5kZWxpbWl0ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbnBtUnVuUGF0aEVudih7ZW52ID0gcHJvY2Vzcy5lbnYsIC4uLm9wdGlvbnN9ID0ge30pIHtcblx0ZW52ID0gey4uLmVudn07XG5cblx0Y29uc3QgcGF0aCA9IHBhdGhLZXkoe2Vudn0pO1xuXHRvcHRpb25zLnBhdGggPSBlbnZbcGF0aF07XG5cdGVudltwYXRoXSA9IG5wbVJ1blBhdGgob3B0aW9ucyk7XG5cblx0cmV0dXJuIGVudjtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXRoS2V5KG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCB7XG5cdFx0ZW52ID0gcHJvY2Vzcy5lbnYsXG5cdFx0cGxhdGZvcm0gPSBwcm9jZXNzLnBsYXRmb3JtXG5cdH0gPSBvcHRpb25zO1xuXG5cdGlmIChwbGF0Zm9ybSAhPT0gJ3dpbjMyJykge1xuXHRcdHJldHVybiAnUEFUSCc7XG5cdH1cblxuXHRyZXR1cm4gT2JqZWN0LmtleXMoZW52KS5yZXZlcnNlKCkuZmluZChrZXkgPT4ga2V5LnRvVXBwZXJDYXNlKCkgPT09ICdQQVRIJykgfHwgJ1BhdGgnO1xufVxuIiwgImNvbnN0IGNvcHlQcm9wZXJ0eSA9ICh0bywgZnJvbSwgcHJvcGVydHksIGlnbm9yZU5vbkNvbmZpZ3VyYWJsZSkgPT4ge1xuXHQvLyBgRnVuY3Rpb24jbGVuZ3RoYCBzaG91bGQgcmVmbGVjdCB0aGUgcGFyYW1ldGVycyBvZiBgdG9gIG5vdCBgZnJvbWAgc2luY2Ugd2Uga2VlcCBpdHMgYm9keS5cblx0Ly8gYEZ1bmN0aW9uI3Byb3RvdHlwZWAgaXMgbm9uLXdyaXRhYmxlIGFuZCBub24tY29uZmlndXJhYmxlIHNvIGNhbiBuZXZlciBiZSBtb2RpZmllZC5cblx0aWYgKHByb3BlcnR5ID09PSAnbGVuZ3RoJyB8fCBwcm9wZXJ0eSA9PT0gJ3Byb3RvdHlwZScpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBgRnVuY3Rpb24jYXJndW1lbnRzYCBhbmQgYEZ1bmN0aW9uI2NhbGxlcmAgc2hvdWxkIG5vdCBiZSBjb3BpZWQuIFRoZXkgd2VyZSByZXBvcnRlZCB0byBiZSBwcmVzZW50IGluIGBSZWZsZWN0Lm93bktleXNgIGZvciBzb21lIGRldmljZXMgaW4gUmVhY3QgTmF0aXZlICgjNDEpLCBzbyB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGVtIGhlcmUuXG5cdGlmIChwcm9wZXJ0eSA9PT0gJ2FyZ3VtZW50cycgfHwgcHJvcGVydHkgPT09ICdjYWxsZXInKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdG9EZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0bywgcHJvcGVydHkpO1xuXHRjb25zdCBmcm9tRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZnJvbSwgcHJvcGVydHkpO1xuXG5cdGlmICghY2FuQ29weVByb3BlcnR5KHRvRGVzY3JpcHRvciwgZnJvbURlc2NyaXB0b3IpICYmIGlnbm9yZU5vbkNvbmZpZ3VyYWJsZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0bywgcHJvcGVydHksIGZyb21EZXNjcmlwdG9yKTtcbn07XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHkoKWAgdGhyb3dzIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMsIGlzIG5vdCBjb25maWd1cmFibGUgYW5kIGVpdGhlcjpcbi8vIC0gb25lIGl0cyBkZXNjcmlwdG9ycyBpcyBjaGFuZ2VkXG4vLyAtIGl0IGlzIG5vbi13cml0YWJsZSBhbmQgaXRzIHZhbHVlIGlzIGNoYW5nZWRcbmNvbnN0IGNhbkNvcHlQcm9wZXJ0eSA9IGZ1bmN0aW9uICh0b0Rlc2NyaXB0b3IsIGZyb21EZXNjcmlwdG9yKSB7XG5cdHJldHVybiB0b0Rlc2NyaXB0b3IgPT09IHVuZGVmaW5lZCB8fCB0b0Rlc2NyaXB0b3IuY29uZmlndXJhYmxlIHx8IChcblx0XHR0b0Rlc2NyaXB0b3Iud3JpdGFibGUgPT09IGZyb21EZXNjcmlwdG9yLndyaXRhYmxlICYmXG5cdFx0dG9EZXNjcmlwdG9yLmVudW1lcmFibGUgPT09IGZyb21EZXNjcmlwdG9yLmVudW1lcmFibGUgJiZcblx0XHR0b0Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID09PSBmcm9tRGVzY3JpcHRvci5jb25maWd1cmFibGUgJiZcblx0XHQodG9EZXNjcmlwdG9yLndyaXRhYmxlIHx8IHRvRGVzY3JpcHRvci52YWx1ZSA9PT0gZnJvbURlc2NyaXB0b3IudmFsdWUpXG5cdCk7XG59O1xuXG5jb25zdCBjaGFuZ2VQcm90b3R5cGUgPSAodG8sIGZyb20pID0+IHtcblx0Y29uc3QgZnJvbVByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmcm9tKTtcblx0aWYgKGZyb21Qcm90b3R5cGUgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0bykpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRPYmplY3Quc2V0UHJvdG90eXBlT2YodG8sIGZyb21Qcm90b3R5cGUpO1xufTtcblxuY29uc3Qgd3JhcHBlZFRvU3RyaW5nID0gKHdpdGhOYW1lLCBmcm9tQm9keSkgPT4gYC8qIFdyYXBwZWQgJHt3aXRoTmFtZX0qL1xcbiR7ZnJvbUJvZHl9YDtcblxuY29uc3QgdG9TdHJpbmdEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihGdW5jdGlvbi5wcm90b3R5cGUsICd0b1N0cmluZycpO1xuY29uc3QgdG9TdHJpbmdOYW1lID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsICduYW1lJyk7XG5cbi8vIFdlIGNhbGwgYGZyb20udG9TdHJpbmcoKWAgZWFybHkgKG5vdCBsYXppbHkpIHRvIGVuc3VyZSBgZnJvbWAgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkLlxuLy8gV2UgdXNlIGBiaW5kKClgIGluc3RlYWQgb2YgYSBjbG9zdXJlIGZvciB0aGUgc2FtZSByZWFzb24uXG4vLyBDYWxsaW5nIGBmcm9tLnRvU3RyaW5nKClgIGVhcmx5IGFsc28gYWxsb3dzIGNhY2hpbmcgaXQgaW4gY2FzZSBgdG8udG9TdHJpbmcoKWAgaXMgY2FsbGVkIHNldmVyYWwgdGltZXMuXG5jb25zdCBjaGFuZ2VUb1N0cmluZyA9ICh0bywgZnJvbSwgbmFtZSkgPT4ge1xuXHRjb25zdCB3aXRoTmFtZSA9IG5hbWUgPT09ICcnID8gJycgOiBgd2l0aCAke25hbWUudHJpbSgpfSgpIGA7XG5cdGNvbnN0IG5ld1RvU3RyaW5nID0gd3JhcHBlZFRvU3RyaW5nLmJpbmQobnVsbCwgd2l0aE5hbWUsIGZyb20udG9TdHJpbmcoKSk7XG5cdC8vIEVuc3VyZSBgdG8udG9TdHJpbmcudG9TdHJpbmdgIGlzIG5vbi1lbnVtZXJhYmxlIGFuZCBoYXMgdGhlIHNhbWUgYHNhbWVgXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdUb1N0cmluZywgJ25hbWUnLCB0b1N0cmluZ05hbWUpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkodG8sICd0b1N0cmluZycsIHsuLi50b1N0cmluZ0Rlc2NyaXB0b3IsIHZhbHVlOiBuZXdUb1N0cmluZ30pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWltaWNGdW5jdGlvbih0bywgZnJvbSwge2lnbm9yZU5vbkNvbmZpZ3VyYWJsZSA9IGZhbHNlfSA9IHt9KSB7XG5cdGNvbnN0IHtuYW1lfSA9IHRvO1xuXG5cdGZvciAoY29uc3QgcHJvcGVydHkgb2YgUmVmbGVjdC5vd25LZXlzKGZyb20pKSB7XG5cdFx0Y29weVByb3BlcnR5KHRvLCBmcm9tLCBwcm9wZXJ0eSwgaWdub3JlTm9uQ29uZmlndXJhYmxlKTtcblx0fVxuXG5cdGNoYW5nZVByb3RvdHlwZSh0bywgZnJvbSk7XG5cdGNoYW5nZVRvU3RyaW5nKHRvLCBmcm9tLCBuYW1lKTtcblxuXHRyZXR1cm4gdG87XG59XG4iLCAiaW1wb3J0IG1pbWljRnVuY3Rpb24gZnJvbSAnbWltaWMtZm4nO1xuXG5jb25zdCBjYWxsZWRGdW5jdGlvbnMgPSBuZXcgV2Vha01hcCgpO1xuXG5jb25zdCBvbmV0aW1lID0gKGZ1bmN0aW9uXywgb3B0aW9ucyA9IHt9KSA9PiB7XG5cdGlmICh0eXBlb2YgZnVuY3Rpb25fICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBmdW5jdGlvbicpO1xuXHR9XG5cblx0bGV0IHJldHVyblZhbHVlO1xuXHRsZXQgY2FsbENvdW50ID0gMDtcblx0Y29uc3QgZnVuY3Rpb25OYW1lID0gZnVuY3Rpb25fLmRpc3BsYXlOYW1lIHx8IGZ1bmN0aW9uXy5uYW1lIHx8ICc8YW5vbnltb3VzPic7XG5cblx0Y29uc3Qgb25ldGltZSA9IGZ1bmN0aW9uICguLi5hcmd1bWVudHNfKSB7XG5cdFx0Y2FsbGVkRnVuY3Rpb25zLnNldChvbmV0aW1lLCArK2NhbGxDb3VudCk7XG5cblx0XHRpZiAoY2FsbENvdW50ID09PSAxKSB7XG5cdFx0XHRyZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uXy5hcHBseSh0aGlzLCBhcmd1bWVudHNfKTtcblx0XHRcdGZ1bmN0aW9uXyA9IG51bGw7XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLnRocm93ID09PSB0cnVlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZ1bmN0aW9uIFxcYCR7ZnVuY3Rpb25OYW1lfVxcYCBjYW4gb25seSBiZSBjYWxsZWQgb25jZWApO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0fTtcblxuXHRtaW1pY0Z1bmN0aW9uKG9uZXRpbWUsIGZ1bmN0aW9uXyk7XG5cdGNhbGxlZEZ1bmN0aW9ucy5zZXQob25ldGltZSwgY2FsbENvdW50KTtcblxuXHRyZXR1cm4gb25ldGltZTtcbn07XG5cbm9uZXRpbWUuY2FsbENvdW50ID0gZnVuY3Rpb25fID0+IHtcblx0aWYgKCFjYWxsZWRGdW5jdGlvbnMuaGFzKGZ1bmN0aW9uXykpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYFRoZSBnaXZlbiBmdW5jdGlvbiBcXGAke2Z1bmN0aW9uXy5uYW1lfVxcYCBpcyBub3Qgd3JhcHBlZCBieSB0aGUgXFxgb25ldGltZVxcYCBwYWNrYWdlYCk7XG5cdH1cblxuXHRyZXR1cm4gY2FsbGVkRnVuY3Rpb25zLmdldChmdW5jdGlvbl8pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgb25ldGltZTtcbiIsICJpbXBvcnR7Y29uc3RhbnRzfWZyb21cIm5vZGU6b3NcIjtcblxuaW1wb3J0e1NJR1JUTUFYfWZyb21cIi4vcmVhbHRpbWUuanNcIjtcbmltcG9ydHtnZXRTaWduYWxzfWZyb21cIi4vc2lnbmFscy5qc1wiO1xuXG5cblxuY29uc3QgZ2V0U2lnbmFsc0J5TmFtZT1mdW5jdGlvbigpe1xuY29uc3Qgc2lnbmFscz1nZXRTaWduYWxzKCk7XG5yZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHNpZ25hbHMubWFwKGdldFNpZ25hbEJ5TmFtZSkpO1xufTtcblxuY29uc3QgZ2V0U2lnbmFsQnlOYW1lPWZ1bmN0aW9uKHtcbm5hbWUsXG5udW1iZXIsXG5kZXNjcmlwdGlvbixcbnN1cHBvcnRlZCxcbmFjdGlvbixcbmZvcmNlZCxcbnN0YW5kYXJkfSlcbntcbnJldHVybltcbm5hbWUsXG57bmFtZSxudW1iZXIsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9XTtcblxufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25hbHNCeU5hbWU9Z2V0U2lnbmFsc0J5TmFtZSgpO1xuXG5cblxuXG5jb25zdCBnZXRTaWduYWxzQnlOdW1iZXI9ZnVuY3Rpb24oKXtcbmNvbnN0IHNpZ25hbHM9Z2V0U2lnbmFscygpO1xuY29uc3QgbGVuZ3RoPVNJR1JUTUFYKzE7XG5jb25zdCBzaWduYWxzQT1BcnJheS5mcm9tKHtsZW5ndGh9LCh2YWx1ZSxudW1iZXIpPT5cbmdldFNpZ25hbEJ5TnVtYmVyKG51bWJlcixzaWduYWxzKSk7XG5cbnJldHVybiBPYmplY3QuYXNzaWduKHt9LC4uLnNpZ25hbHNBKTtcbn07XG5cbmNvbnN0IGdldFNpZ25hbEJ5TnVtYmVyPWZ1bmN0aW9uKG51bWJlcixzaWduYWxzKXtcbmNvbnN0IHNpZ25hbD1maW5kU2lnbmFsQnlOdW1iZXIobnVtYmVyLHNpZ25hbHMpO1xuXG5pZihzaWduYWw9PT11bmRlZmluZWQpe1xucmV0dXJue307XG59XG5cbmNvbnN0e25hbWUsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9PXNpZ25hbDtcbnJldHVybntcbltudW1iZXJdOntcbm5hbWUsXG5udW1iZXIsXG5kZXNjcmlwdGlvbixcbnN1cHBvcnRlZCxcbmFjdGlvbixcbmZvcmNlZCxcbnN0YW5kYXJkfX07XG5cblxufTtcblxuXG5cbmNvbnN0IGZpbmRTaWduYWxCeU51bWJlcj1mdW5jdGlvbihudW1iZXIsc2lnbmFscyl7XG5jb25zdCBzaWduYWw9c2lnbmFscy5maW5kKCh7bmFtZX0pPT5jb25zdGFudHMuc2lnbmFsc1tuYW1lXT09PW51bWJlcik7XG5cbmlmKHNpZ25hbCE9PXVuZGVmaW5lZCl7XG5yZXR1cm4gc2lnbmFsO1xufVxuXG5yZXR1cm4gc2lnbmFscy5maW5kKChzaWduYWxBKT0+c2lnbmFsQS5udW1iZXI9PT1udW1iZXIpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25hbHNCeU51bWJlcj1nZXRTaWduYWxzQnlOdW1iZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1haW4uanMubWFwIiwgIlxuZXhwb3J0IGNvbnN0IGdldFJlYWx0aW1lU2lnbmFscz1mdW5jdGlvbigpe1xuY29uc3QgbGVuZ3RoPVNJR1JUTUFYLVNJR1JUTUlOKzE7XG5yZXR1cm4gQXJyYXkuZnJvbSh7bGVuZ3RofSxnZXRSZWFsdGltZVNpZ25hbCk7XG59O1xuXG5jb25zdCBnZXRSZWFsdGltZVNpZ25hbD1mdW5jdGlvbih2YWx1ZSxpbmRleCl7XG5yZXR1cm57XG5uYW1lOmBTSUdSVCR7aW5kZXgrMX1gLFxubnVtYmVyOlNJR1JUTUlOK2luZGV4LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkFwcGxpY2F0aW9uLXNwZWNpZmljIHNpZ25hbCAocmVhbHRpbWUpXCIsXG5zdGFuZGFyZDpcInBvc2l4XCJ9O1xuXG59O1xuXG5jb25zdCBTSUdSVE1JTj0zNDtcbmV4cG9ydCBjb25zdCBTSUdSVE1BWD02NDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lLmpzLm1hcCIsICJpbXBvcnR7Y29uc3RhbnRzfWZyb21cIm5vZGU6b3NcIjtcblxuaW1wb3J0e1NJR05BTFN9ZnJvbVwiLi9jb3JlLmpzXCI7XG5pbXBvcnR7Z2V0UmVhbHRpbWVTaWduYWxzfWZyb21cIi4vcmVhbHRpbWUuanNcIjtcblxuXG5cbmV4cG9ydCBjb25zdCBnZXRTaWduYWxzPWZ1bmN0aW9uKCl7XG5jb25zdCByZWFsdGltZVNpZ25hbHM9Z2V0UmVhbHRpbWVTaWduYWxzKCk7XG5jb25zdCBzaWduYWxzPVsuLi5TSUdOQUxTLC4uLnJlYWx0aW1lU2lnbmFsc10ubWFwKG5vcm1hbGl6ZVNpZ25hbCk7XG5yZXR1cm4gc2lnbmFscztcbn07XG5cblxuXG5cblxuXG5cbmNvbnN0IG5vcm1hbGl6ZVNpZ25hbD1mdW5jdGlvbih7XG5uYW1lLFxubnVtYmVyOmRlZmF1bHROdW1iZXIsXG5kZXNjcmlwdGlvbixcbmFjdGlvbixcbmZvcmNlZD1mYWxzZSxcbnN0YW5kYXJkfSlcbntcbmNvbnN0e1xuc2lnbmFsczp7W25hbWVdOmNvbnN0YW50U2lnbmFsfX09XG5jb25zdGFudHM7XG5jb25zdCBzdXBwb3J0ZWQ9Y29uc3RhbnRTaWduYWwhPT11bmRlZmluZWQ7XG5jb25zdCBudW1iZXI9c3VwcG9ydGVkP2NvbnN0YW50U2lnbmFsOmRlZmF1bHROdW1iZXI7XG5yZXR1cm57bmFtZSxudW1iZXIsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ25hbHMuanMubWFwIiwgIlxuXG5leHBvcnQgY29uc3QgU0lHTkFMUz1bXG57XG5uYW1lOlwiU0lHSFVQXCIsXG5udW1iZXI6MSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hbCBjbG9zZWRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdJTlRcIixcbm51bWJlcjoyLFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlVzZXIgaW50ZXJydXB0aW9uIHdpdGggQ1RSTC1DXCIsXG5zdGFuZGFyZDpcImFuc2lcIn0sXG5cbntcbm5hbWU6XCJTSUdRVUlUXCIsXG5udW1iZXI6MyxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlwiVXNlciBpbnRlcnJ1cHRpb24gd2l0aCBDVFJMLVxcXFxcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdJTExcIixcbm51bWJlcjo0LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJJbnZhbGlkIG1hY2hpbmUgaW5zdHJ1Y3Rpb25cIixcbnN0YW5kYXJkOlwiYW5zaVwifSxcblxue1xubmFtZTpcIlNJR1RSQVBcIixcbm51bWJlcjo1LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJEZWJ1Z2dlciBicmVha3BvaW50XCIsXG5zdGFuZGFyZDpcInBvc2l4XCJ9LFxuXG57XG5uYW1lOlwiU0lHQUJSVFwiLFxubnVtYmVyOjYsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIkFib3J0ZWRcIixcbnN0YW5kYXJkOlwiYW5zaVwifSxcblxue1xubmFtZTpcIlNJR0lPVFwiLFxubnVtYmVyOjYsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIkFib3J0ZWRcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHQlVTXCIsXG5udW1iZXI6NyxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlxuXCJCdXMgZXJyb3IgZHVlIHRvIG1pc2FsaWduZWQsIG5vbi1leGlzdGluZyBhZGRyZXNzIG9yIHBhZ2luZyBlcnJvclwiLFxuc3RhbmRhcmQ6XCJic2RcIn0sXG5cbntcbm5hbWU6XCJTSUdFTVRcIixcbm51bWJlcjo3LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkNvbW1hbmQgc2hvdWxkIGJlIGVtdWxhdGVkIGJ1dCBpcyBub3QgaW1wbGVtZW50ZWRcIixcbnN0YW5kYXJkOlwib3RoZXJcIn0sXG5cbntcbm5hbWU6XCJTSUdGUEVcIixcbm51bWJlcjo4LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJGbG9hdGluZyBwb2ludCBhcml0aG1ldGljIGVycm9yXCIsXG5zdGFuZGFyZDpcImFuc2lcIn0sXG5cbntcbm5hbWU6XCJTSUdLSUxMXCIsXG5udW1iZXI6OSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJGb3JjZWQgdGVybWluYXRpb25cIixcbnN0YW5kYXJkOlwicG9zaXhcIixcbmZvcmNlZDp0cnVlfSxcblxue1xubmFtZTpcIlNJR1VTUjFcIixcbm51bWJlcjoxMCxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJBcHBsaWNhdGlvbi1zcGVjaWZpYyBzaWduYWxcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdTRUdWXCIsXG5udW1iZXI6MTEsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIlNlZ21lbnRhdGlvbiBmYXVsdFwiLFxuc3RhbmRhcmQ6XCJhbnNpXCJ9LFxuXG57XG5uYW1lOlwiU0lHVVNSMlwiLFxubnVtYmVyOjEyLFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkFwcGxpY2F0aW9uLXNwZWNpZmljIHNpZ25hbFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1BJUEVcIixcbm51bWJlcjoxMyxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJCcm9rZW4gcGlwZSBvciBzb2NrZXRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdBTFJNXCIsXG5udW1iZXI6MTQsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiVGltZW91dCBvciB0aW1lclwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1RFUk1cIixcbm51bWJlcjoxNSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hdGlvblwiLFxuc3RhbmRhcmQ6XCJhbnNpXCJ9LFxuXG57XG5uYW1lOlwiU0lHU1RLRkxUXCIsXG5udW1iZXI6MTYsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiU3RhY2sgaXMgZW1wdHkgb3Igb3ZlcmZsb3dlZFwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifSxcblxue1xubmFtZTpcIlNJR0NITERcIixcbm51bWJlcjoxNyxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJDaGlsZCBwcm9jZXNzIHRlcm1pbmF0ZWQsIHBhdXNlZCBvciB1bnBhdXNlZFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR0NMRFwiLFxubnVtYmVyOjE3LFxuYWN0aW9uOlwiaWdub3JlXCIsXG5kZXNjcmlwdGlvbjpcIkNoaWxkIHByb2Nlc3MgdGVybWluYXRlZCwgcGF1c2VkIG9yIHVucGF1c2VkXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHQ09OVFwiLFxubnVtYmVyOjE4LFxuYWN0aW9uOlwidW5wYXVzZVwiLFxuZGVzY3JpcHRpb246XCJVbnBhdXNlZFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwiLFxuZm9yY2VkOnRydWV9LFxuXG57XG5uYW1lOlwiU0lHU1RPUFwiLFxubnVtYmVyOjE5LFxuYWN0aW9uOlwicGF1c2VcIixcbmRlc2NyaXB0aW9uOlwiUGF1c2VkXCIsXG5zdGFuZGFyZDpcInBvc2l4XCIsXG5mb3JjZWQ6dHJ1ZX0sXG5cbntcbm5hbWU6XCJTSUdUU1RQXCIsXG5udW1iZXI6MjAsXG5hY3Rpb246XCJwYXVzZVwiLFxuZGVzY3JpcHRpb246XCJQYXVzZWQgdXNpbmcgQ1RSTC1aIG9yIFxcXCJzdXNwZW5kXFxcIlwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1RUSU5cIixcbm51bWJlcjoyMSxcbmFjdGlvbjpcInBhdXNlXCIsXG5kZXNjcmlwdGlvbjpcIkJhY2tncm91bmQgcHJvY2VzcyBjYW5ub3QgcmVhZCB0ZXJtaW5hbCBpbnB1dFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR0JSRUFLXCIsXG5udW1iZXI6MjEsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiVXNlciBpbnRlcnJ1cHRpb24gd2l0aCBDVFJMLUJSRUFLXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHVFRPVVwiLFxubnVtYmVyOjIyLFxuYWN0aW9uOlwicGF1c2VcIixcbmRlc2NyaXB0aW9uOlwiQmFja2dyb3VuZCBwcm9jZXNzIGNhbm5vdCB3cml0ZSB0byB0ZXJtaW5hbCBvdXRwdXRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdVUkdcIixcbm51bWJlcjoyMyxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJTb2NrZXQgcmVjZWl2ZWQgb3V0LW9mLWJhbmQgZGF0YVwiLFxuc3RhbmRhcmQ6XCJic2RcIn0sXG5cbntcbm5hbWU6XCJTSUdYQ1BVXCIsXG5udW1iZXI6MjQsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIlByb2Nlc3MgdGltZWQgb3V0XCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR1hGU1pcIixcbm51bWJlcjoyNSxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlwiRmlsZSB0b28gYmlnXCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR1ZUQUxSTVwiLFxubnVtYmVyOjI2LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlRpbWVvdXQgb3IgdGltZXJcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHUFJPRlwiLFxubnVtYmVyOjI3LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlRpbWVvdXQgb3IgdGltZXJcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHV0lOQ0hcIixcbm51bWJlcjoyOCxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hbCB3aW5kb3cgc2l6ZSBjaGFuZ2VkXCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR0lPXCIsXG5udW1iZXI6MjksXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiSS9PIGlzIGF2YWlsYWJsZVwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifSxcblxue1xubmFtZTpcIlNJR1BPTExcIixcbm51bWJlcjoyOSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJXYXRjaGVkIGV2ZW50XCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHSU5GT1wiLFxubnVtYmVyOjI5LFxuYWN0aW9uOlwiaWdub3JlXCIsXG5kZXNjcmlwdGlvbjpcIlJlcXVlc3QgZm9yIHByb2Nlc3MgaW5mb3JtYXRpb25cIixcbnN0YW5kYXJkOlwib3RoZXJcIn0sXG5cbntcbm5hbWU6XCJTSUdQV1JcIixcbm51bWJlcjozMCxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJEZXZpY2UgcnVubmluZyBvdXQgb2YgcG93ZXJcIixcbnN0YW5kYXJkOlwic3lzdGVtdlwifSxcblxue1xubmFtZTpcIlNJR1NZU1wiLFxubnVtYmVyOjMxLFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJJbnZhbGlkIHN5c3RlbSBjYWxsXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHVU5VU0VEXCIsXG5udW1iZXI6MzEsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiSW52YWxpZCBzeXN0ZW0gY2FsbFwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifV07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcCIsICJpbXBvcnQge3NpZ25hbHNCeU5hbWV9IGZyb20gJ2h1bWFuLXNpZ25hbHMnO1xuXG5jb25zdCBnZXRFcnJvclByZWZpeCA9ICh7dGltZWRPdXQsIHRpbWVvdXQsIGVycm9yQ29kZSwgc2lnbmFsLCBzaWduYWxEZXNjcmlwdGlvbiwgZXhpdENvZGUsIGlzQ2FuY2VsZWR9KSA9PiB7XG5cdGlmICh0aW1lZE91dCkge1xuXHRcdHJldHVybiBgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH0gbWlsbGlzZWNvbmRzYDtcblx0fVxuXG5cdGlmIChpc0NhbmNlbGVkKSB7XG5cdFx0cmV0dXJuICd3YXMgY2FuY2VsZWQnO1xuXHR9XG5cblx0aWYgKGVycm9yQ29kZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGBmYWlsZWQgd2l0aCAke2Vycm9yQ29kZX1gO1xuXHR9XG5cblx0aWYgKHNpZ25hbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGB3YXMga2lsbGVkIHdpdGggJHtzaWduYWx9ICgke3NpZ25hbERlc2NyaXB0aW9ufSlgO1xuXHR9XG5cblx0aWYgKGV4aXRDb2RlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gYGZhaWxlZCB3aXRoIGV4aXQgY29kZSAke2V4aXRDb2RlfWA7XG5cdH1cblxuXHRyZXR1cm4gJ2ZhaWxlZCc7XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZUVycm9yID0gKHtcblx0c3Rkb3V0LFxuXHRzdGRlcnIsXG5cdGFsbCxcblx0ZXJyb3IsXG5cdHNpZ25hbCxcblx0ZXhpdENvZGUsXG5cdGNvbW1hbmQsXG5cdGVzY2FwZWRDb21tYW5kLFxuXHR0aW1lZE91dCxcblx0aXNDYW5jZWxlZCxcblx0a2lsbGVkLFxuXHRwYXJzZWQ6IHtvcHRpb25zOiB7dGltZW91dH19LFxufSkgPT4ge1xuXHQvLyBgc2lnbmFsYCBhbmQgYGV4aXRDb2RlYCBlbWl0dGVkIG9uIGBzcGF3bmVkLm9uKCdleGl0JylgIGV2ZW50IGNhbiBiZSBgbnVsbGAuXG5cdC8vIFdlIG5vcm1hbGl6ZSB0aGVtIHRvIGB1bmRlZmluZWRgXG5cdGV4aXRDb2RlID0gZXhpdENvZGUgPT09IG51bGwgPyB1bmRlZmluZWQgOiBleGl0Q29kZTtcblx0c2lnbmFsID0gc2lnbmFsID09PSBudWxsID8gdW5kZWZpbmVkIDogc2lnbmFsO1xuXHRjb25zdCBzaWduYWxEZXNjcmlwdGlvbiA9IHNpZ25hbCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogc2lnbmFsc0J5TmFtZVtzaWduYWxdLmRlc2NyaXB0aW9uO1xuXG5cdGNvbnN0IGVycm9yQ29kZSA9IGVycm9yICYmIGVycm9yLmNvZGU7XG5cblx0Y29uc3QgcHJlZml4ID0gZ2V0RXJyb3JQcmVmaXgoe3RpbWVkT3V0LCB0aW1lb3V0LCBlcnJvckNvZGUsIHNpZ25hbCwgc2lnbmFsRGVzY3JpcHRpb24sIGV4aXRDb2RlLCBpc0NhbmNlbGVkfSk7XG5cdGNvbnN0IGV4ZWNhTWVzc2FnZSA9IGBDb21tYW5kICR7cHJlZml4fTogJHtjb21tYW5kfWA7XG5cdGNvbnN0IGlzRXJyb3IgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXJyb3IpID09PSAnW29iamVjdCBFcnJvcl0nO1xuXHRjb25zdCBzaG9ydE1lc3NhZ2UgPSBpc0Vycm9yID8gYCR7ZXhlY2FNZXNzYWdlfVxcbiR7ZXJyb3IubWVzc2FnZX1gIDogZXhlY2FNZXNzYWdlO1xuXHRjb25zdCBtZXNzYWdlID0gW3Nob3J0TWVzc2FnZSwgc3RkZXJyLCBzdGRvdXRdLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblxuXHRpZiAoaXNFcnJvcikge1xuXHRcdGVycm9yLm9yaWdpbmFsTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0ZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH0gZWxzZSB7XG5cdFx0ZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG5cdH1cblxuXHRlcnJvci5zaG9ydE1lc3NhZ2UgPSBzaG9ydE1lc3NhZ2U7XG5cdGVycm9yLmNvbW1hbmQgPSBjb21tYW5kO1xuXHRlcnJvci5lc2NhcGVkQ29tbWFuZCA9IGVzY2FwZWRDb21tYW5kO1xuXHRlcnJvci5leGl0Q29kZSA9IGV4aXRDb2RlO1xuXHRlcnJvci5zaWduYWwgPSBzaWduYWw7XG5cdGVycm9yLnNpZ25hbERlc2NyaXB0aW9uID0gc2lnbmFsRGVzY3JpcHRpb247XG5cdGVycm9yLnN0ZG91dCA9IHN0ZG91dDtcblx0ZXJyb3Iuc3RkZXJyID0gc3RkZXJyO1xuXG5cdGlmIChhbGwgIT09IHVuZGVmaW5lZCkge1xuXHRcdGVycm9yLmFsbCA9IGFsbDtcblx0fVxuXG5cdGlmICgnYnVmZmVyZWREYXRhJyBpbiBlcnJvcikge1xuXHRcdGRlbGV0ZSBlcnJvci5idWZmZXJlZERhdGE7XG5cdH1cblxuXHRlcnJvci5mYWlsZWQgPSB0cnVlO1xuXHRlcnJvci50aW1lZE91dCA9IEJvb2xlYW4odGltZWRPdXQpO1xuXHRlcnJvci5pc0NhbmNlbGVkID0gaXNDYW5jZWxlZDtcblx0ZXJyb3Iua2lsbGVkID0ga2lsbGVkICYmICF0aW1lZE91dDtcblxuXHRyZXR1cm4gZXJyb3I7XG59O1xuIiwgImNvbnN0IGFsaWFzZXMgPSBbJ3N0ZGluJywgJ3N0ZG91dCcsICdzdGRlcnInXTtcblxuY29uc3QgaGFzQWxpYXMgPSBvcHRpb25zID0+IGFsaWFzZXMuc29tZShhbGlhcyA9PiBvcHRpb25zW2FsaWFzXSAhPT0gdW5kZWZpbmVkKTtcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVN0ZGlvID0gb3B0aW9ucyA9PiB7XG5cdGlmICghb3B0aW9ucykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHtzdGRpb30gPSBvcHRpb25zO1xuXG5cdGlmIChzdGRpbyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGFsaWFzZXMubWFwKGFsaWFzID0+IG9wdGlvbnNbYWxpYXNdKTtcblx0fVxuXG5cdGlmIChoYXNBbGlhcyhvcHRpb25zKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihgSXQncyBub3QgcG9zc2libGUgdG8gcHJvdmlkZSBcXGBzdGRpb1xcYCBpbiBjb21iaW5hdGlvbiB3aXRoIG9uZSBvZiAke2FsaWFzZXMubWFwKGFsaWFzID0+IGBcXGAke2FsaWFzfVxcYGApLmpvaW4oJywgJyl9YCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIHN0ZGlvID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBzdGRpbztcblx0fVxuXG5cdGlmICghQXJyYXkuaXNBcnJheShzdGRpbykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBzdGRpb1xcYCB0byBiZSBvZiB0eXBlIFxcYHN0cmluZ1xcYCBvciBcXGBBcnJheVxcYCwgZ290IFxcYCR7dHlwZW9mIHN0ZGlvfVxcYGApO1xuXHR9XG5cblx0Y29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoc3RkaW8ubGVuZ3RoLCBhbGlhc2VzLmxlbmd0aCk7XG5cdHJldHVybiBBcnJheS5mcm9tKHtsZW5ndGh9LCAodmFsdWUsIGluZGV4KSA9PiBzdGRpb1tpbmRleF0pO1xufTtcblxuLy8gYGlwY2AgaXMgcHVzaGVkIHVubGVzcyBpdCBpcyBhbHJlYWR5IHByZXNlbnRcbmV4cG9ydCBjb25zdCBub3JtYWxpemVTdGRpb05vZGUgPSBvcHRpb25zID0+IHtcblx0Y29uc3Qgc3RkaW8gPSBub3JtYWxpemVTdGRpbyhvcHRpb25zKTtcblxuXHRpZiAoc3RkaW8gPT09ICdpcGMnKSB7XG5cdFx0cmV0dXJuICdpcGMnO1xuXHR9XG5cblx0aWYgKHN0ZGlvID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHN0ZGlvID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBbc3RkaW8sIHN0ZGlvLCBzdGRpbywgJ2lwYyddO1xuXHR9XG5cblx0aWYgKHN0ZGlvLmluY2x1ZGVzKCdpcGMnKSkge1xuXHRcdHJldHVybiBzdGRpbztcblx0fVxuXG5cdHJldHVybiBbLi4uc3RkaW8sICdpcGMnXTtcbn07XG4iLCAiaW1wb3J0IG9zIGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IG9uRXhpdCBmcm9tICdzaWduYWwtZXhpdCc7XG5cbmNvbnN0IERFRkFVTFRfRk9SQ0VfS0lMTF9USU1FT1VUID0gMTAwMCAqIDU7XG5cbi8vIE1vbmtleS1wYXRjaGVzIGBjaGlsZFByb2Nlc3Mua2lsbCgpYCB0byBhZGQgYGZvcmNlS2lsbEFmdGVyVGltZW91dGAgYmVoYXZpb3JcbmV4cG9ydCBjb25zdCBzcGF3bmVkS2lsbCA9IChraWxsLCBzaWduYWwgPSAnU0lHVEVSTScsIG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBraWxsUmVzdWx0ID0ga2lsbChzaWduYWwpO1xuXHRzZXRLaWxsVGltZW91dChraWxsLCBzaWduYWwsIG9wdGlvbnMsIGtpbGxSZXN1bHQpO1xuXHRyZXR1cm4ga2lsbFJlc3VsdDtcbn07XG5cbmNvbnN0IHNldEtpbGxUaW1lb3V0ID0gKGtpbGwsIHNpZ25hbCwgb3B0aW9ucywga2lsbFJlc3VsdCkgPT4ge1xuXHRpZiAoIXNob3VsZEZvcmNlS2lsbChzaWduYWwsIG9wdGlvbnMsIGtpbGxSZXN1bHQpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdGltZW91dCA9IGdldEZvcmNlS2lsbEFmdGVyVGltZW91dChvcHRpb25zKTtcblx0Y29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdGtpbGwoJ1NJR0tJTEwnKTtcblx0fSwgdGltZW91dCk7XG5cblx0Ly8gR3VhcmRlZCBiZWNhdXNlIHRoZXJlJ3Mgbm8gYC51bnJlZigpYCB3aGVuIGBleGVjYWAgaXMgdXNlZCBpbiB0aGUgcmVuZGVyZXJcblx0Ly8gcHJvY2VzcyBpbiBFbGVjdHJvbi4gVGhpcyBjYW5ub3QgYmUgdGVzdGVkIHNpbmNlIHdlIGRvbid0IHJ1biB0ZXN0cyBpblxuXHQvLyBFbGVjdHJvbi5cblx0Ly8gaXN0YW5idWwgaWdub3JlIGVsc2Vcblx0aWYgKHQudW5yZWYpIHtcblx0XHR0LnVucmVmKCk7XG5cdH1cbn07XG5cbmNvbnN0IHNob3VsZEZvcmNlS2lsbCA9IChzaWduYWwsIHtmb3JjZUtpbGxBZnRlclRpbWVvdXR9LCBraWxsUmVzdWx0KSA9PiBpc1NpZ3Rlcm0oc2lnbmFsKSAmJiBmb3JjZUtpbGxBZnRlclRpbWVvdXQgIT09IGZhbHNlICYmIGtpbGxSZXN1bHQ7XG5cbmNvbnN0IGlzU2lndGVybSA9IHNpZ25hbCA9PiBzaWduYWwgPT09IG9zLmNvbnN0YW50cy5zaWduYWxzLlNJR1RFUk1cblx0XHR8fCAodHlwZW9mIHNpZ25hbCA9PT0gJ3N0cmluZycgJiYgc2lnbmFsLnRvVXBwZXJDYXNlKCkgPT09ICdTSUdURVJNJyk7XG5cbmNvbnN0IGdldEZvcmNlS2lsbEFmdGVyVGltZW91dCA9ICh7Zm9yY2VLaWxsQWZ0ZXJUaW1lb3V0ID0gdHJ1ZX0pID0+IHtcblx0aWYgKGZvcmNlS2lsbEFmdGVyVGltZW91dCA9PT0gdHJ1ZSkge1xuXHRcdHJldHVybiBERUZBVUxUX0ZPUkNFX0tJTExfVElNRU9VVDtcblx0fVxuXG5cdGlmICghTnVtYmVyLmlzRmluaXRlKGZvcmNlS2lsbEFmdGVyVGltZW91dCkgfHwgZm9yY2VLaWxsQWZ0ZXJUaW1lb3V0IDwgMCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIHRoZSBcXGBmb3JjZUtpbGxBZnRlclRpbWVvdXRcXGAgb3B0aW9uIHRvIGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsIGdvdCBcXGAke2ZvcmNlS2lsbEFmdGVyVGltZW91dH1cXGAgKCR7dHlwZW9mIGZvcmNlS2lsbEFmdGVyVGltZW91dH0pYCk7XG5cdH1cblxuXHRyZXR1cm4gZm9yY2VLaWxsQWZ0ZXJUaW1lb3V0O1xufTtcblxuLy8gYGNoaWxkUHJvY2Vzcy5jYW5jZWwoKWBcbmV4cG9ydCBjb25zdCBzcGF3bmVkQ2FuY2VsID0gKHNwYXduZWQsIGNvbnRleHQpID0+IHtcblx0Y29uc3Qga2lsbFJlc3VsdCA9IHNwYXduZWQua2lsbCgpO1xuXG5cdGlmIChraWxsUmVzdWx0KSB7XG5cdFx0Y29udGV4dC5pc0NhbmNlbGVkID0gdHJ1ZTtcblx0fVxufTtcblxuY29uc3QgdGltZW91dEtpbGwgPSAoc3Bhd25lZCwgc2lnbmFsLCByZWplY3QpID0+IHtcblx0c3Bhd25lZC5raWxsKHNpZ25hbCk7XG5cdHJlamVjdChPYmplY3QuYXNzaWduKG5ldyBFcnJvcignVGltZWQgb3V0JyksIHt0aW1lZE91dDogdHJ1ZSwgc2lnbmFsfSkpO1xufTtcblxuLy8gYHRpbWVvdXRgIG9wdGlvbiBoYW5kbGluZ1xuZXhwb3J0IGNvbnN0IHNldHVwVGltZW91dCA9IChzcGF3bmVkLCB7dGltZW91dCwga2lsbFNpZ25hbCA9ICdTSUdURVJNJ30sIHNwYXduZWRQcm9taXNlKSA9PiB7XG5cdGlmICh0aW1lb3V0ID09PSAwIHx8IHRpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBzcGF3bmVkUHJvbWlzZTtcblx0fVxuXG5cdGxldCB0aW1lb3V0SWQ7XG5cdGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGltZW91dEtpbGwoc3Bhd25lZCwga2lsbFNpZ25hbCwgcmVqZWN0KTtcblx0XHR9LCB0aW1lb3V0KTtcblx0fSk7XG5cblx0Y29uc3Qgc2FmZVNwYXduZWRQcm9taXNlID0gc3Bhd25lZFByb21pc2UuZmluYWxseSgoKSA9PiB7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cdH0pO1xuXG5cdHJldHVybiBQcm9taXNlLnJhY2UoW3RpbWVvdXRQcm9taXNlLCBzYWZlU3Bhd25lZFByb21pc2VdKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVRpbWVvdXQgPSAoe3RpbWVvdXR9KSA9PiB7XG5cdGlmICh0aW1lb3V0ICE9PSB1bmRlZmluZWQgJiYgKCFOdW1iZXIuaXNGaW5pdGUodGltZW91dCkgfHwgdGltZW91dCA8IDApKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgdGhlIFxcYHRpbWVvdXRcXGAgb3B0aW9uIHRvIGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsIGdvdCBcXGAke3RpbWVvdXR9XFxgICgke3R5cGVvZiB0aW1lb3V0fSlgKTtcblx0fVxufTtcblxuLy8gYGNsZWFudXBgIG9wdGlvbiBoYW5kbGluZ1xuZXhwb3J0IGNvbnN0IHNldEV4aXRIYW5kbGVyID0gYXN5bmMgKHNwYXduZWQsIHtjbGVhbnVwLCBkZXRhY2hlZH0sIHRpbWVkUHJvbWlzZSkgPT4ge1xuXHRpZiAoIWNsZWFudXAgfHwgZGV0YWNoZWQpIHtcblx0XHRyZXR1cm4gdGltZWRQcm9taXNlO1xuXHR9XG5cblx0Y29uc3QgcmVtb3ZlRXhpdEhhbmRsZXIgPSBvbkV4aXQoKCkgPT4ge1xuXHRcdHNwYXduZWQua2lsbCgpO1xuXHR9KTtcblxuXHRyZXR1cm4gdGltZWRQcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuXHRcdHJlbW92ZUV4aXRIYW5kbGVyKCk7XG5cdH0pO1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gaXNTdHJlYW0oc3RyZWFtKSB7XG5cdHJldHVybiBzdHJlYW0gIT09IG51bGxcblx0XHQmJiB0eXBlb2Ygc3RyZWFtID09PSAnb2JqZWN0J1xuXHRcdCYmIHR5cGVvZiBzdHJlYW0ucGlwZSA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV3JpdGFibGVTdHJlYW0oc3RyZWFtKSB7XG5cdHJldHVybiBpc1N0cmVhbShzdHJlYW0pXG5cdFx0JiYgc3RyZWFtLndyaXRhYmxlICE9PSBmYWxzZVxuXHRcdCYmIHR5cGVvZiBzdHJlYW0uX3dyaXRlID09PSAnZnVuY3Rpb24nXG5cdFx0JiYgdHlwZW9mIHN0cmVhbS5fd3JpdGFibGVTdGF0ZSA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuXHRyZXR1cm4gaXNTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIHN0cmVhbS5yZWFkYWJsZSAhPT0gZmFsc2Vcblx0XHQmJiB0eXBlb2Ygc3RyZWFtLl9yZWFkID09PSAnZnVuY3Rpb24nXG5cdFx0JiYgdHlwZW9mIHN0cmVhbS5fcmVhZGFibGVTdGF0ZSA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0R1cGxleFN0cmVhbShzdHJlYW0pIHtcblx0cmV0dXJuIGlzV3JpdGFibGVTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIGlzUmVhZGFibGVTdHJlYW0oc3RyZWFtKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhbnNmb3JtU3RyZWFtKHN0cmVhbSkge1xuXHRyZXR1cm4gaXNEdXBsZXhTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIHR5cGVvZiBzdHJlYW0uX3RyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJztcbn1cbiIsICJpbXBvcnQge2lzU3RyZWFtfSBmcm9tICdpcy1zdHJlYW0nO1xuaW1wb3J0IGdldFN0cmVhbSBmcm9tICdnZXQtc3RyZWFtJztcbmltcG9ydCBtZXJnZVN0cmVhbSBmcm9tICdtZXJnZS1zdHJlYW0nO1xuXG4vLyBgaW5wdXRgIG9wdGlvblxuZXhwb3J0IGNvbnN0IGhhbmRsZUlucHV0ID0gKHNwYXduZWQsIGlucHV0KSA9PiB7XG5cdGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aWYgKGlzU3RyZWFtKGlucHV0KSkge1xuXHRcdGlucHV0LnBpcGUoc3Bhd25lZC5zdGRpbik7XG5cdH0gZWxzZSB7XG5cdFx0c3Bhd25lZC5zdGRpbi5lbmQoaW5wdXQpO1xuXHR9XG59O1xuXG4vLyBgYWxsYCBpbnRlcmxlYXZlcyBgc3Rkb3V0YCBhbmQgYHN0ZGVycmBcbmV4cG9ydCBjb25zdCBtYWtlQWxsU3RyZWFtID0gKHNwYXduZWQsIHthbGx9KSA9PiB7XG5cdGlmICghYWxsIHx8ICghc3Bhd25lZC5zdGRvdXQgJiYgIXNwYXduZWQuc3RkZXJyKSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IG1peGVkID0gbWVyZ2VTdHJlYW0oKTtcblxuXHRpZiAoc3Bhd25lZC5zdGRvdXQpIHtcblx0XHRtaXhlZC5hZGQoc3Bhd25lZC5zdGRvdXQpO1xuXHR9XG5cblx0aWYgKHNwYXduZWQuc3RkZXJyKSB7XG5cdFx0bWl4ZWQuYWRkKHNwYXduZWQuc3RkZXJyKTtcblx0fVxuXG5cdHJldHVybiBtaXhlZDtcbn07XG5cbi8vIE9uIGZhaWx1cmUsIGByZXN1bHQuc3Rkb3V0fHN0ZGVycnxhbGxgIHNob3VsZCBjb250YWluIHRoZSBjdXJyZW50bHkgYnVmZmVyZWQgc3RyZWFtXG5jb25zdCBnZXRCdWZmZXJlZERhdGEgPSBhc3luYyAoc3RyZWFtLCBzdHJlYW1Qcm9taXNlKSA9PiB7XG5cdC8vIFdoZW4gYGJ1ZmZlcmAgaXMgYGZhbHNlYCwgYHN0cmVhbVByb21pc2VgIGlzIGB1bmRlZmluZWRgIGFuZCB0aGVyZSBpcyBubyBidWZmZXJlZCBkYXRhIHRvIHJldHJpZXZlXG5cdGlmICghc3RyZWFtIHx8IHN0cmVhbVByb21pc2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHN0cmVhbS5kZXN0cm95KCk7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gYXdhaXQgc3RyZWFtUHJvbWlzZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gZXJyb3IuYnVmZmVyZWREYXRhO1xuXHR9XG59O1xuXG5jb25zdCBnZXRTdHJlYW1Qcm9taXNlID0gKHN0cmVhbSwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0pID0+IHtcblx0aWYgKCFzdHJlYW0gfHwgIWJ1ZmZlcikge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChlbmNvZGluZykge1xuXHRcdHJldHVybiBnZXRTdHJlYW0oc3RyZWFtLCB7ZW5jb2RpbmcsIG1heEJ1ZmZlcn0pO1xuXHR9XG5cblx0cmV0dXJuIGdldFN0cmVhbS5idWZmZXIoc3RyZWFtLCB7bWF4QnVmZmVyfSk7XG59O1xuXG4vLyBSZXRyaWV2ZSByZXN1bHQgb2YgY2hpbGQgcHJvY2VzczogZXhpdCBjb2RlLCBzaWduYWwsIGVycm9yLCBzdHJlYW1zIChzdGRvdXQvc3RkZXJyL2FsbClcbmV4cG9ydCBjb25zdCBnZXRTcGF3bmVkUmVzdWx0ID0gYXN5bmMgKHtzdGRvdXQsIHN0ZGVyciwgYWxsfSwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0sIHByb2Nlc3NEb25lKSA9PiB7XG5cdGNvbnN0IHN0ZG91dFByb21pc2UgPSBnZXRTdHJlYW1Qcm9taXNlKHN0ZG91dCwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0pO1xuXHRjb25zdCBzdGRlcnJQcm9taXNlID0gZ2V0U3RyZWFtUHJvbWlzZShzdGRlcnIsIHtlbmNvZGluZywgYnVmZmVyLCBtYXhCdWZmZXJ9KTtcblx0Y29uc3QgYWxsUHJvbWlzZSA9IGdldFN0cmVhbVByb21pc2UoYWxsLCB7ZW5jb2RpbmcsIGJ1ZmZlciwgbWF4QnVmZmVyOiBtYXhCdWZmZXIgKiAyfSk7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoW3Byb2Nlc3NEb25lLCBzdGRvdXRQcm9taXNlLCBzdGRlcnJQcm9taXNlLCBhbGxQcm9taXNlXSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRcdHtlcnJvciwgc2lnbmFsOiBlcnJvci5zaWduYWwsIHRpbWVkT3V0OiBlcnJvci50aW1lZE91dH0sXG5cdFx0XHRnZXRCdWZmZXJlZERhdGEoc3Rkb3V0LCBzdGRvdXRQcm9taXNlKSxcblx0XHRcdGdldEJ1ZmZlcmVkRGF0YShzdGRlcnIsIHN0ZGVyclByb21pc2UpLFxuXHRcdFx0Z2V0QnVmZmVyZWREYXRhKGFsbCwgYWxsUHJvbWlzZSksXG5cdFx0XSk7XG5cdH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUlucHV0U3luYyA9ICh7aW5wdXR9KSA9PiB7XG5cdGlmIChpc1N0cmVhbShpbnB1dCkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgYGlucHV0YCBvcHRpb24gY2Fubm90IGJlIGEgc3RyZWFtIGluIHN5bmMgbW9kZScpO1xuXHR9XG59O1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZWZlci10b3AtbGV2ZWwtYXdhaXRcbmNvbnN0IG5hdGl2ZVByb21pc2VQcm90b3R5cGUgPSAoYXN5bmMgKCkgPT4ge30pKCkuY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG5jb25zdCBkZXNjcmlwdG9ycyA9IFsndGhlbicsICdjYXRjaCcsICdmaW5hbGx5J10ubWFwKHByb3BlcnR5ID0+IFtcblx0cHJvcGVydHksXG5cdFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5hdGl2ZVByb21pc2VQcm90b3R5cGUsIHByb3BlcnR5KSxcbl0pO1xuXG4vLyBUaGUgcmV0dXJuIHZhbHVlIGlzIGEgbWl4aW4gb2YgYGNoaWxkUHJvY2Vzc2AgYW5kIGBQcm9taXNlYFxuZXhwb3J0IGNvbnN0IG1lcmdlUHJvbWlzZSA9IChzcGF3bmVkLCBwcm9taXNlKSA9PiB7XG5cdGZvciAoY29uc3QgW3Byb3BlcnR5LCBkZXNjcmlwdG9yXSBvZiBkZXNjcmlwdG9ycykge1xuXHRcdC8vIFN0YXJ0aW5nIHRoZSBtYWluIGBwcm9taXNlYCBpcyBkZWZlcnJlZCB0byBhdm9pZCBjb25zdW1pbmcgc3RyZWFtc1xuXHRcdGNvbnN0IHZhbHVlID0gdHlwZW9mIHByb21pc2UgPT09ICdmdW5jdGlvbidcblx0XHRcdD8gKC4uLmFyZ3MpID0+IFJlZmxlY3QuYXBwbHkoZGVzY3JpcHRvci52YWx1ZSwgcHJvbWlzZSgpLCBhcmdzKVxuXHRcdFx0OiBkZXNjcmlwdG9yLnZhbHVlLmJpbmQocHJvbWlzZSk7XG5cblx0XHRSZWZsZWN0LmRlZmluZVByb3BlcnR5KHNwYXduZWQsIHByb3BlcnR5LCB7Li4uZGVzY3JpcHRvciwgdmFsdWV9KTtcblx0fVxuXG5cdHJldHVybiBzcGF3bmVkO1xufTtcblxuLy8gVXNlIHByb21pc2VzIGluc3RlYWQgb2YgYGNoaWxkX3Byb2Nlc3NgIGV2ZW50c1xuZXhwb3J0IGNvbnN0IGdldFNwYXduZWRQcm9taXNlID0gc3Bhd25lZCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdHNwYXduZWQub24oJ2V4aXQnLCAoZXhpdENvZGUsIHNpZ25hbCkgPT4ge1xuXHRcdHJlc29sdmUoe2V4aXRDb2RlLCBzaWduYWx9KTtcblx0fSk7XG5cblx0c3Bhd25lZC5vbignZXJyb3InLCBlcnJvciA9PiB7XG5cdFx0cmVqZWN0KGVycm9yKTtcblx0fSk7XG5cblx0aWYgKHNwYXduZWQuc3RkaW4pIHtcblx0XHRzcGF3bmVkLnN0ZGluLm9uKCdlcnJvcicsIGVycm9yID0+IHtcblx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0fSk7XG5cdH1cbn0pO1xuIiwgImNvbnN0IG5vcm1hbGl6ZUFyZ3MgPSAoZmlsZSwgYXJncyA9IFtdKSA9PiB7XG5cdGlmICghQXJyYXkuaXNBcnJheShhcmdzKSkge1xuXHRcdHJldHVybiBbZmlsZV07XG5cdH1cblxuXHRyZXR1cm4gW2ZpbGUsIC4uLmFyZ3NdO1xufTtcblxuY29uc3QgTk9fRVNDQVBFX1JFR0VYUCA9IC9eW1xcdy4tXSskLztcbmNvbnN0IERPVUJMRV9RVU9URVNfUkVHRVhQID0gL1wiL2c7XG5cbmNvbnN0IGVzY2FwZUFyZyA9IGFyZyA9PiB7XG5cdGlmICh0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyB8fCBOT19FU0NBUEVfUkVHRVhQLnRlc3QoYXJnKSkge1xuXHRcdHJldHVybiBhcmc7XG5cdH1cblxuXHRyZXR1cm4gYFwiJHthcmcucmVwbGFjZShET1VCTEVfUVVPVEVTX1JFR0VYUCwgJ1xcXFxcIicpfVwiYDtcbn07XG5cbmV4cG9ydCBjb25zdCBqb2luQ29tbWFuZCA9IChmaWxlLCBhcmdzKSA9PiBub3JtYWxpemVBcmdzKGZpbGUsIGFyZ3MpLmpvaW4oJyAnKTtcblxuZXhwb3J0IGNvbnN0IGdldEVzY2FwZWRDb21tYW5kID0gKGZpbGUsIGFyZ3MpID0+IG5vcm1hbGl6ZUFyZ3MoZmlsZSwgYXJncykubWFwKGFyZyA9PiBlc2NhcGVBcmcoYXJnKSkuam9pbignICcpO1xuXG5jb25zdCBTUEFDRVNfUkVHRVhQID0gLyArL2c7XG5cbi8vIEhhbmRsZSBgZXhlY2FDb21tYW5kKClgXG5leHBvcnQgY29uc3QgcGFyc2VDb21tYW5kID0gY29tbWFuZCA9PiB7XG5cdGNvbnN0IHRva2VucyA9IFtdO1xuXHRmb3IgKGNvbnN0IHRva2VuIG9mIGNvbW1hbmQudHJpbSgpLnNwbGl0KFNQQUNFU19SRUdFWFApKSB7XG5cdFx0Ly8gQWxsb3cgc3BhY2VzIHRvIGJlIGVzY2FwZWQgYnkgYSBiYWNrc2xhc2ggaWYgbm90IG1lYW50IGFzIGEgZGVsaW1pdGVyXG5cdFx0Y29uc3QgcHJldmlvdXNUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG5cdFx0aWYgKHByZXZpb3VzVG9rZW4gJiYgcHJldmlvdXNUb2tlbi5lbmRzV2l0aCgnXFxcXCcpKSB7XG5cdFx0XHQvLyBNZXJnZSBwcmV2aW91cyB0b2tlbiB3aXRoIGN1cnJlbnQgb25lXG5cdFx0XHR0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdID0gYCR7cHJldmlvdXNUb2tlbi5zbGljZSgwLCAtMSl9ICR7dG9rZW59YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG9rZW5zLnB1c2godG9rZW4pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0b2tlbnM7XG59O1xuIiwgImltcG9ydCB7IExvY2FsU3RvcmFnZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHBia2RmMiB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfS0VZIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IERFRkFVTFRfUEFTU1dPUkRfT1BUSU9OUywgUkVQUk9NUFRfSEFTSF9TQUxUIH0gZnJvbSBcIn4vY29uc3RhbnRzL3Bhc3N3b3Jkc1wiO1xuaW1wb3J0IHsgUGFzc3dvcmRHZW5lcmF0b3JPcHRpb25zIH0gZnJvbSBcIn4vdHlwZXMvcGFzc3dvcmRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXNzd29yZEdlbmVyYXRpbmdBcmdzKG9wdGlvbnM6IFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZsYXRNYXAoKFthcmcsIHZhbHVlXSkgPT4gKHZhbHVlID8gW2AtLSR7YXJnfWAsIHZhbHVlXSA6IFtdKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNoTWFzdGVyUGFzc3dvcmRGb3JSZXByb21wdGluZyhwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBwYmtkZjIocGFzc3dvcmQsIFJFUFJPTVBUX0hBU0hfU0FMVCwgMTAwMDAwLCA2NCwgXCJzaGE1MTJcIiwgKGVycm9yLCBoYXNoZWQpID0+IHtcbiAgICAgIGlmIChlcnJvciAhPSBudWxsKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShoYXNoZWQudG9TdHJpbmcoXCJoZXhcIikpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucygpIHtcbiAgY29uc3Qgc3RvcmVkT3B0aW9ucyA9IGF3YWl0IExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuUEFTU1dPUkRfT1BUSU9OUyk7XG4gIHJldHVybiB7XG4gICAgLi4uREVGQVVMVF9QQVNTV09SRF9PUFRJT05TLFxuICAgIC4uLihzdG9yZWRPcHRpb25zID8gSlNPTi5wYXJzZShzdG9yZWRPcHRpb25zKSA6IHt9KSxcbiAgfSBhcyBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnM7XG59XG4iLCAiaW1wb3J0IHsgUGFzc3dvcmRHZW5lcmF0b3JPcHRpb25zIH0gZnJvbSBcIn4vdHlwZXMvcGFzc3dvcmRzXCI7XG5cbmV4cG9ydCBjb25zdCBSRVBST01QVF9IQVNIX1NBTFQgPSBcImZvb2JhcmJhenp5YmF6XCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1BBU1NXT1JEX09QVElPTlM6IFJlcXVpcmVkPFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucz4gPSB7XG4gIGxvd2VyY2FzZTogdHJ1ZSxcbiAgdXBwZXJjYXNlOiB0cnVlLFxuICBudW1iZXI6IGZhbHNlLFxuICBzcGVjaWFsOiBmYWxzZSxcbiAgcGFzc3BocmFzZTogZmFsc2UsXG4gIGxlbmd0aDogXCIxNFwiLFxuICB3b3JkczogXCIzXCIsXG4gIHNlcGFyYXRvcjogXCItXCIsXG4gIGNhcGl0YWxpemU6IGZhbHNlLFxuICBpbmNsdWRlTnVtYmVyOiBmYWxzZSxcbiAgbWluTnVtYmVyOiBcIjFcIixcbiAgbWluU3BlY2lhbDogXCIxXCIsXG59O1xuIiwgImltcG9ydCB7IGVudmlyb25tZW50LCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgVkFVTFRfVElNRU9VVF9NU19UT19MQUJFTCB9IGZyb20gXCJ+L2NvbnN0YW50cy9sYWJlbHNcIjtcbmltcG9ydCB7IENvbW1hbmROYW1lIH0gZnJvbSBcIn4vdHlwZXMvZ2VuZXJhbFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmVyVXJsUHJlZmVyZW5jZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCB7IHNlcnZlclVybCB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKTtcbiAgcmV0dXJuICFzZXJ2ZXJVcmwgfHwgc2VydmVyVXJsID09PSBcImJpdHdhcmRlbi5jb21cIiB8fCBzZXJ2ZXJVcmwgPT09IFwiaHR0cHM6Ly9iaXR3YXJkZW4uY29tXCIgPyB1bmRlZmluZWQgOiBzZXJ2ZXJVcmw7XG59XG5cbnR5cGUgUHJlZmVyZW5jZUtleU9mQ29tbWFuZHNXaXRoVHJhbnNpZW50T3B0aW9ucyA9XG4gIHwga2V5b2YgUHJlZmVyZW5jZXMuU2VhcmNoXG4gIHwga2V5b2YgUHJlZmVyZW5jZXMuR2VuZXJhdGVQYXNzd29yZFxuICB8IGtleW9mIFByZWZlcmVuY2VzLkdlbmVyYXRlUGFzc3dvcmRRdWljaztcblxudHlwZSBUcmFuc2llbnRPcHRpb25zVmFsdWUgPVxuICB8IFByZWZlcmVuY2VzLlNlYXJjaFtcInRyYW5zaWVudENvcHlTZWFyY2hcIl1cbiAgfCBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkW1widHJhbnNpZW50Q29weUdlbmVyYXRlUGFzc3dvcmRcIl1cbiAgfCBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkUXVpY2tbXCJ0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrXCJdO1xuXG5jb25zdCBDT01NQU5EX05BTUVfVE9fUFJFRkVSRU5DRV9LRVlfTUFQOiBSZWNvcmQ8Q29tbWFuZE5hbWUsIFByZWZlcmVuY2VLZXlPZkNvbW1hbmRzV2l0aFRyYW5zaWVudE9wdGlvbnM+ID0ge1xuICBzZWFyY2g6IFwidHJhbnNpZW50Q29weVNlYXJjaFwiLFxuICBcImdlbmVyYXRlLXBhc3N3b3JkXCI6IFwidHJhbnNpZW50Q29weUdlbmVyYXRlUGFzc3dvcmRcIixcbiAgXCJnZW5lcmF0ZS1wYXNzd29yZC1xdWlja1wiOiBcInRyYW5zaWVudENvcHlHZW5lcmF0ZVBhc3N3b3JkUXVpY2tcIixcbn07XG5cbnR5cGUgUHJlZmVyZW5jZXMgPSBQcmVmZXJlbmNlcy5TZWFyY2ggJiBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkICYgUHJlZmVyZW5jZXMuR2VuZXJhdGVQYXNzd29yZFF1aWNrO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UodHlwZTogXCJwYXNzd29yZFwiIHwgXCJvdGhlclwiKTogYm9vbGVhbiB7XG4gIGNvbnN0IHByZWZlcmVuY2VLZXkgPSBDT01NQU5EX05BTUVfVE9fUFJFRkVSRU5DRV9LRVlfTUFQW2Vudmlyb25tZW50LmNvbW1hbmROYW1lIGFzIENvbW1hbmROYW1lXTtcbiAgY29uc3QgdHJhbnNpZW50UHJlZmVyZW5jZSA9IGdldFByZWZlcmVuY2VWYWx1ZXM8UHJlZmVyZW5jZXM+KClbcHJlZmVyZW5jZUtleV0gYXMgVHJhbnNpZW50T3B0aW9uc1ZhbHVlO1xuICBpZiAodHJhbnNpZW50UHJlZmVyZW5jZSA9PT0gXCJuZXZlclwiKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0cmFuc2llbnRQcmVmZXJlbmNlID09PSBcImFsd2F5c1wiKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKHRyYW5zaWVudFByZWZlcmVuY2UgPT09IFwicGFzc3dvcmRzXCIpIHJldHVybiB0eXBlID09PSBcInBhc3N3b3JkXCI7XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFiZWxGb3JUaW1lb3V0UHJlZmVyZW5jZSh0aW1lb3V0OiBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICByZXR1cm4gVkFVTFRfVElNRU9VVF9NU19UT19MQUJFTFt0aW1lb3V0IGFzIGtleW9mIHR5cGVvZiBWQVVMVF9USU1FT1VUX01TX1RPX0xBQkVMXTtcbn1cbiIsICJjb25zdCBWQVVMVF9USU1FT1VUX09QVElPTlMgPSB7XG4gIElNTUVESUFURUxZOiBcIjBcIixcbiAgT05FX01JTlVURTogXCI2MDAwMFwiLFxuICBGSVZFX01JTlVURVM6IFwiMzAwMDAwXCIsXG4gIEZJRlRFRU5fTUlOVVRFUzogXCI5MDAwMDBcIixcbiAgVEhJUlRZX01JTlVURVM6IFwiMTgwMDAwMFwiLFxuICBPTkVfSE9VUjogXCIzNjAwMDAwXCIsXG4gIEZPVVJfSE9VUlM6IFwiMTQ0MDAwMDBcIixcbiAgRUlHSFRfSE9VUlM6IFwiMjg4MDAwMDBcIixcbiAgT05FX0RBWTogXCI4NjQwMDAwMFwiLFxuICBORVZFUjogXCItMVwiLFxuICBTWVNURU1fTE9DSzogXCItMlwiLFxuICBTWVNURU1fU0xFRVA6IFwiLTNcIixcbn0gYXMgY29uc3Qgc2F0aXNmaWVzIFJlY29yZDxzdHJpbmcsIFByZWZlcmVuY2VzW1wicmVwcm9tcHRJZ25vcmVEdXJhdGlvblwiXT47XG5cbmV4cG9ydCBjb25zdCBWQVVMVF9USU1FT1VUID0gT2JqZWN0LmVudHJpZXMoVkFVTFRfVElNRU9VVF9PUFRJT05TKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gIGFjY1trZXkgYXMga2V5b2YgdHlwZW9mIFZBVUxUX1RJTUVPVVRfT1BUSU9OU10gPSBwYXJzZUludCh2YWx1ZSk7XG4gIHJldHVybiBhY2M7XG59LCB7fSBhcyBSZWNvcmQ8a2V5b2YgdHlwZW9mIFZBVUxUX1RJTUVPVVRfT1BUSU9OUywgbnVtYmVyPik7XG4iLCAiaW1wb3J0IHsgVkFVTFRfVElNRU9VVCB9IGZyb20gXCJ+L2NvbnN0YW50cy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgQ2FyZCwgSWRlbnRpdHksIEl0ZW1UeXBlIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuZXhwb3J0IGNvbnN0IFZBVUxUX1RJTUVPVVRfTVNfVE9fTEFCRUw6IFBhcnRpYWw8UmVjb3JkPGtleW9mIHR5cGVvZiBWQVVMVF9USU1FT1VULCBzdHJpbmc+PiA9IHtcbiAgW1ZBVUxUX1RJTUVPVVQuSU1NRURJQVRFTFldOiBcIkltbWVkaWF0ZWx5XCIsXG4gIFtWQVVMVF9USU1FT1VULk9ORV9NSU5VVEVdOiBcIjEgTWludXRlXCIsXG4gIFtWQVVMVF9USU1FT1VULkZJVkVfTUlOVVRFU106IFwiNSBNaW51dGVzXCIsXG4gIFtWQVVMVF9USU1FT1VULkZJRlRFRU5fTUlOVVRFU106IFwiMTUgTWludXRlc1wiLFxuICBbVkFVTFRfVElNRU9VVC5USElSVFlfTUlOVVRFU106IFwiMzAgTWludXRlc1wiLFxuICBbVkFVTFRfVElNRU9VVC5PTkVfSE9VUl06IFwiMSBIb3VyXCIsXG4gIFtWQVVMVF9USU1FT1VULkZPVVJfSE9VUlNdOiBcIjQgSG91cnNcIixcbiAgW1ZBVUxUX1RJTUVPVVQuRUlHSFRfSE9VUlNdOiBcIjggSG91cnNcIixcbiAgW1ZBVUxUX1RJTUVPVVQuT05FX0RBWV06IFwiMSBEYXlcIixcbn07XG5cbmV4cG9ydCBjb25zdCBDQVJEX0tFWV9MQUJFTDogUmVjb3JkPGtleW9mIENhcmQsIHN0cmluZz4gPSB7XG4gIGNhcmRob2xkZXJOYW1lOiBcIkNhcmRob2xkZXIgbmFtZVwiLFxuICBicmFuZDogXCJCcmFuZFwiLFxuICBudW1iZXI6IFwiTnVtYmVyXCIsXG4gIGV4cE1vbnRoOiBcIkV4cGlyYXRpb24gbW9udGhcIixcbiAgZXhwWWVhcjogXCJFeHBpcmF0aW9uIHllYXJcIixcbiAgY29kZTogXCJTZWN1cml0eSBjb2RlIChDVlYpXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSURFTlRJVFlfS0VZX0xBQkVMOiBSZWNvcmQ8a2V5b2YgSWRlbnRpdHksIHN0cmluZz4gPSB7XG4gIHRpdGxlOiBcIlRpdGxlXCIsXG4gIGZpcnN0TmFtZTogXCJGaXJzdCBuYW1lXCIsXG4gIG1pZGRsZU5hbWU6IFwiTWlkZGxlIG5hbWVcIixcbiAgbGFzdE5hbWU6IFwiTGFzdCBuYW1lXCIsXG4gIHVzZXJuYW1lOiBcIlVzZXJuYW1lXCIsXG4gIGNvbXBhbnk6IFwiQ29tcGFueVwiLFxuICBzc246IFwiU29jaWFsIFNlY3VyaXR5IG51bWJlclwiLFxuICBwYXNzcG9ydE51bWJlcjogXCJQYXNzcG9ydCBudW1iZXJcIixcbiAgbGljZW5zZU51bWJlcjogXCJMaWNlbnNlIG51bWJlclwiLFxuICBlbWFpbDogXCJFbWFpbFwiLFxuICBwaG9uZTogXCJQaG9uZVwiLFxuICBhZGRyZXNzMTogXCJBZGRyZXNzIDFcIixcbiAgYWRkcmVzczI6IFwiQWRkcmVzcyAyXCIsXG4gIGFkZHJlc3MzOiBcIkFkZHJlc3MgM1wiLFxuICBjaXR5OiBcIkNpdHkgLyBUb3duXCIsXG4gIHN0YXRlOiBcIlN0YXRlIC8gUHJvdmluY2VcIixcbiAgcG9zdGFsQ29kZTogXCJaaXAgLyBQb3N0YWwgY29kZVwiLFxuICBjb3VudHJ5OiBcIkNvdW50cnlcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfVE9fTEFCRUw6IFJlY29yZDxJdGVtVHlwZSwgc3RyaW5nPiA9IHtcbiAgW0l0ZW1UeXBlLkxPR0lOXTogXCJMb2dpblwiLFxuICBbSXRlbVR5cGUuQ0FSRF06IFwiQ2FyZFwiLFxuICBbSXRlbVR5cGUuSURFTlRJVFldOiBcIklkZW50aXR5XCIsXG4gIFtJdGVtVHlwZS5OT1RFXTogXCJTZWN1cmUgTm90ZVwiLFxuICBbSXRlbVR5cGUuU1NIX0tFWV06IFwiU1NIIEtleVwiLFxufTtcbiIsICJleHBvcnQgY2xhc3MgTWFudWFsbHlUaHJvd25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhY2sgPSBzdGFjaztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGlzcGxheWFibGVFcnJvciBleHRlbmRzIE1hbnVhbGx5VGhyb3duRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgc3RhY2spO1xuICB9XG59XG5cbi8qIC0tIHNwZWNpZmljIGVycm9ycyBiZWxvdyAtLSAqL1xuXG5leHBvcnQgY2xhc3MgQ0xJTm90Rm91bmRFcnJvciBleHRlbmRzIERpc3BsYXlhYmxlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSA/PyBcIkJpdHdhcmRlbiBDTEkgbm90IGZvdW5kXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIkNMSU5vdEZvdW5kRXJyb3JcIjtcbiAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBEaXNwbGF5YWJsZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJCaXR3YXJkZW4gQ0xJIG5vdCBmb3VuZFwiLCBzdGFjayk7XG4gICAgdGhpcy5uYW1lID0gXCJJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yXCI7XG4gICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWlsZWRUb0xvYWRWYXVsdEl0ZW1zRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiRmFpbGVkIHRvIGxvYWQgdmF1bHQgaXRlbXNcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZhdWx0SXNMb2NrZWRFcnJvciBleHRlbmRzIERpc3BsYXlhYmxlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJWYXVsdCBpcyBsb2NrZWRcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiVmF1bHRJc0xvY2tlZEVycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdExvZ2dlZEluRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJOb3QgbG9nZ2VkIGluXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIk5vdExvZ2dlZEluRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW5zdXJlQ2xpQmluRXJyb3IgZXh0ZW5kcyBEaXNwbGF5YWJsZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiRmFpbGVkIGRvIGRvd25sb2FkIEJpdHdhcmRlbiBDTElcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiRW5zdXJlQ2xpQmluRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUHJlbWl1bUZlYXR1cmVFcnJvciBleHRlbmRzIE1hbnVhbGx5VGhyb3duRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJQcmVtaXVtIHN0YXR1cyBpcyByZXF1aXJlZCB0byB1c2UgdGhpcyBmZWF0dXJlXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlByZW1pdW1GZWF0dXJlRXJyb3JcIjtcbiAgfVxufVxuZXhwb3J0IGNsYXNzIFNlbmROZWVkc1Bhc3N3b3JkRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiVGhpcyBTZW5kIGhhcyBhIGlzIHByb3RlY3RlZCBieSBhIHBhc3N3b3JkXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlbmROZWVkc1Bhc3N3b3JkRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VuZEludmFsaWRQYXNzd29yZEVycm9yIGV4dGVuZHMgTWFudWFsbHlUaHJvd25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSA/PyBcIlRoZSBwYXNzd29yZCB5b3UgZW50ZXJlZCBpcyBpbnZhbGlkXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlbmRJbnZhbGlkUGFzc3dvcmRFcnJvclwiO1xuICB9XG59XG5cbi8qIC0tIGVycm9yIHV0aWxzIGJlbG93IC0tICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cnlFeGVjPFQ+KGZuOiAoKSA9PiBUKTogVCBleHRlbmRzIHZvaWQgPyBUIDogVCB8IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiB0cnlFeGVjPFQsIEY+KGZuOiAoKSA9PiBULCBmYWxsYmFja1ZhbHVlOiBGKTogVCB8IEY7XG5leHBvcnQgZnVuY3Rpb24gdHJ5RXhlYzxULCBGPihmbjogKCkgPT4gVCwgZmFsbGJhY2tWYWx1ZT86IEYpOiBUIHwgRiB8IHVuZGVmaW5lZCB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxsYmFja1ZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5YWJsZUVycm9yTWVzc2FnZShlcnJvcjogYW55KSB7XG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIERpc3BsYXlhYmxlRXJyb3IpIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0RXJyb3JTdHJpbmcgPSAoZXJyb3I6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICghZXJyb3IpIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBlcnJvcjtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIG5hbWUgfSA9IGVycm9yO1xuICAgIGlmIChlcnJvci5zdGFjaykgcmV0dXJuIGVycm9yLnN0YWNrO1xuICAgIHJldHVybiBgJHtuYW1lfTogJHttZXNzYWdlfWA7XG4gIH1cbiAgcmV0dXJuIFN0cmluZyhlcnJvcik7XG59O1xuXG5leHBvcnQgdHlwZSBTdWNjZXNzPFQ+ID0gW1QsIG51bGxdO1xuZXhwb3J0IHR5cGUgRmFpbHVyZTxFPiA9IFtudWxsLCBFXTtcbmV4cG9ydCB0eXBlIFJlc3VsdDxULCBFID0gRXJyb3I+ID0gU3VjY2VzczxUPiB8IEZhaWx1cmU8RT47XG5cbmV4cG9ydCBmdW5jdGlvbiBPazxUPihkYXRhOiBUKTogU3VjY2VzczxUPiB7XG4gIHJldHVybiBbZGF0YSwgbnVsbF07XG59XG5leHBvcnQgZnVuY3Rpb24gRXJyPEUgPSBFcnJvcj4oZXJyb3I6IEUpOiBGYWlsdXJlPEU+IHtcbiAgcmV0dXJuIFtudWxsLCBlcnJvcl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cnlDYXRjaDxULCBFID0gRXJyb3I+KGZuOiAoKSA9PiBUKTogUmVzdWx0PFQsIEU+O1xuZXhwb3J0IGZ1bmN0aW9uIHRyeUNhdGNoPFQsIEUgPSBFcnJvcj4ocHJvbWlzZTogUHJvbWlzZTxUPik6IFByb21pc2U8UmVzdWx0PFQsIEU+Pjtcbi8qKlxuICogRXhlY3V0ZXMgYSBmdW5jdGlvbiBvciBhIHByb21pc2Ugc2FmZWx5IGluc2lkZSBhIHRyeS9jYXRjaCBhbmRcbiAqIHJldHVybnMgYSBgUmVzdWx0YCAoYFtkYXRhLCBlcnJvcl1gKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeUNhdGNoPFQsIEUgPSBFcnJvcj4oZm5PclByb21pc2U6ICgoKSA9PiBUKSB8IFByb21pc2U8VD4pOiBNYXliZVByb21pc2U8UmVzdWx0PFQsIEU+PiB7XG4gIGlmICh0eXBlb2YgZm5PclByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gT2soZm5PclByb21pc2UoKSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmV0dXJuIEVycihlcnJvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBmbk9yUHJvbWlzZS50aGVuKChkYXRhKSA9PiBPayhkYXRhKSkuY2F0Y2goKGVycm9yKSA9PiBFcnIoZXJyb3IpKTtcbn1cbiIsICJpbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMsIHN0YXRTeW5jLCB1bmxpbmtTeW5jIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgeyByZWFkZGlyLCB1bmxpbmsgfSBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHN0cmVhbVppcCBmcm9tIFwibm9kZS1zdHJlYW0temlwXCI7XG5pbXBvcnQgeyB0cnlFeGVjIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yRmlsZUF2YWlsYWJsZShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcmV0dXJuO1xuICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0U3luYyhwYXRoKTtcbiAgICAgIGlmIChzdGF0cy5pc0ZpbGUoKSkge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0sIDMwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmlsZSAke3BhdGh9IG5vdCBmb3VuZC5gKSk7XG4gICAgfSwgNTAwMCk7XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjb21wcmVzc0ZpbGUoZmlsZVBhdGg6IHN0cmluZywgdGFyZ2V0UGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHppcCA9IG5ldyBzdHJlYW1aaXAuYXN5bmMoeyBmaWxlOiBmaWxlUGF0aCB9KTtcbiAgaWYgKCFleGlzdHNTeW5jKHRhcmdldFBhdGgpKSBta2RpclN5bmModGFyZ2V0UGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIGF3YWl0IHppcC5leHRyYWN0KG51bGwsIHRhcmdldFBhdGgpO1xuICBhd2FpdCB6aXAuY2xvc2UoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZpbGVzVGhhdFN0YXJ0V2l0aChzdGFydGluZ1dpdGg6IHN0cmluZywgcGF0aDogc3RyaW5nKSB7XG4gIGxldCByZW1vdmVkQXRMZWFzdE9uZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgcmVhZGRpcihwYXRoKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmICghZmlsZS5zdGFydHNXaXRoKHN0YXJ0aW5nV2l0aCkpIGNvbnRpbnVlO1xuICAgICAgYXdhaXQgdHJ5RXhlYyhhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHVubGluayhqb2luKHBhdGgsIGZpbGUpKTtcbiAgICAgICAgcmVtb3ZlZEF0TGVhc3RPbmUgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHJlbW92ZWRBdExlYXN0T25lO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubGlua0FsbFN5bmMoLi4ucGF0aHM6IHN0cmluZ1tdKSB7XG4gIGZvciAoY29uc3QgcGF0aCBvZiBwYXRocykge1xuICAgIHRyeUV4ZWMoKCkgPT4gdW5saW5rU3luYyhwYXRoKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVXcml0ZVN0cmVhbSwgdW5saW5rIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IGh0dHBzIGZyb20gXCJodHRwc1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBnZXRGaWxlU2hhMjU2IH0gZnJvbSBcIn4vdXRpbHMvY3J5cHRvXCI7XG5pbXBvcnQgeyB3YWl0Rm9yRmlsZUF2YWlsYWJsZSB9IGZyb20gXCJ+L3V0aWxzL2ZzXCI7XG5cbnR5cGUgRG93bmxvYWRPcHRpb25zID0ge1xuICBvblByb2dyZXNzPzogKHBlcmNlbnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgc2hhMjU2Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkKHVybDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBEb3dubG9hZE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBvblByb2dyZXNzLCBzaGEyNTYgfSA9IG9wdGlvbnMgPz8ge307XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCB1cmkgPSBuZXcgVVJMKHVybCk7XG4gICAgY29uc3QgcHJvdG9jb2wgPSB1cmkucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIgPyBodHRwcyA6IGh0dHA7XG5cbiAgICBsZXQgcmVkaXJlY3RDb3VudCA9IDA7XG4gICAgY29uc3QgcmVxdWVzdCA9IHByb3RvY29sLmdldCh1cmkuaHJlZiwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAmJiByZXNwb25zZS5zdGF0dXNDb2RlID49IDMwMCAmJiByZXNwb25zZS5zdGF0dXNDb2RlIDwgNDAwKSB7XG4gICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICByZXNwb25zZS5kZXN0cm95KCk7XG5cbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSByZXNwb25zZS5oZWFkZXJzLmxvY2F0aW9uO1xuICAgICAgICBpZiAoIXJlZGlyZWN0VXJsKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVkaXJlY3QgcmVzcG9uc2Ugd2l0aG91dCBsb2NhdGlvbiBoZWFkZXJgKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCsrcmVkaXJlY3RDb3VudCA+PSAxMCkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJUb28gbWFueSByZWRpcmVjdHNcIikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvd25sb2FkKHJlZGlyZWN0VXJsLCBwYXRoLCBvcHRpb25zKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDIwMCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBSZXNwb25zZSBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXNDb2RlfTogJHtyZXNwb25zZS5zdGF0dXNNZXNzYWdlfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlU2l6ZSA9IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnNbXCJjb250ZW50LWxlbmd0aFwiXSB8fCBcIjBcIiwgMTApO1xuICAgICAgaWYgKGZpbGVTaXplID09PSAwKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIGZpbGUgc2l6ZVwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsZVN0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKHBhdGgsIHsgYXV0b0Nsb3NlOiB0cnVlIH0pO1xuICAgICAgbGV0IGRvd25sb2FkZWRCeXRlcyA9IDA7XG5cbiAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICByZXNwb25zZS5kZXN0cm95KCk7XG4gICAgICAgIGZpbGVTdHJlYW0uY2xvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNsZWFudXBBbmRSZWplY3QgPSAoZXJyb3I/OiBFcnJvcikgPT4ge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9O1xuXG4gICAgICByZXNwb25zZS5vbihcImRhdGFcIiwgKGNodW5rKSA9PiB7XG4gICAgICAgIGRvd25sb2FkZWRCeXRlcyArPSBjaHVuay5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLmZsb29yKChkb3dubG9hZGVkQnl0ZXMgLyBmaWxlU2l6ZSkgKiAxMDApO1xuICAgICAgICBvblByb2dyZXNzPy4ocGVyY2VudCk7XG4gICAgICB9KTtcblxuICAgICAgZmlsZVN0cmVhbS5vbihcImZpbmlzaFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgd2FpdEZvckZpbGVBdmFpbGFibGUocGF0aCk7XG4gICAgICAgICAgaWYgKHNoYTI1NikgYXdhaXQgd2FpdEZvckhhc2hUb01hdGNoKHBhdGgsIHNoYTI1Nik7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZmlsZVN0cmVhbS5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGBGaWxlIHN0cmVhbSBlcnJvciB3aGlsZSBkb3dubG9hZGluZyAke3VybH1gLCBlcnJvcik7XG4gICAgICAgIHVubGluayhwYXRoLCAoKSA9PiBjbGVhbnVwQW5kUmVqZWN0KGVycm9yKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVzcG9uc2Uub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihgUmVzcG9uc2UgZXJyb3Igd2hpbGUgZG93bmxvYWRpbmcgJHt1cmx9YCwgZXJyb3IpO1xuICAgICAgICB1bmxpbmsocGF0aCwgKCkgPT4gY2xlYW51cEFuZFJlamVjdChlcnJvcikpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihgUmVxdWVzdCBlcnJvciB3aGlsZSBkb3dubG9hZGluZyAke3VybH1gLCBlcnJvcik7XG4gICAgICAgIHVubGluayhwYXRoLCAoKSA9PiBjbGVhbnVwQW5kUmVqZWN0KGVycm9yKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVzcG9uc2UucGlwZShmaWxlU3RyZWFtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHdhaXRGb3JIYXNoVG9NYXRjaChwYXRoOiBzdHJpbmcsIHNoYTI1Njogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgZmlsZVNoYSA9IGdldEZpbGVTaGEyNTYocGF0aCk7XG4gICAgaWYgKCFmaWxlU2hhKSByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihgQ291bGQgbm90IGdlbmVyYXRlIGhhc2ggZm9yIGZpbGUgJHtwYXRofS5gKSk7XG4gICAgaWYgKGZpbGVTaGEgPT09IHNoYTI1NikgcmV0dXJuIHJlc29sdmUoKTtcblxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKGdldEZpbGVTaGEyNTYocGF0aCkgPT09IHNoYTI1Nikge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0sIDEwMDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYEhhc2ggZGlkIG5vdCBtYXRjaCwgZXhwZWN0ZWQgJHtzaGEyNTYuc3Vic3RyaW5nKDAsIDcpfSwgZ290ICR7ZmlsZVNoYS5zdWJzdHJpbmcoMCwgNyl9LmApKTtcbiAgICB9LCA1MDAwKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBnZXRFcnJvclN0cmluZyB9IGZyb20gXCJ+L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiBhcyBjYXB0dXJlRXhjZXB0aW9uUmF5Y2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxudHlwZSBMb2cgPSB7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZXJyb3I6IGFueTtcbn07XG5cbmNvbnN0IF9leGNlcHRpb25zID0ge1xuICBsb2dzOiBuZXcgTWFwPERhdGUsIExvZz4oKSxcbiAgc2V0OiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSk6IHZvaWQgPT4ge1xuICAgIGNhcHR1cmVkRXhjZXB0aW9ucy5sb2dzLnNldChuZXcgRGF0ZSgpLCB7IG1lc3NhZ2UsIGVycm9yIH0pO1xuICB9LFxuICBjbGVhcjogKCk6IHZvaWQgPT4gY2FwdHVyZWRFeGNlcHRpb25zLmxvZ3MuY2xlYXIoKSxcbiAgdG9TdHJpbmc6ICgpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGNhcHR1cmVkRXhjZXB0aW9ucy5sb2dzLmZvckVhY2goKGxvZywgZGF0ZSkgPT4ge1xuICAgICAgaWYgKHN0ci5sZW5ndGggPiAwKSBzdHIgKz0gXCJcXG5cXG5cIjtcbiAgICAgIHN0ciArPSBgWyR7ZGF0ZS50b0lTT1N0cmluZygpfV0gJHtsb2cubWVzc2FnZX1gO1xuICAgICAgaWYgKGxvZy5lcnJvcikgc3RyICs9IGA6ICR7Z2V0RXJyb3JTdHJpbmcobG9nLmVycm9yKX1gO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0cjtcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBjYXB0dXJlZEV4Y2VwdGlvbnMgPSBPYmplY3QuZnJlZXplKF9leGNlcHRpb25zKTtcblxudHlwZSBDYXB0dXJlRXhjZXB0aW9uT3B0aW9ucyA9IHtcbiAgY2FwdHVyZVRvUmF5Y2FzdD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY29uc3QgY2FwdHVyZUV4Y2VwdGlvbiA9IChcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IEZhbHN5IHwgKHN0cmluZyB8IEZhbHN5KVtdLFxuICBlcnJvcjogYW55LFxuICBvcHRpb25zPzogQ2FwdHVyZUV4Y2VwdGlvbk9wdGlvbnNcbikgPT4ge1xuICBjb25zdCB7IGNhcHR1cmVUb1JheWNhc3QgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgY29uc3QgZGVzYyA9IEFycmF5LmlzQXJyYXkoZGVzY3JpcHRpb24pID8gZGVzY3JpcHRpb24uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpIDogZGVzY3JpcHRpb24gfHwgXCJDYXB0dXJlZCBleGNlcHRpb25cIjtcbiAgY2FwdHVyZWRFeGNlcHRpb25zLnNldChkZXNjLCBlcnJvcik7XG4gIGlmIChlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSB7XG4gICAgY29uc29sZS5lcnJvcihkZXNjLCBlcnJvcik7XG4gIH0gZWxzZSBpZiAoY2FwdHVyZVRvUmF5Y2FzdCkge1xuICAgIGNhcHR1cmVFeGNlcHRpb25SYXljYXN0KGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlYnVnTG9nID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gIGlmICghZW52aXJvbm1lbnQuaXNEZXZlbG9wbWVudCkgcmV0dXJuO1xuICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpO1xufTtcbiIsICJpbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlU2hhMjU2KGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY3JlYXRlSGFzaChcInNoYTI1NlwiKS51cGRhdGUocmVhZEZpbGVTeW5jKGZpbGVQYXRoKSkuZGlnZXN0KFwiaGV4XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgU2VuZENyZWF0ZVBheWxvYWQgfSBmcm9tIFwifi90eXBlcy9zZW5kXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlU2VuZFBheWxvYWQodGVtcGxhdGU6IFNlbmRDcmVhdGVQYXlsb2FkLCB2YWx1ZXM6IFNlbmRDcmVhdGVQYXlsb2FkKTogU2VuZENyZWF0ZVBheWxvYWQge1xuICByZXR1cm4ge1xuICAgIC4uLnRlbXBsYXRlLFxuICAgIC4uLnZhbHVlcyxcbiAgICBmaWxlOiB2YWx1ZXMuZmlsZSA/IHsgLi4udGVtcGxhdGUuZmlsZSwgLi4udmFsdWVzLmZpbGUgfSA6IHRlbXBsYXRlLmZpbGUsXG4gICAgdGV4dDogdmFsdWVzLnRleHQgPyB7IC4uLnRlbXBsYXRlLnRleHQsIC4uLnZhbHVlcy50ZXh0IH0gOiB0ZW1wbGF0ZS50ZXh0LFxuICB9O1xufVxuIiwgImltcG9ydCB7IENhY2hlIGFzIFJheWNhc3RDYWNoZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IENhY2hlID0gbmV3IFJheWNhc3RDYWNoZSh7IG5hbWVzcGFjZTogXCJidy1jYWNoZVwiIH0pO1xuIiwgImV4cG9ydCBjb25zdCBwbGF0Zm9ybSA9IHByb2Nlc3MucGxhdGZvcm0gPT09IFwiZGFyd2luXCIgPyBcIm1hY29zXCIgOiBcIndpbmRvd3NcIjtcbiIsICJpbXBvcnQgeyBGb3JtIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuXG5leHBvcnQgY29uc3QgTG9hZGluZ0ZhbGxiYWNrID0gKCkgPT4gPEZvcm0gaXNMb2FkaW5nIC8+O1xuIiwgImltcG9ydCB7IEVmZmVjdENhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuXG50eXBlIEFzeW5jRWZmZWN0Q2FsbGJhY2sgPSAoKSA9PiBQcm9taXNlPGFueT47XG50eXBlIEVmZmVjdCA9IEVmZmVjdENhbGxiYWNrIHwgQXN5bmNFZmZlY3RDYWxsYmFjaztcblxudHlwZSBEZWZpbmVkVmFsdWUgPSBudWxsIHwgYm9vbGVhbiB8IG51bWJlciB8IHN0cmluZyB8IG9iamVjdCB8IHN5bWJvbDtcblxuLyoqIGB1c2VFZmZlY3RgIHRoYXQgb25seSBydW5zIG9uY2UgYWZ0ZXIgdGhlIGBjb25kaXRpb25gIGlzIG1ldCAqL1xuZnVuY3Rpb24gdXNlT25jZUVmZmVjdChlZmZlY3Q6IEVmZmVjdCwgY29uZGl0aW9uPzogRGVmaW5lZFZhbHVlKSB7XG4gIGNvbnN0IGhhc1J1biA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaGFzUnVuLmN1cnJlbnQpIHJldHVybjtcbiAgICBpZiAoY29uZGl0aW9uICE9PSB1bmRlZmluZWQgJiYgIWNvbmRpdGlvbikgcmV0dXJuO1xuICAgIGhhc1J1bi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB2b2lkIGVmZmVjdCgpO1xuICB9LCBbY29uZGl0aW9uXSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZU9uY2VFZmZlY3Q7XG4iLCAiZXhwb3J0IHR5cGUgT2JqZWN0RW50cmllczxPYmo+ID0geyBbS2V5IGluIGtleW9mIE9ial06IFtLZXksIE9ialtLZXldXSB9W2tleW9mIE9ial1bXTtcblxuLyoqIGBPYmplY3QuZW50cmllc2Agd2l0aCB0eXBlZCBrZXlzICovXG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0RW50cmllczxUIGV4dGVuZHMgb2JqZWN0PihvYmo6IFQpIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iaikgYXMgT2JqZWN0RW50cmllczxUPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KG9iajogdW5rbm93bik6IG9iaiBpcyBvYmplY3Qge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbiIsICJpbXBvcnQgeyBFeGVjYUVycm9yIH0gZnJvbSBcImV4ZWNhXCI7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gXCJ+L3V0aWxzL29iamVjdHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRyZWF0RXJyb3IoZXJyb3I6IHVua25vd24sIG9wdGlvbnM/OiB7IG9taXRTZW5zaXRpdmVWYWx1ZTogc3RyaW5nIH0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBleGVjYUVycm9yID0gZXJyb3IgYXMgRXhlY2FFcnJvcjtcbiAgICBsZXQgZXJyb3JTdHJpbmc6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAoZXhlY2FFcnJvcj8uc3RkZXJyKSB7XG4gICAgICBlcnJvclN0cmluZyA9IGV4ZWNhRXJyb3Iuc3RkZXJyO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZXJyb3JTdHJpbmcgPSBgJHtlcnJvci5uYW1lfTogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChlcnJvcikpIHtcbiAgICAgIGVycm9yU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvclN0cmluZyA9IGAke2Vycm9yfWA7XG4gICAgfVxuXG4gICAgaWYgKCFlcnJvclN0cmluZykgcmV0dXJuIFwiXCI7XG4gICAgaWYgKCFvcHRpb25zPy5vbWl0U2Vuc2l0aXZlVmFsdWUpIHJldHVybiBlcnJvclN0cmluZztcblxuICAgIHJldHVybiBvbWl0U2Vuc2l0aXZlVmFsdWVGcm9tU3RyaW5nKGVycm9yU3RyaW5nLCBvcHRpb25zLm9taXRTZW5zaXRpdmVWYWx1ZSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbWl0U2Vuc2l0aXZlVmFsdWVGcm9tU3RyaW5nKHZhbHVlOiBzdHJpbmcsIHNlbnNpdGl2ZVZhbHVlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChzZW5zaXRpdmVWYWx1ZSwgXCJpXCIpLCBcIltSRURBQ1RFRF1cIik7XG59XG4iLCAiaW1wb3J0IHsgQWxlcnQsIGNsb3NlTWFpbldpbmRvdywgY29uZmlybUFsZXJ0LCBJY29uLCBwb3BUb1Jvb3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VCaXR3YXJkZW4gfSBmcm9tIFwifi9jb250ZXh0L2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgVmF1bHRTdGF0ZSB9IGZyb20gXCJ+L3R5cGVzL2dlbmVyYWxcIjtcbmltcG9ydCB7IGdldFNlcnZlclVybFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG5mdW5jdGlvbiB1c2VWYXVsdE1lc3NhZ2VzKCkge1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3QgW3ZhdWx0U3RhdGUsIHNldFZhdWx0U3RhdGVdID0gdXNlU3RhdGU8VmF1bHRTdGF0ZSB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdm9pZCBiaXR3YXJkZW5cbiAgICAgIC5zdGF0dXMoKVxuICAgICAgLnRoZW4oKHsgZXJyb3IsIHJlc3VsdCB9KSA9PiB7XG4gICAgICAgIGlmICghZXJyb3IpIHNldFZhdWx0U3RhdGUocmVzdWx0KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvKiBpZ25vcmUgKi9cbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2hvdWxkU2hvd1NlcnZlciA9ICEhZ2V0U2VydmVyVXJsUHJlZmVyZW5jZSgpO1xuXG4gIGxldCB1c2VyTWVzc2FnZSA9IFwiLi4uXCI7XG4gIGxldCBzZXJ2ZXJNZXNzYWdlID0gXCIuLi5cIjtcblxuICBpZiAodmF1bHRTdGF0ZSkge1xuICAgIGNvbnN0IHsgc3RhdHVzLCB1c2VyRW1haWwsIHNlcnZlclVybCB9ID0gdmF1bHRTdGF0ZTtcbiAgICB1c2VyTWVzc2FnZSA9IHN0YXR1cyA9PSBcInVuYXV0aGVudGljYXRlZFwiID8gXCJcdTI3NEMgTG9nZ2VkIG91dFwiIDogYFx1RDgzRFx1REQxMiBMb2NrZWQgKCR7dXNlckVtYWlsfSlgO1xuICAgIGlmIChzZXJ2ZXJVcmwpIHtcbiAgICAgIHNlcnZlck1lc3NhZ2UgPSBzZXJ2ZXJVcmwgfHwgXCJcIjtcbiAgICB9IGVsc2UgaWYgKCghc2VydmVyVXJsICYmIHNob3VsZFNob3dTZXJ2ZXIpIHx8IChzZXJ2ZXJVcmwgJiYgIXNob3VsZFNob3dTZXJ2ZXIpKSB7XG4gICAgICAvLyBIb3N0ZWQgc3RhdGUgbm90IGluIHN5bmMgd2l0aCBDTEkgKHdlIGRvbid0IGNoZWNrIGZvciBlcXVhbGl0eSlcbiAgICAgIHZvaWQgY29uZmlybUFsZXJ0KHtcbiAgICAgICAgaWNvbjogSWNvbi5FeGNsYW1hdGlvbk1hcmssXG4gICAgICAgIHRpdGxlOiBcIlJlc3RhcnQgUmVxdWlyZWRcIixcbiAgICAgICAgbWVzc2FnZTogXCJCaXR3YXJkZW4gc2VydmVyIFVSTCBwcmVmZXJlbmNlIGhhcyBiZWVuIGNoYW5nZWQgc2luY2UgdGhlIGV4dGVuc2lvbiB3YXMgb3BlbmVkLlwiLFxuICAgICAgICBwcmltYXJ5QWN0aW9uOiB7XG4gICAgICAgICAgdGl0bGU6IFwiQ2xvc2UgRXh0ZW5zaW9uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGRpc21pc3NBY3Rpb246IHtcbiAgICAgICAgICB0aXRsZTogXCJDbG9zZSBSYXljYXN0XCIsIC8vIE9ubHkgaGVyZSB0byBwcm92aWRlIHRoZSBuZWNlc3Nhcnkgc2Vjb25kIG9wdGlvblxuICAgICAgICAgIHN0eWxlOiBBbGVydC5BY3Rpb25TdHlsZS5DYW5jZWwsXG4gICAgICAgIH0sXG4gICAgICB9KS50aGVuKChjbG9zZUV4dGVuc2lvbikgPT4ge1xuICAgICAgICBpZiAoY2xvc2VFeHRlbnNpb24pIHtcbiAgICAgICAgICB2b2lkIHBvcFRvUm9vdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvaWQgY2xvc2VNYWluV2luZG93KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHVzZXJNZXNzYWdlLCBzZXJ2ZXJNZXNzYWdlLCBzaG91bGRTaG93U2VydmVyIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVZhdWx0TWVzc2FnZXM7XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuXG50eXBlIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zID0ge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIHNldDogKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHJlbW92ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn07XG5cbi8qKiBSZWFkIGFuZCBtYW5hZ2UgYSBzaW5nbGUgaXRlbSBpbiBMb2NhbFN0b3JhZ2UuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTG9jYWxTdG9yYWdlSXRlbShrZXk6IHN0cmluZyk6IFtzdHJpbmcgfCB1bmRlZmluZWQsIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IFtzdHJpbmcsIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhOiB2YWx1ZSwgcmV2YWxpZGF0ZSwgaXNMb2FkaW5nIH0gPSB1c2VQcm9taXNlKCgpID0+IExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oa2V5KSk7XG5cbiAgY29uc3Qgc2V0ID0gYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBhd2FpdCBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICBhd2FpdCByZXZhbGlkYXRlKCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgYXdhaXQgcmV2YWxpZGF0ZSgpO1xuICB9O1xuXG4gIHJldHVybiBbdmFsdWUgPz8gZGVmYXVsdFZhbHVlLCB7IGlzTG9hZGluZywgc2V0LCByZW1vdmUgfV0gYXMgY29uc3Q7XG59XG4iLCAiaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IFZhdWx0TG9hZGluZ0ZhbGxiYWNrID0gKCkgPT4gPExpc3Qgc2VhcmNoQmFyUGxhY2Vob2xkZXI9XCJTZWFyY2ggdmF1bHRcIiBpc0xvYWRpbmcgLz47XG4iLCAiaW1wb3J0IHsgdXNlUmVkdWNlciB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgU2Vzc2lvblN0YXRlIH0gZnJvbSBcIn4vdHlwZXMvc2Vzc2lvblwiO1xuXG5jb25zdCBpbml0aWFsU3RhdGU6IFNlc3Npb25TdGF0ZSA9IHtcbiAgdG9rZW46IHVuZGVmaW5lZCxcbiAgcGFzc3dvcmRIYXNoOiB1bmRlZmluZWQsXG5cbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBpc0xvY2tlZDogZmFsc2UsXG4gIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG59O1xuXG50eXBlIFNlc3Npb25SZWR1Y2VyQWN0aW9ucyA9XG4gIHwgKHsgdHlwZTogXCJsb2FkU3RhdGVcIiB9ICYgUGFydGlhbDxPbWl0PFNlc3Npb25TdGF0ZSwgXCJpc0xvYWRpbmdcIiB8IFwiaXNMb2NrZWRcIiB8IFwiaXNBdXRoZW50aWNhdGVkXCI+PilcbiAgfCB7IHR5cGU6IFwibG9ja1wiIH1cbiAgfCAoeyB0eXBlOiBcInVubG9ja1wiIH0gJiBQaWNrPFNlc3Npb25TdGF0ZSwgXCJ0b2tlblwiIHwgXCJwYXNzd29yZEhhc2hcIj4pXG4gIHwgeyB0eXBlOiBcImxvZ291dFwiIH1cbiAgfCB7IHR5cGU6IFwidmF1bHRUaW1lb3V0XCIgfVxuICB8IHsgdHlwZTogXCJmaW5pc2hMb2FkaW5nU2F2ZWRTdGF0ZVwiIH1cbiAgfCB7IHR5cGU6IFwiZmFpbExvYWRpbmdTYXZlZFN0YXRlXCIgfTtcblxuZXhwb3J0IGNvbnN0IHVzZVNlc3Npb25SZWR1Y2VyID0gKCkgPT4ge1xuICByZXR1cm4gdXNlUmVkdWNlcigoc3RhdGU6IFNlc3Npb25TdGF0ZSwgYWN0aW9uOiBTZXNzaW9uUmVkdWNlckFjdGlvbnMpOiBTZXNzaW9uU3RhdGUgPT4ge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJsb2FkU3RhdGVcIjoge1xuICAgICAgICBjb25zdCB7IHR5cGU6IF8sIC4uLmFjdGlvblBheWxvYWQgfSA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIC4uLmFjdGlvblBheWxvYWQgfTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJsb2NrXCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICB0b2tlbjogdW5kZWZpbmVkLFxuICAgICAgICAgIHBhc3N3b3JkSGFzaDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgaXNMb2NrZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwidW5sb2NrXCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICB0b2tlbjogYWN0aW9uLnRva2VuLFxuICAgICAgICAgIHBhc3N3b3JkSGFzaDogYWN0aW9uLnBhc3N3b3JkSGFzaCxcbiAgICAgICAgICBpc0xvY2tlZDogZmFsc2UsXG4gICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcImxvZ291dFwiOiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgdG9rZW46IHVuZGVmaW5lZCxcbiAgICAgICAgICBwYXNzd29yZEhhc2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwidmF1bHRUaW1lb3V0XCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaW5pc2hMb2FkaW5nU2F2ZWRTdGF0ZVwiOiB7XG4gICAgICAgIGlmICghc3RhdGUudG9rZW4gfHwgIXN0YXRlLnBhc3N3b3JkSGFzaCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiB0b2tlbiwgcGFzc3dvcmRIYXNoXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGFzVG9rZW4gPSAhIXN0YXRlLnRva2VuO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgaXNMb2NrZWQ6ICFoYXNUb2tlbixcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGhhc1Rva2VuLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZhaWxMb2FkaW5nU2F2ZWRTdGF0ZVwiOiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgaW5pdGlhbFN0YXRlKTtcbn07XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgTE9DQUxfU1RPUkFHRV9LRVkgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgZXhlYyBhcyBjYWxsYmFja0V4ZWMsIFByb21pc2VXaXRoQ2hpbGQgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSBcInV0aWxcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24sIGRlYnVnTG9nIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcblxuY29uc3QgZXhlYyA9IHByb21pc2lmeShjYWxsYmFja0V4ZWMpO1xuXG5leHBvcnQgY29uc3QgU2Vzc2lvblN0b3JhZ2UgPSB7XG4gIGdldFNhdmVkU2Vzc2lvbjogKCkgPT4ge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KExPQ0FMX1NUT1JBR0VfS0VZLlNFU1NJT05fVE9LRU4pLFxuICAgICAgTG9jYWxTdG9yYWdlLmdldEl0ZW08c3RyaW5nPihMT0NBTF9TVE9SQUdFX0tFWS5SRVBST01QVF9IQVNIKSxcbiAgICAgIExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuTEFTVF9BQ1RJVklUWV9USU1FKSxcbiAgICAgIExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTEFTVF9TVEFUVVMpLFxuICAgIF0pO1xuICB9LFxuICBjbGVhclNlc3Npb246IGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5TRVNTSU9OX1RPS0VOKSxcbiAgICAgIExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlJFUFJPTVBUX0hBU0gpLFxuICAgIF0pO1xuICB9LFxuICBzYXZlU2Vzc2lvbjogYXN5bmMgKHRva2VuOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSA9PiB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuU0VTU0lPTl9UT0tFTiwgdG9rZW4pLFxuICAgICAgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuUkVQUk9NUFRfSEFTSCwgcGFzc3dvcmRIYXNoKSxcbiAgICBdKTtcbiAgfSxcbiAgbG9nb3V0Q2xlYXJTZXNzaW9uOiBhc3luYyAoKSA9PiB7XG4gICAgLy8gY2xlYXIgZXZlcnl0aGluZyByZWxhdGVkIHRvIHRoZSBzZXNzaW9uXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgTG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuU0VTU0lPTl9UT0tFTiksXG4gICAgICBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5SRVBST01QVF9IQVNIKSxcbiAgICAgIExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLkxBU1RfQUNUSVZJVFlfVElNRSksXG4gICAgXSk7XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgY2hlY2tTeXN0ZW1Mb2NrZWRTaW5jZUxhc3RBY2Nlc3MgPSAobGFzdEFjdGl2aXR5VGltZTogRGF0ZSkgPT4ge1xuICByZXR1cm4gY2hlY2tTeXN0ZW1Mb2dUaW1lQWZ0ZXIobGFzdEFjdGl2aXR5VGltZSwgKHRpbWU6IG51bWJlcikgPT4gZ2V0TGFzdFN5c2xvZyh0aW1lLCBcImhhbmRsZVVubG9ja1Jlc3VsdFwiKSk7XG59O1xuZXhwb3J0IGNvbnN0IGNoZWNrU3lzdGVtU2xlcHRTaW5jZUxhc3RBY2Nlc3MgPSAobGFzdEFjdGl2aXR5VGltZTogRGF0ZSkgPT4ge1xuICByZXR1cm4gY2hlY2tTeXN0ZW1Mb2dUaW1lQWZ0ZXIobGFzdEFjdGl2aXR5VGltZSwgKHRpbWU6IG51bWJlcikgPT4gZ2V0TGFzdFN5c2xvZyh0aW1lLCBcInNsZWVwIDBcIikpO1xufTtcblxuZnVuY3Rpb24gZ2V0TGFzdFN5c2xvZyhob3VyczogbnVtYmVyLCBmaWx0ZXI6IHN0cmluZykge1xuICByZXR1cm4gZXhlYyhcbiAgICBgbG9nIHNob3cgLS1zdHlsZSBzeXNsb2cgLS1wcmVkaWNhdGUgXCJwcm9jZXNzID09ICdsb2dpbndpbmRvdydcIiAtLWluZm8gLS1sYXN0ICR7aG91cnN9aCB8IGdyZXAgXCIke2ZpbHRlcn1cIiB8IHRhaWwgLW4gMWBcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrU3lzdGVtTG9nVGltZUFmdGVyKFxuICB0aW1lOiBEYXRlLFxuICBnZXRMb2dFbnRyeTogKHRpbWVTcGFuSG91cnM6IG51bWJlcikgPT4gUHJvbWlzZVdpdGhDaGlsZDx7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9PlxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IGxhc3RTY3JlZW5Mb2NrVGltZSA9IGF3YWl0IGdldFN5c3RlbUxvZ1RpbWUoZ2V0TG9nRW50cnkpO1xuICBpZiAoIWxhc3RTY3JlZW5Mb2NrVGltZSkgcmV0dXJuIHRydWU7IC8vIGFzc3VtZSB0aGF0IGxvZyB3YXMgZm91bmQgZm9yIGltcHJvdmVkIHNhZmV0eVxuICByZXR1cm4gbmV3IERhdGUobGFzdFNjcmVlbkxvY2tUaW1lKS5nZXRUaW1lKCkgPiB0aW1lLmdldFRpbWUoKTtcbn1cblxuY29uc3QgZ2V0U3lzdGVtTG9nVGltZV9JTkNSRU1FTlRfSE9VUlMgPSAyO1xuY29uc3QgZ2V0U3lzdGVtTG9nVGltZV9NQVhfUkVUUklFUyA9IDU7XG4vKipcbiAqIFN0YXJ0cyBieSBjaGVja2luZyB0aGUgbGFzdCBob3VyIGFuZCBpbmNyZWFzZXMgdGhlIHRpbWUgc3BhbiBieSB7QGxpbmsgZ2V0U3lzdGVtTG9nVGltZV9JTkNSRU1FTlRfSE9VUlN9IGhvdXJzIG9uIGVhY2ggcmV0cnkuXG4gKiBcdTI2QTBcdUZFMEYgQ2FsbHMgdG8gdGhlIHN5c3RlbSBsb2cgYXJlIHZlcnkgc2xvdywgYW5kIGlmIHRoZSBzY3JlZW4gaGFzbid0IGJlZW4gbG9ja2VkIGZvciBzb21lIGhvdXJzLCBpdCBnZXRzIHNsb3dlci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0U3lzdGVtTG9nVGltZShcbiAgZ2V0TG9nRW50cnk6ICh0aW1lU3BhbkhvdXJzOiBudW1iZXIpID0+IFByb21pc2VXaXRoQ2hpbGQ8eyBzdGRvdXQ6IHN0cmluZzsgc3RkZXJyOiBzdHJpbmcgfT4sXG4gIHRpbWVTcGFuSG91cnMgPSAxLFxuICByZXRyeUF0dGVtcHQgPSAwXG4pOiBQcm9taXNlPERhdGUgfCB1bmRlZmluZWQ+IHtcbiAgdHJ5IHtcbiAgICBpZiAocmV0cnlBdHRlbXB0ID4gZ2V0U3lzdGVtTG9nVGltZV9NQVhfUkVUUklFUykge1xuICAgICAgZGVidWdMb2coXCJNYXggcmV0cnkgYXR0ZW1wdHMgcmVhY2hlZCB0byBnZXQgbGFzdCBzY3JlZW4gbG9jayB0aW1lXCIpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgZ2V0TG9nRW50cnkodGltZVNwYW5Ib3Vycyk7XG4gICAgY29uc3QgW2xvZ0RhdGUsIGxvZ1RpbWVdID0gc3Rkb3V0Py5zcGxpdChcIiBcIikgPz8gW107XG4gICAgaWYgKHN0ZGVyciB8fCAhbG9nRGF0ZSB8fCAhbG9nVGltZSkge1xuICAgICAgcmV0dXJuIGdldFN5c3RlbUxvZ1RpbWUoZ2V0TG9nRW50cnksIHRpbWVTcGFuSG91cnMgKyBnZXRTeXN0ZW1Mb2dUaW1lX0lOQ1JFTUVOVF9IT1VSUywgcmV0cnlBdHRlbXB0ICsgMSk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9nRnVsbERhdGUgPSBuZXcgRGF0ZShgJHtsb2dEYXRlfVQke2xvZ1RpbWV9YCk7XG4gICAgaWYgKCFsb2dGdWxsRGF0ZSB8fCBsb2dGdWxsRGF0ZS50b1N0cmluZygpID09PSBcIkludmFsaWQgRGF0ZVwiKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGxvZ0Z1bGxEYXRlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gZ2V0IGxhc3Qgc2NyZWVuIGxvY2sgdGltZVwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFjdGlvbiwgQ2xpcGJvYXJkLCBJY29uLCBUb2FzdCwgZW52aXJvbm1lbnQsIGdldFByZWZlcmVuY2VWYWx1ZXMsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHsgZXhlYyBhcyBleGVjV2l0aENhbGxiYWNrcyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwidXRpbFwiO1xuaW1wb3J0IHsgY2xpSW5mbyB9IGZyb20gXCJ+L2FwaS9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwifi91dGlscy9wbGF0Zm9ybVwiO1xuXG5jb25zdCBleGVjID0gcHJvbWlzaWZ5KGV4ZWNXaXRoQ2FsbGJhY2tzKTtcbmNvbnN0IHsgc3VwcG9ydFBhdGggfSA9IGVudmlyb25tZW50O1xuXG4vKiogc3RyaXAgb3V0IGFueSBzZW5zaXRpdmUgZGF0YSBmcm9tIHByZWZlcmVuY2VzICovXG5jb25zdCBnZXRTYWZlUHJlZmVyZW5jZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBjbGllbnRJZCxcbiAgICBjbGllbnRTZWNyZXQsXG4gICAgZmV0Y2hGYXZpY29ucyxcbiAgICBnZW5lcmF0ZVBhc3N3b3JkUXVpY2tBY3Rpb24sXG4gICAgcmVwcm9tcHRJZ25vcmVEdXJhdGlvbixcbiAgICBzZXJ2ZXJDZXJ0c1BhdGgsXG4gICAgc2VydmVyVXJsLFxuICAgIHNob3VsZENhY2hlVmF1bHRJdGVtcyxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZCxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrLFxuICAgIHRyYW5zaWVudENvcHlTZWFyY2gsXG4gICAgd2luZG93QWN0aW9uT25Db3B5LFxuICB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxBbGxQcmVmZXJlbmNlcz4oKTtcblxuICByZXR1cm4ge1xuICAgIGhhc19jbGllbnRJZDogISFjbGllbnRJZCxcbiAgICBoYXNfY2xpZW50U2VjcmV0OiAhIWNsaWVudFNlY3JldCxcbiAgICBmZXRjaEZhdmljb25zLFxuICAgIGdlbmVyYXRlUGFzc3dvcmRRdWlja0FjdGlvbixcbiAgICByZXByb21wdElnbm9yZUR1cmF0aW9uLFxuICAgIGhhc19zZXJ2ZXJDZXJ0c1BhdGg6ICEhc2VydmVyQ2VydHNQYXRoLFxuICAgIGhhc19zZXJ2ZXJVcmw6ICEhc2VydmVyVXJsLFxuICAgIHNob3VsZENhY2hlVmF1bHRJdGVtcyxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZCxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrLFxuICAgIHRyYW5zaWVudENvcHlTZWFyY2gsXG4gICAgd2luZG93QWN0aW9uT25Db3B5LFxuICB9O1xufTtcblxuY29uc3QgTkEgPSBcIk4vQVwiO1xuY29uc3QgdHJ5RXhlYyA9IGFzeW5jIChjb21tYW5kOiBzdHJpbmcsIHRyaW1MaW5lQnJlYWtzID0gdHJ1ZSkgPT4ge1xuICB0cnkge1xuICAgIGxldCBjbWQgPSBjb21tYW5kO1xuXG4gICAgaWYgKHBsYXRmb3JtID09PSBcIndpbmRvd3NcIikge1xuICAgICAgY21kID0gYHBvd2Vyc2hlbGwgLUNvbW1hbmQgXCIke2NvbW1hbmR9XCJgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbWQgPSBgUEFUSD1cIiRQQVRIOiR7ZGlybmFtZShwcm9jZXNzLmV4ZWNQYXRoKX1cIiAke2NvbW1hbmR9YDtcbiAgICB9XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IGV4ZWMoY21kLCB7IGVudjogeyBCSVRXQVJERU5DTElfQVBQREFUQV9ESVI6IHN1cHBvcnRQYXRoIH0gfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBzdGRvdXQudHJpbSgpO1xuICAgIGlmICh0cmltTGluZUJyZWFrcykgcmV0dXJuIHJlc3BvbnNlLnJlcGxhY2UoL1xcbnxcXHIvZywgXCJcIik7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhcHR1cmVFeGNlcHRpb24oYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZH1gLCBlcnJvcik7XG4gICAgcmV0dXJuIE5BO1xuICB9XG59O1xuXG5jb25zdCBnZXRCd0JpbkluZm8gPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpUGF0aFByZWYgPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzPigpLmNsaVBhdGg7XG4gICAgaWYgKGNsaVBhdGhQcmVmKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImN1c3RvbVwiLCBwYXRoOiBjbGlQYXRoUHJlZiB9O1xuICAgIH1cbiAgICBpZiAoY2xpSW5mby5wYXRoLmJpbiA9PT0gY2xpSW5mby5wYXRoLmRvd25sb2FkZWRCaW4pIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiZG93bmxvYWRlZFwiLCBwYXRoOiBjbGlJbmZvLnBhdGguZG93bmxvYWRlZEJpbiB9O1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcImluc3RhbGxlZFwiLCBwYXRoOiBjbGlJbmZvLnBhdGguaW5zdGFsbGVkQmluIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogTkEsIHBhdGg6IE5BIH07XG4gIH1cbn07XG5cbmNvbnN0IGdldEhvbWVicmV3SW5mbyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBsZXQgcGF0aCA9IFwiL29wdC9ob21lYnJldy9iaW4vYnJld1wiO1xuICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcGF0aCA9IFwiL3Vzci9sb2NhbC9iaW4vYnJld1wiO1xuICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcmV0dXJuIHsgYXJjaDogTkEsIHZlcnNpb246IE5BIH07XG5cbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0cnlFeGVjKGAke3BhdGh9IGNvbmZpZ2AsIGZhbHNlKTtcbiAgICBpZiAoY29uZmlnID09PSBOQSkgcmV0dXJuIHsgYXJjaDogTkEsIHZlcnNpb246IE5BIH07XG5cbiAgICBjb25zdCBhcmNoVmFsdWUgPSAvSE9NRUJSRVdfUFJFRklYOiAoLispLy5leGVjKGNvbmZpZyk/LlsxXSB8fCBOQTtcbiAgICBjb25zdCB2ZXJzaW9uID0gL0hPTUVCUkVXX1ZFUlNJT046ICguKykvLmV4ZWMoY29uZmlnKT8uWzFdIHx8IE5BO1xuICAgIGNvbnN0IGFyY2ggPSBhcmNoVmFsdWUgIT09IE5BID8gKGFyY2hWYWx1ZS5pbmNsdWRlcyhcIi9vcHQvaG9tZWJyZXdcIikgPyBcImFybTY0XCIgOiBcIng4Nl82NFwiKSA6IE5BO1xuXG4gICAgcmV0dXJuIHsgYXJjaCwgdmVyc2lvbiB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IGFyY2g6IE5BLCB2ZXJzaW9uOiBOQSB9O1xuICB9XG59O1xuXG5mdW5jdGlvbiBCdWdSZXBvcnRDb2xsZWN0RGF0YUFjdGlvbigpIHtcbiAgY29uc3QgY29sbGVjdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuQW5pbWF0ZWQsIFwiQ29sbGVjdGluZyBkYXRhLi4uXCIpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IGdldFNhZmVQcmVmZXJlbmNlcygpO1xuICAgICAgY29uc3QgYndJbmZvID0gZ2V0QndCaW5JbmZvKCk7XG4gICAgICBjb25zdCBbc3lzdGVtQXJjaCwgb3NWZXJzaW9uLCBvc0J1aWxkVmVyc2lvbiwgYndWZXJzaW9uXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgLi4uKHBsYXRmb3JtID09PSBcIm1hY29zXCJcbiAgICAgICAgICA/IFt0cnlFeGVjKFwidW5hbWUgLW1cIiksIHRyeUV4ZWMoXCJzd192ZXJzIC1wcm9kdWN0VmVyc2lvblwiKSwgdHJ5RXhlYyhcInN3X3ZlcnMgLWJ1aWxkVmVyc2lvblwiKV1cbiAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgdHJ5RXhlYyhcIihHZXQtQ2ltSW5zdGFuY2UgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5PU0FyY2hpdGVjdHVyZVwiKSxcbiAgICAgICAgICAgICAgdHJ5RXhlYyhcIihHZXQtQ2ltSW5zdGFuY2UgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5DYXB0aW9uXCIpLFxuICAgICAgICAgICAgICB0cnlFeGVjKFwiKEdldC1DaW1JbnN0YW5jZSBXaW4zMl9PcGVyYXRpbmdTeXN0ZW0pLlZlcnNpb25cIiksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgdHJ5RXhlYyhgJHtid0luZm8ucGF0aH0gLS12ZXJzaW9uYCksXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICAgICAgcmF5Y2FzdDoge1xuICAgICAgICAgIHZlcnNpb246IGVudmlyb25tZW50LnJheWNhc3RWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICBhcmNoOiBzeXN0ZW1BcmNoLFxuICAgICAgICAgIHZlcnNpb246IG9zVmVyc2lvbixcbiAgICAgICAgICBidWlsZFZlcnNpb246IG9zQnVpbGRWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBub2RlOiB7XG4gICAgICAgICAgYXJjaDogcHJvY2Vzcy5hcmNoLFxuICAgICAgICAgIHZlcnNpb246IHByb2Nlc3MudmVyc2lvbixcbiAgICAgICAgfSxcbiAgICAgICAgY2xpOiB7XG4gICAgICAgICAgdHlwZTogYndJbmZvLnR5cGUsXG4gICAgICAgICAgdmVyc2lvbjogYndWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBwcmVmZXJlbmNlcyxcbiAgICAgIH07XG5cbiAgICAgIGlmIChwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiKSB7XG4gICAgICAgIGNvbnN0IGJyZXdJbmZvID0gYXdhaXQgZ2V0SG9tZWJyZXdJbmZvKCk7XG4gICAgICAgIGRhdGEuaG9tZWJyZXcgPSB7XG4gICAgICAgICAgYXJjaDogYnJld0luZm8uYXJjaCxcbiAgICAgICAgICB2ZXJzaW9uOiBicmV3SW5mby52ZXJzaW9uLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBDbGlwYm9hcmQuY29weShKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XG4gICAgICB0b2FzdC5zdHlsZSA9IFRvYXN0LlN0eWxlLlN1Y2Nlc3M7XG4gICAgICB0b2FzdC50aXRsZSA9IFwiRGF0YSBjb3BpZWQgdG8gY2xpcGJvYXJkXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuRmFpbHVyZTtcbiAgICAgIHRvYXN0LnRpdGxlID0gXCJGYWlsZWQgdG8gY29sbGVjdCBidWcgcmVwb3J0IGRhdGFcIjtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29sbGVjdCBidWcgcmVwb3J0IGRhdGFcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gPEFjdGlvbiB0aXRsZT1cIkNvbGxlY3QgQnVnIFJlcG9ydCBEYXRhXCIgaWNvbj17SWNvbi5CdWd9IG9uQWN0aW9uPXtjb2xsZWN0RGF0YX0gLz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uO1xuIiwgImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IEJVR19SRVBPUlRfVVJMID1cbiAgXCJodHRwczovL2dpdGh1Yi5jb20vcmF5Y2FzdC9leHRlbnNpb25zL2lzc3Vlcy9uZXc/YXNzaWduZWVzPSZsYWJlbHM9ZXh0ZW5zaW9uJTJDYnVnJnRlbXBsYXRlPWV4dGVuc2lvbl9idWdfcmVwb3J0LnltbCZ0aXRsZT0lNUJCaXR3YXJkZW4lNUQrLi4uXCI7XG5cbmZ1bmN0aW9uIEJ1Z1JlcG9ydE9wZW5BY3Rpb24oKSB7XG4gIHJldHVybiA8QWN0aW9uLk9wZW5JbkJyb3dzZXIgdGl0bGU9XCJPcGVuIEJ1ZyBSZXBvcnRcIiB1cmw9e0JVR19SRVBPUlRfVVJMfSAvPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQnVnUmVwb3J0T3BlbkFjdGlvbjtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEFsZXJ0LCBDbGlwYm9hcmQsIEljb24sIFRvYXN0LCBjb25maXJtQWxlcnQsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGNhcHR1cmVkRXhjZXB0aW9ucyB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5cbmZ1bmN0aW9uIENvcHlSdW50aW1lRXJyb3JMb2coKSB7XG4gIGNvbnN0IGNvcHlFcnJvcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZXJyb3JTdHJpbmcgPSBjYXB0dXJlZEV4Y2VwdGlvbnMudG9TdHJpbmcoKTtcbiAgICBpZiAoZXJyb3JTdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gc2hvd1RvYXN0KFRvYXN0LlN0eWxlLlN1Y2Nlc3MsIFwiTm8gZXJyb3JzIHRvIGNvcHlcIik7XG4gICAgfVxuICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KGVycm9yU3RyaW5nKTtcbiAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuU3VjY2VzcywgXCJFcnJvcnMgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcbiAgICBhd2FpdCBjb25maXJtQWxlcnQoe1xuICAgICAgdGl0bGU6IFwiQmUgY2FyZWZ1bCB3aXRoIHRoaXMgaW5mb3JtYXRpb25cIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiUGxlYXNlIGJlIG1pbmRmdWwgb2Ygd2hlcmUgeW91IHNoYXJlIHRoaXMgZXJyb3IgbG9nLCBhcyBpdCBtYXkgY29udGFpbiBzZW5zaXRpdmUgaW5mb3JtYXRpb24uIEFsd2F5cyBhbmFseXplIGl0IGJlZm9yZSBzaGFyaW5nLlwiLFxuICAgICAgcHJpbWFyeUFjdGlvbjogeyB0aXRsZTogXCJHb3QgaXRcIiwgc3R5bGU6IEFsZXJ0LkFjdGlvblN0eWxlLkRlZmF1bHQgfSxcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBY3Rpb24gb25BY3Rpb249e2NvcHlFcnJvcnN9IHRpdGxlPVwiQ29weSBMYXN0IEVycm9yc1wiIGljb249e0ljb24uQ29weUNsaXBib2FyZH0gc3R5bGU9e0FjdGlvbi5TdHlsZS5SZWd1bGFyfSAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5UnVudGltZUVycm9yTG9nO1xuIiwgImltcG9ydCB7IEFjdGlvblBhbmVsIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgQnVnUmVwb3J0Q29sbGVjdERhdGFBY3Rpb24sIEJ1Z1JlcG9ydE9wZW5BY3Rpb24sIENvcHlSdW50aW1lRXJyb3JMb2cgfSBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnNcIjtcbmltcG9ydCB7IHVzZUNsaVZlcnNpb24gfSBmcm9tIFwifi91dGlscy9ob29rcy91c2VDbGlWZXJzaW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWJ1Z2dpbmdCdWdSZXBvcnRpbmdBY3Rpb25TZWN0aW9uKCkge1xuICBjb25zdCBjbGlWZXJzaW9uID0gdXNlQ2xpVmVyc2lvbigpO1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9e2BEZWJ1Z2dpbmcgJiBCdWcgUmVwb3J0aW5nIChDTEkgdiR7Y2xpVmVyc2lvbn0pYH0+XG4gICAgICA8Q29weVJ1bnRpbWVFcnJvckxvZyAvPlxuICAgICAgPEJ1Z1JlcG9ydE9wZW5BY3Rpb24gLz5cbiAgICAgIDxCdWdSZXBvcnRDb2xsZWN0RGF0YUFjdGlvbiAvPlxuICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ0FDSEVfS0VZUyB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCJ+L3V0aWxzL2NhY2hlXCI7XG5pbXBvcnQgdXNlT25jZUVmZmVjdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VPbmNlRWZmZWN0XCI7XG5cbmNvbnN0IGdldENsaVZlcnNpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHZlcnNpb24gPSBDYWNoZS5nZXQoQ0FDSEVfS0VZUy5DTElfVkVSU0lPTik7XG4gIGlmICh2ZXJzaW9uKSByZXR1cm4gcGFyc2VGbG9hdCh2ZXJzaW9uKTtcbiAgcmV0dXJuIC0xO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUNsaVZlcnNpb24gPSAoKSA9PiB7XG4gIGNvbnN0IFt2ZXJzaW9uLCBzZXRWZXJzaW9uXSA9IHVzZVN0YXRlPG51bWJlcj4oZ2V0Q2xpVmVyc2lvbik7XG5cbiAgdXNlT25jZUVmZmVjdCgoKSA9PiB7XG4gICAgQ2FjaGUuc3Vic2NyaWJlKChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgJiYga2V5ID09PSBDQUNIRV9LRVlTLkNMSV9WRVJTSU9OKSB7XG4gICAgICAgIHNldFZlcnNpb24ocGFyc2VGbG9hdCh2YWx1ZSkgfHwgLTEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdmVyc2lvbjtcbn07XG4iLCAiaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25QYW5lbCwgQ29sb3IsIEljb24sIHNob3dUb2FzdCwgVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBWQVVMVF9MT0NLX01FU1NBR0VTIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IHVzZUJpdHdhcmRlbiB9IGZyb20gXCJ+L2NvbnRleHQvYml0d2FyZGVuXCI7XG5pbXBvcnQgeyB1c2VWYXVsdENvbnRleHQgfSBmcm9tIFwifi9jb250ZXh0L3ZhdWx0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBWYXVsdEFjdGlvbnNTZWN0aW9uKCkge1xuICBjb25zdCB2YXVsdCA9IHVzZVZhdWx0Q29udGV4dCgpO1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcblxuICBjb25zdCBoYW5kbGVMb2NrVmF1bHQgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuQW5pbWF0ZWQsIFwiTG9ja2luZyBWYXVsdC4uLlwiLCBcIlBsZWFzZSB3YWl0XCIpO1xuICAgIGF3YWl0IGJpdHdhcmRlbi5sb2NrKHsgcmVhc29uOiBWQVVMVF9MT0NLX01FU1NBR0VTLk1BTlVBTCB9KTtcbiAgICBhd2FpdCB0b2FzdC5oaWRlKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTG9nb3V0VmF1bHQgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoeyB0aXRsZTogXCJMb2dnaW5nIE91dC4uLlwiLCBzdHlsZTogVG9hc3QuU3R5bGUuQW5pbWF0ZWQgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGJpdHdhcmRlbi5sb2dvdXQoKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBsb2dvdXRcIjtcbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuRmFpbHVyZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbiB0aXRsZT1cIlZhdWx0IEFjdGlvbnNcIj5cbiAgICAgIDxBY3Rpb25cbiAgICAgICAgdGl0bGU9XCJTeW5jIFZhdWx0XCJcbiAgICAgICAgc2hvcnRjdXQ9e3sgbWFjT1M6IHsga2V5OiBcInJcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIl0gfSwgd2luZG93czogeyBrZXk6IFwiclwiLCBtb2RpZmllcnM6IFtcImFsdFwiXSB9IH19XG4gICAgICAgIGljb249e0ljb24uQXJyb3dDbG9ja3dpc2V9XG4gICAgICAgIG9uQWN0aW9uPXt2YXVsdC5zeW5jSXRlbXN9XG4gICAgICAvPlxuICAgICAgPEFjdGlvblxuICAgICAgICBpY29uPXt7IHNvdXJjZTogXCJzZl9zeW1ib2xzX2xvY2suc3ZnXCIsIHRpbnRDb2xvcjogQ29sb3IuUHJpbWFyeVRleHQgfX0gLy8gRG9lcyBub3QgaW1tZWRpYXRlbHkgZm9sbG93IHRoZW1lXG4gICAgICAgIHRpdGxlPVwiTG9jayBWYXVsdFwiXG4gICAgICAgIHNob3J0Y3V0PXt7XG4gICAgICAgICAgbWFjT1M6IHsga2V5OiBcImxcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICAgIHdpbmRvd3M6IHsga2V5OiBcImxcIiwgbW9kaWZpZXJzOiBbXCJhbHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICB9fVxuICAgICAgICBvbkFjdGlvbj17aGFuZGxlTG9ja1ZhdWx0fVxuICAgICAgLz5cbiAgICAgIDxBY3Rpb24gc3R5bGU9e0FjdGlvbi5TdHlsZS5EZXN0cnVjdGl2ZX0gdGl0bGU9XCJMb2dvdXRcIiBpY29uPXtJY29uLkxvZ291dH0gb25BY3Rpb249e2hhbmRsZUxvZ291dFZhdWx0fSAvPlxuICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBnZXRQcmVmZXJlbmNlVmFsdWVzLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VNZW1vLCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VWYXVsdEl0ZW1QdWJsaXNoZXIgfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IHVzZUJpdHdhcmRlbiB9IGZyb20gXCJ+L2NvbnRleHQvYml0d2FyZGVuXCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uXCI7XG5pbXBvcnQgeyBGb2xkZXIsIEl0ZW0sIFZhdWx0IH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHVzZVZhdWx0Q2FjaGluZyBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZVZhdWx0Q2FjaGluZ1wiO1xuaW1wb3J0IHsgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yLCBnZXREaXNwbGF5YWJsZUVycm9yTWVzc2FnZSB9IGZyb20gXCJ+L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHVzZU9uY2VFZmZlY3QgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlT25jZUVmZmVjdFwiO1xuaW1wb3J0IHsgdXNlQ2FjaGVkU3RhdGUgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbmltcG9ydCB7IENBQ0hFX0tFWVMsIEZPTERFUl9PUFRJT05TIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcblxuZXhwb3J0IHR5cGUgVmF1bHRTdGF0ZSA9IFZhdWx0ICYge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBWYXVsdENvbnRleHRUeXBlID0gVmF1bHRTdGF0ZSAmIHtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgc3luY0l0ZW1zOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkSXRlbXM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGN1cnJlbnRGb2xkZXJJZDogTnVsbGFibGU8c3RyaW5nPjtcbiAgc2V0Q3VycmVudEZvbGRlcjogKGZvbGRlck9ySWQ6IE51bGxhYmxlPHN0cmluZyB8IEZvbGRlcj4pID0+IHZvaWQ7XG4gIHVwZGF0ZVN0YXRlOiAobmV4dDogUmVhY3QuU2V0U3RhdGVBY3Rpb248VmF1bHRTdGF0ZT4pID0+IHZvaWQ7XG59O1xuXG5jb25zdCBWYXVsdENvbnRleHQgPSBjcmVhdGVDb250ZXh0PFZhdWx0Q29udGV4dFR5cGUgfCBudWxsPihudWxsKTtcblxuZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCk6IFZhdWx0U3RhdGUge1xuICByZXR1cm4geyBpdGVtczogW10sIGZvbGRlcnM6IFtdLCBpc0xvYWRpbmc6IHRydWUgfTtcbn1cblxuZXhwb3J0IHR5cGUgVmF1bHRQcm92aWRlclByb3BzID0ge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xufTtcblxuY29uc3QgeyBzeW5jT25MYXVuY2ggfSA9IGdldFByZWZlcmVuY2VWYWx1ZXM8QWxsUHJlZmVyZW5jZXM+KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBWYXVsdFByb3ZpZGVyKHByb3BzOiBWYXVsdFByb3ZpZGVyUHJvcHMpIHtcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcHJvcHM7XG5cbiAgY29uc3Qgc2Vzc2lvbiA9IHVzZVNlc3Npb24oKTtcbiAgY29uc3QgYml0d2FyZGVuID0gdXNlQml0d2FyZGVuKCk7XG4gIGNvbnN0IHB1Ymxpc2hJdGVtcyA9IHVzZVZhdWx0SXRlbVB1Ymxpc2hlcigpO1xuICBjb25zdCB7IGdldENhY2hlZFZhdWx0LCBjYWNoZVZhdWx0IH0gPSB1c2VWYXVsdENhY2hpbmcoKTtcblxuICBjb25zdCBbY3VycmVudEZvbGRlcklkLCBzZXRDdXJyZW50Rm9sZGVySWRdID0gdXNlQ2FjaGVkU3RhdGU8TnVsbGFibGU8c3RyaW5nPj4oQ0FDSEVfS0VZUy5DVVJSRU5UX0ZPTERFUl9JRCwgbnVsbCk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlUmVkdWNlcihcbiAgICAocHJldmlvdXM6IFZhdWx0U3RhdGUsIG5leHQ6IFBhcnRpYWw8VmF1bHRTdGF0ZT4pID0+ICh7IC4uLnByZXZpb3VzLCAuLi5uZXh0IH0pLFxuICAgIHsgLi4uZ2V0SW5pdGlhbFN0YXRlKCksIC4uLmdldENhY2hlZFZhdWx0KCkgfVxuICApO1xuXG4gIHVzZU9uY2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzeW5jT25MYXVuY2gpIHtcbiAgICAgIHZvaWQgc3luY0l0ZW1zKHsgaXNJbml0aWFsOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2b2lkIGxvYWRJdGVtcygpO1xuICAgIH1cbiAgfSwgc2Vzc2lvbi5hY3RpdmUgJiYgc2Vzc2lvbi50b2tlbik7XG5cbiAgYXN5bmMgZnVuY3Rpb24gbG9hZEl0ZW1zKCkge1xuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcblxuICAgICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBbXTtcbiAgICAgIGxldCBmb2xkZXJzOiBGb2xkZXJbXSA9IFtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2l0ZW1zUmVzdWx0LCBmb2xkZXJzUmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtiaXR3YXJkZW4ubGlzdEl0ZW1zKCksIGJpdHdhcmRlbi5saXN0Rm9sZGVycygpXSk7XG4gICAgICAgIGlmIChpdGVtc1Jlc3VsdC5lcnJvcikgdGhyb3cgaXRlbXNSZXN1bHQuZXJyb3I7XG4gICAgICAgIGlmIChmb2xkZXJzUmVzdWx0LmVycm9yKSB0aHJvdyBmb2xkZXJzUmVzdWx0LmVycm9yO1xuICAgICAgICBpdGVtcyA9IGl0ZW1zUmVzdWx0LnJlc3VsdDtcbiAgICAgICAgZm9sZGVycyA9IGZvbGRlcnNSZXN1bHQucmVzdWx0O1xuICAgICAgICBpdGVtcy5zb3J0KGZhdm9yaXRlSXRlbXNGaXJzdFNvcnRlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBwdWJsaXNoSXRlbXMobmV3IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcigpKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHsgaXRlbXMsIGZvbGRlcnMgfSk7XG4gICAgICBwdWJsaXNoSXRlbXMoaXRlbXMpO1xuICAgICAgY2FjaGVWYXVsdChpdGVtcywgZm9sZGVycyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBsb2FkIHZhdWx0IGl0ZW1zXCIsIGdldERpc3BsYXlhYmxlRXJyb3JNZXNzYWdlKGVycm9yKSk7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvYWQgdmF1bHQgaXRlbXNcIiwgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gc3luY0l0ZW1zKHByb3BzPzogeyBpc0luaXRpYWw/OiBib29sZWFuIH0pIHtcbiAgICBjb25zdCB7IGlzSW5pdGlhbCA9IGZhbHNlIH0gPSBwcm9wcyA/PyB7fTtcblxuICAgIGNvbnN0IHRvYXN0ID0gYXdhaXQgc2hvd1RvYXN0KHtcbiAgICAgIHRpdGxlOiBcIlN5bmNpbmcgVmF1bHQuLi5cIixcbiAgICAgIG1lc3NhZ2U6IGlzSW5pdGlhbCA/IFwiQmFja2dyb3VuZCBUYXNrXCIgOiB1bmRlZmluZWQsXG4gICAgICBzdHlsZTogVG9hc3QuU3R5bGUuQW5pbWF0ZWQsXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGJpdHdhcmRlbi5zeW5jKCk7XG4gICAgICBhd2FpdCBsb2FkSXRlbXMoKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgYml0d2FyZGVuLmxvZ291dCgpO1xuICAgICAgdG9hc3Quc3R5bGUgPSBUb2FzdC5TdHlsZS5GYWlsdXJlO1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBzeW5jIHZhdWx0XCI7XG4gICAgICB0b2FzdC5tZXNzYWdlID0gZ2V0RGlzcGxheWFibGVFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEN1cnJlbnRGb2xkZXIoZm9sZGVyT3JJZDogTnVsbGFibGU8c3RyaW5nIHwgRm9sZGVyPikge1xuICAgIHNldEN1cnJlbnRGb2xkZXJJZCh0eXBlb2YgZm9sZGVyT3JJZCA9PT0gXCJzdHJpbmdcIiA/IGZvbGRlck9ySWQgOiBmb2xkZXJPcklkPy5pZCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVTdGF0ZShuZXh0OiBSZWFjdC5TZXRTdGF0ZUFjdGlvbjxWYXVsdFN0YXRlPikge1xuICAgIGNvbnN0IG5ld1N0YXRlID0gdHlwZW9mIG5leHQgPT09IFwiZnVuY3Rpb25cIiA/IG5leHQoc3RhdGUpIDogbmV4dDtcbiAgICBzZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgY2FjaGVWYXVsdChuZXdTdGF0ZS5pdGVtcywgbmV3U3RhdGUuZm9sZGVycyk7XG4gIH1cblxuICBjb25zdCBtZW1vaXplZFZhbHVlOiBWYXVsdENvbnRleHRUeXBlID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpdGVtczogZmlsdGVySXRlbXNCeUZvbGRlcklkKHN0YXRlLml0ZW1zLCBjdXJyZW50Rm9sZGVySWQpLFxuICAgICAgaXNFbXB0eTogc3RhdGUuaXRlbXMubGVuZ3RoID09IDAsXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyB8fCBzZXNzaW9uLmlzTG9hZGluZyxcbiAgICAgIGN1cnJlbnRGb2xkZXJJZCxcbiAgICAgIHN5bmNJdGVtcyxcbiAgICAgIGxvYWRJdGVtcyxcbiAgICAgIHNldEN1cnJlbnRGb2xkZXIsXG4gICAgICB1cGRhdGVTdGF0ZSxcbiAgICB9KSxcbiAgICBbc3RhdGUsIHNlc3Npb24uaXNMb2FkaW5nLCBjdXJyZW50Rm9sZGVySWQsIHN5bmNJdGVtcywgbG9hZEl0ZW1zLCBzZXRDdXJyZW50Rm9sZGVyLCB1cGRhdGVTdGF0ZV1cbiAgKTtcblxuICByZXR1cm4gPFZhdWx0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17bWVtb2l6ZWRWYWx1ZX0+e2NoaWxkcmVufTwvVmF1bHRDb250ZXh0LlByb3ZpZGVyPjtcbn1cblxuZnVuY3Rpb24gZmlsdGVySXRlbXNCeUZvbGRlcklkKGl0ZW1zOiBJdGVtW10sIGZvbGRlcklkOiBOdWxsYWJsZTxzdHJpbmc+KSB7XG4gIGlmICghZm9sZGVySWQgfHwgZm9sZGVySWQgPT09IEZPTERFUl9PUFRJT05TLkFMTCkgcmV0dXJuIGl0ZW1zO1xuICBpZiAoZm9sZGVySWQgPT09IEZPTERFUl9PUFRJT05TLk5PX0ZPTERFUikgcmV0dXJuIGl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5mb2xkZXJJZCA9PT0gbnVsbCk7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZm9sZGVySWQgPT09IGZvbGRlcklkKTtcbn1cblxuZnVuY3Rpb24gZmF2b3JpdGVJdGVtc0ZpcnN0U29ydGVyKGE6IEl0ZW0sIGI6IEl0ZW0pIHtcbiAgaWYgKGEuZmF2b3JpdGUgJiYgYi5mYXZvcml0ZSkgcmV0dXJuIDA7XG4gIHJldHVybiBhLmZhdm9yaXRlID8gLTEgOiAxO1xufVxuXG5leHBvcnQgY29uc3QgdXNlVmF1bHRDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdENvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlVmF1bHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFZhdWx0UHJvdmlkZXJcIik7XG4gIH1cblxuICByZXR1cm4gY29udGV4dDtcbn07XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgTXV0YWJsZVJlZk9iamVjdCwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbmV4cG9ydCB0eXBlIEl0ZW1MaXN0ZW5lciA9IChpdGVtOiBJdGVtIHwgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yKSA9PiB2b2lkO1xuXG5leHBvcnQgdHlwZSBWYXVsdExpc3RlbmVyc0NvbnRleHRUeXBlID0ge1xuICBsaXN0ZW5lcnM6IE11dGFibGVSZWZPYmplY3Q8TWFwPHN0cmluZywgSXRlbUxpc3RlbmVyPj47XG4gIHN1YnNjcmliZUl0ZW06IChpdGVtSWQ6IHN0cmluZywgbGlzdGVuZXI6IEl0ZW1MaXN0ZW5lcikgPT4gKCkgPT4gdm9pZDtcbiAgcHVibGlzaEl0ZW1zOiAoaXRlbXM6IEl0ZW1bXSB8IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcikgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFZhdWx0TGlzdGVuZXJzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8VmF1bHRMaXN0ZW5lcnNDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xuXG5jb25zdCBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyID0gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pID0+IHtcbiAgY29uc3QgbGlzdGVuZXJzID0gdXNlUmVmKG5ldyBNYXA8c3RyaW5nLCBJdGVtTGlzdGVuZXI+KCkpO1xuXG4gIGNvbnN0IHB1Ymxpc2hJdGVtcyA9IChpdGVtc09yRXJyb3I6IEl0ZW1bXSB8IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcikgPT4ge1xuICAgIGlmIChpdGVtc09yRXJyb3IgaW5zdGFuY2VvZiBGYWlsZWRUb0xvYWRWYXVsdEl0ZW1zRXJyb3IpIHtcbiAgICAgIGxpc3RlbmVycy5jdXJyZW50LmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihpdGVtc09yRXJyb3IpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdGVuZXJzLmN1cnJlbnQuZm9yRWFjaCgobGlzdGVuZXIsIGl0ZW1JZCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNPckVycm9yLmZpbmQoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IGl0ZW1JZCk7XG4gICAgICAgIGlmIChpdGVtKSBsaXN0ZW5lcihpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdWJzY3JpYmVJdGVtID0gKGl0ZW1JZDogc3RyaW5nLCBsaXN0ZW5lcjogSXRlbUxpc3RlbmVyKSA9PiB7XG4gICAgbGlzdGVuZXJzLmN1cnJlbnQuc2V0KGl0ZW1JZCwgbGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuY3VycmVudC5kZWxldGUoaXRlbUlkKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IG1lbW9pemVkVmFsdWUgPSB1c2VNZW1vKCgpID0+ICh7IGxpc3RlbmVycywgcHVibGlzaEl0ZW1zLCBzdWJzY3JpYmVJdGVtIH0pLCBbXSk7XG5cbiAgcmV0dXJuIDxWYXVsdExpc3RlbmVyc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e21lbW9pemVkVmFsdWV9PntjaGlsZHJlbn08L1ZhdWx0TGlzdGVuZXJzQ29udGV4dC5Qcm92aWRlcj47XG59O1xuXG5leHBvcnQgY29uc3QgdXNlVmF1bHRJdGVtUHVibGlzaGVyID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdExpc3RlbmVyc0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VWYXVsdEl0ZW1QdWJsaXNoZXIgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFZhdWx0TGlzdGVuZXJzUHJvdmlkZXJcIik7XG5cbiAgcmV0dXJuIGNvbnRleHQucHVibGlzaEl0ZW1zO1xufTtcblxuLyoqIEFsbG93cyB5b3UgdG8gc3Vic2NyaWJlIHRvIGEgc3BlY2lmaWMgaXRlbSBhbmQgZ2V0IG5vdGlmaWVkIHdoZW4gaXQgY2hhbmdlcy4gKi9cbmV4cG9ydCBjb25zdCB1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdExpc3RlbmVyc0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyXCIpO1xuXG4gIHJldHVybiAoaXRlbUlkOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgdGltZW91dElkOiBOb2RlSlMuVGltZW91dDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxJdGVtPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNvbnRleHQuc3Vic2NyaWJlSXRlbShpdGVtSWQsIChpdGVtT3JFcnJvcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgaWYgKGl0ZW1PckVycm9yIGluc3RhbmNlb2YgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBpdGVtT3JFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzb2x2ZShpdGVtT3JFcnJvcik7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICByZWplY3QobmV3IFN1YnNjcmliZXJUaW1lb3V0RXJyb3IoKSk7XG4gICAgICB9LCAxNTAwMCk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5jbGFzcyBTdWJzY3JpYmVyVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlRpbWVkIG91dCB3YWl0aW5nIGZvciBpdGVtXCIpO1xuICAgIHRoaXMubmFtZSA9IFwiU3Vic2NyaWJlclRpbWVvdXRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhdWx0TGlzdGVuZXJzUHJvdmlkZXI7XG4iLCAiaW1wb3J0IHsgZ2V0UHJlZmVyZW5jZVZhbHVlcyB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHByZXBhcmVGb2xkZXJzRm9yQ2FjaGUsIHByZXBhcmVJdGVtc0ZvckNhY2hlIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy9jYWNoaW5nXCI7XG5pbXBvcnQgeyBDQUNIRV9LRVlTIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IEZvbGRlciwgSXRlbSwgVmF1bHQgfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tIFwifi91dGlscy9jYWNoZVwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyB1c2VDb250ZW50RW5jcnlwdG9yIH0gZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlQ29udGVudEVuY3J5cHRvclwiO1xuaW1wb3J0IHVzZU9uY2VFZmZlY3QgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlT25jZUVmZmVjdFwiO1xuXG5mdW5jdGlvbiB1c2VWYXVsdENhY2hpbmcoKSB7XG4gIGNvbnN0IHsgZW5jcnlwdCwgZGVjcnlwdCB9ID0gdXNlQ29udGVudEVuY3J5cHRvcigpO1xuICBjb25zdCBpc0NhY2hpbmdFbmFibGUgPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzLlNlYXJjaD4oKS5zaG91bGRDYWNoZVZhdWx0SXRlbXM7XG5cbiAgdXNlT25jZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gdXNlcnMgdGhhdCBvcHQgb3V0IG9mIGNhY2hpbmcgcHJvYmFibHkgd2FudCB0byBkZWxldGUgYW55IGNhY2hlZCBkYXRhXG4gICAgaWYgKCFDYWNoZS5pc0VtcHR5KSBDYWNoZS5jbGVhcigpO1xuICB9LCAhaXNDYWNoaW5nRW5hYmxlKTtcblxuICBjb25zdCBnZXRDYWNoZWRWYXVsdCA9ICgpOiBWYXVsdCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaXNDYWNoaW5nRW5hYmxlKSB0aHJvdyBuZXcgVmF1bHRDYWNoaW5nTm9FbmFibGVkRXJyb3IoKTtcblxuICAgICAgY29uc3QgY2FjaGVkSXYgPSBDYWNoZS5nZXQoQ0FDSEVfS0VZUy5JVik7XG4gICAgICBjb25zdCBjYWNoZWRFbmNyeXB0ZWRWYXVsdCA9IENhY2hlLmdldChDQUNIRV9LRVlTLlZBVUxUKTtcbiAgICAgIGlmICghY2FjaGVkSXYgfHwgIWNhY2hlZEVuY3J5cHRlZFZhdWx0KSB0aHJvdyBuZXcgVmF1bHRDYWNoaW5nTm9FbmFibGVkRXJyb3IoKTtcblxuICAgICAgY29uc3QgZGVjcnlwdGVkVmF1bHQgPSBkZWNyeXB0KGNhY2hlZEVuY3J5cHRlZFZhdWx0LCBjYWNoZWRJdik7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZTxWYXVsdD4oZGVjcnlwdGVkVmF1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yKSkge1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGRlY3J5cHQgY2FjaGVkIHZhdWx0XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGl0ZW1zOiBbXSwgZm9sZGVyczogW10gfTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2FjaGVWYXVsdCA9IChpdGVtczogSXRlbVtdLCBmb2xkZXJzOiBGb2xkZXJbXSk6IHZvaWQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWlzQ2FjaGluZ0VuYWJsZSkgdGhyb3cgbmV3IFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yKCk7XG5cbiAgICAgIGNvbnN0IHZhdWx0VG9FbmNyeXB0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpdGVtczogcHJlcGFyZUl0ZW1zRm9yQ2FjaGUoaXRlbXMpLFxuICAgICAgICBmb2xkZXJzOiBwcmVwYXJlRm9sZGVyc0ZvckNhY2hlKGZvbGRlcnMpLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmNyeXB0ZWRWYXVsdCA9IGVuY3J5cHQodmF1bHRUb0VuY3J5cHQpO1xuICAgICAgQ2FjaGUuc2V0KENBQ0hFX0tFWVMuVkFVTFQsIGVuY3J5cHRlZFZhdWx0LmNvbnRlbnQpO1xuICAgICAgQ2FjaGUuc2V0KENBQ0hFX0tFWVMuSVYsIGVuY3J5cHRlZFZhdWx0Lml2KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBWYXVsdENhY2hpbmdOb0VuYWJsZWRFcnJvcikpIHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjYWNoZSB2YXVsdFwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7IGdldENhY2hlZFZhdWx0LCBjYWNoZVZhdWx0IH07XG59XG5cbmNsYXNzIFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGRlZmF1bHQgdXNlVmF1bHRDYWNoaW5nO1xuIiwgImltcG9ydCB7IFNFTlNJVElWRV9WQUxVRV9QTEFDRUhPTERFUiB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBGb2xkZXIsIElkZW50aXR5VGl0bGUsIEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZUl0ZW1zRm9yQ2FjaGUoaXRlbXM6IEl0ZW1bXSk6IEl0ZW1bXSB7XG4gIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgb2JqZWN0OiBpdGVtLm9iamVjdCxcbiAgICBpZDogaXRlbS5pZCxcbiAgICBvcmdhbml6YXRpb25JZDogaXRlbS5vcmdhbml6YXRpb25JZCxcbiAgICBmb2xkZXJJZDogaXRlbS5mb2xkZXJJZCxcbiAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgbmFtZTogaXRlbS5uYW1lLFxuICAgIHJldmlzaW9uRGF0ZTogaXRlbS5yZXZpc2lvbkRhdGUsXG4gICAgY3JlYXRpb25EYXRlOiBpdGVtLmNyZWF0aW9uRGF0ZSxcbiAgICBkZWxldGVkRGF0ZTogaXRlbS5kZWxldGVkRGF0ZSxcbiAgICBmYXZvcml0ZTogaXRlbS5mYXZvcml0ZSxcbiAgICByZXByb21wdDogaXRlbS5yZXByb21wdCxcbiAgICBjb2xsZWN0aW9uSWRzOiBpdGVtLmNvbGxlY3Rpb25JZHMsXG4gICAgc2VjdXJlTm90ZTogaXRlbS5zZWN1cmVOb3RlID8geyB0eXBlOiBpdGVtLnNlY3VyZU5vdGUudHlwZSB9IDogdW5kZWZpbmVkLFxuICAgIC8vIHNlbnNpdGl2ZSBkYXRhIGJlbG93XG4gICAgZmllbGRzOiBjbGVhbkZpZWxkcyhpdGVtLmZpZWxkcyksXG4gICAgbG9naW46IGNsZWFuTG9naW4oaXRlbS5sb2dpbiksXG4gICAgaWRlbnRpdHk6IGNsZWFuSWRlbnRpdHkoaXRlbS5pZGVudGl0eSksXG4gICAgY2FyZDogY2xlYW5DYXJkKGl0ZW0uY2FyZCksXG4gICAgcGFzc3dvcmRIaXN0b3J5OiBjbGVhblBhc3N3b3JkSGlzdG9yeShpdGVtLnBhc3N3b3JkSGlzdG9yeSksXG4gICAgbm90ZXM6IGhpZGVJZkRlZmluZWQoaXRlbS5ub3RlcyksXG4gICAgc3NoS2V5OiBjbGVhblNzaEtleShpdGVtLnNzaEtleSksXG4gIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVGb2xkZXJzRm9yQ2FjaGUoZm9sZGVyczogRm9sZGVyW10pOiBGb2xkZXJbXSB7XG4gIHJldHVybiBmb2xkZXJzLm1hcCgoZm9sZGVyKSA9PiAoeyBvYmplY3Q6IGZvbGRlci5vYmplY3QsIGlkOiBmb2xkZXIuaWQsIG5hbWU6IGZvbGRlci5uYW1lIH0pKTtcbn1cblxuZnVuY3Rpb24gY2xlYW5GaWVsZHMoZmllbGRzOiBJdGVtW1wiZmllbGRzXCJdKTogSXRlbVtcImZpZWxkc1wiXSB7XG4gIHJldHVybiBmaWVsZHM/Lm1hcCgoZmllbGQpID0+ICh7XG4gICAgbmFtZTogZmllbGQubmFtZSwgLy8gbmVjZXNzYXJ5IGZvciBkaXNwbGF5XG4gICAgdmFsdWU6IGhpZGVJZkRlZmluZWQoZmllbGQudmFsdWUpLFxuICAgIHR5cGU6IGZpZWxkLnR5cGUsXG4gICAgbGlua2VkSWQ6IGZpZWxkLmxpbmtlZElkLFxuICB9KSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFuTG9naW4obG9naW46IEl0ZW1bXCJsb2dpblwiXSk6IEl0ZW1bXCJsb2dpblwiXSB7XG4gIGlmICghbG9naW4pIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IGxvZ2luLnVzZXJuYW1lLCAvLyBuZWNlc3NhcnkgZm9yIGRpc3BsYXlcbiAgICB1cmlzOiBsb2dpbi51cmlzLFxuICAgIHBhc3N3b3JkOiBoaWRlSWZEZWZpbmVkKGxvZ2luLnBhc3N3b3JkKSxcbiAgICBwYXNzd29yZFJldmlzaW9uRGF0ZTogaGlkZUlmRGVmaW5lZChsb2dpbi5wYXNzd29yZFJldmlzaW9uRGF0ZSksXG4gICAgdG90cDogaGlkZUlmRGVmaW5lZChsb2dpbi50b3RwKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5JZGVudGl0eShpZGVudGl0eTogSXRlbVtcImlkZW50aXR5XCJdKTogSXRlbVtcImlkZW50aXR5XCJdIHtcbiAgaWYgKCFpZGVudGl0eSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS50aXRsZSkgYXMgSWRlbnRpdHlUaXRsZSB8IG51bGwsXG4gICAgZmlyc3ROYW1lOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmZpcnN0TmFtZSksXG4gICAgbWlkZGxlTmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5taWRkbGVOYW1lKSxcbiAgICBsYXN0TmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5sYXN0TmFtZSksXG4gICAgYWRkcmVzczE6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuYWRkcmVzczEpLFxuICAgIGFkZHJlc3MyOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmFkZHJlc3MyKSxcbiAgICBhZGRyZXNzMzogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5hZGRyZXNzMyksXG4gICAgY2l0eTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5jaXR5KSxcbiAgICBzdGF0ZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5zdGF0ZSksXG4gICAgcG9zdGFsQ29kZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5wb3N0YWxDb2RlKSxcbiAgICBjb3VudHJ5OiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmNvdW50cnkpLFxuICAgIGNvbXBhbnk6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuY29tcGFueSksXG4gICAgZW1haWw6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuZW1haWwpLFxuICAgIHBob25lOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LnBob25lKSxcbiAgICBzc246IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuc3NuKSxcbiAgICB1c2VybmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS51c2VybmFtZSksXG4gICAgcGFzc3BvcnROdW1iZXI6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkucGFzc3BvcnROdW1iZXIpLFxuICAgIGxpY2Vuc2VOdW1iZXI6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkubGljZW5zZU51bWJlciksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsZWFuQ2FyZChjYXJkOiBJdGVtW1wiY2FyZFwiXSk6IEl0ZW1bXCJjYXJkXCJdIHtcbiAgaWYgKCFjYXJkKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4ge1xuICAgIGJyYW5kOiBjYXJkLmJyYW5kLFxuICAgIGNhcmRob2xkZXJOYW1lOiBoaWRlSWZEZWZpbmVkKGNhcmQuY2FyZGhvbGRlck5hbWUpLFxuICAgIG51bWJlcjogaGlkZUlmRGVmaW5lZChjYXJkLm51bWJlciksXG4gICAgZXhwTW9udGg6IGhpZGVJZkRlZmluZWQoY2FyZC5leHBNb250aCksXG4gICAgZXhwWWVhcjogaGlkZUlmRGVmaW5lZChjYXJkLmV4cFllYXIpLFxuICAgIGNvZGU6IGhpZGVJZkRlZmluZWQoY2FyZC5jb2RlKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5QYXNzd29yZEhpc3RvcnkocGFzc3dvcmRIaXN0b3J5SXRlbXM6IEl0ZW1bXCJwYXNzd29yZEhpc3RvcnlcIl0pOiBJdGVtW1wicGFzc3dvcmRIaXN0b3J5XCJdIHtcbiAgcmV0dXJuIHBhc3N3b3JkSGlzdG9yeUl0ZW1zPy5tYXAoKHBhc3N3b3JkSGlzdG9yeSkgPT4gKHtcbiAgICBwYXNzd29yZDogaGlkZUlmRGVmaW5lZChwYXNzd29yZEhpc3RvcnkucGFzc3dvcmQpLFxuICAgIGxhc3RVc2VkRGF0ZTogaGlkZUlmRGVmaW5lZChwYXNzd29yZEhpc3RvcnkubGFzdFVzZWREYXRlKSxcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiBjbGVhblNzaEtleShzc2hLZXk6IEl0ZW1bXCJzc2hLZXlcIl0pOiBJdGVtW1wic3NoS2V5XCJdIHtcbiAgaWYgKCFzc2hLZXkpIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgcHVibGljS2V5OiBzc2hLZXkucHVibGljS2V5LFxuICAgIGtleUZpbmdlcnByaW50OiBzc2hLZXkua2V5RmluZ2VycHJpbnQsXG4gICAgcHJpdmF0ZUtleTogaGlkZUlmRGVmaW5lZChzc2hLZXkucHJpdmF0ZUtleSksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGhpZGVJZkRlZmluZWQ8VD4odmFsdWU6IFQpIHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuICByZXR1cm4gU0VOU0lUSVZFX1ZBTFVFX1BMQUNFSE9MREVSO1xufVxuIiwgImltcG9ydCB7IGdldFByZWZlcmVuY2VWYWx1ZXMgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBjcmVhdGVDaXBoZXJpdiwgY3JlYXRlRGVjaXBoZXJpdiwgY3JlYXRlSGFzaCwgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEFMR09SSVRITSA9IFwiYWVzLTI1Ni1jYmNcIjtcblxuZXhwb3J0IHR5cGUgRW5jcnlwdGVkQ29udGVudCA9IHsgaXY6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH07XG5cbi8qKiBFbmNyeXB0cyBhbmQgZGVjcnlwdHMgZGF0YSB1c2luZyB0aGUgdXNlcidzIGNsaWVudCBzZWNyZXQgKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb250ZW50RW5jcnlwdG9yKCkge1xuICBjb25zdCB7IGNsaWVudFNlY3JldCB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKTtcbiAgY29uc3QgY2lwaGVyS2V5QnVmZmVyID0gdXNlTWVtbygoKSA9PiBnZXQzMkJpdFNlY3JldEtleUJ1ZmZlcihjbGllbnRTZWNyZXQudHJpbSgpKSwgW2NsaWVudFNlY3JldF0pO1xuXG4gIGNvbnN0IGVuY3J5cHQgPSAoZGF0YTogc3RyaW5nKTogRW5jcnlwdGVkQ29udGVudCA9PiB7XG4gICAgY29uc3QgaXZCdWZmZXIgPSByYW5kb21CeXRlcygxNik7XG4gICAgY29uc3QgY2lwaGVyID0gY3JlYXRlQ2lwaGVyaXYoQUxHT1JJVEhNLCBjaXBoZXJLZXlCdWZmZXIsIGl2QnVmZmVyKTtcbiAgICBjb25zdCBlbmNyeXB0ZWRDb250ZW50QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbY2lwaGVyLnVwZGF0ZShkYXRhKSwgY2lwaGVyLmZpbmFsKCldKTtcbiAgICByZXR1cm4geyBpdjogaXZCdWZmZXIudG9TdHJpbmcoXCJoZXhcIiksIGNvbnRlbnQ6IGVuY3J5cHRlZENvbnRlbnRCdWZmZXIudG9TdHJpbmcoXCJoZXhcIikgfTtcbiAgfTtcblxuICBjb25zdCBkZWNyeXB0ID0gKGNvbnRlbnQ6IHN0cmluZywgaXY6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgZGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcml2KEFMR09SSVRITSwgY2lwaGVyS2V5QnVmZmVyLCBCdWZmZXIuZnJvbShpdiwgXCJoZXhcIikpO1xuICAgIGNvbnN0IGRlY3J5cHRlZENvbnRlbnRCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtkZWNpcGhlci51cGRhdGUoQnVmZmVyLmZyb20oY29udGVudCwgXCJoZXhcIikpLCBkZWNpcGhlci5maW5hbCgpXSk7XG4gICAgcmV0dXJuIGRlY3J5cHRlZENvbnRlbnRCdWZmZXIudG9TdHJpbmcoKTtcbiAgfTtcblxuICByZXR1cm4geyBlbmNyeXB0LCBkZWNyeXB0IH07XG59XG5cbmZ1bmN0aW9uIGdldDMyQml0U2VjcmV0S2V5QnVmZmVyKGtleTogc3RyaW5nKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShrZXkpLmRpZ2VzdChcImJhc2U2NFwiKS5zbGljZSgwLCAzMikpO1xufVxuIiwgImltcG9ydCB7IEljb24sIGdldFByZWZlcmVuY2VWYWx1ZXMgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJVEVNX1RZUEVfVE9fSUNPTl9NQVAgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgSXRlbSwgSXRlbVR5cGUgfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgZ2V0Q2FyZEltYWdlVXJsIH0gZnJvbSBcIn4vdXRpbHMvY2FyZHNcIjtcbmltcG9ydCB7IGZhdmljb25VcmwgfSBmcm9tIFwifi91dGlscy9zZWFyY2hcIjtcblxuY29uc3QgeyBmZXRjaEZhdmljb25zIH0gPSBnZXRQcmVmZXJlbmNlVmFsdWVzKCk7XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfVE9fSU1BR0VfT1JfSUNPTl9NQVA6IFJlY29yZDxJdGVtVHlwZSwgKGl0ZW06IEl0ZW0pID0+IHN0cmluZyB8IEljb24+ID0ge1xuICBbSXRlbVR5cGUuTE9HSU5dOiAoaXRlbTogSXRlbSkgPT4ge1xuICAgIGNvbnN0IGljb25VcmkgPSBpdGVtLmxvZ2luPy51cmlzPy5bMF0/LnVyaTtcbiAgICBpZiAoZmV0Y2hGYXZpY29ucyAmJiBpY29uVXJpKSByZXR1cm4gZmF2aWNvblVybChpY29uVXJpKTtcbiAgICByZXR1cm4gSVRFTV9UWVBFX1RPX0lDT05fTUFQW0l0ZW1UeXBlLkxPR0lOXTtcbiAgfSxcbiAgW0l0ZW1UeXBlLkNBUkRdOiAoaXRlbTogSXRlbSkgPT4ge1xuICAgIGNvbnN0IHsgYnJhbmQgfSA9IGl0ZW0uY2FyZCA/PyB7fTtcbiAgICBpZiAoYnJhbmQpIHtcbiAgICAgIGNvbnN0IGNhcmRCcmFuZEltYWdlID0gZ2V0Q2FyZEltYWdlVXJsKGJyYW5kKTtcbiAgICAgIGlmIChjYXJkQnJhbmRJbWFnZSkgcmV0dXJuIGNhcmRCcmFuZEltYWdlO1xuICAgIH1cbiAgICByZXR1cm4gSVRFTV9UWVBFX1RPX0lDT05fTUFQW0l0ZW1UeXBlLkNBUkRdO1xuICB9LFxuICBbSXRlbVR5cGUuSURFTlRJVFldOiAoKSA9PiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuSURFTlRJVFldLFxuICBbSXRlbVR5cGUuTk9URV06ICgpID0+IElURU1fVFlQRV9UT19JQ09OX01BUFtJdGVtVHlwZS5OT1RFXSxcbiAgW0l0ZW1UeXBlLlNTSF9LRVldOiAoKSA9PiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuU1NIX0tFWV0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlSXRlbUljb24oaXRlbTogSXRlbSkge1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VPckljb24gPSBJVEVNX1RZUEVfVE9fSU1BR0VfT1JfSUNPTl9NQVBbaXRlbS50eXBlXT8uKGl0ZW0pO1xuICAgIGlmIChpbWFnZU9ySWNvbikgcmV0dXJuIGltYWdlT3JJY29uO1xuICAgIHJldHVybiBJY29uLlF1ZXN0aW9uTWFyaztcbiAgfSwgW2l0ZW0udHlwZSwgaXRlbS5jYXJkPy5icmFuZCwgaXRlbS5sb2dpbj8udXJpcz8uWzBdPy51cmldKTtcbn1cbiIsICJpbXBvcnQgeyBTSE9SVENVVF9LRVlfU0VRVUVOQ0UgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgQ0FSRF9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBDQVJEX0JSQU5EUywgQ2FyZCwgQ2FyZEJyYW5kIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcblxuY29uc3QgTU9OVEhfTlVNQkVSX1RPX0xBQkVMX01BUCA9IHtcbiAgMTogXCIwMSAtIEphbnVhcnlcIixcbiAgMjogXCIwMiAtIEZlYnJ1YXJ5XCIsXG4gIDM6IFwiMDMgLSBNYXJjaFwiLFxuICA0OiBcIjA0IC0gQXByaWxcIixcbiAgNTogXCIwNSAtIE1heVwiLFxuICA2OiBcIjA2IC0gSnVuZVwiLFxuICA3OiBcIjA3IC0gSnVseVwiLFxuICA4OiBcIjA4IC0gQXVndXN0XCIsXG4gIDk6IFwiMDkgLSBTZXB0ZW1iZXJcIixcbiAgMTA6IFwiMTAgLSBPY3RvYmVyXCIsXG4gIDExOiBcIjExIC0gTm92ZW1iZXJcIixcbiAgMTI6IFwiMTIgLSBEZWNlbWJlclwiLFxufSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG5jb25zdCBDQVJEX01BUFBFUjogUmVjb3JkPHN0cmluZywgKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZz4gPSB7XG4gIGV4cE1vbnRoOiAodmFsdWU6IHN0cmluZykgPT4gTU9OVEhfTlVNQkVSX1RPX0xBQkVMX01BUFt2YWx1ZV0gPz8gdmFsdWUsXG59O1xuXG5jb25zdCBnZXRDYXJkVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIENBUkRfTUFQUEVSW2tleSBhcyBrZXlvZiBDYXJkXT8uKHZhbHVlKSA/PyB2YWx1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkRGV0YWlsc01hcmtkb3duKGl0ZW1OYW1lOiBzdHJpbmcsIGNhcmQ6IENhcmQpIHtcbiAgcmV0dXJuIGAjIFx1RDgzRFx1RENCMyAke2l0ZW1OYW1lfVxuJm5ic3A7XG58ICR7cGxhdGZvcm0gPT09IFwibWFjb3NcIiA/IFwiXHUyMzI1XCIgOiBcIkFsdFwifVxcdCoqRmllbGQqKiB8ICoqVmFsdWUqKiB8XG58IC0tLSB8IC0tLSB8XG4ke09iamVjdC5lbnRyaWVzKGNhcmQpXG4gIC5tYXAoKFtrZXksIHZhbHVlXSwgaW5kZXgpID0+IHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBsYWJlbCA9IENBUkRfS0VZX0xBQkVMW2tleSBhcyBrZXlvZiBDYXJkXTtcbiAgICBjb25zdCBzaG9ydGN1dEtleSA9IFNIT1JUQ1VUX0tFWV9TRVFVRU5DRVtpbmRleF07XG5cbiAgICByZXR1cm4gYHwgJHtzaG9ydGN1dEtleSA/IGAke3Nob3J0Y3V0S2V5fS5gIDogXCImbmJzcDtcIn1cXHQqKiR7bGFiZWx9KiogfCAke2dldENhcmRWYWx1ZShrZXksIHZhbHVlKX0gfGA7XG4gIH0pXG4gIC5maWx0ZXIoQm9vbGVhbilcbiAgLmpvaW4oXCJcXG5cIil9XG5gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZERldGFpbHNDb3B5VmFsdWUoY2FyZDogQ2FyZCkge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY2FyZClcbiAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+ICh2YWx1ZSA/IGAke0NBUkRfS0VZX0xBQkVMW2tleSBhcyBrZXlvZiBDYXJkXX06ICR7Z2V0Q2FyZFZhbHVlKGtleSwgdmFsdWUpfWAgOiBudWxsKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cbmNvbnN0IENBUkRfS0VZX0xBQkVMX0tFWVMgPSBPYmplY3Qua2V5cyhDQVJEX0tFWV9MQUJFTCk7XG4vKiogc29ydHMgdGhlIGZpZWxkcyBhY2NvcmRpbmcgdG8gdGhlIG9yZGVyIHRoZXkgYXBwZWFyIG9uIGJpdHdhcmRlbidzIHdlYiB2YXVsdCBmb3JtICovXG5leHBvcnQgZnVuY3Rpb24gY2FyZEJpdHdhcmRlblBhZ2VGaWVsZE9yZGVyU29ydGVyKFthXTogc3RyaW5nIHwgW3N0cmluZywgYW55XSwgW2JdOiBzdHJpbmcgfCBbc3RyaW5nLCBhbnldKSB7XG4gIGNvbnN0IGFJbmRleCA9IENBUkRfS0VZX0xBQkVMX0tFWVMuaW5kZXhPZigoQXJyYXkuaXNBcnJheShhKSA/IGFbMF0gOiBhKSBhcyBrZXlvZiBDYXJkKTtcbiAgY29uc3QgYkluZGV4ID0gQ0FSRF9LRVlfTEFCRUxfS0VZUy5pbmRleE9mKChBcnJheS5pc0FycmF5KGIpID8gYlswXSA6IGIpIGFzIGtleW9mIENhcmQpO1xuICByZXR1cm4gYUluZGV4IC0gYkluZGV4O1xufVxuXG5jb25zdCBCQVNFX0NBUkRfSU1BR0VfVVJMID0gXCJodHRwczovL3ZhdWx0LmJpdHdhcmRlbi5jb20vaW1hZ2VzXCI7XG5jb25zdCBDQVJEX0JSQU5EU19UT19JTUFHRV9VUkxfTUFQOiBQYXJ0aWFsPFJlY29yZDxDYXJkQnJhbmQsIHN0cmluZz4+ID0ge1xuICBbQ0FSRF9CUkFORFMuVklTQV06IGAke0JBU0VfQ0FSRF9JTUFHRV9VUkx9L3Zpc2EtbGlnaHQucG5nYCxcbiAgW0NBUkRfQlJBTkRTLk1BU1RFUkNBUkRdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9tYXN0ZXJjYXJkLWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5BTUVYXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vYW1leC1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuRElTQ09WRVJdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9kaXNjb3Zlci1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuRElORVJTX0NMVUJdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9kaW5lcnNfY2x1Yi1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuSkNCXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vamNiLWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5NQUVTVFJPXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vbWFlc3Ryby1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuVU5JT05fUEFZXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vdW5pb25fcGF5LWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5SVV9QQVldOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9ydV9wYXktbGlnaHQucG5nYCxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkSW1hZ2VVcmwoYnJhbmQ6IENhcmRCcmFuZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBDQVJEX0JSQU5EU19UT19JTUFHRV9VUkxfTUFQW2JyYW5kXTtcbn1cbiIsICJpbXBvcnQgeyBJY29uIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgU2VhcmNoZXIgfSBmcm9tIFwiZmFzdC1mdXp6eVwiO1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFVSTCB9IGZyb20gXCJ1cmxcIjtcbmltcG9ydCB7IElURU1fVFlQRV9UT19MQUJFTCB9IGZyb20gXCJ+L2NvbnN0YW50cy9sYWJlbHNcIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZmF2aWNvblVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9tYWluID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICAgIHJldHVybiBgaHR0cHM6Ly9pY29ucy5iaXR3YXJkZW4ubmV0LyR7ZG9tYWlufS9pY29uLnBuZ2A7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBJY29uLkdsb2JlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWYXVsdFNlYXJjaChpdGVtczogSXRlbVtdKSB7XG4gIGNvbnN0IFtzZWFyY2hUZXh0LCBzZXRTZWFyY2hUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuXG4gIGNvbnN0IHNlYXJjaGVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hlcihpdGVtcywge1xuICAgICAgaWdub3JlU3ltYm9sczogZmFsc2UsXG4gICAgICB0aHJlc2hvbGQ6IDAuNyxcbiAgICAgIGtleVNlbGVjdG9yOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCB7IGxvZ2luLCBjYXJkIH0gPSBpdGVtO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIGl0ZW0ubmFtZSxcbiAgICAgICAgICBJVEVNX1RZUEVfVE9fTEFCRUxbaXRlbS50eXBlXSxcbiAgICAgICAgICBsb2dpbj8udXNlcm5hbWUsXG4gICAgICAgICAgbG9naW4/LnVyaXM/Lm1hcCgoeyB1cmkgfSkgPT4gdXJpKSxcbiAgICAgICAgICBjYXJkPy5icmFuZCxcbiAgICAgICAgICBjYXJkPy5udW1iZXIsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmxhdCgpXG4gICAgICAgICAgLmZpbHRlcigodmFsdWUpOiB2YWx1ZSBpcyBzdHJpbmcgPT4gISF2YWx1ZSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9LCBbaXRlbXNdKTtcblxuICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFzZWFyY2hUZXh0KSByZXR1cm4gaXRlbXM7XG4gICAgcmV0dXJuIHNlYXJjaGVyLnNlYXJjaChzZWFyY2hUZXh0KTtcbiAgfSwgW3NlYXJjaGVyLCBzZWFyY2hUZXh0XSk7XG5cbiAgcmV0dXJuIHsgc2V0U2VhcmNoVGV4dCwgZmlsdGVyZWRJdGVtcyB9O1xufVxuIiwgImltcG9ydCBzcGxpdCBmcm9tICdncmFwaGVtZXNwbGl0JztcblxuY29uc3Qgc3BsaXRVbmljb2RlID0gc3RyID0+IHN0ci5ub3JtYWxpemUoXCJORktEXCIpLnNwbGl0KFwiXCIpO1xuXG5jb25zdCB3aGl0ZXNwYWNlUmVnZXggPSAvXlxccyskLztcbmNvbnN0IG5vbldvcmRSZWdleCA9IC9eW2B+IUAjJCVeJiooKVxcLT1fK3t9W1xcXVxcfFxcXFw7JzpcIiwuLzw+P10rJC87XG5jb25zdCBzb3J0S2luZCA9IHtcbiAgaW5zZXJ0T3JkZXI6IFwiaW5zZXJ0T3JkZXJcIixcbiAgYmVzdE1hdGNoOiBcImJlc3RNYXRjaFwiXG59OyAvLyB0aGUgZGVmYXVsdCBvcHRpb25zLCB3aGljaCB3aWxsIGJlIHVzZWQgZm9yIGFueSB1bnNldCBvcHRpb25cblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGtleVNlbGVjdG9yOiBzID0+IHMsXG4gIHRocmVzaG9sZDogLjYsXG4gIGlnbm9yZUNhc2U6IHRydWUsXG4gIGlnbm9yZVN5bWJvbHM6IHRydWUsXG4gIG5vcm1hbGl6ZVdoaXRlc3BhY2U6IHRydWUsXG4gIHJldHVybk1hdGNoRGF0YTogZmFsc2UsXG4gIHVzZURhbWVyYXU6IHRydWUsXG4gIHVzZVNlbGxlcnM6IHRydWUsXG4gIHVzZVNlcGFyYXRlZFVuaWNvZGU6IGZhbHNlLFxuICBzb3J0Qnk6IHNvcnRLaW5kLmJlc3RNYXRjaFxufTtcblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuXG5jb25zdCBhcnJheVdyYXAgPSBpdGVtID0+IGl0ZW0gaW5zdGFuY2VvZiBBcnJheSA/IGl0ZW0gOiBbaXRlbV07IC8vIHJldHVybiBub3JtYWxpemVkIHN0cmluZywgd2l0aCBtYXAgaW5jbHVkZWRcblxuXG5mdW5jdGlvbiBub3JtYWxpemUoc3RyaW5nLCBvcHRpb25zKSB7XG4gIGNvbnN0IGxvd2VyID0gb3B0aW9ucy5pZ25vcmVDYXNlID8gc3RyaW5nLnRvTG9jYWxlTG93ZXJDYXNlKCkgOiBzdHJpbmc7IC8vIHRyYWNrIHRyYW5zZm9ybWF0aW9uc1xuXG4gIGNvbnN0IG5vcm1hbCA9IFtdO1xuICBjb25zdCBtYXAgPSBbXTtcbiAgbGV0IGxhc3RXYXNXaGl0ZXNwYWNlID0gdHJ1ZTtcbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGNvbnN0IGdyYXBoZW1lTGlzdCA9IG9wdGlvbnMudXNlU2VwYXJhdGVkVW5pY29kZSA/IHNwbGl0VW5pY29kZShsb3dlcikgOiBzcGxpdChsb3dlcik7XG5cbiAgZm9yIChjb25zdCBncmFwaGVtZSBvZiBncmFwaGVtZUxpc3QpIHtcbiAgICB3aGl0ZXNwYWNlUmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICBub25Xb3JkUmVnZXgubGFzdEluZGV4ID0gMDtcblxuICAgIGlmIChvcHRpb25zLm5vcm1hbGl6ZVdoaXRlc3BhY2UgJiYgd2hpdGVzcGFjZVJlZ2V4LnRlc3QoZ3JhcGhlbWUpKSB7XG4gICAgICBpZiAoIWxhc3RXYXNXaGl0ZXNwYWNlKSB7XG4gICAgICAgIG5vcm1hbC5wdXNoKFwiIFwiKTtcbiAgICAgICAgbWFwLnB1c2gobGVuZ3RoKTtcbiAgICAgICAgbGFzdFdhc1doaXRlc3BhY2UgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShvcHRpb25zLmlnbm9yZVN5bWJvbHMgJiYgbm9uV29yZFJlZ2V4LnRlc3QoZ3JhcGhlbWUpKSkge1xuICAgICAgaWYgKG9wdGlvbnMudXNlU2VwYXJhdGVkVW5pY29kZSkge1xuICAgICAgICBub3JtYWwucHVzaChncmFwaGVtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3JtYWwucHVzaChncmFwaGVtZS5ub3JtYWxpemUoKSk7XG4gICAgICB9XG5cbiAgICAgIG1hcC5wdXNoKGxlbmd0aCk7XG4gICAgICBsYXN0V2FzV2hpdGVzcGFjZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxlbmd0aCArPSBncmFwaGVtZS5sZW5ndGg7XG4gIH0gLy8gYWRkIHRoZSBlbmQgb2YgdGhlIHN0cmluZ1xuXG5cbiAgbWFwLnB1c2goc3RyaW5nLmxlbmd0aCk7XG5cbiAgd2hpbGUgKG5vcm1hbFtub3JtYWwubGVuZ3RoIC0gMV0gPT09IFwiIFwiKSB7XG4gICAgbm9ybWFsLnBvcCgpO1xuICAgIG1hcC5wb3AoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb3JpZ2luYWw6IHN0cmluZyxcbiAgICBub3JtYWwsXG4gICAgbWFwXG4gIH07XG59IC8vIHRyYW5zbGF0ZXMgYSBtYXRjaCB0byB0aGUgb3JpZ2luYWwgc3RyaW5nXG5cblxuZnVuY3Rpb24gZGVub3JtYWxpemVNYXRjaFBvc2l0aW9uKG1hdGNoLCBtYXApIHtcbiAgcmV0dXJuIHtcbiAgICBpbmRleDogbWFwW21hdGNoLnN0YXJ0XSxcbiAgICBsZW5ndGg6IG1hcFttYXRjaC5lbmQgKyAxXSAtIG1hcFttYXRjaC5zdGFydF1cbiAgfTtcbn0gLy8gd2Fsa3MgYmFjayB1cCB0aGUgbWF0cml4IHRvIGZpbmQgdGhlIG1hdGNoIGluZGV4IGFuZCBsZW5ndGhcblxuXG5mdW5jdGlvbiB3YWxrQmFjayhyb3dzLCBzY29yZUluZGV4KSB7XG4gIGlmIChzY29yZUluZGV4ID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluZGV4OiAwLFxuICAgICAgbGVuZ3RoOiAwXG4gICAgfTtcbiAgfVxuXG4gIGxldCBzdGFydCA9IHNjb3JlSW5kZXg7XG5cbiAgZm9yIChsZXQgaSA9IHJvd3MubGVuZ3RoIC0gMjsgaSA+IDAgJiYgc3RhcnQgPiAxOyBpLS0pIHtcbiAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgIHN0YXJ0ID0gcm93W3N0YXJ0XSA8IHJvd1tzdGFydCAtIDFdID8gc3RhcnQgOiBzdGFydCAtIDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBzdGFydCAtIDEsXG4gICAgZW5kOiBzY29yZUluZGV4IC0gMVxuICB9O1xufSAvLyB3YWxrYmFjayBpcyBhIG5vb3AgZm9yIG5vbi1zZWxsZXJzLCBidXQgc2hvdWxkIHN0aWxsIHJldHVybiBhbiBvYmplY3RcblxuXG5mdW5jdGlvbiBub29wV2Fsa2JhY2soKSB7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IDAsXG4gICAgZW5kOiAwXG4gIH07XG59XG5cbmNvbnN0IGxldlVwZGF0ZVNjb3JlID0gKCkgPT4gdHJ1ZTtcblxuY29uc3Qgc2VsbGVyc1VwZGF0ZVNjb3JlID0gKGN1ciwgbWluKSA9PiBjdXIgPCBtaW47XG5cbmZ1bmN0aW9uIGdldExldlNjb3JlKHJvd3MsIGxlbmd0aCkge1xuICBjb25zdCBsYXN0Um93ID0gcm93c1tyb3dzLmxlbmd0aCAtIDFdO1xuICBjb25zdCBsYXN0Q2VsbCA9IGxhc3RSb3dbbGVuZ3RoIC0gMV07XG4gIGNvbnN0IHNjb3JlTGVuZ3RoID0gTWF0aC5tYXgocm93cy5sZW5ndGgsIGxlbmd0aCk7XG4gIHJldHVybiB7XG4gICAgc2NvcmU6IDEgLSBsYXN0Q2VsbCAvIChzY29yZUxlbmd0aCAtIDEpLFxuICAgIHNjb3JlSW5kZXg6IGxlbmd0aCAtIDFcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2VsbGVyc1Njb3JlKHJvd3MsIGxlbmd0aCkge1xuICAvLyBzZWFyY2ggdGVybSB3YXMgZW1wdHkgc3RyaW5nLCByZXR1cm4gcGVyZmVjdCBzY29yZVxuICBpZiAocm93cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcmU6IDEsXG4gICAgICBzY29yZUluZGV4OiAwXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGxhc3RSb3cgPSByb3dzW3Jvd3MubGVuZ3RoIC0gMV07XG4gIGxldCBtaW5WYWx1ZSA9IGxhc3RSb3dbMF07XG4gIGxldCBtaW5JbmRleCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHZhbCA9IGxhc3RSb3dbaV07XG5cbiAgICBpZiAodmFsIDwgbWluVmFsdWUpIHtcbiAgICAgIG1pblZhbHVlID0gdmFsO1xuICAgICAgbWluSW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2NvcmU6IDEgLSBtaW5WYWx1ZSAvIChyb3dzLmxlbmd0aCAtIDEpLFxuICAgIHNjb3JlSW5kZXg6IG1pbkluZGV4XG4gIH07XG59XG5cbmZ1bmN0aW9uIGluaXRMZXZSb3dzKHJvd0NvdW50LCBjb2x1bW5Db3VudCkge1xuICBjb25zdCByb3dzID0gbmV3IEFycmF5KHJvd0NvdW50KTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd0NvdW50OyBpKyspIHtcbiAgICByb3dzW2ldID0gbmV3IEFycmF5KGNvbHVtbkNvdW50KTtcbiAgICByb3dzW2ldWzBdID0gaTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29sdW1uQ291bnQ7IGkrKykge1xuICAgIHJvd3NbMF1baV0gPSBpO1xuICB9XG5cbiAgcmV0dXJuIHJvd3M7XG59XG5cbmZ1bmN0aW9uIGluaXRTZWxsZXJzUm93cyhyb3dDb3VudCwgY29sdW1uQ291bnQpIHtcbiAgY29uc3Qgcm93cyA9IG5ldyBBcnJheShyb3dDb3VudCk7XG4gIHJvd3NbMF0gPSBuZXcgQXJyYXkoY29sdW1uQ291bnQpLmZpbGwoMCk7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dDb3VudDsgaSsrKSB7XG4gICAgcm93c1tpXSA9IG5ldyBBcnJheShjb2x1bW5Db3VudCk7XG4gICAgcm93c1tpXVswXSA9IGk7XG4gIH1cblxuICByZXR1cm4gcm93cztcbn0gLy8gdGhlIGNvbnRlbnQgb2YgdGhlIGlubmVybW9zdCBsb29wIG9mIGxldmVuc2h0ZWluXG5cblxuZnVuY3Rpb24gbGV2Q29yZSh0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIGksIGopIHtcbiAgY29uc3Qgcm93QSA9IHJvd3NbaV07XG4gIGNvbnN0IHJvd0IgPSByb3dzW2kgKyAxXTtcbiAgY29uc3QgY29zdCA9IHRlcm1baV0gPT09IGNhbmRpZGF0ZVtqXSA/IDAgOiAxO1xuICBsZXQgbTtcbiAgbGV0IG1pbiA9IHJvd0Jbal0gKyAxOyAvLyBpbnNlcnRpb25cblxuICBpZiAoKG0gPSByb3dBW2ogKyAxXSArIDEpIDwgbWluKSBtaW4gPSBtOyAvLyBkZWxldGlvblxuXG4gIGlmICgobSA9IHJvd0Fbal0gKyBjb3N0KSA8IG1pbikgbWluID0gbTsgLy8gc3Vic3RpdHV0aW9uXG5cbiAgcm93QltqICsgMV0gPSBtaW47XG59IC8vIHJ1bnRpbWUgY29tcGxleGl0eTogTyhtbikgd2hlcmUgbSBhbmQgbiBhcmUgdGhlIGxlbmd0aHMgb2YgdGVybSBhbmQgY2FuZGlkYXRlLCByZXNwZWN0aXZlbHlcbi8vIE5vdGU6IHRoaXMgbWV0aG9kIG9ubHkgcnVucyBvbiBhIHNpbmdsZSBjb2x1bW5cblxuXG5mdW5jdGlvbiBsZXZlbnNodGVpbih0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIGopIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXJtLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV2Q29yZSh0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIGksIGopO1xuICB9XG59IC8vIGhhcyBhbGwgdGhlIHJ1bnRpbWUgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBhYm92ZSwgYnV0IHB1bmlzaGVzIHRyYW5zcG9zaXRpb25zIGxlc3MsXG4vLyByZXN1bHRpbmcgaW4gYmV0dGVyIHRvbGVyYW5jZSB0byB0aG9zZSB0eXBlcyBvZiB0eXBvc1xuLy8gTm90ZTogdGhpcyBtZXRob2Qgb25seSBydW5zIG9uIGEgc2luZ2xlIGNvbHVtblxuXG5cbmZ1bmN0aW9uIGRhbWVyYXVMZXZlbnNodGVpbih0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIGopIHtcbiAgLy8gaWYgaiA9PT0gMCwgd2UgY2FuJ3QgY2hlY2sgZm9yIHRyYW5zcG9zaXRpb25zLFxuICAvLyBzbyB1c2Ugbm9ybWFsIGxldmVuc2h0ZWluIGluc3RlYWRcbiAgaWYgKGogPT09IDApIHtcbiAgICBsZXZlbnNodGVpbih0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIGopO1xuICAgIHJldHVybjtcbiAgfSAvLyBmb3IgaSA9PT0gMCwgd2UgYWxzbyBjYW4ndCBjaGVjayBmb3IgdHJhbnNwb3NpdGlvbnMsIHNvIGNhbGN1bGF0ZVxuICAvLyB0aGUgZmlyc3Qgcm93IHVzaW5nIG5vcm1hbCBsZXZlbnNodGVpbiBhcyB3ZWxsXG5cblxuICBpZiAodGVybS5sZW5ndGggPiAwKSB7XG4gICAgbGV2Q29yZSh0ZXJtLCBjYW5kaWRhdGUsIHJvd3MsIDAsIGopO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCB0ZXJtLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgcm93QSA9IHJvd3NbaSAtIDFdO1xuICAgIGNvbnN0IHJvd0IgPSByb3dzW2ldO1xuICAgIGNvbnN0IHJvd0MgPSByb3dzW2kgKyAxXTtcbiAgICBjb25zdCBjb3N0ID0gdGVybVtpXSA9PT0gY2FuZGlkYXRlW2pdID8gMCA6IDE7XG4gICAgbGV0IG07IC8vIGluc2VydGlvblxuXG4gICAgbGV0IG1pbiA9IHJvd0Nbal0gKyAxOyAvLyBkZWxldGlvblxuXG4gICAgaWYgKChtID0gcm93QltqICsgMV0gKyAxKSA8IG1pbikgbWluID0gbTsgLy8gc3Vic3RpdHV0aW9uXG5cbiAgICBpZiAoKG0gPSByb3dCW2pdICsgY29zdCkgPCBtaW4pIG1pbiA9IG07IC8vIHRyYW5zcG9zaXRpb25cblxuICAgIGlmICh0ZXJtW2ldID09PSBjYW5kaWRhdGVbaiAtIDFdICYmIHRlcm1baSAtIDFdID09PSBjYW5kaWRhdGVbal0gJiYgKG0gPSByb3dBW2ogLSAxXSArIGNvc3QpIDwgbWluKSBtaW4gPSBtO1xuICAgIHJvd0NbaiArIDFdID0gbWluO1xuICB9XG59IC8vIG1ldGhvZCBmb3IgY3JlYXRpbmcgYSB0cmllIGZyb20gc2VhcmNoIGNhbmRpZGF0ZXNcbi8vIHVzaW5nIGEgdHJpZSBjYW4gc2lnbmlmaWNhbnRseSBpbXByb3ZlIHNlYXJjaCB0aW1lXG5cblxuZnVuY3Rpb24gdHJpZUluc2VydCh0cmllLCBzdHJpbmcsIGl0ZW0pIHtcbiAgbGV0IHdhbGtlciA9IHRyaWU7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyID0gc3RyaW5nW2ldOyAvLyBhZGQgY2hpbGQgbm9kZSBpZiBub3QgYWxyZWFkeSBwcmVzZW50XG5cbiAgICBpZiAod2Fsa2VyLmNoaWxkcmVuW2NoYXJdID09IG51bGwpIHtcbiAgICAgIHdhbGtlci5jaGlsZHJlbltjaGFyXSA9IHtcbiAgICAgICAgY2hpbGRyZW46IHt9LFxuICAgICAgICBjYW5kaWRhdGVzOiBbXSxcbiAgICAgICAgZGVwdGg6IDBcbiAgICAgIH07XG4gICAgfSAvLyBsb2cgbWF4IGRlcHRoIG9mIHRoaXMgc3VidHJlZVxuXG5cbiAgICB3YWxrZXIuZGVwdGggPSBNYXRoLm1heCh3YWxrZXIuZGVwdGgsIHN0cmluZy5sZW5ndGggLSBpKTsgLy8gc3RlcCBpbnRvIGNoaWxkIG5vZGVcblxuICAgIHdhbGtlciA9IHdhbGtlci5jaGlsZHJlbltjaGFyXTtcbiAgfVxuXG4gIHdhbGtlci5jYW5kaWRhdGVzLnB1c2goaXRlbSk7XG59IC8vIHRyYW5zZm9ybXMgYSBsaXN0IG9mIGNhbmRpZGF0ZXMgaW50byBvYmplY3RzIHdpdGggbm9ybWFsaXplZCBzZWFyY2gga2V5cyxcbi8vIGFuZCBpbnNlcnRzIHRoZW0gaW50byBhIHRyaWVcbi8vIHRoZSBrZXlTZWxlY3RvciBpcyB1c2VkIHRvIHBpY2sgc3RyaW5ncyBmcm9tIGFuIG9iamVjdCB0byBzZWFyY2ggYnlcblxuXG5mdW5jdGlvbiBjcmVhdGVTZWFyY2hUcmllKHRyaWUsIGluZGV4LCBpdGVtcywgb3B0aW9ucykge1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gYXJyYXlXcmFwKG9wdGlvbnMua2V5U2VsZWN0b3IoaXRlbSkpLm1hcCgoa2V5LCBrZXlJbmRleCkgPT4gKHtcbiAgICAgIGluZGV4LFxuICAgICAga2V5SW5kZXgsXG4gICAgICBpdGVtLFxuICAgICAgbm9ybWFsaXplZDogbm9ybWFsaXplKGtleSwgb3B0aW9ucylcbiAgICB9KSk7XG4gICAgaW5kZXgrKztcblxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZXMpIHtcbiAgICAgIHRyaWVJbnNlcnQodHJpZSwgY2FuZGlkYXRlLm5vcm1hbGl6ZWQubm9ybWFsLCBjYW5kaWRhdGUpO1xuICAgIH1cbiAgfVxufSAvLyBzY29yZWQgaXRlbSBjb21wYXJhdG9yXG5cblxuZnVuY3Rpb24gY29tcGFyZUl0ZW1zQmVzdFNjb3JlKGEsIGIpIHtcbiAgLy8gaGlnaGVzdCBwcmlvcml0eSBpcyByYXcgbGV2ZW5zaHRlaW4gc2NvcmVcbiAgY29uc3Qgc2NvcmVEaWZmID0gYi5zY29yZSAtIGEuc2NvcmU7XG5cbiAgaWYgKHNjb3JlRGlmZiAhPT0gMCkge1xuICAgIHJldHVybiBzY29yZURpZmY7XG4gIH0gLy8gdGllcyBhcmUgYnJva2VuIGJ5IGVhcmxpZXIgbWF0Y2ggcG9zaXRpb25zXG5cblxuICBjb25zdCBtYXRjaFBvc0RpZmYgPSBhLm1hdGNoLnN0YXJ0IC0gYi5tYXRjaC5zdGFydDtcblxuICBpZiAobWF0Y2hQb3NEaWZmICE9PSAwKSB7XG4gICAgcmV0dXJuIG1hdGNoUG9zRGlmZjtcbiAgfSAvLyBwcmlvcml0aXplIGVhcmxpZXIga2V5c1xuXG5cbiAgY29uc3Qga2V5SW5kZXhEaWZmID0gYS5rZXlJbmRleCAtIGIua2V5SW5kZXg7XG5cbiAgaWYgKGtleUluZGV4RGlmZiAhPT0gMCkge1xuICAgIHJldHVybiBrZXlJbmRleERpZmY7XG4gIH0gLy8gbGFzdGx5LCBicmVhayB0aWVzIGJ5IHByZWZlcnJpbmcgdGhlIGNsb3NlciBsZW5ndGggbWF0Y2hcblxuXG4gIGNvbnN0IGxlbmd0aERpZmYgPSBhLmxlbmd0aERpZmYgLSBiLmxlbmd0aERpZmY7XG5cbiAgaWYgKGxlbmd0aERpZmYgIT09IDApIHtcbiAgICByZXR1cm4gbGVuZ3RoRGlmZjtcbiAgfSAvLyBpZiBhbGwgZWxzZSBmYWlscywgcmVzb3J0IHRvIGluc2VydGlvbiBvcmRlclxuXG5cbiAgcmV0dXJuIGNvbXBhcmVJdGVtc0luc2VydE9yZGVyKGEsIGIpO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlSXRlbXNJbnNlcnRPcmRlcihhLCBiKSB7XG4gIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbn1cblxuZnVuY3Rpb24gZ2V0Q29tcGFyZUZ1bmMoc29ydEJ5KSB7XG4gIHN3aXRjaCAoc29ydEJ5KSB7XG4gICAgY2FzZSBzb3J0S2luZC5iZXN0TWF0Y2g6XG4gICAgICByZXR1cm4gY29tcGFyZUl0ZW1zQmVzdFNjb3JlO1xuXG4gICAgY2FzZSBzb3J0S2luZC5pbnNlcnRPcmRlcjpcbiAgICAgIHJldHVybiBjb21wYXJlSXRlbXNJbnNlcnRPcmRlcjtcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gc29ydEJ5IG1ldGhvZCAke3NvcnRCeX1gKTtcbiAgfVxufSAvLyBkZWR1cGVzIGFuZCBhZGRzIHJlc3VsdHMgdG8gdGhlIHJlc3VsdHMgbGlzdC9tYXBcblxuXG5mdW5jdGlvbiBhZGRSZXN1bHQocmVzdWx0cywgcmVzdWx0TWFwLCBjYW5kaWRhdGUsIHNjb3JlLCBtYXRjaCwgbGVuZ3RoRGlmZiwgY29tcGFyZUl0ZW1zKSB7XG4gIGNvbnN0IHNjb3JlZEl0ZW0gPSB7XG4gICAgaXRlbTogY2FuZGlkYXRlLml0ZW0sXG4gICAgbm9ybWFsaXplZDogY2FuZGlkYXRlLm5vcm1hbGl6ZWQsXG4gICAgc2NvcmUsXG4gICAgbWF0Y2gsXG4gICAgaW5kZXg6IGNhbmRpZGF0ZS5pbmRleCxcbiAgICBrZXlJbmRleDogY2FuZGlkYXRlLmtleUluZGV4LFxuICAgIGxlbmd0aERpZmZcbiAgfTtcblxuICBpZiAocmVzdWx0TWFwW2NhbmRpZGF0ZS5pbmRleF0gPT0gbnVsbCkge1xuICAgIHJlc3VsdE1hcFtjYW5kaWRhdGUuaW5kZXhdID0gcmVzdWx0cy5sZW5ndGg7XG4gICAgcmVzdWx0cy5wdXNoKHNjb3JlZEl0ZW0pO1xuICB9IGVsc2UgaWYgKGNvbXBhcmVJdGVtcyhzY29yZWRJdGVtLCByZXN1bHRzW3Jlc3VsdE1hcFtjYW5kaWRhdGUuaW5kZXhdXSkgPCAwKSB7XG4gICAgcmVzdWx0c1tyZXN1bHRNYXBbY2FuZGlkYXRlLmluZGV4XV0gPSBzY29yZWRJdGVtO1xuICB9XG59XG5cbmNvbnN0IGdldExldkxlbmd0aCA9IE1hdGgubWF4O1xuXG5jb25zdCBnZXRTZWxsZXJzTGVuZ3RoID0gdGVybUxlbmd0aCA9PiB0ZXJtTGVuZ3RoOyAvLyBza2lwIGFueSBzdWJ0cmVlcyBmb3Igd2hpY2ggaXQgaXMgaW1wb3NzaWJsZSB0byBzY29yZSA+PSB0aHJlc2hvbGRcblxuXG5mdW5jdGlvbiBsZXZTaG91bGRDb250aW51ZShub2RlLCBwb3MsIHRlcm0sIHRocmVzaG9sZCwgc1ZhbHVlKSB7XG4gIC8vIGVhcmxpZXN0IHBvaW50IChsZW5ndGgpIGF0IHdoaWNoIHNWYWx1ZSBjb3VsZCByZXR1cm4gdG8gMFxuICBjb25zdCBwMSA9IHBvcyArIHNWYWx1ZTsgLy8gcG9pbnQgKGxlbmd0aCkgYXQgd2hpY2ggc3RyaW5nIGxlbmd0aHMgd291bGQgbWF0Y2hcblxuICBjb25zdCBwMiA9IE1hdGgubWluKHRlcm0ubGVuZ3RoLCBwb3MgKyBub2RlLmRlcHRoICsgMSk7IC8vIHRoZSBiZXN0IHNjb3JlIHBvc3NpYmxlIGlzIHRoZSBzdHJpbmcgd2hpY2ggbWluaW1pemVzIHRoZSB2YWx1ZVxuICAvLyBtYXgoc1ZhbHVlLCBzdHJMZW5EaWZmKSwgd2hpY2ggaXMgYWx3YXlzIGhhbGZ3YXkgYmV0d2VlbiBwMSBhbmQgcDJcblxuICBjb25zdCBsZW5ndGggPSBNYXRoLmNlaWwoKHAxICsgcDIpIC8gMik7XG4gIGNvbnN0IGJlc3RQb3NzaWJsZVZhbHVlID0gbGVuZ3RoIC0gcDI7XG4gIHJldHVybiAxIC0gYmVzdFBvc3NpYmxlVmFsdWUgLyBsZW5ndGggPj0gdGhyZXNob2xkO1xufVxuXG5mdW5jdGlvbiBzZWxsZXJzU2hvdWxkQ29udGludWUobm9kZSwgXywgdGVybSwgdGhyZXNob2xkLCBzVmFsdWUsIGxhc3RWYWx1ZSkge1xuICBjb25zdCBiZXN0UG9zc2libGVWYWx1ZSA9IE1hdGgubWluKHNWYWx1ZSwgbGFzdFZhbHVlIC0gKG5vZGUuZGVwdGggKyAxKSk7XG4gIHJldHVybiAxIC0gYmVzdFBvc3NpYmxlVmFsdWUgLyB0ZXJtLmxlbmd0aCA+PSB0aHJlc2hvbGQ7XG59IC8vIChwc2V1ZG8pIHJlY3Vyc2l2ZWx5IHdhbGsgdGhlIHRyaWVcblxuXG5mdW5jdGlvbiBzZWFyY2hSZWN1cnNlKHRyaWUsIHRlcm0sIHNjb3JlTWV0aG9kcywgcm93cywgcmVzdWx0cywgcmVzdWx0TWFwLCBvcHRpb25zKSB7XG4gIGNvbnN0IHN0YWNrID0gW107XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gdHJpZS5jaGlsZHJlbikge1xuICAgIGNvbnN0IG5vZGUgPSB0cmllLmNoaWxkcmVuW2tleV07XG4gICAgc3RhY2sucHVzaChbbm9kZSwgMSwga2V5LCAwLCB0ZXJtLmxlbmd0aF0pO1xuICB9XG5cbiAgY29uc3QgYWNjID0gbmV3IEFycmF5KHRyaWUuZGVwdGgpO1xuXG4gIHdoaWxlIChzdGFjay5sZW5ndGggIT09IDApIHtcbiAgICBjb25zdCBbbm9kZSwgbGVuLCBjaGFyLCBzaSwgc3ZdID0gc3RhY2sucG9wKCk7XG4gICAgYWNjW2xlbiAtIDFdID0gY2hhcjsgLy8gYnVpbGQgcm93c1xuXG4gICAgc2NvcmVNZXRob2RzLnNjb3JlKHRlcm0sIGFjYywgcm93cywgbGVuIC0gMSk7IC8vIHRyYWNrIGJlc3Qgc2NvcmUgYW5kIHBvc2l0aW9uXG5cbiAgICBjb25zdCBsYXN0SW5kZXggPSBsZW47XG4gICAgY29uc3QgbGFzdFZhbHVlID0gcm93c1tyb3dzLmxlbmd0aCAtIDFdW2xhc3RJbmRleF07XG4gICAgbGV0IHNJbmRleCA9IHNpLFxuICAgICAgICBzVmFsdWUgPSBzdjtcblxuICAgIGlmIChzY29yZU1ldGhvZHMuc2hvdWxkVXBkYXRlU2NvcmUobGFzdFZhbHVlLCBzdikpIHtcbiAgICAgIHNJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgIHNWYWx1ZSA9IGxhc3RWYWx1ZTtcbiAgICB9IC8vIGluc2VydCByZXN1bHRzXG5cblxuICAgIGlmIChub2RlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGVuZ3RoID0gc2NvcmVNZXRob2RzLmdldExlbmd0aCh0ZXJtLmxlbmd0aCwgbGVuKTtcbiAgICAgIGNvbnN0IHNjb3JlID0gMSAtIHNWYWx1ZSAvIGxlbmd0aDtcblxuICAgICAgaWYgKHNjb3JlID49IG9wdGlvbnMudGhyZXNob2xkKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gd2Fsa0JhY2socm93cywgc0luZGV4KTtcbiAgICAgICAgY29uc3QgbGVuZ3RoRGlmZiA9IE1hdGguYWJzKGxlbiAtIHRlcm0ubGVuZ3RoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBub2RlLmNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICBhZGRSZXN1bHQocmVzdWx0cywgcmVzdWx0TWFwLCBjYW5kaWRhdGUsIHNjb3JlLCBtYXRjaCwgbGVuZ3RoRGlmZiwgc2NvcmVNZXRob2RzLmNvbXBhcmVJdGVtcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIHJlY3Vyc2UgZm9yIGNoaWxkcmVuXG5cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gbm9kZS5jaGlsZHJlbltrZXldO1xuXG4gICAgICBpZiAoc2NvcmVNZXRob2RzLnNob3VsZENvbnRpbnVlKGNoaWxkLCBsZW4sIHRlcm0sIG9wdGlvbnMudGhyZXNob2xkLCBzVmFsdWUsIGxhc3RWYWx1ZSkpIHtcbiAgICAgICAgc3RhY2sucHVzaChbY2hpbGQsIGxlbiArIDEsIGtleSwgc0luZGV4LCBzVmFsdWVdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0gLy8gdGhlIGNvcmUgbWF0Y2ggZmluZGVyOiByZXR1cm5zIGEgc29ydGVkLCBmaWx0ZXJlZCBsaXN0IG9mIG1hdGNoZXNcbi8vIHRoaXMgZG9lcyBub3Qgbm9ybWFsaXplIGlucHV0LCByZXF1aXJpbmcgdXNlcnMgdG8gbm9ybWFsaXplIHRoZW1zZWx2ZXNcblxuXG5mdW5jdGlvbiBzZWFyY2hDb3JlKHRlcm0sIHRyaWUsIG9wdGlvbnMpIHtcbiAgY29uc3QgaW5pdE1ldGhvZCA9IG9wdGlvbnMudXNlU2VsbGVycyA/IGluaXRTZWxsZXJzUm93cyA6IGluaXRMZXZSb3dzO1xuICBjb25zdCBzY29yZU1ldGhvZHMgPSB7XG4gICAgc2NvcmU6IG9wdGlvbnMudXNlRGFtZXJhdSA/IGRhbWVyYXVMZXZlbnNodGVpbiA6IGxldmVuc2h0ZWluLFxuICAgIGdldExlbmd0aDogb3B0aW9ucy51c2VTZWxsZXJzID8gZ2V0U2VsbGVyc0xlbmd0aCA6IGdldExldkxlbmd0aCxcbiAgICBzaG91bGRVcGRhdGVTY29yZTogb3B0aW9ucy51c2VTZWxsZXJzID8gc2VsbGVyc1VwZGF0ZVNjb3JlIDogbGV2VXBkYXRlU2NvcmUsXG4gICAgc2hvdWxkQ29udGludWU6IG9wdGlvbnMudXNlU2VsbGVycyA/IHNlbGxlcnNTaG91bGRDb250aW51ZSA6IGxldlNob3VsZENvbnRpbnVlLFxuICAgIHdhbGtCYWNrOiBvcHRpb25zLnVzZVNlbGxlcnMgPyB3YWxrQmFjayA6IG5vb3BXYWxrYmFjayxcbiAgICBjb21wYXJlSXRlbXM6IGdldENvbXBhcmVGdW5jKG9wdGlvbnMuc29ydEJ5KVxuICB9OyAvLyB3YWxrIHRoZSB0cmllLCBzY29yaW5nIGFuZCBzdG9yaW5nIHRoZSBjYW5kaWRhdGVzXG5cbiAgY29uc3QgcmVzdWx0TWFwID0ge307XG4gIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgY29uc3Qgcm93cyA9IGluaXRNZXRob2QodGVybS5sZW5ndGggKyAxLCB0cmllLmRlcHRoICsgMSk7XG5cbiAgaWYgKG9wdGlvbnMudGhyZXNob2xkIDw9IDAgfHwgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiB0cmllLmNhbmRpZGF0ZXMpIHtcbiAgICAgIGFkZFJlc3VsdChyZXN1bHRzLCByZXN1bHRNYXAsIGNhbmRpZGF0ZSwgMCwge1xuICAgICAgICBpbmRleDogMCxcbiAgICAgICAgbGVuZ3RoOiAwXG4gICAgICB9LCB0ZXJtLmxlbmd0aCwgc2NvcmVNZXRob2RzLmNvbXBhcmVJdGVtcyk7XG4gICAgfVxuICB9XG5cbiAgc2VhcmNoUmVjdXJzZSh0cmllLCB0ZXJtLCBzY29yZU1ldGhvZHMsIHJvd3MsIHJlc3VsdHMsIHJlc3VsdE1hcCwgb3B0aW9ucyk7XG4gIGNvbnN0IHNvcnRlZCA9IHJlc3VsdHMuc29ydChzY29yZU1ldGhvZHMuY29tcGFyZUl0ZW1zKTtcblxuICBpZiAob3B0aW9ucy5yZXR1cm5NYXRjaERhdGEpIHtcbiAgICBjb25zdCBkZW5vcm1hbGl6ZSA9IG9wdGlvbnMudXNlU2VsbGVycyA/IGRlbm9ybWFsaXplTWF0Y2hQb3NpdGlvbiA6IG5vb3A7XG4gICAgcmV0dXJuIHNvcnRlZC5tYXAoY2FuZGlkYXRlID0+ICh7XG4gICAgICBpdGVtOiBjYW5kaWRhdGUuaXRlbSxcbiAgICAgIG9yaWdpbmFsOiBjYW5kaWRhdGUubm9ybWFsaXplZC5vcmlnaW5hbCxcbiAgICAgIGtleTogY2FuZGlkYXRlLm5vcm1hbGl6ZWQubm9ybWFsLmpvaW4oXCJcIiksXG4gICAgICBzY29yZTogY2FuZGlkYXRlLnNjb3JlLFxuICAgICAgbWF0Y2g6IGRlbm9ybWFsaXplKGNhbmRpZGF0ZS5tYXRjaCwgY2FuZGlkYXRlLm5vcm1hbGl6ZWQubWFwKVxuICAgIH0pKTtcbiAgfVxuXG4gIHJldHVybiBzb3J0ZWQubWFwKGNhbmRpZGF0ZSA9PiBjYW5kaWRhdGUuaXRlbSk7XG59IC8vIHdyYXBwZXIgZm9yIGV4cG9ydGluZyBzZWxsZXJzIHdoaWxlIGFsbG93aW5nIG9wdGlvbnMgdG8gYmUgcGFzc2VkIGluXG5cblxuZnVuY3Rpb24gZnV6enkodGVybSwgY2FuZGlkYXRlLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbiAgY29uc3QgaW5pdE1ldGhvZCA9IG9wdGlvbnMudXNlU2VsbGVycyA/IGluaXRTZWxsZXJzUm93cyA6IGluaXRMZXZSb3dzO1xuICBjb25zdCBzY29yZU1ldGhvZCA9IG9wdGlvbnMudXNlRGFtZXJhdSA/IGRhbWVyYXVMZXZlbnNodGVpbiA6IGxldmVuc2h0ZWluO1xuICBjb25zdCBnZXRTY29yZSA9IG9wdGlvbnMudXNlU2VsbGVycyA/IGdldFNlbGxlcnNTY29yZSA6IGdldExldlNjb3JlO1xuICB0ZXJtID0gbm9ybWFsaXplKHRlcm0sIG9wdGlvbnMpLm5vcm1hbDtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZShjYW5kaWRhdGUsIG9wdGlvbnMpO1xuICBjb25zdCByb3dzID0gaW5pdE1ldGhvZCh0ZXJtLmxlbmd0aCArIDEsIG5vcm1hbGl6ZWQubm9ybWFsLmxlbmd0aCArIDEpO1xuXG4gIGZvciAobGV0IGogPSAwOyBqIDwgbm9ybWFsaXplZC5ub3JtYWwubGVuZ3RoOyBqKyspIHtcbiAgICBzY29yZU1ldGhvZCh0ZXJtLCBub3JtYWxpemVkLm5vcm1hbCwgcm93cywgaik7XG4gIH1cblxuICBjb25zdCBzY29yZVJlc3VsdCA9IGdldFNjb3JlKHJvd3MsIG5vcm1hbGl6ZWQubm9ybWFsLmxlbmd0aCArIDEpO1xuICByZXR1cm4gb3B0aW9ucy5yZXR1cm5NYXRjaERhdGEgPyB7XG4gICAgaXRlbTogY2FuZGlkYXRlLFxuICAgIG9yaWdpbmFsOiBub3JtYWxpemVkLm9yaWdpbmFsLFxuICAgIGtleTogbm9ybWFsaXplZC5ub3JtYWwuam9pbihcIlwiKSxcbiAgICBzY29yZTogc2NvcmVSZXN1bHQuc2NvcmUsXG4gICAgbWF0Y2g6IG9wdGlvbnMudXNlU2VsbGVycyA/IGRlbm9ybWFsaXplTWF0Y2hQb3NpdGlvbih3YWxrQmFjayhyb3dzLCBzY29yZVJlc3VsdC5zY29yZUluZGV4KSwgbm9ybWFsaXplZC5tYXApIDogbm9vcCgpXG4gIH0gOiBzY29yZVJlc3VsdC5zY29yZTtcbn0gLy8gc2ltcGxlIG9uZS1vZmYgc2VhcmNoLiBVc2VmdWwgaWYgeW91IGRvbid0IGV4cGVjdCB0byB1c2UgdGhlIHNhbWUgY2FuZGlkYXRlIGxpc3QgYWdhaW5cblxuZnVuY3Rpb24gc2VhcmNoKHRlcm0sIGNhbmRpZGF0ZXMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgLi4ub3B0aW9uc1xuICB9O1xuICBjb25zdCB0cmllID0ge1xuICAgIGNoaWxkcmVuOiB7fSxcbiAgICBjYW5kaWRhdGVzOiBbXSxcbiAgICBkZXB0aDogMFxuICB9O1xuICBjcmVhdGVTZWFyY2hUcmllKHRyaWUsIDAsIGNhbmRpZGF0ZXMsIG9wdGlvbnMpO1xuICByZXR1cm4gc2VhcmNoQ29yZShub3JtYWxpemUodGVybSwgb3B0aW9ucykubm9ybWFsLCB0cmllLCBvcHRpb25zKTtcbn0gLy8gY2xhc3MgdGhhdCBpbXByb3ZlcyBwZXJmb3JtYW5jZSBvZiBzZWFyY2hpbmcgdGhlIHNhbWUgc2V0IG11bHRpcGxlIHRpbWVzXG4vLyBub3JtYWxpemVzIHRoZSBzdHJpbmdzIGFuZCBjYWNoZXMgdGhlIHJlc3VsdCBmb3IgZnV0dXJlIGNhbGxzXG5cbmNsYXNzIFNlYXJjaGVyIHtcbiAgY29uc3RydWN0b3IoY2FuZGlkYXRlcywgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB0aGlzLnRyaWUgPSB7XG4gICAgICBjaGlsZHJlbjoge30sXG4gICAgICBjYW5kaWRhdGVzOiBbXSxcbiAgICAgIGRlcHRoOiAwXG4gICAgfTtcbiAgICBjcmVhdGVTZWFyY2hUcmllKHRoaXMudHJpZSwgMCwgY2FuZGlkYXRlcywgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLmNvdW50ID0gY2FuZGlkYXRlcy5sZW5ndGg7XG4gIH1cblxuICBhZGQoLi4uY2FuZGlkYXRlcykge1xuICAgIGNyZWF0ZVNlYXJjaFRyaWUodGhpcy50cmllLCB0aGlzLmNvdW50LCBjYW5kaWRhdGVzLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuY291bnQgKz0gY2FuZGlkYXRlcy5sZW5ndGg7XG4gIH1cblxuICBzZWFyY2godGVybSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIHJldHVybiBzZWFyY2hDb3JlKG5vcm1hbGl6ZSh0ZXJtLCB0aGlzLm9wdGlvbnMpLm5vcm1hbCwgdGhpcy50cmllLCBvcHRpb25zKTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IFNlYXJjaGVyLCBmdXp6eSwgc2VhcmNoLCBzb3J0S2luZCB9O1xuIiwgImltcG9ydCB7IFRvYXN0LCBzaG93VG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVIgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgdXNlQml0d2FyZGVuIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgZ2V0IHRoZSBsYXRlc3QgdmFsdWUgb2YgYSB2YXVsdCBpdGVtLlxuICogSWYgdGhlIHZhbHVlIGlzIGFscmVhZHkga25vd24sIGl0IHdpbGwgYmUgcmV0dXJuZWQgaW1tZWRpYXRlbHkuXG4gKiBPdGhlcndpc2UsIGl0IHdpbGwgd2FpdCBmb3IgdGhlIHZhbHVlIHRvIGJlIHJldHJpZXZlZCBmcm9tIHRoZSB2YXVsdC5cbiAqL1xuZnVuY3Rpb24gdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSgpIHtcbiAgY29uc3QgYml0d2FyZGVuID0gdXNlQml0d2FyZGVuKCk7XG4gIGNvbnN0IHdhaXRGb3JJdGVtTG9hZGVkID0gdXNlVmF1bHRJdGVtU3Vic2NyaWJlcigpO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEl0ZW1Gcm9tVmF1bHQoaWQ6IHN0cmluZyk6IFByb21pc2U8SXRlbT4ge1xuICAgIGNvbnN0IGl0ZW1zUmVzdWx0ID0gYXdhaXQgYml0d2FyZGVuLmdldEl0ZW0oaWQpO1xuICAgIGlmIChpdGVtc1Jlc3VsdC5lcnJvcikgdGhyb3cgaXRlbXNSZXN1bHQuZXJyb3I7XG4gICAgcmV0dXJuIGl0ZW1zUmVzdWx0LnJlc3VsdDtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEl0ZW08VFJlc3VsdCA9IEl0ZW0+KFxuICAgIHBvc3NpYmx5Q2FjaGVkSXRlbTogSXRlbSxcbiAgICBzZWxlY3RvciA9ICgoaXRlbSkgPT4gaXRlbSkgYXMgKGl0ZW06IEl0ZW0pID0+IFRSZXN1bHQsXG4gICAgbG9hZGluZ01lc3NhZ2U/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxUUmVzdWx0PiB7XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gc2VsZWN0b3IocG9zc2libHlDYWNoZWRJdGVtKTtcbiAgICBpZiAoIXZhbHVlSGFzU2Vuc2l0aXZlVmFsdWVQbGFjZWhvbGRlcihjdXJyZW50VmFsdWUpKSByZXR1cm4gY3VycmVudFZhbHVlO1xuXG4gICAgY29uc3QgdG9hc3QgPSBsb2FkaW5nTWVzc2FnZSA/IGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5BbmltYXRlZCwgbG9hZGluZ01lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHZhbHVlID0gc2VsZWN0b3IoXG4gICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW3dhaXRGb3JJdGVtTG9hZGVkKHBvc3NpYmx5Q2FjaGVkSXRlbS5pZCksIGdldEl0ZW1Gcm9tVmF1bHQocG9zc2libHlDYWNoZWRJdGVtLmlkKV0pXG4gICAgKTtcbiAgICBhd2FpdCB0b2FzdD8uaGlkZSgpO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIGdldEl0ZW07XG59XG5cbmZ1bmN0aW9uIHZhbHVlSGFzU2Vuc2l0aXZlVmFsdWVQbGFjZWhvbGRlcih2YWx1ZTogYW55KSB7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5pbmNsdWRlcyhTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVIpO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZSA9PT0gU0VOU0lUSVZFX1ZBTFVFX1BMQUNFSE9MREVSO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlR2V0VXBkYXRlZFZhdWx0SXRlbTtcbiIsICJpbXBvcnQgeyBUb2FzdCwgZ2V0UHJlZmVyZW5jZVZhbHVlcywgcG9wVG9Sb290LCBzaG93SFVELCBzaG93VG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBjYXBpdGFsaXplIH0gZnJvbSBcIn4vdXRpbHMvc3RyaW5nc1wiO1xuXG4vKiogRGlzcGxheXMgYSBIVUQgb3IgVG9hc3QgYW5kIGNsb3NlcyB0aGUgd2luZG93IG9yIG5vdCwgZGVwZW5kaW5nIG9uIHRoZSBwcmVmZXJlbmNlcy4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlKHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgY29uc3QgYWN0aW9uID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKS53aW5kb3dBY3Rpb25PbkNvcHk7XG4gIGNvbnN0IG1lc3NhZ2VUaXRsZSA9IGNhcGl0YWxpemUodGl0bGUsIHRydWUpO1xuXG4gIGlmIChhY3Rpb24gPT09IFwia2VlcE9wZW5cIikge1xuICAgIGF3YWl0IHNob3dUb2FzdCh7IHRpdGxlOiBtZXNzYWdlVGl0bGUsIG1lc3NhZ2UsIHN0eWxlOiBUb2FzdC5TdHlsZS5TdWNjZXNzIH0pO1xuICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJjbG9zZUFuZFBvcFRvUm9vdFwiKSB7XG4gICAgYXdhaXQgc2hvd0hVRChtZXNzYWdlVGl0bGUpO1xuICAgIGF3YWl0IHBvcFRvUm9vdCgpO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHNob3dIVUQobWVzc2FnZVRpdGxlKTtcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBjYXBpdGFsaXplID0gKHZhbHVlOiBzdHJpbmcsIGxvd2VyY2FzZVJlc3QgPSBmYWxzZSkgPT4ge1xuICBjb25zdCBmaXJzdExldHRlciA9IHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpO1xuICBjb25zdCByZXN0ID0gbG93ZXJjYXNlUmVzdCA/IHZhbHVlLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkgOiB2YWx1ZS5zbGljZSgxKTtcblxuICByZXR1cm4gZmlyc3RMZXR0ZXIgKyByZXN0O1xufTtcbiIsICJpbXBvcnQgeyBnZXRGcm9udG1vc3RBcHBsaWNhdGlvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlRnJvbnRtb3N0QXBwbGljYXRpb25OYW1lKCkge1xuICBjb25zdCBbY3VycmVudEFwcGxpY2F0aW9uLCBzZXRDdXJyZW50QXBwbGljYXRpb25dID0gdXNlU3RhdGU8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdm9pZCBnZXRGcm9udG1vc3RBcHBsaWNhdGlvbigpXG4gICAgICAudGhlbigoYXBwbGljYXRpb24pID0+IHNldEN1cnJlbnRBcHBsaWNhdGlvbihhcHBsaWNhdGlvbi5uYW1lKSlcbiAgICAgIC5jYXRjaCgoKSA9PiBzZXRDdXJyZW50QXBwbGljYXRpb24odW5kZWZpbmVkKSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gY3VycmVudEFwcGxpY2F0aW9uO1xufVxuIiwgImltcG9ydCB7IExpc3QsIEljb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBGT0xERVJfT1BUSU9OUyB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyB1c2VWYXVsdENvbnRleHQgfSBmcm9tIFwifi9jb250ZXh0L3ZhdWx0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpc3RGb2xkZXJEcm9wZG93bigpIHtcbiAgY29uc3QgeyBmb2xkZXJzLCBjdXJyZW50Rm9sZGVySWQsIHNldEN1cnJlbnRGb2xkZXIgfSA9IHVzZVZhdWx0Q29udGV4dCgpO1xuXG4gIGlmIChmb2xkZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8TGlzdC5Ecm9wZG93blxuICAgICAgdG9vbHRpcD1cIlNlbGVjdCBhIGZvbGRlclwiXG4gICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBmb2xkZXJzXCJcbiAgICAgIGRlZmF1bHRWYWx1ZT17Y3VycmVudEZvbGRlcklkID8/IEZPTERFUl9PUFRJT05TLkFMTH1cbiAgICAgIG9uQ2hhbmdlPXtzZXRDdXJyZW50Rm9sZGVyfVxuICAgICAgdGhyb3R0bGVcbiAgICA+XG4gICAgICA8TGlzdC5Ecm9wZG93bi5JdGVtIHZhbHVlPXtGT0xERVJfT1BUSU9OUy5BTEx9IHRpdGxlPVwiQWxsXCIgaWNvbj17SWNvbi5Gb2xkZXJ9IC8+XG4gICAgICB7Zm9sZGVycy5tYXAoKGZvbGRlcikgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGZvbGRlci5pZCB8fCBGT0xERVJfT1BUSU9OUy5OT19GT0xERVI7XG5cbiAgICAgICAgcmV0dXJuIDxMaXN0LkRyb3Bkb3duLkl0ZW0ga2V5PXtpZH0gdmFsdWU9e2lkfSB0aXRsZT17Zm9sZGVyLm5hbWV9IGljb249e0ljb24uRm9sZGVyfSAvPjtcbiAgICAgIH0pfVxuICAgIDwvTGlzdC5Ecm9wZG93bj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBDaGlsZHJlbiwgUmVhY3ROb2RlIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgU3luY0NoaWxkcmVuID0gRXhjbHVkZTxSZWFjdE5vZGUsIFByb21pc2U8dW5rbm93bj4+O1xuXG5leHBvcnQgdHlwZSBDb21wb25lbnRSZXZlcnNlclByb3BzID0ge1xuICByZXZlcnNlPzogYm9vbGVhbjtcbiAgY2hpbGRyZW4/OiBTeW5jQ2hpbGRyZW47XG59O1xuXG5jb25zdCBDb21wb25lbnRSZXZlcnNlciA9IChwcm9wczogQ29tcG9uZW50UmV2ZXJzZXJQcm9wcykgPT4ge1xuICBjb25zdCBjaGlsZHJlbiA9IENoaWxkcmVuLnRvQXJyYXkocHJvcHMuY2hpbGRyZW4pIGFzIFN5bmNDaGlsZHJlbltdO1xuICBpZiAocHJvcHMucmV2ZXJzZSkgY2hpbGRyZW4ucmV2ZXJzZSgpO1xuICByZXR1cm4gPD57Y2hpbGRyZW59PC8+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50UmV2ZXJzZXI7XG4iLCAiaW1wb3J0IHsgRGVwZW5kZW5jeUxpc3QsIERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKiogYHVzZVN0YXRlYCB3aXRoIGRlcGVuZGVuY2llcy4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdGF0ZUVmZmVjdDxTPihpbml0aWFsU3RhdGU6IFMgfCAoKCkgPT4gUyksIGRlcHM6IERlcGVuZGVuY3lMaXN0KTogW1MsIERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFM+Pl0ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPFM+KGluaXRpYWxTdGF0ZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRTdGF0ZShpbml0aWFsU3RhdGUpO1xuICB9LCBkZXBzKTtcblxuICByZXR1cm4gW3N0YXRlLCBzZXRTdGF0ZV07XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLGtDQUFBQSxVQUFBQyxTQUFBO0FBQUEsSUFBQUEsUUFBTyxVQUFVO0FBQ2pCLFVBQU0sT0FBTztBQUViLFFBQUksS0FBSyxRQUFRLElBQUk7QUFFckIsYUFBUyxhQUFjQyxPQUFNLFNBQVM7QUFDcEMsVUFBSSxVQUFVLFFBQVEsWUFBWSxTQUNoQyxRQUFRLFVBQVUsUUFBUSxJQUFJO0FBRWhDLFVBQUksQ0FBQyxTQUFTO0FBQ1osZUFBTztBQUFBLE1BQ1Q7QUFFQSxnQkFBVSxRQUFRLE1BQU0sR0FBRztBQUMzQixVQUFJLFFBQVEsUUFBUSxFQUFFLE1BQU0sSUFBSTtBQUM5QixlQUFPO0FBQUEsTUFDVDtBQUNBLGVBQVMsSUFBSSxHQUFHLElBQUksUUFBUSxRQUFRLEtBQUs7QUFDdkMsWUFBSSxJQUFJLFFBQVEsQ0FBQyxFQUFFLFlBQVk7QUFDL0IsWUFBSSxLQUFLQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLE1BQU0sRUFBRSxZQUFZLE1BQU0sR0FBRztBQUNuRCxpQkFBTztBQUFBLFFBQ1Q7QUFBQSxNQUNGO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFFQSxhQUFTLFVBQVcsTUFBTUEsT0FBTSxTQUFTO0FBQ3ZDLFVBQUksQ0FBQyxLQUFLLGVBQWUsS0FBSyxDQUFDLEtBQUssT0FBTyxHQUFHO0FBQzVDLGVBQU87QUFBQSxNQUNUO0FBQ0EsYUFBTyxhQUFhQSxPQUFNLE9BQU87QUFBQSxJQUNuQztBQUVBLGFBQVMsTUFBT0EsT0FBTSxTQUFTLElBQUk7QUFDakMsU0FBRyxLQUFLQSxPQUFNLFNBQVUsSUFBSSxNQUFNO0FBQ2hDLFdBQUcsSUFBSSxLQUFLLFFBQVEsVUFBVSxNQUFNQSxPQUFNLE9BQU8sQ0FBQztBQUFBLE1BQ3BELENBQUM7QUFBQSxJQUNIO0FBRUEs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QVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsYUFBYTtBQUFBLE1BQ2IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLGdCQUFnQjtBQUFBO0FBQUEsTUFHaEIsV0FBVztBQUFBO0FBQUEsTUFDWCxXQUFXO0FBQUE7QUFBQSxNQUNYLGdCQUFnQjtBQUFBLE1BQ2hCLFdBQVc7QUFBQTtB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O0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFNO0FBQUEsRUFFZjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQUs7QUFBQSxFQUVkO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUNBO0FBQUEsSUFDQSxVQUFTO0FBQUEsRUFBSztBQUFBLEVBRWQ7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFNO0FBQUEsRUFFZjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLElBQ1QsUUFBTztBQUFBLEVBQUk7QUFBQSxFQUVYO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBTztBQUFBLEVBRWhCO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBTTtBQUFBLEVBRWY7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFNO0FBQUEsRUFFZjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLElBQ1QsUUFBTztBQUFBLEVBQUk7QUFBQSxFQUVYO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsSUFDVCxRQUFPO0FBQUEsRUFBSTtBQUFBLEVBRVg7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFPO0FBQUEsRUFFaEI7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFLO0FBQUEsRUFFZDtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQUs7QUFBQSxFQUVkO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBSztBQUFBLEVBRWQ7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFLO0FBQUEsRUFFZDtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQUs7QUFBQSxFQUVkO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBSztBQUFBLEVBRWQ7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJ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ICJwYXRoIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInBhdGgiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXRoS2V5IiwgImVudmlyb25tZW50IiwgInBsYXRmb3JtIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInBhdGgiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXRoIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInByb2Nlc3MiLCAidW5sb2FkIiwgImVtaXQiLCAibG9hZCIsICJwcm9jZXNzUmVhbGx5RXhpdCIsICJwcm9jZXNzRW1pdCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwcm9taXNpZnkiLCAiZ2V0U3RyZWFtIiwgInN0cmVhbSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXRoIiwgIm9wZW4iLCAiZXJyIiwgImVudHJ5IiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImxlbmd0aHMiLCAib2ZmcyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJnbG9iYWwiLCAiZW5jb2RlVVJJIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIkJhc2U2NCIsICJzcGxpdCIsICJyYW5kb21CeXRlcyIsICJ0aW1pbmdTYWZlRXF1YWwiLCAid2luZG93IiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgIiRoZ1VXMSR1c2VSZWYiLCAiJGhnVVcxJHVzZU1lbW8iLCAiJGhnVVcxJHNob3dUb2FzdCIsICIkaGdVVzEkVG9hc3QiLCAiJGhnVVcxJHJlYWRGaWxlU3luYyIsICIkaGdVVzEkam9pbiIsICIkaGdVVzEkZW52aXJvbm1lbnQiLCAiJGhnVVcxJENsaXBib2FyZCIsICIkaGdVVzEkb3BlbiIsICIkaGdVVzEkdXNlU3RhdGUiLCAiJGhnVVcxJHVzZUNhbGxiYWNrIiwgImFyZ3MiLCAiJGhnVVcxJExhdW5jaFR5cGUiLCAib3B0aW9ucyIsICIkaGdVVzEkdXNlRWZmZWN0IiwgImluaXRpYWxTdGF0ZSIsICIkaGdVVzEkQ2FjaGUiLCAiJGhnVVcxJHVzZVN5bmNFeHRlcm5hbFN0b3JlIiwgIiRoZ1VXMSR1c2VNZW1vIiwgIiRoZ1VXMSR1c2VDYWxsYmFjayIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfbm9kZV9wYXRoIiwgImltcG9ydF9ub2RlX3Byb2Nlc3MiLCAiaW1wb3J0X25vZGVfcGF0aCIsICJwbGF0Zm9ybSIsICJwcm9jZXNzIiwgInVybCIsICJwYXRoIiwgIm9uZXRpbWUiLCAiaW1wb3J0X25vZGVfb3MiLCAiaW1wb3J0X25vZGVfb3MiLCAib3MiLCAib25FeGl0IiwgIm1lcmdlU3RyZWFtIiwgImdldFN0cmVhbSIsICJwcm9jZXNzIiwgImNyb3NzU3Bhd24iLCAicGF0aCIsICJjaGlsZFByb2Nlc3MiLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcGF0aCIsICJpbXBvcnRfcHJvbWlzZXMiLCAicGF0aCIsICJzdHJlYW1aaXAiLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJjYXB0dXJlRXhjZXB0aW9uUmF5Y2FzdCIsICJpbXBvcnRfZnMiLCAiaW1wb3J0X2NyeXB0byIsICJ1cmwiLCAicGF0aCIsICJodHRwcyIsICJodHRwIiwgImltcG9ydF9hcGkiLCAiUmF5Y2FzdENhY2hlIiwgInVybCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImVycm9yIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9hcGkiLCAidmFsdWUiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImVycm9yIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImNhbGxiYWNrRXhlYyIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9jaGlsZF9wcm9jZXNzIiwgImltcG9ydF91dGlsIiwgImltcG9ydF9mcyIsICJpbXBvcnRfcGF0aCIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiZXhlYyIsICJleGVjV2l0aENhbGxiYWNrcyIsICJzdXBwb3J0UGF0aCIsICJmZXRjaEZhdmljb25zIiwgInRyeUV4ZWMiLCAicGF0aCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgIml0ZW0iLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9jcnlwdG8iLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9qc3hfcnVudGltZSIsICJwcm9wcyIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgInNwbGl0IiwgImltcG9ydF9yZWFjdCIsICJ1cmwiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X3JlYWN0IiwgImluaXRpYWxTdGF0ZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiZXJyb3IiXQp9Cg==
