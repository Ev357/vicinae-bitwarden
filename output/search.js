"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/isexe/windows.js
var require_windows = __commonJS({
  "node_modules/isexe/windows.js"(exports2, module2) {
    module2.exports = isexe;
    isexe.sync = sync;
    var fs = require("fs");
    function checkPathExt(path3, options) {
      var pathext = options.pathExt !== void 0 ? options.pathExt : process.env.PATHEXT;
      if (!pathext) {
        return true;
      }
      pathext = pathext.split(";");
      if (pathext.indexOf("") !== -1) {
        return true;
      }
      for (var i = 0; i < pathext.length; i++) {
        var p = pathext[i].toLowerCase();
        if (p && path3.substr(-p.length).toLowerCase() === p) {
          return true;
        }
      }
      return false;
    }
    function checkStat(stat, path3, options) {
      if (!stat.isSymbolicLink() && !stat.isFile()) {
        return false;
      }
      return checkPathExt(path3, options);
    }
    function isexe(path3, options, cb) {
      fs.stat(path3, function(er, stat) {
        cb(er, er ? false : checkStat(stat, path3, options));
      });
    }
    function sync(path3, options) {
      return checkStat(fs.statSync(path3), path3, options);
    }
  }
});

// node_modules/isexe/mode.js
var require_mode = __commonJS({
  "node_modules/isexe/mode.js"(exports2, module2) {
    module2.exports = isexe;
    isexe.sync = sync;
    var fs = require("fs");
    function isexe(path3, options, cb) {
      fs.stat(path3, function(er, stat) {
        cb(er, er ? false : checkStat(stat, options));
      });
    }
    function sync(path3, options) {
      return checkStat(fs.statSync(path3), options);
    }
    function checkStat(stat, options) {
      return stat.isFile() && checkMode(stat, options);
    }
    function checkMode(stat, options) {
      var mod = stat.mode;
      var uid = stat.uid;
      var gid = stat.gid;
      var myUid = options.uid !== void 0 ? options.uid : process.getuid && process.getuid();
      var myGid = options.gid !== void 0 ? options.gid : process.getgid && process.getgid();
      var u = parseInt("100", 8);
      var g = parseInt("010", 8);
      var o = parseInt("001", 8);
      var ug = u | g;
      var ret = mod & o || mod & g && gid === myGid || mod & u && uid === myUid || mod & ug && myUid === 0;
      return ret;
    }
  }
});

// node_modules/isexe/index.js
var require_isexe = __commonJS({
  "node_modules/isexe/index.js"(exports2, module2) {
    var fs = require("fs");
    var core;
    if (process.platform === "win32" || global.TESTING_WINDOWS) {
      core = require_windows();
    } else {
      core = require_mode();
    }
    module2.exports = isexe;
    isexe.sync = sync;
    function isexe(path3, options, cb) {
      if (typeof options === "function") {
        cb = options;
        options = {};
      }
      if (!cb) {
        if (typeof Promise !== "function") {
          throw new TypeError("callback not provided");
        }
        return new Promise(function(resolve, reject) {
          isexe(path3, options || {}, function(er, is) {
            if (er) {
              reject(er);
            } else {
              resolve(is);
            }
          });
        });
      }
      core(path3, options || {}, function(er, is) {
        if (er) {
          if (er.code === "EACCES" || options && options.ignoreErrors) {
            er = null;
            is = false;
          }
        }
        cb(er, is);
      });
    }
    function sync(path3, options) {
      try {
        return core.sync(path3, options || {});
      } catch (er) {
        if (options && options.ignoreErrors || er.code === "EACCES") {
          return false;
        } else {
          throw er;
        }
      }
    }
  }
});

// node_modules/which/which.js
var require_which = __commonJS({
  "node_modules/which/which.js"(exports2, module2) {
    var isWindows = process.platform === "win32" || process.env.OSTYPE === "cygwin" || process.env.OSTYPE === "msys";
    var path3 = require("path");
    var COLON = isWindows ? ";" : ":";
    var isexe = require_isexe();
    var getNotFoundError = (cmd) => Object.assign(new Error(`not found: ${cmd}`), { code: "ENOENT" });
    var getPathInfo = (cmd, opt) => {
      const colon = opt.colon || COLON;
      const pathEnv = cmd.match(/\//) || isWindows && cmd.match(/\\/) ? [""] : [
        // windows always checks the cwd first
        ...isWindows ? [process.cwd()] : [],
        ...(opt.path || process.env.PATH || /* istanbul ignore next: very unusual */
        "").split(colon)
      ];
      const pathExtExe = isWindows ? opt.pathExt || process.env.PATHEXT || ".EXE;.CMD;.BAT;.COM" : "";
      const pathExt = isWindows ? pathExtExe.split(colon) : [""];
      if (isWindows) {
        if (cmd.indexOf(".") !== -1 && pathExt[0] !== "")
          pathExt.unshift("");
      }
      return {
        pathEnv,
        pathExt,
        pathExtExe
      };
    };
    var which = (cmd, opt, cb) => {
      if (typeof opt === "function") {
        cb = opt;
        opt = {};
      }
      if (!opt)
        opt = {};
      const { pathEnv, pathExt, pathExtExe } = getPathInfo(cmd, opt);
      const found = [];
      const step = (i) => new Promise((resolve, reject) => {
        if (i === pathEnv.length)
          return opt.all && found.length ? resolve(found) : reject(getNotFoundError(cmd));
        const ppRaw = pathEnv[i];
        const pathPart = /^".*"$/.test(ppRaw) ? ppRaw.slice(1, -1) : ppRaw;
        const pCmd = path3.join(pathPart, cmd);
        const p = !pathPart && /^\.[\\\/]/.test(cmd) ? cmd.slice(0, 2) + pCmd : pCmd;
        resolve(subStep(p, i, 0));
      });
      const subStep = (p, i, ii) => new Promise((resolve, reject) => {
        if (ii === pathExt.length)
          return resolve(step(i + 1));
        const ext = pathExt[ii];
        isexe(p + ext, { pathExt: pathExtExe }, (er, is) => {
          if (!er && is) {
            if (opt.all)
              found.push(p + ext);
            else
              return resolve(p + ext);
          }
          return resolve(subStep(p, i, ii + 1));
        });
      });
      return cb ? step(0).then((res) => cb(null, res), cb) : step(0);
    };
    var whichSync = (cmd, opt) => {
      opt = opt || {};
      const { pathEnv, pathExt, pathExtExe } = getPathInfo(cmd, opt);
      const found = [];
      for (let i = 0; i < pathEnv.length; i++) {
        const ppRaw = pathEnv[i];
        const pathPart = /^".*"$/.test(ppRaw) ? ppRaw.slice(1, -1) : ppRaw;
        const pCmd = path3.join(pathPart, cmd);
        const p = !pathPart && /^\.[\\\/]/.test(cmd) ? cmd.slice(0, 2) + pCmd : pCmd;
        for (let j = 0; j < pathExt.length; j++) {
          const cur = p + pathExt[j];
          try {
            const is = isexe.sync(cur, { pathExt: pathExtExe });
            if (is) {
              if (opt.all)
                found.push(cur);
              else
                return cur;
            }
          } catch (ex) {
          }
        }
      }
      if (opt.all && found.length)
        return found;
      if (opt.nothrow)
        return null;
      throw getNotFoundError(cmd);
    };
    module2.exports = which;
    which.sync = whichSync;
  }
});

// node_modules/path-key/index.js
var require_path_key = __commonJS({
  "node_modules/path-key/index.js"(exports2, module2) {
    "use strict";
    var pathKey2 = (options = {}) => {
      const environment8 = options.env || process.env;
      const platform2 = options.platform || process.platform;
      if (platform2 !== "win32") {
        return "PATH";
      }
      return Object.keys(environment8).reverse().find((key) => key.toUpperCase() === "PATH") || "Path";
    };
    module2.exports = pathKey2;
    module2.exports.default = pathKey2;
  }
});

// node_modules/cross-spawn/lib/util/resolveCommand.js
var require_resolveCommand = __commonJS({
  "node_modules/cross-spawn/lib/util/resolveCommand.js"(exports2, module2) {
    "use strict";
    var path3 = require("path");
    var which = require_which();
    var getPathKey = require_path_key();
    function resolveCommandAttempt(parsed, withoutPathExt) {
      const env = parsed.options.env || process.env;
      const cwd = process.cwd();
      const hasCustomCwd = parsed.options.cwd != null;
      const shouldSwitchCwd = hasCustomCwd && process.chdir !== void 0 && !process.chdir.disabled;
      if (shouldSwitchCwd) {
        try {
          process.chdir(parsed.options.cwd);
        } catch (err) {
        }
      }
      let resolved;
      try {
        resolved = which.sync(parsed.command, {
          path: env[getPathKey({ env })],
          pathExt: withoutPathExt ? path3.delimiter : void 0
        });
      } catch (e) {
      } finally {
        if (shouldSwitchCwd) {
          process.chdir(cwd);
        }
      }
      if (resolved) {
        resolved = path3.resolve(hasCustomCwd ? parsed.options.cwd : "", resolved);
      }
      return resolved;
    }
    function resolveCommand(parsed) {
      return resolveCommandAttempt(parsed) || resolveCommandAttempt(parsed, true);
    }
    module2.exports = resolveCommand;
  }
});

// node_modules/cross-spawn/lib/util/escape.js
var require_escape = __commonJS({
  "node_modules/cross-spawn/lib/util/escape.js"(exports2, module2) {
    "use strict";
    var metaCharsRegExp = /([()\][%!^"`<>&|;, *?])/g;
    function escapeCommand(arg) {
      arg = arg.replace(metaCharsRegExp, "^$1");
      return arg;
    }
    function escapeArgument(arg, doubleEscapeMetaChars) {
      arg = `${arg}`;
      arg = arg.replace(/(?=(\\+?)?)\1"/g, '$1$1\\"');
      arg = arg.replace(/(?=(\\+?)?)\1$/, "$1$1");
      arg = `"${arg}"`;
      arg = arg.replace(metaCharsRegExp, "^$1");
      if (doubleEscapeMetaChars) {
        arg = arg.replace(metaCharsRegExp, "^$1");
      }
      return arg;
    }
    module2.exports.command = escapeCommand;
    module2.exports.argument = escapeArgument;
  }
});

// node_modules/shebang-regex/index.js
var require_shebang_regex = __commonJS({
  "node_modules/shebang-regex/index.js"(exports2, module2) {
    "use strict";
    module2.exports = /^#!(.*)/;
  }
});

// node_modules/shebang-command/index.js
var require_shebang_command = __commonJS({
  "node_modules/shebang-command/index.js"(exports2, module2) {
    "use strict";
    var shebangRegex = require_shebang_regex();
    module2.exports = (string = "") => {
      const match = string.match(shebangRegex);
      if (!match) {
        return null;
      }
      const [path3, argument] = match[0].replace(/#! ?/, "").split(" ");
      const binary = path3.split("/").pop();
      if (binary === "env") {
        return argument;
      }
      return argument ? `${binary} ${argument}` : binary;
    };
  }
});

// node_modules/cross-spawn/lib/util/readShebang.js
var require_readShebang = __commonJS({
  "node_modules/cross-spawn/lib/util/readShebang.js"(exports2, module2) {
    "use strict";
    var fs = require("fs");
    var shebangCommand = require_shebang_command();
    function readShebang(command) {
      const size = 150;
      const buffer = Buffer.alloc(size);
      let fd;
      try {
        fd = fs.openSync(command, "r");
        fs.readSync(fd, buffer, 0, size, 0);
        fs.closeSync(fd);
      } catch (e) {
      }
      return shebangCommand(buffer.toString());
    }
    module2.exports = readShebang;
  }
});

// node_modules/cross-spawn/lib/parse.js
var require_parse = __commonJS({
  "node_modules/cross-spawn/lib/parse.js"(exports2, module2) {
    "use strict";
    var path3 = require("path");
    var resolveCommand = require_resolveCommand();
    var escape = require_escape();
    var readShebang = require_readShebang();
    var isWin = process.platform === "win32";
    var isExecutableRegExp = /\.(?:com|exe)$/i;
    var isCmdShimRegExp = /node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;
    function detectShebang(parsed) {
      parsed.file = resolveCommand(parsed);
      const shebang = parsed.file && readShebang(parsed.file);
      if (shebang) {
        parsed.args.unshift(parsed.file);
        parsed.command = shebang;
        return resolveCommand(parsed);
      }
      return parsed.file;
    }
    function parseNonShell(parsed) {
      if (!isWin) {
        return parsed;
      }
      const commandFile = detectShebang(parsed);
      const needsShell = !isExecutableRegExp.test(commandFile);
      if (parsed.options.forceShell || needsShell) {
        const needsDoubleEscapeMetaChars = isCmdShimRegExp.test(commandFile);
        parsed.command = path3.normalize(parsed.command);
        parsed.command = escape.command(parsed.command);
        parsed.args = parsed.args.map((arg) => escape.argument(arg, needsDoubleEscapeMetaChars));
        const shellCommand = [parsed.command].concat(parsed.args).join(" ");
        parsed.args = ["/d", "/s", "/c", `"${shellCommand}"`];
        parsed.command = process.env.comspec || "cmd.exe";
        parsed.options.windowsVerbatimArguments = true;
      }
      return parsed;
    }
    function parse(command, args, options) {
      if (args && !Array.isArray(args)) {
        options = args;
        args = null;
      }
      args = args ? args.slice(0) : [];
      options = Object.assign({}, options);
      const parsed = {
        command,
        args,
        options,
        file: void 0,
        original: {
          command,
          args
        }
      };
      return options.shell ? parsed : parseNonShell(parsed);
    }
    module2.exports = parse;
  }
});

// node_modules/cross-spawn/lib/enoent.js
var require_enoent = __commonJS({
  "node_modules/cross-spawn/lib/enoent.js"(exports2, module2) {
    "use strict";
    var isWin = process.platform === "win32";
    function notFoundError(original, syscall) {
      return Object.assign(new Error(`${syscall} ${original.command} ENOENT`), {
        code: "ENOENT",
        errno: "ENOENT",
        syscall: `${syscall} ${original.command}`,
        path: original.command,
        spawnargs: original.args
      });
    }
    function hookChildProcess(cp, parsed) {
      if (!isWin) {
        return;
      }
      const originalEmit = cp.emit;
      cp.emit = function(name, arg1) {
        if (name === "exit") {
          const err = verifyENOENT(arg1, parsed);
          if (err) {
            return originalEmit.call(cp, "error", err);
          }
        }
        return originalEmit.apply(cp, arguments);
      };
    }
    function verifyENOENT(status, parsed) {
      if (isWin && status === 1 && !parsed.file) {
        return notFoundError(parsed.original, "spawn");
      }
      return null;
    }
    function verifyENOENTSync(status, parsed) {
      if (isWin && status === 1 && !parsed.file) {
        return notFoundError(parsed.original, "spawnSync");
      }
      return null;
    }
    module2.exports = {
      hookChildProcess,
      verifyENOENT,
      verifyENOENTSync,
      notFoundError
    };
  }
});

// node_modules/cross-spawn/index.js
var require_cross_spawn = __commonJS({
  "node_modules/cross-spawn/index.js"(exports2, module2) {
    "use strict";
    var cp = require("child_process");
    var parse = require_parse();
    var enoent = require_enoent();
    function spawn(command, args, options) {
      const parsed = parse(command, args, options);
      const spawned = cp.spawn(parsed.command, parsed.args, parsed.options);
      enoent.hookChildProcess(spawned, parsed);
      return spawned;
    }
    function spawnSync(command, args, options) {
      const parsed = parse(command, args, options);
      const result = cp.spawnSync(parsed.command, parsed.args, parsed.options);
      result.error = result.error || enoent.verifyENOENTSync(result.status, parsed);
      return result;
    }
    module2.exports = spawn;
    module2.exports.spawn = spawn;
    module2.exports.sync = spawnSync;
    module2.exports._parse = parse;
    module2.exports._enoent = enoent;
  }
});

// node_modules/signal-exit/signals.js
var require_signals = __commonJS({
  "node_modules/signal-exit/signals.js"(exports2, module2) {
    module2.exports = [
      "SIGABRT",
      "SIGALRM",
      "SIGHUP",
      "SIGINT",
      "SIGTERM"
    ];
    if (process.platform !== "win32") {
      module2.exports.push(
        "SIGVTALRM",
        "SIGXCPU",
        "SIGXFSZ",
        "SIGUSR2",
        "SIGTRAP",
        "SIGSYS",
        "SIGQUIT",
        "SIGIOT"
        // should detect profiler and enable/disable accordingly.
        // see #21
        // 'SIGPROF'
      );
    }
    if (process.platform === "linux") {
      module2.exports.push(
        "SIGIO",
        "SIGPOLL",
        "SIGPWR",
        "SIGSTKFLT",
        "SIGUNUSED"
      );
    }
  }
});

// node_modules/signal-exit/index.js
var require_signal_exit = __commonJS({
  "node_modules/signal-exit/index.js"(exports2, module2) {
    var process4 = global.process;
    var processOk = function(process5) {
      return process5 && typeof process5 === "object" && typeof process5.removeListener === "function" && typeof process5.emit === "function" && typeof process5.reallyExit === "function" && typeof process5.listeners === "function" && typeof process5.kill === "function" && typeof process5.pid === "number" && typeof process5.on === "function";
    };
    if (!processOk(process4)) {
      module2.exports = function() {
        return function() {
        };
      };
    } else {
      assert = require("assert");
      signals = require_signals();
      isWin = /^win/i.test(process4.platform);
      EE = require("events");
      if (typeof EE !== "function") {
        EE = EE.EventEmitter;
      }
      if (process4.__signal_exit_emitter__) {
        emitter = process4.__signal_exit_emitter__;
      } else {
        emitter = process4.__signal_exit_emitter__ = new EE();
        emitter.count = 0;
        emitter.emitted = {};
      }
      if (!emitter.infinite) {
        emitter.setMaxListeners(Infinity);
        emitter.infinite = true;
      }
      module2.exports = function(cb, opts) {
        if (!processOk(global.process)) {
          return function() {
          };
        }
        assert.equal(typeof cb, "function", "a callback must be provided for exit handler");
        if (loaded === false) {
          load();
        }
        var ev = "exit";
        if (opts && opts.alwaysLast) {
          ev = "afterexit";
        }
        var remove = function() {
          emitter.removeListener(ev, cb);
          if (emitter.listeners("exit").length === 0 && emitter.listeners("afterexit").length === 0) {
            unload();
          }
        };
        emitter.on(ev, cb);
        return remove;
      };
      unload = function unload2() {
        if (!loaded || !processOk(global.process)) {
          return;
        }
        loaded = false;
        signals.forEach(function(sig) {
          try {
            process4.removeListener(sig, sigListeners[sig]);
          } catch (er) {
          }
        });
        process4.emit = originalProcessEmit;
        process4.reallyExit = originalProcessReallyExit;
        emitter.count -= 1;
      };
      module2.exports.unload = unload;
      emit = function emit2(event, code, signal) {
        if (emitter.emitted[event]) {
          return;
        }
        emitter.emitted[event] = true;
        emitter.emit(event, code, signal);
      };
      sigListeners = {};
      signals.forEach(function(sig) {
        sigListeners[sig] = function listener() {
          if (!processOk(global.process)) {
            return;
          }
          var listeners = process4.listeners(sig);
          if (listeners.length === emitter.count) {
            unload();
            emit("exit", null, sig);
            emit("afterexit", null, sig);
            if (isWin && sig === "SIGHUP") {
              sig = "SIGINT";
            }
            process4.kill(process4.pid, sig);
          }
        };
      });
      module2.exports.signals = function() {
        return signals;
      };
      loaded = false;
      load = function load2() {
        if (loaded || !processOk(global.process)) {
          return;
        }
        loaded = true;
        emitter.count += 1;
        signals = signals.filter(function(sig) {
          try {
            process4.on(sig, sigListeners[sig]);
            return true;
          } catch (er) {
            return false;
          }
        });
        process4.emit = processEmit;
        process4.reallyExit = processReallyExit;
      };
      module2.exports.load = load;
      originalProcessReallyExit = process4.reallyExit;
      processReallyExit = function processReallyExit2(code) {
        if (!processOk(global.process)) {
          return;
        }
        process4.exitCode = code || /* istanbul ignore next */
        0;
        emit("exit", process4.exitCode, null);
        emit("afterexit", process4.exitCode, null);
        originalProcessReallyExit.call(process4, process4.exitCode);
      };
      originalProcessEmit = process4.emit;
      processEmit = function processEmit2(ev, arg) {
        if (ev === "exit" && processOk(global.process)) {
          if (arg !== void 0) {
            process4.exitCode = arg;
          }
          var ret = originalProcessEmit.apply(this, arguments);
          emit("exit", process4.exitCode, null);
          emit("afterexit", process4.exitCode, null);
          return ret;
        } else {
          return originalProcessEmit.apply(this, arguments);
        }
      };
    }
    var assert;
    var signals;
    var isWin;
    var EE;
    var emitter;
    var unload;
    var emit;
    var sigListeners;
    var loaded;
    var load;
    var originalProcessReallyExit;
    var processReallyExit;
    var originalProcessEmit;
    var processEmit;
  }
});

// node_modules/get-stream/buffer-stream.js
var require_buffer_stream = __commonJS({
  "node_modules/get-stream/buffer-stream.js"(exports2, module2) {
    "use strict";
    var { PassThrough: PassThroughStream } = require("stream");
    module2.exports = (options) => {
      options = { ...options };
      const { array } = options;
      let { encoding } = options;
      const isBuffer = encoding === "buffer";
      let objectMode = false;
      if (array) {
        objectMode = !(encoding || isBuffer);
      } else {
        encoding = encoding || "utf8";
      }
      if (isBuffer) {
        encoding = null;
      }
      const stream = new PassThroughStream({ objectMode });
      if (encoding) {
        stream.setEncoding(encoding);
      }
      let length = 0;
      const chunks = [];
      stream.on("data", (chunk) => {
        chunks.push(chunk);
        if (objectMode) {
          length = chunks.length;
        } else {
          length += chunk.length;
        }
      });
      stream.getBufferedValue = () => {
        if (array) {
          return chunks;
        }
        return isBuffer ? Buffer.concat(chunks, length) : chunks.join("");
      };
      stream.getBufferedLength = () => length;
      return stream;
    };
  }
});

// node_modules/get-stream/index.js
var require_get_stream = __commonJS({
  "node_modules/get-stream/index.js"(exports2, module2) {
    "use strict";
    var { constants: BufferConstants } = require("buffer");
    var stream = require("stream");
    var { promisify: promisify3 } = require("util");
    var bufferStream = require_buffer_stream();
    var streamPipelinePromisified = promisify3(stream.pipeline);
    var MaxBufferError = class extends Error {
      constructor() {
        super("maxBuffer exceeded");
        this.name = "MaxBufferError";
      }
    };
    async function getStream2(inputStream, options) {
      if (!inputStream) {
        throw new Error("Expected a stream");
      }
      options = {
        maxBuffer: Infinity,
        ...options
      };
      const { maxBuffer } = options;
      const stream2 = bufferStream(options);
      await new Promise((resolve, reject) => {
        const rejectPromise = (error) => {
          if (error && stream2.getBufferedLength() <= BufferConstants.MAX_LENGTH) {
            error.bufferedData = stream2.getBufferedValue();
          }
          reject(error);
        };
        (async () => {
          try {
            await streamPipelinePromisified(inputStream, stream2);
            resolve();
          } catch (error) {
            rejectPromise(error);
          }
        })();
        stream2.on("data", () => {
          if (stream2.getBufferedLength() > maxBuffer) {
            rejectPromise(new MaxBufferError());
          }
        });
      });
      return stream2.getBufferedValue();
    }
    module2.exports = getStream2;
    module2.exports.buffer = (stream2, options) => getStream2(stream2, { ...options, encoding: "buffer" });
    module2.exports.array = (stream2, options) => getStream2(stream2, { ...options, array: true });
    module2.exports.MaxBufferError = MaxBufferError;
  }
});

// node_modules/merge-stream/index.js
var require_merge_stream = __commonJS({
  "node_modules/merge-stream/index.js"(exports2, module2) {
    "use strict";
    var { PassThrough } = require("stream");
    module2.exports = function() {
      var sources = [];
      var output = new PassThrough({ objectMode: true });
      output.setMaxListeners(0);
      output.add = add;
      output.isEmpty = isEmpty;
      output.on("unpipe", remove);
      Array.prototype.slice.call(arguments).forEach(add);
      return output;
      function add(source) {
        if (Array.isArray(source)) {
          source.forEach(add);
          return this;
        }
        sources.push(source);
        source.once("end", remove.bind(null, source));
        source.once("error", output.emit.bind(output, "error"));
        source.pipe(output, { end: false });
        return this;
      }
      function isEmpty() {
        return sources.length == 0;
      }
      function remove(source) {
        sources = sources.filter(function(it) {
          return it !== source;
        });
        if (!sources.length && output.readable) {
          output.end();
        }
      }
    };
  }
});

// node_modules/node-stream-zip/node_stream_zip.js
var require_node_stream_zip = __commonJS({
  "node_modules/node-stream-zip/node_stream_zip.js"(exports2, module2) {
    var fs = require("fs");
    var util = require("util");
    var path3 = require("path");
    var events = require("events");
    var zlib = require("zlib");
    var stream = require("stream");
    var consts = {
      /* The local file header */
      LOCHDR: 30,
      // LOC header size
      LOCSIG: 67324752,
      // "PK\003\004"
      LOCVER: 4,
      // version needed to extract
      LOCFLG: 6,
      // general purpose bit flag
      LOCHOW: 8,
      // compression method
      LOCTIM: 10,
      // modification time (2 bytes time, 2 bytes date)
      LOCCRC: 14,
      // uncompressed file crc-32 value
      LOCSIZ: 18,
      // compressed size
      LOCLEN: 22,
      // uncompressed size
      LOCNAM: 26,
      // filename length
      LOCEXT: 28,
      // extra field length
      /* The Data descriptor */
      EXTSIG: 134695760,
      // "PK\007\008"
      EXTHDR: 16,
      // EXT header size
      EXTCRC: 4,
      // uncompressed file crc-32 value
      EXTSIZ: 8,
      // compressed size
      EXTLEN: 12,
      // uncompressed size
      /* The central directory file header */
      CENHDR: 46,
      // CEN header size
      CENSIG: 33639248,
      // "PK\001\002"
      CENVEM: 4,
      // version made by
      CENVER: 6,
      // version needed to extract
      CENFLG: 8,
      // encrypt, decrypt flags
      CENHOW: 10,
      // compression method
      CENTIM: 12,
      // modification time (2 bytes time, 2 bytes date)
      CENCRC: 16,
      // uncompressed file crc-32 value
      CENSIZ: 20,
      // compressed size
      CENLEN: 24,
      // uncompressed size
      CENNAM: 28,
      // filename length
      CENEXT: 30,
      // extra field length
      CENCOM: 32,
      // file comment length
      CENDSK: 34,
      // volume number start
      CENATT: 36,
      // internal file attributes
      CENATX: 38,
      // external file attributes (host system dependent)
      CENOFF: 42,
      // LOC header offset
      /* The entries in the end of central directory */
      ENDHDR: 22,
      // END header size
      ENDSIG: 101010256,
      // "PK\005\006"
      ENDSIGFIRST: 80,
      ENDSUB: 8,
      // number of entries on this disk
      ENDTOT: 10,
      // total number of entries
      ENDSIZ: 12,
      // central directory size in bytes
      ENDOFF: 16,
      // offset of first CEN header
      ENDCOM: 20,
      // zip file comment length
      MAXFILECOMMENT: 65535,
      /* The entries in the end of ZIP64 central directory locator */
      ENDL64HDR: 20,
      // ZIP64 end of central directory locator header size
      ENDL64SIG: 117853008,
      // ZIP64 end of central directory locator signature
      ENDL64SIGFIRST: 80,
      ENDL64OFS: 8,
      // ZIP64 end of central directory offset
      /* The entries in the end of ZIP64 central directory */
      END64HDR: 56,
      // ZIP64 end of central directory header size
      END64SIG: 101075792,
      // ZIP64 end of central directory signature
      END64SIGFIRST: 80,
      END64SUB: 24,
      // number of entries on this disk
      END64TOT: 32,
      // total number of entries
      END64SIZ: 40,
      END64OFF: 48,
      /* Compression methods */
      STORED: 0,
      // no compression
      SHRUNK: 1,
      // shrunk
      REDUCED1: 2,
      // reduced with compression factor 1
      REDUCED2: 3,
      // reduced with compression factor 2
      REDUCED3: 4,
      // reduced with compression factor 3
      REDUCED4: 5,
      // reduced with compression factor 4
      IMPLODED: 6,
      // imploded
      // 7 reserved
      DEFLATED: 8,
      // deflated
      ENHANCED_DEFLATED: 9,
      // deflate64
      PKWARE: 10,
      // PKWare DCL imploded
      // 11 reserved
      BZIP2: 12,
      //  compressed using BZIP2
      // 13 reserved
      LZMA: 14,
      // LZMA
      // 15-17 reserved
      IBM_TERSE: 18,
      // compressed using IBM TERSE
      IBM_LZ77: 19,
      //IBM LZ77 z
      /* General purpose bit flag */
      FLG_ENC: 0,
      // encrypted file
      FLG_COMP1: 1,
      // compression option
      FLG_COMP2: 2,
      // compression option
      FLG_DESC: 4,
      // data descriptor
      FLG_ENH: 8,
      // enhanced deflation
      FLG_STR: 16,
      // strong encryption
      FLG_LNG: 1024,
      // language encoding
      FLG_MSK: 4096,
      // mask header values
      FLG_ENTRY_ENC: 1,
      /* 4.5 Extensible data fields */
      EF_ID: 0,
      EF_SIZE: 2,
      /* Header IDs */
      ID_ZIP64: 1,
      ID_AVINFO: 7,
      ID_PFS: 8,
      ID_OS2: 9,
      ID_NTFS: 10,
      ID_OPENVMS: 12,
      ID_UNIX: 13,
      ID_FORK: 14,
      ID_PATCH: 15,
      ID_X509_PKCS7: 20,
      ID_X509_CERTID_F: 21,
      ID_X509_CERTID_C: 22,
      ID_STRONGENC: 23,
      ID_RECORD_MGT: 24,
      ID_X509_PKCS7_RL: 25,
      ID_IBM1: 101,
      ID_IBM2: 102,
      ID_POSZIP: 18064,
      EF_ZIP64_OR_32: 4294967295,
      EF_ZIP64_OR_16: 65535
    };
    var StreamZip = function(config) {
      let fd, fileSize, chunkSize, op, centralDirectory, closed;
      const ready = false, that = this, entries = config.storeEntries !== false ? {} : null, fileName = config.file, textDecoder = config.nameEncoding ? new TextDecoder(config.nameEncoding) : null;
      open3();
      function open3() {
        if (config.fd) {
          fd = config.fd;
          readFile();
        } else {
          fs.open(fileName, "r", (err, f) => {
            if (err) {
              return that.emit("error", err);
            }
            fd = f;
            readFile();
          });
        }
      }
      function readFile() {
        fs.fstat(fd, (err, stat) => {
          if (err) {
            return that.emit("error", err);
          }
          fileSize = stat.size;
          chunkSize = config.chunkSize || Math.round(fileSize / 1e3);
          chunkSize = Math.max(
            Math.min(chunkSize, Math.min(128 * 1024, fileSize)),
            Math.min(1024, fileSize)
          );
          readCentralDirectory();
        });
      }
      function readUntilFoundCallback(err, bytesRead) {
        if (err || !bytesRead) {
          return that.emit("error", err || new Error("Archive read error"));
        }
        let pos = op.lastPos;
        let bufferPosition = pos - op.win.position;
        const buffer = op.win.buffer;
        const minPos = op.minPos;
        while (--pos >= minPos && --bufferPosition >= 0) {
          if (buffer.length - bufferPosition >= 4 && buffer[bufferPosition] === op.firstByte) {
            if (buffer.readUInt32LE(bufferPosition) === op.sig) {
              op.lastBufferPosition = bufferPosition;
              op.lastBytesRead = bytesRead;
              op.complete();
              return;
            }
          }
        }
        if (pos === minPos) {
          return that.emit("error", new Error("Bad archive"));
        }
        op.lastPos = pos + 1;
        op.chunkSize *= 2;
        if (pos <= minPos) {
          return that.emit("error", new Error("Bad archive"));
        }
        const expandLength = Math.min(op.chunkSize, pos - minPos);
        op.win.expandLeft(expandLength, readUntilFoundCallback);
      }
      function readCentralDirectory() {
        const totalReadLength = Math.min(consts.ENDHDR + consts.MAXFILECOMMENT, fileSize);
        op = {
          win: new FileWindowBuffer(fd),
          totalReadLength,
          minPos: fileSize - totalReadLength,
          lastPos: fileSize,
          chunkSize: Math.min(1024, chunkSize),
          firstByte: consts.ENDSIGFIRST,
          sig: consts.ENDSIG,
          complete: readCentralDirectoryComplete
        };
        op.win.read(fileSize - op.chunkSize, op.chunkSize, readUntilFoundCallback);
      }
      function readCentralDirectoryComplete() {
        const buffer = op.win.buffer;
        const pos = op.lastBufferPosition;
        try {
          centralDirectory = new CentralDirectoryHeader();
          centralDirectory.read(buffer.slice(pos, pos + consts.ENDHDR));
          centralDirectory.headerOffset = op.win.position + pos;
          if (centralDirectory.commentLength) {
            that.comment = buffer.slice(
              pos + consts.ENDHDR,
              pos + consts.ENDHDR + centralDirectory.commentLength
            ).toString();
          } else {
            that.comment = null;
          }
          that.entriesCount = centralDirectory.volumeEntries;
          that.centralDirectory = centralDirectory;
          if (centralDirectory.volumeEntries === consts.EF_ZIP64_OR_16 && centralDirectory.totalEntries === consts.EF_ZIP64_OR_16 || centralDirectory.size === consts.EF_ZIP64_OR_32 || centralDirectory.offset === consts.EF_ZIP64_OR_32) {
            readZip64CentralDirectoryLocator();
          } else {
            op = {};
            readEntries();
          }
        } catch (err) {
          that.emit("error", err);
        }
      }
      function readZip64CentralDirectoryLocator() {
        const length = consts.ENDL64HDR;
        if (op.lastBufferPosition > length) {
          op.lastBufferPosition -= length;
          readZip64CentralDirectoryLocatorComplete();
        } else {
          op = {
            win: op.win,
            totalReadLength: length,
            minPos: op.win.position - length,
            lastPos: op.win.position,
            chunkSize: op.chunkSize,
            firstByte: consts.ENDL64SIGFIRST,
            sig: consts.ENDL64SIG,
            complete: readZip64CentralDirectoryLocatorComplete
          };
          op.win.read(op.lastPos - op.chunkSize, op.chunkSize, readUntilFoundCallback);
        }
      }
      function readZip64CentralDirectoryLocatorComplete() {
        const buffer = op.win.buffer;
        const locHeader = new CentralDirectoryLoc64Header();
        locHeader.read(
          buffer.slice(op.lastBufferPosition, op.lastBufferPosition + consts.ENDL64HDR)
        );
        const readLength = fileSize - locHeader.headerOffset;
        op = {
          win: op.win,
          totalReadLength: readLength,
          minPos: locHeader.headerOffset,
          lastPos: op.lastPos,
          chunkSize: op.chunkSize,
          firstByte: consts.END64SIGFIRST,
          sig: consts.END64SIG,
          complete: readZip64CentralDirectoryComplete
        };
        op.win.read(fileSize - op.chunkSize, op.chunkSize, readUntilFoundCallback);
      }
      function readZip64CentralDirectoryComplete() {
        const buffer = op.win.buffer;
        const zip64cd = new CentralDirectoryZip64Header();
        zip64cd.read(buffer.slice(op.lastBufferPosition, op.lastBufferPosition + consts.END64HDR));
        that.centralDirectory.volumeEntries = zip64cd.volumeEntries;
        that.centralDirectory.totalEntries = zip64cd.totalEntries;
        that.centralDirectory.size = zip64cd.size;
        that.centralDirectory.offset = zip64cd.offset;
        that.entriesCount = zip64cd.volumeEntries;
        op = {};
        readEntries();
      }
      function readEntries() {
        op = {
          win: new FileWindowBuffer(fd),
          pos: centralDirectory.offset,
          chunkSize,
          entriesLeft: centralDirectory.volumeEntries
        };
        op.win.read(op.pos, Math.min(chunkSize, fileSize - op.pos), readEntriesCallback);
      }
      function readEntriesCallback(err, bytesRead) {
        if (err || !bytesRead) {
          return that.emit("error", err || new Error("Entries read error"));
        }
        let bufferPos = op.pos - op.win.position;
        let entry = op.entry;
        const buffer = op.win.buffer;
        const bufferLength = buffer.length;
        try {
          while (op.entriesLeft > 0) {
            if (!entry) {
              entry = new ZipEntry();
              entry.readHeader(buffer, bufferPos);
              entry.headerOffset = op.win.position + bufferPos;
              op.entry = entry;
              op.pos += consts.CENHDR;
              bufferPos += consts.CENHDR;
            }
            const entryHeaderSize = entry.fnameLen + entry.extraLen + entry.comLen;
            const advanceBytes = entryHeaderSize + (op.entriesLeft > 1 ? consts.CENHDR : 0);
            if (bufferLength - bufferPos < advanceBytes) {
              op.win.moveRight(chunkSize, readEntriesCallback, bufferPos);
              op.move = true;
              return;
            }
            entry.read(buffer, bufferPos, textDecoder);
            if (!config.skipEntryNameValidation) {
              entry.validateName();
            }
            if (entries) {
              entries[entry.name] = entry;
            }
            that.emit("entry", entry);
            op.entry = entry = null;
            op.entriesLeft--;
            op.pos += entryHeaderSize;
            bufferPos += entryHeaderSize;
          }
          that.emit("ready");
        } catch (err2) {
          that.emit("error", err2);
        }
      }
      function checkEntriesExist() {
        if (!entries) {
          throw new Error("storeEntries disabled");
        }
      }
      Object.defineProperty(this, "ready", {
        get() {
          return ready;
        }
      });
      this.entry = function(name) {
        checkEntriesExist();
        return entries[name];
      };
      this.entries = function() {
        checkEntriesExist();
        return entries;
      };
      this.stream = function(entry, callback) {
        return this.openEntry(
          entry,
          (err, entry2) => {
            if (err) {
              return callback(err);
            }
            const offset = dataOffset(entry2);
            let entryStream = new EntryDataReaderStream(fd, offset, entry2.compressedSize);
            if (entry2.method === consts.STORED) {
            } else if (entry2.method === consts.DEFLATED) {
              entryStream = entryStream.pipe(zlib.createInflateRaw());
            } else {
              return callback(new Error("Unknown compression method: " + entry2.method));
            }
            if (canVerifyCrc(entry2)) {
              entryStream = entryStream.pipe(
                new EntryVerifyStream(entryStream, entry2.crc, entry2.size)
              );
            }
            callback(null, entryStream);
          },
          false
        );
      };
      this.entryDataSync = function(entry) {
        let err = null;
        this.openEntry(
          entry,
          (e, en) => {
            err = e;
            entry = en;
          },
          true
        );
        if (err) {
          throw err;
        }
        let data = Buffer.alloc(entry.compressedSize);
        new FsRead(fd, data, 0, entry.compressedSize, dataOffset(entry), (e) => {
          err = e;
        }).read(true);
        if (err) {
          throw err;
        }
        if (entry.method === consts.STORED) {
        } else if (entry.method === consts.DEFLATED || entry.method === consts.ENHANCED_DEFLATED) {
          data = zlib.inflateRawSync(data);
        } else {
          throw new Error("Unknown compression method: " + entry.method);
        }
        if (data.length !== entry.size) {
          throw new Error("Invalid size");
        }
        if (canVerifyCrc(entry)) {
          const verify = new CrcVerify(entry.crc, entry.size);
          verify.data(data);
        }
        return data;
      };
      this.openEntry = function(entry, callback, sync) {
        if (typeof entry === "string") {
          checkEntriesExist();
          entry = entries[entry];
          if (!entry) {
            return callback(new Error("Entry not found"));
          }
        }
        if (!entry.isFile) {
          return callback(new Error("Entry is not file"));
        }
        if (!fd) {
          return callback(new Error("Archive closed"));
        }
        const buffer = Buffer.alloc(consts.LOCHDR);
        new FsRead(fd, buffer, 0, buffer.length, entry.offset, (err) => {
          if (err) {
            return callback(err);
          }
          let readEx;
          try {
            entry.readDataHeader(buffer);
            if (entry.encrypted) {
              readEx = new Error("Entry encrypted");
            }
          } catch (ex) {
            readEx = ex;
          }
          callback(readEx, entry);
        }).read(sync);
      };
      function dataOffset(entry) {
        return entry.offset + consts.LOCHDR + entry.fnameLen + entry.extraLen;
      }
      function canVerifyCrc(entry) {
        return (entry.flags & 8) !== 8;
      }
      function extract(entry, outPath, callback) {
        that.stream(entry, (err, stm) => {
          if (err) {
            callback(err);
          } else {
            let fsStm, errThrown;
            stm.on("error", (err2) => {
              errThrown = err2;
              if (fsStm) {
                stm.unpipe(fsStm);
                fsStm.close(() => {
                  callback(err2);
                });
              }
            });
            fs.open(outPath, "w", (err2, fdFile) => {
              if (err2) {
                return callback(err2);
              }
              if (errThrown) {
                fs.close(fd, () => {
                  callback(errThrown);
                });
                return;
              }
              fsStm = fs.createWriteStream(outPath, { fd: fdFile });
              fsStm.on("finish", () => {
                that.emit("extract", entry, outPath);
                if (!errThrown) {
                  callback();
                }
              });
              stm.pipe(fsStm);
            });
          }
        });
      }
      function createDirectories(baseDir, dirs, callback) {
        if (!dirs.length) {
          return callback();
        }
        let dir = dirs.shift();
        dir = path3.join(baseDir, path3.join(...dir));
        fs.mkdir(dir, { recursive: true }, (err) => {
          if (err && err.code !== "EEXIST") {
            return callback(err);
          }
          createDirectories(baseDir, dirs, callback);
        });
      }
      function extractFiles(baseDir, baseRelPath, files, callback, extractedCount) {
        if (!files.length) {
          return callback(null, extractedCount);
        }
        const file = files.shift();
        const targetPath = path3.join(baseDir, file.name.replace(baseRelPath, ""));
        extract(file, targetPath, (err) => {
          if (err) {
            return callback(err, extractedCount);
          }
          extractFiles(baseDir, baseRelPath, files, callback, extractedCount + 1);
        });
      }
      this.extract = function(entry, outPath, callback) {
        let entryName = entry || "";
        if (typeof entry === "string") {
          entry = this.entry(entry);
          if (entry) {
            entryName = entry.name;
          } else {
            if (entryName.length && entryName[entryName.length - 1] !== "/") {
              entryName += "/";
            }
          }
        }
        if (!entry || entry.isDirectory) {
          const files = [], dirs = [], allDirs = {};
          for (const e in entries) {
            if (Object.prototype.hasOwnProperty.call(entries, e) && e.lastIndexOf(entryName, 0) === 0) {
              let relPath = e.replace(entryName, "");
              const childEntry = entries[e];
              if (childEntry.isFile) {
                files.push(childEntry);
                relPath = path3.dirname(relPath);
              }
              if (relPath && !allDirs[relPath] && relPath !== ".") {
                allDirs[relPath] = true;
                let parts = relPath.split("/").filter((f) => {
                  return f;
                });
                if (parts.length) {
                  dirs.push(parts);
                }
                while (parts.length > 1) {
                  parts = parts.slice(0, parts.length - 1);
                  const partsPath = parts.join("/");
                  if (allDirs[partsPath] || partsPath === ".") {
                    break;
                  }
                  allDirs[partsPath] = true;
                  dirs.push(parts);
                }
              }
            }
          }
          dirs.sort((x, y) => {
            return x.length - y.length;
          });
          if (dirs.length) {
            createDirectories(outPath, dirs, (err) => {
              if (err) {
                callback(err);
              } else {
                extractFiles(outPath, entryName, files, callback, 0);
              }
            });
          } else {
            extractFiles(outPath, entryName, files, callback, 0);
          }
        } else {
          fs.stat(outPath, (err, stat) => {
            if (stat && stat.isDirectory()) {
              extract(entry, path3.join(outPath, path3.basename(entry.name)), callback);
            } else {
              extract(entry, outPath, callback);
            }
          });
        }
      };
      this.close = function(callback) {
        if (closed || !fd) {
          closed = true;
          if (callback) {
            callback();
          }
        } else {
          closed = true;
          fs.close(fd, (err) => {
            fd = null;
            if (callback) {
              callback(err);
            }
          });
        }
      };
      const originalEmit = events.EventEmitter.prototype.emit;
      this.emit = function(...args) {
        if (!closed) {
          return originalEmit.call(this, ...args);
        }
      };
    };
    StreamZip.setFs = function(customFs) {
      fs = customFs;
    };
    StreamZip.debugLog = (...args) => {
      if (StreamZip.debug) {
        console.log(...args);
      }
    };
    util.inherits(StreamZip, events.EventEmitter);
    var propZip = Symbol("zip");
    StreamZip.async = class StreamZipAsync extends events.EventEmitter {
      constructor(config) {
        super();
        const zip = new StreamZip(config);
        zip.on("entry", (entry) => this.emit("entry", entry));
        zip.on("extract", (entry, outPath) => this.emit("extract", entry, outPath));
        this[propZip] = new Promise((resolve, reject) => {
          zip.on("ready", () => {
            zip.removeListener("error", reject);
            resolve(zip);
          });
          zip.on("error", reject);
        });
      }
      get entriesCount() {
        return this[propZip].then((zip) => zip.entriesCount);
      }
      get comment() {
        return this[propZip].then((zip) => zip.comment);
      }
      async entry(name) {
        const zip = await this[propZip];
        return zip.entry(name);
      }
      async entries() {
        const zip = await this[propZip];
        return zip.entries();
      }
      async stream(entry) {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.stream(entry, (err, stm) => {
            if (err) {
              reject(err);
            } else {
              resolve(stm);
            }
          });
        });
      }
      async entryData(entry) {
        const stm = await this.stream(entry);
        return new Promise((resolve, reject) => {
          const data = [];
          stm.on("data", (chunk) => data.push(chunk));
          stm.on("end", () => {
            resolve(Buffer.concat(data));
          });
          stm.on("error", (err) => {
            stm.removeAllListeners("end");
            reject(err);
          });
        });
      }
      async extract(entry, outPath) {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.extract(entry, outPath, (err, res) => {
            if (err) {
              reject(err);
            } else {
              resolve(res);
            }
          });
        });
      }
      async close() {
        const zip = await this[propZip];
        return new Promise((resolve, reject) => {
          zip.close((err) => {
            if (err) {
              reject(err);
            } else {
              resolve();
            }
          });
        });
      }
    };
    var CentralDirectoryHeader = class {
      read(data) {
        if (data.length !== consts.ENDHDR || data.readUInt32LE(0) !== consts.ENDSIG) {
          throw new Error("Invalid central directory");
        }
        this.volumeEntries = data.readUInt16LE(consts.ENDSUB);
        this.totalEntries = data.readUInt16LE(consts.ENDTOT);
        this.size = data.readUInt32LE(consts.ENDSIZ);
        this.offset = data.readUInt32LE(consts.ENDOFF);
        this.commentLength = data.readUInt16LE(consts.ENDCOM);
      }
    };
    var CentralDirectoryLoc64Header = class {
      read(data) {
        if (data.length !== consts.ENDL64HDR || data.readUInt32LE(0) !== consts.ENDL64SIG) {
          throw new Error("Invalid zip64 central directory locator");
        }
        this.headerOffset = readUInt64LE(data, consts.ENDSUB);
      }
    };
    var CentralDirectoryZip64Header = class {
      read(data) {
        if (data.length !== consts.END64HDR || data.readUInt32LE(0) !== consts.END64SIG) {
          throw new Error("Invalid central directory");
        }
        this.volumeEntries = readUInt64LE(data, consts.END64SUB);
        this.totalEntries = readUInt64LE(data, consts.END64TOT);
        this.size = readUInt64LE(data, consts.END64SIZ);
        this.offset = readUInt64LE(data, consts.END64OFF);
      }
    };
    var ZipEntry = class {
      readHeader(data, offset) {
        if (data.length < offset + consts.CENHDR || data.readUInt32LE(offset) !== consts.CENSIG) {
          throw new Error("Invalid entry header");
        }
        this.verMade = data.readUInt16LE(offset + consts.CENVEM);
        this.version = data.readUInt16LE(offset + consts.CENVER);
        this.flags = data.readUInt16LE(offset + consts.CENFLG);
        this.method = data.readUInt16LE(offset + consts.CENHOW);
        const timebytes = data.readUInt16LE(offset + consts.CENTIM);
        const datebytes = data.readUInt16LE(offset + consts.CENTIM + 2);
        this.time = parseZipTime(timebytes, datebytes);
        this.crc = data.readUInt32LE(offset + consts.CENCRC);
        this.compressedSize = data.readUInt32LE(offset + consts.CENSIZ);
        this.size = data.readUInt32LE(offset + consts.CENLEN);
        this.fnameLen = data.readUInt16LE(offset + consts.CENNAM);
        this.extraLen = data.readUInt16LE(offset + consts.CENEXT);
        this.comLen = data.readUInt16LE(offset + consts.CENCOM);
        this.diskStart = data.readUInt16LE(offset + consts.CENDSK);
        this.inattr = data.readUInt16LE(offset + consts.CENATT);
        this.attr = data.readUInt32LE(offset + consts.CENATX);
        this.offset = data.readUInt32LE(offset + consts.CENOFF);
      }
      readDataHeader(data) {
        if (data.readUInt32LE(0) !== consts.LOCSIG) {
          throw new Error("Invalid local header");
        }
        this.version = data.readUInt16LE(consts.LOCVER);
        this.flags = data.readUInt16LE(consts.LOCFLG);
        this.method = data.readUInt16LE(consts.LOCHOW);
        const timebytes = data.readUInt16LE(consts.LOCTIM);
        const datebytes = data.readUInt16LE(consts.LOCTIM + 2);
        this.time = parseZipTime(timebytes, datebytes);
        this.crc = data.readUInt32LE(consts.LOCCRC) || this.crc;
        const compressedSize = data.readUInt32LE(consts.LOCSIZ);
        if (compressedSize && compressedSize !== consts.EF_ZIP64_OR_32) {
          this.compressedSize = compressedSize;
        }
        const size = data.readUInt32LE(consts.LOCLEN);
        if (size && size !== consts.EF_ZIP64_OR_32) {
          this.size = size;
        }
        this.fnameLen = data.readUInt16LE(consts.LOCNAM);
        this.extraLen = data.readUInt16LE(consts.LOCEXT);
      }
      read(data, offset, textDecoder) {
        const nameData = data.slice(offset, offset += this.fnameLen);
        this.name = textDecoder ? textDecoder.decode(new Uint8Array(nameData)) : nameData.toString("utf8");
        const lastChar = data[offset - 1];
        this.isDirectory = lastChar === 47 || lastChar === 92;
        if (this.extraLen) {
          this.readExtra(data, offset);
          offset += this.extraLen;
        }
        this.comment = this.comLen ? data.slice(offset, offset + this.comLen).toString() : null;
      }
      validateName() {
        if (/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name)) {
          throw new Error("Malicious entry: " + this.name);
        }
      }
      readExtra(data, offset) {
        let signature, size;
        const maxPos = offset + this.extraLen;
        while (offset < maxPos) {
          signature = data.readUInt16LE(offset);
          offset += 2;
          size = data.readUInt16LE(offset);
          offset += 2;
          if (consts.ID_ZIP64 === signature) {
            this.parseZip64Extra(data, offset, size);
          }
          offset += size;
        }
      }
      parseZip64Extra(data, offset, length) {
        if (length >= 8 && this.size === consts.EF_ZIP64_OR_32) {
          this.size = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 8 && this.compressedSize === consts.EF_ZIP64_OR_32) {
          this.compressedSize = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 8 && this.offset === consts.EF_ZIP64_OR_32) {
          this.offset = readUInt64LE(data, offset);
          offset += 8;
          length -= 8;
        }
        if (length >= 4 && this.diskStart === consts.EF_ZIP64_OR_16) {
          this.diskStart = data.readUInt32LE(offset);
        }
      }
      get encrypted() {
        return (this.flags & consts.FLG_ENTRY_ENC) === consts.FLG_ENTRY_ENC;
      }
      get isFile() {
        return !this.isDirectory;
      }
    };
    var FsRead = class {
      constructor(fd, buffer, offset, length, position, callback) {
        this.fd = fd;
        this.buffer = buffer;
        this.offset = offset;
        this.length = length;
        this.position = position;
        this.callback = callback;
        this.bytesRead = 0;
        this.waiting = false;
      }
      read(sync) {
        StreamZip.debugLog("read", this.position, this.bytesRead, this.length, this.offset);
        this.waiting = true;
        let err;
        if (sync) {
          let bytesRead = 0;
          try {
            bytesRead = fs.readSync(
              this.fd,
              this.buffer,
              this.offset + this.bytesRead,
              this.length - this.bytesRead,
              this.position + this.bytesRead
            );
          } catch (e) {
            err = e;
          }
          this.readCallback(sync, err, err ? bytesRead : null);
        } else {
          fs.read(
            this.fd,
            this.buffer,
            this.offset + this.bytesRead,
            this.length - this.bytesRead,
            this.position + this.bytesRead,
            this.readCallback.bind(this, sync)
          );
        }
      }
      readCallback(sync, err, bytesRead) {
        if (typeof bytesRead === "number") {
          this.bytesRead += bytesRead;
        }
        if (err || !bytesRead || this.bytesRead === this.length) {
          this.waiting = false;
          return this.callback(err, this.bytesRead);
        } else {
          this.read(sync);
        }
      }
    };
    var FileWindowBuffer = class {
      constructor(fd) {
        this.position = 0;
        this.buffer = Buffer.alloc(0);
        this.fd = fd;
        this.fsOp = null;
      }
      checkOp() {
        if (this.fsOp && this.fsOp.waiting) {
          throw new Error("Operation in progress");
        }
      }
      read(pos, length, callback) {
        this.checkOp();
        if (this.buffer.length < length) {
          this.buffer = Buffer.alloc(length);
        }
        this.position = pos;
        this.fsOp = new FsRead(this.fd, this.buffer, 0, length, this.position, callback).read();
      }
      expandLeft(length, callback) {
        this.checkOp();
        this.buffer = Buffer.concat([Buffer.alloc(length), this.buffer]);
        this.position -= length;
        if (this.position < 0) {
          this.position = 0;
        }
        this.fsOp = new FsRead(this.fd, this.buffer, 0, length, this.position, callback).read();
      }
      expandRight(length, callback) {
        this.checkOp();
        const offset = this.buffer.length;
        this.buffer = Buffer.concat([this.buffer, Buffer.alloc(length)]);
        this.fsOp = new FsRead(
          this.fd,
          this.buffer,
          offset,
          length,
          this.position + offset,
          callback
        ).read();
      }
      moveRight(length, callback, shift) {
        this.checkOp();
        if (shift) {
          this.buffer.copy(this.buffer, 0, shift);
        } else {
          shift = 0;
        }
        this.position += shift;
        this.fsOp = new FsRead(
          this.fd,
          this.buffer,
          this.buffer.length - shift,
          shift,
          this.position + this.buffer.length - shift,
          callback
        ).read();
      }
    };
    var EntryDataReaderStream = class extends stream.Readable {
      constructor(fd, offset, length) {
        super();
        this.fd = fd;
        this.offset = offset;
        this.length = length;
        this.pos = 0;
        this.readCallback = this.readCallback.bind(this);
      }
      _read(n) {
        const buffer = Buffer.alloc(Math.min(n, this.length - this.pos));
        if (buffer.length) {
          fs.read(this.fd, buffer, 0, buffer.length, this.offset + this.pos, this.readCallback);
        } else {
          this.push(null);
        }
      }
      readCallback(err, bytesRead, buffer) {
        this.pos += bytesRead;
        if (err) {
          this.emit("error", err);
          this.push(null);
        } else if (!bytesRead) {
          this.push(null);
        } else {
          if (bytesRead !== buffer.length) {
            buffer = buffer.slice(0, bytesRead);
          }
          this.push(buffer);
        }
      }
    };
    var EntryVerifyStream = class extends stream.Transform {
      constructor(baseStm, crc, size) {
        super();
        this.verify = new CrcVerify(crc, size);
        baseStm.on("error", (e) => {
          this.emit("error", e);
        });
      }
      _transform(data, encoding, callback) {
        let err;
        try {
          this.verify.data(data);
        } catch (e) {
          err = e;
        }
        callback(err, data);
      }
    };
    var CrcVerify = class _CrcVerify {
      constructor(crc, size) {
        this.crc = crc;
        this.size = size;
        this.state = {
          crc: ~0,
          size: 0
        };
      }
      data(data) {
        const crcTable = _CrcVerify.getCrcTable();
        let crc = this.state.crc;
        let off = 0;
        let len = data.length;
        while (--len >= 0) {
          crc = crcTable[(crc ^ data[off++]) & 255] ^ crc >>> 8;
        }
        this.state.crc = crc;
        this.state.size += data.length;
        if (this.state.size >= this.size) {
          const buf = Buffer.alloc(4);
          buf.writeInt32LE(~this.state.crc & 4294967295, 0);
          crc = buf.readUInt32LE(0);
          if (crc !== this.crc) {
            throw new Error("Invalid CRC");
          }
          if (this.state.size !== this.size) {
            throw new Error("Invalid size");
          }
        }
      }
      static getCrcTable() {
        let crcTable = _CrcVerify.crcTable;
        if (!crcTable) {
          _CrcVerify.crcTable = crcTable = [];
          const b = Buffer.alloc(4);
          for (let n = 0; n < 256; n++) {
            let c = n;
            for (let k = 8; --k >= 0; ) {
              if ((c & 1) !== 0) {
                c = 3988292384 ^ c >>> 1;
              } else {
                c = c >>> 1;
              }
            }
            if (c < 0) {
              b.writeInt32LE(c, 0);
              c = b.readUInt32LE(0);
            }
            crcTable[n] = c;
          }
        }
        return crcTable;
      }
    };
    function parseZipTime(timebytes, datebytes) {
      const timebits = toBits(timebytes, 16);
      const datebits = toBits(datebytes, 16);
      const mt = {
        h: parseInt(timebits.slice(0, 5).join(""), 2),
        m: parseInt(timebits.slice(5, 11).join(""), 2),
        s: parseInt(timebits.slice(11, 16).join(""), 2) * 2,
        Y: parseInt(datebits.slice(0, 7).join(""), 2) + 1980,
        M: parseInt(datebits.slice(7, 11).join(""), 2),
        D: parseInt(datebits.slice(11, 16).join(""), 2)
      };
      const dt_str = [mt.Y, mt.M, mt.D].join("-") + " " + [mt.h, mt.m, mt.s].join(":") + " GMT+0";
      return new Date(dt_str).getTime();
    }
    function toBits(dec, size) {
      let b = (dec >>> 0).toString(2);
      while (b.length < size) {
        b = "0" + b;
      }
      return b.split("");
    }
    function readUInt64LE(buffer, offset) {
      return buffer.readUInt32LE(offset + 4) * 4294967296 + buffer.readUInt32LE(offset);
    }
    module2.exports = StreamZip;
  }
});

// node_modules/graphemesplit/types.js
var require_types = __commonJS({
  "node_modules/graphemesplit/types.js"(exports2, module2) {
    module2.exports = {
      Other: 0,
      CR: 1 << 0,
      LF: 1 << 1,
      Control: 1 << 2,
      Extend: 1 << 3,
      ZWJ: 1 << 4,
      Regional_Indicator: 1 << 5,
      Prepend: 1 << 6,
      SpacingMark: 1 << 7,
      L: 1 << 8,
      V: 1 << 9,
      T: 1 << 10,
      LV: 1 << 11,
      LVT: 1 << 12,
      Extended_Pictographic: 1 << 13,
      InCB_Linker: 1 << 14,
      InCB_Consonant: 1 << 15,
      InCB_Extend: 1 << 16
    };
  }
});

// node_modules/graphemesplit/typeTrie.json
var require_typeTrie = __commonJS({
  "node_modules/graphemesplit/typeTrie.json"(exports2, module2) {
    module2.exports = { data: "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" };
  }
});

// node_modules/graphemesplit/extPict.json
var require_extPict = __commonJS({
  "node_modules/graphemesplit/extPict.json"(exports2, module2) {
    module2.exports = { data: "AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs=" };
  }
});

// node_modules/graphemesplit/inCB.json
var require_inCB = __commonJS({
  "node_modules/graphemesplit/inCB.json"(exports2, module2) {
    module2.exports = { data: "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" };
  }
});

// node_modules/tiny-inflate/index.js
var require_tiny_inflate = __commonJS({
  "node_modules/tiny-inflate/index.js"(exports2, module2) {
    var TINF_OK = 0;
    var TINF_DATA_ERROR = -3;
    function Tree() {
      this.table = new Uint16Array(16);
      this.trans = new Uint16Array(288);
    }
    function Data(source, dest) {
      this.source = source;
      this.sourceIndex = 0;
      this.tag = 0;
      this.bitcount = 0;
      this.dest = dest;
      this.destLen = 0;
      this.ltree = new Tree();
      this.dtree = new Tree();
    }
    var sltree = new Tree();
    var sdtree = new Tree();
    var length_bits = new Uint8Array(30);
    var length_base = new Uint16Array(30);
    var dist_bits = new Uint8Array(30);
    var dist_base = new Uint16Array(30);
    var clcidx = new Uint8Array([
      16,
      17,
      18,
      0,
      8,
      7,
      9,
      6,
      10,
      5,
      11,
      4,
      12,
      3,
      13,
      2,
      14,
      1,
      15
    ]);
    var code_tree = new Tree();
    var lengths = new Uint8Array(288 + 32);
    function tinf_build_bits_base(bits, base, delta, first) {
      var i, sum;
      for (i = 0; i < delta; ++i) bits[i] = 0;
      for (i = 0; i < 30 - delta; ++i) bits[i + delta] = i / delta | 0;
      for (sum = first, i = 0; i < 30; ++i) {
        base[i] = sum;
        sum += 1 << bits[i];
      }
    }
    function tinf_build_fixed_trees(lt, dt) {
      var i;
      for (i = 0; i < 7; ++i) lt.table[i] = 0;
      lt.table[7] = 24;
      lt.table[8] = 152;
      lt.table[9] = 112;
      for (i = 0; i < 24; ++i) lt.trans[i] = 256 + i;
      for (i = 0; i < 144; ++i) lt.trans[24 + i] = i;
      for (i = 0; i < 8; ++i) lt.trans[24 + 144 + i] = 280 + i;
      for (i = 0; i < 112; ++i) lt.trans[24 + 144 + 8 + i] = 144 + i;
      for (i = 0; i < 5; ++i) dt.table[i] = 0;
      dt.table[5] = 32;
      for (i = 0; i < 32; ++i) dt.trans[i] = i;
    }
    var offs = new Uint16Array(16);
    function tinf_build_tree(t, lengths2, off, num) {
      var i, sum;
      for (i = 0; i < 16; ++i) t.table[i] = 0;
      for (i = 0; i < num; ++i) t.table[lengths2[off + i]]++;
      t.table[0] = 0;
      for (sum = 0, i = 0; i < 16; ++i) {
        offs[i] = sum;
        sum += t.table[i];
      }
      for (i = 0; i < num; ++i) {
        if (lengths2[off + i]) t.trans[offs[lengths2[off + i]]++] = i;
      }
    }
    function tinf_getbit(d) {
      if (!d.bitcount--) {
        d.tag = d.source[d.sourceIndex++];
        d.bitcount = 7;
      }
      var bit = d.tag & 1;
      d.tag >>>= 1;
      return bit;
    }
    function tinf_read_bits(d, num, base) {
      if (!num)
        return base;
      while (d.bitcount < 24) {
        d.tag |= d.source[d.sourceIndex++] << d.bitcount;
        d.bitcount += 8;
      }
      var val = d.tag & 65535 >>> 16 - num;
      d.tag >>>= num;
      d.bitcount -= num;
      return val + base;
    }
    function tinf_decode_symbol(d, t) {
      while (d.bitcount < 24) {
        d.tag |= d.source[d.sourceIndex++] << d.bitcount;
        d.bitcount += 8;
      }
      var sum = 0, cur = 0, len = 0;
      var tag = d.tag;
      do {
        cur = 2 * cur + (tag & 1);
        tag >>>= 1;
        ++len;
        sum += t.table[len];
        cur -= t.table[len];
      } while (cur >= 0);
      d.tag = tag;
      d.bitcount -= len;
      return t.trans[sum + cur];
    }
    function tinf_decode_trees(d, lt, dt) {
      var hlit, hdist, hclen;
      var i, num, length;
      hlit = tinf_read_bits(d, 5, 257);
      hdist = tinf_read_bits(d, 5, 1);
      hclen = tinf_read_bits(d, 4, 4);
      for (i = 0; i < 19; ++i) lengths[i] = 0;
      for (i = 0; i < hclen; ++i) {
        var clen = tinf_read_bits(d, 3, 0);
        lengths[clcidx[i]] = clen;
      }
      tinf_build_tree(code_tree, lengths, 0, 19);
      for (num = 0; num < hlit + hdist; ) {
        var sym = tinf_decode_symbol(d, code_tree);
        switch (sym) {
          case 16:
            var prev = lengths[num - 1];
            for (length = tinf_read_bits(d, 2, 3); length; --length) {
              lengths[num++] = prev;
            }
            break;
          case 17:
            for (length = tinf_read_bits(d, 3, 3); length; --length) {
              lengths[num++] = 0;
            }
            break;
          case 18:
            for (length = tinf_read_bits(d, 7, 11); length; --length) {
              lengths[num++] = 0;
            }
            break;
          default:
            lengths[num++] = sym;
            break;
        }
      }
      tinf_build_tree(lt, lengths, 0, hlit);
      tinf_build_tree(dt, lengths, hlit, hdist);
    }
    function tinf_inflate_block_data(d, lt, dt) {
      while (1) {
        var sym = tinf_decode_symbol(d, lt);
        if (sym === 256) {
          return TINF_OK;
        }
        if (sym < 256) {
          d.dest[d.destLen++] = sym;
        } else {
          var length, dist, offs2;
          var i;
          sym -= 257;
          length = tinf_read_bits(d, length_bits[sym], length_base[sym]);
          dist = tinf_decode_symbol(d, dt);
          offs2 = d.destLen - tinf_read_bits(d, dist_bits[dist], dist_base[dist]);
          for (i = offs2; i < offs2 + length; ++i) {
            d.dest[d.destLen++] = d.dest[i];
          }
        }
      }
    }
    function tinf_inflate_uncompressed_block(d) {
      var length, invlength;
      var i;
      while (d.bitcount > 8) {
        d.sourceIndex--;
        d.bitcount -= 8;
      }
      length = d.source[d.sourceIndex + 1];
      length = 256 * length + d.source[d.sourceIndex];
      invlength = d.source[d.sourceIndex + 3];
      invlength = 256 * invlength + d.source[d.sourceIndex + 2];
      if (length !== (~invlength & 65535))
        return TINF_DATA_ERROR;
      d.sourceIndex += 4;
      for (i = length; i; --i)
        d.dest[d.destLen++] = d.source[d.sourceIndex++];
      d.bitcount = 0;
      return TINF_OK;
    }
    function tinf_uncompress(source, dest) {
      var d = new Data(source, dest);
      var bfinal, btype, res;
      do {
        bfinal = tinf_getbit(d);
        btype = tinf_read_bits(d, 2, 0);
        switch (btype) {
          case 0:
            res = tinf_inflate_uncompressed_block(d);
            break;
          case 1:
            res = tinf_inflate_block_data(d, sltree, sdtree);
            break;
          case 2:
            tinf_decode_trees(d, d.ltree, d.dtree);
            res = tinf_inflate_block_data(d, d.ltree, d.dtree);
            break;
          default:
            res = TINF_DATA_ERROR;
        }
        if (res !== TINF_OK)
          throw new Error("Data error");
      } while (!bfinal);
      if (d.destLen < d.dest.length) {
        if (typeof d.dest.slice === "function")
          return d.dest.slice(0, d.destLen);
        else
          return d.dest.subarray(0, d.destLen);
      }
      return d.dest;
    }
    tinf_build_fixed_trees(sltree, sdtree);
    tinf_build_bits_base(length_bits, length_base, 4, 3);
    tinf_build_bits_base(dist_bits, dist_base, 2, 1);
    length_bits[28] = 0;
    length_base[28] = 258;
    module2.exports = tinf_uncompress;
  }
});

// node_modules/unicode-trie/swap.js
var require_swap = __commonJS({
  "node_modules/unicode-trie/swap.js"(exports2, module2) {
    var isBigEndian = new Uint8Array(new Uint32Array([305419896]).buffer)[0] === 18;
    var swap = (b, n, m) => {
      let i = b[n];
      b[n] = b[m];
      b[m] = i;
    };
    var swap32 = (array) => {
      const len = array.length;
      for (let i = 0; i < len; i += 4) {
        swap(array, i, i + 3);
        swap(array, i + 1, i + 2);
      }
    };
    var swap32LE = (array) => {
      if (isBigEndian) {
        swap32(array);
      }
    };
    module2.exports = {
      swap32LE
    };
  }
});

// node_modules/unicode-trie/index.js
var require_unicode_trie = __commonJS({
  "node_modules/unicode-trie/index.js"(exports2, module2) {
    var inflate = require_tiny_inflate();
    var { swap32LE } = require_swap();
    var SHIFT_1 = 6 + 5;
    var SHIFT_2 = 5;
    var SHIFT_1_2 = SHIFT_1 - SHIFT_2;
    var OMITTED_BMP_INDEX_1_LENGTH = 65536 >> SHIFT_1;
    var INDEX_2_BLOCK_LENGTH = 1 << SHIFT_1_2;
    var INDEX_2_MASK = INDEX_2_BLOCK_LENGTH - 1;
    var INDEX_SHIFT = 2;
    var DATA_BLOCK_LENGTH = 1 << SHIFT_2;
    var DATA_MASK = DATA_BLOCK_LENGTH - 1;
    var LSCP_INDEX_2_OFFSET = 65536 >> SHIFT_2;
    var LSCP_INDEX_2_LENGTH = 1024 >> SHIFT_2;
    var INDEX_2_BMP_LENGTH = LSCP_INDEX_2_OFFSET + LSCP_INDEX_2_LENGTH;
    var UTF8_2B_INDEX_2_OFFSET = INDEX_2_BMP_LENGTH;
    var UTF8_2B_INDEX_2_LENGTH = 2048 >> 6;
    var INDEX_1_OFFSET = UTF8_2B_INDEX_2_OFFSET + UTF8_2B_INDEX_2_LENGTH;
    var DATA_GRANULARITY = 1 << INDEX_SHIFT;
    var UnicodeTrie = class {
      constructor(data) {
        const isBuffer = typeof data.readUInt32BE === "function" && typeof data.slice === "function";
        if (isBuffer || data instanceof Uint8Array) {
          let uncompressedLength;
          if (isBuffer) {
            this.highStart = data.readUInt32LE(0);
            this.errorValue = data.readUInt32LE(4);
            uncompressedLength = data.readUInt32LE(8);
            data = data.slice(12);
          } else {
            const view = new DataView(data.buffer);
            this.highStart = view.getUint32(0, true);
            this.errorValue = view.getUint32(4, true);
            uncompressedLength = view.getUint32(8, true);
            data = data.subarray(12);
          }
          data = inflate(data, new Uint8Array(uncompressedLength));
          data = inflate(data, new Uint8Array(uncompressedLength));
          swap32LE(data);
          this.data = new Uint32Array(data.buffer);
        } else {
          ({ data: this.data, highStart: this.highStart, errorValue: this.errorValue } = data);
        }
      }
      get(codePoint) {
        let index;
        if (codePoint < 0 || codePoint > 1114111) {
          return this.errorValue;
        }
        if (codePoint < 55296 || codePoint > 56319 && codePoint <= 65535) {
          index = (this.data[codePoint >> SHIFT_2] << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        if (codePoint <= 65535) {
          index = (this.data[LSCP_INDEX_2_OFFSET + (codePoint - 55296 >> SHIFT_2)] << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        if (codePoint < this.highStart) {
          index = this.data[INDEX_1_OFFSET - OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> SHIFT_1)];
          index = this.data[index + (codePoint >> SHIFT_2 & INDEX_2_MASK)];
          index = (index << INDEX_SHIFT) + (codePoint & DATA_MASK);
          return this.data[index];
        }
        return this.data[this.data.length - DATA_GRANULARITY];
      }
    };
    module2.exports = UnicodeTrie;
  }
});

// node_modules/js-base64/base64.js
var require_base64 = __commonJS({
  "node_modules/js-base64/base64.js"(exports2, module2) {
    (function(global2, factory) {
      typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (
        // cf. https://github.com/dankogai/js-base64/issues/119
        (function() {
          var _Base64 = global2.Base64;
          var gBase64 = factory();
          gBase64.noConflict = function() {
            global2.Base64 = _Base64;
            return gBase64;
          };
          if (global2.Meteor) {
            Base64 = gBase64;
          }
          global2.Base64 = gBase64;
        })()
      );
    })(typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : exports2, function() {
      "use strict";
      var version = "3.7.7";
      var VERSION = version;
      var _hasBuffer = typeof Buffer === "function";
      var _TD = typeof TextDecoder === "function" ? new TextDecoder() : void 0;
      var _TE = typeof TextEncoder === "function" ? new TextEncoder() : void 0;
      var b64ch = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      var b64chs = Array.prototype.slice.call(b64ch);
      var b64tab = (function(a) {
        var tab = {};
        a.forEach(function(c, i) {
          return tab[c] = i;
        });
        return tab;
      })(b64chs);
      var b64re = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;
      var _fromCC = String.fromCharCode.bind(String);
      var _U8Afrom = typeof Uint8Array.from === "function" ? Uint8Array.from.bind(Uint8Array) : function(it) {
        return new Uint8Array(Array.prototype.slice.call(it, 0));
      };
      var _mkUriSafe = function(src) {
        return src.replace(/=/g, "").replace(/[+\/]/g, function(m0) {
          return m0 == "+" ? "-" : "_";
        });
      };
      var _tidyB64 = function(s) {
        return s.replace(/[^A-Za-z0-9\+\/]/g, "");
      };
      var btoaPolyfill = function(bin) {
        var u32, c0, c1, c2, asc = "";
        var pad = bin.length % 3;
        for (var i = 0; i < bin.length; ) {
          if ((c0 = bin.charCodeAt(i++)) > 255 || (c1 = bin.charCodeAt(i++)) > 255 || (c2 = bin.charCodeAt(i++)) > 255)
            throw new TypeError("invalid character found");
          u32 = c0 << 16 | c1 << 8 | c2;
          asc += b64chs[u32 >> 18 & 63] + b64chs[u32 >> 12 & 63] + b64chs[u32 >> 6 & 63] + b64chs[u32 & 63];
        }
        return pad ? asc.slice(0, pad - 3) + "===".substring(pad) : asc;
      };
      var _btoa = typeof btoa === "function" ? function(bin) {
        return btoa(bin);
      } : _hasBuffer ? function(bin) {
        return Buffer.from(bin, "binary").toString("base64");
      } : btoaPolyfill;
      var _fromUint8Array = _hasBuffer ? function(u8a) {
        return Buffer.from(u8a).toString("base64");
      } : function(u8a) {
        var maxargs = 4096;
        var strs = [];
        for (var i = 0, l = u8a.length; i < l; i += maxargs) {
          strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));
        }
        return _btoa(strs.join(""));
      };
      var fromUint8Array = function(u8a, urlsafe) {
        if (urlsafe === void 0) {
          urlsafe = false;
        }
        return urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);
      };
      var cb_utob = function(c) {
        if (c.length < 2) {
          var cc = c.charCodeAt(0);
          return cc < 128 ? c : cc < 2048 ? _fromCC(192 | cc >>> 6) + _fromCC(128 | cc & 63) : _fromCC(224 | cc >>> 12 & 15) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
        } else {
          var cc = 65536 + (c.charCodeAt(0) - 55296) * 1024 + (c.charCodeAt(1) - 56320);
          return _fromCC(240 | cc >>> 18 & 7) + _fromCC(128 | cc >>> 12 & 63) + _fromCC(128 | cc >>> 6 & 63) + _fromCC(128 | cc & 63);
        }
      };
      var re_utob = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;
      var utob = function(u) {
        return u.replace(re_utob, cb_utob);
      };
      var _encode = _hasBuffer ? function(s) {
        return Buffer.from(s, "utf8").toString("base64");
      } : _TE ? function(s) {
        return _fromUint8Array(_TE.encode(s));
      } : function(s) {
        return _btoa(utob(s));
      };
      var encode = function(src, urlsafe) {
        if (urlsafe === void 0) {
          urlsafe = false;
        }
        return urlsafe ? _mkUriSafe(_encode(src)) : _encode(src);
      };
      var encodeURI2 = function(src) {
        return encode(src, true);
      };
      var re_btou = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;
      var cb_btou = function(cccc) {
        switch (cccc.length) {
          case 4:
            var cp = (7 & cccc.charCodeAt(0)) << 18 | (63 & cccc.charCodeAt(1)) << 12 | (63 & cccc.charCodeAt(2)) << 6 | 63 & cccc.charCodeAt(3), offset = cp - 65536;
            return _fromCC((offset >>> 10) + 55296) + _fromCC((offset & 1023) + 56320);
          case 3:
            return _fromCC((15 & cccc.charCodeAt(0)) << 12 | (63 & cccc.charCodeAt(1)) << 6 | 63 & cccc.charCodeAt(2));
          default:
            return _fromCC((31 & cccc.charCodeAt(0)) << 6 | 63 & cccc.charCodeAt(1));
        }
      };
      var btou = function(b) {
        return b.replace(re_btou, cb_btou);
      };
      var atobPolyfill = function(asc) {
        asc = asc.replace(/\s+/g, "");
        if (!b64re.test(asc))
          throw new TypeError("malformed base64.");
        asc += "==".slice(2 - (asc.length & 3));
        var u24, bin = "", r1, r2;
        for (var i = 0; i < asc.length; ) {
          u24 = b64tab[asc.charAt(i++)] << 18 | b64tab[asc.charAt(i++)] << 12 | (r1 = b64tab[asc.charAt(i++)]) << 6 | (r2 = b64tab[asc.charAt(i++)]);
          bin += r1 === 64 ? _fromCC(u24 >> 16 & 255) : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255) : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);
        }
        return bin;
      };
      var _atob = typeof atob === "function" ? function(asc) {
        return atob(_tidyB64(asc));
      } : _hasBuffer ? function(asc) {
        return Buffer.from(asc, "base64").toString("binary");
      } : atobPolyfill;
      var _toUint8Array = _hasBuffer ? function(a) {
        return _U8Afrom(Buffer.from(a, "base64"));
      } : function(a) {
        return _U8Afrom(_atob(a).split("").map(function(c) {
          return c.charCodeAt(0);
        }));
      };
      var toUint8Array = function(a) {
        return _toUint8Array(_unURI(a));
      };
      var _decode = _hasBuffer ? function(a) {
        return Buffer.from(a, "base64").toString("utf8");
      } : _TD ? function(a) {
        return _TD.decode(_toUint8Array(a));
      } : function(a) {
        return btou(_atob(a));
      };
      var _unURI = function(a) {
        return _tidyB64(a.replace(/[-_]/g, function(m0) {
          return m0 == "-" ? "+" : "/";
        }));
      };
      var decode = function(src) {
        return _decode(_unURI(src));
      };
      var isValid = function(src) {
        if (typeof src !== "string")
          return false;
        var s = src.replace(/\s+/g, "").replace(/={0,2}$/, "");
        return !/[^\s0-9a-zA-Z\+/]/.test(s) || !/[^\s0-9a-zA-Z\-_]/.test(s);
      };
      var _noEnum = function(v) {
        return {
          value: v,
          enumerable: false,
          writable: true,
          configurable: true
        };
      };
      var extendString = function() {
        var _add = function(name, body) {
          return Object.defineProperty(String.prototype, name, _noEnum(body));
        };
        _add("fromBase64", function() {
          return decode(this);
        });
        _add("toBase64", function(urlsafe) {
          return encode(this, urlsafe);
        });
        _add("toBase64URI", function() {
          return encode(this, true);
        });
        _add("toBase64URL", function() {
          return encode(this, true);
        });
        _add("toUint8Array", function() {
          return toUint8Array(this);
        });
      };
      var extendUint8Array = function() {
        var _add = function(name, body) {
          return Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));
        };
        _add("toBase64", function(urlsafe) {
          return fromUint8Array(this, urlsafe);
        });
        _add("toBase64URI", function() {
          return fromUint8Array(this, true);
        });
        _add("toBase64URL", function() {
          return fromUint8Array(this, true);
        });
      };
      var extendBuiltins = function() {
        extendString();
        extendUint8Array();
      };
      var gBase64 = {
        version,
        VERSION,
        atob: _atob,
        atobPolyfill,
        btoa: _btoa,
        btoaPolyfill,
        fromBase64: decode,
        toBase64: encode,
        encode,
        encodeURI: encodeURI2,
        encodeURL: encodeURI2,
        utob,
        btou,
        decode,
        isValid,
        fromUint8Array,
        toUint8Array,
        extendString,
        extendUint8Array,
        extendBuiltins
      };
      gBase64.Base64 = {};
      Object.keys(gBase64).forEach(function(k) {
        return gBase64.Base64[k] = gBase64[k];
      });
      return gBase64;
    });
  }
});

// node_modules/graphemesplit/index.js
var require_graphemesplit = __commonJS({
  "node_modules/graphemesplit/index.js"(exports2, module2) {
    var types = require_types();
    var typeTrieData = require_typeTrie().data;
    var extPictData = require_extPict().data;
    var inCBData = require_inCB().data;
    var UnicodeTrie = require_unicode_trie();
    var Base642 = require_base64().Base64;
    var typeTrie = new UnicodeTrie(Base642.toUint8Array(typeTrieData));
    var extPict = new UnicodeTrie(Base642.toUint8Array(extPictData));
    var inCB = new UnicodeTrie(Base642.toUint8Array(inCBData));
    function is(type, bit) {
      return (type & bit) !== 0;
    }
    function nextGraphemeClusterSize(s, ts, start) {
      const L = ts.length;
      for (let i = start; i + 1 < L; i++) {
        const curr = ts[i + 0];
        const next = ts[i + 1];
        switch (s.gb9c) {
          case 0:
            if (is(curr, types.InCB_Consonant)) s.gb9c = 1;
            break;
          case 1:
            if (is(curr, types.InCB_Extend)) s.gb9c = 1;
            else if (is(curr, types.InCB_Linker)) s.gb9c = 2;
            else s.gb9c = is(curr, types.InCB_Consonant) ? 1 : 0;
            break;
          case 2:
            if (is(curr, types.InCB_Extend | types.InCB_Linker)) s.gb9c = 2;
            else s.gb9c = is(curr, types.InCB_Consonant) ? 1 : 0;
            break;
        }
        switch (s.gb11) {
          case 0:
            if (is(curr, types.Extended_Pictographic)) s.gb11 = 1;
            break;
          case 1:
            if (is(curr, types.Extend)) s.gb11 = 1;
            else if (is(curr, types.ZWJ)) s.gb11 = 2;
            else s.gb11 = is(curr, types.Extended_Pictographic) ? 1 : 0;
            break;
          case 2:
            s.gb11 = is(curr, types.Extended_Pictographic) ? 1 : 0;
            break;
        }
        switch (s.gb12) {
          case 0:
            if (is(curr, types.Regional_Indicator)) s.gb12 = 1;
            else s.gb12 = -1;
            break;
          case 1:
            if (is(curr, types.Regional_Indicator)) s.gb12 = 0;
            else s.gb12 = -1;
            break;
        }
        switch (s.gb13) {
          case 0:
            if (!is(curr, types.Regional_Indicator)) s.gb13 = 1;
            break;
          case 1:
            if (is(curr, types.Regional_Indicator)) s.gb13 = 2;
            else s.gb13 = 1;
            break;
          case 2:
            s.gb13 = 1;
            break;
        }
        if (is(curr, types.CR) && is(next, types.LF)) {
          continue;
        }
        if (is(curr, types.Control | types.CR | types.LF)) {
          return i + 1 - start;
        }
        if (is(next, types.Control | types.CR | types.LF)) {
          return i + 1 - start;
        }
        if (is(curr, types.L) && is(next, types.L | types.V | types.LV | types.LVT)) {
          continue;
        }
        if (is(curr, types.LV | types.V) && is(next, types.V | types.T)) {
          continue;
        }
        if (is(curr, types.LVT | types.T) && is(next, types.T)) {
          continue;
        }
        if (is(next, types.Extend | types.ZWJ)) {
          continue;
        }
        if (is(next, types.SpacingMark)) {
          continue;
        }
        if (is(curr, types.Prepend)) {
          continue;
        }
        if (is(next, types.InCB_Consonant) && s.gb9c === 2) {
          continue;
        }
        if (is(next, types.Extended_Pictographic) && s.gb11 === 2) {
          continue;
        }
        if (is(next, types.Regional_Indicator) && s.gb12 === 1) {
          continue;
        }
        if (is(next, types.Regional_Indicator) && s.gb13 === 2) {
          continue;
        }
        return i + 1 - start;
      }
      return L - start;
    }
    module2.exports = function split2(str) {
      const graphemeClusters = [];
      const map = [0];
      const ts = [];
      for (let i = 0; i < str.length; ) {
        const code = str.codePointAt(i);
        ts.push(typeTrie.get(code) | extPict.get(code) | inCB.get(code));
        i += code > 65535 ? 2 : 1;
        map.push(i);
      }
      const s = {
        gb9c: 0,
        gb11: 0,
        gb12: 0,
        gb13: 0
      };
      for (let offset = 0; offset < ts.length; ) {
        const size = nextGraphemeClusterSize(s, ts, offset);
        const start = map[offset];
        const end = map[offset + size];
        graphemeClusters.push(str.slice(start, end));
        offset += size;
      }
      return graphemeClusters;
    };
  }
});

// src/search.tsx
var search_exports = {};
__export(search_exports, {
  default: () => search_default
});
module.exports = __toCommonJS(search_exports);
var import_api56 = require("@raycast/api");

// src/components/RootErrorBoundary.tsx
var import_api28 = require("@raycast/api");
var import_react13 = require("react");

// src/components/TroubleshootingGuide.tsx
var import_api27 = require("@raycast/api");

// src/components/actions/ActionWithReprompt.tsx
var import_api18 = require("@raycast/api");

// src/components/searchVault/context/vaultItem.tsx
var import_react = require("react");
var VaultItemContext = (0, import_react.createContext)(null);
var useSelectedVaultItem = () => {
  const session = (0, import_react.useContext)(VaultItemContext);
  if (session == null) {
    throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");
  }
  return session;
};
var vaultItem_default = VaultItemContext;

// src/utils/hooks/useReprompt.tsx
var import_api17 = require("@raycast/api");

// src/components/RepromptForm.tsx
var import_api = require("@raycast/api");
var import_jsx_runtime = require("react/jsx-runtime");
var RepromptForm = (props) => {
  const { description, onConfirm } = props;
  function onSubmit(values) {
    onConfirm(values.password);
  }
  return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(
    import_api.Form,
    {
      navigationTitle: "Confirmation Required",
      actions: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_api.ActionPanel, { children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_api.Action.SubmitForm, { title: "Confirm", onSubmit }) }),
      children: [
        /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_api.Form.Description, { title: "Confirmation Required for", text: description }),
        /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_api.Form.PasswordField, { autoFocus: true, id: "password", title: "Master Password" })
      ]
    }
  );
};
var RepromptForm_default = RepromptForm;

// src/context/session/session.tsx
var import_api16 = require("@raycast/api");
var import_react8 = require("react");

// src/components/UnlockForm.tsx
var import_api13 = require("@raycast/api");
var import_react6 = require("react");

// src/constants/general.ts
var import_api2 = require("@raycast/api");

// src/types/vault.ts
var CARD_BRANDS = {
  VISA: "Visa",
  MASTERCARD: "Mastercard",
  AMEX: "Amex",
  DISCOVER: "Discover",
  DINERS_CLUB: "Diners Club",
  JCB: "JCB",
  MAESTRO: "Maestro",
  UNION_PAY: "UnionPay",
  RU_PAY: "RuPay",
  OTHER: "Other"
};

// src/constants/general.ts
var DEFAULT_SERVER_URL = "https://bitwarden.com";
var SENSITIVE_VALUE_PLACEHOLDER = "HIDDEN-VALUE";
var LOCAL_STORAGE_KEY = {
  PASSWORD_OPTIONS: "bw-generate-password-options",
  PASSWORD_ONE_TIME_WARNING: "bw-generate-password-warning-accepted",
  SESSION_TOKEN: "sessionToken",
  REPROMPT_HASH: "sessionRepromptHash",
  SERVER_URL: "cliServer",
  LAST_ACTIVITY_TIME: "lastActivityTime",
  VAULT_LOCK_REASON: "vaultLockReason",
  VAULT_FAVORITE_ORDER: "vaultFavoriteOrder",
  VAULT_LAST_STATUS: "lastVaultStatus"
};
var VAULT_LOCK_MESSAGES = {
  TIMEOUT: "Vault timed out due to inactivity",
  MANUAL: "Manually locked by the user",
  SYSTEM_LOCK: "Screen was locked",
  SYSTEM_SLEEP: "System went to sleep",
  CLI_UPDATED: "Bitwarden has been updated. Please login again."
};
var SHORTCUT_KEY_SEQUENCE = [
  "1",
  "2",
  "3",
  "4",
  "5",
  "6",
  "7",
  "8",
  "9",
  "b",
  "c",
  "d",
  "e",
  "f",
  "g",
  "h",
  "i",
  "j",
  "k",
  "l",
  "m",
  "n",
  "o",
  "p",
  "q",
  "r",
  "s",
  "t",
  "u",
  "v",
  "w",
  "x",
  "y",
  "z",
  "+",
  "-",
  ".",
  ","
];
var FOLDER_OPTIONS = {
  ALL: "all",
  NO_FOLDER: "no-folder"
};
var CACHE_KEYS = {
  IV: "iv",
  VAULT: "vault",
  CURRENT_FOLDER_ID: "currentFolderId",
  SEND_TYPE_FILTER: "sendTypeFilter",
  CLI_VERSION: "cliVersion"
};
var ITEM_TYPE_TO_ICON_MAP = {
  [1 /* LOGIN */]: import_api2.Icon.Globe,
  [3 /* CARD */]: import_api2.Icon.CreditCard,
  [4 /* IDENTITY */]: import_api2.Icon.Person,
  [2 /* NOTE */]: import_api2.Icon.Document,
  [5 /* SSH_KEY */]: import_api2.Icon.Key
};

// src/context/bitwarden.tsx
var import_react3 = require("react");

// src/api/bitwarden.ts
var import_api8 = require("@raycast/api");

// node_modules/execa/index.js
var import_node_buffer = require("node:buffer");
var import_node_path2 = __toESM(require("node:path"), 1);
var import_node_child_process = __toESM(require("node:child_process"), 1);
var import_node_process2 = __toESM(require("node:process"), 1);
var import_cross_spawn = __toESM(require_cross_spawn(), 1);

// node_modules/strip-final-newline/index.js
function stripFinalNewline(input) {
  const LF = typeof input === "string" ? "\n" : "\n".charCodeAt();
  const CR = typeof input === "string" ? "\r" : "\r".charCodeAt();
  if (input[input.length - 1] === LF) {
    input = input.slice(0, -1);
  }
  if (input[input.length - 1] === CR) {
    input = input.slice(0, -1);
  }
  return input;
}

// node_modules/npm-run-path/index.js
var import_node_process = __toESM(require("node:process"), 1);
var import_node_path = __toESM(require("node:path"), 1);
var import_node_url = __toESM(require("node:url"), 1);

// node_modules/npm-run-path/node_modules/path-key/index.js
function pathKey(options = {}) {
  const {
    env = process.env,
    platform: platform2 = process.platform
  } = options;
  if (platform2 !== "win32") {
    return "PATH";
  }
  return Object.keys(env).reverse().find((key) => key.toUpperCase() === "PATH") || "Path";
}

// node_modules/npm-run-path/index.js
function npmRunPath(options = {}) {
  const {
    cwd = import_node_process.default.cwd(),
    path: path_ = import_node_process.default.env[pathKey()],
    execPath = import_node_process.default.execPath
  } = options;
  let previous;
  const cwdString = cwd instanceof URL ? import_node_url.default.fileURLToPath(cwd) : cwd;
  let cwdPath = import_node_path.default.resolve(cwdString);
  const result = [];
  while (previous !== cwdPath) {
    result.push(import_node_path.default.join(cwdPath, "node_modules/.bin"));
    previous = cwdPath;
    cwdPath = import_node_path.default.resolve(cwdPath, "..");
  }
  result.push(import_node_path.default.resolve(cwdString, execPath, ".."));
  return [...result, path_].join(import_node_path.default.delimiter);
}
function npmRunPathEnv({ env = import_node_process.default.env, ...options } = {}) {
  env = { ...env };
  const path3 = pathKey({ env });
  options.path = env[path3];
  env[path3] = npmRunPath(options);
  return env;
}

// node_modules/mimic-fn/index.js
var copyProperty = (to, from, property, ignoreNonConfigurable) => {
  if (property === "length" || property === "prototype") {
    return;
  }
  if (property === "arguments" || property === "caller") {
    return;
  }
  const toDescriptor = Object.getOwnPropertyDescriptor(to, property);
  const fromDescriptor = Object.getOwnPropertyDescriptor(from, property);
  if (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {
    return;
  }
  Object.defineProperty(to, property, fromDescriptor);
};
var canCopyProperty = function(toDescriptor, fromDescriptor) {
  return toDescriptor === void 0 || toDescriptor.configurable || toDescriptor.writable === fromDescriptor.writable && toDescriptor.enumerable === fromDescriptor.enumerable && toDescriptor.configurable === fromDescriptor.configurable && (toDescriptor.writable || toDescriptor.value === fromDescriptor.value);
};
var changePrototype = (to, from) => {
  const fromPrototype = Object.getPrototypeOf(from);
  if (fromPrototype === Object.getPrototypeOf(to)) {
    return;
  }
  Object.setPrototypeOf(to, fromPrototype);
};
var wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/
${fromBody}`;
var toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, "toString");
var toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, "name");
var changeToString = (to, from, name) => {
  const withName = name === "" ? "" : `with ${name.trim()}() `;
  const newToString = wrappedToString.bind(null, withName, from.toString());
  Object.defineProperty(newToString, "name", toStringName);
  Object.defineProperty(to, "toString", { ...toStringDescriptor, value: newToString });
};
function mimicFunction(to, from, { ignoreNonConfigurable = false } = {}) {
  const { name } = to;
  for (const property of Reflect.ownKeys(from)) {
    copyProperty(to, from, property, ignoreNonConfigurable);
  }
  changePrototype(to, from);
  changeToString(to, from, name);
  return to;
}

// node_modules/onetime/index.js
var calledFunctions = /* @__PURE__ */ new WeakMap();
var onetime = (function_, options = {}) => {
  if (typeof function_ !== "function") {
    throw new TypeError("Expected a function");
  }
  let returnValue;
  let callCount = 0;
  const functionName = function_.displayName || function_.name || "<anonymous>";
  const onetime2 = function(...arguments_) {
    calledFunctions.set(onetime2, ++callCount);
    if (callCount === 1) {
      returnValue = function_.apply(this, arguments_);
      function_ = null;
    } else if (options.throw === true) {
      throw new Error(`Function \`${functionName}\` can only be called once`);
    }
    return returnValue;
  };
  mimicFunction(onetime2, function_);
  calledFunctions.set(onetime2, callCount);
  return onetime2;
};
onetime.callCount = (function_) => {
  if (!calledFunctions.has(function_)) {
    throw new Error(`The given function \`${function_.name}\` is not wrapped by the \`onetime\` package`);
  }
  return calledFunctions.get(function_);
};
var onetime_default = onetime;

// node_modules/human-signals/build/src/main.js
var import_node_os2 = require("node:os");

// node_modules/human-signals/build/src/realtime.js
var getRealtimeSignals = function() {
  const length = SIGRTMAX - SIGRTMIN + 1;
  return Array.from({ length }, getRealtimeSignal);
};
var getRealtimeSignal = function(value, index) {
  return {
    name: `SIGRT${index + 1}`,
    number: SIGRTMIN + index,
    action: "terminate",
    description: "Application-specific signal (realtime)",
    standard: "posix"
  };
};
var SIGRTMIN = 34;
var SIGRTMAX = 64;

// node_modules/human-signals/build/src/signals.js
var import_node_os = require("node:os");

// node_modules/human-signals/build/src/core.js
var SIGNALS = [
  {
    name: "SIGHUP",
    number: 1,
    action: "terminate",
    description: "Terminal closed",
    standard: "posix"
  },
  {
    name: "SIGINT",
    number: 2,
    action: "terminate",
    description: "User interruption with CTRL-C",
    standard: "ansi"
  },
  {
    name: "SIGQUIT",
    number: 3,
    action: "core",
    description: "User interruption with CTRL-\\",
    standard: "posix"
  },
  {
    name: "SIGILL",
    number: 4,
    action: "core",
    description: "Invalid machine instruction",
    standard: "ansi"
  },
  {
    name: "SIGTRAP",
    number: 5,
    action: "core",
    description: "Debugger breakpoint",
    standard: "posix"
  },
  {
    name: "SIGABRT",
    number: 6,
    action: "core",
    description: "Aborted",
    standard: "ansi"
  },
  {
    name: "SIGIOT",
    number: 6,
    action: "core",
    description: "Aborted",
    standard: "bsd"
  },
  {
    name: "SIGBUS",
    number: 7,
    action: "core",
    description: "Bus error due to misaligned, non-existing address or paging error",
    standard: "bsd"
  },
  {
    name: "SIGEMT",
    number: 7,
    action: "terminate",
    description: "Command should be emulated but is not implemented",
    standard: "other"
  },
  {
    name: "SIGFPE",
    number: 8,
    action: "core",
    description: "Floating point arithmetic error",
    standard: "ansi"
  },
  {
    name: "SIGKILL",
    number: 9,
    action: "terminate",
    description: "Forced termination",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGUSR1",
    number: 10,
    action: "terminate",
    description: "Application-specific signal",
    standard: "posix"
  },
  {
    name: "SIGSEGV",
    number: 11,
    action: "core",
    description: "Segmentation fault",
    standard: "ansi"
  },
  {
    name: "SIGUSR2",
    number: 12,
    action: "terminate",
    description: "Application-specific signal",
    standard: "posix"
  },
  {
    name: "SIGPIPE",
    number: 13,
    action: "terminate",
    description: "Broken pipe or socket",
    standard: "posix"
  },
  {
    name: "SIGALRM",
    number: 14,
    action: "terminate",
    description: "Timeout or timer",
    standard: "posix"
  },
  {
    name: "SIGTERM",
    number: 15,
    action: "terminate",
    description: "Termination",
    standard: "ansi"
  },
  {
    name: "SIGSTKFLT",
    number: 16,
    action: "terminate",
    description: "Stack is empty or overflowed",
    standard: "other"
  },
  {
    name: "SIGCHLD",
    number: 17,
    action: "ignore",
    description: "Child process terminated, paused or unpaused",
    standard: "posix"
  },
  {
    name: "SIGCLD",
    number: 17,
    action: "ignore",
    description: "Child process terminated, paused or unpaused",
    standard: "other"
  },
  {
    name: "SIGCONT",
    number: 18,
    action: "unpause",
    description: "Unpaused",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGSTOP",
    number: 19,
    action: "pause",
    description: "Paused",
    standard: "posix",
    forced: true
  },
  {
    name: "SIGTSTP",
    number: 20,
    action: "pause",
    description: 'Paused using CTRL-Z or "suspend"',
    standard: "posix"
  },
  {
    name: "SIGTTIN",
    number: 21,
    action: "pause",
    description: "Background process cannot read terminal input",
    standard: "posix"
  },
  {
    name: "SIGBREAK",
    number: 21,
    action: "terminate",
    description: "User interruption with CTRL-BREAK",
    standard: "other"
  },
  {
    name: "SIGTTOU",
    number: 22,
    action: "pause",
    description: "Background process cannot write to terminal output",
    standard: "posix"
  },
  {
    name: "SIGURG",
    number: 23,
    action: "ignore",
    description: "Socket received out-of-band data",
    standard: "bsd"
  },
  {
    name: "SIGXCPU",
    number: 24,
    action: "core",
    description: "Process timed out",
    standard: "bsd"
  },
  {
    name: "SIGXFSZ",
    number: 25,
    action: "core",
    description: "File too big",
    standard: "bsd"
  },
  {
    name: "SIGVTALRM",
    number: 26,
    action: "terminate",
    description: "Timeout or timer",
    standard: "bsd"
  },
  {
    name: "SIGPROF",
    number: 27,
    action: "terminate",
    description: "Timeout or timer",
    standard: "bsd"
  },
  {
    name: "SIGWINCH",
    number: 28,
    action: "ignore",
    description: "Terminal window size changed",
    standard: "bsd"
  },
  {
    name: "SIGIO",
    number: 29,
    action: "terminate",
    description: "I/O is available",
    standard: "other"
  },
  {
    name: "SIGPOLL",
    number: 29,
    action: "terminate",
    description: "Watched event",
    standard: "other"
  },
  {
    name: "SIGINFO",
    number: 29,
    action: "ignore",
    description: "Request for process information",
    standard: "other"
  },
  {
    name: "SIGPWR",
    number: 30,
    action: "terminate",
    description: "Device running out of power",
    standard: "systemv"
  },
  {
    name: "SIGSYS",
    number: 31,
    action: "core",
    description: "Invalid system call",
    standard: "other"
  },
  {
    name: "SIGUNUSED",
    number: 31,
    action: "terminate",
    description: "Invalid system call",
    standard: "other"
  }
];

// node_modules/human-signals/build/src/signals.js
var getSignals = function() {
  const realtimeSignals = getRealtimeSignals();
  const signals = [...SIGNALS, ...realtimeSignals].map(normalizeSignal);
  return signals;
};
var normalizeSignal = function({
  name,
  number: defaultNumber,
  description,
  action,
  forced = false,
  standard
}) {
  const {
    signals: { [name]: constantSignal }
  } = import_node_os.constants;
  const supported = constantSignal !== void 0;
  const number = supported ? constantSignal : defaultNumber;
  return { name, number, description, supported, action, forced, standard };
};

// node_modules/human-signals/build/src/main.js
var getSignalsByName = function() {
  const signals = getSignals();
  return Object.fromEntries(signals.map(getSignalByName));
};
var getSignalByName = function({
  name,
  number,
  description,
  supported,
  action,
  forced,
  standard
}) {
  return [
    name,
    { name, number, description, supported, action, forced, standard }
  ];
};
var signalsByName = getSignalsByName();
var getSignalsByNumber = function() {
  const signals = getSignals();
  const length = SIGRTMAX + 1;
  const signalsA = Array.from({ length }, (value, number) => getSignalByNumber(number, signals));
  return Object.assign({}, ...signalsA);
};
var getSignalByNumber = function(number, signals) {
  const signal = findSignalByNumber(number, signals);
  if (signal === void 0) {
    return {};
  }
  const { name, description, supported, action, forced, standard } = signal;
  return {
    [number]: {
      name,
      number,
      description,
      supported,
      action,
      forced,
      standard
    }
  };
};
var findSignalByNumber = function(number, signals) {
  const signal = signals.find(({ name }) => import_node_os2.constants.signals[name] === number);
  if (signal !== void 0) {
    return signal;
  }
  return signals.find((signalA) => signalA.number === number);
};
var signalsByNumber = getSignalsByNumber();

// node_modules/execa/lib/error.js
var getErrorPrefix = ({ timedOut, timeout, errorCode, signal, signalDescription, exitCode, isCanceled }) => {
  if (timedOut) {
    return `timed out after ${timeout} milliseconds`;
  }
  if (isCanceled) {
    return "was canceled";
  }
  if (errorCode !== void 0) {
    return `failed with ${errorCode}`;
  }
  if (signal !== void 0) {
    return `was killed with ${signal} (${signalDescription})`;
  }
  if (exitCode !== void 0) {
    return `failed with exit code ${exitCode}`;
  }
  return "failed";
};
var makeError = ({
  stdout,
  stderr,
  all,
  error,
  signal,
  exitCode,
  command,
  escapedCommand,
  timedOut,
  isCanceled,
  killed,
  parsed: { options: { timeout } }
}) => {
  exitCode = exitCode === null ? void 0 : exitCode;
  signal = signal === null ? void 0 : signal;
  const signalDescription = signal === void 0 ? void 0 : signalsByName[signal].description;
  const errorCode = error && error.code;
  const prefix = getErrorPrefix({ timedOut, timeout, errorCode, signal, signalDescription, exitCode, isCanceled });
  const execaMessage = `Command ${prefix}: ${command}`;
  const isError = Object.prototype.toString.call(error) === "[object Error]";
  const shortMessage = isError ? `${execaMessage}
${error.message}` : execaMessage;
  const message = [shortMessage, stderr, stdout].filter(Boolean).join("\n");
  if (isError) {
    error.originalMessage = error.message;
    error.message = message;
  } else {
    error = new Error(message);
  }
  error.shortMessage = shortMessage;
  error.command = command;
  error.escapedCommand = escapedCommand;
  error.exitCode = exitCode;
  error.signal = signal;
  error.signalDescription = signalDescription;
  error.stdout = stdout;
  error.stderr = stderr;
  if (all !== void 0) {
    error.all = all;
  }
  if ("bufferedData" in error) {
    delete error.bufferedData;
  }
  error.failed = true;
  error.timedOut = Boolean(timedOut);
  error.isCanceled = isCanceled;
  error.killed = killed && !timedOut;
  return error;
};

// node_modules/execa/lib/stdio.js
var aliases = ["stdin", "stdout", "stderr"];
var hasAlias = (options) => aliases.some((alias) => options[alias] !== void 0);
var normalizeStdio = (options) => {
  if (!options) {
    return;
  }
  const { stdio } = options;
  if (stdio === void 0) {
    return aliases.map((alias) => options[alias]);
  }
  if (hasAlias(options)) {
    throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${aliases.map((alias) => `\`${alias}\``).join(", ")}`);
  }
  if (typeof stdio === "string") {
    return stdio;
  }
  if (!Array.isArray(stdio)) {
    throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof stdio}\``);
  }
  const length = Math.max(stdio.length, aliases.length);
  return Array.from({ length }, (value, index) => stdio[index]);
};

// node_modules/execa/lib/kill.js
var import_node_os3 = __toESM(require("node:os"), 1);
var import_signal_exit = __toESM(require_signal_exit(), 1);
var DEFAULT_FORCE_KILL_TIMEOUT = 1e3 * 5;
var spawnedKill = (kill, signal = "SIGTERM", options = {}) => {
  const killResult = kill(signal);
  setKillTimeout(kill, signal, options, killResult);
  return killResult;
};
var setKillTimeout = (kill, signal, options, killResult) => {
  if (!shouldForceKill(signal, options, killResult)) {
    return;
  }
  const timeout = getForceKillAfterTimeout(options);
  const t = setTimeout(() => {
    kill("SIGKILL");
  }, timeout);
  if (t.unref) {
    t.unref();
  }
};
var shouldForceKill = (signal, { forceKillAfterTimeout }, killResult) => isSigterm(signal) && forceKillAfterTimeout !== false && killResult;
var isSigterm = (signal) => signal === import_node_os3.default.constants.signals.SIGTERM || typeof signal === "string" && signal.toUpperCase() === "SIGTERM";
var getForceKillAfterTimeout = ({ forceKillAfterTimeout = true }) => {
  if (forceKillAfterTimeout === true) {
    return DEFAULT_FORCE_KILL_TIMEOUT;
  }
  if (!Number.isFinite(forceKillAfterTimeout) || forceKillAfterTimeout < 0) {
    throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${forceKillAfterTimeout}\` (${typeof forceKillAfterTimeout})`);
  }
  return forceKillAfterTimeout;
};
var spawnedCancel = (spawned, context) => {
  const killResult = spawned.kill();
  if (killResult) {
    context.isCanceled = true;
  }
};
var timeoutKill = (spawned, signal, reject) => {
  spawned.kill(signal);
  reject(Object.assign(new Error("Timed out"), { timedOut: true, signal }));
};
var setupTimeout = (spawned, { timeout, killSignal = "SIGTERM" }, spawnedPromise) => {
  if (timeout === 0 || timeout === void 0) {
    return spawnedPromise;
  }
  let timeoutId;
  const timeoutPromise = new Promise((resolve, reject) => {
    timeoutId = setTimeout(() => {
      timeoutKill(spawned, killSignal, reject);
    }, timeout);
  });
  const safeSpawnedPromise = spawnedPromise.finally(() => {
    clearTimeout(timeoutId);
  });
  return Promise.race([timeoutPromise, safeSpawnedPromise]);
};
var validateTimeout = ({ timeout }) => {
  if (timeout !== void 0 && (!Number.isFinite(timeout) || timeout < 0)) {
    throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${timeout}\` (${typeof timeout})`);
  }
};
var setExitHandler = async (spawned, { cleanup, detached }, timedPromise) => {
  if (!cleanup || detached) {
    return timedPromise;
  }
  const removeExitHandler = (0, import_signal_exit.default)(() => {
    spawned.kill();
  });
  return timedPromise.finally(() => {
    removeExitHandler();
  });
};

// node_modules/is-stream/index.js
function isStream(stream) {
  return stream !== null && typeof stream === "object" && typeof stream.pipe === "function";
}

// node_modules/execa/lib/stream.js
var import_get_stream = __toESM(require_get_stream(), 1);
var import_merge_stream = __toESM(require_merge_stream(), 1);
var handleInput = (spawned, input) => {
  if (input === void 0) {
    return;
  }
  if (isStream(input)) {
    input.pipe(spawned.stdin);
  } else {
    spawned.stdin.end(input);
  }
};
var makeAllStream = (spawned, { all }) => {
  if (!all || !spawned.stdout && !spawned.stderr) {
    return;
  }
  const mixed = (0, import_merge_stream.default)();
  if (spawned.stdout) {
    mixed.add(spawned.stdout);
  }
  if (spawned.stderr) {
    mixed.add(spawned.stderr);
  }
  return mixed;
};
var getBufferedData = async (stream, streamPromise) => {
  if (!stream || streamPromise === void 0) {
    return;
  }
  stream.destroy();
  try {
    return await streamPromise;
  } catch (error) {
    return error.bufferedData;
  }
};
var getStreamPromise = (stream, { encoding, buffer, maxBuffer }) => {
  if (!stream || !buffer) {
    return;
  }
  if (encoding) {
    return (0, import_get_stream.default)(stream, { encoding, maxBuffer });
  }
  return import_get_stream.default.buffer(stream, { maxBuffer });
};
var getSpawnedResult = async ({ stdout, stderr, all }, { encoding, buffer, maxBuffer }, processDone) => {
  const stdoutPromise = getStreamPromise(stdout, { encoding, buffer, maxBuffer });
  const stderrPromise = getStreamPromise(stderr, { encoding, buffer, maxBuffer });
  const allPromise = getStreamPromise(all, { encoding, buffer, maxBuffer: maxBuffer * 2 });
  try {
    return await Promise.all([processDone, stdoutPromise, stderrPromise, allPromise]);
  } catch (error) {
    return Promise.all([
      { error, signal: error.signal, timedOut: error.timedOut },
      getBufferedData(stdout, stdoutPromise),
      getBufferedData(stderr, stderrPromise),
      getBufferedData(all, allPromise)
    ]);
  }
};

// node_modules/execa/lib/promise.js
var nativePromisePrototype = (async () => {
})().constructor.prototype;
var descriptors = ["then", "catch", "finally"].map((property) => [
  property,
  Reflect.getOwnPropertyDescriptor(nativePromisePrototype, property)
]);
var mergePromise = (spawned, promise) => {
  for (const [property, descriptor] of descriptors) {
    const value = typeof promise === "function" ? (...args) => Reflect.apply(descriptor.value, promise(), args) : descriptor.value.bind(promise);
    Reflect.defineProperty(spawned, property, { ...descriptor, value });
  }
  return spawned;
};
var getSpawnedPromise = (spawned) => new Promise((resolve, reject) => {
  spawned.on("exit", (exitCode, signal) => {
    resolve({ exitCode, signal });
  });
  spawned.on("error", (error) => {
    reject(error);
  });
  if (spawned.stdin) {
    spawned.stdin.on("error", (error) => {
      reject(error);
    });
  }
});

// node_modules/execa/lib/command.js
var normalizeArgs = (file, args = []) => {
  if (!Array.isArray(args)) {
    return [file];
  }
  return [file, ...args];
};
var NO_ESCAPE_REGEXP = /^[\w.-]+$/;
var DOUBLE_QUOTES_REGEXP = /"/g;
var escapeArg = (arg) => {
  if (typeof arg !== "string" || NO_ESCAPE_REGEXP.test(arg)) {
    return arg;
  }
  return `"${arg.replace(DOUBLE_QUOTES_REGEXP, '\\"')}"`;
};
var joinCommand = (file, args) => normalizeArgs(file, args).join(" ");
var getEscapedCommand = (file, args) => normalizeArgs(file, args).map((arg) => escapeArg(arg)).join(" ");

// node_modules/execa/index.js
var DEFAULT_MAX_BUFFER = 1e3 * 1e3 * 100;
var getEnv = ({ env: envOption, extendEnv, preferLocal, localDir, execPath }) => {
  const env = extendEnv ? { ...import_node_process2.default.env, ...envOption } : envOption;
  if (preferLocal) {
    return npmRunPathEnv({ env, cwd: localDir, execPath });
  }
  return env;
};
var handleArguments = (file, args, options = {}) => {
  const parsed = import_cross_spawn.default._parse(file, args, options);
  file = parsed.command;
  args = parsed.args;
  options = parsed.options;
  options = {
    maxBuffer: DEFAULT_MAX_BUFFER,
    buffer: true,
    stripFinalNewline: true,
    extendEnv: true,
    preferLocal: false,
    localDir: options.cwd || import_node_process2.default.cwd(),
    execPath: import_node_process2.default.execPath,
    encoding: "utf8",
    reject: true,
    cleanup: true,
    all: false,
    windowsHide: true,
    ...options
  };
  options.env = getEnv(options);
  options.stdio = normalizeStdio(options);
  if (import_node_process2.default.platform === "win32" && import_node_path2.default.basename(file, ".exe") === "cmd") {
    args.unshift("/q");
  }
  return { file, args, options, parsed };
};
var handleOutput = (options, value, error) => {
  if (typeof value !== "string" && !import_node_buffer.Buffer.isBuffer(value)) {
    return error === void 0 ? void 0 : "";
  }
  if (options.stripFinalNewline) {
    return stripFinalNewline(value);
  }
  return value;
};
function execa(file, args, options) {
  const parsed = handleArguments(file, args, options);
  const command = joinCommand(file, args);
  const escapedCommand = getEscapedCommand(file, args);
  validateTimeout(parsed.options);
  let spawned;
  try {
    spawned = import_node_child_process.default.spawn(parsed.file, parsed.args, parsed.options);
  } catch (error) {
    const dummySpawned = new import_node_child_process.default.ChildProcess();
    const errorPromise = Promise.reject(makeError({
      error,
      stdout: "",
      stderr: "",
      all: "",
      command,
      escapedCommand,
      parsed,
      timedOut: false,
      isCanceled: false,
      killed: false
    }));
    return mergePromise(dummySpawned, errorPromise);
  }
  const spawnedPromise = getSpawnedPromise(spawned);
  const timedPromise = setupTimeout(spawned, parsed.options, spawnedPromise);
  const processDone = setExitHandler(spawned, parsed.options, timedPromise);
  const context = { isCanceled: false };
  spawned.kill = spawnedKill.bind(null, spawned.kill.bind(spawned));
  spawned.cancel = spawnedCancel.bind(null, spawned, context);
  const handlePromise = async () => {
    const [{ error, exitCode, signal, timedOut }, stdoutResult, stderrResult, allResult] = await getSpawnedResult(spawned, parsed.options, processDone);
    const stdout = handleOutput(parsed.options, stdoutResult);
    const stderr = handleOutput(parsed.options, stderrResult);
    const all = handleOutput(parsed.options, allResult);
    if (error || exitCode !== 0 || signal !== null) {
      const returnedError = makeError({
        error,
        exitCode,
        signal,
        stdout,
        stderr,
        all,
        command,
        escapedCommand,
        parsed,
        timedOut,
        isCanceled: context.isCanceled || (parsed.options.signal ? parsed.options.signal.aborted : false),
        killed: spawned.killed
      });
      if (!parsed.options.reject) {
        return returnedError;
      }
      throw returnedError;
    }
    return {
      command,
      escapedCommand,
      exitCode: 0,
      stdout,
      stderr,
      all,
      failed: false,
      timedOut: false,
      isCanceled: false,
      killed: false
    };
  };
  const handlePromiseOnce = onetime_default(handlePromise);
  handleInput(spawned, parsed.options.input);
  spawned.all = makeAllStream(spawned, parsed.options);
  return mergePromise(spawned, handlePromiseOnce);
}

// src/api/bitwarden.ts
var import_fs5 = require("fs");

// src/utils/passwords.ts
var import_api3 = require("@raycast/api");
var import_crypto = require("crypto");

// src/constants/passwords.ts
var REPROMPT_HASH_SALT = "foobarbazzybaz";

// src/utils/passwords.ts
function getPasswordGeneratingArgs(options) {
  return Object.entries(options).flatMap(([arg, value]) => value ? [`--${arg}`, value] : []);
}
function hashMasterPasswordForReprompting(password) {
  return new Promise((resolve, reject) => {
    (0, import_crypto.pbkdf2)(password, REPROMPT_HASH_SALT, 1e5, 64, "sha512", (error, hashed) => {
      if (error != null) {
        reject(error);
        return;
      }
      resolve(hashed.toString("hex"));
    });
  });
}

// src/utils/preferences.ts
var import_api4 = require("@raycast/api");

// src/constants/preferences.ts
var VAULT_TIMEOUT_OPTIONS = {
  IMMEDIATELY: "0",
  ONE_MINUTE: "60000",
  FIVE_MINUTES: "300000",
  FIFTEEN_MINUTES: "900000",
  THIRTY_MINUTES: "1800000",
  ONE_HOUR: "3600000",
  FOUR_HOURS: "14400000",
  EIGHT_HOURS: "28800000",
  ONE_DAY: "86400000",
  NEVER: "-1",
  SYSTEM_LOCK: "-2",
  SYSTEM_SLEEP: "-3"
};
var VAULT_TIMEOUT = Object.entries(VAULT_TIMEOUT_OPTIONS).reduce((acc, [key, value]) => {
  acc[key] = parseInt(value);
  return acc;
}, {});

// src/constants/labels.ts
var VAULT_TIMEOUT_MS_TO_LABEL = {
  [VAULT_TIMEOUT.IMMEDIATELY]: "Immediately",
  [VAULT_TIMEOUT.ONE_MINUTE]: "1 Minute",
  [VAULT_TIMEOUT.FIVE_MINUTES]: "5 Minutes",
  [VAULT_TIMEOUT.FIFTEEN_MINUTES]: "15 Minutes",
  [VAULT_TIMEOUT.THIRTY_MINUTES]: "30 Minutes",
  [VAULT_TIMEOUT.ONE_HOUR]: "1 Hour",
  [VAULT_TIMEOUT.FOUR_HOURS]: "4 Hours",
  [VAULT_TIMEOUT.EIGHT_HOURS]: "8 Hours",
  [VAULT_TIMEOUT.ONE_DAY]: "1 Day"
};
var CARD_KEY_LABEL = {
  cardholderName: "Cardholder name",
  brand: "Brand",
  number: "Number",
  expMonth: "Expiration month",
  expYear: "Expiration year",
  code: "Security code (CVV)"
};
var IDENTITY_KEY_LABEL = {
  title: "Title",
  firstName: "First name",
  middleName: "Middle name",
  lastName: "Last name",
  username: "Username",
  company: "Company",
  ssn: "Social Security number",
  passportNumber: "Passport number",
  licenseNumber: "License number",
  email: "Email",
  phone: "Phone",
  address1: "Address 1",
  address2: "Address 2",
  address3: "Address 3",
  city: "City / Town",
  state: "State / Province",
  postalCode: "Zip / Postal code",
  country: "Country"
};
var ITEM_TYPE_TO_LABEL = {
  [1 /* LOGIN */]: "Login",
  [3 /* CARD */]: "Card",
  [4 /* IDENTITY */]: "Identity",
  [2 /* NOTE */]: "Secure Note",
  [5 /* SSH_KEY */]: "SSH Key"
};

// src/utils/preferences.ts
function getServerUrlPreference() {
  const { serverUrl } = (0, import_api4.getPreferenceValues)();
  return !serverUrl || serverUrl === "bitwarden.com" || serverUrl === "https://bitwarden.com" ? void 0 : serverUrl;
}
var COMMAND_NAME_TO_PREFERENCE_KEY_MAP = {
  search: "transientCopySearch",
  "generate-password": "transientCopyGeneratePassword",
  "generate-password-quick": "transientCopyGeneratePasswordQuick"
};
function getTransientCopyPreference(type) {
  const preferenceKey = COMMAND_NAME_TO_PREFERENCE_KEY_MAP[import_api4.environment.commandName];
  const transientPreference = (0, import_api4.getPreferenceValues)()[preferenceKey];
  if (transientPreference === "never") return false;
  if (transientPreference === "always") return true;
  if (transientPreference === "passwords") return type === "password";
  return true;
}
function getLabelForTimeoutPreference(timeout) {
  return VAULT_TIMEOUT_MS_TO_LABEL[timeout];
}

// src/utils/errors.ts
var ManuallyThrownError = class extends Error {
  constructor(message, stack) {
    super(message);
    this.stack = stack;
  }
};
var DisplayableError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message, stack);
  }
};
var InstalledCLINotFoundError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Bitwarden CLI not found", stack);
    this.name = "InstalledCLINotFoundError";
    this.stack = stack;
  }
};
var FailedToLoadVaultItemsError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Failed to load vault items", stack);
    this.name = "FailedToLoadVaultItemsError";
  }
};
var VaultIsLockedError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Vault is locked", stack);
    this.name = "VaultIsLockedError";
  }
};
var NotLoggedInError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Not logged in", stack);
    this.name = "NotLoggedInError";
  }
};
var EnsureCliBinError = class extends DisplayableError {
  constructor(message, stack) {
    super(message ?? "Failed do download Bitwarden CLI", stack);
    this.name = "EnsureCliBinError";
  }
};
var PremiumFeatureError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "Premium status is required to use this feature", stack);
    this.name = "PremiumFeatureError";
  }
};
var SendNeedsPasswordError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "This Send has a is protected by a password", stack);
    this.name = "SendNeedsPasswordError";
  }
};
var SendInvalidPasswordError = class extends ManuallyThrownError {
  constructor(message, stack) {
    super(message ?? "The password you entered is invalid", stack);
    this.name = "SendInvalidPasswordError";
  }
};
function tryExec(fn, fallbackValue) {
  try {
    return fn();
  } catch {
    return fallbackValue;
  }
}
function getDisplayableErrorMessage(error) {
  if (error instanceof DisplayableError) return error.message;
  return void 0;
}
var getErrorString = (error) => {
  if (!error) return void 0;
  if (typeof error === "string") return error;
  if (error instanceof Error) {
    const { message, name } = error;
    if (error.stack) return error.stack;
    return `${name}: ${message}`;
  }
  return String(error);
};

// src/api/bitwarden.ts
var import_path2 = require("path");
var import_promises2 = require("fs/promises");

// src/utils/fs.ts
var import_fs = require("fs");
var import_promises = require("fs/promises");
var import_path = require("path");
var import_node_stream_zip = __toESM(require_node_stream_zip());
function waitForFileAvailable(path3) {
  return new Promise((resolve, reject) => {
    const interval = setInterval(() => {
      if (!(0, import_fs.existsSync)(path3)) return;
      const stats = (0, import_fs.statSync)(path3);
      if (stats.isFile()) {
        clearInterval(interval);
        resolve();
      }
    }, 300);
    setTimeout(() => {
      clearInterval(interval);
      reject(new Error(`File ${path3} not found.`));
    }, 5e3);
  });
}
async function decompressFile(filePath, targetPath) {
  const zip = new import_node_stream_zip.default.async({ file: filePath });
  if (!(0, import_fs.existsSync)(targetPath)) (0, import_fs.mkdirSync)(targetPath, { recursive: true });
  await zip.extract(null, targetPath);
  await zip.close();
}
async function removeFilesThatStartWith(startingWith, path3) {
  let removedAtLeastOne = false;
  try {
    const files = await (0, import_promises.readdir)(path3);
    for await (const file of files) {
      if (!file.startsWith(startingWith)) continue;
      await tryExec(async () => {
        await (0, import_promises.unlink)((0, import_path.join)(path3, file));
        removedAtLeastOne = true;
      });
    }
  } catch {
    return false;
  }
  return removedAtLeastOne;
}
function unlinkAllSync(...paths) {
  for (const path3 of paths) {
    tryExec(() => (0, import_fs.unlinkSync)(path3));
  }
}

// src/utils/network.ts
var import_fs3 = require("fs");
var import_http = __toESM(require("http"));
var import_https = __toESM(require("https"));

// src/utils/development.ts
var import_api5 = require("@raycast/api");
var import_api6 = require("@raycast/api");
var _exceptions = {
  logs: /* @__PURE__ */ new Map(),
  set: (message, error) => {
    capturedExceptions.logs.set(/* @__PURE__ */ new Date(), { message, error });
  },
  clear: () => capturedExceptions.logs.clear(),
  toString: () => {
    let str = "";
    capturedExceptions.logs.forEach((log, date) => {
      if (str.length > 0) str += "\n\n";
      str += `[${date.toISOString()}] ${log.message}`;
      if (log.error) str += `: ${getErrorString(log.error)}`;
    });
    return str;
  }
};
var capturedExceptions = Object.freeze(_exceptions);
var captureException = (description, error, options) => {
  const { captureToRaycast = false } = options ?? {};
  const desc = Array.isArray(description) ? description.filter(Boolean).join(" ") : description || "Captured exception";
  capturedExceptions.set(desc, error);
  if (import_api5.environment.isDevelopment) {
    console.error(desc, error);
  } else if (captureToRaycast) {
    (0, import_api6.captureException)(error);
  }
};
var debugLog = (...args) => {
  if (!import_api5.environment.isDevelopment) return;
  console.debug(...args);
};

// src/utils/crypto.ts
var import_fs2 = require("fs");
var import_crypto2 = require("crypto");
function getFileSha256(filePath) {
  try {
    return (0, import_crypto2.createHash)("sha256").update((0, import_fs2.readFileSync)(filePath)).digest("hex");
  } catch (error) {
    return null;
  }
}

// src/utils/network.ts
function download(url2, path3, options) {
  const { onProgress, sha256 } = options ?? {};
  return new Promise((resolve, reject) => {
    const uri = new URL(url2);
    const protocol = uri.protocol === "https:" ? import_https.default : import_http.default;
    let redirectCount = 0;
    const request = protocol.get(uri.href, (response) => {
      if (response.statusCode && response.statusCode >= 300 && response.statusCode < 400) {
        request.destroy();
        response.destroy();
        const redirectUrl = response.headers.location;
        if (!redirectUrl) {
          reject(new Error(`Redirect response without location header`));
          return;
        }
        if (++redirectCount >= 10) {
          reject(new Error("Too many redirects"));
          return;
        }
        download(redirectUrl, path3, options).then(resolve).catch(reject);
        return;
      }
      if (response.statusCode !== 200) {
        reject(new Error(`Response status ${response.statusCode}: ${response.statusMessage}`));
        return;
      }
      const fileSize = parseInt(response.headers["content-length"] || "0", 10);
      if (fileSize === 0) {
        reject(new Error("Invalid file size"));
        return;
      }
      const fileStream = (0, import_fs3.createWriteStream)(path3, { autoClose: true });
      let downloadedBytes = 0;
      const cleanup = () => {
        request.destroy();
        response.destroy();
        fileStream.close();
      };
      const cleanupAndReject = (error) => {
        cleanup();
        reject(error);
      };
      response.on("data", (chunk) => {
        downloadedBytes += chunk.length;
        const percent = Math.floor(downloadedBytes / fileSize * 100);
        onProgress?.(percent);
      });
      fileStream.on("finish", async () => {
        try {
          await waitForFileAvailable(path3);
          if (sha256) await waitForHashToMatch(path3, sha256);
          resolve();
        } catch (error) {
          reject(error);
        } finally {
          cleanup();
        }
      });
      fileStream.on("error", (error) => {
        captureException(`File stream error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      response.on("error", (error) => {
        captureException(`Response error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      request.on("error", (error) => {
        captureException(`Request error while downloading ${url2}`, error);
        (0, import_fs3.unlink)(path3, () => cleanupAndReject(error));
      });
      response.pipe(fileStream);
    });
  });
}
function waitForHashToMatch(path3, sha256) {
  return new Promise((resolve, reject) => {
    const fileSha = getFileSha256(path3);
    if (!fileSha) return reject(new Error(`Could not generate hash for file ${path3}.`));
    if (fileSha === sha256) return resolve();
    const interval = setInterval(() => {
      if (getFileSha256(path3) === sha256) {
        clearInterval(interval);
        resolve();
      }
    }, 1e3);
    setTimeout(() => {
      clearInterval(interval);
      reject(new Error(`Hash did not match, expected ${sha256.substring(0, 7)}, got ${fileSha.substring(0, 7)}.`));
    }, 5e3);
  });
}

// src/api/bitwarden.helpers.ts
function prepareSendPayload(template, values) {
  return {
    ...template,
    ...values,
    file: values.file ? { ...template.file, ...values.file } : template.file,
    text: values.text ? { ...template.text, ...values.text } : template.text
  };
}

// src/utils/cache.ts
var import_api7 = require("@raycast/api");
var Cache = new import_api7.Cache({ namespace: "bw-cache" });

// src/utils/platform.ts
var platform = process.platform === "darwin" ? "macos" : "windows";

// src/api/bitwarden.ts
var { supportPath } = import_api8.environment;
var \u0394 = "4";
var BinDownloadLogger = (() => {
  const filePath = (0, import_path2.join)(supportPath, `bw-bin-download-error-${\u0394}.log`);
  return {
    logError: (error) => tryExec(() => (0, import_fs5.writeFileSync)(filePath, error?.message ?? "Unexpected error")),
    clearError: () => tryExec(() => (0, import_fs5.unlinkSync)(filePath)),
    hasError: () => tryExec(() => (0, import_fs5.existsSync)(filePath), false)
  };
})();
var cliInfo = {
  version: "2025.2.0",
  get sha256() {
    if (platform === "windows") return "33a131017ac9c99d721e430a86e929383314d3f91c9f2fbf413d872565654c18";
    return "fade51012a46011c016a2e5aee2f2e534c1ed078e49d1178a69e2889d2812a96";
  },
  downloadPage: "https://github.com/bitwarden/clients/releases",
  path: {
    get downloadedBin() {
      return (0, import_path2.join)(supportPath, cliInfo.binFilenameVersioned);
    },
    get installedBin() {
      if (platform === "windows") return "C:\\ProgramData\\chocolatey\\bin\\bw.exe";
      return process.arch === "arm64" ? "/opt/homebrew/bin/bw" : "/usr/local/bin/bw";
    },
    get bin() {
      return !BinDownloadLogger.hasError() ? this.downloadedBin : this.installedBin;
    }
  },
  get binFilename() {
    return platform === "windows" ? "bw.exe" : "bw";
  },
  get binFilenameVersioned() {
    const name = `bw-${this.version}`;
    return platform === "windows" ? `${name}.exe` : `${name}`;
  },
  get downloadUrl() {
    let archSuffix = "";
    if (platform === "macos") {
      archSuffix = process.arch === "arm64" ? "-arm64" : "";
    }
    return `${this.downloadPage}/download/cli-v${this.version}/bw-${platform}${archSuffix}-${this.version}.zip`;
  }
};
var Bitwarden = class {
  constructor(toastInstance) {
    this.actionListeners = /* @__PURE__ */ new Map();
    this.preferences = (0, import_api8.getPreferenceValues)();
    this.wasCliUpdated = false;
    this.showToast = async (toastOpts) => {
      if (this.toastInstance) {
        const previousStateToastOpts = {
          message: this.toastInstance.message,
          title: this.toastInstance.title,
          primaryAction: this.toastInstance.primaryAction,
          secondaryAction: this.toastInstance.secondaryAction
        };
        if (toastOpts.style) this.toastInstance.style = toastOpts.style;
        this.toastInstance.message = toastOpts.message;
        this.toastInstance.title = toastOpts.title;
        this.toastInstance.primaryAction = toastOpts.primaryAction;
        this.toastInstance.secondaryAction = toastOpts.secondaryAction;
        await this.toastInstance.show();
        return Object.assign(this.toastInstance, {
          restore: async () => {
            await this.showToast(previousStateToastOpts);
          }
        });
      } else {
        const toast = await (0, import_api8.showToast)(toastOpts);
        return Object.assign(toast, { restore: () => toast.hide() });
      }
    };
    const { cliPath: cliPathPreference, clientId, clientSecret, serverCertsPath } = this.preferences;
    const serverUrl = getServerUrlPreference();
    this.toastInstance = toastInstance;
    this.cliPath = cliPathPreference || cliInfo.path.bin;
    this.env = {
      BITWARDENCLI_APPDATA_DIR: supportPath,
      BW_CLIENTSECRET: clientSecret.trim(),
      BW_CLIENTID: clientId.trim(),
      PATH: (0, import_path2.dirname)(process.execPath),
      ...serverUrl && serverCertsPath ? { NODE_EXTRA_CA_CERTS: serverCertsPath } : {}
    };
    this.initPromise = (async () => {
      await this.ensureCliBinary();
      void this.retrieveAndCacheCliVersion();
      await this.checkServerUrl(serverUrl);
    })();
  }
  async ensureCliBinary() {
    if (this.checkCliBinIsReady(this.cliPath)) return;
    if (this.cliPath === this.preferences.cliPath || this.cliPath === cliInfo.path.installedBin) {
      throw new InstalledCLINotFoundError(`Bitwarden CLI not found at ${this.cliPath}`);
    }
    if (BinDownloadLogger.hasError()) BinDownloadLogger.clearError();
    const hadOldBinaries = await removeFilesThatStartWith("bw-", supportPath);
    const toast = await this.showToast({
      title: `${hadOldBinaries ? "Updating" : "Initializing"} Bitwarden CLI`,
      style: import_api8.Toast.Style.Animated,
      primaryAction: { title: "Open Download Page", onAction: () => (0, import_api8.open)(cliInfo.downloadPage) }
    });
    const tmpFileName = "bw.zip";
    const zipPath = (0, import_path2.join)(supportPath, tmpFileName);
    try {
      try {
        toast.message = "Downloading...";
        await download(cliInfo.downloadUrl, zipPath, {
          onProgress: (percent) => toast.message = `Downloading ${percent}%`,
          sha256: cliInfo.sha256
        });
      } catch (downloadError) {
        toast.title = "Failed to download Bitwarden CLI";
        throw downloadError;
      }
      try {
        toast.message = "Extracting...";
        await decompressFile(zipPath, supportPath);
        const decompressedBinPath = (0, import_path2.join)(supportPath, cliInfo.binFilename);
        await (0, import_promises2.rename)(decompressedBinPath, this.cliPath).catch(() => null);
        await waitForFileAvailable(this.cliPath);
        await (0, import_promises2.chmod)(this.cliPath, "755");
        await (0, import_promises2.rm)(zipPath, { force: true });
        Cache.set(CACHE_KEYS.CLI_VERSION, cliInfo.version);
        this.wasCliUpdated = true;
      } catch (extractError) {
        toast.title = "Failed to extract Bitwarden CLI";
        throw extractError;
      }
      await toast.hide();
    } catch (error) {
      toast.message = error instanceof EnsureCliBinError ? error.message : "Please try again";
      toast.style = import_api8.Toast.Style.Failure;
      unlinkAllSync(zipPath, this.cliPath);
      if (!import_api8.environment.isDevelopment) BinDownloadLogger.logError(error);
      if (error instanceof Error) throw new EnsureCliBinError(error.message, error.stack);
      throw error;
    } finally {
      await toast.restore();
    }
  }
  async retrieveAndCacheCliVersion() {
    try {
      const { error, result } = await this.getVersion();
      if (!error) Cache.set(CACHE_KEYS.CLI_VERSION, result);
    } catch (error) {
      captureException("Failed to retrieve and cache cli version", error, { captureToRaycast: true });
    }
  }
  checkCliBinIsReady(filePath) {
    try {
      if (!(0, import_fs5.existsSync)(this.cliPath)) return false;
      (0, import_fs5.accessSync)(filePath, import_fs5.constants.X_OK);
      return true;
    } catch {
      (0, import_fs5.chmodSync)(filePath, "755");
      return true;
    }
  }
  setSessionToken(token) {
    this.env = {
      ...this.env,
      BW_SESSION: token
    };
  }
  clearSessionToken() {
    delete this.env.BW_SESSION;
  }
  withSession(token) {
    this.tempSessionToken = token;
    return this;
  }
  async initialize() {
    await this.initPromise;
    return this;
  }
  async checkServerUrl(serverUrl) {
    const storedServer = await import_api8.LocalStorage.getItem(LOCAL_STORAGE_KEY.SERVER_URL);
    if (!serverUrl || storedServer === serverUrl) return;
    const toast = await this.showToast({
      style: import_api8.Toast.Style.Animated,
      title: "Switching server...",
      message: "Bitwarden server preference changed"
    });
    try {
      try {
        await this.logout();
      } catch {
      }
      await this.exec(["config", "server", serverUrl || DEFAULT_SERVER_URL], { resetVaultTimeout: false });
      await import_api8.LocalStorage.setItem(LOCAL_STORAGE_KEY.SERVER_URL, serverUrl);
      toast.style = import_api8.Toast.Style.Success;
      toast.title = "Success";
      toast.message = "Bitwarden server changed";
    } catch (error) {
      toast.style = import_api8.Toast.Style.Failure;
      toast.title = "Failed to switch server";
      if (error instanceof Error) {
        toast.message = error.message;
      } else {
        toast.message = "Unknown error occurred";
      }
    } finally {
      await toast.restore();
    }
  }
  async exec(args, options) {
    const { abortController, input = "", resetVaultTimeout } = options ?? {};
    let env = this.env;
    if (this.tempSessionToken) {
      env = { ...env, BW_SESSION: this.tempSessionToken };
      this.tempSessionToken = void 0;
    }
    const result = await execa(this.cliPath, args, { input, env, signal: abortController?.signal });
    if (this.isPromptWaitingForMasterPassword(result)) {
      await this.lock();
      throw new VaultIsLockedError();
    }
    if (resetVaultTimeout) {
      await import_api8.LocalStorage.setItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME, (/* @__PURE__ */ new Date()).toISOString());
    }
    return result;
  }
  async getVersion() {
    try {
      const { stdout: result } = await this.exec(["--version"], { resetVaultTimeout: false });
      return { result };
    } catch (execError) {
      captureException("Failed to get cli version", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async login() {
    try {
      await this.exec(["login", "--apikey"], { resetVaultTimeout: true });
      await this.saveLastVaultStatus("login", "unlocked");
      await this.callActionListeners("login");
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to login", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async logout(options) {
    const { reason, immediate = false } = options ?? {};
    try {
      if (immediate) await this.handlePostLogout(reason);
      await this.exec(["logout"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("logout", "unauthenticated");
      if (!immediate) await this.handlePostLogout(reason);
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to logout", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async lock(options) {
    const { reason, checkVaultStatus = false, immediate = false } = options ?? {};
    try {
      if (immediate) await this.callActionListeners("lock", reason);
      if (checkVaultStatus) {
        const { error, result } = await this.status();
        if (error) throw error;
        if (result.status === "unauthenticated") return { error: new NotLoggedInError("Not logged in") };
      }
      await this.exec(["lock"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("lock", "locked");
      if (!immediate) await this.callActionListeners("lock", reason);
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to lock vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async unlock(password) {
    try {
      const { stdout: sessionToken } = await this.exec(["unlock", password, "--raw"], { resetVaultTimeout: true });
      this.setSessionToken(sessionToken);
      await this.saveLastVaultStatus("unlock", "unlocked");
      await this.callActionListeners("unlock", password, sessionToken);
      return { result: sessionToken };
    } catch (execError) {
      captureException("Failed to unlock vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async sync() {
    try {
      await this.exec(["sync"], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to sync vault", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async getItem(id) {
    try {
      const { stdout } = await this.exec(["get", "item", id], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get item", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async listItems() {
    try {
      const { stdout } = await this.exec(["list", "items"], { resetVaultTimeout: true });
      const items = JSON.parse(stdout);
      return { result: items.filter((item) => !!item.name) };
    } catch (execError) {
      captureException("Failed to list items", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createLoginItem(options) {
    try {
      const { error: itemTemplateError, result: itemTemplate } = await this.getTemplate("item");
      if (itemTemplateError) throw itemTemplateError;
      const { error: loginTemplateError, result: loginTemplate } = await this.getTemplate("item.login");
      if (loginTemplateError) throw loginTemplateError;
      itemTemplate.name = options.name;
      itemTemplate.type = 1 /* LOGIN */;
      itemTemplate.folderId = options.folderId || null;
      itemTemplate.login = loginTemplate;
      itemTemplate.notes = null;
      loginTemplate.username = options.username || null;
      loginTemplate.password = options.password;
      loginTemplate.totp = null;
      loginTemplate.fido2Credentials = void 0;
      if (options.uri) {
        loginTemplate.uris = [{ match: null, uri: options.uri }];
      }
      const { result: encodedItem, error: encodeError } = await this.encode(JSON.stringify(itemTemplate));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["create", "item", encodedItem], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to create login item", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async listFolders() {
    try {
      const { stdout } = await this.exec(["list", "folders"], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to list folder", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createFolder(name) {
    try {
      const { error, result: folder } = await this.getTemplate("folder");
      if (error) throw error;
      folder.name = name;
      const { result: encodedFolder, error: encodeError } = await this.encode(JSON.stringify(folder));
      if (encodeError) throw encodeError;
      await this.exec(["create", "folder", encodedFolder], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to create folder", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async getTotp(id) {
    try {
      const { stdout } = await this.exec(["get", "totp", id], { resetVaultTimeout: true });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to get TOTP", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async status() {
    try {
      const { stdout } = await this.exec(["status"], { resetVaultTimeout: false });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get status", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async checkLockStatus() {
    try {
      await this.exec(["unlock", "--check"], { resetVaultTimeout: false });
      await this.saveLastVaultStatus("checkLockStatus", "unlocked");
      return "unlocked";
    } catch (error) {
      captureException("Failed to check lock status", error);
      const errorMessage = error.stderr;
      if (errorMessage === "Vault is locked.") {
        await this.saveLastVaultStatus("checkLockStatus", "locked");
        return "locked";
      }
      await this.saveLastVaultStatus("checkLockStatus", "unauthenticated");
      return "unauthenticated";
    }
  }
  async getTemplate(type) {
    try {
      const { stdout } = await this.exec(["get", "template", type], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to get template", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async encode(input) {
    try {
      const { stdout } = await this.exec(["encode"], { input, resetVaultTimeout: false });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to encode", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async generatePassword(options, abortController) {
    const args = options ? getPasswordGeneratingArgs(options) : [];
    const { stdout } = await this.exec(["generate", ...args], { abortController, resetVaultTimeout: false });
    return stdout;
  }
  async listSends() {
    try {
      const { stdout } = await this.exec(["send", "list"], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to list sends", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async createSend(values) {
    try {
      const { error: templateError, result: template } = await this.getTemplate(
        values.type === 0 /* Text */ ? "send.text" : "send.file"
      );
      if (templateError) throw templateError;
      const payload = prepareSendPayload(template, values);
      const { result: encodedPayload, error: encodeError } = await this.encode(JSON.stringify(payload));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["send", "create", encodedPayload], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to create send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async editSend(values) {
    try {
      const { result: encodedPayload, error: encodeError } = await this.encode(JSON.stringify(values));
      if (encodeError) throw encodeError;
      const { stdout } = await this.exec(["send", "edit", encodedPayload], { resetVaultTimeout: true });
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      captureException("Failed to delete send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async deleteSend(id) {
    try {
      await this.exec(["send", "delete", id], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to delete send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async removeSendPassword(id) {
    try {
      await this.exec(["send", "remove-password", id], { resetVaultTimeout: true });
      return { result: void 0 };
    } catch (execError) {
      captureException("Failed to remove send password", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async receiveSendInfo(url2, options) {
    try {
      const { stdout, stderr } = await this.exec(["send", "receive", url2, "--obj"], {
        resetVaultTimeout: true,
        input: options?.password
      });
      if (!stdout && /Invalid password/i.test(stderr)) return { error: new SendInvalidPasswordError() };
      if (!stdout && /Send password/i.test(stderr)) return { error: new SendNeedsPasswordError() };
      return { result: JSON.parse(stdout) };
    } catch (execError) {
      const errorMessage = execError.stderr;
      if (/Invalid password/gi.test(errorMessage)) return { error: new SendInvalidPasswordError() };
      if (/Send password/gi.test(errorMessage)) return { error: new SendNeedsPasswordError() };
      captureException("Failed to receive send obj", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  async receiveSend(url2, options) {
    try {
      const { savePath, password } = options ?? {};
      const args = ["send", "receive", url2];
      if (savePath) args.push("--output", savePath);
      const { stdout } = await this.exec(args, { resetVaultTimeout: true, input: password });
      return { result: stdout };
    } catch (execError) {
      captureException("Failed to receive send", execError);
      const { error } = await this.handleCommonErrors(execError);
      if (!error) throw execError;
      return { error };
    }
  }
  // utils below
  async saveLastVaultStatus(callName, status) {
    await import_api8.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS, status);
  }
  async getLastSavedVaultStatus() {
    const lastSavedStatus = await import_api8.LocalStorage.getItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS);
    if (!lastSavedStatus) {
      const vaultStatus = await this.status();
      return vaultStatus.result?.status;
    }
    return lastSavedStatus;
  }
  isPromptWaitingForMasterPassword(result) {
    return !!(result.stderr && result.stderr.includes("Master password"));
  }
  async handlePostLogout(reason) {
    this.clearSessionToken();
    await this.callActionListeners("logout", reason);
  }
  async handleCommonErrors(error) {
    const errorMessage = error.stderr;
    if (!errorMessage) return {};
    if (/not logged in/i.test(errorMessage)) {
      await this.handlePostLogout();
      return { error: new NotLoggedInError("Not logged in") };
    }
    if (/Premium status/i.test(errorMessage)) {
      return { error: new PremiumFeatureError() };
    }
    return {};
  }
  setActionListener(action, listener) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      listeners.add(listener);
    } else {
      this.actionListeners.set(action, /* @__PURE__ */ new Set([listener]));
    }
    return this;
  }
  removeActionListener(action, listener) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      listeners.delete(listener);
    }
    return this;
  }
  async callActionListeners(action, ...args) {
    const listeners = this.actionListeners.get(action);
    if (listeners && listeners.size > 0) {
      for (const listener of listeners) {
        try {
          await listener?.(...args);
        } catch (error) {
          captureException(`Error calling bitwarden action listener for ${action}`, error);
        }
      }
    }
  }
};

// src/components/LoadingFallback.tsx
var import_api9 = require("@raycast/api");
var import_jsx_runtime2 = require("react/jsx-runtime");
var LoadingFallback = () => /* @__PURE__ */ (0, import_jsx_runtime2.jsx)(import_api9.Form, { isLoading: true });

// src/utils/hooks/useOnceEffect.ts
var import_react2 = require("react");
function useOnceEffect(effect, condition) {
  const hasRun = (0, import_react2.useRef)(false);
  (0, import_react2.useEffect)(() => {
    if (hasRun.current) return;
    if (condition !== void 0 && !condition) return;
    hasRun.current = true;
    void effect();
  }, [condition]);
}
var useOnceEffect_default = useOnceEffect;

// src/context/bitwarden.tsx
var import_jsx_runtime3 = require("react/jsx-runtime");
var BitwardenContext = (0, import_react3.createContext)(null);
var BitwardenProvider = ({ children, loadingFallback = /* @__PURE__ */ (0, import_jsx_runtime3.jsx)(LoadingFallback, {}) }) => {
  const [bitwarden, setBitwarden] = (0, import_react3.useState)();
  const [error, setError] = (0, import_react3.useState)();
  useOnceEffect_default(() => {
    void new Bitwarden().initialize().then(setBitwarden).catch(handleBwInitError);
  });
  function handleBwInitError(error2) {
    if (error2 instanceof InstalledCLINotFoundError) {
      setError(error2);
    } else {
      throw error2;
    }
  }
  if (error) return /* @__PURE__ */ (0, import_jsx_runtime3.jsx)(TroubleshootingGuide_default, { error });
  if (!bitwarden) return loadingFallback;
  return /* @__PURE__ */ (0, import_jsx_runtime3.jsx)(BitwardenContext.Provider, { value: bitwarden, children });
};
var useBitwarden = () => {
  const context = (0, import_react3.useContext)(BitwardenContext);
  if (context == null) {
    throw new Error("useBitwarden must be used within a BitwardenProvider");
  }
  return context;
};

// src/utils/objects.ts
function isObject(obj) {
  return typeof obj === "object" && obj !== null && !Array.isArray(obj);
}

// src/utils/debug.ts
function treatError(error, options) {
  try {
    const execaError = error;
    let errorString;
    if (execaError?.stderr) {
      errorString = execaError.stderr;
    } else if (error instanceof Error) {
      errorString = `${error.name}: ${error.message}`;
    } else if (isObject(error)) {
      errorString = JSON.stringify(error);
    } else {
      errorString = `${error}`;
    }
    if (!errorString) return "";
    if (!options?.omitSensitiveValue) return errorString;
    return omitSensitiveValueFromString(errorString, options.omitSensitiveValue);
  } catch {
    return "";
  }
}
function omitSensitiveValueFromString(value, sensitiveValue) {
  return value.replace(new RegExp(sensitiveValue, "i"), "[REDACTED]");
}

// src/utils/hooks/useVaultMessages.ts
var import_api10 = require("@raycast/api");
var import_react4 = require("react");
function useVaultMessages() {
  const bitwarden = useBitwarden();
  const [vaultState, setVaultState] = (0, import_react4.useState)(null);
  (0, import_react4.useEffect)(() => {
    void bitwarden.status().then(({ error, result }) => {
      if (!error) setVaultState(result);
    }).catch(() => {
    });
  }, []);
  const shouldShowServer = !!getServerUrlPreference();
  let userMessage = "...";
  let serverMessage = "...";
  if (vaultState) {
    const { status, userEmail, serverUrl } = vaultState;
    userMessage = status == "unauthenticated" ? "\u274C Logged out" : `\u{1F512} Locked (${userEmail})`;
    if (serverUrl) {
      serverMessage = serverUrl || "";
    } else if (!serverUrl && shouldShowServer || serverUrl && !shouldShowServer) {
      void (0, import_api10.confirmAlert)({
        icon: import_api10.Icon.ExclamationMark,
        title: "Restart Required",
        message: "Bitwarden server URL preference has been changed since the extension was opened.",
        primaryAction: {
          title: "Close Extension"
        },
        dismissAction: {
          title: "Close Raycast",
          // Only here to provide the necessary second option
          style: import_api10.Alert.ActionStyle.Cancel
        }
      }).then((closeExtension) => {
        if (closeExtension) {
          void (0, import_api10.popToRoot)();
        } else {
          void (0, import_api10.closeMainWindow)();
        }
      });
    }
  }
  return { userMessage, serverMessage, shouldShowServer };
}
var useVaultMessages_default = useVaultMessages;

// src/utils/localstorage.ts
var import_api12 = require("@raycast/api");

// node_modules/@raycast/utils/dist/module.js
var import_react5 = __toESM(require("react"));
var import_api11 = require("@raycast/api");

// node_modules/dequal/lite/index.mjs
var has = Object.prototype.hasOwnProperty;
function dequal(foo, bar) {
  var ctor, len;
  if (foo === bar) return true;
  if (foo && bar && (ctor = foo.constructor) === bar.constructor) {
    if (ctor === Date) return foo.getTime() === bar.getTime();
    if (ctor === RegExp) return foo.toString() === bar.toString();
    if (ctor === Array) {
      if ((len = foo.length) === bar.length) {
        while (len-- && dequal(foo[len], bar[len])) ;
      }
      return len === -1;
    }
    if (!ctor || typeof foo === "object") {
      len = 0;
      for (ctor in foo) {
        if (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;
        if (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;
      }
      return Object.keys(bar).length === len;
    }
  }
  return foo !== foo && bar !== bar;
}

// node_modules/@raycast/utils/dist/module.js
var import_node_fs = __toESM(require("node:fs"));
var import_node_path3 = __toESM(require("node:path"));
var import_jsx_runtime4 = require("react/jsx-runtime");
function $a57ed8effbd797c7$export$722debc0e56fea39(value) {
  const ref = (0, import_react5.useRef)(value);
  const signalRef = (0, import_react5.useRef)(0);
  if (!(0, dequal)(value, ref.current)) {
    ref.current = value;
    signalRef.current += 1;
  }
  return (0, import_react5.useMemo)(() => ref.current, [
    signalRef.current
  ]);
}
function $bfcf6ee368b3bd9f$export$d4b699e2c1148419(value) {
  const ref = (0, import_react5.useRef)(value);
  ref.current = value;
  return ref;
}
function $c718fd03aba6111c$export$80e5033e369189f3(error, options) {
  const message = error instanceof Error ? error.message : String(error);
  return (0, import_api11.showToast)({
    style: (0, import_api11.Toast).Style.Failure,
    title: options?.title ?? "Something went wrong",
    message: options?.message ?? message,
    primaryAction: options?.primaryAction ?? $c718fd03aba6111c$var$handleErrorToastAction(error),
    secondaryAction: options?.primaryAction ? $c718fd03aba6111c$var$handleErrorToastAction(error) : void 0
  });
}
var $c718fd03aba6111c$var$handleErrorToastAction = (error) => {
  let privateExtension = true;
  let title = "[Extension Name]...";
  let extensionURL = "";
  try {
    const packageJSON = JSON.parse((0, import_node_fs.readFileSync)((0, import_node_path3.join)((0, import_api11.environment).assetsPath, "..", "package.json"), "utf8"));
    title = `[${packageJSON.title}]...`;
    extensionURL = `https://raycast.com/${packageJSON.owner || packageJSON.author}/${packageJSON.name}`;
    if (!packageJSON.owner || packageJSON.access === "public") privateExtension = false;
  } catch (err) {
  }
  const fallback = (0, import_api11.environment).isDevelopment || privateExtension;
  const stack = error instanceof Error ? error?.stack || error?.message || "" : String(error);
  return {
    title: fallback ? "Copy Logs" : "Report Error",
    onAction(toast) {
      toast.hide();
      if (fallback) (0, import_api11.Clipboard).copy(stack);
      else (0, import_api11.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(title)}&extension-url=${encodeURI(extensionURL)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${stack}
\`\`\`
`)}`);
    }
  };
};
function $cefc05764ce5eacd$export$dd6b79aaabe7bc37(fn, args, options) {
  const lastCallId = (0, import_react5.useRef)(0);
  const [state, set] = (0, import_react5.useState)({
    isLoading: true
  });
  const fnRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(fn);
  const latestAbortable = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.abortable);
  const latestArgs = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(args || []);
  const latestOnError = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onError);
  const latestOnData = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onData);
  const latestOnWillExecute = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.onWillExecute);
  const latestFailureToast = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(options?.failureToastOptions);
  const latestValue = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(state.data);
  const latestCallback = (0, import_react5.useRef)(null);
  const paginationArgsRef = (0, import_react5.useRef)({
    page: 0
  });
  const usePaginationRef = (0, import_react5.useRef)(false);
  const hasMoreRef = (0, import_react5.useRef)(true);
  const pageSizeRef = (0, import_react5.useRef)(50);
  const abort = (0, import_react5.useCallback)(() => {
    if (latestAbortable.current) {
      latestAbortable.current.current?.abort();
      latestAbortable.current.current = new AbortController();
    }
    return ++lastCallId.current;
  }, [
    latestAbortable
  ]);
  const callback = (0, import_react5.useCallback)((...args2) => {
    const callId = abort();
    latestOnWillExecute.current?.(args2);
    set((prevState) => ({
      ...prevState,
      isLoading: true
    }));
    const promiseOrPaginatedPromise = $cefc05764ce5eacd$var$bindPromiseIfNeeded(fnRef.current)(...args2);
    function handleError(error) {
      if (error.name == "AbortError") return error;
      if (callId === lastCallId.current) {
        if (latestOnError.current) latestOnError.current(error);
        else if ((0, import_api11.environment).launchType !== (0, import_api11.LaunchType).Background) (0, $c718fd03aba6111c$export$80e5033e369189f3)(error, {
          title: "Failed to fetch latest data",
          primaryAction: {
            title: "Retry",
            onAction(toast) {
              toast.hide();
              latestCallback.current?.(...latestArgs.current || []);
            }
          },
          ...latestFailureToast.current
        });
        set({
          error,
          isLoading: false
        });
      }
      return error;
    }
    if (typeof promiseOrPaginatedPromise === "function") {
      usePaginationRef.current = true;
      return promiseOrPaginatedPromise(paginationArgsRef.current).then(
        // @ts-expect-error too complicated for TS
        ({ data, hasMore, cursor }) => {
          if (callId === lastCallId.current) {
            if (paginationArgsRef.current) {
              paginationArgsRef.current.cursor = cursor;
              paginationArgsRef.current.lastItem = data?.[data.length - 1];
            }
            if (latestOnData.current) latestOnData.current(data, paginationArgsRef.current);
            if (hasMore) pageSizeRef.current = data.length;
            hasMoreRef.current = hasMore;
            set((previousData) => {
              if (paginationArgsRef.current.page === 0) return {
                data,
                isLoading: false
              };
              return {
                data: (previousData.data || [])?.concat(data),
                isLoading: false
              };
            });
          }
          return data;
        },
        (error) => {
          hasMoreRef.current = false;
          return handleError(error);
        }
      );
    }
    usePaginationRef.current = false;
    return promiseOrPaginatedPromise.then((data) => {
      if (callId === lastCallId.current) {
        if (latestOnData.current) latestOnData.current(data);
        set({
          data,
          isLoading: false
        });
      }
      return data;
    }, handleError);
  }, [
    latestOnData,
    latestOnError,
    latestArgs,
    fnRef,
    set,
    latestCallback,
    latestOnWillExecute,
    paginationArgsRef,
    latestFailureToast,
    abort
  ]);
  latestCallback.current = callback;
  const revalidate = (0, import_react5.useCallback)(() => {
    paginationArgsRef.current = {
      page: 0
    };
    const args2 = latestArgs.current || [];
    return callback(...args2);
  }, [
    callback,
    latestArgs
  ]);
  const mutate = (0, import_react5.useCallback)(async (asyncUpdate, options2) => {
    let dataBeforeOptimisticUpdate;
    try {
      if (options2?.optimisticUpdate) {
        abort();
        if (typeof options2?.rollbackOnError !== "function" && options2?.rollbackOnError !== false)
          dataBeforeOptimisticUpdate = structuredClone(latestValue.current?.value);
        const update = options2.optimisticUpdate;
        set((prevState) => ({
          ...prevState,
          data: update(prevState.data)
        }));
      }
      return await asyncUpdate;
    } catch (err) {
      if (typeof options2?.rollbackOnError === "function") {
        const update = options2.rollbackOnError;
        set((prevState) => ({
          ...prevState,
          data: update(prevState.data)
        }));
      } else if (options2?.optimisticUpdate && options2?.rollbackOnError !== false) set((prevState) => ({
        ...prevState,
        data: dataBeforeOptimisticUpdate
      }));
      throw err;
    } finally {
      if (options2?.shouldRevalidateAfter !== false) {
        if ((0, import_api11.environment).launchType === (0, import_api11.LaunchType).Background || (0, import_api11.environment).commandMode === "menu-bar")
          await revalidate();
        else revalidate();
      }
    }
  }, [
    revalidate,
    latestValue,
    set,
    abort
  ]);
  const onLoadMore = (0, import_react5.useCallback)(() => {
    paginationArgsRef.current.page += 1;
    const args2 = latestArgs.current || [];
    callback(...args2);
  }, [
    paginationArgsRef,
    latestArgs,
    callback
  ]);
  (0, import_react5.useEffect)(() => {
    paginationArgsRef.current = {
      page: 0
    };
    if (options?.execute !== false) callback(...args || []);
    else
      abort();
  }, [
    (0, $a57ed8effbd797c7$export$722debc0e56fea39)([
      args,
      options?.execute,
      callback
    ]),
    latestAbortable,
    paginationArgsRef
  ]);
  (0, import_react5.useEffect)(() => {
    return () => {
      abort();
    };
  }, [
    abort
  ]);
  const isLoading = options?.execute !== false ? state.isLoading : false;
  const stateWithLoadingFixed = {
    ...state,
    isLoading
  };
  const pagination = usePaginationRef.current ? {
    pageSize: pageSizeRef.current,
    hasMore: hasMoreRef.current,
    onLoadMore
  } : void 0;
  return {
    ...stateWithLoadingFixed,
    revalidate,
    mutate,
    pagination
  };
}
function $cefc05764ce5eacd$var$bindPromiseIfNeeded(fn) {
  if (fn === Promise.all)
    return fn.bind(Promise);
  if (fn === Promise.race)
    return fn.bind(Promise);
  if (fn === Promise.resolve)
    return fn.bind(Promise);
  if (fn === Promise.reject)
    return fn.bind(Promise);
  return fn;
}
function $e2e1ea6dd3b7d2e1$export$b644b65666fe0c18(key, _value) {
  const value = this[key];
  if (value instanceof Date) return `__raycast_cached_date__${value.toISOString()}`;
  if (Buffer.isBuffer(value)) return `__raycast_cached_buffer__${value.toString("base64")}`;
  return _value;
}
function $e2e1ea6dd3b7d2e1$export$63698c10df99509c(_key, value) {
  if (typeof value === "string" && value.startsWith("__raycast_cached_date__")) return new Date(value.replace("__raycast_cached_date__", ""));
  if (typeof value === "string" && value.startsWith("__raycast_cached_buffer__")) return Buffer.from(value.replace("__raycast_cached_buffer__", ""), "base64");
  return value;
}
var $c40d7eded38ca69c$var$rootCache = /* @__PURE__ */ Symbol("cache without namespace");
var $c40d7eded38ca69c$var$cacheMap = /* @__PURE__ */ new Map();
function $c40d7eded38ca69c$export$14afb9e4c16377d3(key, initialState2, config) {
  const cacheKey = config?.cacheNamespace || $c40d7eded38ca69c$var$rootCache;
  const cache = $c40d7eded38ca69c$var$cacheMap.get(cacheKey) || $c40d7eded38ca69c$var$cacheMap.set(cacheKey, new (0, import_api11.Cache)({
    namespace: config?.cacheNamespace
  })).get(cacheKey);
  if (!cache) throw new Error("Missing cache");
  const keyRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(key);
  const initialValueRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(initialState2);
  const cachedState = (0, import_react5.useSyncExternalStore)(cache.subscribe, () => {
    try {
      return cache.get(keyRef.current);
    } catch (error) {
      console.error("Could not get Cache data:", error);
      return void 0;
    }
  });
  const state = (0, import_react5.useMemo)(() => {
    if (typeof cachedState !== "undefined") {
      if (cachedState === "undefined") return void 0;
      try {
        return JSON.parse(cachedState, (0, $e2e1ea6dd3b7d2e1$export$63698c10df99509c));
      } catch (err) {
        console.warn("The cached data is corrupted", err);
        return initialValueRef.current;
      }
    } else return initialValueRef.current;
  }, [
    cachedState,
    initialValueRef
  ]);
  const stateRef = (0, $bfcf6ee368b3bd9f$export$d4b699e2c1148419)(state);
  const setStateAndCache = (0, import_react5.useCallback)((updater) => {
    const newValue = typeof updater === "function" ? updater(stateRef.current) : updater;
    if (typeof newValue === "undefined") cache.set(keyRef.current, "undefined");
    else {
      const stringifiedValue = JSON.stringify(newValue, (0, $e2e1ea6dd3b7d2e1$export$b644b65666fe0c18));
      cache.set(keyRef.current, stringifiedValue);
    }
    return newValue;
  }, [
    cache,
    keyRef,
    stateRef
  ]);
  return [
    state,
    setStateAndCache
  ];
}

// src/utils/localstorage.ts
function useLocalStorageItem(key, defaultValue) {
  const { data: value, revalidate, isLoading } = $cefc05764ce5eacd$export$dd6b79aaabe7bc37(() => import_api12.LocalStorage.getItem(key));
  const set = async (value2) => {
    await import_api12.LocalStorage.setItem(key, value2);
    await revalidate();
  };
  const remove = async () => {
    await import_api12.LocalStorage.removeItem(key);
    await revalidate();
  };
  return [value ?? defaultValue, { isLoading, set, remove }];
}

// src/components/UnlockForm.tsx
var import_jsx_runtime5 = require("react/jsx-runtime");
var UnlockForm = ({ pendingAction = Promise.resolve() }) => {
  const bitwarden = useBitwarden();
  const { userMessage, serverMessage, shouldShowServer } = useVaultMessages_default();
  const [isLoading, setLoading] = (0, import_react6.useState)(false);
  const [unlockError, setUnlockError] = (0, import_react6.useState)(void 0);
  const [showPassword, setShowPassword] = (0, import_react6.useState)(false);
  const [password, setPassword] = (0, import_react6.useState)("");
  const [lockReason, { remove: clearLockReason }] = useLocalStorageItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON);
  async function onSubmit() {
    if (password.length === 0) return;
    const toast = await (0, import_api13.showToast)(import_api13.Toast.Style.Animated, "Unlocking Vault...", "Please wait");
    try {
      setLoading(true);
      setUnlockError(void 0);
      await pendingAction;
      const { error, result: vaultState } = await bitwarden.status();
      if (error) throw error;
      if (vaultState.status === "unauthenticated") {
        try {
          const { error: error2 } = await bitwarden.login();
          if (error2) throw error2;
        } catch (error2) {
          const {
            displayableError = `Please check your ${shouldShowServer ? "Server URL, " : ""}API Key and Secret.`,
            treatedError
          } = getUsefulError(error2, password);
          await (0, import_api13.showToast)(import_api13.Toast.Style.Failure, "Failed to log in", displayableError);
          setUnlockError(treatedError);
          captureException("Failed to log in", error2);
          return;
        }
      }
      await bitwarden.unlock(password);
      await clearLockReason();
      await toast.hide();
    } catch (error) {
      const { displayableError = "Please check your credentials", treatedError } = getUsefulError(error, password);
      await (0, import_api13.showToast)(import_api13.Toast.Style.Failure, "Failed to unlock vault", displayableError);
      setUnlockError(treatedError);
      captureException("Failed to unlock vault", error);
    } finally {
      setLoading(false);
    }
  }
  const copyUnlockError = async () => {
    if (!unlockError) return;
    await import_api13.Clipboard.copy(unlockError);
    await (0, import_api13.showToast)(import_api13.Toast.Style.Success, "Error copied to clipboard");
  };
  let PasswordField = import_api13.Form.PasswordField;
  let passwordFieldId = "password";
  if (showPassword) {
    PasswordField = import_api13.Form.TextField;
    passwordFieldId = "plainPassword";
  }
  return /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(
    import_api13.Form,
    {
      actions: /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_api13.ActionPanel, { children: [
        !isLoading && /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_jsx_runtime5.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Action.SubmitForm, { icon: import_api13.Icon.LockUnlocked, title: "Unlock", onSubmit }),
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
            import_api13.Action,
            {
              icon: showPassword ? import_api13.Icon.EyeDisabled : import_api13.Icon.Eye,
              title: showPassword ? "Hide Password" : "Show Password",
              onAction: () => setShowPassword((prev) => !prev),
              shortcut: { macOS: { key: "e", modifiers: ["opt"] }, windows: { key: "e", modifiers: ["alt"] } }
            }
          )
        ] }),
        !!unlockError && /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          import_api13.Action,
          {
            onAction: copyUnlockError,
            title: "Copy Last Error",
            icon: import_api13.Icon.Bug,
            style: import_api13.Action.Style.Destructive
          }
        ),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(DebuggingBugReportingActionSection, {})
      ] }),
      children: [
        shouldShowServer && /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "Server URL", text: serverMessage }),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "Vault Status", text: userMessage }),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          PasswordField,
          {
            id: passwordFieldId,
            title: "Master Password",
            value: password,
            onChange: setPassword,
            ref: (field) => field?.focus()
          }
        ),
        /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
          import_api13.Form.Description,
          {
            title: "",
            text: `Press ${platform === "macos" ? "\u2325" : "Alt"}+E to ${showPassword ? "hide" : "show"} password`
          }
        ),
        !!lockReason && /* @__PURE__ */ (0, import_jsx_runtime5.jsxs)(import_jsx_runtime5.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(import_api13.Form.Description, { title: "\u2139\uFE0F", text: lockReason }),
          /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(TimeoutInfoDescription, {})
        ] })
      ]
    }
  );
};
function TimeoutInfoDescription() {
  const vaultTimeoutMs = (0, import_api13.getPreferenceValues)().repromptIgnoreDuration;
  const timeoutLabel = getLabelForTimeoutPreference(vaultTimeoutMs);
  if (!timeoutLabel) return null;
  return /* @__PURE__ */ (0, import_jsx_runtime5.jsx)(
    import_api13.Form.Description,
    {
      title: "",
      text: `Timeout is set to ${timeoutLabel}, this can be configured in the extension settings`
    }
  );
}
function getUsefulError(error, password) {
  const treatedError = treatError(error, { omitSensitiveValue: password });
  let displayableError;
  if (/Invalid master password/i.test(treatedError)) {
    displayableError = "Invalid master password";
  } else if (/Invalid API Key/i.test(treatedError)) {
    displayableError = "Invalid Client ID or Secret";
  }
  return { displayableError, treatedError };
}
var UnlockForm_default = UnlockForm;

// src/components/searchVault/VaultLoadingFallback.tsx
var import_api14 = require("@raycast/api");
var import_jsx_runtime6 = require("react/jsx-runtime");
var VaultLoadingFallback = () => /* @__PURE__ */ (0, import_jsx_runtime6.jsx)(import_api14.List, { searchBarPlaceholder: "Search vault", isLoading: true });

// src/context/session/reducer.ts
var import_react7 = require("react");
var initialState = {
  token: void 0,
  passwordHash: void 0,
  isLoading: true,
  isLocked: false,
  isAuthenticated: false
};
var useSessionReducer = () => {
  return (0, import_react7.useReducer)((state, action) => {
    switch (action.type) {
      case "loadState": {
        const { type: _, ...actionPayload } = action;
        return { ...state, ...actionPayload };
      }
      case "lock": {
        return {
          ...state,
          token: void 0,
          passwordHash: void 0,
          isLoading: false,
          isLocked: true
        };
      }
      case "unlock": {
        return {
          ...state,
          token: action.token,
          passwordHash: action.passwordHash,
          isLocked: false,
          isAuthenticated: true
        };
      }
      case "logout": {
        return {
          ...state,
          token: void 0,
          passwordHash: void 0,
          isLocked: true,
          isAuthenticated: false,
          isLoading: false
        };
      }
      case "vaultTimeout": {
        return {
          ...state,
          isLocked: true
        };
      }
      case "finishLoadingSavedState": {
        if (!state.token || !state.passwordHash) {
          throw new Error("Missing required fields: token, passwordHash");
        }
        const hasToken = !!state.token;
        return {
          ...state,
          isLoading: false,
          isLocked: !hasToken,
          isAuthenticated: hasToken
        };
      }
      case "failLoadingSavedState": {
        return {
          ...state,
          isLoading: false,
          isLocked: true
        };
      }
      default: {
        return state;
      }
    }
  }, initialState);
};

// src/context/session/utils.ts
var import_api15 = require("@raycast/api");
var import_child_process = require("child_process");
var import_util = require("util");
var exec = (0, import_util.promisify)(import_child_process.exec);
var SessionStorage = {
  getSavedSession: () => {
    return Promise.all([
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.REPROMPT_HASH),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME),
      import_api15.LocalStorage.getItem(LOCAL_STORAGE_KEY.VAULT_LAST_STATUS)
    ]);
  },
  clearSession: async () => {
    await Promise.all([
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.REPROMPT_HASH)
    ]);
  },
  saveSession: async (token, passwordHash) => {
    await Promise.all([
      import_api15.LocalStorage.setItem(LOCAL_STORAGE_KEY.SESSION_TOKEN, token),
      import_api15.LocalStorage.setItem(LOCAL_STORAGE_KEY.REPROMPT_HASH, passwordHash)
    ]);
  },
  logoutClearSession: async () => {
    await Promise.all([
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.SESSION_TOKEN),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.REPROMPT_HASH),
      import_api15.LocalStorage.removeItem(LOCAL_STORAGE_KEY.LAST_ACTIVITY_TIME)
    ]);
  }
};
var checkSystemLockedSinceLastAccess = (lastActivityTime) => {
  return checkSystemLogTimeAfter(lastActivityTime, (time) => getLastSyslog(time, "handleUnlockResult"));
};
var checkSystemSleptSinceLastAccess = (lastActivityTime) => {
  return checkSystemLogTimeAfter(lastActivityTime, (time) => getLastSyslog(time, "sleep 0"));
};
function getLastSyslog(hours, filter) {
  return exec(
    `log show --style syslog --predicate "process == 'loginwindow'" --info --last ${hours}h | grep "${filter}" | tail -n 1`
  );
}
async function checkSystemLogTimeAfter(time, getLogEntry) {
  const lastScreenLockTime = await getSystemLogTime(getLogEntry);
  if (!lastScreenLockTime) return true;
  return new Date(lastScreenLockTime).getTime() > time.getTime();
}
var getSystemLogTime_INCREMENT_HOURS = 2;
var getSystemLogTime_MAX_RETRIES = 5;
async function getSystemLogTime(getLogEntry, timeSpanHours = 1, retryAttempt = 0) {
  try {
    if (retryAttempt > getSystemLogTime_MAX_RETRIES) {
      debugLog("Max retry attempts reached to get last screen lock time");
      return void 0;
    }
    const { stdout, stderr } = await getLogEntry(timeSpanHours);
    const [logDate, logTime] = stdout?.split(" ") ?? [];
    if (stderr || !logDate || !logTime) {
      return getSystemLogTime(getLogEntry, timeSpanHours + getSystemLogTime_INCREMENT_HOURS, retryAttempt + 1);
    }
    const logFullDate = /* @__PURE__ */ new Date(`${logDate}T${logTime}`);
    if (!logFullDate || logFullDate.toString() === "Invalid Date") return void 0;
    return logFullDate;
  } catch (error) {
    captureException("Failed to get last screen lock time", error);
    return void 0;
  }
}

// src/context/session/session.tsx
var import_jsx_runtime7 = require("react/jsx-runtime");
var SessionContext = (0, import_react8.createContext)(null);
function SessionProvider(props) {
  const { children, loadingFallback = /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(VaultLoadingFallback, {}), unlock } = props;
  const bitwarden = useBitwarden();
  const [state, dispatch] = useSessionReducer();
  const pendingActionRef = (0, import_react8.useRef)(Promise.resolve());
  useOnceEffect_default(bootstrapSession, bitwarden);
  async function bootstrapSession() {
    try {
      bitwarden.setActionListener("lock", handleLock).setActionListener("unlock", handleUnlock).setActionListener("logout", handleLogout);
      const [token, passwordHash, lastActivityTimeString, lastVaultStatus] = await SessionStorage.getSavedSession();
      if (!token || !passwordHash) throw new LockVaultError();
      dispatch({ type: "loadState", token, passwordHash });
      bitwarden.setSessionToken(token);
      if (bitwarden.wasCliUpdated) throw new LogoutVaultError(VAULT_LOCK_MESSAGES.CLI_UPDATED);
      if (lastVaultStatus === "locked") throw new LockVaultError();
      if (lastVaultStatus === "unauthenticated") throw new LogoutVaultError();
      if (lastActivityTimeString) {
        const lastActivityTime = new Date(lastActivityTimeString);
        const vaultTimeoutMs = +(0, import_api16.getPreferenceValues)().repromptIgnoreDuration;
        if (platform === "macos" && vaultTimeoutMs === VAULT_TIMEOUT.SYSTEM_LOCK) {
          if (await checkSystemLockedSinceLastAccess(lastActivityTime)) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.SYSTEM_LOCK);
          }
        } else if (platform === "macos" && vaultTimeoutMs === VAULT_TIMEOUT.SYSTEM_SLEEP) {
          if (await checkSystemSleptSinceLastAccess(lastActivityTime)) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.SYSTEM_SLEEP);
          }
        } else if (vaultTimeoutMs !== VAULT_TIMEOUT.NEVER) {
          const timeElapseSinceLastActivity = Date.now() - lastActivityTime.getTime();
          if (vaultTimeoutMs === VAULT_TIMEOUT.IMMEDIATELY || timeElapseSinceLastActivity >= vaultTimeoutMs) {
            throw new LockVaultError(VAULT_LOCK_MESSAGES.TIMEOUT);
          }
        }
      }
      dispatch({ type: "finishLoadingSavedState" });
    } catch (error) {
      if (error instanceof LockVaultError) {
        pendingActionRef.current = bitwarden.lock({ reason: error.message, immediate: true, checkVaultStatus: true });
      } else if (error instanceof LogoutVaultError) {
        pendingActionRef.current = bitwarden.logout({ reason: error.message, immediate: true });
      } else {
        pendingActionRef.current = bitwarden.lock({ immediate: true });
        dispatch({ type: "failLoadingSavedState" });
        captureException("Failed to bootstrap session state", error);
      }
    }
  }
  async function handleUnlock(password, token) {
    const passwordHash = await hashMasterPasswordForReprompting(password);
    await SessionStorage.saveSession(token, passwordHash);
    await import_api16.LocalStorage.removeItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON);
    dispatch({ type: "unlock", token, passwordHash });
  }
  async function handleLock(reason) {
    await SessionStorage.clearSession();
    if (reason) await import_api16.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON, reason);
    dispatch({ type: "lock" });
  }
  async function handleLogout(reason) {
    await SessionStorage.clearSession();
    Cache.clear();
    if (reason) await import_api16.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_LOCK_REASON, reason);
    dispatch({ type: "logout" });
  }
  async function confirmMasterPassword(password) {
    const enteredPasswordHash = await hashMasterPasswordForReprompting(password);
    return enteredPasswordHash === state.passwordHash;
  }
  const contextValue = (0, import_react8.useMemo)(
    () => ({
      token: state.token,
      isLoading: state.isLoading,
      isAuthenticated: state.isAuthenticated,
      isLocked: state.isLocked,
      active: !state.isLoading && state.isAuthenticated && !state.isLocked,
      confirmMasterPassword
    }),
    [state, confirmMasterPassword]
  );
  if (state.isLoading) return loadingFallback;
  const showUnlockForm = state.isLocked || !state.isAuthenticated;
  const _children = state.token ? children : null;
  return /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(SessionContext.Provider, { value: contextValue, children: showUnlockForm && unlock ? /* @__PURE__ */ (0, import_jsx_runtime7.jsx)(UnlockForm_default, { pendingAction: pendingActionRef.current }) : _children });
}
function useSession() {
  const session = (0, import_react8.useContext)(SessionContext);
  if (session == null) {
    throw new Error("useSession must be used within a SessionProvider");
  }
  return session;
}
var LockVaultError = class extends Error {
  constructor(lockReason) {
    super(lockReason);
  }
};
var LogoutVaultError = class extends Error {
  constructor(lockReason) {
    super(lockReason);
  }
};

// src/utils/hooks/useReprompt.tsx
var import_jsx_runtime8 = require("react/jsx-runtime");
function useReprompt(action, options) {
  const { description = "Performing an action that requires the master password" } = options ?? {};
  const session = useSession();
  const { push, pop } = (0, import_api17.useNavigation)();
  async function handleConfirm(password) {
    const isPasswordCorrect = await session.confirmMasterPassword(password);
    if (!isPasswordCorrect) {
      await (0, import_api17.showToast)(import_api17.Toast.Style.Failure, "Failed to unlock vault", "Check your credentials");
      return;
    }
    pop();
    setTimeout(action, 1);
  }
  return () => push(/* @__PURE__ */ (0, import_jsx_runtime8.jsx)(RepromptForm_default, { description, onConfirm: handleConfirm }));
}
var useReprompt_default = useReprompt;

// src/components/actions/ActionWithReprompt.tsx
var import_jsx_runtime9 = require("react/jsx-runtime");
function ActionWithReprompt(props) {
  const { repromptDescription, onAction, ...componentProps } = props;
  const { reprompt } = useSelectedVaultItem();
  const repromptAndPerformAction = useReprompt_default(onAction, { description: repromptDescription });
  return /* @__PURE__ */ (0, import_jsx_runtime9.jsx)(import_api18.Action, { ...componentProps, onAction: reprompt ? repromptAndPerformAction : onAction });
}
var ActionWithReprompt_default = ActionWithReprompt;

// src/components/actions/BugReportCollectDataAction.tsx
var import_api19 = require("@raycast/api");
var import_child_process2 = require("child_process");
var import_util2 = require("util");
var import_fs7 = require("fs");
var import_path3 = require("path");
var import_jsx_runtime10 = require("react/jsx-runtime");
var exec2 = (0, import_util2.promisify)(import_child_process2.exec);
var { supportPath: supportPath2 } = import_api19.environment;
var getSafePreferences = () => {
  const {
    clientId,
    clientSecret,
    fetchFavicons: fetchFavicons2,
    generatePasswordQuickAction,
    repromptIgnoreDuration,
    serverCertsPath,
    serverUrl,
    shouldCacheVaultItems,
    transientCopyGeneratePassword,
    transientCopyGeneratePasswordQuick,
    transientCopySearch,
    windowActionOnCopy
  } = (0, import_api19.getPreferenceValues)();
  return {
    has_clientId: !!clientId,
    has_clientSecret: !!clientSecret,
    fetchFavicons: fetchFavicons2,
    generatePasswordQuickAction,
    repromptIgnoreDuration,
    has_serverCertsPath: !!serverCertsPath,
    has_serverUrl: !!serverUrl,
    shouldCacheVaultItems,
    transientCopyGeneratePassword,
    transientCopyGeneratePasswordQuick,
    transientCopySearch,
    windowActionOnCopy
  };
};
var NA = "N/A";
var tryExec2 = async (command, trimLineBreaks = true) => {
  try {
    let cmd = command;
    if (platform === "windows") {
      cmd = `powershell -Command "${command}"`;
    } else {
      cmd = `PATH="$PATH:${(0, import_path3.dirname)(process.execPath)}" ${command}`;
    }
    const { stdout } = await exec2(cmd, { env: { BITWARDENCLI_APPDATA_DIR: supportPath2 } });
    const response = stdout.trim();
    if (trimLineBreaks) return response.replace(/\n|\r/g, "");
    return response;
  } catch (error) {
    captureException(`Failed to execute command: ${command}`, error);
    return NA;
  }
};
var getBwBinInfo = () => {
  try {
    const cliPathPref = (0, import_api19.getPreferenceValues)().cliPath;
    if (cliPathPref) {
      return { type: "custom", path: cliPathPref };
    }
    if (cliInfo.path.bin === cliInfo.path.downloadedBin) {
      return { type: "downloaded", path: cliInfo.path.downloadedBin };
    }
    return { type: "installed", path: cliInfo.path.installedBin };
  } catch (error) {
    return { type: NA, path: NA };
  }
};
var getHomebrewInfo = async () => {
  try {
    let path3 = "/opt/homebrew/bin/brew";
    if (!(0, import_fs7.existsSync)(path3)) path3 = "/usr/local/bin/brew";
    if (!(0, import_fs7.existsSync)(path3)) return { arch: NA, version: NA };
    const config = await tryExec2(`${path3} config`, false);
    if (config === NA) return { arch: NA, version: NA };
    const archValue = /HOMEBREW_PREFIX: (.+)/.exec(config)?.[1] || NA;
    const version = /HOMEBREW_VERSION: (.+)/.exec(config)?.[1] || NA;
    const arch = archValue !== NA ? archValue.includes("/opt/homebrew") ? "arm64" : "x86_64" : NA;
    return { arch, version };
  } catch (error) {
    return { arch: NA, version: NA };
  }
};
function BugReportCollectDataAction() {
  const collectData = async () => {
    const toast = await (0, import_api19.showToast)(import_api19.Toast.Style.Animated, "Collecting data...");
    try {
      const preferences = getSafePreferences();
      const bwInfo = getBwBinInfo();
      const [systemArch, osVersion, osBuildVersion, bwVersion] = await Promise.all([
        ...platform === "macos" ? [tryExec2("uname -m"), tryExec2("sw_vers -productVersion"), tryExec2("sw_vers -buildVersion")] : [
          tryExec2("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),
          tryExec2("(Get-CimInstance Win32_OperatingSystem).Caption"),
          tryExec2("(Get-CimInstance Win32_OperatingSystem).Version")
        ],
        tryExec2(`${bwInfo.path} --version`)
      ]);
      const data = {
        raycast: {
          version: import_api19.environment.raycastVersion
        },
        system: {
          arch: systemArch,
          version: osVersion,
          buildVersion: osBuildVersion
        },
        node: {
          arch: process.arch,
          version: process.version
        },
        cli: {
          type: bwInfo.type,
          version: bwVersion
        },
        preferences
      };
      if (platform === "macos") {
        const brewInfo = await getHomebrewInfo();
        data.homebrew = {
          arch: brewInfo.arch,
          version: brewInfo.version
        };
      }
      await import_api19.Clipboard.copy(JSON.stringify(data, null, 2));
      toast.style = import_api19.Toast.Style.Success;
      toast.title = "Data copied to clipboard";
    } catch (error) {
      toast.style = import_api19.Toast.Style.Failure;
      toast.title = "Failed to collect bug report data";
      captureException("Failed to collect bug report data", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime10.jsx)(import_api19.Action, { title: "Collect Bug Report Data", icon: import_api19.Icon.Bug, onAction: collectData });
}
var BugReportCollectDataAction_default = BugReportCollectDataAction;

// src/components/actions/BugReportOpenAction.tsx
var import_api20 = require("@raycast/api");
var import_jsx_runtime11 = require("react/jsx-runtime");
var BUG_REPORT_URL = "https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";
function BugReportOpenAction() {
  return /* @__PURE__ */ (0, import_jsx_runtime11.jsx)(import_api20.Action.OpenInBrowser, { title: "Open Bug Report", url: BUG_REPORT_URL });
}
var BugReportOpenAction_default = BugReportOpenAction;

// src/components/actions/CopyRuntimeErrorLog.tsx
var import_api21 = require("@raycast/api");
var import_jsx_runtime12 = require("react/jsx-runtime");
function CopyRuntimeErrorLog() {
  const copyErrors = async () => {
    const errorString = capturedExceptions.toString();
    if (errorString.length === 0) {
      return (0, import_api21.showToast)(import_api21.Toast.Style.Success, "No errors to copy");
    }
    await import_api21.Clipboard.copy(errorString);
    await (0, import_api21.showToast)(import_api21.Toast.Style.Success, "Errors copied to clipboard");
    await (0, import_api21.confirmAlert)({
      title: "Be careful with this information",
      message: "Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",
      primaryAction: { title: "Got it", style: import_api21.Alert.ActionStyle.Default }
    });
  };
  return /* @__PURE__ */ (0, import_jsx_runtime12.jsx)(import_api21.Action, { onAction: copyErrors, title: "Copy Last Errors", icon: import_api21.Icon.CopyClipboard, style: import_api21.Action.Style.Regular });
}
var CopyRuntimeErrorLog_default = CopyRuntimeErrorLog;

// src/components/actions/DebuggingBugReportingActionSection.tsx
var import_api22 = require("@raycast/api");

// src/utils/hooks/useCliVersion.ts
var import_react9 = require("react");
var getCliVersion = () => {
  const version = Cache.get(CACHE_KEYS.CLI_VERSION);
  if (version) return parseFloat(version);
  return -1;
};
var useCliVersion = () => {
  const [version, setVersion] = (0, import_react9.useState)(getCliVersion);
  useOnceEffect_default(() => {
    Cache.subscribe((key, value) => {
      if (value && key === CACHE_KEYS.CLI_VERSION) {
        setVersion(parseFloat(value) || -1);
      }
    });
  });
  return version;
};

// src/components/actions/DebuggingBugReportingActionSection.tsx
var import_jsx_runtime13 = require("react/jsx-runtime");
function DebuggingBugReportingActionSection() {
  const cliVersion = useCliVersion();
  return /* @__PURE__ */ (0, import_jsx_runtime13.jsxs)(import_api22.ActionPanel.Section, { title: `Debugging & Bug Reporting (CLI v${cliVersion})`, children: [
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(CopyRuntimeErrorLog_default, {}),
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(BugReportOpenAction_default, {}),
    /* @__PURE__ */ (0, import_jsx_runtime13.jsx)(BugReportCollectDataAction_default, {})
  ] });
}

// src/components/actions/VaultActionsSection.tsx
var import_api26 = require("@raycast/api");

// src/context/vault.tsx
var import_api25 = require("@raycast/api");
var import_react12 = require("react");

// src/components/searchVault/context/vaultListeners.tsx
var import_react10 = require("react");
var import_jsx_runtime14 = require("react/jsx-runtime");
var VaultListenersContext = (0, import_react10.createContext)(null);
var VaultListenersProvider = ({ children }) => {
  const listeners = (0, import_react10.useRef)(/* @__PURE__ */ new Map());
  const publishItems = (itemsOrError) => {
    if (itemsOrError instanceof FailedToLoadVaultItemsError) {
      listeners.current.forEach((listener) => listener(itemsOrError));
    } else {
      listeners.current.forEach((listener, itemId) => {
        const item = itemsOrError.find((item2) => item2.id === itemId);
        if (item) listener(item);
      });
    }
  };
  const subscribeItem = (itemId, listener) => {
    listeners.current.set(itemId, listener);
    return () => {
      listeners.current.delete(itemId);
    };
  };
  const memoizedValue = (0, import_react10.useMemo)(() => ({ listeners, publishItems, subscribeItem }), []);
  return /* @__PURE__ */ (0, import_jsx_runtime14.jsx)(VaultListenersContext.Provider, { value: memoizedValue, children });
};
var useVaultItemPublisher = () => {
  const context = (0, import_react10.useContext)(VaultListenersContext);
  if (context == null) throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");
  return context.publishItems;
};
var useVaultItemSubscriber = () => {
  const context = (0, import_react10.useContext)(VaultListenersContext);
  if (context == null) throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");
  return (itemId) => {
    let timeoutId;
    return new Promise((resolve, reject) => {
      const unsubscribe = context.subscribeItem(itemId, (itemOrError) => {
        try {
          unsubscribe();
          if (itemOrError instanceof FailedToLoadVaultItemsError) {
            throw itemOrError;
          }
          resolve(itemOrError);
          clearTimeout(timeoutId);
        } catch (error) {
          reject(error);
        }
      });
      timeoutId = setTimeout(() => {
        unsubscribe();
        reject(new SubscriberTimeoutError());
      }, 15e3);
    });
  };
};
var SubscriberTimeoutError = class extends Error {
  constructor() {
    super("Timed out waiting for item");
    this.name = "SubscriberTimeoutError";
  }
};
var vaultListeners_default = VaultListenersProvider;

// src/components/searchVault/utils/useVaultCaching.ts
var import_api24 = require("@raycast/api");

// src/components/searchVault/utils/caching.ts
function prepareItemsForCache(items) {
  return items.map((item) => ({
    object: item.object,
    id: item.id,
    organizationId: item.organizationId,
    folderId: item.folderId,
    type: item.type,
    name: item.name,
    revisionDate: item.revisionDate,
    creationDate: item.creationDate,
    deletedDate: item.deletedDate,
    favorite: item.favorite,
    reprompt: item.reprompt,
    collectionIds: item.collectionIds,
    secureNote: item.secureNote ? { type: item.secureNote.type } : void 0,
    // sensitive data below
    fields: cleanFields(item.fields),
    login: cleanLogin(item.login),
    identity: cleanIdentity(item.identity),
    card: cleanCard(item.card),
    passwordHistory: cleanPasswordHistory(item.passwordHistory),
    notes: hideIfDefined(item.notes),
    sshKey: cleanSshKey(item.sshKey)
  }));
}
function prepareFoldersForCache(folders) {
  return folders.map((folder) => ({ object: folder.object, id: folder.id, name: folder.name }));
}
function cleanFields(fields) {
  return fields?.map((field) => ({
    name: field.name,
    // necessary for display
    value: hideIfDefined(field.value),
    type: field.type,
    linkedId: field.linkedId
  }));
}
function cleanLogin(login) {
  if (!login) return void 0;
  return {
    username: login.username,
    // necessary for display
    uris: login.uris,
    password: hideIfDefined(login.password),
    passwordRevisionDate: hideIfDefined(login.passwordRevisionDate),
    totp: hideIfDefined(login.totp)
  };
}
function cleanIdentity(identity) {
  if (!identity) return void 0;
  return {
    title: hideIfDefined(identity.title),
    firstName: hideIfDefined(identity.firstName),
    middleName: hideIfDefined(identity.middleName),
    lastName: hideIfDefined(identity.lastName),
    address1: hideIfDefined(identity.address1),
    address2: hideIfDefined(identity.address2),
    address3: hideIfDefined(identity.address3),
    city: hideIfDefined(identity.city),
    state: hideIfDefined(identity.state),
    postalCode: hideIfDefined(identity.postalCode),
    country: hideIfDefined(identity.country),
    company: hideIfDefined(identity.company),
    email: hideIfDefined(identity.email),
    phone: hideIfDefined(identity.phone),
    ssn: hideIfDefined(identity.ssn),
    username: hideIfDefined(identity.username),
    passportNumber: hideIfDefined(identity.passportNumber),
    licenseNumber: hideIfDefined(identity.licenseNumber)
  };
}
function cleanCard(card) {
  if (!card) return void 0;
  return {
    brand: card.brand,
    cardholderName: hideIfDefined(card.cardholderName),
    number: hideIfDefined(card.number),
    expMonth: hideIfDefined(card.expMonth),
    expYear: hideIfDefined(card.expYear),
    code: hideIfDefined(card.code)
  };
}
function cleanPasswordHistory(passwordHistoryItems) {
  return passwordHistoryItems?.map((passwordHistory) => ({
    password: hideIfDefined(passwordHistory.password),
    lastUsedDate: hideIfDefined(passwordHistory.lastUsedDate)
  }));
}
function cleanSshKey(sshKey) {
  if (!sshKey) return void 0;
  return {
    publicKey: sshKey.publicKey,
    keyFingerprint: sshKey.keyFingerprint,
    privateKey: hideIfDefined(sshKey.privateKey)
  };
}
function hideIfDefined(value) {
  if (!value) return value;
  return SENSITIVE_VALUE_PLACEHOLDER;
}

// src/utils/hooks/useContentEncryptor.ts
var import_api23 = require("@raycast/api");
var import_crypto4 = require("crypto");
var import_react11 = require("react");
var ALGORITHM = "aes-256-cbc";
function useContentEncryptor() {
  const { clientSecret } = (0, import_api23.getPreferenceValues)();
  const cipherKeyBuffer = (0, import_react11.useMemo)(() => get32BitSecretKeyBuffer(clientSecret.trim()), [clientSecret]);
  const encrypt = (data) => {
    const ivBuffer = (0, import_crypto4.randomBytes)(16);
    const cipher = (0, import_crypto4.createCipheriv)(ALGORITHM, cipherKeyBuffer, ivBuffer);
    const encryptedContentBuffer = Buffer.concat([cipher.update(data), cipher.final()]);
    return { iv: ivBuffer.toString("hex"), content: encryptedContentBuffer.toString("hex") };
  };
  const decrypt = (content, iv) => {
    const decipher = (0, import_crypto4.createDecipheriv)(ALGORITHM, cipherKeyBuffer, Buffer.from(iv, "hex"));
    const decryptedContentBuffer = Buffer.concat([decipher.update(Buffer.from(content, "hex")), decipher.final()]);
    return decryptedContentBuffer.toString();
  };
  return { encrypt, decrypt };
}
function get32BitSecretKeyBuffer(key) {
  return Buffer.from((0, import_crypto4.createHash)("sha256").update(key).digest("base64").slice(0, 32));
}

// src/components/searchVault/utils/useVaultCaching.ts
function useVaultCaching() {
  const { encrypt, decrypt } = useContentEncryptor();
  const isCachingEnable = (0, import_api24.getPreferenceValues)().shouldCacheVaultItems;
  useOnceEffect_default(() => {
    if (!Cache.isEmpty) Cache.clear();
  }, !isCachingEnable);
  const getCachedVault = () => {
    try {
      if (!isCachingEnable) throw new VaultCachingNoEnabledError();
      const cachedIv = Cache.get(CACHE_KEYS.IV);
      const cachedEncryptedVault = Cache.get(CACHE_KEYS.VAULT);
      if (!cachedIv || !cachedEncryptedVault) throw new VaultCachingNoEnabledError();
      const decryptedVault = decrypt(cachedEncryptedVault, cachedIv);
      return JSON.parse(decryptedVault);
    } catch (error) {
      if (!(error instanceof VaultCachingNoEnabledError)) {
        captureException("Failed to decrypt cached vault", error);
      }
      return { items: [], folders: [] };
    }
  };
  const cacheVault = (items, folders) => {
    try {
      if (!isCachingEnable) throw new VaultCachingNoEnabledError();
      const vaultToEncrypt = JSON.stringify({
        items: prepareItemsForCache(items),
        folders: prepareFoldersForCache(folders)
      });
      const encryptedVault = encrypt(vaultToEncrypt);
      Cache.set(CACHE_KEYS.VAULT, encryptedVault.content);
      Cache.set(CACHE_KEYS.IV, encryptedVault.iv);
    } catch (error) {
      if (!(error instanceof VaultCachingNoEnabledError)) {
        captureException("Failed to cache vault", error);
      }
    }
  };
  return { getCachedVault, cacheVault };
}
var VaultCachingNoEnabledError = class extends Error {
};
var useVaultCaching_default = useVaultCaching;

// src/context/vault.tsx
var import_jsx_runtime15 = require("react/jsx-runtime");
var VaultContext = (0, import_react12.createContext)(null);
function getInitialState() {
  return { items: [], folders: [], isLoading: true };
}
var { syncOnLaunch } = (0, import_api25.getPreferenceValues)();
function VaultProvider(props) {
  const { children } = props;
  const session = useSession();
  const bitwarden = useBitwarden();
  const publishItems = useVaultItemPublisher();
  const { getCachedVault, cacheVault } = useVaultCaching_default();
  const [currentFolderId, setCurrentFolderId] = $c40d7eded38ca69c$export$14afb9e4c16377d3(CACHE_KEYS.CURRENT_FOLDER_ID, null);
  const [state, setState] = (0, import_react12.useReducer)(
    (previous, next) => ({ ...previous, ...next }),
    { ...getInitialState(), ...getCachedVault() }
  );
  useOnceEffect_default(() => {
    if (syncOnLaunch) {
      void syncItems({ isInitial: true });
    } else {
      void loadItems();
    }
  }, session.active && session.token);
  async function loadItems() {
    try {
      setState({ isLoading: true });
      let items = [];
      let folders = [];
      try {
        const [itemsResult, foldersResult] = await Promise.all([bitwarden.listItems(), bitwarden.listFolders()]);
        if (itemsResult.error) throw itemsResult.error;
        if (foldersResult.error) throw foldersResult.error;
        items = itemsResult.result;
        folders = foldersResult.result;
        items.sort(favoriteItemsFirstSorter);
      } catch (error) {
        publishItems(new FailedToLoadVaultItemsError());
        throw error;
      }
      setState({ items, folders });
      publishItems(items);
      cacheVault(items, folders);
    } catch (error) {
      await (0, import_api25.showToast)(import_api25.Toast.Style.Failure, "Failed to load vault items", getDisplayableErrorMessage(error));
      captureException("Failed to load vault items", error);
    } finally {
      setState({ isLoading: false });
    }
  }
  async function syncItems(props2) {
    const { isInitial = false } = props2 ?? {};
    const toast = await (0, import_api25.showToast)({
      title: "Syncing Vault...",
      message: isInitial ? "Background Task" : void 0,
      style: import_api25.Toast.Style.Animated
    });
    try {
      await bitwarden.sync();
      await loadItems();
      await toast.hide();
    } catch (error) {
      await bitwarden.logout();
      toast.style = import_api25.Toast.Style.Failure;
      toast.title = "Failed to sync vault";
      toast.message = getDisplayableErrorMessage(error);
    }
  }
  function setCurrentFolder(folderOrId) {
    setCurrentFolderId(typeof folderOrId === "string" ? folderOrId : folderOrId?.id);
  }
  function updateState(next) {
    const newState = typeof next === "function" ? next(state) : next;
    setState(newState);
    cacheVault(newState.items, newState.folders);
  }
  const memoizedValue = (0, import_react12.useMemo)(
    () => ({
      ...state,
      items: filterItemsByFolderId(state.items, currentFolderId),
      isEmpty: state.items.length == 0,
      isLoading: state.isLoading || session.isLoading,
      currentFolderId,
      syncItems,
      loadItems,
      setCurrentFolder,
      updateState
    }),
    [state, session.isLoading, currentFolderId, syncItems, loadItems, setCurrentFolder, updateState]
  );
  return /* @__PURE__ */ (0, import_jsx_runtime15.jsx)(VaultContext.Provider, { value: memoizedValue, children });
}
function filterItemsByFolderId(items, folderId) {
  if (!folderId || folderId === FOLDER_OPTIONS.ALL) return items;
  if (folderId === FOLDER_OPTIONS.NO_FOLDER) return items.filter((item) => item.folderId === null);
  return items.filter((item) => item.folderId === folderId);
}
function favoriteItemsFirstSorter(a, b) {
  if (a.favorite && b.favorite) return 0;
  return a.favorite ? -1 : 1;
}
var useVaultContext = () => {
  const context = (0, import_react12.useContext)(VaultContext);
  if (context == null) {
    throw new Error("useVault must be used within a VaultProvider");
  }
  return context;
};

// src/components/actions/VaultActionsSection.tsx
var import_jsx_runtime16 = require("react/jsx-runtime");
function VaultActionsSection() {
  const vault = useVaultContext();
  const bitwarden = useBitwarden();
  const handleLockVault = async () => {
    const toast = await (0, import_api26.showToast)(import_api26.Toast.Style.Animated, "Locking Vault...", "Please wait");
    await bitwarden.lock({ reason: VAULT_LOCK_MESSAGES.MANUAL });
    await toast.hide();
  };
  const handleLogoutVault = async () => {
    const toast = await (0, import_api26.showToast)({ title: "Logging Out...", style: import_api26.Toast.Style.Animated });
    try {
      await bitwarden.logout();
      await toast.hide();
    } catch (error) {
      toast.title = "Failed to logout";
      toast.style = import_api26.Toast.Style.Failure;
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime16.jsxs)(import_api26.ActionPanel.Section, { title: "Vault Actions", children: [
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(
      import_api26.Action,
      {
        title: "Sync Vault",
        shortcut: { macOS: { key: "r", modifiers: ["opt"] }, windows: { key: "r", modifiers: ["alt"] } },
        icon: import_api26.Icon.ArrowClockwise,
        onAction: vault.syncItems
      }
    ),
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(
      import_api26.Action,
      {
        icon: { source: "sf_symbols_lock.svg", tintColor: import_api26.Color.PrimaryText },
        title: "Lock Vault",
        shortcut: {
          macOS: { key: "l", modifiers: ["opt", "shift"] },
          windows: { key: "l", modifiers: ["alt", "shift"] }
        },
        onAction: handleLockVault
      }
    ),
    /* @__PURE__ */ (0, import_jsx_runtime16.jsx)(import_api26.Action, { style: import_api26.Action.Style.Destructive, title: "Logout", icon: import_api26.Icon.Logout, onAction: handleLogoutVault })
  ] });
}

// src/components/TroubleshootingGuide.tsx
var import_jsx_runtime17 = require("react/jsx-runtime");
var LINE_BREAK = "\n\n";
var CLI_INSTALLATION_HELP_URL = "https://bitwarden.com/help/cli/#download-and-install";
var getCodeBlock = (content) => `\`\`\`
${content}
\`\`\``;
var TroubleshootingGuide = ({ error }) => {
  const errorString = getErrorString(error);
  const localCliPath = (0, import_api27.getPreferenceValues)().cliPath;
  const isCliDownloadError = error instanceof EnsureCliBinError;
  const needsToInstallCli = localCliPath || error instanceof InstalledCLINotFoundError;
  const messages = [];
  if (needsToInstallCli && !isCliDownloadError) {
    messages.push("# \u26A0\uFE0F Bitwarden CLI not found");
  } else {
    messages.push("# \u{1F4A5} Whoops! Something went wrong");
  }
  if (isCliDownloadError) {
    messages.push(
      `We couldn't download the [Bitwarden CLI](${CLI_INSTALLATION_HELP_URL}), you can always install it on your machine.`
    );
  } else if (needsToInstallCli) {
    const cliPathString = localCliPath ? ` (${localCliPath})` : "";
    messages.push(
      `We couldn't find the [Bitwarden CLI](${CLI_INSTALLATION_HELP_URL}) installed on your machine${cliPathString}.`
    );
  } else {
    messages.push(`The \`${import_api27.environment.commandName}\` command crashed when we were not expecting it to.`);
  }
  messages.push(
    "> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."
  );
  messages.push(
    `**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${BUG_REPORT_URL}) to help us fix it.**`
  );
  if (errorString) {
    const isArchError = /incompatible architecture/gi.test(errorString);
    messages.push(
      ">## Technical details \u{1F913}",
      isArchError && `\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${platform === "macos" ? "Homebrew, " : ""}NodeJS, and Bitwarden CLI).`,
      getCodeBlock(errorString)
    );
  }
  return /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(
    import_api27.Detail,
    {
      markdown: messages.filter(Boolean).join(LINE_BREAK),
      actions: /* @__PURE__ */ (0, import_jsx_runtime17.jsxs)(import_api27.ActionPanel, { children: [
        /* @__PURE__ */ (0, import_jsx_runtime17.jsxs)(import_api27.ActionPanel.Section, { title: "Bug Report", children: [
          /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(BugReportOpenAction_default, {}),
          /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(BugReportCollectDataAction_default, {})
        ] }),
        needsToInstallCli && /* @__PURE__ */ (0, import_jsx_runtime17.jsx)(import_api27.Action.OpenInBrowser, { title: "Open Installation Guide", url: CLI_INSTALLATION_HELP_URL })
      ] })
    }
  );
};
var TroubleshootingGuide_default = TroubleshootingGuide;

// src/components/RootErrorBoundary.tsx
var import_jsx_runtime18 = require("react/jsx-runtime");
var RootErrorBoundary = class extends import_react13.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }
  static getDerivedStateFromError() {
    return { hasError: true };
  }
  async componentDidCatch(error, errorInfo) {
    if (error instanceof ManuallyThrownError) {
      this.setState((state) => ({ ...state, hasError: true, error: error.message }));
      await (0, import_api28.showToast)(import_api28.Toast.Style.Failure, error.message);
    } else {
      if (import_api28.environment.isDevelopment) {
        this.setState((state) => ({ ...state, hasError: true, error: error.message }));
      }
      console.error("Error:", error, errorInfo);
    }
  }
  render() {
    try {
      if (this.state.hasError) return /* @__PURE__ */ (0, import_jsx_runtime18.jsx)(TroubleshootingGuide_default, { error: this.state.error });
      return this.props.children;
    } catch {
      return /* @__PURE__ */ (0, import_jsx_runtime18.jsx)(TroubleshootingGuide_default, {});
    }
  }
};

// src/components/searchVault/Item.tsx
var import_api54 = require("@raycast/api");

// src/components/searchVault/ItemActionPanel.tsx
var import_api50 = require("@raycast/api");

// src/components/ComponentReverser.tsx
var import_react14 = require("react");
var import_jsx_runtime19 = require("react/jsx-runtime");
var ComponentReverser = (props) => {
  const children = import_react14.Children.toArray(props.children);
  if (props.reverse) children.reverse();
  return /* @__PURE__ */ (0, import_jsx_runtime19.jsx)(import_jsx_runtime19.Fragment, { children });
};
var ComponentReverser_default = ComponentReverser;

// src/components/searchVault/actions/CopyPasswordAction.tsx
var import_api31 = require("@raycast/api");

// src/components/searchVault/utils/useGetUpdatedVaultItem.ts
var import_api29 = require("@raycast/api");
function useGetUpdatedVaultItem() {
  const bitwarden = useBitwarden();
  const waitForItemLoaded = useVaultItemSubscriber();
  async function getItemFromVault(id) {
    const itemsResult = await bitwarden.getItem(id);
    if (itemsResult.error) throw itemsResult.error;
    return itemsResult.result;
  }
  async function getItem(possiblyCachedItem, selector = ((item) => item), loadingMessage) {
    const currentValue = selector(possiblyCachedItem);
    if (!valueHasSensitiveValuePlaceholder(currentValue)) return currentValue;
    const toast = loadingMessage ? await (0, import_api29.showToast)(import_api29.Toast.Style.Animated, loadingMessage) : void 0;
    const value = selector(
      await Promise.race([waitForItemLoaded(possiblyCachedItem.id), getItemFromVault(possiblyCachedItem.id)])
    );
    await toast?.hide();
    return value;
  }
  return getItem;
}
function valueHasSensitiveValuePlaceholder(value) {
  try {
    if (typeof value === "object") return JSON.stringify(value).includes(SENSITIVE_VALUE_PLACEHOLDER);
    if (typeof value === "string") return value === SENSITIVE_VALUE_PLACEHOLDER;
    return false;
  } catch (error) {
    return false;
  }
}
var useGetUpdatedVaultItem_default = useGetUpdatedVaultItem;

// src/utils/clipboard.ts
var import_api30 = require("@raycast/api");

// src/utils/strings.ts
var capitalize = (value, lowercaseRest = false) => {
  const firstLetter = value.charAt(0).toUpperCase();
  const rest = lowercaseRest ? value.slice(1).toLowerCase() : value.slice(1);
  return firstLetter + rest;
};

// src/utils/clipboard.ts
async function showCopySuccessMessage(title, message) {
  const action = (0, import_api30.getPreferenceValues)().windowActionOnCopy;
  const messageTitle = capitalize(title, true);
  if (action === "keepOpen") {
    await (0, import_api30.showToast)({ title: messageTitle, message, style: import_api30.Toast.Style.Success });
  } else if (action === "closeAndPopToRoot") {
    await (0, import_api30.showHUD)(messageTitle);
    await (0, import_api30.popToRoot)();
  } else {
    await (0, import_api30.showHUD)(messageTitle);
  }
}

// src/components/searchVault/actions/CopyPasswordAction.tsx
var import_jsx_runtime20 = require("react/jsx-runtime");
function CopyPasswordAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.login?.password) return null;
  const handleCopyPassword = async () => {
    try {
      const password = await getUpdatedVaultItem(selectedItem, (item) => item.login?.password, "Getting password...");
      if (password) {
        await import_api31.Clipboard.copy(password, { transient: getTransientCopyPreference("password") });
        await showCopySuccessMessage("Copied password to clipboard");
      }
    } catch (error) {
      await (0, import_api31.showToast)(import_api31.Toast.Style.Failure, "Failed to get password");
      captureException("Failed to copy password", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime20.jsx)(
    ActionWithReprompt_default,
    {
      title: "Copy Password",
      icon: import_api31.Icon.Key,
      onAction: handleCopyPassword,
      repromptDescription: `Copying the password of <${selectedItem.name}>`
    }
  );
}
var CopyPasswordAction_default = CopyPasswordAction;

// src/components/searchVault/actions/PastePasswordAction.tsx
var import_api33 = require("@raycast/api");

// src/utils/hooks/useFrontmostApplicationName.ts
var import_api32 = require("@raycast/api");
var import_react15 = require("react");
function useFrontmostApplicationName() {
  const [currentApplication, setCurrentApplication] = (0, import_react15.useState)(void 0);
  (0, import_react15.useEffect)(() => {
    void (0, import_api32.getFrontmostApplication)().then((application) => setCurrentApplication(application.name)).catch(() => setCurrentApplication(void 0));
  }, []);
  return currentApplication;
}

// src/components/searchVault/actions/PastePasswordAction.tsx
var import_jsx_runtime21 = require("react/jsx-runtime");
function PastePasswordAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  const actionTitle = useActionTitle();
  if (!selectedItem.login?.password) return null;
  const pastePassword = async () => {
    try {
      const password = await getUpdatedVaultItem(selectedItem, (item) => item.login?.password, "Getting password...");
      if (password) await import_api33.Clipboard.paste(password);
    } catch (error) {
      await (0, import_api33.showToast)(import_api33.Toast.Style.Failure, "Failed to get password");
      captureException("Failed to paste password", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime21.jsx)(
    ActionWithReprompt_default,
    {
      title: actionTitle,
      icon: import_api33.Icon.Window,
      onAction: pastePassword,
      repromptDescription: `Pasting the password of <${selectedItem.name}>`
    }
  );
}
function useActionTitle() {
  const currentApplication = useFrontmostApplicationName();
  return currentApplication ? `Paste Password into ${currentApplication}` : "Paste Password";
}
var PastePasswordAction_default = PastePasswordAction;

// src/components/searchVault/actions/CopyTotpAction.tsx
var import_api34 = require("@raycast/api");
var import_jsx_runtime22 = require("react/jsx-runtime");
function CopyTotpAction() {
  const bitwarden = useBitwarden();
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.login?.totp) return null;
  const copyTotp = async () => {
    const toast = await (0, import_api34.showToast)(import_api34.Toast.Style.Animated, "Getting TOTP code...");
    try {
      const id = await getUpdatedVaultItem(selectedItem, (item) => item.id);
      const { error, result: totp } = await bitwarden.getTotp(id);
      if (error) throw error;
      await toast?.hide();
      await import_api34.Clipboard.copy(totp, { transient: getTransientCopyPreference("other") });
      await showCopySuccessMessage("Copied code to clipboard");
    } catch (error) {
      toast.message = "Failed to get TOTP";
      toast.style = import_api34.Toast.Style.Failure;
      captureException("Failed to copy TOTP", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime22.jsx)(
    ActionWithReprompt_default,
    {
      title: "Copy TOTP",
      icon: import_api34.Icon.Clipboard,
      onAction: copyTotp,
      shortcut: { macOS: { key: "t", modifiers: ["opt"] }, windows: { key: "t", modifiers: ["alt"] } },
      repromptDescription: `Copying the TOTP of <${selectedItem.name}>`
    }
  );
}
var CopyTotpAction_default = CopyTotpAction;

// src/components/searchVault/actions/PasteTotpAction.tsx
var import_api35 = require("@raycast/api");
var import_jsx_runtime23 = require("react/jsx-runtime");
function PasteTotpAction() {
  const bitwarden = useBitwarden();
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  const currentApplicationName = useFrontmostApplicationName();
  if (!selectedItem.login?.totp) return null;
  const pasteTotp = async () => {
    const toast = await (0, import_api35.showToast)(import_api35.Toast.Style.Animated, "Getting TOTP code...");
    try {
      const id = await getUpdatedVaultItem(selectedItem, (item) => item.id);
      const { error, result: totp } = await bitwarden.getTotp(id);
      if (error) throw error;
      await toast?.hide();
      await import_api35.Clipboard.paste(totp);
    } catch (error) {
      toast.message = "Failed to get TOTP";
      toast.style = import_api35.Toast.Style.Failure;
      captureException("Failed to paste TOTP", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime23.jsx)(
    ActionWithReprompt_default,
    {
      title: currentApplicationName ? `Paste TOTP into ${currentApplicationName}` : "Paste TOTP",
      icon: import_api35.Icon.Window,
      onAction: pasteTotp,
      shortcut: {
        macOS: { key: "t", modifiers: ["opt", "shift"] },
        windows: { key: "t", modifiers: ["alt", "shift"] }
      },
      repromptDescription: `Pasting the TOTP of <${selectedItem.name}>`
    }
  );
}
var PasteTotpAction_default = PasteTotpAction;

// src/components/searchVault/actions/CopyUsernameAction.tsx
var import_api36 = require("@raycast/api");
var import_jsx_runtime24 = require("react/jsx-runtime");
function CopyUsernameAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.login?.username) return null;
  const handleCopyUsername = async () => {
    try {
      const username = await getUpdatedVaultItem(selectedItem, (item) => item.login?.username, "Getting username...");
      if (username) {
        await import_api36.Clipboard.copy(username, { transient: getTransientCopyPreference("other") });
        await showCopySuccessMessage("Copied username to clipboard");
      }
    } catch (error) {
      await (0, import_api36.showToast)(import_api36.Toast.Style.Failure, "Failed to get username");
      captureException("Failed to copy username", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime24.jsx)(
    import_api36.Action,
    {
      title: "Copy Username",
      icon: import_api36.Icon.Person,
      onAction: handleCopyUsername,
      shortcut: { macOS: { key: "u", modifiers: ["opt"] }, windows: { key: "u", modifiers: ["alt"] } }
    }
  );
}
var CopyUsernameAction_default = CopyUsernameAction;

// src/components/searchVault/actions/PasteUsernameAction.tsx
var import_api37 = require("@raycast/api");
var import_jsx_runtime25 = require("react/jsx-runtime");
function PasteUsernameAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  const currentApplication = useFrontmostApplicationName();
  if (!selectedItem.login?.username) return null;
  const pasteUsername = async () => {
    try {
      const username = await getUpdatedVaultItem(selectedItem, (item) => item.login?.username, "Getting username...");
      if (username) await import_api37.Clipboard.paste(username);
    } catch (error) {
      await (0, import_api37.showToast)(import_api37.Toast.Style.Failure, "Failed to get username");
      captureException("Failed to paste username", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime25.jsx)(
    ActionWithReprompt_default,
    {
      title: currentApplication ? `Paste Username into ${currentApplication}` : "Paste Username",
      icon: import_api37.Icon.Window,
      onAction: pasteUsername,
      repromptDescription: `Pasting the username of <${selectedItem.name}>`,
      shortcut: {
        macOS: { key: "u", modifiers: ["cmd", "opt"] },
        windows: { key: "u", modifiers: ["ctrl", "alt"] }
      }
    }
  );
}
var PasteUsernameAction_default = PasteUsernameAction;

// src/components/searchVault/actions/OpenUrlInBrowserAction.tsx
var import_api38 = require("@raycast/api");
var import_jsx_runtime26 = require("react/jsx-runtime");
function OpenUrlInBrowserAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!getUri(selectedItem)) return null;
  const handleOpenUrlInBrowser = async () => {
    try {
      const mainUri = await getUpdatedVaultItem(selectedItem, getUri, "Getting URL...");
      if (mainUri) await (0, import_api38.open)(mainUri);
    } catch (error) {
      await (0, import_api38.showToast)(import_api38.Toast.Style.Failure, "Failed to get URL");
      captureException("Failed to open URL in browser", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime26.jsx)(
    import_api38.Action,
    {
      title: "Open in Browser",
      onAction: handleOpenUrlInBrowser,
      icon: import_api38.Icon.Globe,
      shortcut: { macOS: { key: "o", modifiers: ["opt"] }, windows: { key: "o", modifiers: ["alt"] } }
    }
  );
}
function getUri(item) {
  return item.login?.uris?.[0]?.uri;
}
var OpenUrlInBrowserAction_default = OpenUrlInBrowserAction;

// src/components/searchVault/actions/ShowCardDetailsAction.tsx
var import_api40 = require("@raycast/api");

// src/utils/cards.ts
var MONTH_NUMBER_TO_LABEL_MAP = {
  1: "01 - January",
  2: "02 - February",
  3: "03 - March",
  4: "04 - April",
  5: "05 - May",
  6: "06 - June",
  7: "07 - July",
  8: "08 - August",
  9: "09 - September",
  10: "10 - October",
  11: "11 - November",
  12: "12 - December"
};
var CARD_MAPPER = {
  expMonth: (value) => MONTH_NUMBER_TO_LABEL_MAP[value] ?? value
};
var getCardValue = (key, value) => {
  return CARD_MAPPER[key]?.(value) ?? value;
};
function getCardDetailsMarkdown(itemName, card) {
  return `# \u{1F4B3} ${itemName}
&nbsp;
| ${platform === "macos" ? "\u2325" : "Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(card).map(([key, value], index) => {
    if (!value) return null;
    const label = CARD_KEY_LABEL[key];
    const shortcutKey = SHORTCUT_KEY_SEQUENCE[index];
    return `| ${shortcutKey ? `${shortcutKey}.` : "&nbsp;"}	**${label}** | ${getCardValue(key, value)} |`;
  }).filter(Boolean).join("\n")}
`;
}
function getCardDetailsCopyValue(card) {
  return Object.entries(card).map(([key, value]) => value ? `${CARD_KEY_LABEL[key]}: ${getCardValue(key, value)}` : null).filter(Boolean).join("\n");
}
var CARD_KEY_LABEL_KEYS = Object.keys(CARD_KEY_LABEL);
function cardBitwardenPageFieldOrderSorter([a], [b]) {
  const aIndex = CARD_KEY_LABEL_KEYS.indexOf(Array.isArray(a) ? a[0] : a);
  const bIndex = CARD_KEY_LABEL_KEYS.indexOf(Array.isArray(b) ? b[0] : b);
  return aIndex - bIndex;
}
var BASE_CARD_IMAGE_URL = "https://vault.bitwarden.com/images";
var CARD_BRANDS_TO_IMAGE_URL_MAP = {
  [CARD_BRANDS.VISA]: `${BASE_CARD_IMAGE_URL}/visa-light.png`,
  [CARD_BRANDS.MASTERCARD]: `${BASE_CARD_IMAGE_URL}/mastercard-light.png`,
  [CARD_BRANDS.AMEX]: `${BASE_CARD_IMAGE_URL}/amex-light.png`,
  [CARD_BRANDS.DISCOVER]: `${BASE_CARD_IMAGE_URL}/discover-light.png`,
  [CARD_BRANDS.DINERS_CLUB]: `${BASE_CARD_IMAGE_URL}/diners_club-light.png`,
  [CARD_BRANDS.JCB]: `${BASE_CARD_IMAGE_URL}/jcb-light.png`,
  [CARD_BRANDS.MAESTRO]: `${BASE_CARD_IMAGE_URL}/maestro-light.png`,
  [CARD_BRANDS.UNION_PAY]: `${BASE_CARD_IMAGE_URL}/union_pay-light.png`,
  [CARD_BRANDS.RU_PAY]: `${BASE_CARD_IMAGE_URL}/ru_pay-light.png`
};
function getCardImageUrl(brand) {
  return CARD_BRANDS_TO_IMAGE_URL_MAP[brand];
}

// src/components/searchVault/actions/shared/ShowDetailsScreen.tsx
var import_api39 = require("@raycast/api");
var import_react16 = require("react");
var import_jsx_runtime27 = require("react/jsx-runtime");
function ShowDetailsScreen(props) {
  const { itemName, details, sorter, label, getMarkdown, getCopyValue, titleMap } = props;
  const capitalizedLabel = capitalize(label, true);
  const handleCopyField = (value) => async () => {
    await import_api39.Clipboard.copy(value, { transient: getTransientCopyPreference("other") });
    await showCopySuccessMessage("Copied details to clipboard");
  };
  const { sortedDetails, sortedDetailsEntries } = (0, import_react16.useMemo)(() => {
    if (!sorter) return { sortedDetails: details, sortedDetailsEntries: Object.entries(details) };
    const sortedEntries = Object.entries(details).sort(sorter);
    return {
      sortedDetails: Object.fromEntries(sortedEntries),
      sortedDetailsEntries: sortedEntries
    };
  }, [details]);
  const copyDetails = async () => {
    await import_api39.Clipboard.copy(getCopyValue(sortedDetails), { transient: getTransientCopyPreference("other") });
    await showCopySuccessMessage(`Copied ${label} details to clipboard`);
  };
  return /* @__PURE__ */ (0, import_jsx_runtime27.jsx)(
    import_api39.Detail,
    {
      markdown: getMarkdown(itemName, sortedDetails),
      actions: /* @__PURE__ */ (0, import_jsx_runtime27.jsxs)(import_api39.ActionPanel, { children: [
        /* @__PURE__ */ (0, import_jsx_runtime27.jsx)(import_api39.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime27.jsx)(import_api39.Action, { title: `Copy ${capitalizedLabel} Details`, onAction: copyDetails }) }),
        /* @__PURE__ */ (0, import_jsx_runtime27.jsx)(import_api39.ActionPanel.Section, { title: `${capitalizedLabel} Fields`, children: sortedDetailsEntries.map(([fieldKey, content], index) => {
          if (!content) return null;
          const shortcutKey = SHORTCUT_KEY_SEQUENCE[index];
          return /* @__PURE__ */ (0, import_jsx_runtime27.jsx)(
            import_api39.Action,
            {
              title: `Copy ${getTitle(fieldKey, titleMap)}`,
              icon: import_api39.Icon.Clipboard,
              onAction: handleCopyField(content),
              shortcut: shortcutKey ? {
                macOS: { key: shortcutKey, modifiers: ["opt"] },
                windows: { key: shortcutKey, modifiers: ["alt"] }
              } : void 0
            },
            `${index}-${fieldKey}`
          );
        }) })
      ] })
    }
  );
}
function getTitle(fieldKey, titleMap) {
  if (!titleMap) return capitalize(fieldKey, true);
  if (typeof titleMap === "function") return titleMap(fieldKey);
  return titleMap[fieldKey];
}
var ShowDetailsScreen_default = ShowDetailsScreen;

// src/components/searchVault/actions/ShowCardDetailsAction.tsx
var import_jsx_runtime28 = require("react/jsx-runtime");
function ShowCardDetailsAction() {
  const { push } = (0, import_api40.useNavigation)();
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.card) return null;
  const showCardDetails = async () => {
    try {
      const card = await getUpdatedVaultItem(selectedItem, (item) => item.card, "Getting card details...");
      if (card) {
        push(
          /* @__PURE__ */ (0, import_jsx_runtime28.jsx)(
            ShowDetailsScreen_default,
            {
              label: "Card",
              details: card,
              itemName: selectedItem.name,
              titleMap: CARD_KEY_LABEL,
              sorter: cardBitwardenPageFieldOrderSorter,
              getMarkdown: getCardDetailsMarkdown,
              getCopyValue: getCardDetailsCopyValue
            }
          )
        );
      }
    } catch (error) {
      await (0, import_api40.showToast)(import_api40.Toast.Style.Failure, "Failed to get card details");
      captureException("Failed to show card details", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime28.jsx)(
    ActionWithReprompt_default,
    {
      title: "Show Card",
      icon: import_api40.Icon.Eye,
      onAction: showCardDetails,
      repromptDescription: `Showing the card details of <${selectedItem.name}>`
    }
  );
}
var ShowCardDetailsAction_default = ShowCardDetailsAction;

// src/components/searchVault/actions/ShowIdentityDetailsAction.tsx
var import_api41 = require("@raycast/api");

// src/utils/identity.ts
function getIdentityDetailsMarkdown(itemName, identity) {
  return `# \u{1FAAA} ${itemName}
&nbsp;
| ${platform === "macos" ? "\u2325" : "Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(identity).map(([key, value], index) => {
    if (!value) return null;
    const label = IDENTITY_KEY_LABEL[key];
    const shortcutKey = SHORTCUT_KEY_SEQUENCE[index];
    return `| ${shortcutKey ? `${shortcutKey}.` : "&nbsp;"}	**${label}** | ${value} |`;
  }).filter(Boolean).join("\n")}
`;
}
function getIdentityDetailsCopyValue(identity) {
  return Object.entries(identity).map(([key, value]) => value ? `${IDENTITY_KEY_LABEL[key]}: ${value}` : null).filter(Boolean).join("\n");
}
var IDENTITY_KEY_LABEL_KEYS = Object.keys(IDENTITY_KEY_LABEL);
function identityFormOrderSorter([a], [b]) {
  const aIndex = IDENTITY_KEY_LABEL_KEYS.indexOf(Array.isArray(a) ? a[0] : a);
  const bIndex = IDENTITY_KEY_LABEL_KEYS.indexOf(Array.isArray(b) ? b[0] : b);
  return aIndex - bIndex;
}

// src/components/searchVault/actions/ShowIdentityDetailsAction.tsx
var import_jsx_runtime29 = require("react/jsx-runtime");
function ShowIdentityDetailsAction() {
  const { push } = (0, import_api41.useNavigation)();
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.identity) return null;
  const showIdentityDetails = async () => {
    try {
      const identity = await getUpdatedVaultItem(selectedItem, (item) => item.identity, "Getting identity details...");
      if (identity) {
        push(
          /* @__PURE__ */ (0, import_jsx_runtime29.jsx)(
            ShowDetailsScreen_default,
            {
              label: "Identity",
              details: identity,
              itemName: selectedItem.name,
              titleMap: IDENTITY_KEY_LABEL,
              sorter: identityFormOrderSorter,
              getMarkdown: getIdentityDetailsMarkdown,
              getCopyValue: getIdentityDetailsCopyValue
            }
          )
        );
      }
    } catch (error) {
      await (0, import_api41.showToast)(import_api41.Toast.Style.Failure, "Failed to get identity details");
      captureException("Failed to show identity details", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime29.jsx)(
    ActionWithReprompt_default,
    {
      title: "Show Identity",
      icon: import_api41.Icon.Eye,
      onAction: showIdentityDetails,
      repromptDescription: `Showing the identity details of <${selectedItem.name}>`
    }
  );
}
var ShowIdentityDetailsAction_default = ShowIdentityDetailsAction;

// src/components/searchVault/actions/ShowNotesAction.tsx
var import_api42 = require("@raycast/api");
var import_jsx_runtime30 = require("react/jsx-runtime");
function ShowNotesAction() {
  const { push } = (0, import_api42.useNavigation)();
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.notes) return null;
  const showNotes = async () => {
    try {
      const notes = await getUpdatedVaultItem(selectedItem, (item) => item.notes, "Getting notes...");
      if (notes) push(/* @__PURE__ */ (0, import_jsx_runtime30.jsx)(DetailsScreen, { itemName: selectedItem.name, notes }));
    } catch (error) {
      await (0, import_api42.showToast)(import_api42.Toast.Style.Failure, "Failed to get notes");
      captureException("Failed to show notes", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime30.jsx)(
    ActionWithReprompt_default,
    {
      title: "Show Notes",
      icon: import_api42.Icon.Eye,
      onAction: showNotes,
      repromptDescription: `Showing the notes of <${selectedItem.name}>`,
      shortcut: { macOS: { key: "n", modifiers: ["opt"] }, windows: { key: "n", modifiers: ["alt"] } }
    }
  );
}
function DetailsScreen({ itemName, notes }) {
  const handleCopy = async () => {
    await import_api42.Clipboard.copy(notes, { transient: getTransientCopyPreference("other") });
    await showCopySuccessMessage("Copied notes to clipboard");
  };
  return /* @__PURE__ */ (0, import_jsx_runtime30.jsx)(
    import_api42.Detail,
    {
      markdown: getNotesDetailsMarkdown(itemName, notes),
      actions: /* @__PURE__ */ (0, import_jsx_runtime30.jsx)(import_api42.ActionPanel, { children: /* @__PURE__ */ (0, import_jsx_runtime30.jsx)(import_api42.Action, { title: "Copy Notes", onAction: handleCopy, icon: import_api42.Icon.Clipboard }) })
    }
  );
}
function getNotesDetailsMarkdown(itemName, notes) {
  return `# \u{1F4C4} ${itemName}
&nbsp;
\`\`\`
${notes}
\`\`\`
`;
}
var ShowNotesAction_default = ShowNotesAction;

// src/components/searchVault/actions/shared/CopyObjectFieldsActions.tsx
var import_api43 = require("@raycast/api");
var import_jsx_runtime31 = require("react/jsx-runtime");
function CopyObjectStringFieldsActions({
  selector,
  sorter,
  labelMapper
}) {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  const selectedItemEntries = getItemObjectEntries(selectedItem, selector, sorter);
  if (!selectedItemEntries) return null;
  const handleCopyField = (field, label) => async () => {
    try {
      const value = await getUpdatedVaultItem(selectedItem, (item) => selector(item)?.[field], `Getting ${field}...`);
      if (typeof value !== "string") throw new Error(`Value of ${field} is not a string`);
      if (value) {
        await import_api43.Clipboard.copy(value, { transient: getTransientCopyPreference("other") });
        await showCopySuccessMessage(`Copied ${label} to clipboard`);
      }
    } catch (error) {
      await (0, import_api43.showToast)(import_api43.Toast.Style.Failure, `Failed to copy ${field}`);
      captureException(`Failed to copy ${field}`, error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime31.jsx)(import_jsx_runtime31.Fragment, { children: selectedItemEntries.map(([key, value], index) => {
    if (!value || typeof value !== "string") return null;
    const label = labelMapper?.(key) ?? capitalize(key);
    return /* @__PURE__ */ (0, import_jsx_runtime31.jsx)(
      ActionWithReprompt_default,
      {
        title: `Copy ${label}`,
        icon: import_api43.Icon.Clipboard,
        onAction: handleCopyField(key, label),
        repromptDescription: `Copying the ${label} of <${selectedItem.name}>`
      },
      `${index}-${key}`
    );
  }) });
}
function getItemObjectEntries(selectedItem, selector, sorter) {
  const value = selector(selectedItem);
  if (value == null) return null;
  const itemEntries = Object.entries(value);
  if (sorter) itemEntries.sort(sorter);
  return itemEntries;
}
var CopyObjectFieldsActions_default = CopyObjectStringFieldsActions;

// src/components/searchVault/actions/CopyIdentityFieldsActions.tsx
var import_jsx_runtime32 = require("react/jsx-runtime");
function CopyIdentityFieldsActions() {
  return /* @__PURE__ */ (0, import_jsx_runtime32.jsx)(
    CopyObjectFieldsActions_default,
    {
      selector: (item) => item.identity,
      sorter: identityFormOrderSorter,
      labelMapper: (field) => IDENTITY_KEY_LABEL[field]
    }
  );
}
var CopyIdentityFieldsActions_default = CopyIdentityFieldsActions;

// src/components/searchVault/actions/CopyCardFieldsActions.tsx
var import_jsx_runtime33 = require("react/jsx-runtime");
function CopyCardFieldsActions() {
  return /* @__PURE__ */ (0, import_jsx_runtime33.jsx)(
    CopyObjectFieldsActions_default,
    {
      selector: (item) => item.card,
      sorter: cardBitwardenPageFieldOrderSorter,
      labelMapper: (field) => CARD_KEY_LABEL[field]
    }
  );
}
var CopyCardFieldsActions_default = CopyCardFieldsActions;

// src/components/searchVault/actions/CopyLoginUrisActions.tsx
var import_jsx_runtime34 = require("react/jsx-runtime");
function CopyLoginUrisActions() {
  const getUriMap = (item) => {
    return item.login?.uris?.reduce((result, uri, index) => {
      if (!uri.uri) return result;
      result[`URI ${index + 1}`] = uri.uri;
      return result;
    }, {}) ?? {};
  };
  return /* @__PURE__ */ (0, import_jsx_runtime34.jsx)(CopyObjectFieldsActions_default, { selector: getUriMap });
}
var CopyLoginUrisActions_default = CopyLoginUrisActions;

// src/components/searchVault/actions/CopyNotesAction.tsx
var import_api44 = require("@raycast/api");
var import_jsx_runtime35 = require("react/jsx-runtime");

// src/components/searchVault/actions/CopyCustomFieldsActions.tsx
var import_jsx_runtime36 = require("react/jsx-runtime");
function CopyCustomFieldsActions() {
  const getFieldMap = (item) => {
    return Object.fromEntries(item.fields?.map((field) => [field.name, field.value]) || []);
  };
  return /* @__PURE__ */ (0, import_jsx_runtime36.jsx)(CopyObjectFieldsActions_default, { selector: getFieldMap });
}
var CopyCustomFieldsActions_default = CopyCustomFieldsActions;

// src/components/searchVault/actions/CopyPublicKeyAction.tsx
var import_api45 = require("@raycast/api");
var import_jsx_runtime37 = require("react/jsx-runtime");
function CopyPublicKeyAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.sshKey?.publicKey) return null;
  const handleCopyPublicKey = async () => {
    try {
      const publicKey = await getUpdatedVaultItem(
        selectedItem,
        (item) => item.sshKey?.publicKey,
        "Getting public key..."
      );
      if (publicKey) {
        await import_api45.Clipboard.copy(publicKey, { transient: getTransientCopyPreference("other") });
        await showCopySuccessMessage("Copied public key to clipboard");
      }
    } catch (error) {
      await (0, import_api45.showToast)(import_api45.Toast.Style.Failure, "Failed to get public key");
      captureException("Failed to copy public key", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime37.jsx)(
    ActionWithReprompt_default,
    {
      title: "Copy Public Key",
      icon: import_api45.Icon.Key,
      onAction: handleCopyPublicKey,
      repromptDescription: `Copying the public key of <${selectedItem.name}>`
    }
  );
}
var CopyPublicKeyAction_default = CopyPublicKeyAction;

// src/components/searchVault/actions/FavoriteItemActions.tsx
var import_api47 = require("@raycast/api");

// src/context/favorites.tsx
var import_api46 = require("@raycast/api");
var import_react18 = require("react");

// src/utils/hooks/useAsyncEffect.ts
var import_react17 = require("react");
function useAsyncEffect(effect, deps) {
  (0, import_react17.useEffect)(() => {
    void effect();
  }, deps);
}

// src/context/favorites.tsx
var import_jsx_runtime38 = require("react/jsx-runtime");
var FavoritesContext = (0, import_react18.createContext)({});
function FavoritesProvider({ children }) {
  const { items } = useVaultContext();
  const [favoriteOrder, setFavoriteOrder] = (0, import_react18.useState)();
  useAsyncEffect(async () => {
    const serializedFavoriteOrder = await getSavedFavoriteOrder();
    setFavoriteOrder(serializedFavoriteOrder ?? []);
  }, []);
  (0, import_react18.useEffect)(() => {
    if (!favoriteOrder) return;
    const cleanFavoriteOrder = items.flatMap((item) => {
      if (!item.favorite) return [];
      return !favoriteOrder.some((fid) => fid === item.id) ? [item.id] : [];
    });
    if (cleanFavoriteOrder.length === 0) return;
    setFavoriteOrder(Array.from(new Set(cleanFavoriteOrder)));
  }, [items, !!favoriteOrder]);
  (0, import_react18.useEffect)(() => {
    if (!favoriteOrder) return;
    void persistFavoriteOrder(favoriteOrder);
  }, [favoriteOrder]);
  const toggleFavorite = (item) => {
    setFavoriteOrder((order = []) => {
      if (!favoriteOrder?.includes(item.id)) return [item.id, ...order];
      return order.filter((fid) => fid !== item.id);
    });
  };
  const moveFavorite = ({ id }, direction) => {
    if (!favoriteOrder) return;
    const currentPosition = favoriteOrder.indexOf(id);
    if (currentPosition === -1) return;
    const newPosition = currentPosition + (direction === "up" ? -1 : 1);
    if (newPosition >= 0 && newPosition < favoriteOrder.length) {
      const newFavoriteOrder = favoriteOrder.slice(0);
      newFavoriteOrder.splice(currentPosition, 1);
      newFavoriteOrder.splice(newPosition, 0, id);
      setFavoriteOrder(newFavoriteOrder);
    }
  };
  if (!favoriteOrder) return /* @__PURE__ */ (0, import_jsx_runtime38.jsx)(VaultLoadingFallback, {});
  return /* @__PURE__ */ (0, import_jsx_runtime38.jsx)(FavoritesContext.Provider, { value: { favoriteOrder, setFavoriteOrder, toggleFavorite, moveFavorite }, children });
}
var useFavoritesContext = () => {
  const context = (0, import_react18.useContext)(FavoritesContext);
  if (!context) throw new Error("useFavoritesContext must be used within a FavoritesProvider");
  return context;
};
async function getSavedFavoriteOrder() {
  try {
    const serializedFavoriteOrder = await import_api46.LocalStorage.getItem(LOCAL_STORAGE_KEY.VAULT_FAVORITE_ORDER);
    return serializedFavoriteOrder ? JSON.parse(serializedFavoriteOrder) : void 0;
  } catch (error) {
    captureException("Failed to get favorite order from local storage", error);
    return void 0;
  }
}
async function persistFavoriteOrder(order) {
  try {
    await import_api46.LocalStorage.setItem(LOCAL_STORAGE_KEY.VAULT_FAVORITE_ORDER, JSON.stringify(order));
  } catch (error) {
    captureException("Failed to persist favorite order to local storage", error);
  }
}
function useSeparateFavoriteItems(items) {
  const { favoriteOrder } = useFavoritesContext();
  return (0, import_react18.useMemo)(() => {
    const sectionedItems = items.reduce(
      (result, item) => {
        const favoritePosition = favoriteOrder.indexOf(item.id);
        if (item.favorite || favoritePosition !== -1) {
          result.favoriteItems.push({ ...item, listOrder: favoritePosition ?? Number.MAX_SAFE_INTEGER });
        } else {
          result.nonFavoriteItems.push(item);
        }
        return result;
      },
      { favoriteItems: [], nonFavoriteItems: [] }
    );
    sectionedItems.favoriteItems.sort((a, b) => a.listOrder - b.listOrder);
    return sectionedItems;
  }, [items, favoriteOrder]);
}

// src/components/searchVault/actions/FavoriteItemActions.tsx
var import_jsx_runtime39 = require("react/jsx-runtime");
function FavoriteItemActions() {
  const selectedItem = useSelectedVaultItem();
  const { favoriteOrder, toggleFavorite, moveFavorite } = useFavoritesContext();
  const isBitwardenFavorite = selectedItem.favorite;
  const isLocalFavorite = favoriteOrder.includes(selectedItem.id);
  const handleToggleFavorite = async () => {
    try {
      await toggleFavorite(selectedItem);
    } catch (error) {
      await (0, import_api47.showToast)(import_api47.Toast.Style.Failure, "Failed to toggle favorite \u2639\uFE0F");
      captureException("Failed to toggle favorite", error);
    }
  };
  const handleMoveFavorite = (dir) => () => moveFavorite(selectedItem, dir);
  return /* @__PURE__ */ (0, import_jsx_runtime39.jsxs)(import_jsx_runtime39.Fragment, { children: [
    !isBitwardenFavorite && /* @__PURE__ */ (0, import_jsx_runtime39.jsx)(
      import_api47.Action,
      {
        title: isLocalFavorite ? "Remove Favorite" : "Mark As Favorite",
        onAction: handleToggleFavorite,
        icon: isLocalFavorite ? import_api47.Icon.StarDisabled : import_api47.Icon.Star,
        shortcut: { macOS: { key: "f", modifiers: ["opt"] }, windows: { key: "f", modifiers: ["alt"] } }
      }
    ),
    (isBitwardenFavorite || isLocalFavorite) && /* @__PURE__ */ (0, import_jsx_runtime39.jsxs)(import_jsx_runtime39.Fragment, { children: [
      /* @__PURE__ */ (0, import_jsx_runtime39.jsx)(
        import_api47.Action,
        {
          title: "Move Favorite Up",
          onAction: handleMoveFavorite("up"),
          icon: import_api47.Icon.ArrowUpCircleFilled,
          shortcut: {
            macOS: { key: "arrowUp", modifiers: ["opt", "shift"] },
            windows: { key: "arrowUp", modifiers: ["alt", "shift"] }
          }
        }
      ),
      /* @__PURE__ */ (0, import_jsx_runtime39.jsx)(
        import_api47.Action,
        {
          title: "Move Favorite Down",
          onAction: handleMoveFavorite("down"),
          icon: import_api47.Icon.ArrowDownCircleFilled,
          shortcut: {
            macOS: { key: "arrowDown", modifiers: ["opt", "shift"] },
            windows: { key: "arrowDown", modifiers: ["alt", "shift"] }
          }
        }
      )
    ] })
  ] });
}
var FavoriteItemActions_default = FavoriteItemActions;

// src/components/searchVault/actions/CopyKeyFingerprintAction.tsx
var import_api48 = require("@raycast/api");
var import_jsx_runtime40 = require("react/jsx-runtime");
function CopyKeyFingerprintAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.sshKey?.keyFingerprint) return null;
  const handleCopyKeyFingerprint = async () => {
    try {
      const keyFingerprint = await getUpdatedVaultItem(
        selectedItem,
        (item) => item.sshKey?.keyFingerprint,
        "Getting key fingerprint..."
      );
      if (keyFingerprint) {
        await import_api48.Clipboard.copy(keyFingerprint, { transient: getTransientCopyPreference("other") });
        await showCopySuccessMessage("Copied key fingerprint to clipboard");
      }
    } catch (error) {
      await (0, import_api48.showToast)(import_api48.Toast.Style.Failure, "Failed to get key fingerprint");
      captureException("Failed to copy key fingerprint", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime40.jsx)(
    ActionWithReprompt_default,
    {
      title: "Copy Key Fingerprint",
      icon: import_api48.Icon.Key,
      onAction: handleCopyKeyFingerprint,
      repromptDescription: `Copying the key fingerprint of <${selectedItem.name}>`
    }
  );
}
var CopyKeyFingerprintAction_default = CopyKeyFingerprintAction;

// src/components/searchVault/actions/CopyPrivateKeyAction.tsx
var import_api49 = require("@raycast/api");
var import_jsx_runtime41 = require("react/jsx-runtime");
function CopyPrivateKeyAction() {
  const selectedItem = useSelectedVaultItem();
  const getUpdatedVaultItem = useGetUpdatedVaultItem_default();
  if (!selectedItem.sshKey?.privateKey) return null;
  const handleCopyPrivateKey = async () => {
    try {
      const privateKey = await getUpdatedVaultItem(
        selectedItem,
        (item) => item.sshKey?.privateKey,
        "Getting private key..."
      );
      if (privateKey) {
        await import_api49.Clipboard.copy(privateKey, { transient: getTransientCopyPreference("other") });
        await showCopySuccessMessage("Copied private key to clipboard");
      }
    } catch (error) {
      await (0, import_api49.showToast)(import_api49.Toast.Style.Failure, "Failed to get private key");
      captureException("Failed to copy private key", error);
    }
  };
  return /* @__PURE__ */ (0, import_jsx_runtime41.jsx)(
    ActionWithReprompt_default,
    {
      title: "Copy Private Key",
      icon: import_api49.Icon.Key,
      onAction: handleCopyPrivateKey,
      repromptDescription: `Copying the private key of <${selectedItem.name}>`
    }
  );
}
var CopyPrivateKeyAction_default = CopyPrivateKeyAction;

// src/components/searchVault/ItemActionPanel.tsx
var import_jsx_runtime42 = require("react/jsx-runtime");
var { primaryAction } = (0, import_api50.getPreferenceValues)();
var VaultItemActionPanel = () => {
  const { type, id } = useSelectedVaultItem();
  return /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(import_api50.ActionPanel, { children: [
    type === 1 /* LOGIN */ && /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(import_api50.ActionPanel.Section, { children: [
      /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(ComponentReverser_default, { reverse: primaryAction === "paste", children: [
        /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyPasswordAction_default, {}),
        /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(PastePasswordAction_default, {})
      ] }),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyTotpAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(PasteTotpAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyUsernameAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(PasteUsernameAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(OpenUrlInBrowserAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyLoginUrisActions_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowNotesAction_default, {})
    ] }),
    type === 3 /* CARD */ && /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(import_jsx_runtime42.Fragment, { children: [
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowCardDetailsAction_default, {}) }),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { title: "Card Fields", children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyCardFieldsActions_default, {}) }),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowNotesAction_default, {}) })
    ] }),
    type === 4 /* IDENTITY */ && /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(import_jsx_runtime42.Fragment, { children: [
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowIdentityDetailsAction_default, {}) }),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { title: "Identity Fields", children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyIdentityFieldsActions_default, {}) }),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowNotesAction_default, {}) })
    ] }),
    type === 2 /* NOTE */ && /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(ShowNotesAction_default, {}) }),
    type === 5 /* SSH_KEY */ && /* @__PURE__ */ (0, import_jsx_runtime42.jsxs)(import_api50.ActionPanel.Section, { children: [
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyPublicKeyAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyKeyFingerprintAction_default, {}),
      /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyPrivateKeyAction_default, {})
    ] }),
    /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { title: "Custom Fields", children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(CopyCustomFieldsActions_default, {}) }),
    /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { title: "Item Actions", children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(FavoriteItemActions_default, {}) }),
    /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(VaultActionsSection, {}),
    /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(DebuggingBugReportingActionSection, {}),
    import_api50.environment.isDevelopment && /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.ActionPanel.Section, { title: "Development", children: /* @__PURE__ */ (0, import_jsx_runtime42.jsx)(import_api50.Action.CopyToClipboard, { title: "Copy item UUID", content: id }) })
  ] });
};
var ItemActionPanel_default = VaultItemActionPanel;

// src/components/searchVault/utils/useItemAccessories.ts
var import_api51 = require("@raycast/api");
var import_react19 = require("react");
var ITEM_TYPE_TO_ACCESSORY_MAP = {
  [1 /* LOGIN */]: {
    icon: { source: ITEM_TYPE_TO_ICON_MAP[1 /* LOGIN */], tintColor: import_api51.Color.Blue },
    tooltip: ITEM_TYPE_TO_LABEL[1 /* LOGIN */]
  },
  [3 /* CARD */]: {
    icon: { source: ITEM_TYPE_TO_ICON_MAP[3 /* CARD */], tintColor: import_api51.Color.Green },
    tooltip: ITEM_TYPE_TO_LABEL[3 /* CARD */]
  },
  [4 /* IDENTITY */]: {
    icon: { source: ITEM_TYPE_TO_ICON_MAP[4 /* IDENTITY */], tintColor: import_api51.Color.Orange },
    tooltip: ITEM_TYPE_TO_LABEL[4 /* IDENTITY */]
  },
  [2 /* NOTE */]: {
    icon: { source: ITEM_TYPE_TO_ICON_MAP[2 /* NOTE */], tintColor: import_api51.Color.PrimaryText },
    tooltip: ITEM_TYPE_TO_LABEL[2 /* NOTE */]
  },
  [5 /* SSH_KEY */]: {
    icon: { source: ITEM_TYPE_TO_ICON_MAP[5 /* SSH_KEY */], tintColor: import_api51.Color.SecondaryText },
    tooltip: ITEM_TYPE_TO_LABEL[5 /* SSH_KEY */]
  }
};
function useItemAccessories(item, folder) {
  const { favoriteOrder } = useFavoritesContext();
  return (0, import_react19.useMemo)(() => {
    try {
      const accessories = [];
      if (folder?.id) {
        accessories.push({
          icon: { source: import_api51.Icon.Folder, tintColor: import_api51.Color.SecondaryText },
          tag: { value: folder.name, color: import_api51.Color.SecondaryText },
          tooltip: `${folder.name} Folder`
        });
      }
      if (item.favorite) {
        accessories.push({ icon: { source: import_api51.Icon.Star, tintColor: import_api51.Color.Blue }, tooltip: "Bitwarden Favorite" });
      } else if (favoriteOrder.includes(item.id)) {
        accessories.push({ icon: { source: import_api51.Icon.Star, tintColor: import_api51.Color.Yellow }, tooltip: "Favorite" });
      }
      if (item.reprompt === 1 /* REQUIRED */) {
        accessories.push({
          icon: { source: import_api51.Icon.Lock, tintColor: import_api51.Color.SecondaryText },
          tooltip: "Master password re-prompt"
        });
      }
      if (!ITEM_TYPE_TO_ACCESSORY_MAP[item.type]) {
        throw new Error(`No accessory defined for item ${item.name} with type ${item.type}`);
      }
      accessories.push(ITEM_TYPE_TO_ACCESSORY_MAP[item.type]);
      return accessories;
    } catch (error) {
      captureException("Failed to get item accessories", error);
      return [];
    }
  }, [favoriteOrder, item.favorite, item.reprompt, item.type, folder?.id, folder?.name]);
}

// src/components/searchVault/utils/useItemIcon.ts
var import_api53 = require("@raycast/api");
var import_react21 = require("react");

// src/utils/search.ts
var import_api52 = require("@raycast/api");

// node_modules/fast-fuzzy/lib/fuzzy.mjs
var import_graphemesplit = __toESM(require_graphemesplit(), 1);
var splitUnicode = (str) => str.normalize("NFKD").split("");
var whitespaceRegex = /^\s+$/;
var nonWordRegex = /^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/;
var sortKind = {
  insertOrder: "insertOrder",
  bestMatch: "bestMatch"
};
var defaultOptions = {
  keySelector: (s) => s,
  threshold: 0.6,
  ignoreCase: true,
  ignoreSymbols: true,
  normalizeWhitespace: true,
  returnMatchData: false,
  useDamerau: true,
  useSellers: true,
  useSeparatedUnicode: false,
  sortBy: sortKind.bestMatch
};
var noop = () => {
};
var arrayWrap = (item) => item instanceof Array ? item : [item];
function normalize(string, options) {
  const lower = options.ignoreCase ? string.toLocaleLowerCase() : string;
  const normal = [];
  const map = [];
  let lastWasWhitespace = true;
  let length = 0;
  const graphemeList = options.useSeparatedUnicode ? splitUnicode(lower) : (0, import_graphemesplit.default)(lower);
  for (const grapheme of graphemeList) {
    whitespaceRegex.lastIndex = 0;
    nonWordRegex.lastIndex = 0;
    if (options.normalizeWhitespace && whitespaceRegex.test(grapheme)) {
      if (!lastWasWhitespace) {
        normal.push(" ");
        map.push(length);
        lastWasWhitespace = true;
      }
    } else if (!(options.ignoreSymbols && nonWordRegex.test(grapheme))) {
      if (options.useSeparatedUnicode) {
        normal.push(grapheme);
      } else {
        normal.push(grapheme.normalize());
      }
      map.push(length);
      lastWasWhitespace = false;
    }
    length += grapheme.length;
  }
  map.push(string.length);
  while (normal[normal.length - 1] === " ") {
    normal.pop();
    map.pop();
  }
  return {
    original: string,
    normal,
    map
  };
}
function denormalizeMatchPosition(match, map) {
  return {
    index: map[match.start],
    length: map[match.end + 1] - map[match.start]
  };
}
function walkBack(rows, scoreIndex) {
  if (scoreIndex === 0) {
    return {
      index: 0,
      length: 0
    };
  }
  let start = scoreIndex;
  for (let i = rows.length - 2; i > 0 && start > 1; i--) {
    const row = rows[i];
    start = row[start] < row[start - 1] ? start : start - 1;
  }
  return {
    start: start - 1,
    end: scoreIndex - 1
  };
}
function noopWalkback() {
  return {
    start: 0,
    end: 0
  };
}
var levUpdateScore = () => true;
var sellersUpdateScore = (cur, min) => cur < min;
function initLevRows(rowCount, columnCount) {
  const rows = new Array(rowCount);
  for (let i = 0; i < rowCount; i++) {
    rows[i] = new Array(columnCount);
    rows[i][0] = i;
  }
  for (let i = 0; i < columnCount; i++) {
    rows[0][i] = i;
  }
  return rows;
}
function initSellersRows(rowCount, columnCount) {
  const rows = new Array(rowCount);
  rows[0] = new Array(columnCount).fill(0);
  for (let i = 1; i < rowCount; i++) {
    rows[i] = new Array(columnCount);
    rows[i][0] = i;
  }
  return rows;
}
function levCore(term, candidate, rows, i, j) {
  const rowA = rows[i];
  const rowB = rows[i + 1];
  const cost = term[i] === candidate[j] ? 0 : 1;
  let m;
  let min = rowB[j] + 1;
  if ((m = rowA[j + 1] + 1) < min) min = m;
  if ((m = rowA[j] + cost) < min) min = m;
  rowB[j + 1] = min;
}
function levenshtein(term, candidate, rows, j) {
  for (let i = 0; i < term.length; i++) {
    levCore(term, candidate, rows, i, j);
  }
}
function damerauLevenshtein(term, candidate, rows, j) {
  if (j === 0) {
    levenshtein(term, candidate, rows, j);
    return;
  }
  if (term.length > 0) {
    levCore(term, candidate, rows, 0, j);
  }
  for (let i = 1; i < term.length; i++) {
    const rowA = rows[i - 1];
    const rowB = rows[i];
    const rowC = rows[i + 1];
    const cost = term[i] === candidate[j] ? 0 : 1;
    let m;
    let min = rowC[j] + 1;
    if ((m = rowB[j + 1] + 1) < min) min = m;
    if ((m = rowB[j] + cost) < min) min = m;
    if (term[i] === candidate[j - 1] && term[i - 1] === candidate[j] && (m = rowA[j - 1] + cost) < min) min = m;
    rowC[j + 1] = min;
  }
}
function trieInsert(trie, string, item) {
  let walker = trie;
  for (let i = 0; i < string.length; i++) {
    const char = string[i];
    if (walker.children[char] == null) {
      walker.children[char] = {
        children: {},
        candidates: [],
        depth: 0
      };
    }
    walker.depth = Math.max(walker.depth, string.length - i);
    walker = walker.children[char];
  }
  walker.candidates.push(item);
}
function createSearchTrie(trie, index, items, options) {
  for (const item of items) {
    const candidates = arrayWrap(options.keySelector(item)).map((key, keyIndex) => ({
      index,
      keyIndex,
      item,
      normalized: normalize(key, options)
    }));
    index++;
    for (const candidate of candidates) {
      trieInsert(trie, candidate.normalized.normal, candidate);
    }
  }
}
function compareItemsBestScore(a, b) {
  const scoreDiff = b.score - a.score;
  if (scoreDiff !== 0) {
    return scoreDiff;
  }
  const matchPosDiff = a.match.start - b.match.start;
  if (matchPosDiff !== 0) {
    return matchPosDiff;
  }
  const keyIndexDiff = a.keyIndex - b.keyIndex;
  if (keyIndexDiff !== 0) {
    return keyIndexDiff;
  }
  const lengthDiff = a.lengthDiff - b.lengthDiff;
  if (lengthDiff !== 0) {
    return lengthDiff;
  }
  return compareItemsInsertOrder(a, b);
}
function compareItemsInsertOrder(a, b) {
  return a.index - b.index;
}
function getCompareFunc(sortBy) {
  switch (sortBy) {
    case sortKind.bestMatch:
      return compareItemsBestScore;
    case sortKind.insertOrder:
      return compareItemsInsertOrder;
    default:
      throw new Error(`unknown sortBy method ${sortBy}`);
  }
}
function addResult(results, resultMap, candidate, score, match, lengthDiff, compareItems) {
  const scoredItem = {
    item: candidate.item,
    normalized: candidate.normalized,
    score,
    match,
    index: candidate.index,
    keyIndex: candidate.keyIndex,
    lengthDiff
  };
  if (resultMap[candidate.index] == null) {
    resultMap[candidate.index] = results.length;
    results.push(scoredItem);
  } else if (compareItems(scoredItem, results[resultMap[candidate.index]]) < 0) {
    results[resultMap[candidate.index]] = scoredItem;
  }
}
var getLevLength = Math.max;
var getSellersLength = (termLength) => termLength;
function levShouldContinue(node, pos, term, threshold, sValue) {
  const p1 = pos + sValue;
  const p2 = Math.min(term.length, pos + node.depth + 1);
  const length = Math.ceil((p1 + p2) / 2);
  const bestPossibleValue = length - p2;
  return 1 - bestPossibleValue / length >= threshold;
}
function sellersShouldContinue(node, _, term, threshold, sValue, lastValue) {
  const bestPossibleValue = Math.min(sValue, lastValue - (node.depth + 1));
  return 1 - bestPossibleValue / term.length >= threshold;
}
function searchRecurse(trie, term, scoreMethods, rows, results, resultMap, options) {
  const stack = [];
  for (const key in trie.children) {
    const node = trie.children[key];
    stack.push([node, 1, key, 0, term.length]);
  }
  const acc = new Array(trie.depth);
  while (stack.length !== 0) {
    const [node, len, char, si, sv] = stack.pop();
    acc[len - 1] = char;
    scoreMethods.score(term, acc, rows, len - 1);
    const lastIndex = len;
    const lastValue = rows[rows.length - 1][lastIndex];
    let sIndex = si, sValue = sv;
    if (scoreMethods.shouldUpdateScore(lastValue, sv)) {
      sIndex = lastIndex;
      sValue = lastValue;
    }
    if (node.candidates.length > 0) {
      const length = scoreMethods.getLength(term.length, len);
      const score = 1 - sValue / length;
      if (score >= options.threshold) {
        const match = walkBack(rows, sIndex);
        const lengthDiff = Math.abs(len - term.length);
        for (const candidate of node.candidates) {
          addResult(results, resultMap, candidate, score, match, lengthDiff, scoreMethods.compareItems);
        }
      }
    }
    for (const key in node.children) {
      const child = node.children[key];
      if (scoreMethods.shouldContinue(child, len, term, options.threshold, sValue, lastValue)) {
        stack.push([child, len + 1, key, sIndex, sValue]);
      }
    }
  }
}
function searchCore(term, trie, options) {
  const initMethod = options.useSellers ? initSellersRows : initLevRows;
  const scoreMethods = {
    score: options.useDamerau ? damerauLevenshtein : levenshtein,
    getLength: options.useSellers ? getSellersLength : getLevLength,
    shouldUpdateScore: options.useSellers ? sellersUpdateScore : levUpdateScore,
    shouldContinue: options.useSellers ? sellersShouldContinue : levShouldContinue,
    walkBack: options.useSellers ? walkBack : noopWalkback,
    compareItems: getCompareFunc(options.sortBy)
  };
  const resultMap = {};
  const results = [];
  const rows = initMethod(term.length + 1, trie.depth + 1);
  if (options.threshold <= 0 || term.length === 0) {
    for (const candidate of trie.candidates) {
      addResult(results, resultMap, candidate, 0, {
        index: 0,
        length: 0
      }, term.length, scoreMethods.compareItems);
    }
  }
  searchRecurse(trie, term, scoreMethods, rows, results, resultMap, options);
  const sorted = results.sort(scoreMethods.compareItems);
  if (options.returnMatchData) {
    const denormalize = options.useSellers ? denormalizeMatchPosition : noop;
    return sorted.map((candidate) => ({
      item: candidate.item,
      original: candidate.normalized.original,
      key: candidate.normalized.normal.join(""),
      score: candidate.score,
      match: denormalize(candidate.match, candidate.normalized.map)
    }));
  }
  return sorted.map((candidate) => candidate.item);
}
var Searcher = class {
  constructor(candidates, options) {
    this.options = Object.assign({}, defaultOptions, options);
    this.trie = {
      children: {},
      candidates: [],
      depth: 0
    };
    createSearchTrie(this.trie, 0, candidates, this.options);
    this.count = candidates.length;
  }
  add(...candidates) {
    createSearchTrie(this.trie, this.count, candidates, this.options);
    this.count += candidates.length;
  }
  search(term, options) {
    options = Object.assign({}, this.options, options);
    return searchCore(normalize(term, this.options).normal, this.trie, options);
  }
};

// src/utils/search.ts
var import_react20 = require("react");
var import_url = require("url");
function faviconUrl(url2) {
  try {
    const domain = new import_url.URL(url2).hostname;
    return `https://icons.bitwarden.net/${domain}/icon.png`;
  } catch (err) {
    return import_api52.Icon.Globe;
  }
}
function useVaultSearch(items) {
  const [searchText, setSearchText] = (0, import_react20.useState)("");
  const searcher = (0, import_react20.useMemo)(() => {
    return new Searcher(items, {
      ignoreSymbols: false,
      threshold: 0.7,
      keySelector: (item) => {
        const { login, card } = item;
        return [
          item.name,
          ITEM_TYPE_TO_LABEL[item.type],
          login?.username,
          login?.uris?.map(({ uri }) => uri),
          card?.brand,
          card?.number
        ].flat().filter((value) => !!value);
      }
    });
  }, [items]);
  const filteredItems = (0, import_react20.useMemo)(() => {
    if (!searchText) return items;
    return searcher.search(searchText);
  }, [searcher, searchText]);
  return { setSearchText, filteredItems };
}

// src/components/searchVault/utils/useItemIcon.ts
var { fetchFavicons } = (0, import_api53.getPreferenceValues)();
var ITEM_TYPE_TO_IMAGE_OR_ICON_MAP = {
  [1 /* LOGIN */]: (item) => {
    const iconUri = item.login?.uris?.[0]?.uri;
    if (fetchFavicons && iconUri) return faviconUrl(iconUri);
    return ITEM_TYPE_TO_ICON_MAP[1 /* LOGIN */];
  },
  [3 /* CARD */]: (item) => {
    const { brand } = item.card ?? {};
    if (brand) {
      const cardBrandImage = getCardImageUrl(brand);
      if (cardBrandImage) return cardBrandImage;
    }
    return ITEM_TYPE_TO_ICON_MAP[3 /* CARD */];
  },
  [4 /* IDENTITY */]: () => ITEM_TYPE_TO_ICON_MAP[4 /* IDENTITY */],
  [2 /* NOTE */]: () => ITEM_TYPE_TO_ICON_MAP[2 /* NOTE */],
  [5 /* SSH_KEY */]: () => ITEM_TYPE_TO_ICON_MAP[5 /* SSH_KEY */]
};
function useItemIcon(item) {
  return (0, import_react21.useMemo)(() => {
    const imageOrIcon = ITEM_TYPE_TO_IMAGE_OR_ICON_MAP[item.type]?.(item);
    if (imageOrIcon) return imageOrIcon;
    return import_api53.Icon.QuestionMark;
  }, [item.type, item.card?.brand, item.login?.uris?.[0]?.uri]);
}

// src/components/searchVault/Item.tsx
var import_jsx_runtime43 = require("react/jsx-runtime");
var VaultItem = ({ item, folder }) => {
  const icon = useItemIcon(item);
  const accessories = useItemAccessories(item, folder);
  return /* @__PURE__ */ (0, import_jsx_runtime43.jsx)(vaultItem_default.Provider, { value: item, children: /* @__PURE__ */ (0, import_jsx_runtime43.jsx)(
    import_api54.List.Item,
    {
      id: item.id,
      title: item.name,
      accessories,
      icon,
      subtitle: item.login?.username || void 0,
      actions: /* @__PURE__ */ (0, import_jsx_runtime43.jsx)(ItemActionPanel_default, {})
    }
  ) });
};
var Item_default = VaultItem;

// src/components/ListFolderDropdown.tsx
var import_api55 = require("@raycast/api");
var import_jsx_runtime44 = require("react/jsx-runtime");
function ListFolderDropdown() {
  const { folders, currentFolderId, setCurrentFolder } = useVaultContext();
  if (folders.length === 0) return null;
  return /* @__PURE__ */ (0, import_jsx_runtime44.jsxs)(
    import_api55.List.Dropdown,
    {
      tooltip: "Select a folder",
      placeholder: "Search folders",
      defaultValue: currentFolderId ?? FOLDER_OPTIONS.ALL,
      onChange: setCurrentFolder,
      throttle: true,
      children: [
        /* @__PURE__ */ (0, import_jsx_runtime44.jsx)(import_api55.List.Dropdown.Item, { value: FOLDER_OPTIONS.ALL, title: "All", icon: import_api55.Icon.Folder }),
        folders.map((folder) => {
          const id = folder.id || FOLDER_OPTIONS.NO_FOLDER;
          return /* @__PURE__ */ (0, import_jsx_runtime44.jsx)(import_api55.List.Dropdown.Item, { value: id, title: folder.name, icon: import_api55.Icon.Folder }, id);
        })
      ]
    }
  );
}

// src/search.tsx
var import_jsx_runtime45 = require("react/jsx-runtime");
var SearchVaultCommand = () => /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(RootErrorBoundary, { children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(BitwardenProvider, { loadingFallback: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultLoadingFallback, {}), children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(SessionProvider, { unlock: true, children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(vaultListeners_default, { children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultProvider, { children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(FavoritesProvider, { children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(SearchVaultComponent, {}) }) }) }) }) }) });
function SearchVaultComponent() {
  const { items, folders, isLoading, isEmpty } = useVaultContext();
  const { setSearchText, filteredItems } = useVaultSearch(items);
  const { favoriteItems, nonFavoriteItems } = useSeparateFavoriteItems(filteredItems);
  return /* @__PURE__ */ (0, import_jsx_runtime45.jsxs)(
    import_api56.List,
    {
      searchBarPlaceholder: "Search vault",
      filtering: false,
      isLoading,
      searchBarAccessory: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(ListFolderDropdown, {}),
      onSearchTextChange: setSearchText,
      children: [
        favoriteItems.length > 0 ? /* @__PURE__ */ (0, import_jsx_runtime45.jsxs)(import_jsx_runtime45.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(import_api56.List.Section, { title: "Favorites", children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultItemList, { items: favoriteItems, folders }) }),
          /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(import_api56.List.Section, { title: "Other Items", children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultItemList, { items: nonFavoriteItems, folders }) })
        ] }) : /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultItemList, { items: nonFavoriteItems, folders }),
        isLoading ? /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(import_api56.List.EmptyView, { icon: import_api56.Icon.ArrowClockwise, title: "Loading...", description: "Please wait." }) : /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(
          import_api56.List.EmptyView,
          {
            icon: { source: "bitwarden-64.png" },
            title: isEmpty ? "Vault empty." : "No matching items found.",
            description: isEmpty ? "Hit the sync button to sync your vault or try logging in again." : "Hit the sync button to sync your vault.",
            actions: !isLoading && /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(import_api56.ActionPanel, { children: /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(VaultActionsSection, {}) })
          }
        )
      ]
    }
  );
}
function VaultItemList({ items, folders }) {
  return /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(import_jsx_runtime45.Fragment, { children: items.map((item) => /* @__PURE__ */ (0, import_jsx_runtime45.jsx)(Item_default, { item, folder: getItemFolder(folders, item) }, item.id)) });
}
function getItemFolder(folderList, item) {
  return folderList.find((folder) => folder.id === item.folderId);
}
var search_default = SearchVaultCommand;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL3dpbmRvd3MuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL21vZGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2lzZXhlL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy93aGljaC93aGljaC5qcyIsICIuLi9ub2RlX21vZHVsZXMvcGF0aC1rZXkvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLXNwYXduL2xpYi91dGlsL3Jlc29sdmVDb21tYW5kLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9jcm9zcy1zcGF3bi9saWIvdXRpbC9lc2NhcGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NoZWJhbmctcmVnZXgvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NoZWJhbmctY29tbWFuZC9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vbGliL3V0aWwvcmVhZFNoZWJhbmcuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLXNwYXduL2xpYi9wYXJzZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vbGliL2Vub2VudC5qcyIsICIuLi9ub2RlX21vZHVsZXMvY3Jvc3Mtc3Bhd24vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NpZ25hbC1leGl0L3NpZ25hbHMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NpZ25hbC1leGl0L2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9nZXQtc3RyZWFtL2J1ZmZlci1zdHJlYW0uanMiLCAiLi4vbm9kZV9tb2R1bGVzL2dldC1zdHJlYW0vaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL21lcmdlLXN0cmVhbS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvbm9kZS1zdHJlYW0temlwL25vZGVfc3RyZWFtX3ppcC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC90eXBlcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC90eXBlVHJpZS5qc29uIiwgIi4uL25vZGVfbW9kdWxlcy9ncmFwaGVtZXNwbGl0L2V4dFBpY3QuanNvbiIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC9pbkNCLmpzb24iLCAiLi4vbm9kZV9tb2R1bGVzL3RpbnktaW5mbGF0ZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvdW5pY29kZS10cmllL3N3YXAuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3VuaWNvZGUtdHJpZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvanMtYmFzZTY0L2Jhc2U2NC5qcyIsICIuLi9ub2RlX21vZHVsZXMvZ3JhcGhlbWVzcGxpdC9pbmRleC5qcyIsICIuLi9zcmMvc2VhcmNoLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9Sb290RXJyb3JCb3VuZGFyeS50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvVHJvdWJsZXNob290aW5nR3VpZGUudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9uV2l0aFJlcHJvbXB0LnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbS50c3giLCAiLi4vc3JjL3V0aWxzL2hvb2tzL3VzZVJlcHJvbXB0LnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9SZXByb21wdEZvcm0udHN4IiwgIi4uL3NyYy9jb250ZXh0L3Nlc3Npb24vc2Vzc2lvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvVW5sb2NrRm9ybS50c3giLCAiLi4vc3JjL2NvbnN0YW50cy9nZW5lcmFsLnRzIiwgIi4uL3NyYy90eXBlcy92YXVsdC50cyIsICIuLi9zcmMvY29udGV4dC9iaXR3YXJkZW4udHN4IiwgIi4uL3NyYy9hcGkvYml0d2FyZGVuLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9leGVjYS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc3RyaXAtZmluYWwtbmV3bGluZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvbnBtLXJ1bi1wYXRoL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9ucG0tcnVuLXBhdGgvbm9kZV9tb2R1bGVzL3BhdGgta2V5L2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9taW1pYy1mbi9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvb25ldGltZS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvaHVtYW4tc2lnbmFscy9idWlsZC9zcmMvbWFpbi5qcyIsICIuLi9ub2RlX21vZHVsZXMvaHVtYW4tc2lnbmFscy9idWlsZC9zcmMvcmVhbHRpbWUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2h1bWFuLXNpZ25hbHMvYnVpbGQvc3JjL3NpZ25hbHMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2h1bWFuLXNpZ25hbHMvYnVpbGQvc3JjL2NvcmUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL2V4ZWNhL2xpYi9lcnJvci5qcyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvbGliL3N0ZGlvLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9leGVjYS9saWIva2lsbC5qcyIsICIuLi9ub2RlX21vZHVsZXMvaXMtc3RyZWFtL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9leGVjYS9saWIvc3RyZWFtLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9leGVjYS9saWIvcHJvbWlzZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvZXhlY2EvbGliL2NvbW1hbmQuanMiLCAiLi4vc3JjL3V0aWxzL3Bhc3N3b3Jkcy50cyIsICIuLi9zcmMvY29uc3RhbnRzL3Bhc3N3b3Jkcy50cyIsICIuLi9zcmMvdXRpbHMvcHJlZmVyZW5jZXMudHMiLCAiLi4vc3JjL2NvbnN0YW50cy9wcmVmZXJlbmNlcy50cyIsICIuLi9zcmMvY29uc3RhbnRzL2xhYmVscy50cyIsICIuLi9zcmMvdXRpbHMvZXJyb3JzLnRzIiwgIi4uL3NyYy91dGlscy9mcy50cyIsICIuLi9zcmMvdXRpbHMvbmV0d29yay50cyIsICIuLi9zcmMvdXRpbHMvZGV2ZWxvcG1lbnQudHMiLCAiLi4vc3JjL3V0aWxzL2NyeXB0by50cyIsICIuLi9zcmMvYXBpL2JpdHdhcmRlbi5oZWxwZXJzLnRzIiwgIi4uL3NyYy91dGlscy9jYWNoZS50cyIsICIuLi9zcmMvdXRpbHMvcGxhdGZvcm0udHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvTG9hZGluZ0ZhbGxiYWNrLnRzeCIsICIuLi9zcmMvdXRpbHMvaG9va3MvdXNlT25jZUVmZmVjdC50cyIsICIuLi9zcmMvdXRpbHMvb2JqZWN0cy50cyIsICIuLi9zcmMvdXRpbHMvZGVidWcudHMiLCAiLi4vc3JjL3V0aWxzL2hvb2tzL3VzZVZhdWx0TWVzc2FnZXMudHMiLCAiLi4vc3JjL3V0aWxzL2xvY2Fsc3RvcmFnZS50cyIsICIuLi9ub2RlX21vZHVsZXMvZGVxdWFsL2xpdGUvaW5kZXgubWpzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9pbmRleC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlUHJvbWlzZS50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlRGVlcE1lbW8udHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUxhdGVzdC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvc2hvd0ZhaWx1cmVUb2FzdC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlQ2FjaGVkU3RhdGUudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2hlbHBlcnMudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3ZlbmRvcnMvdHlwZS1oYXNoZXIudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUNhY2hlZFByb21pc2UudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUZldGNoLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9mZXRjaC11dGlscy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlRXhlYy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvZXhlYy11dGlscy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdmVuZG9ycy9zaWduYWwtZXhpdC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlU3RyZWFtSlNPTi50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdmVuZG9ycy9zdHJlYW0tY2hhaW4udHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3ZlbmRvcnMvc3RyZWFtLWpzb24udHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZVNRTC50c3giLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3NxbC11dGlscy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvdXNlRm9ybS50c3giLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUFJLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy91c2VGcmVjZW5jeVNvcnRpbmcudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL3VzZUxvY2FsU3RvcmFnZS50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaWNvbi9pbmRleC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaWNvbi9hdmF0YXIudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2ljb24vY29sb3IudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2ljb24vZmF2aWNvbi50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvaWNvbi9wcm9ncmVzcy50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvb2F1dGgvaW5kZXgudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL29hdXRoL09BdXRoU2VydmljZS50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvb2F1dGgvcHJvdmlkZXJzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9vYXV0aC93aXRoQWNjZXNzVG9rZW4udHN4IiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9jcmVhdGVEZWVwbGluay50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvZXhlY3V0ZVNRTC50cyIsICIuLi9ub2RlX21vZHVsZXMvQHJheWNhc3QvdXRpbHMvZGlzdC9zcmMvcnVuLWFwcGxlc2NyaXB0LnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AcmF5Y2FzdC91dGlscy9kaXN0L3NyYy9ydW4tcG93ZXJzaGVsbC1zY3JpcHQudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0ByYXljYXN0L3V0aWxzL2Rpc3Qvc3JjL2NhY2hlLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L1ZhdWx0TG9hZGluZ0ZhbGxiYWNrLnRzeCIsICIuLi9zcmMvY29udGV4dC9zZXNzaW9uL3JlZHVjZXIudHMiLCAiLi4vc3JjL2NvbnRleHQvc2Vzc2lvbi91dGlscy50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hY3Rpb25zL0J1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9hY3Rpb25zL0J1Z1JlcG9ydE9wZW5BY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL2FjdGlvbnMvQ29weVJ1bnRpbWVFcnJvckxvZy50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvYWN0aW9ucy9EZWJ1Z2dpbmdCdWdSZXBvcnRpbmdBY3Rpb25TZWN0aW9uLnRzeCIsICIuLi9zcmMvdXRpbHMvaG9va3MvdXNlQ2xpVmVyc2lvbi50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hY3Rpb25zL1ZhdWx0QWN0aW9uc1NlY3Rpb24udHN4IiwgIi4uL3NyYy9jb250ZXh0L3ZhdWx0LnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0TGlzdGVuZXJzLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VWYXVsdENhY2hpbmcudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvY2FjaGluZy50cyIsICIuLi9zcmMvdXRpbHMvaG9va3MvdXNlQ29udGVudEVuY3J5cHRvci50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9JdGVtLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9JdGVtQWN0aW9uUGFuZWwudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL0NvbXBvbmVudFJldmVyc2VyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL0NvcHlQYXNzd29yZEFjdGlvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbS50cyIsICIuLi9zcmMvdXRpbHMvY2xpcGJvYXJkLnRzIiwgIi4uL3NyYy91dGlscy9zdHJpbmdzLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvUGFzdGVQYXNzd29yZEFjdGlvbi50c3giLCAiLi4vc3JjL3V0aWxzL2hvb2tzL3VzZUZyb250bW9zdEFwcGxpY2F0aW9uTmFtZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL0NvcHlUb3RwQWN0aW9uLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL1Bhc3RlVG90cEFjdGlvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9Db3B5VXNlcm5hbWVBY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvUGFzdGVVc2VybmFtZUFjdGlvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9PcGVuVXJsSW5Ccm93c2VyQWN0aW9uLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL1Nob3dDYXJkRGV0YWlsc0FjdGlvbi50c3giLCAiLi4vc3JjL3V0aWxzL2NhcmRzLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvc2hhcmVkL1Nob3dEZXRhaWxzU2NyZWVuLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL1Nob3dJZGVudGl0eURldGFpbHNBY3Rpb24udHN4IiwgIi4uL3NyYy91dGlscy9pZGVudGl0eS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL1Nob3dOb3Rlc0FjdGlvbi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9zaGFyZWQvQ29weU9iamVjdEZpZWxkc0FjdGlvbnMudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvQ29weUlkZW50aXR5RmllbGRzQWN0aW9ucy50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9Db3B5Q2FyZEZpZWxkc0FjdGlvbnMudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvQ29weUxvZ2luVXJpc0FjdGlvbnMudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvQ29weU5vdGVzQWN0aW9uLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL0NvcHlDdXN0b21GaWVsZHNBY3Rpb25zLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL0NvcHlQdWJsaWNLZXlBY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvRmF2b3JpdGVJdGVtQWN0aW9ucy50c3giLCAiLi4vc3JjL2NvbnRleHQvZmF2b3JpdGVzLnRzeCIsICIuLi9zcmMvdXRpbHMvaG9va3MvdXNlQXN5bmNFZmZlY3QudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9Db3B5S2V5RmluZ2VycHJpbnRBY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvQ29weVByaXZhdGVLZXlBY3Rpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZUl0ZW1BY2Nlc3Nvcmllcy50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VJdGVtSWNvbi50cyIsICIuLi9zcmMvdXRpbHMvc2VhcmNoLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9mYXN0LWZ1enp5L2xpYi9mdXp6eS5tanMiLCAiLi4vc3JjL2NvbXBvbmVudHMvTGlzdEZvbGRlckRyb3Bkb3duLnRzeCJdLAogICJzb3VyY2VzQ29udGVudCI6IFsibW9kdWxlLmV4cG9ydHMgPSBpc2V4ZVxuaXNleGUuc3luYyA9IHN5bmNcblxudmFyIGZzID0gcmVxdWlyZSgnZnMnKVxuXG5mdW5jdGlvbiBjaGVja1BhdGhFeHQgKHBhdGgsIG9wdGlvbnMpIHtcbiAgdmFyIHBhdGhleHQgPSBvcHRpb25zLnBhdGhFeHQgIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5wYXRoRXh0IDogcHJvY2Vzcy5lbnYuUEFUSEVYVFxuXG4gIGlmICghcGF0aGV4dCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBwYXRoZXh0ID0gcGF0aGV4dC5zcGxpdCgnOycpXG4gIGlmIChwYXRoZXh0LmluZGV4T2YoJycpICE9PSAtMSkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHAgPSBwYXRoZXh0W2ldLnRvTG93ZXJDYXNlKClcbiAgICBpZiAocCAmJiBwYXRoLnN1YnN0cigtcC5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT09IHApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBjaGVja1N0YXQgKHN0YXQsIHBhdGgsIG9wdGlvbnMpIHtcbiAgaWYgKCFzdGF0LmlzU3ltYm9saWNMaW5rKCkgJiYgIXN0YXQuaXNGaWxlKCkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gY2hlY2tQYXRoRXh0KHBhdGgsIG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGlzZXhlIChwYXRoLCBvcHRpb25zLCBjYikge1xuICBmcy5zdGF0KHBhdGgsIGZ1bmN0aW9uIChlciwgc3RhdCkge1xuICAgIGNiKGVyLCBlciA/IGZhbHNlIDogY2hlY2tTdGF0KHN0YXQsIHBhdGgsIG9wdGlvbnMpKVxuICB9KVxufVxuXG5mdW5jdGlvbiBzeW5jIChwYXRoLCBvcHRpb25zKSB7XG4gIHJldHVybiBjaGVja1N0YXQoZnMuc3RhdFN5bmMocGF0aCksIHBhdGgsIG9wdGlvbnMpXG59XG4iLCAibW9kdWxlLmV4cG9ydHMgPSBpc2V4ZVxuaXNleGUuc3luYyA9IHN5bmNcblxudmFyIGZzID0gcmVxdWlyZSgnZnMnKVxuXG5mdW5jdGlvbiBpc2V4ZSAocGF0aCwgb3B0aW9ucywgY2IpIHtcbiAgZnMuc3RhdChwYXRoLCBmdW5jdGlvbiAoZXIsIHN0YXQpIHtcbiAgICBjYihlciwgZXIgPyBmYWxzZSA6IGNoZWNrU3RhdChzdGF0LCBvcHRpb25zKSlcbiAgfSlcbn1cblxuZnVuY3Rpb24gc3luYyAocGF0aCwgb3B0aW9ucykge1xuICByZXR1cm4gY2hlY2tTdGF0KGZzLnN0YXRTeW5jKHBhdGgpLCBvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBjaGVja1N0YXQgKHN0YXQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHN0YXQuaXNGaWxlKCkgJiYgY2hlY2tNb2RlKHN0YXQsIG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGNoZWNrTW9kZSAoc3RhdCwgb3B0aW9ucykge1xuICB2YXIgbW9kID0gc3RhdC5tb2RlXG4gIHZhciB1aWQgPSBzdGF0LnVpZFxuICB2YXIgZ2lkID0gc3RhdC5naWRcblxuICB2YXIgbXlVaWQgPSBvcHRpb25zLnVpZCAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnVpZCA6IHByb2Nlc3MuZ2V0dWlkICYmIHByb2Nlc3MuZ2V0dWlkKClcbiAgdmFyIG15R2lkID0gb3B0aW9ucy5naWQgIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5naWQgOiBwcm9jZXNzLmdldGdpZCAmJiBwcm9jZXNzLmdldGdpZCgpXG5cbiAgdmFyIHUgPSBwYXJzZUludCgnMTAwJywgOClcbiAgdmFyIGcgPSBwYXJzZUludCgnMDEwJywgOClcbiAgdmFyIG8gPSBwYXJzZUludCgnMDAxJywgOClcbiAgdmFyIHVnID0gdSB8IGdcblxuICB2YXIgcmV0ID0gKG1vZCAmIG8pIHx8XG4gICAgKG1vZCAmIGcpICYmIGdpZCA9PT0gbXlHaWQgfHxcbiAgICAobW9kICYgdSkgJiYgdWlkID09PSBteVVpZCB8fFxuICAgIChtb2QgJiB1ZykgJiYgbXlVaWQgPT09IDBcblxuICByZXR1cm4gcmV0XG59XG4iLCAidmFyIGZzID0gcmVxdWlyZSgnZnMnKVxudmFyIGNvcmVcbmlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInIHx8IGdsb2JhbC5URVNUSU5HX1dJTkRPV1MpIHtcbiAgY29yZSA9IHJlcXVpcmUoJy4vd2luZG93cy5qcycpXG59IGVsc2Uge1xuICBjb3JlID0gcmVxdWlyZSgnLi9tb2RlLmpzJylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc2V4ZVxuaXNleGUuc3luYyA9IHN5bmNcblxuZnVuY3Rpb24gaXNleGUgKHBhdGgsIG9wdGlvbnMsIGNiKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gb3B0aW9uc1xuICAgIG9wdGlvbnMgPSB7fVxuICB9XG5cbiAgaWYgKCFjYikge1xuICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2FsbGJhY2sgbm90IHByb3ZpZGVkJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaXNleGUocGF0aCwgb3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKGVyLCBpcykge1xuICAgICAgICBpZiAoZXIpIHtcbiAgICAgICAgICByZWplY3QoZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShpcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgY29yZShwYXRoLCBvcHRpb25zIHx8IHt9LCBmdW5jdGlvbiAoZXIsIGlzKSB7XG4gICAgLy8gaWdub3JlIEVBQ0NFUyBiZWNhdXNlIHRoYXQganVzdCBtZWFucyB3ZSBhcmVuJ3QgYWxsb3dlZCB0byBydW4gaXRcbiAgICBpZiAoZXIpIHtcbiAgICAgIGlmIChlci5jb2RlID09PSAnRUFDQ0VTJyB8fCBvcHRpb25zICYmIG9wdGlvbnMuaWdub3JlRXJyb3JzKSB7XG4gICAgICAgIGVyID0gbnVsbFxuICAgICAgICBpcyA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGNiKGVyLCBpcylcbiAgfSlcbn1cblxuZnVuY3Rpb24gc3luYyAocGF0aCwgb3B0aW9ucykge1xuICAvLyBteSBraW5nZG9tIGZvciBhIGZpbHRlcmVkIGNhdGNoXG4gIHRyeSB7XG4gICAgcmV0dXJuIGNvcmUuc3luYyhwYXRoLCBvcHRpb25zIHx8IHt9KVxuICB9IGNhdGNoIChlcikge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaWdub3JlRXJyb3JzIHx8IGVyLmNvZGUgPT09ICdFQUNDRVMnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJcbiAgICB9XG4gIH1cbn1cbiIsICJjb25zdCBpc1dpbmRvd3MgPSBwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInIHx8XG4gICAgcHJvY2Vzcy5lbnYuT1NUWVBFID09PSAnY3lnd2luJyB8fFxuICAgIHByb2Nlc3MuZW52Lk9TVFlQRSA9PT0gJ21zeXMnXG5cbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IENPTE9OID0gaXNXaW5kb3dzID8gJzsnIDogJzonXG5jb25zdCBpc2V4ZSA9IHJlcXVpcmUoJ2lzZXhlJylcblxuY29uc3QgZ2V0Tm90Rm91bmRFcnJvciA9IChjbWQpID0+XG4gIE9iamVjdC5hc3NpZ24obmV3IEVycm9yKGBub3QgZm91bmQ6ICR7Y21kfWApLCB7IGNvZGU6ICdFTk9FTlQnIH0pXG5cbmNvbnN0IGdldFBhdGhJbmZvID0gKGNtZCwgb3B0KSA9PiB7XG4gIGNvbnN0IGNvbG9uID0gb3B0LmNvbG9uIHx8IENPTE9OXG5cbiAgLy8gSWYgaXQgaGFzIGEgc2xhc2gsIHRoZW4gd2UgZG9uJ3QgYm90aGVyIHNlYXJjaGluZyB0aGUgcGF0aGVudi5cbiAgLy8ganVzdCBjaGVjayB0aGUgZmlsZSBpdHNlbGYsIGFuZCB0aGF0J3MgaXQuXG4gIGNvbnN0IHBhdGhFbnYgPSBjbWQubWF0Y2goL1xcLy8pIHx8IGlzV2luZG93cyAmJiBjbWQubWF0Y2goL1xcXFwvKSA/IFsnJ11cbiAgICA6IChcbiAgICAgIFtcbiAgICAgICAgLy8gd2luZG93cyBhbHdheXMgY2hlY2tzIHRoZSBjd2QgZmlyc3RcbiAgICAgICAgLi4uKGlzV2luZG93cyA/IFtwcm9jZXNzLmN3ZCgpXSA6IFtdKSxcbiAgICAgICAgLi4uKG9wdC5wYXRoIHx8IHByb2Nlc3MuZW52LlBBVEggfHxcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogdmVyeSB1bnVzdWFsICovICcnKS5zcGxpdChjb2xvbiksXG4gICAgICBdXG4gICAgKVxuICBjb25zdCBwYXRoRXh0RXhlID0gaXNXaW5kb3dzXG4gICAgPyBvcHQucGF0aEV4dCB8fCBwcm9jZXNzLmVudi5QQVRIRVhUIHx8ICcuRVhFOy5DTUQ7LkJBVDsuQ09NJ1xuICAgIDogJydcbiAgY29uc3QgcGF0aEV4dCA9IGlzV2luZG93cyA/IHBhdGhFeHRFeGUuc3BsaXQoY29sb24pIDogWycnXVxuXG4gIGlmIChpc1dpbmRvd3MpIHtcbiAgICBpZiAoY21kLmluZGV4T2YoJy4nKSAhPT0gLTEgJiYgcGF0aEV4dFswXSAhPT0gJycpXG4gICAgICBwYXRoRXh0LnVuc2hpZnQoJycpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhdGhFbnYsXG4gICAgcGF0aEV4dCxcbiAgICBwYXRoRXh0RXhlLFxuICB9XG59XG5cbmNvbnN0IHdoaWNoID0gKGNtZCwgb3B0LCBjYikgPT4ge1xuICBpZiAodHlwZW9mIG9wdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gb3B0XG4gICAgb3B0ID0ge31cbiAgfVxuICBpZiAoIW9wdClcbiAgICBvcHQgPSB7fVxuXG4gIGNvbnN0IHsgcGF0aEVudiwgcGF0aEV4dCwgcGF0aEV4dEV4ZSB9ID0gZ2V0UGF0aEluZm8oY21kLCBvcHQpXG4gIGNvbnN0IGZvdW5kID0gW11cblxuICBjb25zdCBzdGVwID0gaSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgaWYgKGkgPT09IHBhdGhFbnYubGVuZ3RoKVxuICAgICAgcmV0dXJuIG9wdC5hbGwgJiYgZm91bmQubGVuZ3RoID8gcmVzb2x2ZShmb3VuZClcbiAgICAgICAgOiByZWplY3QoZ2V0Tm90Rm91bmRFcnJvcihjbWQpKVxuXG4gICAgY29uc3QgcHBSYXcgPSBwYXRoRW52W2ldXG4gICAgY29uc3QgcGF0aFBhcnQgPSAvXlwiLipcIiQvLnRlc3QocHBSYXcpID8gcHBSYXcuc2xpY2UoMSwgLTEpIDogcHBSYXdcblxuICAgIGNvbnN0IHBDbWQgPSBwYXRoLmpvaW4ocGF0aFBhcnQsIGNtZClcbiAgICBjb25zdCBwID0gIXBhdGhQYXJ0ICYmIC9eXFwuW1xcXFxcXC9dLy50ZXN0KGNtZCkgPyBjbWQuc2xpY2UoMCwgMikgKyBwQ21kXG4gICAgICA6IHBDbWRcblxuICAgIHJlc29sdmUoc3ViU3RlcChwLCBpLCAwKSlcbiAgfSlcblxuICBjb25zdCBzdWJTdGVwID0gKHAsIGksIGlpKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgaWYgKGlpID09PSBwYXRoRXh0Lmxlbmd0aClcbiAgICAgIHJldHVybiByZXNvbHZlKHN0ZXAoaSArIDEpKVxuICAgIGNvbnN0IGV4dCA9IHBhdGhFeHRbaWldXG4gICAgaXNleGUocCArIGV4dCwgeyBwYXRoRXh0OiBwYXRoRXh0RXhlIH0sIChlciwgaXMpID0+IHtcbiAgICAgIGlmICghZXIgJiYgaXMpIHtcbiAgICAgICAgaWYgKG9wdC5hbGwpXG4gICAgICAgICAgZm91bmQucHVzaChwICsgZXh0KVxuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUocCArIGV4dClcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHN1YlN0ZXAocCwgaSwgaWkgKyAxKSlcbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiBjYiA/IHN0ZXAoMCkudGhlbihyZXMgPT4gY2IobnVsbCwgcmVzKSwgY2IpIDogc3RlcCgwKVxufVxuXG5jb25zdCB3aGljaFN5bmMgPSAoY21kLCBvcHQpID0+IHtcbiAgb3B0ID0gb3B0IHx8IHt9XG5cbiAgY29uc3QgeyBwYXRoRW52LCBwYXRoRXh0LCBwYXRoRXh0RXhlIH0gPSBnZXRQYXRoSW5mbyhjbWQsIG9wdClcbiAgY29uc3QgZm91bmQgPSBbXVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aEVudi5sZW5ndGg7IGkgKyspIHtcbiAgICBjb25zdCBwcFJhdyA9IHBhdGhFbnZbaV1cbiAgICBjb25zdCBwYXRoUGFydCA9IC9eXCIuKlwiJC8udGVzdChwcFJhdykgPyBwcFJhdy5zbGljZSgxLCAtMSkgOiBwcFJhd1xuXG4gICAgY29uc3QgcENtZCA9IHBhdGguam9pbihwYXRoUGFydCwgY21kKVxuICAgIGNvbnN0IHAgPSAhcGF0aFBhcnQgJiYgL15cXC5bXFxcXFxcL10vLnRlc3QoY21kKSA/IGNtZC5zbGljZSgwLCAyKSArIHBDbWRcbiAgICAgIDogcENtZFxuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXRoRXh0Lmxlbmd0aDsgaiArKykge1xuICAgICAgY29uc3QgY3VyID0gcCArIHBhdGhFeHRbal1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlzID0gaXNleGUuc3luYyhjdXIsIHsgcGF0aEV4dDogcGF0aEV4dEV4ZSB9KVxuICAgICAgICBpZiAoaXMpIHtcbiAgICAgICAgICBpZiAob3B0LmFsbClcbiAgICAgICAgICAgIGZvdW5kLnB1c2goY3VyKVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBjdXJcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdC5hbGwgJiYgZm91bmQubGVuZ3RoKVxuICAgIHJldHVybiBmb3VuZFxuXG4gIGlmIChvcHQubm90aHJvdylcbiAgICByZXR1cm4gbnVsbFxuXG4gIHRocm93IGdldE5vdEZvdW5kRXJyb3IoY21kKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdoaWNoXG53aGljaC5zeW5jID0gd2hpY2hTeW5jXG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwYXRoS2V5ID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBlbnZpcm9ubWVudCA9IG9wdGlvbnMuZW52IHx8IHByb2Nlc3MuZW52O1xuXHRjb25zdCBwbGF0Zm9ybSA9IG9wdGlvbnMucGxhdGZvcm0gfHwgcHJvY2Vzcy5wbGF0Zm9ybTtcblxuXHRpZiAocGxhdGZvcm0gIT09ICd3aW4zMicpIHtcblx0XHRyZXR1cm4gJ1BBVEgnO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdC5rZXlzKGVudmlyb25tZW50KS5yZXZlcnNlKCkuZmluZChrZXkgPT4ga2V5LnRvVXBwZXJDYXNlKCkgPT09ICdQQVRIJykgfHwgJ1BhdGgnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwYXRoS2V5O1xuLy8gVE9ETzogUmVtb3ZlIHRoaXMgZm9yIHRoZSBuZXh0IG1ham9yIHJlbGVhc2Vcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBwYXRoS2V5O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHdoaWNoID0gcmVxdWlyZSgnd2hpY2gnKTtcbmNvbnN0IGdldFBhdGhLZXkgPSByZXF1aXJlKCdwYXRoLWtleScpO1xuXG5mdW5jdGlvbiByZXNvbHZlQ29tbWFuZEF0dGVtcHQocGFyc2VkLCB3aXRob3V0UGF0aEV4dCkge1xuICAgIGNvbnN0IGVudiA9IHBhcnNlZC5vcHRpb25zLmVudiB8fCBwcm9jZXNzLmVudjtcbiAgICBjb25zdCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xuICAgIGNvbnN0IGhhc0N1c3RvbUN3ZCA9IHBhcnNlZC5vcHRpb25zLmN3ZCAhPSBudWxsO1xuICAgIC8vIFdvcmtlciB0aHJlYWRzIGRvIG5vdCBoYXZlIHByb2Nlc3MuY2hkaXIoKVxuICAgIGNvbnN0IHNob3VsZFN3aXRjaEN3ZCA9IGhhc0N1c3RvbUN3ZCAmJiBwcm9jZXNzLmNoZGlyICE9PSB1bmRlZmluZWQgJiYgIXByb2Nlc3MuY2hkaXIuZGlzYWJsZWQ7XG5cbiAgICAvLyBJZiBhIGN1c3RvbSBgY3dkYCB3YXMgc3BlY2lmaWVkLCB3ZSBuZWVkIHRvIGNoYW5nZSB0aGUgcHJvY2VzcyBjd2RcbiAgICAvLyBiZWNhdXNlIGB3aGljaGAgd2lsbCBkbyBzdGF0IGNhbGxzIGJ1dCBkb2VzIG5vdCBzdXBwb3J0IGEgY3VzdG9tIGN3ZFxuICAgIGlmIChzaG91bGRTd2l0Y2hDd2QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb2Nlc3MuY2hkaXIocGFyc2VkLm9wdGlvbnMuY3dkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvKiBFbXB0eSAqL1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZWQgPSB3aGljaC5zeW5jKHBhcnNlZC5jb21tYW5kLCB7XG4gICAgICAgICAgICBwYXRoOiBlbnZbZ2V0UGF0aEtleSh7IGVudiB9KV0sXG4gICAgICAgICAgICBwYXRoRXh0OiB3aXRob3V0UGF0aEV4dCA/IHBhdGguZGVsaW1pdGVyIDogdW5kZWZpbmVkLFxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8qIEVtcHR5ICovXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKHNob3VsZFN3aXRjaEN3ZCkge1xuICAgICAgICAgICAgcHJvY2Vzcy5jaGRpcihjd2QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2Ugc3VjY2Vzc2Z1bGx5IHJlc29sdmVkLCBlbnN1cmUgdGhhdCBhbiBhYnNvbHV0ZSBwYXRoIGlzIHJldHVybmVkXG4gICAgLy8gTm90ZSB0aGF0IHdoZW4gYSBjdXN0b20gYGN3ZGAgd2FzIHVzZWQsIHdlIG5lZWQgdG8gcmVzb2x2ZSB0byBhbiBhYnNvbHV0ZSBwYXRoIGJhc2VkIG9uIGl0XG4gICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICAgIHJlc29sdmVkID0gcGF0aC5yZXNvbHZlKGhhc0N1c3RvbUN3ZCA/IHBhcnNlZC5vcHRpb25zLmN3ZCA6ICcnLCByZXNvbHZlZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlQ29tbWFuZChwYXJzZWQpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUNvbW1hbmRBdHRlbXB0KHBhcnNlZCkgfHwgcmVzb2x2ZUNvbW1hbmRBdHRlbXB0KHBhcnNlZCwgdHJ1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzb2x2ZUNvbW1hbmQ7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG4vLyBTZWUgaHR0cDovL3d3dy5yb2J2YW5kZXJ3b3VkZS5jb20vZXNjYXBlY2hhcnMucGhwXG5jb25zdCBtZXRhQ2hhcnNSZWdFeHAgPSAvKFsoKVxcXVslIV5cImA8PiZ8OywgKj9dKS9nO1xuXG5mdW5jdGlvbiBlc2NhcGVDb21tYW5kKGFyZykge1xuICAgIC8vIEVzY2FwZSBtZXRhIGNoYXJzXG4gICAgYXJnID0gYXJnLnJlcGxhY2UobWV0YUNoYXJzUmVnRXhwLCAnXiQxJyk7XG5cbiAgICByZXR1cm4gYXJnO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVBcmd1bWVudChhcmcsIGRvdWJsZUVzY2FwZU1ldGFDaGFycykge1xuICAgIC8vIENvbnZlcnQgdG8gc3RyaW5nXG4gICAgYXJnID0gYCR7YXJnfWA7XG5cbiAgICAvLyBBbGdvcml0aG0gYmVsb3cgaXMgYmFzZWQgb24gaHR0cHM6Ly9xbnRtLm9yZy9jbWRcbiAgICAvLyBJdCdzIHNsaWdodGx5IGFsdGVyZWQgdG8gZGlzYWJsZSBKUyBiYWNrdHJhY2tpbmcgdG8gYXZvaWQgaGFuZ2luZyBvbiBzcGVjaWFsbHkgY3JhZnRlZCBpbnB1dFxuICAgIC8vIFBsZWFzZSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21veHlzdHVkaW8vbm9kZS1jcm9zcy1zcGF3bi9wdWxsLzE2MCBmb3IgbW9yZSBpbmZvcm1hdGlvblxuXG4gICAgLy8gU2VxdWVuY2Ugb2YgYmFja3NsYXNoZXMgZm9sbG93ZWQgYnkgYSBkb3VibGUgcXVvdGU6XG4gICAgLy8gZG91YmxlIHVwIGFsbCB0aGUgYmFja3NsYXNoZXMgYW5kIGVzY2FwZSB0aGUgZG91YmxlIHF1b3RlXG4gICAgYXJnID0gYXJnLnJlcGxhY2UoLyg/PShcXFxcKz8pPylcXDFcIi9nLCAnJDEkMVxcXFxcIicpO1xuXG4gICAgLy8gU2VxdWVuY2Ugb2YgYmFja3NsYXNoZXMgZm9sbG93ZWQgYnkgdGhlIGVuZCBvZiB0aGUgc3RyaW5nXG4gICAgLy8gKHdoaWNoIHdpbGwgYmVjb21lIGEgZG91YmxlIHF1b3RlIGxhdGVyKTpcbiAgICAvLyBkb3VibGUgdXAgYWxsIHRoZSBiYWNrc2xhc2hlc1xuICAgIGFyZyA9IGFyZy5yZXBsYWNlKC8oPz0oXFxcXCs/KT8pXFwxJC8sICckMSQxJyk7XG5cbiAgICAvLyBBbGwgb3RoZXIgYmFja3NsYXNoZXMgb2NjdXIgbGl0ZXJhbGx5XG5cbiAgICAvLyBRdW90ZSB0aGUgd2hvbGUgdGhpbmc6XG4gICAgYXJnID0gYFwiJHthcmd9XCJgO1xuXG4gICAgLy8gRXNjYXBlIG1ldGEgY2hhcnNcbiAgICBhcmcgPSBhcmcucmVwbGFjZShtZXRhQ2hhcnNSZWdFeHAsICdeJDEnKTtcblxuICAgIC8vIERvdWJsZSBlc2NhcGUgbWV0YSBjaGFycyBpZiBuZWNlc3NhcnlcbiAgICBpZiAoZG91YmxlRXNjYXBlTWV0YUNoYXJzKSB7XG4gICAgICAgIGFyZyA9IGFyZy5yZXBsYWNlKG1ldGFDaGFyc1JlZ0V4cCwgJ14kMScpO1xuICAgIH1cblxuICAgIHJldHVybiBhcmc7XG59XG5cbm1vZHVsZS5leHBvcnRzLmNvbW1hbmQgPSBlc2NhcGVDb21tYW5kO1xubW9kdWxlLmV4cG9ydHMuYXJndW1lbnQgPSBlc2NhcGVBcmd1bWVudDtcbiIsICIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IC9eIyEoLiopLztcbiIsICIndXNlIHN0cmljdCc7XG5jb25zdCBzaGViYW5nUmVnZXggPSByZXF1aXJlKCdzaGViYW5nLXJlZ2V4Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKHN0cmluZyA9ICcnKSA9PiB7XG5cdGNvbnN0IG1hdGNoID0gc3RyaW5nLm1hdGNoKHNoZWJhbmdSZWdleCk7XG5cblx0aWYgKCFtYXRjaCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Y29uc3QgW3BhdGgsIGFyZ3VtZW50XSA9IG1hdGNoWzBdLnJlcGxhY2UoLyMhID8vLCAnJykuc3BsaXQoJyAnKTtcblx0Y29uc3QgYmluYXJ5ID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpO1xuXG5cdGlmIChiaW5hcnkgPT09ICdlbnYnKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50O1xuXHR9XG5cblx0cmV0dXJuIGFyZ3VtZW50ID8gYCR7YmluYXJ5fSAke2FyZ3VtZW50fWAgOiBiaW5hcnk7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3Qgc2hlYmFuZ0NvbW1hbmQgPSByZXF1aXJlKCdzaGViYW5nLWNvbW1hbmQnKTtcblxuZnVuY3Rpb24gcmVhZFNoZWJhbmcoY29tbWFuZCkge1xuICAgIC8vIFJlYWQgdGhlIGZpcnN0IDE1MCBieXRlcyBmcm9tIHRoZSBmaWxlXG4gICAgY29uc3Qgc2l6ZSA9IDE1MDtcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuYWxsb2Moc2l6ZSk7XG5cbiAgICBsZXQgZmQ7XG5cbiAgICB0cnkge1xuICAgICAgICBmZCA9IGZzLm9wZW5TeW5jKGNvbW1hbmQsICdyJyk7XG4gICAgICAgIGZzLnJlYWRTeW5jKGZkLCBidWZmZXIsIDAsIHNpemUsIDApO1xuICAgICAgICBmcy5jbG9zZVN5bmMoZmQpO1xuICAgIH0gY2F0Y2ggKGUpIHsgLyogRW1wdHkgKi8gfVxuXG4gICAgLy8gQXR0ZW1wdCB0byBleHRyYWN0IHNoZWJhbmcgKG51bGwgaXMgcmV0dXJuZWQgaWYgbm90IGEgc2hlYmFuZylcbiAgICByZXR1cm4gc2hlYmFuZ0NvbW1hbmQoYnVmZmVyLnRvU3RyaW5nKCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlYWRTaGViYW5nO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHJlc29sdmVDb21tYW5kID0gcmVxdWlyZSgnLi91dGlsL3Jlc29sdmVDb21tYW5kJyk7XG5jb25zdCBlc2NhcGUgPSByZXF1aXJlKCcuL3V0aWwvZXNjYXBlJyk7XG5jb25zdCByZWFkU2hlYmFuZyA9IHJlcXVpcmUoJy4vdXRpbC9yZWFkU2hlYmFuZycpO1xuXG5jb25zdCBpc1dpbiA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMic7XG5jb25zdCBpc0V4ZWN1dGFibGVSZWdFeHAgPSAvXFwuKD86Y29tfGV4ZSkkL2k7XG5jb25zdCBpc0NtZFNoaW1SZWdFeHAgPSAvbm9kZV9tb2R1bGVzW1xcXFwvXS5iaW5bXFxcXC9dW15cXFxcL10rXFwuY21kJC9pO1xuXG5mdW5jdGlvbiBkZXRlY3RTaGViYW5nKHBhcnNlZCkge1xuICAgIHBhcnNlZC5maWxlID0gcmVzb2x2ZUNvbW1hbmQocGFyc2VkKTtcblxuICAgIGNvbnN0IHNoZWJhbmcgPSBwYXJzZWQuZmlsZSAmJiByZWFkU2hlYmFuZyhwYXJzZWQuZmlsZSk7XG5cbiAgICBpZiAoc2hlYmFuZykge1xuICAgICAgICBwYXJzZWQuYXJncy51bnNoaWZ0KHBhcnNlZC5maWxlKTtcbiAgICAgICAgcGFyc2VkLmNvbW1hbmQgPSBzaGViYW5nO1xuXG4gICAgICAgIHJldHVybiByZXNvbHZlQ29tbWFuZChwYXJzZWQpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWQuZmlsZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOb25TaGVsbChwYXJzZWQpIHtcbiAgICBpZiAoIWlzV2luKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0ICYgYWRkIHN1cHBvcnQgZm9yIHNoZWJhbmdzXG4gICAgY29uc3QgY29tbWFuZEZpbGUgPSBkZXRlY3RTaGViYW5nKHBhcnNlZCk7XG5cbiAgICAvLyBXZSBkb24ndCBuZWVkIGEgc2hlbGwgaWYgdGhlIGNvbW1hbmQgZmlsZW5hbWUgaXMgYW4gZXhlY3V0YWJsZVxuICAgIGNvbnN0IG5lZWRzU2hlbGwgPSAhaXNFeGVjdXRhYmxlUmVnRXhwLnRlc3QoY29tbWFuZEZpbGUpO1xuXG4gICAgLy8gSWYgYSBzaGVsbCBpcyByZXF1aXJlZCwgdXNlIGNtZC5leGUgYW5kIHRha2UgY2FyZSBvZiBlc2NhcGluZyBldmVyeXRoaW5nIGNvcnJlY3RseVxuICAgIC8vIE5vdGUgdGhhdCBgZm9yY2VTaGVsbGAgaXMgYW4gaGlkZGVuIG9wdGlvbiB1c2VkIG9ubHkgaW4gdGVzdHNcbiAgICBpZiAocGFyc2VkLm9wdGlvbnMuZm9yY2VTaGVsbCB8fCBuZWVkc1NoZWxsKSB7XG4gICAgICAgIC8vIE5lZWQgdG8gZG91YmxlIGVzY2FwZSBtZXRhIGNoYXJzIGlmIHRoZSBjb21tYW5kIGlzIGEgY21kLXNoaW0gbG9jYXRlZCBpbiBgbm9kZV9tb2R1bGVzLy5iaW4vYFxuICAgICAgICAvLyBUaGUgY21kLXNoaW0gc2ltcGx5IGNhbGxzIGV4ZWN1dGUgdGhlIHBhY2thZ2UgYmluIGZpbGUgd2l0aCBOb2RlSlMsIHByb3h5aW5nIGFueSBhcmd1bWVudFxuICAgICAgICAvLyBCZWNhdXNlIHRoZSBlc2NhcGUgb2YgbWV0YWNoYXJzIHdpdGggXiBnZXRzIGludGVycHJldGVkIHdoZW4gdGhlIGNtZC5leGUgaXMgZmlyc3QgY2FsbGVkLFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIGRvdWJsZSBlc2NhcGUgdGhlbVxuICAgICAgICBjb25zdCBuZWVkc0RvdWJsZUVzY2FwZU1ldGFDaGFycyA9IGlzQ21kU2hpbVJlZ0V4cC50ZXN0KGNvbW1hbmRGaWxlKTtcblxuICAgICAgICAvLyBOb3JtYWxpemUgcG9zaXggcGF0aHMgaW50byBPUyBjb21wYXRpYmxlIHBhdGhzIChlLmcuOiBmb28vYmFyIC0+IGZvb1xcYmFyKVxuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBvdGhlcndpc2UgaXQgd2lsbCBhbHdheXMgZmFpbCB3aXRoIEVOT0VOVCBpbiB0aG9zZSBjYXNlc1xuICAgICAgICBwYXJzZWQuY29tbWFuZCA9IHBhdGgubm9ybWFsaXplKHBhcnNlZC5jb21tYW5kKTtcblxuICAgICAgICAvLyBFc2NhcGUgY29tbWFuZCAmIGFyZ3VtZW50c1xuICAgICAgICBwYXJzZWQuY29tbWFuZCA9IGVzY2FwZS5jb21tYW5kKHBhcnNlZC5jb21tYW5kKTtcbiAgICAgICAgcGFyc2VkLmFyZ3MgPSBwYXJzZWQuYXJncy5tYXAoKGFyZykgPT4gZXNjYXBlLmFyZ3VtZW50KGFyZywgbmVlZHNEb3VibGVFc2NhcGVNZXRhQ2hhcnMpKTtcblxuICAgICAgICBjb25zdCBzaGVsbENvbW1hbmQgPSBbcGFyc2VkLmNvbW1hbmRdLmNvbmNhdChwYXJzZWQuYXJncykuam9pbignICcpO1xuXG4gICAgICAgIHBhcnNlZC5hcmdzID0gWycvZCcsICcvcycsICcvYycsIGBcIiR7c2hlbGxDb21tYW5kfVwiYF07XG4gICAgICAgIHBhcnNlZC5jb21tYW5kID0gcHJvY2Vzcy5lbnYuY29tc3BlYyB8fCAnY21kLmV4ZSc7XG4gICAgICAgIHBhcnNlZC5vcHRpb25zLndpbmRvd3NWZXJiYXRpbUFyZ3VtZW50cyA9IHRydWU7IC8vIFRlbGwgbm9kZSdzIHNwYXduIHRoYXQgdGhlIGFyZ3VtZW50cyBhcmUgYWxyZWFkeSBlc2NhcGVkXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZDtcbn1cblxuZnVuY3Rpb24gcGFyc2UoY29tbWFuZCwgYXJncywgb3B0aW9ucykge1xuICAgIC8vIE5vcm1hbGl6ZSBhcmd1bWVudHMsIHNpbWlsYXIgdG8gbm9kZWpzXG4gICAgaWYgKGFyZ3MgJiYgIUFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgb3B0aW9ucyA9IGFyZ3M7XG4gICAgICAgIGFyZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIGFyZ3MgPSBhcmdzID8gYXJncy5zbGljZSgwKSA6IFtdOyAvLyBDbG9uZSBhcnJheSB0byBhdm9pZCBjaGFuZ2luZyB0aGUgb3JpZ2luYWxcbiAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7IC8vIENsb25lIG9iamVjdCB0byBhdm9pZCBjaGFuZ2luZyB0aGUgb3JpZ2luYWxcblxuICAgIC8vIEJ1aWxkIG91ciBwYXJzZWQgb2JqZWN0XG4gICAgY29uc3QgcGFyc2VkID0ge1xuICAgICAgICBjb21tYW5kLFxuICAgICAgICBhcmdzLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBmaWxlOiB1bmRlZmluZWQsXG4gICAgICAgIG9yaWdpbmFsOiB7XG4gICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gRGVsZWdhdGUgZnVydGhlciBwYXJzaW5nIHRvIHNoZWxsIG9yIG5vbi1zaGVsbFxuICAgIHJldHVybiBvcHRpb25zLnNoZWxsID8gcGFyc2VkIDogcGFyc2VOb25TaGVsbChwYXJzZWQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlO1xuIiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgaXNXaW4gPSBwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInO1xuXG5mdW5jdGlvbiBub3RGb3VuZEVycm9yKG9yaWdpbmFsLCBzeXNjYWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IEVycm9yKGAke3N5c2NhbGx9ICR7b3JpZ2luYWwuY29tbWFuZH0gRU5PRU5UYCksIHtcbiAgICAgICAgY29kZTogJ0VOT0VOVCcsXG4gICAgICAgIGVycm5vOiAnRU5PRU5UJyxcbiAgICAgICAgc3lzY2FsbDogYCR7c3lzY2FsbH0gJHtvcmlnaW5hbC5jb21tYW5kfWAsXG4gICAgICAgIHBhdGg6IG9yaWdpbmFsLmNvbW1hbmQsXG4gICAgICAgIHNwYXduYXJnczogb3JpZ2luYWwuYXJncyxcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaG9va0NoaWxkUHJvY2VzcyhjcCwgcGFyc2VkKSB7XG4gICAgaWYgKCFpc1dpbikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ2luYWxFbWl0ID0gY3AuZW1pdDtcblxuICAgIGNwLmVtaXQgPSBmdW5jdGlvbiAobmFtZSwgYXJnMSkge1xuICAgICAgICAvLyBJZiBlbWl0dGluZyBcImV4aXRcIiBldmVudCBhbmQgZXhpdCBjb2RlIGlzIDEsIHdlIG5lZWQgdG8gY2hlY2sgaWZcbiAgICAgICAgLy8gdGhlIGNvbW1hbmQgZXhpc3RzIGFuZCBlbWl0IGFuIFwiZXJyb3JcIiBpbnN0ZWFkXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vSW5kaWdvVW5pdGVkL25vZGUtY3Jvc3Mtc3Bhd24vaXNzdWVzLzE2XG4gICAgICAgIGlmIChuYW1lID09PSAnZXhpdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IHZlcmlmeUVOT0VOVChhcmcxLCBwYXJzZWQpO1xuXG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRW1pdC5jYWxsKGNwLCAnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsRW1pdC5hcHBseShjcCwgYXJndW1lbnRzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlFTk9FTlQoc3RhdHVzLCBwYXJzZWQpIHtcbiAgICBpZiAoaXNXaW4gJiYgc3RhdHVzID09PSAxICYmICFwYXJzZWQuZmlsZSkge1xuICAgICAgICByZXR1cm4gbm90Rm91bmRFcnJvcihwYXJzZWQub3JpZ2luYWwsICdzcGF3bicpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlFTk9FTlRTeW5jKHN0YXR1cywgcGFyc2VkKSB7XG4gICAgaWYgKGlzV2luICYmIHN0YXR1cyA9PT0gMSAmJiAhcGFyc2VkLmZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG5vdEZvdW5kRXJyb3IocGFyc2VkLm9yaWdpbmFsLCAnc3Bhd25TeW5jJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGhvb2tDaGlsZFByb2Nlc3MsXG4gICAgdmVyaWZ5RU5PRU5ULFxuICAgIHZlcmlmeUVOT0VOVFN5bmMsXG4gICAgbm90Rm91bmRFcnJvcixcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBjcCA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKTtcbmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnLi9saWIvcGFyc2UnKTtcbmNvbnN0IGVub2VudCA9IHJlcXVpcmUoJy4vbGliL2Vub2VudCcpO1xuXG5mdW5jdGlvbiBzcGF3bihjb21tYW5kLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgLy8gUGFyc2UgdGhlIGFyZ3VtZW50c1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpO1xuXG4gICAgLy8gU3Bhd24gdGhlIGNoaWxkIHByb2Nlc3NcbiAgICBjb25zdCBzcGF3bmVkID0gY3Auc3Bhd24ocGFyc2VkLmNvbW1hbmQsIHBhcnNlZC5hcmdzLCBwYXJzZWQub3B0aW9ucyk7XG5cbiAgICAvLyBIb29rIGludG8gY2hpbGQgcHJvY2VzcyBcImV4aXRcIiBldmVudCB0byBlbWl0IGFuIGVycm9yIGlmIHRoZSBjb21tYW5kXG4gICAgLy8gZG9lcyBub3QgZXhpc3RzLCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9JbmRpZ29Vbml0ZWQvbm9kZS1jcm9zcy1zcGF3bi9pc3N1ZXMvMTZcbiAgICBlbm9lbnQuaG9va0NoaWxkUHJvY2VzcyhzcGF3bmVkLCBwYXJzZWQpO1xuXG4gICAgcmV0dXJuIHNwYXduZWQ7XG59XG5cbmZ1bmN0aW9uIHNwYXduU3luYyhjb21tYW5kLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgLy8gUGFyc2UgdGhlIGFyZ3VtZW50c1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpO1xuXG4gICAgLy8gU3Bhd24gdGhlIGNoaWxkIHByb2Nlc3NcbiAgICBjb25zdCByZXN1bHQgPSBjcC5zcGF3blN5bmMocGFyc2VkLmNvbW1hbmQsIHBhcnNlZC5hcmdzLCBwYXJzZWQub3B0aW9ucyk7XG5cbiAgICAvLyBBbmFseXplIGlmIHRoZSBjb21tYW5kIGRvZXMgbm90IGV4aXN0LCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9JbmRpZ29Vbml0ZWQvbm9kZS1jcm9zcy1zcGF3bi9pc3N1ZXMvMTZcbiAgICByZXN1bHQuZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgZW5vZW50LnZlcmlmeUVOT0VOVFN5bmMocmVzdWx0LnN0YXR1cywgcGFyc2VkKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3Bhd247XG5tb2R1bGUuZXhwb3J0cy5zcGF3biA9IHNwYXduO1xubW9kdWxlLmV4cG9ydHMuc3luYyA9IHNwYXduU3luYztcblxubW9kdWxlLmV4cG9ydHMuX3BhcnNlID0gcGFyc2U7XG5tb2R1bGUuZXhwb3J0cy5fZW5vZW50ID0gZW5vZW50O1xuIiwgIi8vIFRoaXMgaXMgbm90IHRoZSBzZXQgb2YgYWxsIHBvc3NpYmxlIHNpZ25hbHMuXG4vL1xuLy8gSXQgSVMsIGhvd2V2ZXIsIHRoZSBzZXQgb2YgYWxsIHNpZ25hbHMgdGhhdCB0cmlnZ2VyXG4vLyBhbiBleGl0IG9uIGVpdGhlciBMaW51eCBvciBCU0Qgc3lzdGVtcy4gIExpbnV4IGlzIGFcbi8vIHN1cGVyc2V0IG9mIHRoZSBzaWduYWwgbmFtZXMgc3VwcG9ydGVkIG9uIEJTRCwgYW5kXG4vLyB0aGUgdW5rbm93biBzaWduYWxzIGp1c3QgZmFpbCB0byByZWdpc3Rlciwgc28gd2UgY2FuXG4vLyBjYXRjaCB0aGF0IGVhc2lseSBlbm91Z2guXG4vL1xuLy8gRG9uJ3QgYm90aGVyIHdpdGggU0lHS0lMTC4gIEl0J3MgdW5jYXRjaGFibGUsIHdoaWNoXG4vLyBtZWFucyB0aGF0IHdlIGNhbid0IGZpcmUgYW55IGNhbGxiYWNrcyBhbnl3YXkuXG4vL1xuLy8gSWYgYSB1c2VyIGRvZXMgaGFwcGVuIHRvIHJlZ2lzdGVyIGEgaGFuZGxlciBvbiBhIG5vbi1cbi8vIGZhdGFsIHNpZ25hbCBsaWtlIFNJR1dJTkNIIG9yIHNvbWV0aGluZywgYW5kIHRoZW5cbi8vIGV4aXQsIGl0J2xsIGVuZCB1cCBmaXJpbmcgYHByb2Nlc3MuZW1pdCgnZXhpdCcpYCwgc29cbi8vIHRoZSBoYW5kbGVyIHdpbGwgYmUgZmlyZWQgYW55d2F5LlxuLy9cbi8vIFNJR0JVUywgU0lHRlBFLCBTSUdTRUdWIGFuZCBTSUdJTEwsIHdoZW4gbm90IHJhaXNlZFxuLy8gYXJ0aWZpY2lhbGx5LCBpbmhlcmVudGx5IGxlYXZlIHRoZSBwcm9jZXNzIGluIGFcbi8vIHN0YXRlIGZyb20gd2hpY2ggaXQgaXMgbm90IHNhZmUgdG8gdHJ5IGFuZCBlbnRlciBKU1xuLy8gbGlzdGVuZXJzLlxubW9kdWxlLmV4cG9ydHMgPSBbXG4gICdTSUdBQlJUJyxcbiAgJ1NJR0FMUk0nLFxuICAnU0lHSFVQJyxcbiAgJ1NJR0lOVCcsXG4gICdTSUdURVJNJ1xuXVxuXG5pZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gJ3dpbjMyJykge1xuICBtb2R1bGUuZXhwb3J0cy5wdXNoKFxuICAgICdTSUdWVEFMUk0nLFxuICAgICdTSUdYQ1BVJyxcbiAgICAnU0lHWEZTWicsXG4gICAgJ1NJR1VTUjInLFxuICAgICdTSUdUUkFQJyxcbiAgICAnU0lHU1lTJyxcbiAgICAnU0lHUVVJVCcsXG4gICAgJ1NJR0lPVCdcbiAgICAvLyBzaG91bGQgZGV0ZWN0IHByb2ZpbGVyIGFuZCBlbmFibGUvZGlzYWJsZSBhY2NvcmRpbmdseS5cbiAgICAvLyBzZWUgIzIxXG4gICAgLy8gJ1NJR1BST0YnXG4gIClcbn1cblxuaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdsaW51eCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMucHVzaChcbiAgICAnU0lHSU8nLFxuICAgICdTSUdQT0xMJyxcbiAgICAnU0lHUFdSJyxcbiAgICAnU0lHU1RLRkxUJyxcbiAgICAnU0lHVU5VU0VEJ1xuICApXG59XG4iLCAiLy8gTm90ZTogc2luY2UgbnljIHVzZXMgdGhpcyBtb2R1bGUgdG8gb3V0cHV0IGNvdmVyYWdlLCBhbnkgbGluZXNcbi8vIHRoYXQgYXJlIGluIHRoZSBkaXJlY3Qgc3luYyBmbG93IG9mIG55YydzIG91dHB1dENvdmVyYWdlIGFyZVxuLy8gaWdub3JlZCwgc2luY2Ugd2UgY2FuIG5ldmVyIGdldCBjb3ZlcmFnZSBmb3IgdGhlbS5cbi8vIGdyYWIgYSByZWZlcmVuY2UgdG8gbm9kZSdzIHJlYWwgcHJvY2VzcyBvYmplY3QgcmlnaHQgYXdheVxudmFyIHByb2Nlc3MgPSBnbG9iYWwucHJvY2Vzc1xuXG5jb25zdCBwcm9jZXNzT2sgPSBmdW5jdGlvbiAocHJvY2Vzcykge1xuICByZXR1cm4gcHJvY2VzcyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHByb2Nlc3MuZW1pdCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnJlYWxseUV4aXQgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5saXN0ZW5lcnMgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5raWxsID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHByb2Nlc3MucGlkID09PSAnbnVtYmVyJyAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLm9uID09PSAnZnVuY3Rpb24nXG59XG5cbi8vIHNvbWUga2luZCBvZiBub24tbm9kZSBlbnZpcm9ubWVudCwganVzdCBuby1vcFxuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAoIXByb2Nlc3NPayhwcm9jZXNzKSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge31cbiAgfVxufSBlbHNlIHtcbiAgdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpXG4gIHZhciBzaWduYWxzID0gcmVxdWlyZSgnLi9zaWduYWxzLmpzJylcbiAgdmFyIGlzV2luID0gL153aW4vaS50ZXN0KHByb2Nlc3MucGxhdGZvcm0pXG5cbiAgdmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJylcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgRUUgIT09ICdmdW5jdGlvbicpIHtcbiAgICBFRSA9IEVFLkV2ZW50RW1pdHRlclxuICB9XG5cbiAgdmFyIGVtaXR0ZXJcbiAgaWYgKHByb2Nlc3MuX19zaWduYWxfZXhpdF9lbWl0dGVyX18pIHtcbiAgICBlbWl0dGVyID0gcHJvY2Vzcy5fX3NpZ25hbF9leGl0X2VtaXR0ZXJfX1xuICB9IGVsc2Uge1xuICAgIGVtaXR0ZXIgPSBwcm9jZXNzLl9fc2lnbmFsX2V4aXRfZW1pdHRlcl9fID0gbmV3IEVFKClcbiAgICBlbWl0dGVyLmNvdW50ID0gMFxuICAgIGVtaXR0ZXIuZW1pdHRlZCA9IHt9XG4gIH1cblxuICAvLyBCZWNhdXNlIHRoaXMgZW1pdHRlciBpcyBhIGdsb2JhbCwgd2UgaGF2ZSB0byBjaGVjayB0byBzZWUgaWYgYVxuICAvLyBwcmV2aW91cyB2ZXJzaW9uIG9mIHRoaXMgbGlicmFyeSBmYWlsZWQgdG8gZW5hYmxlIGluZmluaXRlIGxpc3RlbmVycy5cbiAgLy8gSSBrbm93IHdoYXQgeW91J3JlIGFib3V0IHRvIHNheS4gIEJ1dCBsaXRlcmFsbHkgZXZlcnl0aGluZyBhYm91dFxuICAvLyBzaWduYWwtZXhpdCBpcyBhIGNvbXByb21pc2Ugd2l0aCBldmlsLiAgR2V0IHVzZWQgdG8gaXQuXG4gIGlmICghZW1pdHRlci5pbmZpbml0ZSkge1xuICAgIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKEluZmluaXR5KVxuICAgIGVtaXR0ZXIuaW5maW5pdGUgPSB0cnVlXG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjYiwgb3B0cykge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghcHJvY2Vzc09rKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHt9XG4gICAgfVxuICAgIGFzc2VydC5lcXVhbCh0eXBlb2YgY2IsICdmdW5jdGlvbicsICdhIGNhbGxiYWNrIG11c3QgYmUgcHJvdmlkZWQgZm9yIGV4aXQgaGFuZGxlcicpXG5cbiAgICBpZiAobG9hZGVkID09PSBmYWxzZSkge1xuICAgICAgbG9hZCgpXG4gICAgfVxuXG4gICAgdmFyIGV2ID0gJ2V4aXQnXG4gICAgaWYgKG9wdHMgJiYgb3B0cy5hbHdheXNMYXN0KSB7XG4gICAgICBldiA9ICdhZnRlcmV4aXQnXG4gICAgfVxuXG4gICAgdmFyIHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXYsIGNiKVxuICAgICAgaWYgKGVtaXR0ZXIubGlzdGVuZXJzKCdleGl0JykubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgZW1pdHRlci5saXN0ZW5lcnMoJ2FmdGVyZXhpdCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB1bmxvYWQoKVxuICAgICAgfVxuICAgIH1cbiAgICBlbWl0dGVyLm9uKGV2LCBjYilcblxuICAgIHJldHVybiByZW1vdmVcbiAgfVxuXG4gIHZhciB1bmxvYWQgPSBmdW5jdGlvbiB1bmxvYWQgKCkge1xuICAgIGlmICghbG9hZGVkIHx8ICFwcm9jZXNzT2soZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbG9hZGVkID0gZmFsc2VcblxuICAgIHNpZ25hbHMuZm9yRWFjaChmdW5jdGlvbiAoc2lnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwcm9jZXNzLnJlbW92ZUxpc3RlbmVyKHNpZywgc2lnTGlzdGVuZXJzW3NpZ10pXG4gICAgICB9IGNhdGNoIChlcikge31cbiAgICB9KVxuICAgIHByb2Nlc3MuZW1pdCA9IG9yaWdpbmFsUHJvY2Vzc0VtaXRcbiAgICBwcm9jZXNzLnJlYWxseUV4aXQgPSBvcmlnaW5hbFByb2Nlc3NSZWFsbHlFeGl0XG4gICAgZW1pdHRlci5jb3VudCAtPSAxXG4gIH1cbiAgbW9kdWxlLmV4cG9ydHMudW5sb2FkID0gdW5sb2FkXG5cbiAgdmFyIGVtaXQgPSBmdW5jdGlvbiBlbWl0IChldmVudCwgY29kZSwgc2lnbmFsKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGVtaXR0ZXIuZW1pdHRlZFtldmVudF0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBlbWl0dGVyLmVtaXR0ZWRbZXZlbnRdID0gdHJ1ZVxuICAgIGVtaXR0ZXIuZW1pdChldmVudCwgY29kZSwgc2lnbmFsKVxuICB9XG5cbiAgLy8geyA8c2lnbmFsPjogPGxpc3RlbmVyIGZuPiwgLi4uIH1cbiAgdmFyIHNpZ0xpc3RlbmVycyA9IHt9XG4gIHNpZ25hbHMuZm9yRWFjaChmdW5jdGlvbiAoc2lnKSB7XG4gICAgc2lnTGlzdGVuZXJzW3NpZ10gPSBmdW5jdGlvbiBsaXN0ZW5lciAoKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghcHJvY2Vzc09rKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGFuIGV4aXQgaXMgY29taW5nIVxuICAgICAgLy8gU2ltcGxlc3Qgd2F5OiByZW1vdmUgdXMgYW5kIHRoZW4gcmUtc2VuZCB0aGUgc2lnbmFsLlxuICAgICAgLy8gV2Uga25vdyB0aGF0IHRoaXMgd2lsbCBraWxsIHRoZSBwcm9jZXNzLCBzbyB3ZSBjYW5cbiAgICAgIC8vIHNhZmVseSBlbWl0IG5vdy5cbiAgICAgIHZhciBsaXN0ZW5lcnMgPSBwcm9jZXNzLmxpc3RlbmVycyhzaWcpXG4gICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gZW1pdHRlci5jb3VudCkge1xuICAgICAgICB1bmxvYWQoKVxuICAgICAgICBlbWl0KCdleGl0JywgbnVsbCwgc2lnKVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBlbWl0KCdhZnRlcmV4aXQnLCBudWxsLCBzaWcpXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGlmIChpc1dpbiAmJiBzaWcgPT09ICdTSUdIVVAnKSB7XG4gICAgICAgICAgLy8gXCJTSUdIVVBcIiB0aHJvd3MgYW4gYEVOT1NZU2AgZXJyb3Igb24gV2luZG93cyxcbiAgICAgICAgICAvLyBzbyB1c2UgYSBzdXBwb3J0ZWQgc2lnbmFsIGluc3RlYWRcbiAgICAgICAgICBzaWcgPSAnU0lHSU5UJ1xuICAgICAgICB9XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHByb2Nlc3Mua2lsbChwcm9jZXNzLnBpZCwgc2lnKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBtb2R1bGUuZXhwb3J0cy5zaWduYWxzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzaWduYWxzXG4gIH1cblxuICB2YXIgbG9hZGVkID0gZmFsc2VcblxuICB2YXIgbG9hZCA9IGZ1bmN0aW9uIGxvYWQgKCkge1xuICAgIGlmIChsb2FkZWQgfHwgIXByb2Nlc3NPayhnbG9iYWwucHJvY2VzcykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsb2FkZWQgPSB0cnVlXG5cbiAgICAvLyBUaGlzIGlzIHRoZSBudW1iZXIgb2Ygb25TaWduYWxFeGl0J3MgdGhhdCBhcmUgaW4gcGxheS5cbiAgICAvLyBJdCdzIGltcG9ydGFudCBzbyB0aGF0IHdlIGNhbiBjb3VudCB0aGUgY29ycmVjdCBudW1iZXIgb2ZcbiAgICAvLyBsaXN0ZW5lcnMgb24gc2lnbmFscywgYW5kIGRvbid0IHdhaXQgZm9yIHRoZSBvdGhlciBvbmUgdG9cbiAgICAvLyBoYW5kbGUgaXQgaW5zdGVhZCBvZiB1cy5cbiAgICBlbWl0dGVyLmNvdW50ICs9IDFcblxuICAgIHNpZ25hbHMgPSBzaWduYWxzLmZpbHRlcihmdW5jdGlvbiAoc2lnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwcm9jZXNzLm9uKHNpZywgc2lnTGlzdGVuZXJzW3NpZ10pXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlcikge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcHJvY2Vzcy5lbWl0ID0gcHJvY2Vzc0VtaXRcbiAgICBwcm9jZXNzLnJlYWxseUV4aXQgPSBwcm9jZXNzUmVhbGx5RXhpdFxuICB9XG4gIG1vZHVsZS5leHBvcnRzLmxvYWQgPSBsb2FkXG5cbiAgdmFyIG9yaWdpbmFsUHJvY2Vzc1JlYWxseUV4aXQgPSBwcm9jZXNzLnJlYWxseUV4aXRcbiAgdmFyIHByb2Nlc3NSZWFsbHlFeGl0ID0gZnVuY3Rpb24gcHJvY2Vzc1JlYWxseUV4aXQgKGNvZGUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXByb2Nlc3NPayhnbG9iYWwucHJvY2VzcykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBwcm9jZXNzLmV4aXRDb2RlID0gY29kZSB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyAwXG4gICAgZW1pdCgnZXhpdCcsIHByb2Nlc3MuZXhpdENvZGUsIG51bGwpXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBlbWl0KCdhZnRlcmV4aXQnLCBwcm9jZXNzLmV4aXRDb2RlLCBudWxsKVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgb3JpZ2luYWxQcm9jZXNzUmVhbGx5RXhpdC5jYWxsKHByb2Nlc3MsIHByb2Nlc3MuZXhpdENvZGUpXG4gIH1cblxuICB2YXIgb3JpZ2luYWxQcm9jZXNzRW1pdCA9IHByb2Nlc3MuZW1pdFxuICB2YXIgcHJvY2Vzc0VtaXQgPSBmdW5jdGlvbiBwcm9jZXNzRW1pdCAoZXYsIGFyZykge1xuICAgIGlmIChldiA9PT0gJ2V4aXQnICYmIHByb2Nlc3NPayhnbG9iYWwucHJvY2VzcykpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICBpZiAoYXJnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0Q29kZSA9IGFyZ1xuICAgICAgfVxuICAgICAgdmFyIHJldCA9IG9yaWdpbmFsUHJvY2Vzc0VtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGVtaXQoJ2V4aXQnLCBwcm9jZXNzLmV4aXRDb2RlLCBudWxsKVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGVtaXQoJ2FmdGVyZXhpdCcsIHByb2Nlc3MuZXhpdENvZGUsIG51bGwpXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgcmV0dXJuIHJldFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxQcm9jZXNzRW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xuY29uc3Qge1Bhc3NUaHJvdWdoOiBQYXNzVGhyb3VnaFN0cmVhbX0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBvcHRpb25zID0+IHtcblx0b3B0aW9ucyA9IHsuLi5vcHRpb25zfTtcblxuXHRjb25zdCB7YXJyYXl9ID0gb3B0aW9ucztcblx0bGV0IHtlbmNvZGluZ30gPSBvcHRpb25zO1xuXHRjb25zdCBpc0J1ZmZlciA9IGVuY29kaW5nID09PSAnYnVmZmVyJztcblx0bGV0IG9iamVjdE1vZGUgPSBmYWxzZTtcblxuXHRpZiAoYXJyYXkpIHtcblx0XHRvYmplY3RNb2RlID0gIShlbmNvZGluZyB8fCBpc0J1ZmZlcik7XG5cdH0gZWxzZSB7XG5cdFx0ZW5jb2RpbmcgPSBlbmNvZGluZyB8fCAndXRmOCc7XG5cdH1cblxuXHRpZiAoaXNCdWZmZXIpIHtcblx0XHRlbmNvZGluZyA9IG51bGw7XG5cdH1cblxuXHRjb25zdCBzdHJlYW0gPSBuZXcgUGFzc1Rocm91Z2hTdHJlYW0oe29iamVjdE1vZGV9KTtcblxuXHRpZiAoZW5jb2RpbmcpIHtcblx0XHRzdHJlYW0uc2V0RW5jb2RpbmcoZW5jb2RpbmcpO1xuXHR9XG5cblx0bGV0IGxlbmd0aCA9IDA7XG5cdGNvbnN0IGNodW5rcyA9IFtdO1xuXG5cdHN0cmVhbS5vbignZGF0YScsIGNodW5rID0+IHtcblx0XHRjaHVua3MucHVzaChjaHVuayk7XG5cblx0XHRpZiAob2JqZWN0TW9kZSkge1xuXHRcdFx0bGVuZ3RoID0gY2h1bmtzLmxlbmd0aDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGVuZ3RoICs9IGNodW5rLmxlbmd0aDtcblx0XHR9XG5cdH0pO1xuXG5cdHN0cmVhbS5nZXRCdWZmZXJlZFZhbHVlID0gKCkgPT4ge1xuXHRcdGlmIChhcnJheSkge1xuXHRcdFx0cmV0dXJuIGNodW5rcztcblx0XHR9XG5cblx0XHRyZXR1cm4gaXNCdWZmZXIgPyBCdWZmZXIuY29uY2F0KGNodW5rcywgbGVuZ3RoKSA6IGNodW5rcy5qb2luKCcnKTtcblx0fTtcblxuXHRzdHJlYW0uZ2V0QnVmZmVyZWRMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG5cblx0cmV0dXJuIHN0cmVhbTtcbn07XG4iLCAiJ3VzZSBzdHJpY3QnO1xuY29uc3Qge2NvbnN0YW50czogQnVmZmVyQ29uc3RhbnRzfSA9IHJlcXVpcmUoJ2J1ZmZlcicpO1xuY29uc3Qgc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5jb25zdCB7cHJvbWlzaWZ5fSA9IHJlcXVpcmUoJ3V0aWwnKTtcbmNvbnN0IGJ1ZmZlclN0cmVhbSA9IHJlcXVpcmUoJy4vYnVmZmVyLXN0cmVhbScpO1xuXG5jb25zdCBzdHJlYW1QaXBlbGluZVByb21pc2lmaWVkID0gcHJvbWlzaWZ5KHN0cmVhbS5waXBlbGluZSk7XG5cbmNsYXNzIE1heEJ1ZmZlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcignbWF4QnVmZmVyIGV4Y2VlZGVkJyk7XG5cdFx0dGhpcy5uYW1lID0gJ01heEJ1ZmZlckVycm9yJztcblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRTdHJlYW0oaW5wdXRTdHJlYW0sIG9wdGlvbnMpIHtcblx0aWYgKCFpbnB1dFN0cmVhbSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgYSBzdHJlYW0nKTtcblx0fVxuXG5cdG9wdGlvbnMgPSB7XG5cdFx0bWF4QnVmZmVyOiBJbmZpbml0eSxcblx0XHQuLi5vcHRpb25zXG5cdH07XG5cblx0Y29uc3Qge21heEJ1ZmZlcn0gPSBvcHRpb25zO1xuXHRjb25zdCBzdHJlYW0gPSBidWZmZXJTdHJlYW0ob3B0aW9ucyk7XG5cblx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGNvbnN0IHJlamVjdFByb21pc2UgPSBlcnJvciA9PiB7XG5cdFx0XHQvLyBEb24ndCByZXRyaWV2ZSBhbiBvdmVyc2l6ZWQgYnVmZmVyLlxuXHRcdFx0aWYgKGVycm9yICYmIHN0cmVhbS5nZXRCdWZmZXJlZExlbmd0aCgpIDw9IEJ1ZmZlckNvbnN0YW50cy5NQVhfTEVOR1RIKSB7XG5cdFx0XHRcdGVycm9yLmJ1ZmZlcmVkRGF0YSA9IHN0cmVhbS5nZXRCdWZmZXJlZFZhbHVlKCk7XG5cdFx0XHR9XG5cblx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0fTtcblxuXHRcdChhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBzdHJlYW1QaXBlbGluZVByb21pc2lmaWVkKGlucHV0U3RyZWFtLCBzdHJlYW0pO1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRyZWplY3RQcm9taXNlKGVycm9yKTtcblx0XHRcdH1cblx0XHR9KSgpO1xuXG5cdFx0c3RyZWFtLm9uKCdkYXRhJywgKCkgPT4ge1xuXHRcdFx0aWYgKHN0cmVhbS5nZXRCdWZmZXJlZExlbmd0aCgpID4gbWF4QnVmZmVyKSB7XG5cdFx0XHRcdHJlamVjdFByb21pc2UobmV3IE1heEJ1ZmZlckVycm9yKCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXR1cm4gc3RyZWFtLmdldEJ1ZmZlcmVkVmFsdWUoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRTdHJlYW07XG5tb2R1bGUuZXhwb3J0cy5idWZmZXIgPSAoc3RyZWFtLCBvcHRpb25zKSA9PiBnZXRTdHJlYW0oc3RyZWFtLCB7Li4ub3B0aW9ucywgZW5jb2Rpbmc6ICdidWZmZXInfSk7XG5tb2R1bGUuZXhwb3J0cy5hcnJheSA9IChzdHJlYW0sIG9wdGlvbnMpID0+IGdldFN0cmVhbShzdHJlYW0sIHsuLi5vcHRpb25zLCBhcnJheTogdHJ1ZX0pO1xubW9kdWxlLmV4cG9ydHMuTWF4QnVmZmVyRXJyb3IgPSBNYXhCdWZmZXJFcnJvcjtcbiIsICIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgUGFzc1Rocm91Z2ggfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgvKnN0cmVhbXMuLi4qLykge1xuICB2YXIgc291cmNlcyA9IFtdXG4gIHZhciBvdXRwdXQgID0gbmV3IFBhc3NUaHJvdWdoKHtvYmplY3RNb2RlOiB0cnVlfSlcblxuICBvdXRwdXQuc2V0TWF4TGlzdGVuZXJzKDApXG5cbiAgb3V0cHV0LmFkZCA9IGFkZFxuICBvdXRwdXQuaXNFbXB0eSA9IGlzRW1wdHlcblxuICBvdXRwdXQub24oJ3VucGlwZScsIHJlbW92ZSlcblxuICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLmZvckVhY2goYWRkKVxuXG4gIHJldHVybiBvdXRwdXRcblxuICBmdW5jdGlvbiBhZGQgKHNvdXJjZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgIHNvdXJjZS5mb3JFYWNoKGFkZClcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgc291cmNlcy5wdXNoKHNvdXJjZSk7XG4gICAgc291cmNlLm9uY2UoJ2VuZCcsIHJlbW92ZS5iaW5kKG51bGwsIHNvdXJjZSkpXG4gICAgc291cmNlLm9uY2UoJ2Vycm9yJywgb3V0cHV0LmVtaXQuYmluZChvdXRwdXQsICdlcnJvcicpKVxuICAgIHNvdXJjZS5waXBlKG91dHB1dCwge2VuZDogZmFsc2V9KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBmdW5jdGlvbiBpc0VtcHR5ICgpIHtcbiAgICByZXR1cm4gc291cmNlcy5sZW5ndGggPT0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSAoc291cmNlKSB7XG4gICAgc291cmNlcyA9IHNvdXJjZXMuZmlsdGVyKGZ1bmN0aW9uIChpdCkgeyByZXR1cm4gaXQgIT09IHNvdXJjZSB9KVxuICAgIGlmICghc291cmNlcy5sZW5ndGggJiYgb3V0cHV0LnJlYWRhYmxlKSB7IG91dHB1dC5lbmQoKSB9XG4gIH1cbn1cbiIsICIvKipcbiAqIEBsaWNlbnNlIG5vZGUtc3RyZWFtLXppcCB8IChjKSAyMDIwIEFudGVsbGUgfCBodHRwczovL2dpdGh1Yi5jb20vYW50ZWxsZS9ub2RlLXN0cmVhbS16aXAvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogUG9ydGlvbnMgY29weXJpZ2h0IGh0dHBzOi8vZ2l0aHViLmNvbS9jdGhhY2tlcnMvYWRtLXppcCB8IGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jdGhhY2tlcnMvYWRtLXppcC9tYXN0ZXIvTElDRU5TRVxuICovXG5cbmxldCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCB1dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGV2ZW50cyA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuY29uc3QgemxpYiA9IHJlcXVpcmUoJ3psaWInKTtcbmNvbnN0IHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG5jb25zdCBjb25zdHMgPSB7XG4gICAgLyogVGhlIGxvY2FsIGZpbGUgaGVhZGVyICovXG4gICAgTE9DSERSOiAzMCwgLy8gTE9DIGhlYWRlciBzaXplXG4gICAgTE9DU0lHOiAweDA0MDM0YjUwLCAvLyBcIlBLXFwwMDNcXDAwNFwiXG4gICAgTE9DVkVSOiA0LCAvLyB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgTE9DRkxHOiA2LCAvLyBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWdcbiAgICBMT0NIT1c6IDgsIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgIExPQ1RJTTogMTAsIC8vIG1vZGlmaWNhdGlvbiB0aW1lICgyIGJ5dGVzIHRpbWUsIDIgYnl0ZXMgZGF0ZSlcbiAgICBMT0NDUkM6IDE0LCAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICBMT0NTSVo6IDE4LCAvLyBjb21wcmVzc2VkIHNpemVcbiAgICBMT0NMRU46IDIyLCAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgIExPQ05BTTogMjYsIC8vIGZpbGVuYW1lIGxlbmd0aFxuICAgIExPQ0VYVDogMjgsIC8vIGV4dHJhIGZpZWxkIGxlbmd0aFxuXG4gICAgLyogVGhlIERhdGEgZGVzY3JpcHRvciAqL1xuICAgIEVYVFNJRzogMHgwODA3NGI1MCwgLy8gXCJQS1xcMDA3XFwwMDhcIlxuICAgIEVYVEhEUjogMTYsIC8vIEVYVCBoZWFkZXIgc2l6ZVxuICAgIEVYVENSQzogNCwgLy8gdW5jb21wcmVzc2VkIGZpbGUgY3JjLTMyIHZhbHVlXG4gICAgRVhUU0laOiA4LCAvLyBjb21wcmVzc2VkIHNpemVcbiAgICBFWFRMRU46IDEyLCAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuXG4gICAgLyogVGhlIGNlbnRyYWwgZGlyZWN0b3J5IGZpbGUgaGVhZGVyICovXG4gICAgQ0VOSERSOiA0NiwgLy8gQ0VOIGhlYWRlciBzaXplXG4gICAgQ0VOU0lHOiAweDAyMDE0YjUwLCAvLyBcIlBLXFwwMDFcXDAwMlwiXG4gICAgQ0VOVkVNOiA0LCAvLyB2ZXJzaW9uIG1hZGUgYnlcbiAgICBDRU5WRVI6IDYsIC8vIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3RcbiAgICBDRU5GTEc6IDgsIC8vIGVuY3J5cHQsIGRlY3J5cHQgZmxhZ3NcbiAgICBDRU5IT1c6IDEwLCAvLyBjb21wcmVzc2lvbiBtZXRob2RcbiAgICBDRU5USU06IDEyLCAvLyBtb2RpZmljYXRpb24gdGltZSAoMiBieXRlcyB0aW1lLCAyIGJ5dGVzIGRhdGUpXG4gICAgQ0VOQ1JDOiAxNiwgLy8gdW5jb21wcmVzc2VkIGZpbGUgY3JjLTMyIHZhbHVlXG4gICAgQ0VOU0laOiAyMCwgLy8gY29tcHJlc3NlZCBzaXplXG4gICAgQ0VOTEVOOiAyNCwgLy8gdW5jb21wcmVzc2VkIHNpemVcbiAgICBDRU5OQU06IDI4LCAvLyBmaWxlbmFtZSBsZW5ndGhcbiAgICBDRU5FWFQ6IDMwLCAvLyBleHRyYSBmaWVsZCBsZW5ndGhcbiAgICBDRU5DT006IDMyLCAvLyBmaWxlIGNvbW1lbnQgbGVuZ3RoXG4gICAgQ0VORFNLOiAzNCwgLy8gdm9sdW1lIG51bWJlciBzdGFydFxuICAgIENFTkFUVDogMzYsIC8vIGludGVybmFsIGZpbGUgYXR0cmlidXRlc1xuICAgIENFTkFUWDogMzgsIC8vIGV4dGVybmFsIGZpbGUgYXR0cmlidXRlcyAoaG9zdCBzeXN0ZW0gZGVwZW5kZW50KVxuICAgIENFTk9GRjogNDIsIC8vIExPQyBoZWFkZXIgb2Zmc2V0XG5cbiAgICAvKiBUaGUgZW50cmllcyBpbiB0aGUgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5ICovXG4gICAgRU5ESERSOiAyMiwgLy8gRU5EIGhlYWRlciBzaXplXG4gICAgRU5EU0lHOiAweDA2MDU0YjUwLCAvLyBcIlBLXFwwMDVcXDAwNlwiXG4gICAgRU5EU0lHRklSU1Q6IDB4NTAsXG4gICAgRU5EU1VCOiA4LCAvLyBudW1iZXIgb2YgZW50cmllcyBvbiB0aGlzIGRpc2tcbiAgICBFTkRUT1Q6IDEwLCAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllc1xuICAgIEVORFNJWjogMTIsIC8vIGNlbnRyYWwgZGlyZWN0b3J5IHNpemUgaW4gYnl0ZXNcbiAgICBFTkRPRkY6IDE2LCAvLyBvZmZzZXQgb2YgZmlyc3QgQ0VOIGhlYWRlclxuICAgIEVORENPTTogMjAsIC8vIHppcCBmaWxlIGNvbW1lbnQgbGVuZ3RoXG4gICAgTUFYRklMRUNPTU1FTlQ6IDB4ZmZmZixcblxuICAgIC8qIFRoZSBlbnRyaWVzIGluIHRoZSBlbmQgb2YgWklQNjQgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvciAqL1xuICAgIEVOREw2NEhEUjogMjAsIC8vIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yIGhlYWRlciBzaXplXG4gICAgRU5ETDY0U0lHOiAweDA3MDY0YjUwLCAvLyBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvciBzaWduYXR1cmVcbiAgICBFTkRMNjRTSUdGSVJTVDogMHg1MCxcbiAgICBFTkRMNjRPRlM6IDgsIC8vIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBvZmZzZXRcblxuICAgIC8qIFRoZSBlbnRyaWVzIGluIHRoZSBlbmQgb2YgWklQNjQgY2VudHJhbCBkaXJlY3RvcnkgKi9cbiAgICBFTkQ2NEhEUjogNTYsIC8vIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBoZWFkZXIgc2l6ZVxuICAgIEVORDY0U0lHOiAweDA2MDY0YjUwLCAvLyBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3Rvcnkgc2lnbmF0dXJlXG4gICAgRU5ENjRTSUdGSVJTVDogMHg1MCxcbiAgICBFTkQ2NFNVQjogMjQsIC8vIG51bWJlciBvZiBlbnRyaWVzIG9uIHRoaXMgZGlza1xuICAgIEVORDY0VE9UOiAzMiwgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICBFTkQ2NFNJWjogNDAsXG4gICAgRU5ENjRPRkY6IDQ4LFxuXG4gICAgLyogQ29tcHJlc3Npb24gbWV0aG9kcyAqL1xuICAgIFNUT1JFRDogMCwgLy8gbm8gY29tcHJlc3Npb25cbiAgICBTSFJVTks6IDEsIC8vIHNocnVua1xuICAgIFJFRFVDRUQxOiAyLCAvLyByZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDFcbiAgICBSRURVQ0VEMjogMywgLy8gcmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciAyXG4gICAgUkVEVUNFRDM6IDQsIC8vIHJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgM1xuICAgIFJFRFVDRUQ0OiA1LCAvLyByZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDRcbiAgICBJTVBMT0RFRDogNiwgLy8gaW1wbG9kZWRcbiAgICAvLyA3IHJlc2VydmVkXG4gICAgREVGTEFURUQ6IDgsIC8vIGRlZmxhdGVkXG4gICAgRU5IQU5DRURfREVGTEFURUQ6IDksIC8vIGRlZmxhdGU2NFxuICAgIFBLV0FSRTogMTAsIC8vIFBLV2FyZSBEQ0wgaW1wbG9kZWRcbiAgICAvLyAxMSByZXNlcnZlZFxuICAgIEJaSVAyOiAxMiwgLy8gIGNvbXByZXNzZWQgdXNpbmcgQlpJUDJcbiAgICAvLyAxMyByZXNlcnZlZFxuICAgIExaTUE6IDE0LCAvLyBMWk1BXG4gICAgLy8gMTUtMTcgcmVzZXJ2ZWRcbiAgICBJQk1fVEVSU0U6IDE4LCAvLyBjb21wcmVzc2VkIHVzaW5nIElCTSBURVJTRVxuICAgIElCTV9MWjc3OiAxOSwgLy9JQk0gTFo3NyB6XG5cbiAgICAvKiBHZW5lcmFsIHB1cnBvc2UgYml0IGZsYWcgKi9cbiAgICBGTEdfRU5DOiAwLCAvLyBlbmNyeXB0ZWQgZmlsZVxuICAgIEZMR19DT01QMTogMSwgLy8gY29tcHJlc3Npb24gb3B0aW9uXG4gICAgRkxHX0NPTVAyOiAyLCAvLyBjb21wcmVzc2lvbiBvcHRpb25cbiAgICBGTEdfREVTQzogNCwgLy8gZGF0YSBkZXNjcmlwdG9yXG4gICAgRkxHX0VOSDogOCwgLy8gZW5oYW5jZWQgZGVmbGF0aW9uXG4gICAgRkxHX1NUUjogMTYsIC8vIHN0cm9uZyBlbmNyeXB0aW9uXG4gICAgRkxHX0xORzogMTAyNCwgLy8gbGFuZ3VhZ2UgZW5jb2RpbmdcbiAgICBGTEdfTVNLOiA0MDk2LCAvLyBtYXNrIGhlYWRlciB2YWx1ZXNcbiAgICBGTEdfRU5UUllfRU5DOiAxLFxuXG4gICAgLyogNC41IEV4dGVuc2libGUgZGF0YSBmaWVsZHMgKi9cbiAgICBFRl9JRDogMCxcbiAgICBFRl9TSVpFOiAyLFxuXG4gICAgLyogSGVhZGVyIElEcyAqL1xuICAgIElEX1pJUDY0OiAweDAwMDEsXG4gICAgSURfQVZJTkZPOiAweDAwMDcsXG4gICAgSURfUEZTOiAweDAwMDgsXG4gICAgSURfT1MyOiAweDAwMDksXG4gICAgSURfTlRGUzogMHgwMDBhLFxuICAgIElEX09QRU5WTVM6IDB4MDAwYyxcbiAgICBJRF9VTklYOiAweDAwMGQsXG4gICAgSURfRk9SSzogMHgwMDBlLFxuICAgIElEX1BBVENIOiAweDAwMGYsXG4gICAgSURfWDUwOV9QS0NTNzogMHgwMDE0LFxuICAgIElEX1g1MDlfQ0VSVElEX0Y6IDB4MDAxNSxcbiAgICBJRF9YNTA5X0NFUlRJRF9DOiAweDAwMTYsXG4gICAgSURfU1RST05HRU5DOiAweDAwMTcsXG4gICAgSURfUkVDT1JEX01HVDogMHgwMDE4LFxuICAgIElEX1g1MDlfUEtDUzdfUkw6IDB4MDAxOSxcbiAgICBJRF9JQk0xOiAweDAwNjUsXG4gICAgSURfSUJNMjogMHgwMDY2LFxuICAgIElEX1BPU1pJUDogMHg0NjkwLFxuXG4gICAgRUZfWklQNjRfT1JfMzI6IDB4ZmZmZmZmZmYsXG4gICAgRUZfWklQNjRfT1JfMTY6IDB4ZmZmZixcbn07XG5cbmNvbnN0IFN0cmVhbVppcCA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICBsZXQgZmQsIGZpbGVTaXplLCBjaHVua1NpemUsIG9wLCBjZW50cmFsRGlyZWN0b3J5LCBjbG9zZWQ7XG4gICAgY29uc3QgcmVhZHkgPSBmYWxzZSxcbiAgICAgICAgdGhhdCA9IHRoaXMsXG4gICAgICAgIGVudHJpZXMgPSBjb25maWcuc3RvcmVFbnRyaWVzICE9PSBmYWxzZSA/IHt9IDogbnVsbCxcbiAgICAgICAgZmlsZU5hbWUgPSBjb25maWcuZmlsZSxcbiAgICAgICAgdGV4dERlY29kZXIgPSBjb25maWcubmFtZUVuY29kaW5nID8gbmV3IFRleHREZWNvZGVyKGNvbmZpZy5uYW1lRW5jb2RpbmcpIDogbnVsbDtcblxuICAgIG9wZW4oKTtcblxuICAgIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmIChjb25maWcuZmQpIHtcbiAgICAgICAgICAgIGZkID0gY29uZmlnLmZkO1xuICAgICAgICAgICAgcmVhZEZpbGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZzLm9wZW4oZmlsZU5hbWUsICdyJywgKGVyciwgZikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmZCA9IGY7XG4gICAgICAgICAgICAgICAgcmVhZEZpbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEZpbGUoKSB7XG4gICAgICAgIGZzLmZzdGF0KGZkLCAoZXJyLCBzdGF0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsZVNpemUgPSBzdGF0LnNpemU7XG4gICAgICAgICAgICBjaHVua1NpemUgPSBjb25maWcuY2h1bmtTaXplIHx8IE1hdGgucm91bmQoZmlsZVNpemUgLyAxMDAwKTtcbiAgICAgICAgICAgIGNodW5rU2l6ZSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIE1hdGgubWluKGNodW5rU2l6ZSwgTWF0aC5taW4oMTI4ICogMTAyNCwgZmlsZVNpemUpKSxcbiAgICAgICAgICAgICAgICBNYXRoLm1pbigxMDI0LCBmaWxlU2l6ZSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZWFkQ2VudHJhbERpcmVjdG9yeSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkVW50aWxGb3VuZENhbGxiYWNrKGVyciwgYnl0ZXNSZWFkKSB7XG4gICAgICAgIGlmIChlcnIgfHwgIWJ5dGVzUmVhZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQuZW1pdCgnZXJyb3InLCBlcnIgfHwgbmV3IEVycm9yKCdBcmNoaXZlIHJlYWQgZXJyb3InKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBvcyA9IG9wLmxhc3RQb3M7XG4gICAgICAgIGxldCBidWZmZXJQb3NpdGlvbiA9IHBvcyAtIG9wLndpbi5wb3NpdGlvbjtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gb3Aud2luLmJ1ZmZlcjtcbiAgICAgICAgY29uc3QgbWluUG9zID0gb3AubWluUG9zO1xuICAgICAgICB3aGlsZSAoLS1wb3MgPj0gbWluUG9zICYmIC0tYnVmZmVyUG9zaXRpb24gPj0gMCkge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggLSBidWZmZXJQb3NpdGlvbiA+PSA0ICYmIGJ1ZmZlcltidWZmZXJQb3NpdGlvbl0gPT09IG9wLmZpcnN0Qnl0ZSkge1xuICAgICAgICAgICAgICAgIC8vIHF1aWNrIGNoZWNrIGZpcnN0IHNpZ25hdHVyZSBieXRlXG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlci5yZWFkVUludDMyTEUoYnVmZmVyUG9zaXRpb24pID09PSBvcC5zaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3AubGFzdEJ1ZmZlclBvc2l0aW9uID0gYnVmZmVyUG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgIG9wLmxhc3RCeXRlc1JlYWQgPSBieXRlc1JlYWQ7XG4gICAgICAgICAgICAgICAgICAgIG9wLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcyA9PT0gbWluUG9zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignQmFkIGFyY2hpdmUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgb3AubGFzdFBvcyA9IHBvcyArIDE7XG4gICAgICAgIG9wLmNodW5rU2l6ZSAqPSAyO1xuICAgICAgICBpZiAocG9zIDw9IG1pblBvcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0JhZCBhcmNoaXZlJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4cGFuZExlbmd0aCA9IE1hdGgubWluKG9wLmNodW5rU2l6ZSwgcG9zIC0gbWluUG9zKTtcbiAgICAgICAgb3Aud2luLmV4cGFuZExlZnQoZXhwYW5kTGVuZ3RoLCByZWFkVW50aWxGb3VuZENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkQ2VudHJhbERpcmVjdG9yeSgpIHtcbiAgICAgICAgY29uc3QgdG90YWxSZWFkTGVuZ3RoID0gTWF0aC5taW4oY29uc3RzLkVOREhEUiArIGNvbnN0cy5NQVhGSUxFQ09NTUVOVCwgZmlsZVNpemUpO1xuICAgICAgICBvcCA9IHtcbiAgICAgICAgICAgIHdpbjogbmV3IEZpbGVXaW5kb3dCdWZmZXIoZmQpLFxuICAgICAgICAgICAgdG90YWxSZWFkTGVuZ3RoLFxuICAgICAgICAgICAgbWluUG9zOiBmaWxlU2l6ZSAtIHRvdGFsUmVhZExlbmd0aCxcbiAgICAgICAgICAgIGxhc3RQb3M6IGZpbGVTaXplLFxuICAgICAgICAgICAgY2h1bmtTaXplOiBNYXRoLm1pbigxMDI0LCBjaHVua1NpemUpLFxuICAgICAgICAgICAgZmlyc3RCeXRlOiBjb25zdHMuRU5EU0lHRklSU1QsXG4gICAgICAgICAgICBzaWc6IGNvbnN0cy5FTkRTSUcsXG4gICAgICAgICAgICBjb21wbGV0ZTogcmVhZENlbnRyYWxEaXJlY3RvcnlDb21wbGV0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgb3Aud2luLnJlYWQoZmlsZVNpemUgLSBvcC5jaHVua1NpemUsIG9wLmNodW5rU2l6ZSwgcmVhZFVudGlsRm91bmRDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZENlbnRyYWxEaXJlY3RvcnlDb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gb3Aud2luLmJ1ZmZlcjtcbiAgICAgICAgY29uc3QgcG9zID0gb3AubGFzdEJ1ZmZlclBvc2l0aW9uO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2VudHJhbERpcmVjdG9yeSA9IG5ldyBDZW50cmFsRGlyZWN0b3J5SGVhZGVyKCk7XG4gICAgICAgICAgICBjZW50cmFsRGlyZWN0b3J5LnJlYWQoYnVmZmVyLnNsaWNlKHBvcywgcG9zICsgY29uc3RzLkVOREhEUikpO1xuICAgICAgICAgICAgY2VudHJhbERpcmVjdG9yeS5oZWFkZXJPZmZzZXQgPSBvcC53aW4ucG9zaXRpb24gKyBwb3M7XG4gICAgICAgICAgICBpZiAoY2VudHJhbERpcmVjdG9yeS5jb21tZW50TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5jb21tZW50ID0gYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIC5zbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArIGNvbnN0cy5FTkRIRFIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgKyBjb25zdHMuRU5ESERSICsgY2VudHJhbERpcmVjdG9yeS5jb21tZW50TGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoYXQuY29tbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LmVudHJpZXNDb3VudCA9IGNlbnRyYWxEaXJlY3Rvcnkudm9sdW1lRW50cmllcztcbiAgICAgICAgICAgIHRoYXQuY2VudHJhbERpcmVjdG9yeSA9IGNlbnRyYWxEaXJlY3Rvcnk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKGNlbnRyYWxEaXJlY3Rvcnkudm9sdW1lRW50cmllcyA9PT0gY29uc3RzLkVGX1pJUDY0X09SXzE2ICYmXG4gICAgICAgICAgICAgICAgICAgIGNlbnRyYWxEaXJlY3RvcnkudG90YWxFbnRyaWVzID09PSBjb25zdHMuRUZfWklQNjRfT1JfMTYpIHx8XG4gICAgICAgICAgICAgICAgY2VudHJhbERpcmVjdG9yeS5zaXplID09PSBjb25zdHMuRUZfWklQNjRfT1JfMzIgfHxcbiAgICAgICAgICAgICAgICBjZW50cmFsRGlyZWN0b3J5Lm9mZnNldCA9PT0gY29uc3RzLkVGX1pJUDY0X09SXzMyXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZWFkWmlwNjRDZW50cmFsRGlyZWN0b3J5TG9jYXRvcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcCA9IHt9O1xuICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhhdC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkWmlwNjRDZW50cmFsRGlyZWN0b3J5TG9jYXRvcigpIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gY29uc3RzLkVOREw2NEhEUjtcbiAgICAgICAgaWYgKG9wLmxhc3RCdWZmZXJQb3NpdGlvbiA+IGxlbmd0aCkge1xuICAgICAgICAgICAgb3AubGFzdEJ1ZmZlclBvc2l0aW9uIC09IGxlbmd0aDtcbiAgICAgICAgICAgIHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlMb2NhdG9yQ29tcGxldGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wID0ge1xuICAgICAgICAgICAgICAgIHdpbjogb3Aud2luLFxuICAgICAgICAgICAgICAgIHRvdGFsUmVhZExlbmd0aDogbGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1pblBvczogb3Aud2luLnBvc2l0aW9uIC0gbGVuZ3RoLFxuICAgICAgICAgICAgICAgIGxhc3RQb3M6IG9wLndpbi5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBjaHVua1NpemU6IG9wLmNodW5rU2l6ZSxcbiAgICAgICAgICAgICAgICBmaXJzdEJ5dGU6IGNvbnN0cy5FTkRMNjRTSUdGSVJTVCxcbiAgICAgICAgICAgICAgICBzaWc6IGNvbnN0cy5FTkRMNjRTSUcsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlMb2NhdG9yQ29tcGxldGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3Aud2luLnJlYWQob3AubGFzdFBvcyAtIG9wLmNodW5rU2l6ZSwgb3AuY2h1bmtTaXplLCByZWFkVW50aWxGb3VuZENhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlMb2NhdG9yQ29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG9wLndpbi5idWZmZXI7XG4gICAgICAgIGNvbnN0IGxvY0hlYWRlciA9IG5ldyBDZW50cmFsRGlyZWN0b3J5TG9jNjRIZWFkZXIoKTtcbiAgICAgICAgbG9jSGVhZGVyLnJlYWQoXG4gICAgICAgICAgICBidWZmZXIuc2xpY2Uob3AubGFzdEJ1ZmZlclBvc2l0aW9uLCBvcC5sYXN0QnVmZmVyUG9zaXRpb24gKyBjb25zdHMuRU5ETDY0SERSKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCByZWFkTGVuZ3RoID0gZmlsZVNpemUgLSBsb2NIZWFkZXIuaGVhZGVyT2Zmc2V0O1xuICAgICAgICBvcCA9IHtcbiAgICAgICAgICAgIHdpbjogb3Aud2luLFxuICAgICAgICAgICAgdG90YWxSZWFkTGVuZ3RoOiByZWFkTGVuZ3RoLFxuICAgICAgICAgICAgbWluUG9zOiBsb2NIZWFkZXIuaGVhZGVyT2Zmc2V0LFxuICAgICAgICAgICAgbGFzdFBvczogb3AubGFzdFBvcyxcbiAgICAgICAgICAgIGNodW5rU2l6ZTogb3AuY2h1bmtTaXplLFxuICAgICAgICAgICAgZmlyc3RCeXRlOiBjb25zdHMuRU5ENjRTSUdGSVJTVCxcbiAgICAgICAgICAgIHNpZzogY29uc3RzLkVORDY0U0lHLFxuICAgICAgICAgICAgY29tcGxldGU6IHJlYWRaaXA2NENlbnRyYWxEaXJlY3RvcnlDb21wbGV0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgb3Aud2luLnJlYWQoZmlsZVNpemUgLSBvcC5jaHVua1NpemUsIG9wLmNodW5rU2l6ZSwgcmVhZFVudGlsRm91bmRDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZFppcDY0Q2VudHJhbERpcmVjdG9yeUNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBidWZmZXIgPSBvcC53aW4uYnVmZmVyO1xuICAgICAgICBjb25zdCB6aXA2NGNkID0gbmV3IENlbnRyYWxEaXJlY3RvcnlaaXA2NEhlYWRlcigpO1xuICAgICAgICB6aXA2NGNkLnJlYWQoYnVmZmVyLnNsaWNlKG9wLmxhc3RCdWZmZXJQb3NpdGlvbiwgb3AubGFzdEJ1ZmZlclBvc2l0aW9uICsgY29uc3RzLkVORDY0SERSKSk7XG4gICAgICAgIHRoYXQuY2VudHJhbERpcmVjdG9yeS52b2x1bWVFbnRyaWVzID0gemlwNjRjZC52b2x1bWVFbnRyaWVzO1xuICAgICAgICB0aGF0LmNlbnRyYWxEaXJlY3RvcnkudG90YWxFbnRyaWVzID0gemlwNjRjZC50b3RhbEVudHJpZXM7XG4gICAgICAgIHRoYXQuY2VudHJhbERpcmVjdG9yeS5zaXplID0gemlwNjRjZC5zaXplO1xuICAgICAgICB0aGF0LmNlbnRyYWxEaXJlY3Rvcnkub2Zmc2V0ID0gemlwNjRjZC5vZmZzZXQ7XG4gICAgICAgIHRoYXQuZW50cmllc0NvdW50ID0gemlwNjRjZC52b2x1bWVFbnRyaWVzO1xuICAgICAgICBvcCA9IHt9O1xuICAgICAgICByZWFkRW50cmllcygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRFbnRyaWVzKCkge1xuICAgICAgICBvcCA9IHtcbiAgICAgICAgICAgIHdpbjogbmV3IEZpbGVXaW5kb3dCdWZmZXIoZmQpLFxuICAgICAgICAgICAgcG9zOiBjZW50cmFsRGlyZWN0b3J5Lm9mZnNldCxcbiAgICAgICAgICAgIGNodW5rU2l6ZSxcbiAgICAgICAgICAgIGVudHJpZXNMZWZ0OiBjZW50cmFsRGlyZWN0b3J5LnZvbHVtZUVudHJpZXMsXG4gICAgICAgIH07XG4gICAgICAgIG9wLndpbi5yZWFkKG9wLnBvcywgTWF0aC5taW4oY2h1bmtTaXplLCBmaWxlU2l6ZSAtIG9wLnBvcyksIHJlYWRFbnRyaWVzQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRFbnRyaWVzQ2FsbGJhY2soZXJyLCBieXRlc1JlYWQpIHtcbiAgICAgICAgaWYgKGVyciB8fCAhYnl0ZXNSZWFkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhhdC5lbWl0KCdlcnJvcicsIGVyciB8fCBuZXcgRXJyb3IoJ0VudHJpZXMgcmVhZCBlcnJvcicpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYnVmZmVyUG9zID0gb3AucG9zIC0gb3Aud2luLnBvc2l0aW9uO1xuICAgICAgICBsZXQgZW50cnkgPSBvcC5lbnRyeTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gb3Aud2luLmJ1ZmZlcjtcbiAgICAgICAgY29uc3QgYnVmZmVyTGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlIChvcC5lbnRyaWVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gbmV3IFppcEVudHJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnJlYWRIZWFkZXIoYnVmZmVyLCBidWZmZXJQb3MpO1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5oZWFkZXJPZmZzZXQgPSBvcC53aW4ucG9zaXRpb24gKyBidWZmZXJQb3M7XG4gICAgICAgICAgICAgICAgICAgIG9wLmVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgICAgICAgICAgIG9wLnBvcyArPSBjb25zdHMuQ0VOSERSO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJQb3MgKz0gY29uc3RzLkNFTkhEUjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZW50cnlIZWFkZXJTaXplID0gZW50cnkuZm5hbWVMZW4gKyBlbnRyeS5leHRyYUxlbiArIGVudHJ5LmNvbUxlbjtcbiAgICAgICAgICAgICAgICBjb25zdCBhZHZhbmNlQnl0ZXMgPSBlbnRyeUhlYWRlclNpemUgKyAob3AuZW50cmllc0xlZnQgPiAxID8gY29uc3RzLkNFTkhEUiA6IDApO1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXJMZW5ndGggLSBidWZmZXJQb3MgPCBhZHZhbmNlQnl0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3Aud2luLm1vdmVSaWdodChjaHVua1NpemUsIHJlYWRFbnRyaWVzQ2FsbGJhY2ssIGJ1ZmZlclBvcyk7XG4gICAgICAgICAgICAgICAgICAgIG9wLm1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYWQoYnVmZmVyLCBidWZmZXJQb3MsIHRleHREZWNvZGVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5za2lwRW50cnlOYW1lVmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS52YWxpZGF0ZU5hbWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cmllc1tlbnRyeS5uYW1lXSA9IGVudHJ5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGF0LmVtaXQoJ2VudHJ5JywgZW50cnkpO1xuICAgICAgICAgICAgICAgIG9wLmVudHJ5ID0gZW50cnkgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9wLmVudHJpZXNMZWZ0LS07XG4gICAgICAgICAgICAgICAgb3AucG9zICs9IGVudHJ5SGVhZGVyU2l6ZTtcbiAgICAgICAgICAgICAgICBidWZmZXJQb3MgKz0gZW50cnlIZWFkZXJTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5lbWl0KCdyZWFkeScpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoYXQuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tFbnRyaWVzRXhpc3QoKSB7XG4gICAgICAgIGlmICghZW50cmllcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9yZUVudHJpZXMgZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmVhZHknLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkeTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuZW50cnkgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBjaGVja0VudHJpZXNFeGlzdCgpO1xuICAgICAgICByZXR1cm4gZW50cmllc1tuYW1lXTtcbiAgICB9O1xuXG4gICAgdGhpcy5lbnRyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0VudHJpZXNFeGlzdCgpO1xuICAgICAgICByZXR1cm4gZW50cmllcztcbiAgICB9O1xuXG4gICAgdGhpcy5zdHJlYW0gPSBmdW5jdGlvbiAoZW50cnksIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZW5FbnRyeShcbiAgICAgICAgICAgIGVudHJ5LFxuICAgICAgICAgICAgKGVyciwgZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBkYXRhT2Zmc2V0KGVudHJ5KTtcbiAgICAgICAgICAgICAgICBsZXQgZW50cnlTdHJlYW0gPSBuZXcgRW50cnlEYXRhUmVhZGVyU3RyZWFtKGZkLCBvZmZzZXQsIGVudHJ5LmNvbXByZXNzZWRTaXplKTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkubWV0aG9kID09PSBjb25zdHMuU1RPUkVEKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmcgdG8gZG9cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVudHJ5Lm1ldGhvZCA9PT0gY29uc3RzLkRFRkxBVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5U3RyZWFtID0gZW50cnlTdHJlYW0ucGlwZSh6bGliLmNyZWF0ZUluZmxhdGVSYXcoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVW5rbm93biBjb21wcmVzc2lvbiBtZXRob2Q6ICcgKyBlbnRyeS5tZXRob2QpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNhblZlcmlmeUNyYyhlbnRyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnlTdHJlYW0gPSBlbnRyeVN0cmVhbS5waXBlKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEVudHJ5VmVyaWZ5U3RyZWFtKGVudHJ5U3RyZWFtLCBlbnRyeS5jcmMsIGVudHJ5LnNpemUpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGVudHJ5U3RyZWFtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICB0aGlzLmVudHJ5RGF0YVN5bmMgPSBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgbGV0IGVyciA9IG51bGw7XG4gICAgICAgIHRoaXMub3BlbkVudHJ5KFxuICAgICAgICAgICAgZW50cnksXG4gICAgICAgICAgICAoZSwgZW4pID0+IHtcbiAgICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgICAgIGVudHJ5ID0gZW47XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRhdGEgPSBCdWZmZXIuYWxsb2MoZW50cnkuY29tcHJlc3NlZFNpemUpO1xuICAgICAgICBuZXcgRnNSZWFkKGZkLCBkYXRhLCAwLCBlbnRyeS5jb21wcmVzc2VkU2l6ZSwgZGF0YU9mZnNldChlbnRyeSksIChlKSA9PiB7XG4gICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICB9KS5yZWFkKHRydWUpO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5Lm1ldGhvZCA9PT0gY29uc3RzLlNUT1JFRCkge1xuICAgICAgICAgICAgLy8gbm90aGluZyB0byBkb1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5Lm1ldGhvZCA9PT0gY29uc3RzLkRFRkxBVEVEIHx8IGVudHJ5Lm1ldGhvZCA9PT0gY29uc3RzLkVOSEFOQ0VEX0RFRkxBVEVEKSB7XG4gICAgICAgICAgICBkYXRhID0gemxpYi5pbmZsYXRlUmF3U3luYyhkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBjb21wcmVzc2lvbiBtZXRob2Q6ICcgKyBlbnRyeS5tZXRob2QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gZW50cnkuc2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FuVmVyaWZ5Q3JjKGVudHJ5KSkge1xuICAgICAgICAgICAgY29uc3QgdmVyaWZ5ID0gbmV3IENyY1ZlcmlmeShlbnRyeS5jcmMsIGVudHJ5LnNpemUpO1xuICAgICAgICAgICAgdmVyaWZ5LmRhdGEoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcblxuICAgIHRoaXMub3BlbkVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBjYWxsYmFjaywgc3luYykge1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY2hlY2tFbnRyaWVzRXhpc3QoKTtcbiAgICAgICAgICAgIGVudHJ5ID0gZW50cmllc1tlbnRyeV07XG4gICAgICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignRW50cnkgbm90IGZvdW5kJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZW50cnkuaXNGaWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdFbnRyeSBpcyBub3QgZmlsZScpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdBcmNoaXZlIGNsb3NlZCcpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuYWxsb2MoY29uc3RzLkxPQ0hEUik7XG4gICAgICAgIG5ldyBGc1JlYWQoZmQsIGJ1ZmZlciwgMCwgYnVmZmVyLmxlbmd0aCwgZW50cnkub2Zmc2V0LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVhZEV4O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlbnRyeS5yZWFkRGF0YUhlYWRlcihidWZmZXIpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5lbmNyeXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEV4ID0gbmV3IEVycm9yKCdFbnRyeSBlbmNyeXB0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHJlYWRFeCA9IGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2socmVhZEV4LCBlbnRyeSk7XG4gICAgICAgIH0pLnJlYWQoc3luYyk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGRhdGFPZmZzZXQoZW50cnkpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5Lm9mZnNldCArIGNvbnN0cy5MT0NIRFIgKyBlbnRyeS5mbmFtZUxlbiArIGVudHJ5LmV4dHJhTGVuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblZlcmlmeUNyYyhlbnRyeSkge1xuICAgICAgICAvLyBpZiBiaXQgMyAoMHgwOCkgb2YgdGhlIGdlbmVyYWwtcHVycG9zZSBmbGFncyBmaWVsZCBpcyBzZXQsIHRoZW4gdGhlIENSQy0zMiBhbmQgZmlsZSBzaXplcyBhcmUgbm90IGtub3duIHdoZW4gdGhlIGhlYWRlciBpcyB3cml0dGVuXG4gICAgICAgIHJldHVybiAoZW50cnkuZmxhZ3MgJiAweDgpICE9PSAweDg7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0cmFjdChlbnRyeSwgb3V0UGF0aCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhhdC5zdHJlYW0oZW50cnksIChlcnIsIHN0bSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBmc1N0bSwgZXJyVGhyb3duO1xuICAgICAgICAgICAgICAgIHN0bS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVyclRocm93biA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZzU3RtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG0udW5waXBlKGZzU3RtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzU3RtLmNsb3NlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmcy5vcGVuKG91dFBhdGgsICd3JywgKGVyciwgZmRGaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmNsb3NlKGZkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyVGhyb3duKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZzU3RtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0ob3V0UGF0aCwgeyBmZDogZmRGaWxlIH0pO1xuICAgICAgICAgICAgICAgICAgICBmc1N0bS5vbignZmluaXNoJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KCdleHRyYWN0JywgZW50cnksIG91dFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RtLnBpcGUoZnNTdG0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXJlY3RvcmllcyhiYXNlRGlyLCBkaXJzLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIWRpcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlyID0gZGlycy5zaGlmdCgpO1xuICAgICAgICBkaXIgPSBwYXRoLmpvaW4oYmFzZURpciwgcGF0aC5qb2luKC4uLmRpcikpO1xuICAgICAgICBmcy5ta2RpcihkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09ICdFRVhJU1QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjcmVhdGVEaXJlY3RvcmllcyhiYXNlRGlyLCBkaXJzLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dHJhY3RGaWxlcyhiYXNlRGlyLCBiYXNlUmVsUGF0aCwgZmlsZXMsIGNhbGxiYWNrLCBleHRyYWN0ZWRDb3VudCkge1xuICAgICAgICBpZiAoIWZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGV4dHJhY3RlZENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlID0gZmlsZXMuc2hpZnQoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IHBhdGguam9pbihiYXNlRGlyLCBmaWxlLm5hbWUucmVwbGFjZShiYXNlUmVsUGF0aCwgJycpKTtcbiAgICAgICAgZXh0cmFjdChmaWxlLCB0YXJnZXRQYXRoLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgZXh0cmFjdGVkQ291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXh0cmFjdEZpbGVzKGJhc2VEaXIsIGJhc2VSZWxQYXRoLCBmaWxlcywgY2FsbGJhY2ssIGV4dHJhY3RlZENvdW50ICsgMSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZXh0cmFjdCA9IGZ1bmN0aW9uIChlbnRyeSwgb3V0UGF0aCwgY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IGVudHJ5TmFtZSA9IGVudHJ5IHx8ICcnO1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZW50cnkgPSB0aGlzLmVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIGVudHJ5TmFtZSA9IGVudHJ5Lm5hbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeU5hbWUubGVuZ3RoICYmIGVudHJ5TmFtZVtlbnRyeU5hbWUubGVuZ3RoIC0gMV0gIT09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeU5hbWUgKz0gJy8nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVudHJ5IHx8IGVudHJ5LmlzRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IFtdLFxuICAgICAgICAgICAgICAgIGRpcnMgPSBbXSxcbiAgICAgICAgICAgICAgICBhbGxEaXJzID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgaW4gZW50cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVudHJpZXMsIGUpICYmXG4gICAgICAgICAgICAgICAgICAgIGUubGFzdEluZGV4T2YoZW50cnlOYW1lLCAwKSA9PT0gMFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVsUGF0aCA9IGUucmVwbGFjZShlbnRyeU5hbWUsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRFbnRyeSA9IGVudHJpZXNbZV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZEVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMucHVzaChjaGlsZEVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbFBhdGggPSBwYXRoLmRpcm5hbWUocmVsUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbFBhdGggJiYgIWFsbERpcnNbcmVsUGF0aF0gJiYgcmVsUGF0aCAhPT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxEaXJzW3JlbFBhdGhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IHJlbFBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKGYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcnMucHVzaChwYXJ0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMCwgcGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHNQYXRoID0gcGFydHMuam9pbignLycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxEaXJzW3BhcnRzUGF0aF0gfHwgcGFydHNQYXRoID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbERpcnNbcGFydHNQYXRoXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlycy5wdXNoKHBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpcnMuc29ydCgoeCwgeSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB4Lmxlbmd0aCAtIHkubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVEaXJlY3RvcmllcyhvdXRQYXRoLCBkaXJzLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0RmlsZXMob3V0UGF0aCwgZW50cnlOYW1lLCBmaWxlcywgY2FsbGJhY2ssIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dHJhY3RGaWxlcyhvdXRQYXRoLCBlbnRyeU5hbWUsIGZpbGVzLCBjYWxsYmFjaywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcy5zdGF0KG91dFBhdGgsIChlcnIsIHN0YXQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdCAmJiBzdGF0LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdChlbnRyeSwgcGF0aC5qb2luKG91dFBhdGgsIHBhdGguYmFzZW5hbWUoZW50cnkubmFtZSkpLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdChlbnRyeSwgb3V0UGF0aCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xvc2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNsb3NlZCB8fCAhZmQpIHtcbiAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZzLmNsb3NlKGZkLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgZmQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG9yaWdpbmFsRW1pdCA9IGV2ZW50cy5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQ7XG4gICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKCFjbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEVtaXQuY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG5TdHJlYW1aaXAuc2V0RnMgPSBmdW5jdGlvbiAoY3VzdG9tRnMpIHtcbiAgICBmcyA9IGN1c3RvbUZzO1xufTtcblxuU3RyZWFtWmlwLmRlYnVnTG9nID0gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoU3RyZWFtWmlwLmRlYnVnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICAgIH1cbn07XG5cbnV0aWwuaW5oZXJpdHMoU3RyZWFtWmlwLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuY29uc3QgcHJvcFppcCA9IFN5bWJvbCgnemlwJyk7XG5cblN0cmVhbVppcC5hc3luYyA9IGNsYXNzIFN0cmVhbVppcEFzeW5jIGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgY29uc3QgemlwID0gbmV3IFN0cmVhbVppcChjb25maWcpO1xuXG4gICAgICAgIHppcC5vbignZW50cnknLCAoZW50cnkpID0+IHRoaXMuZW1pdCgnZW50cnknLCBlbnRyeSkpO1xuICAgICAgICB6aXAub24oJ2V4dHJhY3QnLCAoZW50cnksIG91dFBhdGgpID0+IHRoaXMuZW1pdCgnZXh0cmFjdCcsIGVudHJ5LCBvdXRQYXRoKSk7XG5cbiAgICAgICAgdGhpc1twcm9wWmlwXSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHppcC5vbigncmVhZHknLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgemlwLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh6aXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB6aXAub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0IGVudHJpZXNDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbcHJvcFppcF0udGhlbigoemlwKSA9PiB6aXAuZW50cmllc0NvdW50KTtcbiAgICB9XG5cbiAgICBnZXQgY29tbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbcHJvcFppcF0udGhlbigoemlwKSA9PiB6aXAuY29tbWVudCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZW50cnkobmFtZSkge1xuICAgICAgICBjb25zdCB6aXAgPSBhd2FpdCB0aGlzW3Byb3BaaXBdO1xuICAgICAgICByZXR1cm4gemlwLmVudHJ5KG5hbWUpO1xuICAgIH1cblxuICAgIGFzeW5jIGVudHJpZXMoKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXNbcHJvcFppcF07XG4gICAgICAgIHJldHVybiB6aXAuZW50cmllcygpO1xuICAgIH1cblxuICAgIGFzeW5jIHN0cmVhbShlbnRyeSkge1xuICAgICAgICBjb25zdCB6aXAgPSBhd2FpdCB0aGlzW3Byb3BaaXBdO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgemlwLnN0cmVhbShlbnRyeSwgKGVyciwgc3RtKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHN0bSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGVudHJ5RGF0YShlbnRyeSkge1xuICAgICAgICBjb25zdCBzdG0gPSBhd2FpdCB0aGlzLnN0cmVhbShlbnRyeSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gW107XG4gICAgICAgICAgICBzdG0ub24oJ2RhdGEnLCAoY2h1bmspID0+IGRhdGEucHVzaChjaHVuaykpO1xuICAgICAgICAgICAgc3RtLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShCdWZmZXIuY29uY2F0KGRhdGEpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RtLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBzdG0ucmVtb3ZlQWxsTGlzdGVuZXJzKCdlbmQnKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBleHRyYWN0KGVudHJ5LCBvdXRQYXRoKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IGF3YWl0IHRoaXNbcHJvcFppcF07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB6aXAuZXh0cmFjdChlbnRyeSwgb3V0UGF0aCwgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBjb25zdCB6aXAgPSBhd2FpdCB0aGlzW3Byb3BaaXBdO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgemlwLmNsb3NlKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuY2xhc3MgQ2VudHJhbERpcmVjdG9yeUhlYWRlciB7XG4gICAgcmVhZChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gY29uc3RzLkVOREhEUiB8fCBkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gY29uc3RzLkVORFNJRykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNlbnRyYWwgZGlyZWN0b3J5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbnVtYmVyIG9mIGVudHJpZXMgb24gdGhpcyB2b2x1bWVcbiAgICAgICAgdGhpcy52b2x1bWVFbnRyaWVzID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkVORFNVQik7XG4gICAgICAgIC8vIHRvdGFsIG51bWJlciBvZiBlbnRyaWVzXG4gICAgICAgIHRoaXMudG90YWxFbnRyaWVzID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkVORFRPVCk7XG4gICAgICAgIC8vIGNlbnRyYWwgZGlyZWN0b3J5IHNpemUgaW4gYnl0ZXNcbiAgICAgICAgdGhpcy5zaXplID0gZGF0YS5yZWFkVUludDMyTEUoY29uc3RzLkVORFNJWik7XG4gICAgICAgIC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gZGF0YS5yZWFkVUludDMyTEUoY29uc3RzLkVORE9GRik7XG4gICAgICAgIC8vIHppcCBmaWxlIGNvbW1lbnQgbGVuZ3RoXG4gICAgICAgIHRoaXMuY29tbWVudExlbmd0aCA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5FTkRDT00pO1xuICAgIH1cbn1cblxuY2xhc3MgQ2VudHJhbERpcmVjdG9yeUxvYzY0SGVhZGVyIHtcbiAgICByZWFkKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoICE9PSBjb25zdHMuRU5ETDY0SERSIHx8IGRhdGEucmVhZFVJbnQzMkxFKDApICE9PSBjb25zdHMuRU5ETDY0U0lHKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgemlwNjQgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFpJUDY0IEVPQ0QgaGVhZGVyIG9mZnNldFxuICAgICAgICB0aGlzLmhlYWRlck9mZnNldCA9IHJlYWRVSW50NjRMRShkYXRhLCBjb25zdHMuRU5EU1VCKTtcbiAgICB9XG59XG5cbmNsYXNzIENlbnRyYWxEaXJlY3RvcnlaaXA2NEhlYWRlciB7XG4gICAgcmVhZChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gY29uc3RzLkVORDY0SERSIHx8IGRhdGEucmVhZFVJbnQzMkxFKDApICE9PSBjb25zdHMuRU5ENjRTSUcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjZW50cmFsIGRpcmVjdG9yeScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG51bWJlciBvZiBlbnRyaWVzIG9uIHRoaXMgdm9sdW1lXG4gICAgICAgIHRoaXMudm9sdW1lRW50cmllcyA9IHJlYWRVSW50NjRMRShkYXRhLCBjb25zdHMuRU5ENjRTVUIpO1xuICAgICAgICAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllc1xuICAgICAgICB0aGlzLnRvdGFsRW50cmllcyA9IHJlYWRVSW50NjRMRShkYXRhLCBjb25zdHMuRU5ENjRUT1QpO1xuICAgICAgICAvLyBjZW50cmFsIGRpcmVjdG9yeSBzaXplIGluIGJ5dGVzXG4gICAgICAgIHRoaXMuc2l6ZSA9IHJlYWRVSW50NjRMRShkYXRhLCBjb25zdHMuRU5ENjRTSVopO1xuICAgICAgICAvLyBvZmZzZXQgb2YgZmlyc3QgQ0VOIGhlYWRlclxuICAgICAgICB0aGlzLm9mZnNldCA9IHJlYWRVSW50NjRMRShkYXRhLCBjb25zdHMuRU5ENjRPRkYpO1xuICAgIH1cbn1cblxuY2xhc3MgWmlwRW50cnkge1xuICAgIHJlYWRIZWFkZXIoZGF0YSwgb2Zmc2V0KSB7XG4gICAgICAgIC8vIGRhdGEgc2hvdWxkIGJlIDQ2IGJ5dGVzIGFuZCBzdGFydCB3aXRoIFwiUEsgMDEgMDJcIlxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCBvZmZzZXQgKyBjb25zdHMuQ0VOSERSIHx8IGRhdGEucmVhZFVJbnQzMkxFKG9mZnNldCkgIT09IGNvbnN0cy5DRU5TSUcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbnRyeSBoZWFkZXInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2ZXJzaW9uIG1hZGUgYnlcbiAgICAgICAgdGhpcy52ZXJNYWRlID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTlZFTSk7XG4gICAgICAgIC8vIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3RcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTlZFUik7XG4gICAgICAgIC8vIGVuY3J5cHQsIGRlY3J5cHQgZmxhZ3NcbiAgICAgICAgdGhpcy5mbGFncyA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5GTEcpO1xuICAgICAgICAvLyBjb21wcmVzc2lvbiBtZXRob2RcbiAgICAgICAgdGhpcy5tZXRob2QgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOSE9XKTtcbiAgICAgICAgLy8gbW9kaWZpY2F0aW9uIHRpbWUgKDIgYnl0ZXMgdGltZSwgMiBieXRlcyBkYXRlKVxuICAgICAgICBjb25zdCB0aW1lYnl0ZXMgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOVElNKTtcbiAgICAgICAgY29uc3QgZGF0ZWJ5dGVzID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTlRJTSArIDIpO1xuICAgICAgICB0aGlzLnRpbWUgPSBwYXJzZVppcFRpbWUodGltZWJ5dGVzLCBkYXRlYnl0ZXMpO1xuXG4gICAgICAgIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1ZVxuICAgICAgICB0aGlzLmNyYyA9IGRhdGEucmVhZFVJbnQzMkxFKG9mZnNldCArIGNvbnN0cy5DRU5DUkMpO1xuICAgICAgICAvLyBjb21wcmVzc2VkIHNpemVcbiAgICAgICAgdGhpcy5jb21wcmVzc2VkU2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKG9mZnNldCArIGNvbnN0cy5DRU5TSVopO1xuICAgICAgICAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgICAgICB0aGlzLnNpemUgPSBkYXRhLnJlYWRVSW50MzJMRShvZmZzZXQgKyBjb25zdHMuQ0VOTEVOKTtcbiAgICAgICAgLy8gZmlsZW5hbWUgbGVuZ3RoXG4gICAgICAgIHRoaXMuZm5hbWVMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VOTkFNKTtcbiAgICAgICAgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG4gICAgICAgIHRoaXMuZXh0cmFMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQgKyBjb25zdHMuQ0VORVhUKTtcbiAgICAgICAgLy8gZmlsZSBjb21tZW50IGxlbmd0aFxuICAgICAgICB0aGlzLmNvbUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5DT00pO1xuICAgICAgICAvLyB2b2x1bWUgbnVtYmVyIHN0YXJ0XG4gICAgICAgIHRoaXMuZGlza1N0YXJ0ID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0ICsgY29uc3RzLkNFTkRTSyk7XG4gICAgICAgIC8vIGludGVybmFsIGZpbGUgYXR0cmlidXRlc1xuICAgICAgICB0aGlzLmluYXR0ciA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCArIGNvbnN0cy5DRU5BVFQpO1xuICAgICAgICAvLyBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXNcbiAgICAgICAgdGhpcy5hdHRyID0gZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0ICsgY29uc3RzLkNFTkFUWCk7XG4gICAgICAgIC8vIExPQyBoZWFkZXIgb2Zmc2V0XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gZGF0YS5yZWFkVUludDMyTEUob2Zmc2V0ICsgY29uc3RzLkNFTk9GRik7XG4gICAgfVxuXG4gICAgcmVhZERhdGFIZWFkZXIoZGF0YSkge1xuICAgICAgICAvLyAzMCBieXRlcyBhbmQgc2hvdWxkIHN0YXJ0IHdpdGggXCJQS1xcMDAzXFwwMDRcIlxuICAgICAgICBpZiAoZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IGNvbnN0cy5MT0NTSUcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBsb2NhbCBoZWFkZXInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NWRVIpO1xuICAgICAgICAvLyBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWdcbiAgICAgICAgdGhpcy5mbGFncyA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NGTEcpO1xuICAgICAgICAvLyBjb21wcmVzc2lvbiBtZXRob2RcbiAgICAgICAgdGhpcy5tZXRob2QgPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuTE9DSE9XKTtcbiAgICAgICAgLy8gbW9kaWZpY2F0aW9uIHRpbWUgKDIgYnl0ZXMgdGltZSA7IDIgYnl0ZXMgZGF0ZSlcbiAgICAgICAgY29uc3QgdGltZWJ5dGVzID0gZGF0YS5yZWFkVUludDE2TEUoY29uc3RzLkxPQ1RJTSk7XG4gICAgICAgIGNvbnN0IGRhdGVieXRlcyA9IGRhdGEucmVhZFVJbnQxNkxFKGNvbnN0cy5MT0NUSU0gKyAyKTtcbiAgICAgICAgdGhpcy50aW1lID0gcGFyc2VaaXBUaW1lKHRpbWVieXRlcywgZGF0ZWJ5dGVzKTtcblxuICAgICAgICAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICAgICAgdGhpcy5jcmMgPSBkYXRhLnJlYWRVSW50MzJMRShjb25zdHMuTE9DQ1JDKSB8fCB0aGlzLmNyYztcbiAgICAgICAgLy8gY29tcHJlc3NlZCBzaXplXG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWRTaXplID0gZGF0YS5yZWFkVUludDMyTEUoY29uc3RzLkxPQ1NJWik7XG4gICAgICAgIGlmIChjb21wcmVzc2VkU2l6ZSAmJiBjb21wcmVzc2VkU2l6ZSAhPT0gY29uc3RzLkVGX1pJUDY0X09SXzMyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXByZXNzZWRTaXplID0gY29tcHJlc3NlZFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdW5jb21wcmVzc2VkIHNpemVcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKGNvbnN0cy5MT0NMRU4pO1xuICAgICAgICBpZiAoc2l6ZSAmJiBzaXplICE9PSBjb25zdHMuRUZfWklQNjRfT1JfMzIpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmlsZW5hbWUgbGVuZ3RoXG4gICAgICAgIHRoaXMuZm5hbWVMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuTE9DTkFNKTtcbiAgICAgICAgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG4gICAgICAgIHRoaXMuZXh0cmFMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShjb25zdHMuTE9DRVhUKTtcbiAgICB9XG5cbiAgICByZWFkKGRhdGEsIG9mZnNldCwgdGV4dERlY29kZXIpIHtcbiAgICAgICAgY29uc3QgbmFtZURhdGEgPSBkYXRhLnNsaWNlKG9mZnNldCwgKG9mZnNldCArPSB0aGlzLmZuYW1lTGVuKSk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRleHREZWNvZGVyXG4gICAgICAgICAgICA/IHRleHREZWNvZGVyLmRlY29kZShuZXcgVWludDhBcnJheShuYW1lRGF0YSkpXG4gICAgICAgICAgICA6IG5hbWVEYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgICAgIGNvbnN0IGxhc3RDaGFyID0gZGF0YVtvZmZzZXQgLSAxXTtcbiAgICAgICAgdGhpcy5pc0RpcmVjdG9yeSA9IGxhc3RDaGFyID09PSA0NyB8fCBsYXN0Q2hhciA9PT0gOTI7XG5cbiAgICAgICAgaWYgKHRoaXMuZXh0cmFMZW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVhZEV4dHJhKGRhdGEsIG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gdGhpcy5leHRyYUxlbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbW1lbnQgPSB0aGlzLmNvbUxlbiA/IGRhdGEuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0aGlzLmNvbUxlbikudG9TdHJpbmcoKSA6IG51bGw7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVOYW1lKCkge1xuICAgICAgICBpZiAoL1xcXFx8Xlxcdys6fF5cXC98KF58XFwvKVxcLlxcLihcXC98JCkvLnRlc3QodGhpcy5uYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYWxpY2lvdXMgZW50cnk6ICcgKyB0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZEV4dHJhKGRhdGEsIG9mZnNldCkge1xuICAgICAgICBsZXQgc2lnbmF0dXJlLCBzaXplO1xuICAgICAgICBjb25zdCBtYXhQb3MgPSBvZmZzZXQgKyB0aGlzLmV4dHJhTGVuO1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgbWF4UG9zKSB7XG4gICAgICAgICAgICBzaWduYXR1cmUgPSBkYXRhLnJlYWRVSW50MTZMRShvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICBzaXplID0gZGF0YS5yZWFkVUludDE2TEUob2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSAyO1xuICAgICAgICAgICAgaWYgKGNvbnN0cy5JRF9aSVA2NCA9PT0gc2lnbmF0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVppcDY0RXh0cmEoZGF0YSwgb2Zmc2V0LCBzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCArPSBzaXplO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFyc2VaaXA2NEV4dHJhKGRhdGEsIG9mZnNldCwgbGVuZ3RoKSB7XG4gICAgICAgIGlmIChsZW5ndGggPj0gOCAmJiB0aGlzLnNpemUgPT09IGNvbnN0cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgdGhpcy5zaXplID0gcmVhZFVJbnQ2NExFKGRhdGEsIG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gODtcbiAgICAgICAgICAgIGxlbmd0aCAtPSA4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPj0gOCAmJiB0aGlzLmNvbXByZXNzZWRTaXplID09PSBjb25zdHMuRUZfWklQNjRfT1JfMzIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NlZFNpemUgPSByZWFkVUludDY0TEUoZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICAgICAgbGVuZ3RoIC09IDg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA+PSA4ICYmIHRoaXMub2Zmc2V0ID09PSBjb25zdHMuRUZfWklQNjRfT1JfMzIpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0ID0gcmVhZFVJbnQ2NExFKGRhdGEsIG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gODtcbiAgICAgICAgICAgIGxlbmd0aCAtPSA4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPj0gNCAmJiB0aGlzLmRpc2tTdGFydCA9PT0gY29uc3RzLkVGX1pJUDY0X09SXzE2KSB7XG4gICAgICAgICAgICB0aGlzLmRpc2tTdGFydCA9IGRhdGEucmVhZFVJbnQzMkxFKG9mZnNldCk7XG4gICAgICAgICAgICAvLyBvZmZzZXQgKz0gNDsgbGVuZ3RoIC09IDQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZW5jcnlwdGVkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiBjb25zdHMuRkxHX0VOVFJZX0VOQykgPT09IGNvbnN0cy5GTEdfRU5UUllfRU5DO1xuICAgIH1cblxuICAgIGdldCBpc0ZpbGUoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc0RpcmVjdG9yeTtcbiAgICB9XG59XG5cbmNsYXNzIEZzUmVhZCB7XG4gICAgY29uc3RydWN0b3IoZmQsIGJ1ZmZlciwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmZkID0gZmQ7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmJ5dGVzUmVhZCA9IDA7XG4gICAgICAgIHRoaXMud2FpdGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJlYWQoc3luYykge1xuICAgICAgICBTdHJlYW1aaXAuZGVidWdMb2coJ3JlYWQnLCB0aGlzLnBvc2l0aW9uLCB0aGlzLmJ5dGVzUmVhZCwgdGhpcy5sZW5ndGgsIHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy53YWl0aW5nID0gdHJ1ZTtcbiAgICAgICAgbGV0IGVycjtcbiAgICAgICAgaWYgKHN5bmMpIHtcbiAgICAgICAgICAgIGxldCBieXRlc1JlYWQgPSAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBieXRlc1JlYWQgPSBmcy5yZWFkU3luYyhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICsgdGhpcy5ieXRlc1JlYWQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoIC0gdGhpcy5ieXRlc1JlYWQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gKyB0aGlzLmJ5dGVzUmVhZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVhZENhbGxiYWNrKHN5bmMsIGVyciwgZXJyID8gYnl0ZXNSZWFkIDogbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcy5yZWFkKFxuICAgICAgICAgICAgICAgIHRoaXMuZmQsXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKyB0aGlzLmJ5dGVzUmVhZCxcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCAtIHRoaXMuYnl0ZXNSZWFkLFxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gKyB0aGlzLmJ5dGVzUmVhZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRDYWxsYmFjay5iaW5kKHRoaXMsIHN5bmMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZENhbGxiYWNrKHN5bmMsIGVyciwgYnl0ZXNSZWFkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYnl0ZXNSZWFkID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5ieXRlc1JlYWQgKz0gYnl0ZXNSZWFkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIgfHwgIWJ5dGVzUmVhZCB8fCB0aGlzLmJ5dGVzUmVhZCA9PT0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMud2FpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2soZXJyLCB0aGlzLmJ5dGVzUmVhZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlYWQoc3luYyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEZpbGVXaW5kb3dCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKGZkKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgdGhpcy5mZCA9IGZkO1xuICAgICAgICB0aGlzLmZzT3AgPSBudWxsO1xuICAgIH1cblxuICAgIGNoZWNrT3AoKSB7XG4gICAgICAgIGlmICh0aGlzLmZzT3AgJiYgdGhpcy5mc09wLndhaXRpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3BlcmF0aW9uIGluIHByb2dyZXNzJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkKHBvcywgbGVuZ3RoLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNoZWNrT3AoKTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBCdWZmZXIuYWxsb2MobGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zO1xuICAgICAgICB0aGlzLmZzT3AgPSBuZXcgRnNSZWFkKHRoaXMuZmQsIHRoaXMuYnVmZmVyLCAwLCBsZW5ndGgsIHRoaXMucG9zaXRpb24sIGNhbGxiYWNrKS5yZWFkKCk7XG4gICAgfVxuXG4gICAgZXhwYW5kTGVmdChsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2hlY2tPcCgpO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW0J1ZmZlci5hbGxvYyhsZW5ndGgpLCB0aGlzLmJ1ZmZlcl0pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uIC09IGxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZzT3AgPSBuZXcgRnNSZWFkKHRoaXMuZmQsIHRoaXMuYnVmZmVyLCAwLCBsZW5ndGgsIHRoaXMucG9zaXRpb24sIGNhbGxiYWNrKS5yZWFkKCk7XG4gICAgfVxuXG4gICAgZXhwYW5kUmlnaHQobGVuZ3RoLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNoZWNrT3AoKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuYnVmZmVyLCBCdWZmZXIuYWxsb2MobGVuZ3RoKV0pO1xuICAgICAgICB0aGlzLmZzT3AgPSBuZXcgRnNSZWFkKFxuICAgICAgICAgICAgdGhpcy5mZCxcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLFxuICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiArIG9mZnNldCxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICkucmVhZCgpO1xuICAgIH1cblxuICAgIG1vdmVSaWdodChsZW5ndGgsIGNhbGxiYWNrLCBzaGlmdCkge1xuICAgICAgICB0aGlzLmNoZWNrT3AoKTtcbiAgICAgICAgaWYgKHNoaWZ0KSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5jb3B5KHRoaXMuYnVmZmVyLCAwLCBzaGlmdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaGlmdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3NpdGlvbiArPSBzaGlmdDtcbiAgICAgICAgdGhpcy5mc09wID0gbmV3IEZzUmVhZChcbiAgICAgICAgICAgIHRoaXMuZmQsXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcixcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLmxlbmd0aCAtIHNoaWZ0LFxuICAgICAgICAgICAgc2hpZnQsXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uICsgdGhpcy5idWZmZXIubGVuZ3RoIC0gc2hpZnQsXG4gICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICApLnJlYWQoKTtcbiAgICB9XG59XG5cbmNsYXNzIEVudHJ5RGF0YVJlYWRlclN0cmVhbSBleHRlbmRzIHN0cmVhbS5SZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZmQsIG9mZnNldCwgbGVuZ3RoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZmQgPSBmZDtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgIHRoaXMucmVhZENhbGxiYWNrID0gdGhpcy5yZWFkQ2FsbGJhY2suYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBfcmVhZChuKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhNYXRoLm1pbihuLCB0aGlzLmxlbmd0aCAtIHRoaXMucG9zKSk7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBmcy5yZWFkKHRoaXMuZmQsIGJ1ZmZlciwgMCwgYnVmZmVyLmxlbmd0aCwgdGhpcy5vZmZzZXQgKyB0aGlzLnBvcywgdGhpcy5yZWFkQ2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZENhbGxiYWNrKGVyciwgYnl0ZXNSZWFkLCBidWZmZXIpIHtcbiAgICAgICAgdGhpcy5wb3MgKz0gYnl0ZXNSZWFkO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICghYnl0ZXNSZWFkKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2gobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYnl0ZXNSZWFkICE9PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKDAsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnB1c2goYnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRW50cnlWZXJpZnlTdHJlYW0gZXh0ZW5kcyBzdHJlYW0uVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlU3RtLCBjcmMsIHNpemUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJpZnkgPSBuZXcgQ3JjVmVyaWZ5KGNyYywgc2l6ZSk7XG4gICAgICAgIGJhc2VTdG0ub24oJ2Vycm9yJywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RyYW5zZm9ybShkYXRhLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IGVycjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudmVyaWZ5LmRhdGEoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVyciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9XG59XG5cbmNsYXNzIENyY1ZlcmlmeSB7XG4gICAgY29uc3RydWN0b3IoY3JjLCBzaXplKSB7XG4gICAgICAgIHRoaXMuY3JjID0gY3JjO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgY3JjOiB+MCxcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZGF0YShkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNyY1RhYmxlID0gQ3JjVmVyaWZ5LmdldENyY1RhYmxlKCk7XG4gICAgICAgIGxldCBjcmMgPSB0aGlzLnN0YXRlLmNyYztcbiAgICAgICAgbGV0IG9mZiA9IDA7XG4gICAgICAgIGxldCBsZW4gPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKC0tbGVuID49IDApIHtcbiAgICAgICAgICAgIGNyYyA9IGNyY1RhYmxlWyhjcmMgXiBkYXRhW29mZisrXSkgJiAweGZmXSBeIChjcmMgPj4+IDgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuY3JjID0gY3JjO1xuICAgICAgICB0aGlzLnN0YXRlLnNpemUgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNpemUgPj0gdGhpcy5zaXplKSB7XG4gICAgICAgICAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgICAgICAgICBidWYud3JpdGVJbnQzMkxFKH50aGlzLnN0YXRlLmNyYyAmIDB4ZmZmZmZmZmYsIDApO1xuICAgICAgICAgICAgY3JjID0gYnVmLnJlYWRVSW50MzJMRSgwKTtcbiAgICAgICAgICAgIGlmIChjcmMgIT09IHRoaXMuY3JjKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIENSQycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2l6ZSAhPT0gdGhpcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpemUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDcmNUYWJsZSgpIHtcbiAgICAgICAgbGV0IGNyY1RhYmxlID0gQ3JjVmVyaWZ5LmNyY1RhYmxlO1xuICAgICAgICBpZiAoIWNyY1RhYmxlKSB7XG4gICAgICAgICAgICBDcmNWZXJpZnkuY3JjVGFibGUgPSBjcmNUYWJsZSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgYiA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYyA9IG47XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDg7IC0tayA+PSAwOyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgMSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAweGVkYjg4MzIwIF4gKGMgPj4+IDEpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGMgPj4+IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGMgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGIud3JpdGVJbnQzMkxFKGMsIDApO1xuICAgICAgICAgICAgICAgICAgICBjID0gYi5yZWFkVUludDMyTEUoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNyY1RhYmxlW25dID0gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JjVGFibGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZVppcFRpbWUodGltZWJ5dGVzLCBkYXRlYnl0ZXMpIHtcbiAgICBjb25zdCB0aW1lYml0cyA9IHRvQml0cyh0aW1lYnl0ZXMsIDE2KTtcbiAgICBjb25zdCBkYXRlYml0cyA9IHRvQml0cyhkYXRlYnl0ZXMsIDE2KTtcblxuICAgIGNvbnN0IG10ID0ge1xuICAgICAgICBoOiBwYXJzZUludCh0aW1lYml0cy5zbGljZSgwLCA1KS5qb2luKCcnKSwgMiksXG4gICAgICAgIG06IHBhcnNlSW50KHRpbWViaXRzLnNsaWNlKDUsIDExKS5qb2luKCcnKSwgMiksXG4gICAgICAgIHM6IHBhcnNlSW50KHRpbWViaXRzLnNsaWNlKDExLCAxNikuam9pbignJyksIDIpICogMixcbiAgICAgICAgWTogcGFyc2VJbnQoZGF0ZWJpdHMuc2xpY2UoMCwgNykuam9pbignJyksIDIpICsgMTk4MCxcbiAgICAgICAgTTogcGFyc2VJbnQoZGF0ZWJpdHMuc2xpY2UoNywgMTEpLmpvaW4oJycpLCAyKSxcbiAgICAgICAgRDogcGFyc2VJbnQoZGF0ZWJpdHMuc2xpY2UoMTEsIDE2KS5qb2luKCcnKSwgMiksXG4gICAgfTtcbiAgICBjb25zdCBkdF9zdHIgPSBbbXQuWSwgbXQuTSwgbXQuRF0uam9pbignLScpICsgJyAnICsgW210LmgsIG10Lm0sIG10LnNdLmpvaW4oJzonKSArICcgR01UKzAnO1xuICAgIHJldHVybiBuZXcgRGF0ZShkdF9zdHIpLmdldFRpbWUoKTtcbn1cblxuZnVuY3Rpb24gdG9CaXRzKGRlYywgc2l6ZSkge1xuICAgIGxldCBiID0gKGRlYyA+Pj4gMCkudG9TdHJpbmcoMik7XG4gICAgd2hpbGUgKGIubGVuZ3RoIDwgc2l6ZSkge1xuICAgICAgICBiID0gJzAnICsgYjtcbiAgICB9XG4gICAgcmV0dXJuIGIuc3BsaXQoJycpO1xufVxuXG5mdW5jdGlvbiByZWFkVUludDY0TEUoYnVmZmVyLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQgKyA0KSAqIDB4MDAwMDAwMDEwMDAwMDAwMCArIGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW1aaXA7XG4iLCAibW9kdWxlLmV4cG9ydHMgPSB7XG4gIE90aGVyOiAwLFxuICBDUjogMSA8PCAwLFxuICBMRjogMSA8PCAxLFxuICBDb250cm9sOiAxIDw8IDIsXG4gIEV4dGVuZDogMSA8PCAzLFxuICBaV0o6IDEgPDwgNCxcbiAgUmVnaW9uYWxfSW5kaWNhdG9yOiAxIDw8IDUsXG4gIFByZXBlbmQ6IDEgPDwgNixcbiAgU3BhY2luZ01hcms6IDEgPDwgNyxcbiAgTDogMSA8PCA4LFxuICBWOiAxIDw8IDksXG4gIFQ6IDEgPDwgMTAsXG4gIExWOiAxIDw8IDExLFxuICBMVlQ6IDEgPDwgMTIsXG4gIEV4dGVuZGVkX1BpY3RvZ3JhcGhpYzogMSA8PCAxMyxcbiAgSW5DQl9MaW5rZXI6IDEgPDwgMTQsXG4gIEluQ0JfQ29uc29uYW50OiAxIDw8IDE1LFxuICBJbkNCX0V4dGVuZDogMSA8PCAxNixcbn07XG4iLCAie1wiZGF0YVwiOlwiQUJBT0FBQUFBQURRalFBQUFkNEhJZmp0bkcyb0ZVVVl4eC8xbkh1MjlPb2x2S1JTWklJUWdoU1NFRkp3d2o0WVdkem9GY29ReXJpQkh3ejhZSERCaVNLRExHOVlLU0VpVVg0SUZRMEZDYVJMb0ZtVWI5bUxCcUorRURPSXNBZ3BqZjdiN25Dbk9UTzdNN3N6dThmclBQQmpadWZsZVo2WmVXWm03M3B3WUFMUmsyQXBHQVFNdkM2VWxVMkh3VWJ3RHRoazBQNURzQzJqZmlmWUMwYkFRWEFFL0FoT2dYTkN1MS9BNytBU29BWlJENWdNZWtFL21BRm1nZTFnTjlqYlNQck9TZFBQa000RFg0QXZ3VkZ3QXB3Qlo4RUZjQkg4QmY0R0U1cEVVWFAwdVEvNWFjMmsvVXlrdHpXVC9uY2dQWWowcm1aaXA5MU02aGMxUi9VL2hQemo0Qm53UEJnRUN3VDdjYjhWS0ZzWkpmbFZ5SzlPOWNXOGd2d2I2Zk02cE8rbCtjMUl0NEx0NEhhaC9SN2s5NEg5NEJ1aFBHWkROTXFXbEsxZ2Y0cllOb3Z0aHUxYzh4M0c4eE9ZbWhLWG5VSDZjNXBmMC9oLys4VW8vMVdhZ3orYmV2MVgwcnBHRDlHa25pUy9GalJUdlZOUmRpTzRCY3dHYzhIOHROM2RhYnF3cDFQdi9TaDdXRkhPR1U0cE96OXZ3cy8xcWErUEN1WHhHSFptakR0UUFkTDZuMURFZ0FzN053bnJ2Q1FqNWdLQlFDQVFDQVFDZ1VBZ0VPZ0duc1BmcmxPRTd6bHZHM3kvV0k0K0s0Vy9lWWNpb3RWZ0NHV3Y4dTg1U05lRGpWSHlQWEFqOHRPUmJrbnJ0eUxkQVQ1Sm56OUZlaG5wNXpsL1MzK0Yra1BRZVJnY0FVZkJNZkF0T0I2RnVsQVg2a0pkcUhOZHR3UHNBUWVpK3Urc1FDQXdkam5rK2Q5VE5rMFkvWGQxbVVGRm1maCt2S0hoeHljYlJub1RhRExSMHQ1ODJtZzNvR2c3TEpXTjRKbW1vRDFZTlNVcDI0YjBOSmpXUjNRbkdBVDNUY1Q3UHpoN0hkR3QxeE5GNHhLZUZ2SWl1OUQyNUVSMW5jenFWTWVNU1VTN2tYOE02YnZnTUtCZU14MkJRQ0FRR0p2OGdYdWhFZDhuTGFKL2NCKzJjQ2RQYWlXL0Uyb2p2eWk5b3lPa042QjhEZjVtbVpiVzM0eDBRTGpEWjdlUzcwN2kvUnIvWm1SdWEvUjNaUE9SdjZlVjFDMk1VL1IvTVAxTzlnQ2VIMm1OOW4wSytXZGIrcnQ3RUhVcmhQcFZyZVM3R0g5bVF0MXJ5TCtWb1d0OVJsM01FdWhkSnIydnZJOCtINENQd1F1bzI1WHFlTEhBZTgxZXdmNEk4Z2NrZjc3RzgwdXAzdU01dm9xY1JOdVgwZTgwMHZNVy9Yd3lCSDdyRWw5RVppQzJuNmpRM21hc3l4elkvRUh4blhqZVZmcHRJUDc5N3JBQWt4ak80S05HWi90cmpUSnovMzNPMzNyVHBYUHBWQmYrMXU0Y2ZMcWc4V3V4bzkrRG5rLzFYelFjLzZXMDNSV2hyRCtkU3pJNHgrSy9lUzkxNFhubmlzdnAyTVk3T3JQMmxkQVRvZTg2TUZuUTBYK1ZucVUyeE9mbnJDaDVmM09oYTBHVXBQY2lYUVFHcnFZNWhLOUxCWCtuSy9hZWJhd2VTOCtBWlNYbklhOS92NE16VGg3YjJqSDZPL3JsSmRmaVpCZU1vVUZtakJmeTR3ejdtQkNrUGduejd5Nk9xNHgvbCtzV1hlTzRsS3JzZEp2VXZZWkYxMTFNZGZteExtME5wbUk3NTkxODUzVGorVkpWREdhTm9aM1RSdGFoYXV0RFJML3FrbTZLbFc2V2EyRWVYSTNONVJ5MFNYK2UyNnhKMjdLOUs1aWlqTkp5anZ3c25sbFo0bUtlWmJ1eTcySTVGNVZ2TnI2bytoY1ZicmVkb1ZjMy95N3ZOL2tla2UweXdTNlQ2dHFPZk9FMm1RS1M4ckovM0E4bXBIV2ZaVmw3cXEwb1YwbGJROW05Yk9zenQrbGI1TFdzVThUeE44ajkrTG5PUG5MM1BjNzN0ejRYMzFmeTdtVmRET2JaY25IZmRldjNWTlY4NmViUnRGMVZVc1N1aTdVME9RL3JFdkU4SnNwK2oxSDVMYmZuZWNycGErTmYxWEVpMm1aVXovcUllNGI3b0p0RFhpOC9tODViTjY5SEpPWHIyaTlaKzBQVlZ1VzM2bjV4NlY4Wi9ZdzY0MHMrdDVuUWxwR2ZPUEFkWDJYUEk1ZCtpUDZ3REo4WUZkdmZSYy9iT2tSMzFqS3BYSHgyZWI3Sjkxa2Q3eWFNT3NlYjl3NlZwN1BPOVl5RlVXZU1NNnB2ZkM3bWhCWG9JNzh6MVNueWZEUEx2cW95UnAxbm1OaWVaZUFxUmxVeFYrU3N6M3Z2ZFNXbS9wYUo4N3J1dWlwc3lUR21zc2ZJM1g0eldTTVZURk5PbEQxUE5qYksrT2VLc21JNmIvSjRtZFRXcCtUWjhqa2ZSWFhFd2d6MGxQWFp4OXo3UHJ1cU9oZE5ZbHFNWlIycWVIZTFOMzNPUWRZWVZlV3lpRzNsL3JLZUt0ZVMyL1VoWERkUDg4NUNNYVdjUHFiemFCSlRPdDFWaXFuUGpPcUptU3p4Y2JmV3RRNmlNTkxQdjZ0eDVvbThmeGgxbmlVdS9HQTVtTWFscTNsUW5RKzI1UG10c3BubER4ZFJyd3VwYXcvN1dDdmI5VkxweW5yV2xia1VScDE3enJjUGpOVDdyU29wc3I5Y25YOTUrODYxUFJOL2JNOFkxL1labWQwLy9GbW5wMG94dlJ2azV5SjJUTnF3QXJwZGlZK1k0S2s4YjFueldHU09HWm5GRjI5bksxeW5IQXVpcmFLNlhVdWRQbFJoMitaTTFkM3hKbnA5UzlIM09wMk9LdTRYbjdxcmZuOWdWTytaYTNvZTZ2cnE3dldxM3oyNFB5NkZrZjU5UWpkMlZ6WjBkblhDNjJ4ODlpR2k3eHd1dW1lYmM4WlVaRnVtODFCbHZLb2thKzE5K2NMSVBHWlU3Zml6VDNHbFAyOSt4ZkV3S2E4NjQrb1VrM09Da1hwOW1hSnRGZUxhSnFOaXNjdFRHOUhGUmgxM1haYW94bWQ2VDdzV1J1Wno1U3N1czN6Z0lzZUkyRjdXVmJXWXpGc1ZzV1p6VDV2ZUhXVkUxcVdhajd3NGN5V21hNlR5TVc4Y1RKUDM3YnZjaHFRNkd4K1lBbGtmTC9leFBxSXQwYjVyNGJyejVsUFZ6cWZvOUdmWkxSclRObU14MWNmSXo1ejVQa2Q5bnRmeXZpbENudjZ5L3RyMnErb3VNL1doYlB5WDJVTkZkUHFTcXM2cExMdXVjV1hMWkF3MjQvVWxPdDlkenFFTG4xejVacnR2OHV6NkVGODJabGFFSzJGVTd2dHBYY0lzeWRKUmhiQ2ErZTgvRDYwYlVjYlhUTU16ZlJLMjRuS3NzdmdZcit4NzFsaDhpTy8xdEJsL0xQR2xJc2VBVDZxMko4bS9cIn0iLCAie1wiZGF0YVwiOlwiQUFBQ0FBQUFBQUNBT0FBQUFiWUJTZjd0MlMxSUJFRVlCdURWRFo3RllyUU1Oc0ZpdTNoZ0VZT0kwU0NYUklVckI4SmhFWnRnczVnRWcxR01GazAybTgyb0dJMDJtKzl4ZXpDT2N6di91d3YzZnZBd2MvUHpmWE96Y2RxeldkYUJEZGlHUGRpSGRqRStEUzNSTkR1Q2ZzbjhpZFEvZzNPSDNCZHdLZjBlOTYvZ3VtVGZZY25jTGR6QlBUekFvK1JaK2YwQ3IvQUc3L0FKWDQ3Mzh4MXd0ejlGTzVQWC81MG42VVhNTmRmZy8wbEVSRVJFUkVSRVJFUkVSRVRwZGVkSEJ2RFJxbDRucTBjWHRXOWFmOThxZFJieTBWdnA4SzRXMFYrQzVYdzB0NEoyYmZqZUJwM2NuRXUxYnJubkNUWU5hN2VLZHo5MVhQN1dPOUxiNEdxUmI3Y1k2eGJ0QWRxZVZPc1kvUUdjZXZ3L3RiNk9UODVZaHZmS1lFeDlDTXV4S3NLbnJzK2VKdFZJblZ2SEowZVZZVnZUWmsyc2lGVkxPQ2piNjFQVFpYM01kVldFeVA3Zmp6cG1NeGR6VHlxMkVidWU2eDYxblhSR256bmRXcGYxYW43ZFhtR1lFNFkxcHRxcUtzSzFudTI2SnUwdHkrbWFWMlJwdmsrcW5EWmpLVUlvYlVpZXNkQVFFL2ptQ1RtSG1zc2twRlpzVllidG1YUmNhb1NHVVBvbXVuVzJkZXJRaERQRmp0VDFRL2ViOHZubTk5MGZxMzVvSFZ0MTFiVTltODljN0ROSThRcz1cIn0iLCAie1wiZGF0YVwiOlwiQUFnT0FBQUFBQUJRZmdBQUFXTUduUG50bW0ySVZVVVl4K2R5YjJlelhYdEJpU0NMc0tESWlLSUlvWUlOY2lHd1FIclJMMlVmaWkwcU1zdjdRVkJ1UWtYaGttVzVna3NRUmhSRlNCc2xia2xsSHl5M0wyWGxsa1hyQjN1aEYwdFEwS2oreHpOM2QzYnV6Sng1UGVlc093LzhtRE52ei9QTW5PYzhzL2ZzNmFzVGNndTRBOXdGK21qZFY5a0VhOEZxc0U1ai9EUGdlVVgvSnZBU2VCVzhCZDRHTzhDSFlEY3o3blB3RlJnRDQrQW44Q2Y0QXh3QngwRzlRY2pyWUJ0NHA1SE4vWURxR0VGOUY3Z1czQUM2d1UxZ0NWZ0s1b0RsWUE4WUJYdkJHT2dIRDRGendTbzZmZzI0RUR3QnhzRUI4Q3UxTjRCeUkxZ0EvZ2Jmbyswd3l1TzB2Z1c4REs1aSt0TjV0Vk95TW1VV3JzOWs2bk54UFkvV0wwQjVNYjIrSE9VMTRIcndZMk55L0NMVWJ3YTNnenNaUFQ3WkdFQ25EdmRpUFErQVJ5aHBXeFBsV25yOUpMZmVBZFMvNDNTOHFOaVRJZHEzRmVVYjlIb2xPRWo3aDlIMkx0Z0pQZ0hyMFRaS3gzMUp5MzBDL1QrZzdhRENicFBpdWovZlN0clROZlFHaW9XSUhyOXorejhpaUFFZmRnNHpkbzdHZXg2SlJDS1JTQ1FTaVVRaWtZcnpMMzY3SG1McTh6Vit5eVlKSWJPVHp2YTVhSnRIMnk5Q3VZQmVid2RYNFBvWXl2MTA3RUxVZTVQc1BXQmF2ekhKM3RNdEZ1aGx1VFduUHhLSlJDS1JTQ1F5L1RqUUNLdC9YWDN5LytvNkhQSnMzNVhOc3pQTzBXUWYrRm5RZnNucFUrdkxVTjhNZGdOeVJ0WjJOY3A3d0JEWURuNEQ0N01JT2VzMFFwYUFEZURVV3NZZTVwcWwzazNJWmQzaVBwNEg2YmpuVUk2Q2Y4QjFQWVEwd1dDUG5vNUlKQktKbkp4ODNlTjJmaTdOZVlkMGpLc3ZyK0E3cDM3NDlLemtYZDJBcCs5UjdxZnJmbGh6L2F2YTQ1bTJJN1JjdytsSTMvV3RBTytCeDVQc0c2K25rK3hidjdRL2ZXZTRnYzdaUlB1M29Oeks2SGt0bWZ5MnIwMzZ2YzgyT240NHliNFpIS0Z6UGtMNWFaSjlmOWhIN1k4eStuYmhlcTlpcldPcGYwei9MOG5VV1BtTDZUdUs2LzhVdWhwZDZyM3NSdjhjYnN6WlhabTk4MUhPQjVmUy9pdHpkSWxZeU16cFRhODVIWXRSdjQyMkxUUFEveWpkKy9TWnVkdkNyMURjVjVJdjZXK0hGUlhhQjk4OFJ0ZTJ1Z0pySEtUUFc0dng1YWtLK01XenZvSSsrU2I5enZLRnJpeS9tOHdid3B4WFFML2dETnM1VGIrelRQZml6YTZzSEVhNUEzdzhqV0xnTS9qNkJlUHZvT0JjTTMzK3Y2SGo5enZ1UTk3OGxSNWlobC9iZWRNMER2TjR2d0krTk92eTcvU2JDa3plNTFXVlJmWGFDYUpFbWRsU20rSDRsS0xzVkUzS3ZvZTI5NTB0WmRjbnU1VDFySVNRS3VhSG92Wk5adzI2L2FLeHZuMHRTNm9VRzFXV21iQVB2dGJHanpQVTJXdmdWNHVvRWM3UGtRNzdNaEhvWXUxSzdZdk9WaHY3dXVKNy9RcGRMY0t0WDJaUHRoYzFBL3RFY0svemJBVysvMHJibnFSVkFsUHVrMGdDNWI1Y3YxUStCYklwOGtHblgyVmpRbVQ3YkxtL0hmcDFSZloza0FkcEdaSTNoMmlNblpDQzQ3ZnRqKzM1MVdKMDZQVEx4azZJN094eFdIOHJkNFJDUkhIdUtDMURiT2FJZEp5UUFuNHZ1UHBxUzhkNUhWSlVmeStwMmxYamloSWJ1eWEvTDJ3b3drYWUzVEpFWkZmbWp5d25Cc2hSU2w5czlKZTF2N3o5a0w3YlBFOUZpK3hNbGYwOVozTmUyS3hORnU4cWYyeDAyb2pNRDlNY3JwT0xpdlRYOWo2RjlsL0hmbWdib3RLbmZwOW5KQ0hxZmZGaG8waGN4V1JOaEhUYXJVSThoOTRQR3gyOFBwMnhyclo4U2VoY0ZUb1BodmFidmJaNUprWHg0ZXRaZDRsWmZuMCtwSXo4b01vUnVucHNiUGdVVVo0TmFZdTFxY3I5dkMrMk1Xc2E4eUhPUGxPeGZVN0w5Rm5rZzB0KzBkR2RaOU8zOFBHcjZuUHh3elJXWFVYMC9KbVNOMDlrVStXUHlEOGY0ak0raW9vN2xXMWZlbXp1djBpWHFpNXI4eUdxL2ZCdHMrZ2NhL004K29yTHZPYzBSSjdQODhjMEovbTJML09GYnpmVmE1THJYYzRXSDJOc2JKcnVsY3NhZmErVDk5bEZWd2dwd3I3Sk15NDdVM1QwRmlGRjU2dVF1c3M0ajNnZmJPYjY4c1VsQjZ2T2phTFB0cmJka0xwOW5abXFmZmNwcW51cms0TlUrb3E4cnpJeDJYZGR2OHRlbCtwZXlkYXIraHRCcEl1ZkgwSjRPMlhGQ0N1MnowR1pheWp5RE16TFM2Wit5R0sxU2ptazdSTmJ0cTkxenJYUWZ1bWVPYjU4TWRHVHR4ZGxuZ215YzA5blRsbXhxZk1jbXZpajY3T0pYVjNSM2RPUXNaem5oNnFma09MODBNM0J1dnRXMUI3eVkyUitGTEcvTXNuelZYZCthRjlWdVVrMXh6V3VkUHd5MWVkenoxeDh0OVVmeW5kYkhUWTJ5eFRkSE9DYTkyemozQ1IrVGU2Zmp6WDVGdGY5TS9FMVZDNHl6VmVoUk9hNzcvaDA5Y21YYjZaeG0yYzNwUGpTSDlibi93RT1cIn0iLCAidmFyIFRJTkZfT0sgPSAwO1xudmFyIFRJTkZfREFUQV9FUlJPUiA9IC0zO1xuXG5mdW5jdGlvbiBUcmVlKCkge1xuICB0aGlzLnRhYmxlID0gbmV3IFVpbnQxNkFycmF5KDE2KTsgICAvKiB0YWJsZSBvZiBjb2RlIGxlbmd0aCBjb3VudHMgKi9cbiAgdGhpcy50cmFucyA9IG5ldyBVaW50MTZBcnJheSgyODgpOyAgLyogY29kZSAtPiBzeW1ib2wgdHJhbnNsYXRpb24gdGFibGUgKi9cbn1cblxuZnVuY3Rpb24gRGF0YShzb3VyY2UsIGRlc3QpIHtcbiAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gIHRoaXMuc291cmNlSW5kZXggPSAwO1xuICB0aGlzLnRhZyA9IDA7XG4gIHRoaXMuYml0Y291bnQgPSAwO1xuICBcbiAgdGhpcy5kZXN0ID0gZGVzdDtcbiAgdGhpcy5kZXN0TGVuID0gMDtcbiAgXG4gIHRoaXMubHRyZWUgPSBuZXcgVHJlZSgpOyAgLyogZHluYW1pYyBsZW5ndGgvc3ltYm9sIHRyZWUgKi9cbiAgdGhpcy5kdHJlZSA9IG5ldyBUcmVlKCk7ICAvKiBkeW5hbWljIGRpc3RhbmNlIHRyZWUgKi9cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIC0tIHVuaW5pdGlhbGl6ZWQgZ2xvYmFsIGRhdGEgKHN0YXRpYyBzdHJ1Y3R1cmVzKSAtLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIHNsdHJlZSA9IG5ldyBUcmVlKCk7XG52YXIgc2R0cmVlID0gbmV3IFRyZWUoKTtcblxuLyogZXh0cmEgYml0cyBhbmQgYmFzZSB0YWJsZXMgZm9yIGxlbmd0aCBjb2RlcyAqL1xudmFyIGxlbmd0aF9iaXRzID0gbmV3IFVpbnQ4QXJyYXkoMzApO1xudmFyIGxlbmd0aF9iYXNlID0gbmV3IFVpbnQxNkFycmF5KDMwKTtcblxuLyogZXh0cmEgYml0cyBhbmQgYmFzZSB0YWJsZXMgZm9yIGRpc3RhbmNlIGNvZGVzICovXG52YXIgZGlzdF9iaXRzID0gbmV3IFVpbnQ4QXJyYXkoMzApO1xudmFyIGRpc3RfYmFzZSA9IG5ldyBVaW50MTZBcnJheSgzMCk7XG5cbi8qIHNwZWNpYWwgb3JkZXJpbmcgb2YgY29kZSBsZW5ndGggY29kZXMgKi9cbnZhciBjbGNpZHggPSBuZXcgVWludDhBcnJheShbXG4gIDE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsXG4gIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLFxuICAxNCwgMSwgMTVcbl0pO1xuXG4vKiB1c2VkIGJ5IHRpbmZfZGVjb2RlX3RyZWVzLCBhdm9pZHMgYWxsb2NhdGlvbnMgZXZlcnkgY2FsbCAqL1xudmFyIGNvZGVfdHJlZSA9IG5ldyBUcmVlKCk7XG52YXIgbGVuZ3RocyA9IG5ldyBVaW50OEFycmF5KDI4OCArIDMyKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0gdXRpbGl0eSBmdW5jdGlvbnMgLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogYnVpbGQgZXh0cmEgYml0cyBhbmQgYmFzZSB0YWJsZXMgKi9cbmZ1bmN0aW9uIHRpbmZfYnVpbGRfYml0c19iYXNlKGJpdHMsIGJhc2UsIGRlbHRhLCBmaXJzdCkge1xuICB2YXIgaSwgc3VtO1xuXG4gIC8qIGJ1aWxkIGJpdHMgdGFibGUgKi9cbiAgZm9yIChpID0gMDsgaSA8IGRlbHRhOyArK2kpIGJpdHNbaV0gPSAwO1xuICBmb3IgKGkgPSAwOyBpIDwgMzAgLSBkZWx0YTsgKytpKSBiaXRzW2kgKyBkZWx0YV0gPSBpIC8gZGVsdGEgfCAwO1xuXG4gIC8qIGJ1aWxkIGJhc2UgdGFibGUgKi9cbiAgZm9yIChzdW0gPSBmaXJzdCwgaSA9IDA7IGkgPCAzMDsgKytpKSB7XG4gICAgYmFzZVtpXSA9IHN1bTtcbiAgICBzdW0gKz0gMSA8PCBiaXRzW2ldO1xuICB9XG59XG5cbi8qIGJ1aWxkIHRoZSBmaXhlZCBodWZmbWFuIHRyZWVzICovXG5mdW5jdGlvbiB0aW5mX2J1aWxkX2ZpeGVkX3RyZWVzKGx0LCBkdCkge1xuICB2YXIgaTtcblxuICAvKiBidWlsZCBmaXhlZCBsZW5ndGggdHJlZSAqL1xuICBmb3IgKGkgPSAwOyBpIDwgNzsgKytpKSBsdC50YWJsZVtpXSA9IDA7XG5cbiAgbHQudGFibGVbN10gPSAyNDtcbiAgbHQudGFibGVbOF0gPSAxNTI7XG4gIGx0LnRhYmxlWzldID0gMTEyO1xuXG4gIGZvciAoaSA9IDA7IGkgPCAyNDsgKytpKSBsdC50cmFuc1tpXSA9IDI1NiArIGk7XG4gIGZvciAoaSA9IDA7IGkgPCAxNDQ7ICsraSkgbHQudHJhbnNbMjQgKyBpXSA9IGk7XG4gIGZvciAoaSA9IDA7IGkgPCA4OyArK2kpIGx0LnRyYW5zWzI0ICsgMTQ0ICsgaV0gPSAyODAgKyBpO1xuICBmb3IgKGkgPSAwOyBpIDwgMTEyOyArK2kpIGx0LnRyYW5zWzI0ICsgMTQ0ICsgOCArIGldID0gMTQ0ICsgaTtcblxuICAvKiBidWlsZCBmaXhlZCBkaXN0YW5jZSB0cmVlICovXG4gIGZvciAoaSA9IDA7IGkgPCA1OyArK2kpIGR0LnRhYmxlW2ldID0gMDtcblxuICBkdC50YWJsZVs1XSA9IDMyO1xuXG4gIGZvciAoaSA9IDA7IGkgPCAzMjsgKytpKSBkdC50cmFuc1tpXSA9IGk7XG59XG5cbi8qIGdpdmVuIGFuIGFycmF5IG9mIGNvZGUgbGVuZ3RocywgYnVpbGQgYSB0cmVlICovXG52YXIgb2ZmcyA9IG5ldyBVaW50MTZBcnJheSgxNik7XG5cbmZ1bmN0aW9uIHRpbmZfYnVpbGRfdHJlZSh0LCBsZW5ndGhzLCBvZmYsIG51bSkge1xuICB2YXIgaSwgc3VtO1xuXG4gIC8qIGNsZWFyIGNvZGUgbGVuZ3RoIGNvdW50IHRhYmxlICovXG4gIGZvciAoaSA9IDA7IGkgPCAxNjsgKytpKSB0LnRhYmxlW2ldID0gMDtcblxuICAvKiBzY2FuIHN5bWJvbCBsZW5ndGhzLCBhbmQgc3VtIGNvZGUgbGVuZ3RoIGNvdW50cyAqL1xuICBmb3IgKGkgPSAwOyBpIDwgbnVtOyArK2kpIHQudGFibGVbbGVuZ3Roc1tvZmYgKyBpXV0rKztcblxuICB0LnRhYmxlWzBdID0gMDtcblxuICAvKiBjb21wdXRlIG9mZnNldCB0YWJsZSBmb3IgZGlzdHJpYnV0aW9uIHNvcnQgKi9cbiAgZm9yIChzdW0gPSAwLCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICBvZmZzW2ldID0gc3VtO1xuICAgIHN1bSArPSB0LnRhYmxlW2ldO1xuICB9XG5cbiAgLyogY3JlYXRlIGNvZGUtPnN5bWJvbCB0cmFuc2xhdGlvbiB0YWJsZSAoc3ltYm9scyBzb3J0ZWQgYnkgY29kZSkgKi9cbiAgZm9yIChpID0gMDsgaSA8IG51bTsgKytpKSB7XG4gICAgaWYgKGxlbmd0aHNbb2ZmICsgaV0pIHQudHJhbnNbb2Zmc1tsZW5ndGhzW29mZiArIGldXSsrXSA9IGk7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLSBkZWNvZGUgZnVuY3Rpb25zIC0tICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogZ2V0IG9uZSBiaXQgZnJvbSBzb3VyY2Ugc3RyZWFtICovXG5mdW5jdGlvbiB0aW5mX2dldGJpdChkKSB7XG4gIC8qIGNoZWNrIGlmIHRhZyBpcyBlbXB0eSAqL1xuICBpZiAoIWQuYml0Y291bnQtLSkge1xuICAgIC8qIGxvYWQgbmV4dCB0YWcgKi9cbiAgICBkLnRhZyA9IGQuc291cmNlW2Quc291cmNlSW5kZXgrK107XG4gICAgZC5iaXRjb3VudCA9IDc7XG4gIH1cblxuICAvKiBzaGlmdCBiaXQgb3V0IG9mIHRhZyAqL1xuICB2YXIgYml0ID0gZC50YWcgJiAxO1xuICBkLnRhZyA+Pj49IDE7XG5cbiAgcmV0dXJuIGJpdDtcbn1cblxuLyogcmVhZCBhIG51bSBiaXQgdmFsdWUgZnJvbSBhIHN0cmVhbSBhbmQgYWRkIGJhc2UgKi9cbmZ1bmN0aW9uIHRpbmZfcmVhZF9iaXRzKGQsIG51bSwgYmFzZSkge1xuICBpZiAoIW51bSlcbiAgICByZXR1cm4gYmFzZTtcblxuICB3aGlsZSAoZC5iaXRjb3VudCA8IDI0KSB7XG4gICAgZC50YWcgfD0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCsrXSA8PCBkLmJpdGNvdW50O1xuICAgIGQuYml0Y291bnQgKz0gODtcbiAgfVxuXG4gIHZhciB2YWwgPSBkLnRhZyAmICgweGZmZmYgPj4+ICgxNiAtIG51bSkpO1xuICBkLnRhZyA+Pj49IG51bTtcbiAgZC5iaXRjb3VudCAtPSBudW07XG4gIHJldHVybiB2YWwgKyBiYXNlO1xufVxuXG4vKiBnaXZlbiBhIGRhdGEgc3RyZWFtIGFuZCBhIHRyZWUsIGRlY29kZSBhIHN5bWJvbCAqL1xuZnVuY3Rpb24gdGluZl9kZWNvZGVfc3ltYm9sKGQsIHQpIHtcbiAgd2hpbGUgKGQuYml0Y291bnQgPCAyNCkge1xuICAgIGQudGFnIHw9IGQuc291cmNlW2Quc291cmNlSW5kZXgrK10gPDwgZC5iaXRjb3VudDtcbiAgICBkLmJpdGNvdW50ICs9IDg7XG4gIH1cbiAgXG4gIHZhciBzdW0gPSAwLCBjdXIgPSAwLCBsZW4gPSAwO1xuICB2YXIgdGFnID0gZC50YWc7XG5cbiAgLyogZ2V0IG1vcmUgYml0cyB3aGlsZSBjb2RlIHZhbHVlIGlzIGFib3ZlIHN1bSAqL1xuICBkbyB7XG4gICAgY3VyID0gMiAqIGN1ciArICh0YWcgJiAxKTtcbiAgICB0YWcgPj4+PSAxO1xuICAgICsrbGVuO1xuXG4gICAgc3VtICs9IHQudGFibGVbbGVuXTtcbiAgICBjdXIgLT0gdC50YWJsZVtsZW5dO1xuICB9IHdoaWxlIChjdXIgPj0gMCk7XG4gIFxuICBkLnRhZyA9IHRhZztcbiAgZC5iaXRjb3VudCAtPSBsZW47XG5cbiAgcmV0dXJuIHQudHJhbnNbc3VtICsgY3VyXTtcbn1cblxuLyogZ2l2ZW4gYSBkYXRhIHN0cmVhbSwgZGVjb2RlIGR5bmFtaWMgdHJlZXMgZnJvbSBpdCAqL1xuZnVuY3Rpb24gdGluZl9kZWNvZGVfdHJlZXMoZCwgbHQsIGR0KSB7XG4gIHZhciBobGl0LCBoZGlzdCwgaGNsZW47XG4gIHZhciBpLCBudW0sIGxlbmd0aDtcblxuICAvKiBnZXQgNSBiaXRzIEhMSVQgKDI1Ny0yODYpICovXG4gIGhsaXQgPSB0aW5mX3JlYWRfYml0cyhkLCA1LCAyNTcpO1xuXG4gIC8qIGdldCA1IGJpdHMgSERJU1QgKDEtMzIpICovXG4gIGhkaXN0ID0gdGluZl9yZWFkX2JpdHMoZCwgNSwgMSk7XG5cbiAgLyogZ2V0IDQgYml0cyBIQ0xFTiAoNC0xOSkgKi9cbiAgaGNsZW4gPSB0aW5mX3JlYWRfYml0cyhkLCA0LCA0KTtcblxuICBmb3IgKGkgPSAwOyBpIDwgMTk7ICsraSkgbGVuZ3Roc1tpXSA9IDA7XG5cbiAgLyogcmVhZCBjb2RlIGxlbmd0aHMgZm9yIGNvZGUgbGVuZ3RoIGFscGhhYmV0ICovXG4gIGZvciAoaSA9IDA7IGkgPCBoY2xlbjsgKytpKSB7XG4gICAgLyogZ2V0IDMgYml0cyBjb2RlIGxlbmd0aCAoMC03KSAqL1xuICAgIHZhciBjbGVuID0gdGluZl9yZWFkX2JpdHMoZCwgMywgMCk7XG4gICAgbGVuZ3Roc1tjbGNpZHhbaV1dID0gY2xlbjtcbiAgfVxuXG4gIC8qIGJ1aWxkIGNvZGUgbGVuZ3RoIHRyZWUgKi9cbiAgdGluZl9idWlsZF90cmVlKGNvZGVfdHJlZSwgbGVuZ3RocywgMCwgMTkpO1xuXG4gIC8qIGRlY29kZSBjb2RlIGxlbmd0aHMgZm9yIHRoZSBkeW5hbWljIHRyZWVzICovXG4gIGZvciAobnVtID0gMDsgbnVtIDwgaGxpdCArIGhkaXN0Oykge1xuICAgIHZhciBzeW0gPSB0aW5mX2RlY29kZV9zeW1ib2woZCwgY29kZV90cmVlKTtcblxuICAgIHN3aXRjaCAoc3ltKSB7XG4gICAgICBjYXNlIDE2OlxuICAgICAgICAvKiBjb3B5IHByZXZpb3VzIGNvZGUgbGVuZ3RoIDMtNiB0aW1lcyAocmVhZCAyIGJpdHMpICovXG4gICAgICAgIHZhciBwcmV2ID0gbGVuZ3Roc1tudW0gLSAxXTtcbiAgICAgICAgZm9yIChsZW5ndGggPSB0aW5mX3JlYWRfYml0cyhkLCAyLCAzKTsgbGVuZ3RoOyAtLWxlbmd0aCkge1xuICAgICAgICAgIGxlbmd0aHNbbnVtKytdID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTc6XG4gICAgICAgIC8qIHJlcGVhdCBjb2RlIGxlbmd0aCAwIGZvciAzLTEwIHRpbWVzIChyZWFkIDMgYml0cykgKi9cbiAgICAgICAgZm9yIChsZW5ndGggPSB0aW5mX3JlYWRfYml0cyhkLCAzLCAzKTsgbGVuZ3RoOyAtLWxlbmd0aCkge1xuICAgICAgICAgIGxlbmd0aHNbbnVtKytdID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTg6XG4gICAgICAgIC8qIHJlcGVhdCBjb2RlIGxlbmd0aCAwIGZvciAxMS0xMzggdGltZXMgKHJlYWQgNyBiaXRzKSAqL1xuICAgICAgICBmb3IgKGxlbmd0aCA9IHRpbmZfcmVhZF9iaXRzKGQsIDcsIDExKTsgbGVuZ3RoOyAtLWxlbmd0aCkge1xuICAgICAgICAgIGxlbmd0aHNbbnVtKytdID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8qIHZhbHVlcyAwLTE1IHJlcHJlc2VudCB0aGUgYWN0dWFsIGNvZGUgbGVuZ3RocyAqL1xuICAgICAgICBsZW5ndGhzW251bSsrXSA9IHN5bTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyogYnVpbGQgZHluYW1pYyB0cmVlcyAqL1xuICB0aW5mX2J1aWxkX3RyZWUobHQsIGxlbmd0aHMsIDAsIGhsaXQpO1xuICB0aW5mX2J1aWxkX3RyZWUoZHQsIGxlbmd0aHMsIGhsaXQsIGhkaXN0KTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0gYmxvY2sgaW5mbGF0ZSBmdW5jdGlvbnMgLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogZ2l2ZW4gYSBzdHJlYW0gYW5kIHR3byB0cmVlcywgaW5mbGF0ZSBhIGJsb2NrIG9mIGRhdGEgKi9cbmZ1bmN0aW9uIHRpbmZfaW5mbGF0ZV9ibG9ja19kYXRhKGQsIGx0LCBkdCkge1xuICB3aGlsZSAoMSkge1xuICAgIHZhciBzeW0gPSB0aW5mX2RlY29kZV9zeW1ib2woZCwgbHQpO1xuXG4gICAgLyogY2hlY2sgZm9yIGVuZCBvZiBibG9jayAqL1xuICAgIGlmIChzeW0gPT09IDI1Nikge1xuICAgICAgcmV0dXJuIFRJTkZfT0s7XG4gICAgfVxuXG4gICAgaWYgKHN5bSA8IDI1Nikge1xuICAgICAgZC5kZXN0W2QuZGVzdExlbisrXSA9IHN5bTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbmd0aCwgZGlzdCwgb2ZmcztcbiAgICAgIHZhciBpO1xuXG4gICAgICBzeW0gLT0gMjU3O1xuXG4gICAgICAvKiBwb3NzaWJseSBnZXQgbW9yZSBiaXRzIGZyb20gbGVuZ3RoIGNvZGUgKi9cbiAgICAgIGxlbmd0aCA9IHRpbmZfcmVhZF9iaXRzKGQsIGxlbmd0aF9iaXRzW3N5bV0sIGxlbmd0aF9iYXNlW3N5bV0pO1xuXG4gICAgICBkaXN0ID0gdGluZl9kZWNvZGVfc3ltYm9sKGQsIGR0KTtcblxuICAgICAgLyogcG9zc2libHkgZ2V0IG1vcmUgYml0cyBmcm9tIGRpc3RhbmNlIGNvZGUgKi9cbiAgICAgIG9mZnMgPSBkLmRlc3RMZW4gLSB0aW5mX3JlYWRfYml0cyhkLCBkaXN0X2JpdHNbZGlzdF0sIGRpc3RfYmFzZVtkaXN0XSk7XG5cbiAgICAgIC8qIGNvcHkgbWF0Y2ggKi9cbiAgICAgIGZvciAoaSA9IG9mZnM7IGkgPCBvZmZzICsgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZC5kZXN0W2QuZGVzdExlbisrXSA9IGQuZGVzdFtpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyogaW5mbGF0ZSBhbiB1bmNvbXByZXNzZWQgYmxvY2sgb2YgZGF0YSAqL1xuZnVuY3Rpb24gdGluZl9pbmZsYXRlX3VuY29tcHJlc3NlZF9ibG9jayhkKSB7XG4gIHZhciBsZW5ndGgsIGludmxlbmd0aDtcbiAgdmFyIGk7XG4gIFxuICAvKiB1bnJlYWQgZnJvbSBiaXRidWZmZXIgKi9cbiAgd2hpbGUgKGQuYml0Y291bnQgPiA4KSB7XG4gICAgZC5zb3VyY2VJbmRleC0tO1xuICAgIGQuYml0Y291bnQgLT0gODtcbiAgfVxuXG4gIC8qIGdldCBsZW5ndGggKi9cbiAgbGVuZ3RoID0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCArIDFdO1xuICBsZW5ndGggPSAyNTYgKiBsZW5ndGggKyBkLnNvdXJjZVtkLnNvdXJjZUluZGV4XTtcblxuICAvKiBnZXQgb25lJ3MgY29tcGxlbWVudCBvZiBsZW5ndGggKi9cbiAgaW52bGVuZ3RoID0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCArIDNdO1xuICBpbnZsZW5ndGggPSAyNTYgKiBpbnZsZW5ndGggKyBkLnNvdXJjZVtkLnNvdXJjZUluZGV4ICsgMl07XG5cbiAgLyogY2hlY2sgbGVuZ3RoICovXG4gIGlmIChsZW5ndGggIT09ICh+aW52bGVuZ3RoICYgMHgwMDAwZmZmZikpXG4gICAgcmV0dXJuIFRJTkZfREFUQV9FUlJPUjtcblxuICBkLnNvdXJjZUluZGV4ICs9IDQ7XG5cbiAgLyogY29weSBibG9jayAqL1xuICBmb3IgKGkgPSBsZW5ndGg7IGk7IC0taSlcbiAgICBkLmRlc3RbZC5kZXN0TGVuKytdID0gZC5zb3VyY2VbZC5zb3VyY2VJbmRleCsrXTtcblxuICAvKiBtYWtlIHN1cmUgd2Ugc3RhcnQgbmV4dCBibG9jayBvbiBhIGJ5dGUgYm91bmRhcnkgKi9cbiAgZC5iaXRjb3VudCA9IDA7XG5cbiAgcmV0dXJuIFRJTkZfT0s7XG59XG5cbi8qIGluZmxhdGUgc3RyZWFtIGZyb20gc291cmNlIHRvIGRlc3QgKi9cbmZ1bmN0aW9uIHRpbmZfdW5jb21wcmVzcyhzb3VyY2UsIGRlc3QpIHtcbiAgdmFyIGQgPSBuZXcgRGF0YShzb3VyY2UsIGRlc3QpO1xuICB2YXIgYmZpbmFsLCBidHlwZSwgcmVzO1xuXG4gIGRvIHtcbiAgICAvKiByZWFkIGZpbmFsIGJsb2NrIGZsYWcgKi9cbiAgICBiZmluYWwgPSB0aW5mX2dldGJpdChkKTtcblxuICAgIC8qIHJlYWQgYmxvY2sgdHlwZSAoMiBiaXRzKSAqL1xuICAgIGJ0eXBlID0gdGluZl9yZWFkX2JpdHMoZCwgMiwgMCk7XG5cbiAgICAvKiBkZWNvbXByZXNzIGJsb2NrICovXG4gICAgc3dpdGNoIChidHlwZSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICAvKiBkZWNvbXByZXNzIHVuY29tcHJlc3NlZCBibG9jayAqL1xuICAgICAgICByZXMgPSB0aW5mX2luZmxhdGVfdW5jb21wcmVzc2VkX2Jsb2NrKGQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgLyogZGVjb21wcmVzcyBibG9jayB3aXRoIGZpeGVkIGh1ZmZtYW4gdHJlZXMgKi9cbiAgICAgICAgcmVzID0gdGluZl9pbmZsYXRlX2Jsb2NrX2RhdGEoZCwgc2x0cmVlLCBzZHRyZWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgLyogZGVjb21wcmVzcyBibG9jayB3aXRoIGR5bmFtaWMgaHVmZm1hbiB0cmVlcyAqL1xuICAgICAgICB0aW5mX2RlY29kZV90cmVlcyhkLCBkLmx0cmVlLCBkLmR0cmVlKTtcbiAgICAgICAgcmVzID0gdGluZl9pbmZsYXRlX2Jsb2NrX2RhdGEoZCwgZC5sdHJlZSwgZC5kdHJlZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzID0gVElORl9EQVRBX0VSUk9SO1xuICAgIH1cblxuICAgIGlmIChyZXMgIT09IFRJTkZfT0spXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgZXJyb3InKTtcblxuICB9IHdoaWxlICghYmZpbmFsKTtcblxuICBpZiAoZC5kZXN0TGVuIDwgZC5kZXN0Lmxlbmd0aCkge1xuICAgIGlmICh0eXBlb2YgZC5kZXN0LnNsaWNlID09PSAnZnVuY3Rpb24nKVxuICAgICAgcmV0dXJuIGQuZGVzdC5zbGljZSgwLCBkLmRlc3RMZW4pO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBkLmRlc3Quc3ViYXJyYXkoMCwgZC5kZXN0TGVuKTtcbiAgfVxuICBcbiAgcmV0dXJuIGQuZGVzdDtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0gaW5pdGlhbGl6YXRpb24gLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogYnVpbGQgZml4ZWQgaHVmZm1hbiB0cmVlcyAqL1xudGluZl9idWlsZF9maXhlZF90cmVlcyhzbHRyZWUsIHNkdHJlZSk7XG5cbi8qIGJ1aWxkIGV4dHJhIGJpdHMgYW5kIGJhc2UgdGFibGVzICovXG50aW5mX2J1aWxkX2JpdHNfYmFzZShsZW5ndGhfYml0cywgbGVuZ3RoX2Jhc2UsIDQsIDMpO1xudGluZl9idWlsZF9iaXRzX2Jhc2UoZGlzdF9iaXRzLCBkaXN0X2Jhc2UsIDIsIDEpO1xuXG4vKiBmaXggYSBzcGVjaWFsIGNhc2UgKi9cbmxlbmd0aF9iaXRzWzI4XSA9IDA7XG5sZW5ndGhfYmFzZVsyOF0gPSAyNTg7XG5cbm1vZHVsZS5leHBvcnRzID0gdGluZl91bmNvbXByZXNzO1xuIiwgImNvbnN0IGlzQmlnRW5kaWFuID0gKG5ldyBVaW50OEFycmF5KG5ldyBVaW50MzJBcnJheShbMHgxMjM0NTY3OF0pLmJ1ZmZlcilbMF0gPT09IDB4MTIpO1xuXG5jb25zdCBzd2FwID0gKGIsIG4sIG0pID0+IHtcbiAgbGV0IGkgPSBiW25dO1xuICBiW25dID0gYlttXTtcbiAgYlttXSA9IGk7XG59O1xuXG5jb25zdCBzd2FwMzIgPSBhcnJheSA9PiB7XG4gIGNvbnN0IGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAoYXJyYXksIGksIGkgKyAzKTtcbiAgICBzd2FwKGFycmF5LCBpICsgMSwgaSArIDIpO1xuICB9XG59O1xuXG5jb25zdCBzd2FwMzJMRSA9IGFycmF5ID0+IHtcbiAgaWYgKGlzQmlnRW5kaWFuKSB7XG4gICAgc3dhcDMyKGFycmF5KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN3YXAzMkxFOiBzd2FwMzJMRVxufTtcbiIsICJjb25zdCBpbmZsYXRlID0gcmVxdWlyZSgndGlueS1pbmZsYXRlJyk7XG5jb25zdCB7IHN3YXAzMkxFIH0gPSByZXF1aXJlKCcuL3N3YXAnKTtcblxuLy8gU2hpZnQgc2l6ZSBmb3IgZ2V0dGluZyB0aGUgaW5kZXgtMSB0YWJsZSBvZmZzZXQuXG5jb25zdCBTSElGVF8xID0gNiArIDU7XG5cbi8vIFNoaWZ0IHNpemUgZm9yIGdldHRpbmcgdGhlIGluZGV4LTIgdGFibGUgb2Zmc2V0LlxuY29uc3QgU0hJRlRfMiA9IDU7XG5cbi8vIERpZmZlcmVuY2UgYmV0d2VlbiB0aGUgdHdvIHNoaWZ0IHNpemVzLFxuLy8gZm9yIGdldHRpbmcgYW4gaW5kZXgtMSBvZmZzZXQgZnJvbSBhbiBpbmRleC0yIG9mZnNldC4gNj0xMS01XG5jb25zdCBTSElGVF8xXzIgPSBTSElGVF8xIC0gU0hJRlRfMjtcblxuLy8gTnVtYmVyIG9mIGluZGV4LTEgZW50cmllcyBmb3IgdGhlIEJNUC4gMzI9MHgyMFxuLy8gVGhpcyBwYXJ0IG9mIHRoZSBpbmRleC0xIHRhYmxlIGlzIG9taXR0ZWQgZnJvbSB0aGUgc2VyaWFsaXplZCBmb3JtLlxuY29uc3QgT01JVFRFRF9CTVBfSU5ERVhfMV9MRU5HVEggPSAweDEwMDAwID4+IFNISUZUXzE7XG5cbi8vIE51bWJlciBvZiBlbnRyaWVzIGluIGFuIGluZGV4LTIgYmxvY2suIDY0PTB4NDBcbmNvbnN0IElOREVYXzJfQkxPQ0tfTEVOR1RIID0gMSA8PCBTSElGVF8xXzI7XG5cbi8vIE1hc2sgZm9yIGdldHRpbmcgdGhlIGxvd2VyIGJpdHMgZm9yIHRoZSBpbi1pbmRleC0yLWJsb2NrIG9mZnNldC4gKi9cbmNvbnN0IElOREVYXzJfTUFTSyA9IElOREVYXzJfQkxPQ0tfTEVOR1RIIC0gMTtcblxuLy8gU2hpZnQgc2l6ZSBmb3Igc2hpZnRpbmcgbGVmdCB0aGUgaW5kZXggYXJyYXkgdmFsdWVzLlxuLy8gSW5jcmVhc2VzIHBvc3NpYmxlIGRhdGEgc2l6ZSB3aXRoIDE2LWJpdCBpbmRleCB2YWx1ZXMgYXQgdGhlIGNvc3Rcbi8vIG9mIGNvbXBhY3RhYmlsaXR5LlxuLy8gVGhpcyByZXF1aXJlcyBkYXRhIGJsb2NrcyB0byBiZSBhbGlnbmVkIGJ5IERBVEFfR1JBTlVMQVJJVFkuXG5jb25zdCBJTkRFWF9TSElGVCA9IDI7XG5cbi8vIE51bWJlciBvZiBlbnRyaWVzIGluIGEgZGF0YSBibG9jay4gMzI9MHgyMFxuY29uc3QgREFUQV9CTE9DS19MRU5HVEggPSAxIDw8IFNISUZUXzI7XG5cbi8vIE1hc2sgZm9yIGdldHRpbmcgdGhlIGxvd2VyIGJpdHMgZm9yIHRoZSBpbi1kYXRhLWJsb2NrIG9mZnNldC5cbmNvbnN0IERBVEFfTUFTSyA9IERBVEFfQkxPQ0tfTEVOR1RIIC0gMTtcblxuLy8gVGhlIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGUgZm9yIFUrRDgwMC4uVStEQkZGIHN0b3JlcyB2YWx1ZXMgZm9yXG4vLyBsZWFkIHN1cnJvZ2F0ZSBjb2RlIF91bml0c18gbm90IGNvZGUgX3BvaW50c18uXG4vLyBWYWx1ZXMgZm9yIGxlYWQgc3Vycm9nYXRlIGNvZGUgX3BvaW50c18gYXJlIGluZGV4ZWQgd2l0aCB0aGlzIHBvcnRpb24gb2YgdGhlIHRhYmxlLlxuLy8gTGVuZ3RoPTMyPTB4MjA9MHg0MDA+PlNISUZUXzIuIChUaGVyZSBhcmUgMTAyND0weDQwMCBsZWFkIHN1cnJvZ2F0ZXMuKVxuY29uc3QgTFNDUF9JTkRFWF8yX09GRlNFVCA9IDB4MTAwMDAgPj4gU0hJRlRfMjtcbmNvbnN0IExTQ1BfSU5ERVhfMl9MRU5HVEggPSAweDQwMCA+PiBTSElGVF8yO1xuXG4vLyBDb3VudCB0aGUgbGVuZ3RocyBvZiBib3RoIEJNUCBwaWVjZXMuIDIwODA9MHg4MjBcbmNvbnN0IElOREVYXzJfQk1QX0xFTkdUSCA9IExTQ1BfSU5ERVhfMl9PRkZTRVQgKyBMU0NQX0lOREVYXzJfTEVOR1RIO1xuXG4vLyBUaGUgMi1ieXRlIFVURi04IHZlcnNpb24gb2YgdGhlIGluZGV4LTIgdGFibGUgZm9sbG93cyBhdCBvZmZzZXQgMjA4MD0weDgyMC5cbi8vIExlbmd0aCAzMj0weDIwIGZvciBsZWFkIGJ5dGVzIEMwLi5ERiwgcmVnYXJkbGVzcyBvZiBTSElGVF8yLlxuY29uc3QgVVRGOF8yQl9JTkRFWF8yX09GRlNFVCA9IElOREVYXzJfQk1QX0xFTkdUSDtcbmNvbnN0IFVURjhfMkJfSU5ERVhfMl9MRU5HVEggPSAweDgwMCA+PiA2OyAgLy8gVSswODAwIGlzIHRoZSBmaXJzdCBjb2RlIHBvaW50IGFmdGVyIDItYnl0ZSBVVEYtOFxuXG4vLyBUaGUgaW5kZXgtMSB0YWJsZSwgb25seSB1c2VkIGZvciBzdXBwbGVtZW50YXJ5IGNvZGUgcG9pbnRzLCBhdCBvZmZzZXQgMjExMj0weDg0MC5cbi8vIFZhcmlhYmxlIGxlbmd0aCwgZm9yIGNvZGUgcG9pbnRzIHVwIHRvIGhpZ2hTdGFydCwgd2hlcmUgdGhlIGxhc3Qgc2luZ2xlLXZhbHVlIHJhbmdlIHN0YXJ0cy5cbi8vIE1heGltdW0gbGVuZ3RoIDUxMj0weDIwMD0weDEwMDAwMD4+U0hJRlRfMS5cbi8vIChGb3IgMHgxMDAwMDAgc3VwcGxlbWVudGFyeSBjb2RlIHBvaW50cyBVKzEwMDAwLi5VKzEwZmZmZi4pXG4vL1xuLy8gVGhlIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGUgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMgc3RhcnRzXG4vLyBhZnRlciB0aGlzIGluZGV4LTEgdGFibGUuXG4vL1xuLy8gQm90aCB0aGUgaW5kZXgtMSB0YWJsZSBhbmQgdGhlIGZvbGxvd2luZyBwYXJ0IG9mIHRoZSBpbmRleC0yIHRhYmxlXG4vLyBhcmUgb21pdHRlZCBjb21wbGV0ZWx5IGlmIHRoZXJlIGlzIG9ubHkgQk1QIGRhdGEuXG5jb25zdCBJTkRFWF8xX09GRlNFVCA9IFVURjhfMkJfSU5ERVhfMl9PRkZTRVQgKyBVVEY4XzJCX0lOREVYXzJfTEVOR1RIO1xuXG4vLyBUaGUgYWxpZ25tZW50IHNpemUgb2YgYSBkYXRhIGJsb2NrLiBBbHNvIHRoZSBncmFudWxhcml0eSBmb3IgY29tcGFjdGlvbi5cbmNvbnN0IERBVEFfR1JBTlVMQVJJVFkgPSAxIDw8IElOREVYX1NISUZUO1xuXG5jbGFzcyBVbmljb2RlVHJpZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBjb25zdCBpc0J1ZmZlciA9ICh0eXBlb2YgZGF0YS5yZWFkVUludDMyQkUgPT09ICdmdW5jdGlvbicpICYmICh0eXBlb2YgZGF0YS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyk7XG5cbiAgICBpZiAoaXNCdWZmZXIgfHwgZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgIC8vIHJlYWQgYmluYXJ5IGZvcm1hdFxuICAgICAgbGV0IHVuY29tcHJlc3NlZExlbmd0aDtcbiAgICAgIGlmIChpc0J1ZmZlcikge1xuICAgICAgICB0aGlzLmhpZ2hTdGFydCA9IGRhdGEucmVhZFVJbnQzMkxFKDApO1xuICAgICAgICB0aGlzLmVycm9yVmFsdWUgPSBkYXRhLnJlYWRVSW50MzJMRSg0KTtcbiAgICAgICAgdW5jb21wcmVzc2VkTGVuZ3RoID0gZGF0YS5yZWFkVUludDMyTEUoOCk7XG4gICAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKDEyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIpO1xuICAgICAgICB0aGlzLmhpZ2hTdGFydCA9IHZpZXcuZ2V0VWludDMyKDAsIHRydWUpO1xuICAgICAgICB0aGlzLmVycm9yVmFsdWUgPSB2aWV3LmdldFVpbnQzMig0LCB0cnVlKTtcbiAgICAgICAgdW5jb21wcmVzc2VkTGVuZ3RoID0gdmlldy5nZXRVaW50MzIoOCwgdHJ1ZSk7XG4gICAgICAgIGRhdGEgPSBkYXRhLnN1YmFycmF5KDEyKTtcbiAgICAgIH1cblxuICAgICAgLy8gZG91YmxlIGluZmxhdGUgdGhlIGFjdHVhbCB0cmllIGRhdGFcbiAgICAgIGRhdGEgPSBpbmZsYXRlKGRhdGEsIG5ldyBVaW50OEFycmF5KHVuY29tcHJlc3NlZExlbmd0aCkpO1xuICAgICAgZGF0YSA9IGluZmxhdGUoZGF0YSwgbmV3IFVpbnQ4QXJyYXkodW5jb21wcmVzc2VkTGVuZ3RoKSk7XG5cbiAgICAgIC8vIHN3YXAgYnl0ZXMgZnJvbSBsaXR0bGUtZW5kaWFuXG4gICAgICBzd2FwMzJMRShkYXRhKTtcblxuICAgICAgdGhpcy5kYXRhID0gbmV3IFVpbnQzMkFycmF5KGRhdGEuYnVmZmVyKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBwcmUtcGFyc2VkIGRhdGFcbiAgICAgICh7IGRhdGE6IHRoaXMuZGF0YSwgaGlnaFN0YXJ0OiB0aGlzLmhpZ2hTdGFydCwgZXJyb3JWYWx1ZTogdGhpcy5lcnJvclZhbHVlIH0gPSBkYXRhKTtcbiAgICB9XG4gIH1cblxuICBnZXQoY29kZVBvaW50KSB7XG4gICAgbGV0IGluZGV4O1xuICAgIGlmICgoY29kZVBvaW50IDwgMCkgfHwgKGNvZGVQb2ludCA+IDB4MTBmZmZmKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZXJyb3JWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoKGNvZGVQb2ludCA8IDB4ZDgwMCkgfHwgKChjb2RlUG9pbnQgPiAweGRiZmYpICYmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSkpIHtcbiAgICAgIC8vIE9yZGluYXJ5IEJNUCBjb2RlIHBvaW50LCBleGNsdWRpbmcgbGVhZGluZyBzdXJyb2dhdGVzLlxuICAgICAgLy8gQk1QIHVzZXMgYSBzaW5nbGUgbGV2ZWwgbG9va3VwLiAgQk1QIGluZGV4IHN0YXJ0cyBhdCBvZmZzZXQgMCBpbiB0aGUgaW5kZXguXG4gICAgICAvLyBkYXRhIGlzIHN0b3JlZCBpbiB0aGUgaW5kZXggYXJyYXkgaXRzZWxmLlxuICAgICAgaW5kZXggPSAodGhpcy5kYXRhW2NvZGVQb2ludCA+PiBTSElGVF8yXSA8PCBJTkRFWF9TSElGVCkgKyAoY29kZVBvaW50ICYgREFUQV9NQVNLKTtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFbaW5kZXhdO1xuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSB7XG4gICAgICAvLyBMZWFkIFN1cnJvZ2F0ZSBDb2RlIFBvaW50LiAgQSBTZXBhcmF0ZSBpbmRleCBzZWN0aW9uIGlzIHN0b3JlZCBmb3JcbiAgICAgIC8vIGxlYWQgc3Vycm9nYXRlIGNvZGUgdW5pdHMgYW5kIGNvZGUgcG9pbnRzLlxuICAgICAgLy8gICBUaGUgbWFpbiBpbmRleCBoYXMgdGhlIGNvZGUgdW5pdCBkYXRhLlxuICAgICAgLy8gICBGb3IgdGhpcyBmdW5jdGlvbiwgd2UgbmVlZCB0aGUgY29kZSBwb2ludCBkYXRhLlxuICAgICAgaW5kZXggPSAodGhpcy5kYXRhW0xTQ1BfSU5ERVhfMl9PRkZTRVQgKyAoKGNvZGVQb2ludCAtIDB4ZDgwMCkgPj4gU0hJRlRfMildIDw8IElOREVYX1NISUZUKSArIChjb2RlUG9pbnQgJiBEQVRBX01BU0spO1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpbmRleF07XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA8IHRoaXMuaGlnaFN0YXJ0KSB7XG4gICAgICAvLyBTdXBwbGVtZW50YWwgY29kZSBwb2ludCwgdXNlIHR3by1sZXZlbCBsb29rdXAuXG4gICAgICBpbmRleCA9IHRoaXMuZGF0YVsoSU5ERVhfMV9PRkZTRVQgLSBPTUlUVEVEX0JNUF9JTkRFWF8xX0xFTkdUSCkgKyAoY29kZVBvaW50ID4+IFNISUZUXzEpXTtcbiAgICAgIGluZGV4ID0gdGhpcy5kYXRhW2luZGV4ICsgKChjb2RlUG9pbnQgPj4gU0hJRlRfMikgJiBJTkRFWF8yX01BU0spXTtcbiAgICAgIGluZGV4ID0gKGluZGV4IDw8IElOREVYX1NISUZUKSArIChjb2RlUG9pbnQgJiBEQVRBX01BU0spO1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpbmRleF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gREFUQV9HUkFOVUxBUklUWV07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVbmljb2RlVHJpZTsiLCAiLy9cbi8vIFRISVMgRklMRSBJUyBBVVRPTUFUSUNBTExZIEdFTkVSQVRFRCEgRE8gTk9UIEVESVQgQlkgSEFORCFcbi8vXG47XG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpXG4gICAgICAgIDogdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kXG4gICAgICAgICAgICA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgICAgICAgICAvLyBjZi4gaHR0cHM6Ly9naXRodWIuY29tL2RhbmtvZ2FpL2pzLWJhc2U2NC9pc3N1ZXMvMTE5XG4gICAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIHZlcnNpb24gZm9yIG5vQ29uZmxpY3QoKVxuICAgICAgICAgICAgICAgIHZhciBfQmFzZTY0ID0gZ2xvYmFsLkJhc2U2NDtcbiAgICAgICAgICAgICAgICB2YXIgZ0Jhc2U2NCA9IGZhY3RvcnkoKTtcbiAgICAgICAgICAgICAgICBnQmFzZTY0Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbC5CYXNlNjQgPSBfQmFzZTY0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ0Jhc2U2NDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwuTWV0ZW9yKSB7IC8vIE1ldGVvci5qc1xuICAgICAgICAgICAgICAgICAgICBCYXNlNjQgPSBnQmFzZTY0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnbG9iYWwuQmFzZTY0ID0gZ0Jhc2U2NDtcbiAgICAgICAgICAgIH0pKCk7XG59KCh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmXG4gICAgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvd1xuICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHRoaXMpLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8qKlxuICAgICAqICBiYXNlNjQudHNcbiAgICAgKlxuICAgICAqICBMaWNlbnNlZCB1bmRlciB0aGUgQlNEIDMtQ2xhdXNlIExpY2Vuc2UuXG4gICAgICogICAgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICAgICAqXG4gICAgICogIFJlZmVyZW5jZXM6XG4gICAgICogICAgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjRcbiAgICAgKlxuICAgICAqIEBhdXRob3IgRGFuIEtvZ2FpIChodHRwczovL2dpdGh1Yi5jb20vZGFua29nYWkpXG4gICAgICovXG4gICAgdmFyIHZlcnNpb24gPSAnMy43LjcnO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHVzZSBsb3dlcmNhc2UgYHZlcnNpb25gLlxuICAgICAqL1xuICAgIHZhciBWRVJTSU9OID0gdmVyc2lvbjtcbiAgICB2YXIgX2hhc0J1ZmZlciA9IHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbic7XG4gICAgdmFyIF9URCA9IHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBUZXh0RGVjb2RlcigpIDogdW5kZWZpbmVkO1xuICAgIHZhciBfVEUgPSB0eXBlb2YgVGV4dEVuY29kZXIgPT09ICdmdW5jdGlvbicgPyBuZXcgVGV4dEVuY29kZXIoKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgYjY0Y2ggPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuICAgIHZhciBiNjRjaHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiNjRjaCk7XG4gICAgdmFyIGI2NHRhYiA9IChmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgdGFiID0ge307XG4gICAgICAgIGEuZm9yRWFjaChmdW5jdGlvbiAoYywgaSkgeyByZXR1cm4gdGFiW2NdID0gaTsgfSk7XG4gICAgICAgIHJldHVybiB0YWI7XG4gICAgfSkoYjY0Y2hzKTtcbiAgICB2YXIgYjY0cmUgPSAvXig/OltBLVphLXpcXGQrXFwvXXs0fSkqPyg/OltBLVphLXpcXGQrXFwvXXsyfSg/Oj09KT98W0EtWmEtelxcZCtcXC9dezN9PT8pPyQvO1xuICAgIHZhciBfZnJvbUNDID0gU3RyaW5nLmZyb21DaGFyQ29kZS5iaW5kKFN0cmluZyk7XG4gICAgdmFyIF9VOEFmcm9tID0gdHlwZW9mIFVpbnQ4QXJyYXkuZnJvbSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IFVpbnQ4QXJyYXkuZnJvbS5iaW5kKFVpbnQ4QXJyYXkpXG4gICAgICAgIDogZnVuY3Rpb24gKGl0KSB7IHJldHVybiBuZXcgVWludDhBcnJheShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpdCwgMCkpOyB9O1xuICAgIHZhciBfbWtVcmlTYWZlID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gc3JjXG4gICAgICAgIC5yZXBsYWNlKC89L2csICcnKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7IHJldHVybiBtMCA9PSAnKycgPyAnLScgOiAnXyc7IH0pOyB9O1xuICAgIHZhciBfdGlkeUI2NCA9IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJyk7IH07XG4gICAgLyoqXG4gICAgICogcG9seWZpbGwgdmVyc2lvbiBvZiBgYnRvYWBcbiAgICAgKi9cbiAgICB2YXIgYnRvYVBvbHlmaWxsID0gZnVuY3Rpb24gKGJpbikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9seWZpbGxlZCcpO1xuICAgICAgICB2YXIgdTMyLCBjMCwgYzEsIGMyLCBhc2MgPSAnJztcbiAgICAgICAgdmFyIHBhZCA9IGJpbi5sZW5ndGggJSAzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpbi5sZW5ndGg7KSB7XG4gICAgICAgICAgICBpZiAoKGMwID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUgfHxcbiAgICAgICAgICAgICAgICAoYzEgPSBiaW4uY2hhckNvZGVBdChpKyspKSA+IDI1NSB8fFxuICAgICAgICAgICAgICAgIChjMiA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgY2hhcmFjdGVyIGZvdW5kJyk7XG4gICAgICAgICAgICB1MzIgPSAoYzAgPDwgMTYpIHwgKGMxIDw8IDgpIHwgYzI7XG4gICAgICAgICAgICBhc2MgKz0gYjY0Y2hzW3UzMiA+PiAxOCAmIDYzXVxuICAgICAgICAgICAgICAgICsgYjY0Y2hzW3UzMiA+PiAxMiAmIDYzXVxuICAgICAgICAgICAgICAgICsgYjY0Y2hzW3UzMiA+PiA2ICYgNjNdXG4gICAgICAgICAgICAgICAgKyBiNjRjaHNbdTMyICYgNjNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWQgPyBhc2Muc2xpY2UoMCwgcGFkIC0gMykgKyBcIj09PVwiLnN1YnN0cmluZyhwYWQpIDogYXNjO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogZG9lcyB3aGF0IGB3aW5kb3cuYnRvYWAgb2Ygd2ViIGJyb3dzZXJzIGRvLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiaW4gYmluYXJ5IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NC1lbmNvZGVkIHN0cmluZ1xuICAgICAqL1xuICAgIHZhciBfYnRvYSA9IHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nID8gZnVuY3Rpb24gKGJpbikgeyByZXR1cm4gYnRvYShiaW4pOyB9XG4gICAgICAgIDogX2hhc0J1ZmZlciA/IGZ1bmN0aW9uIChiaW4pIHsgcmV0dXJuIEJ1ZmZlci5mcm9tKGJpbiwgJ2JpbmFyeScpLnRvU3RyaW5nKCdiYXNlNjQnKTsgfVxuICAgICAgICAgICAgOiBidG9hUG9seWZpbGw7XG4gICAgdmFyIF9mcm9tVWludDhBcnJheSA9IF9oYXNCdWZmZXJcbiAgICAgICAgPyBmdW5jdGlvbiAodThhKSB7IHJldHVybiBCdWZmZXIuZnJvbSh1OGEpLnRvU3RyaW5nKCdiYXNlNjQnKTsgfVxuICAgICAgICA6IGZ1bmN0aW9uICh1OGEpIHtcbiAgICAgICAgICAgIC8vIGNmLiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjcxMDAwMS9ob3ctdG8tY29udmVydC11aW50OC1hcnJheS10by1iYXNlNjQtZW5jb2RlZC1zdHJpbmcvMTI3MTMzMjYjMTI3MTMzMjZcbiAgICAgICAgICAgIHZhciBtYXhhcmdzID0gMHgxMDAwO1xuICAgICAgICAgICAgdmFyIHN0cnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdThhLmxlbmd0aDsgaSA8IGw7IGkgKz0gbWF4YXJncykge1xuICAgICAgICAgICAgICAgIHN0cnMucHVzaChfZnJvbUNDLmFwcGx5KG51bGwsIHU4YS5zdWJhcnJheShpLCBpICsgbWF4YXJncykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfYnRvYShzdHJzLmpvaW4oJycpKTtcbiAgICAgICAgfTtcbiAgICAvKipcbiAgICAgKiBjb252ZXJ0cyBhIFVpbnQ4QXJyYXkgdG8gYSBCYXNlNjQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VybHNhZmVdIFVSTC1hbmQtZmlsZW5hbWUtc2FmZSBhIGxhIFJGQzQ2NDggXHUwMEE3NVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEJhc2U2NCBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgZnJvbVVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAodThhLCB1cmxzYWZlKSB7XG4gICAgICAgIGlmICh1cmxzYWZlID09PSB2b2lkIDApIHsgdXJsc2FmZSA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB1cmxzYWZlID8gX21rVXJpU2FmZShfZnJvbVVpbnQ4QXJyYXkodThhKSkgOiBfZnJvbVVpbnQ4QXJyYXkodThhKTtcbiAgICB9O1xuICAgIC8vIFRoaXMgdHJpY2sgaXMgZm91bmQgYnJva2VuIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaS9qcy1iYXNlNjQvaXNzdWVzLzEzMFxuICAgIC8vIGNvbnN0IHV0b2IgPSAoc3JjOiBzdHJpbmcpID0+IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzcmMpKTtcbiAgICAvLyByZXZlcnRpbmcgZ29vZCBvbGQgZmF0aW9uZWQgcmVnZXhwXG4gICAgdmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuICAgICAgICBpZiAoYy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgY2MgPSBjLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICByZXR1cm4gY2MgPCAweDgwID8gY1xuICAgICAgICAgICAgICAgIDogY2MgPCAweDgwMCA/IChfZnJvbUNDKDB4YzAgfCAoY2MgPj4+IDYpKVxuICAgICAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8IChjYyAmIDB4M2YpKSlcbiAgICAgICAgICAgICAgICAgICAgOiAoX2Zyb21DQygweGUwIHwgKChjYyA+Pj4gMTIpICYgMHgwZikpXG4gICAgICAgICAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8ICgoY2MgPj4+IDYpICYgMHgzZikpXG4gICAgICAgICAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8IChjYyAmIDB4M2YpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgY2MgPSAweDEwMDAwXG4gICAgICAgICAgICAgICAgKyAoYy5jaGFyQ29kZUF0KDApIC0gMHhEODAwKSAqIDB4NDAwXG4gICAgICAgICAgICAgICAgKyAoYy5jaGFyQ29kZUF0KDEpIC0gMHhEQzAwKTtcbiAgICAgICAgICAgIHJldHVybiAoX2Zyb21DQygweGYwIHwgKChjYyA+Pj4gMTgpICYgMHgwNykpXG4gICAgICAgICAgICAgICAgKyBfZnJvbUNDKDB4ODAgfCAoKGNjID4+PiAxMikgJiAweDNmKSlcbiAgICAgICAgICAgICAgICArIF9mcm9tQ0MoMHg4MCB8ICgoY2MgPj4+IDYpICYgMHgzZikpXG4gICAgICAgICAgICAgICAgKyBfZnJvbUNDKDB4ODAgfCAoY2MgJiAweDNmKSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgcmVfdXRvYiA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZGXXxbXlxceDAwLVxceDdGXS9nO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHNob3VsZCBoYXZlIGJlZW4gaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBVVEYtOCBzdHJpbmdcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBVVEYtMTYgc3RyaW5nXG4gICAgICovXG4gICAgdmFyIHV0b2IgPSBmdW5jdGlvbiAodSkgeyByZXR1cm4gdS5yZXBsYWNlKHJlX3V0b2IsIGNiX3V0b2IpOyB9O1xuICAgIC8vXG4gICAgdmFyIF9lbmNvZGUgPSBfaGFzQnVmZmVyXG4gICAgICAgID8gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIEJ1ZmZlci5mcm9tKHMsICd1dGY4JykudG9TdHJpbmcoJ2Jhc2U2NCcpOyB9XG4gICAgICAgIDogX1RFXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChzKSB7IHJldHVybiBfZnJvbVVpbnQ4QXJyYXkoX1RFLmVuY29kZShzKSk7IH1cbiAgICAgICAgICAgIDogZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF9idG9hKHV0b2IocykpOyB9O1xuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGEgVVRGLTgtZW5jb2RlZCBzdHJpbmcgdG8gYSBCYXNlNjQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VybHNhZmVdIGlmIGB0cnVlYCBtYWtlIHRoZSByZXN1bHQgVVJMLXNhZmVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCYXNlNjQgc3RyaW5nXG4gICAgICovXG4gICAgdmFyIGVuY29kZSA9IGZ1bmN0aW9uIChzcmMsIHVybHNhZmUpIHtcbiAgICAgICAgaWYgKHVybHNhZmUgPT09IHZvaWQgMCkgeyB1cmxzYWZlID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHVybHNhZmVcbiAgICAgICAgICAgID8gX21rVXJpU2FmZShfZW5jb2RlKHNyYykpXG4gICAgICAgICAgICA6IF9lbmNvZGUoc3JjKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGEgVVRGLTgtZW5jb2RlZCBzdHJpbmcgdG8gVVJMLXNhZmUgQmFzZTY0IFJGQzQ2NDggXHUwMEE3NS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCYXNlNjQgc3RyaW5nXG4gICAgICovXG4gICAgdmFyIGVuY29kZVVSSSA9IGZ1bmN0aW9uIChzcmMpIHsgcmV0dXJuIGVuY29kZShzcmMsIHRydWUpOyB9O1xuICAgIC8vIFRoaXMgdHJpY2sgaXMgZm91bmQgYnJva2VuIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5rb2dhaS9qcy1iYXNlNjQvaXNzdWVzLzEzMFxuICAgIC8vIGNvbnN0IGJ0b3UgPSAoc3JjOiBzdHJpbmcpID0+IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoc3JjKSk7XG4gICAgLy8gcmV2ZXJ0aW5nIGdvb2Qgb2xkIGZhdGlvbmVkIHJlZ2V4cFxuICAgIHZhciByZV9idG91ID0gL1tcXHhDMC1cXHhERl1bXFx4ODAtXFx4QkZdfFtcXHhFMC1cXHhFRl1bXFx4ODAtXFx4QkZdezJ9fFtcXHhGMC1cXHhGN11bXFx4ODAtXFx4QkZdezN9L2c7XG4gICAgdmFyIGNiX2J0b3UgPSBmdW5jdGlvbiAoY2NjYykge1xuICAgICAgICBzd2l0Y2ggKGNjY2MubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdmFyIGNwID0gKCgweDA3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOClcbiAgICAgICAgICAgICAgICAgICAgfCAoKDB4M2YgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDEyKVxuICAgICAgICAgICAgICAgICAgICB8ICgoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNilcbiAgICAgICAgICAgICAgICAgICAgfCAoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgzKSksIG9mZnNldCA9IGNwIC0gMHgxMDAwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9mcm9tQ0MoKG9mZnNldCA+Pj4gMTApICsgMHhEODAwKVxuICAgICAgICAgICAgICAgICAgICArIF9mcm9tQ0MoKG9mZnNldCAmIDB4M0ZGKSArIDB4REMwMCkpO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBfZnJvbUNDKCgoMHgwZiAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIpXG4gICAgICAgICAgICAgICAgICAgIHwgKCgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCA2KVxuICAgICAgICAgICAgICAgICAgICB8ICgweDNmICYgY2NjYy5jaGFyQ29kZUF0KDIpKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBfZnJvbUNDKCgoMHgxZiAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgNilcbiAgICAgICAgICAgICAgICAgICAgfCAoMHgzZiAmIGNjY2MuY2hhckNvZGVBdCgxKSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzaG91bGQgaGF2ZSBiZWVuIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgVVRGLTE2IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFVURi04IHN0cmluZ1xuICAgICAqL1xuICAgIHZhciBidG91ID0gZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTsgfTtcbiAgICAvKipcbiAgICAgKiBwb2x5ZmlsbCB2ZXJzaW9uIG9mIGBhdG9iYFxuICAgICAqL1xuICAgIHZhciBhdG9iUG9seWZpbGwgPSBmdW5jdGlvbiAoYXNjKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb2x5ZmlsbGVkJyk7XG4gICAgICAgIGFzYyA9IGFzYy5yZXBsYWNlKC9cXHMrL2csICcnKTtcbiAgICAgICAgaWYgKCFiNjRyZS50ZXN0KGFzYykpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYWxmb3JtZWQgYmFzZTY0LicpO1xuICAgICAgICBhc2MgKz0gJz09Jy5zbGljZSgyIC0gKGFzYy5sZW5ndGggJiAzKSk7XG4gICAgICAgIHZhciB1MjQsIGJpbiA9ICcnLCByMSwgcjI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXNjLmxlbmd0aDspIHtcbiAgICAgICAgICAgIHUyNCA9IGI2NHRhYlthc2MuY2hhckF0KGkrKyldIDw8IDE4XG4gICAgICAgICAgICAgICAgfCBiNjR0YWJbYXNjLmNoYXJBdChpKyspXSA8PCAxMlxuICAgICAgICAgICAgICAgIHwgKHIxID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pIDw8IDZcbiAgICAgICAgICAgICAgICB8IChyMiA9IGI2NHRhYlthc2MuY2hhckF0KGkrKyldKTtcbiAgICAgICAgICAgIGJpbiArPSByMSA9PT0gNjQgPyBfZnJvbUNDKHUyNCA+PiAxNiAmIDI1NSlcbiAgICAgICAgICAgICAgICA6IHIyID09PSA2NCA/IF9mcm9tQ0ModTI0ID4+IDE2ICYgMjU1LCB1MjQgPj4gOCAmIDI1NSlcbiAgICAgICAgICAgICAgICAgICAgOiBfZnJvbUNDKHUyNCA+PiAxNiAmIDI1NSwgdTI0ID4+IDggJiAyNTUsIHUyNCAmIDI1NSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJpbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGRvZXMgd2hhdCBgd2luZG93LmF0b2JgIG9mIHdlYiBicm93c2VycyBkby5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXNjIEJhc2U2NC1lbmNvZGVkIHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGJpbmFyeSBzdHJpbmdcbiAgICAgKi9cbiAgICB2YXIgX2F0b2IgPSB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyA/IGZ1bmN0aW9uIChhc2MpIHsgcmV0dXJuIGF0b2IoX3RpZHlCNjQoYXNjKSk7IH1cbiAgICAgICAgOiBfaGFzQnVmZmVyID8gZnVuY3Rpb24gKGFzYykgeyByZXR1cm4gQnVmZmVyLmZyb20oYXNjLCAnYmFzZTY0JykudG9TdHJpbmcoJ2JpbmFyeScpOyB9XG4gICAgICAgICAgICA6IGF0b2JQb2x5ZmlsbDtcbiAgICAvL1xuICAgIHZhciBfdG9VaW50OEFycmF5ID0gX2hhc0J1ZmZlclxuICAgICAgICA/IGZ1bmN0aW9uIChhKSB7IHJldHVybiBfVThBZnJvbShCdWZmZXIuZnJvbShhLCAnYmFzZTY0JykpOyB9XG4gICAgICAgIDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIF9VOEFmcm9tKF9hdG9iKGEpLnNwbGl0KCcnKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuY2hhckNvZGVBdCgwKTsgfSkpOyB9O1xuICAgIC8qKlxuICAgICAqIGNvbnZlcnRzIGEgQmFzZTY0IHN0cmluZyB0byBhIFVpbnQ4QXJyYXkuXG4gICAgICovXG4gICAgdmFyIHRvVWludDhBcnJheSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBfdG9VaW50OEFycmF5KF91blVSSShhKSk7IH07XG4gICAgLy9cbiAgICB2YXIgX2RlY29kZSA9IF9oYXNCdWZmZXJcbiAgICAgICAgPyBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQnVmZmVyLmZyb20oYSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCd1dGY4Jyk7IH1cbiAgICAgICAgOiBfVERcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIF9URC5kZWNvZGUoX3RvVWludDhBcnJheShhKSk7IH1cbiAgICAgICAgICAgIDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGJ0b3UoX2F0b2IoYSkpOyB9O1xuICAgIHZhciBfdW5VUkkgPSBmdW5jdGlvbiAoYSkgeyByZXR1cm4gX3RpZHlCNjQoYS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkgeyByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nOyB9KSk7IH07XG4gICAgLyoqXG4gICAgICogY29udmVydHMgYSBCYXNlNjQgc3RyaW5nIHRvIGEgVVRGLTggc3RyaW5nLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgQmFzZTY0IHN0cmluZy4gIEJvdGggbm9ybWFsIGFuZCBVUkwtc2FmZSBhcmUgc3VwcG9ydGVkXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVVRGLTggc3RyaW5nXG4gICAgICovXG4gICAgdmFyIGRlY29kZSA9IGZ1bmN0aW9uIChzcmMpIHsgcmV0dXJuIF9kZWNvZGUoX3VuVVJJKHNyYykpOyB9O1xuICAgIC8qKlxuICAgICAqIGNoZWNrIGlmIGEgdmFsdWUgaXMgYSB2YWxpZCBCYXNlNjQgc3RyaW5nXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNyYyBhIHZhbHVlIHRvIGNoZWNrXG4gICAgICAqL1xuICAgIHZhciBpc1ZhbGlkID0gZnVuY3Rpb24gKHNyYykge1xuICAgICAgICBpZiAodHlwZW9mIHNyYyAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBzID0gc3JjLnJlcGxhY2UoL1xccysvZywgJycpLnJlcGxhY2UoLz17MCwyfSQvLCAnJyk7XG4gICAgICAgIHJldHVybiAhL1teXFxzMC05YS16QS1aXFwrL10vLnRlc3QocykgfHwgIS9bXlxcczAtOWEtekEtWlxcLV9dLy50ZXN0KHMpO1xuICAgIH07XG4gICAgLy9cbiAgICB2YXIgX25vRW51bSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogdiwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGV4dGVuZCBTdHJpbmcucHJvdG90eXBlIHdpdGggcmVsZXZhbnQgbWV0aG9kc1xuICAgICAqL1xuICAgIHZhciBleHRlbmRTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYWRkID0gZnVuY3Rpb24gKG5hbWUsIGJvZHkpIHsgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBuYW1lLCBfbm9FbnVtKGJvZHkpKTsgfTtcbiAgICAgICAgX2FkZCgnZnJvbUJhc2U2NCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlY29kZSh0aGlzKTsgfSk7XG4gICAgICAgIF9hZGQoJ3RvQmFzZTY0JywgZnVuY3Rpb24gKHVybHNhZmUpIHsgcmV0dXJuIGVuY29kZSh0aGlzLCB1cmxzYWZlKTsgfSk7XG4gICAgICAgIF9hZGQoJ3RvQmFzZTY0VVJJJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZW5jb2RlKHRoaXMsIHRydWUpOyB9KTtcbiAgICAgICAgX2FkZCgndG9CYXNlNjRVUkwnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBlbmNvZGUodGhpcywgdHJ1ZSk7IH0pO1xuICAgICAgICBfYWRkKCd0b1VpbnQ4QXJyYXknLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0b1VpbnQ4QXJyYXkodGhpcyk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogZXh0ZW5kIFVpbnQ4QXJyYXkucHJvdG90eXBlIHdpdGggcmVsZXZhbnQgbWV0aG9kc1xuICAgICAqL1xuICAgIHZhciBleHRlbmRVaW50OEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FkZCA9IGZ1bmN0aW9uIChuYW1lLCBib2R5KSB7IHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoVWludDhBcnJheS5wcm90b3R5cGUsIG5hbWUsIF9ub0VudW0oYm9keSkpOyB9O1xuICAgICAgICBfYWRkKCd0b0Jhc2U2NCcsIGZ1bmN0aW9uICh1cmxzYWZlKSB7IHJldHVybiBmcm9tVWludDhBcnJheSh0aGlzLCB1cmxzYWZlKTsgfSk7XG4gICAgICAgIF9hZGQoJ3RvQmFzZTY0VVJJJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnJvbVVpbnQ4QXJyYXkodGhpcywgdHJ1ZSk7IH0pO1xuICAgICAgICBfYWRkKCd0b0Jhc2U2NFVSTCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZyb21VaW50OEFycmF5KHRoaXMsIHRydWUpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGV4dGVuZCBCdWlsdGluIHByb3RvdHlwZXMgd2l0aCByZWxldmFudCBtZXRob2RzXG4gICAgICovXG4gICAgdmFyIGV4dGVuZEJ1aWx0aW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBleHRlbmRTdHJpbmcoKTtcbiAgICAgICAgZXh0ZW5kVWludDhBcnJheSgpO1xuICAgIH07XG4gICAgdmFyIGdCYXNlNjQgPSB7XG4gICAgICAgIHZlcnNpb246IHZlcnNpb24sXG4gICAgICAgIFZFUlNJT046IFZFUlNJT04sXG4gICAgICAgIGF0b2I6IF9hdG9iLFxuICAgICAgICBhdG9iUG9seWZpbGw6IGF0b2JQb2x5ZmlsbCxcbiAgICAgICAgYnRvYTogX2J0b2EsXG4gICAgICAgIGJ0b2FQb2x5ZmlsbDogYnRvYVBvbHlmaWxsLFxuICAgICAgICBmcm9tQmFzZTY0OiBkZWNvZGUsXG4gICAgICAgIHRvQmFzZTY0OiBlbmNvZGUsXG4gICAgICAgIGVuY29kZTogZW5jb2RlLFxuICAgICAgICBlbmNvZGVVUkk6IGVuY29kZVVSSSxcbiAgICAgICAgZW5jb2RlVVJMOiBlbmNvZGVVUkksXG4gICAgICAgIHV0b2I6IHV0b2IsXG4gICAgICAgIGJ0b3U6IGJ0b3UsXG4gICAgICAgIGRlY29kZTogZGVjb2RlLFxuICAgICAgICBpc1ZhbGlkOiBpc1ZhbGlkLFxuICAgICAgICBmcm9tVWludDhBcnJheTogZnJvbVVpbnQ4QXJyYXksXG4gICAgICAgIHRvVWludDhBcnJheTogdG9VaW50OEFycmF5LFxuICAgICAgICBleHRlbmRTdHJpbmc6IGV4dGVuZFN0cmluZyxcbiAgICAgICAgZXh0ZW5kVWludDhBcnJheTogZXh0ZW5kVWludDhBcnJheSxcbiAgICAgICAgZXh0ZW5kQnVpbHRpbnM6IGV4dGVuZEJ1aWx0aW5zXG4gICAgfTtcbiAgICAvL1xuICAgIC8vIGV4cG9ydCBCYXNlNjQgdG8gdGhlIG5hbWVzcGFjZVxuICAgIC8vXG4gICAgLy8gRVM1IGlzIHlldCB0byBoYXZlIE9iamVjdC5hc3NpZ24oKSB0aGF0IG1heSBtYWtlIHRyYW5zcGlsZXJzIHVuaGFwcHkuXG4gICAgLy8gZ0Jhc2U2NC5CYXNlNjQgPSBPYmplY3QuYXNzaWduKHt9LCBnQmFzZTY0KTtcbiAgICBnQmFzZTY0LkJhc2U2NCA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGdCYXNlNjQpLmZvckVhY2goZnVuY3Rpb24gKGspIHsgcmV0dXJuIGdCYXNlNjQuQmFzZTY0W2tdID0gZ0Jhc2U2NFtrXTsgfSk7XG4gICAgcmV0dXJuIGdCYXNlNjQ7XG59KSk7XG4iLCAiY29uc3QgdHlwZXMgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IHR5cGVUcmllRGF0YSA9IHJlcXVpcmUoXCIuL3R5cGVUcmllLmpzb25cIikuZGF0YTtcbmNvbnN0IGV4dFBpY3REYXRhID0gcmVxdWlyZShcIi4vZXh0UGljdC5qc29uXCIpLmRhdGE7XG5jb25zdCBpbkNCRGF0YSA9IHJlcXVpcmUoXCIuL2luQ0IuanNvblwiKS5kYXRhO1xuXG5jb25zdCBVbmljb2RlVHJpZSA9IHJlcXVpcmUoXCJ1bmljb2RlLXRyaWVcIik7XG5jb25zdCBCYXNlNjQgPSByZXF1aXJlKFwianMtYmFzZTY0XCIpLkJhc2U2NDtcblxuY29uc3QgdHlwZVRyaWUgPSBuZXcgVW5pY29kZVRyaWUoQmFzZTY0LnRvVWludDhBcnJheSh0eXBlVHJpZURhdGEpKTtcbmNvbnN0IGV4dFBpY3QgPSBuZXcgVW5pY29kZVRyaWUoQmFzZTY0LnRvVWludDhBcnJheShleHRQaWN0RGF0YSkpO1xuY29uc3QgaW5DQiA9IG5ldyBVbmljb2RlVHJpZShCYXNlNjQudG9VaW50OEFycmF5KGluQ0JEYXRhKSk7XG5cbmZ1bmN0aW9uIGlzKHR5cGUsIGJpdCkge1xuICByZXR1cm4gKHR5cGUgJiBiaXQpICE9PSAwO1xufVxuXG5mdW5jdGlvbiBuZXh0R3JhcGhlbWVDbHVzdGVyU2l6ZShzLCB0cywgc3RhcnQpIHtcbiAgY29uc3QgTCA9IHRzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgKyAxIDwgTDsgaSsrKSB7XG4gICAgY29uc3QgY3VyciA9IHRzW2kgKyAwXTtcbiAgICBjb25zdCBuZXh0ID0gdHNbaSArIDFdO1xuXG4gICAgLy8gR0I5YzogXFxwe0luQ0I9Q29uc29uYW50fSBbIFxccHtJbkNCPUV4dGVuZH0gXFxwe0luQ0I9TGlua2VyfSBdKiBcXHB7SW5DQj1MaW5rZXJ9IFsgXFxwe0luQ0I9RXh0ZW5kfSBcXHB7SW5DQj1MaW5rZXJ9IF0qIFx1MDBENyBcXHB7SW5DQj1Db25zb25hbnR9XG4gICAgc3dpdGNoIChzLmdiOWMpIHtcbiAgICBjYXNlIDA6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuSW5DQl9Db25zb25hbnQpKSBzLmdiOWMgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgaWYgKGlzKGN1cnIsIHR5cGVzLkluQ0JfRXh0ZW5kKSkgcy5nYjljID0gMTtcbiAgICAgIGVsc2UgaWYgKGlzKGN1cnIsIHR5cGVzLkluQ0JfTGlua2VyKSkgcy5nYjljID0gMjtcbiAgICAgIGVsc2Ugcy5nYjljID0gaXMoY3VyciwgdHlwZXMuSW5DQl9Db25zb25hbnQpID8gMSA6IDA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuSW5DQl9FeHRlbmQgfCB0eXBlcy5JbkNCX0xpbmtlcikpIHMuZ2I5YyA9IDI7XG4gICAgICBlbHNlIHMuZ2I5YyA9IGlzKGN1cnIsIHR5cGVzLkluQ0JfQ29uc29uYW50KSA/IDEgOiAwO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gR0IxMTogXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY30gRXh0ZW5kKiBaV0ogeCBcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfVxuICAgIHN3aXRjaCAocy5nYjExKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKGlzKGN1cnIsIHR5cGVzLkV4dGVuZGVkX1BpY3RvZ3JhcGhpYykpIHMuZ2IxMSA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBpZiAoaXMoY3VyciwgdHlwZXMuRXh0ZW5kKSkgcy5nYjExID0gMTtcbiAgICAgIGVsc2UgaWYgKGlzKGN1cnIsIHR5cGVzLlpXSikpIHMuZ2IxMSA9IDI7XG4gICAgICBlbHNlIHMuZ2IxMSA9IGlzKGN1cnIsIHR5cGVzLkV4dGVuZGVkX1BpY3RvZ3JhcGhpYykgPyAxIDogMDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHMuZ2IxMSA9IGlzKGN1cnIsIHR5cGVzLkV4dGVuZGVkX1BpY3RvZ3JhcGhpYykgPyAxIDogMDtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIEdCMTI6IHNvdCAoUkkgUkkpKiBSSSBcdTAwRDcgUklcbiAgICBzd2l0Y2ggKHMuZ2IxMikge1xuICAgIGNhc2UgMDpcbiAgICAgIGlmIChpcyhjdXJyLCB0eXBlcy5SZWdpb25hbF9JbmRpY2F0b3IpKSBzLmdiMTIgPSAxO1xuICAgICAgZWxzZSBzLmdiMTIgPSAtMTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIGlmIChpcyhjdXJyLCB0eXBlcy5SZWdpb25hbF9JbmRpY2F0b3IpKSBzLmdiMTIgPSAwO1xuICAgICAgZWxzZSBzLmdiMTIgPSAtMTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIEdCMTM6IFteUkldIChSSSBSSSkqIFJJIFx1MDBENyBSSVxuICAgIHN3aXRjaCAocy5nYjEzKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKCFpcyhjdXJyLCB0eXBlcy5SZWdpb25hbF9JbmRpY2F0b3IpKSBzLmdiMTMgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgaWYgKGlzKGN1cnIsIHR5cGVzLlJlZ2lvbmFsX0luZGljYXRvcikpIHMuZ2IxMyA9IDI7XG4gICAgICBlbHNlIHMuZ2IxMyA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBzLmdiMTMgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gR0IzOiBDUiB4IExGXG4gICAgaWYgKGlzKGN1cnIsIHR5cGVzLkNSKSAmJiBpcyhuZXh0LCB0eXBlcy5MRikpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjQ6IChDb250cm9sIHwgQ1IgfCBMRikgXHUwMEY3XG4gICAgaWYgKGlzKGN1cnIsIHR5cGVzLkNvbnRyb2wgfCB0eXBlcy5DUiB8IHR5cGVzLkxGKSkge1xuICAgICAgcmV0dXJuIGkgKyAxIC0gc3RhcnQ7XG4gICAgfVxuICAgIC8vIEdCNTogXHUwMEY3IChDb250cm9sIHwgQ1IgfCBMRilcbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuQ29udHJvbCB8IHR5cGVzLkNSIHwgdHlwZXMuTEYpKSB7XG4gICAgICByZXR1cm4gaSArIDEgLSBzdGFydDtcbiAgICB9XG4gICAgLy8gR0I2OiBMIHggKEwgfCBWIHwgTFYgfCBMVlQpXG4gICAgaWYgKFxuICAgICAgaXMoY3VyciwgdHlwZXMuTCkgJiZcbiAgICAgIGlzKG5leHQsIHR5cGVzLkwgfCB0eXBlcy5WIHwgdHlwZXMuTFYgfCB0eXBlcy5MVlQpXG4gICAgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0I3OiAoTFYgfCBWKSB4IChWIHwgVClcbiAgICBpZiAoaXMoY3VyciwgdHlwZXMuTFYgfCB0eXBlcy5WKSAmJiBpcyhuZXh0LCB0eXBlcy5WIHwgdHlwZXMuVCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjg6IChMVlQgfCBUKSB4IFRcbiAgICBpZiAoaXMoY3VyciwgdHlwZXMuTFZUIHwgdHlwZXMuVCkgJiYgaXMobmV4dCwgdHlwZXMuVCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjk6IHggKEV4dGVuZCB8IFpXSilcbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuRXh0ZW5kIHwgdHlwZXMuWldKKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEdCOWE6IHggU3BhY2luZ01hcmtcbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuU3BhY2luZ01hcmspKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0I5YjogUHJlcGVuZCB4XG4gICAgaWYgKGlzKGN1cnIsIHR5cGVzLlByZXBlbmQpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0I5YzogXFxwe0luQ0I9Q29uc29uYW50fSBbIFxccHtJbkNCPUV4dGVuZH0gXFxwe0luQ0I9TGlua2VyfSBdKiBcXHB7SW5DQj1MaW5rZXJ9IFsgXFxwe0luQ0I9RXh0ZW5kfSBcXHB7SW5DQj1MaW5rZXJ9IF0qIFx1MDBENyBcXHB7SW5DQj1Db25zb25hbnR9XG4gICAgaWYgKGlzKG5leHQsIHR5cGVzLkluQ0JfQ29uc29uYW50KSAmJiBzLmdiOWMgPT09IDIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjExOiBcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfSBFeHRlbmQqIFpXSiB4IFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9XG4gICAgaWYgKGlzKG5leHQsIHR5cGVzLkV4dGVuZGVkX1BpY3RvZ3JhcGhpYykgJiYgcy5nYjExID09PSAyKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0IxMjogc290IChSSSBSSSkqIFJJIHggUklcbiAgICBpZiAoaXMobmV4dCwgdHlwZXMuUmVnaW9uYWxfSW5kaWNhdG9yKSAmJiBzLmdiMTIgPT09IDEpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBHQjEzOiBbXlJJXSAoUkkgUkkpKiBSSSB4IFJJXG4gICAgaWYgKGlzKG5leHQsIHR5cGVzLlJlZ2lvbmFsX0luZGljYXRvcikgJiYgcy5nYjEzID09PSAyKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gR0I5OTk6IEFueSBcdTAwRjcgQW55XG4gICAgcmV0dXJuIGkgKyAxIC0gc3RhcnQ7XG4gIH1cbiAgcmV0dXJuIEwgLSBzdGFydDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcGxpdChzdHIpIHtcbiAgY29uc3QgZ3JhcGhlbWVDbHVzdGVycyA9IFtdO1xuXG4gIGNvbnN0IG1hcCA9IFswXTtcbiAgY29uc3QgdHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyApIHtcbiAgICBjb25zdCBjb2RlID0gc3RyLmNvZGVQb2ludEF0KGkpO1xuICAgIHRzLnB1c2godHlwZVRyaWUuZ2V0KGNvZGUpIHwgZXh0UGljdC5nZXQoY29kZSkgfCBpbkNCLmdldChjb2RlKSk7XG4gICAgaSArPSBjb2RlID4gNjU1MzUgPyAyIDogMTtcbiAgICBtYXAucHVzaChpKTtcbiAgfVxuICBjb25zdCBzID0ge1xuICAgIGdiOWM6IDAsXG4gICAgZ2IxMTogMCxcbiAgICBnYjEyOiAwLFxuICAgIGdiMTM6IDAsXG4gIH07XG4gIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IHRzLmxlbmd0aDsgKSB7XG4gICAgY29uc3Qgc2l6ZSA9IG5leHRHcmFwaGVtZUNsdXN0ZXJTaXplKHMsIHRzLCBvZmZzZXQpO1xuICAgIGNvbnN0IHN0YXJ0ID0gbWFwW29mZnNldF07XG4gICAgY29uc3QgZW5kID0gbWFwW29mZnNldCArIHNpemVdO1xuICAgIGdyYXBoZW1lQ2x1c3RlcnMucHVzaChzdHIuc2xpY2Uoc3RhcnQsIGVuZCkpO1xuICAgIG9mZnNldCArPSBzaXplO1xuICB9XG5cbiAgcmV0dXJuIGdyYXBoZW1lQ2x1c3RlcnM7XG59O1xuIiwgImltcG9ydCB7IExpc3QsIEljb24sIEFjdGlvblBhbmVsIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IFJvb3RFcnJvckJvdW5kYXJ5IGZyb20gXCJ+L2NvbXBvbmVudHMvUm9vdEVycm9yQm91bmRhcnlcIjtcbmltcG9ydCBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdExpc3RlbmVyc1wiO1xuaW1wb3J0IFZhdWx0SXRlbSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L0l0ZW1cIjtcbmltcG9ydCBMaXN0Rm9sZGVyRHJvcGRvd24gZnJvbSBcIn4vY29tcG9uZW50cy9MaXN0Rm9sZGVyRHJvcGRvd25cIjtcbmltcG9ydCB7IEJpdHdhcmRlblByb3ZpZGVyIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IEZhdm9yaXRlc1Byb3ZpZGVyLCB1c2VTZXBhcmF0ZUZhdm9yaXRlSXRlbXMgfSBmcm9tIFwifi9jb250ZXh0L2Zhdm9yaXRlc1wiO1xuaW1wb3J0IHsgU2Vzc2lvblByb3ZpZGVyIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uXCI7XG5pbXBvcnQgeyB1c2VWYXVsdENvbnRleHQsIFZhdWx0UHJvdmlkZXIgfSBmcm9tIFwifi9jb250ZXh0L3ZhdWx0XCI7XG5pbXBvcnQgeyBGb2xkZXIsIEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgVmF1bHRMb2FkaW5nRmFsbGJhY2sgfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L1ZhdWx0TG9hZGluZ0ZhbGxiYWNrXCI7XG5pbXBvcnQgeyB1c2VWYXVsdFNlYXJjaCB9IGZyb20gXCIuL3V0aWxzL3NlYXJjaFwiO1xuaW1wb3J0IHsgVmF1bHRBY3Rpb25zU2VjdGlvbiB9IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9uc1wiO1xuXG5jb25zdCBTZWFyY2hWYXVsdENvbW1hbmQgPSAoKSA9PiAoXG4gIDxSb290RXJyb3JCb3VuZGFyeT5cbiAgICA8Qml0d2FyZGVuUHJvdmlkZXIgbG9hZGluZ0ZhbGxiYWNrPXs8VmF1bHRMb2FkaW5nRmFsbGJhY2sgLz59PlxuICAgICAgPFNlc3Npb25Qcm92aWRlciB1bmxvY2s+XG4gICAgICAgIDxWYXVsdExpc3RlbmVyc1Byb3ZpZGVyPlxuICAgICAgICAgIDxWYXVsdFByb3ZpZGVyPlxuICAgICAgICAgICAgPEZhdm9yaXRlc1Byb3ZpZGVyPlxuICAgICAgICAgICAgICA8U2VhcmNoVmF1bHRDb21wb25lbnQgLz5cbiAgICAgICAgICAgIDwvRmF2b3JpdGVzUHJvdmlkZXI+XG4gICAgICAgICAgPC9WYXVsdFByb3ZpZGVyPlxuICAgICAgICA8L1ZhdWx0TGlzdGVuZXJzUHJvdmlkZXI+XG4gICAgICA8L1Nlc3Npb25Qcm92aWRlcj5cbiAgICA8L0JpdHdhcmRlblByb3ZpZGVyPlxuICA8L1Jvb3RFcnJvckJvdW5kYXJ5PlxuKTtcblxuZnVuY3Rpb24gU2VhcmNoVmF1bHRDb21wb25lbnQoKSB7XG4gIGNvbnN0IHsgaXRlbXMsIGZvbGRlcnMsIGlzTG9hZGluZywgaXNFbXB0eSB9ID0gdXNlVmF1bHRDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2V0U2VhcmNoVGV4dCwgZmlsdGVyZWRJdGVtcyB9ID0gdXNlVmF1bHRTZWFyY2goaXRlbXMpO1xuICBjb25zdCB7IGZhdm9yaXRlSXRlbXMsIG5vbkZhdm9yaXRlSXRlbXMgfSA9IHVzZVNlcGFyYXRlRmF2b3JpdGVJdGVtcyhmaWx0ZXJlZEl0ZW1zKTtcblxuICByZXR1cm4gKFxuICAgIDxMaXN0XG4gICAgICBzZWFyY2hCYXJQbGFjZWhvbGRlcj1cIlNlYXJjaCB2YXVsdFwiXG4gICAgICBmaWx0ZXJpbmc9e2ZhbHNlfVxuICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICBzZWFyY2hCYXJBY2Nlc3Nvcnk9ezxMaXN0Rm9sZGVyRHJvcGRvd24gLz59XG4gICAgICBvblNlYXJjaFRleHRDaGFuZ2U9e3NldFNlYXJjaFRleHR9XG4gICAgPlxuICAgICAge2Zhdm9yaXRlSXRlbXMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiRmF2b3JpdGVzXCI+XG4gICAgICAgICAgICA8VmF1bHRJdGVtTGlzdCBpdGVtcz17ZmF2b3JpdGVJdGVtc30gZm9sZGVycz17Zm9sZGVyc30gLz5cbiAgICAgICAgICA8L0xpc3QuU2VjdGlvbj5cbiAgICAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiT3RoZXIgSXRlbXNcIj5cbiAgICAgICAgICAgIDxWYXVsdEl0ZW1MaXN0IGl0ZW1zPXtub25GYXZvcml0ZUl0ZW1zfSBmb2xkZXJzPXtmb2xkZXJzfSAvPlxuICAgICAgICAgIDwvTGlzdC5TZWN0aW9uPlxuICAgICAgICA8Lz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxWYXVsdEl0ZW1MaXN0IGl0ZW1zPXtub25GYXZvcml0ZUl0ZW1zfSBmb2xkZXJzPXtmb2xkZXJzfSAvPlxuICAgICAgKX1cbiAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgIDxMaXN0LkVtcHR5VmlldyBpY29uPXtJY29uLkFycm93Q2xvY2t3aXNlfSB0aXRsZT1cIkxvYWRpbmcuLi5cIiBkZXNjcmlwdGlvbj1cIlBsZWFzZSB3YWl0LlwiIC8+XG4gICAgICApIDogKFxuICAgICAgICA8TGlzdC5FbXB0eVZpZXdcbiAgICAgICAgICBpY29uPXt7IHNvdXJjZTogXCJiaXR3YXJkZW4tNjQucG5nXCIgfX1cbiAgICAgICAgICB0aXRsZT17aXNFbXB0eSA/IFwiVmF1bHQgZW1wdHkuXCIgOiBcIk5vIG1hdGNoaW5nIGl0ZW1zIGZvdW5kLlwifVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtcbiAgICAgICAgICAgIGlzRW1wdHlcbiAgICAgICAgICAgICAgPyBcIkhpdCB0aGUgc3luYyBidXR0b24gdG8gc3luYyB5b3VyIHZhdWx0IG9yIHRyeSBsb2dnaW5nIGluIGFnYWluLlwiXG4gICAgICAgICAgICAgIDogXCJIaXQgdGhlIHN5bmMgYnV0dG9uIHRvIHN5bmMgeW91ciB2YXVsdC5cIlxuICAgICAgICAgIH1cbiAgICAgICAgICBhY3Rpb25zPXtcbiAgICAgICAgICAgICFpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgICAgICAgPFZhdWx0QWN0aW9uc1NlY3Rpb24gLz5cbiAgICAgICAgICAgICAgPC9BY3Rpb25QYW5lbD5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvTGlzdD5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVmF1bHRJdGVtTGlzdCh7IGl0ZW1zLCBmb2xkZXJzIH06IHsgaXRlbXM6IEl0ZW1bXTsgZm9sZGVyczogRm9sZGVyW10gfSkge1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7aXRlbXMubWFwKChpdGVtKSA9PiAoXG4gICAgICAgIDxWYXVsdEl0ZW0ga2V5PXtpdGVtLmlkfSBpdGVtPXtpdGVtfSBmb2xkZXI9e2dldEl0ZW1Gb2xkZXIoZm9sZGVycywgaXRlbSl9IC8+XG4gICAgICApKX1cbiAgICA8Lz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0SXRlbUZvbGRlcihmb2xkZXJMaXN0OiBGb2xkZXJbXSwgaXRlbTogSXRlbSkge1xuICByZXR1cm4gZm9sZGVyTGlzdC5maW5kKChmb2xkZXIpID0+IGZvbGRlci5pZCA9PT0gaXRlbS5mb2xkZXJJZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlYXJjaFZhdWx0Q29tbWFuZDtcbiIsICJpbXBvcnQgeyBlbnZpcm9ubWVudCwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgRXJyb3JJbmZvLCBSZWFjdE5vZGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBUcm91Ymxlc2hvb3RpbmdHdWlkZSBmcm9tIFwifi9jb21wb25lbnRzL1Ryb3VibGVzaG9vdGluZ0d1aWRlXCI7XG5pbXBvcnQgeyBNYW51YWxseVRocm93bkVycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNoaWxkcmVuPzogUmVhY3ROb2RlO1xufTtcblxudHlwZSBTdGF0ZSA9IHtcbiAgaGFzRXJyb3I6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9vdEVycm9yQm91bmRhcnkgZXh0ZW5kcyBDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0geyBoYXNFcnJvcjogZmFsc2UgfTtcbiAgfVxuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoKSB7XG4gICAgcmV0dXJuIHsgaGFzRXJyb3I6IHRydWUgfTtcbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNYW51YWxseVRocm93bkVycm9yKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSkgPT4gKHsgLi4uc3RhdGUsIGhhc0Vycm9yOiB0cnVlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSk7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgZXJyb3IubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoeyAuLi5zdGF0ZSwgaGFzRXJyb3I6IHRydWUsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IsIGVycm9ySW5mbyk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikgcmV0dXJuIDxUcm91Ymxlc2hvb3RpbmdHdWlkZSBlcnJvcj17dGhpcy5zdGF0ZS5lcnJvcn0gLz47XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiA8VHJvdWJsZXNob290aW5nR3VpZGUgLz47XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgQWN0aW9uUGFuZWwsIEFjdGlvbiwgRGV0YWlsLCBnZXRQcmVmZXJlbmNlVmFsdWVzLCBlbnZpcm9ubWVudCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uLCBCdWdSZXBvcnRPcGVuQWN0aW9uIH0gZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zXCI7XG5pbXBvcnQgeyBCVUdfUkVQT1JUX1VSTCB9IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9CdWdSZXBvcnRPcGVuQWN0aW9uXCI7XG5pbXBvcnQgeyBFbnN1cmVDbGlCaW5FcnJvciwgSW5zdGFsbGVkQ0xJTm90Rm91bmRFcnJvciwgZ2V0RXJyb3JTdHJpbmcgfSBmcm9tIFwifi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIn4vdXRpbHMvcGxhdGZvcm1cIjtcblxuY29uc3QgTElORV9CUkVBSyA9IFwiXFxuXFxuXCI7XG5jb25zdCBDTElfSU5TVEFMTEFUSU9OX0hFTFBfVVJMID0gXCJodHRwczovL2JpdHdhcmRlbi5jb20vaGVscC9jbGkvI2Rvd25sb2FkLWFuZC1pbnN0YWxsXCI7XG5cbmNvbnN0IGdldENvZGVCbG9jayA9IChjb250ZW50OiBzdHJpbmcpID0+IGBcXGBcXGBcXGBcXG4ke2NvbnRlbnR9XFxuXFxgXFxgXFxgYDtcblxudHlwZSBNZXNzYWdlcyA9IHN0cmluZyB8IG51bWJlciB8IGZhbHNlIHwgMCB8IFwiXCIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBUcm91Ymxlc2hvb3RpbmdHdWlkZVByb3BzID0ge1xuICBlcnJvcj86IGFueTtcbn07XG5cbmNvbnN0IFRyb3VibGVzaG9vdGluZ0d1aWRlID0gKHsgZXJyb3IgfTogVHJvdWJsZXNob290aW5nR3VpZGVQcm9wcykgPT4ge1xuICBjb25zdCBlcnJvclN0cmluZyA9IGdldEVycm9yU3RyaW5nKGVycm9yKTtcbiAgY29uc3QgbG9jYWxDbGlQYXRoID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKS5jbGlQYXRoO1xuICBjb25zdCBpc0NsaURvd25sb2FkRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVuc3VyZUNsaUJpbkVycm9yO1xuICBjb25zdCBuZWVkc1RvSW5zdGFsbENsaSA9IGxvY2FsQ2xpUGF0aCB8fCBlcnJvciBpbnN0YW5jZW9mIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3I7XG5cbiAgY29uc3QgbWVzc2FnZXM6IE1lc3NhZ2VzW10gPSBbXTtcblxuICBpZiAobmVlZHNUb0luc3RhbGxDbGkgJiYgIWlzQ2xpRG93bmxvYWRFcnJvcikge1xuICAgIG1lc3NhZ2VzLnB1c2goXCIjIFx1MjZBMFx1RkUwRiBCaXR3YXJkZW4gQ0xJIG5vdCBmb3VuZFwiKTtcbiAgfSBlbHNlIHtcbiAgICBtZXNzYWdlcy5wdXNoKFwiIyBcdUQ4M0RcdURDQTUgV2hvb3BzISBTb21ldGhpbmcgd2VudCB3cm9uZ1wiKTtcbiAgfVxuXG4gIGlmIChpc0NsaURvd25sb2FkRXJyb3IpIHtcbiAgICBtZXNzYWdlcy5wdXNoKFxuICAgICAgYFdlIGNvdWxkbid0IGRvd25sb2FkIHRoZSBbQml0d2FyZGVuIENMSV0oJHtDTElfSU5TVEFMTEFUSU9OX0hFTFBfVVJMfSksIHlvdSBjYW4gYWx3YXlzIGluc3RhbGwgaXQgb24geW91ciBtYWNoaW5lLmBcbiAgICApO1xuICB9IGVsc2UgaWYgKG5lZWRzVG9JbnN0YWxsQ2xpKSB7XG4gICAgY29uc3QgY2xpUGF0aFN0cmluZyA9IGxvY2FsQ2xpUGF0aCA/IGAgKCR7bG9jYWxDbGlQYXRofSlgIDogXCJcIjtcbiAgICBtZXNzYWdlcy5wdXNoKFxuICAgICAgYFdlIGNvdWxkbid0IGZpbmQgdGhlIFtCaXR3YXJkZW4gQ0xJXSgke0NMSV9JTlNUQUxMQVRJT05fSEVMUF9VUkx9KSBpbnN0YWxsZWQgb24geW91ciBtYWNoaW5lJHtjbGlQYXRoU3RyaW5nfS5gXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBtZXNzYWdlcy5wdXNoKGBUaGUgXFxgJHtlbnZpcm9ubWVudC5jb21tYW5kTmFtZX1cXGAgY29tbWFuZCBjcmFzaGVkIHdoZW4gd2Ugd2VyZSBub3QgZXhwZWN0aW5nIGl0IHRvLmApO1xuICB9XG5cbiAgbWVzc2FnZXMucHVzaChcbiAgICBcIj4gUGxlYXNlIHJlYWQgdGhlIGBTZXR1cGAgc2VjdGlvbiBpbiB0aGUgW2V4dGVuc2lvbidzIGRlc2NyaXB0aW9uXShodHRwczovL3d3dy5yYXljYXN0LmNvbS9qb21pZmVwZS9iaXR3YXJkZW4pIHRvIGVuc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgaXMgcHJvcGVybHkgY29uZmlndXJlZC5cIlxuICApO1xuXG4gIG1lc3NhZ2VzLnB1c2goXG4gICAgYCoqVHJ5IHJlc3RhcnRpbmcgdGhlIGNvbW1hbmQuIElmIHRoZSBpc3N1ZSBwZXJzaXN0cywgY29uc2lkZXIgW3JlcG9ydGluZyBhIGJ1ZyBvbiBHaXRIdWJdKCR7QlVHX1JFUE9SVF9VUkx9KSB0byBoZWxwIHVzIGZpeCBpdC4qKmBcbiAgKTtcblxuICBpZiAoZXJyb3JTdHJpbmcpIHtcbiAgICBjb25zdCBpc0FyY2hFcnJvciA9IC9pbmNvbXBhdGlibGUgYXJjaGl0ZWN0dXJlL2dpLnRlc3QoZXJyb3JTdHJpbmcpO1xuICAgIG1lc3NhZ2VzLnB1c2goXG4gICAgICBcIj4jIyBUZWNobmljYWwgZGV0YWlscyBcdUQ4M0VcdUREMTNcIixcbiAgICAgIGlzQXJjaEVycm9yICYmXG4gICAgICAgIGBcdTI2QTBcdUZFMEYgV2Ugc3VzcGVjdCB0aGF0IHlvdXIgQml0d2FyZGVuIENMSSB3YXMgaW5zdGFsbGVkIHVzaW5nIGEgdmVyc2lvbiBvZiBOb2RlSlMgdGhhdCdzIGluY29tcGF0aWJsZSB3aXRoIHlvdXIgc3lzdGVtIGFyY2hpdGVjdHVyZSAoZS5nLiB4NjQgTm9kZUpTIG9uIGEgTTEvQXBwbGUgU2lsaWNvbiBNYWMpLiBQbGVhc2UgbWFrZSBzdXJlIHlvdXIgaGF2ZSB0aGUgY29ycmVjdCB2ZXJzaW9ucyBvZiB5b3VyIHNvZnR3YXJlIGluc3RhbGxlZCAoZS5nLiwgJHtcbiAgICAgICAgICBwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiID8gXCJIb21lYnJldywgXCIgOiBcIlwiXG4gICAgICAgIH1Ob2RlSlMsIGFuZCBCaXR3YXJkZW4gQ0xJKS5gLFxuICAgICAgZ2V0Q29kZUJsb2NrKGVycm9yU3RyaW5nKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxEZXRhaWxcbiAgICAgIG1hcmtkb3duPXttZXNzYWdlcy5maWx0ZXIoQm9vbGVhbikuam9pbihMSU5FX0JSRUFLKX1cbiAgICAgIGFjdGlvbnM9e1xuICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9XCJCdWcgUmVwb3J0XCI+XG4gICAgICAgICAgICA8QnVnUmVwb3J0T3BlbkFjdGlvbiAvPlxuICAgICAgICAgICAgPEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uIC8+XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgIHtuZWVkc1RvSW5zdGFsbENsaSAmJiAoXG4gICAgICAgICAgICA8QWN0aW9uLk9wZW5JbkJyb3dzZXIgdGl0bGU9XCJPcGVuIEluc3RhbGxhdGlvbiBHdWlkZVwiIHVybD17Q0xJX0lOU1RBTExBVElPTl9IRUxQX1VSTH0gLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgIC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUcm91Ymxlc2hvb3RpbmdHdWlkZTtcbiIsICJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VSZXByb21wdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VSZXByb21wdFwiO1xuXG5leHBvcnQgdHlwZSBBY3Rpb25XaXRoUmVwcm9tcHRQcm9wcyA9IE9taXQ8QWN0aW9uLlByb3BzLCBcIm9uQWN0aW9uXCI+ICYge1xuICByZXByb21wdERlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBvbkFjdGlvbjogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG59O1xuXG5mdW5jdGlvbiBBY3Rpb25XaXRoUmVwcm9tcHQocHJvcHM6IEFjdGlvbldpdGhSZXByb21wdFByb3BzKSB7XG4gIGNvbnN0IHsgcmVwcm9tcHREZXNjcmlwdGlvbiwgb25BY3Rpb24sIC4uLmNvbXBvbmVudFByb3BzIH0gPSBwcm9wcztcbiAgY29uc3QgeyByZXByb21wdCB9ID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgcmVwcm9tcHRBbmRQZXJmb3JtQWN0aW9uID0gdXNlUmVwcm9tcHQob25BY3Rpb24sIHsgZGVzY3JpcHRpb246IHJlcHJvbXB0RGVzY3JpcHRpb24gfSk7XG5cbiAgcmV0dXJuIDxBY3Rpb24gey4uLmNvbXBvbmVudFByb3BzfSBvbkFjdGlvbj17cmVwcm9tcHQgPyByZXByb21wdEFuZFBlcmZvcm1BY3Rpb24gOiBvbkFjdGlvbn0gLz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvbldpdGhSZXByb21wdDtcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuY29uc3QgVmF1bHRJdGVtQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8SXRlbSB8IG51bGw+KG51bGwpO1xuXG5leHBvcnQgY29uc3QgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gPSAoKSA9PiB7XG4gIGNvbnN0IHNlc3Npb24gPSB1c2VDb250ZXh0KFZhdWx0SXRlbUNvbnRleHQpO1xuICBpZiAoc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlU2VsZWN0VmF1bHRJdGVtIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBWYXVsdEl0ZW1Db250ZXh0LlByb3ZpZGVyXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWYXVsdEl0ZW1Db250ZXh0O1xuIiwgImltcG9ydCB7IHNob3dUb2FzdCwgVG9hc3QsIHVzZU5hdmlnYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgUmVwcm9tcHRGb3JtIGZyb20gXCJ+L2NvbXBvbmVudHMvUmVwcm9tcHRGb3JtXCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uXCI7XG5cbmV4cG9ydCB0eXBlIFVzZXJSZXByb21wdEFjdGlvblByb3AgPSB7IGNsb3NlRm9ybTogKCkgPT4gdm9pZCB9O1xuZXhwb3J0IHR5cGUgVXNlUmVwcm9tcHRBY3Rpb24gPSAocHJvcHM6IFVzZXJSZXByb21wdEFjdGlvblByb3ApID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+O1xuXG5leHBvcnQgdHlwZSBVc2VSZXByb21wdE9wdGlvbnMgPSB7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gZm9yIGFuIEFjdGlvbiB0aGF0IHdpbGwgbmF2aWdhdGUgdG8gdGhlIHtAbGluayBSZXByb21wdEZvcm19LlxuICogVGhlIHBhc3N3b3JkIGlzIG5vdCBjb25maXJtIGluIHRoaXMgaG9vaywgb25seSBwYXNzZWQgZG93biB0byB0aGUgYWN0aW9uLlxuICovXG5mdW5jdGlvbiB1c2VSZXByb21wdChhY3Rpb246ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LCBvcHRpb25zPzogVXNlUmVwcm9tcHRPcHRpb25zKSB7XG4gIGNvbnN0IHsgZGVzY3JpcHRpb24gPSBcIlBlcmZvcm1pbmcgYW4gYWN0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIG1hc3RlciBwYXNzd29yZFwiIH0gPSBvcHRpb25zID8/IHt9O1xuICBjb25zdCBzZXNzaW9uID0gdXNlU2Vzc2lvbigpO1xuICBjb25zdCB7IHB1c2gsIHBvcCB9ID0gdXNlTmF2aWdhdGlvbigpO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNvbmZpcm0ocGFzc3dvcmQ6IHN0cmluZykge1xuICAgIGNvbnN0IGlzUGFzc3dvcmRDb3JyZWN0ID0gYXdhaXQgc2Vzc2lvbi5jb25maXJtTWFzdGVyUGFzc3dvcmQocGFzc3dvcmQpO1xuICAgIGlmICghaXNQYXNzd29yZENvcnJlY3QpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byB1bmxvY2sgdmF1bHRcIiwgXCJDaGVjayB5b3VyIGNyZWRlbnRpYWxzXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3AoKTtcblxuICAgIC8qIHVzaW5nIGEgc2V0VGltZW91dCBoZXJlIGZpeGVzIGEgYnVnIHdoZXJlIHRoZSBSZXByb21wdEZvcm0gZmxhc2hlcyB3aGVuIHlvdSBwb3AgYmFjayB0byB0aGUgcHJldmlvdXMgc2NyZWVuLiBcbiAgICBUaGlzIGNvbWVzIHdpdGggdGhlIHRyYWRlLW9mZiBvZiBhIHRpbnkgdmlzaWJsZSBkZWxheSBiZXR3ZWVuIHRoZSBSZXByb21wdEZvcm0gcG9wIGFuZCB0aGUgYWN0aW9uIHB1c2hpbmcgYSBuZXcgc2NyZWVuICovXG4gICAgc2V0VGltZW91dChhY3Rpb24sIDEpO1xuICB9XG5cbiAgcmV0dXJuICgpID0+IHB1c2goPFJlcHJvbXB0Rm9ybSBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259IG9uQ29uZmlybT17aGFuZGxlQ29uZmlybX0gLz4pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VSZXByb21wdDtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEFjdGlvblBhbmVsLCBGb3JtIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuXG5leHBvcnQgdHlwZSBSZXByb21wdEZvcm1Qcm9wcyA9IHtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgb25Db25maXJtOiAocGFzc3dvcmQ6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFJlcHJvbXB0Rm9ybSA9IChwcm9wczogUmVwcm9tcHRGb3JtUHJvcHMpID0+IHtcbiAgY29uc3QgeyBkZXNjcmlwdGlvbiwgb25Db25maXJtIH0gPSBwcm9wcztcblxuICBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXM6IHsgcGFzc3dvcmQ6IHN0cmluZyB9KSB7XG4gICAgb25Db25maXJtKHZhbHVlcy5wYXNzd29yZCk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxGb3JtXG4gICAgICBuYXZpZ2F0aW9uVGl0bGU9XCJDb25maXJtYXRpb24gUmVxdWlyZWRcIlxuICAgICAgYWN0aW9ucz17XG4gICAgICAgIDxBY3Rpb25QYW5lbD5cbiAgICAgICAgICA8QWN0aW9uLlN1Ym1pdEZvcm0gdGl0bGU9XCJDb25maXJtXCIgb25TdWJtaXQ9e29uU3VibWl0fSAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgID5cbiAgICAgIDxGb3JtLkRlc2NyaXB0aW9uIHRpdGxlPVwiQ29uZmlybWF0aW9uIFJlcXVpcmVkIGZvclwiIHRleHQ9e2Rlc2NyaXB0aW9ufSAvPlxuICAgICAgPEZvcm0uUGFzc3dvcmRGaWVsZCBhdXRvRm9jdXMgaWQ9XCJwYXNzd29yZFwiIHRpdGxlPVwiTWFzdGVyIFBhc3N3b3JkXCIgLz5cbiAgICA8L0Zvcm0+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZXByb21wdEZvcm07XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlLCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgUHJvcHNXaXRoQ2hpbGRyZW4sIFJlYWN0Tm9kZSwgdXNlQ29udGV4dCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgVW5sb2NrRm9ybSBmcm9tIFwifi9jb21wb25lbnRzL1VubG9ja0Zvcm1cIjtcbmltcG9ydCB7IFZhdWx0TG9hZGluZ0ZhbGxiYWNrIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9WYXVsdExvYWRpbmdGYWxsYmFja1wiO1xuaW1wb3J0IHsgTE9DQUxfU1RPUkFHRV9LRVksIFZBVUxUX0xPQ0tfTUVTU0FHRVMgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgVkFVTFRfVElNRU9VVCB9IGZyb20gXCJ+L2NvbnN0YW50cy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgdXNlQml0d2FyZGVuIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IHVzZVNlc3Npb25SZWR1Y2VyIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uL3JlZHVjZXJcIjtcbmltcG9ydCB7XG4gIGNoZWNrU3lzdGVtTG9ja2VkU2luY2VMYXN0QWNjZXNzLFxuICBjaGVja1N5c3RlbVNsZXB0U2luY2VMYXN0QWNjZXNzLFxuICBTZXNzaW9uU3RvcmFnZSxcbn0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBTZXNzaW9uU3RhdGUgfSBmcm9tIFwifi90eXBlcy9zZXNzaW9uXCI7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCJ+L3V0aWxzL2NhY2hlXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VPbmNlRWZmZWN0IGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZU9uY2VFZmZlY3RcIjtcbmltcG9ydCB7IGhhc2hNYXN0ZXJQYXNzd29yZEZvclJlcHJvbXB0aW5nIH0gZnJvbSBcIn4vdXRpbHMvcGFzc3dvcmRzXCI7XG5pbXBvcnQgeyBwbGF0Zm9ybSB9IGZyb20gXCJ+L3V0aWxzL3BsYXRmb3JtXCI7XG5cbmV4cG9ydCB0eXBlIFNlc3Npb24gPSB7XG4gIGFjdGl2ZTogYm9vbGVhbjtcbiAgY29uZmlybU1hc3RlclBhc3N3b3JkOiAocGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbn0gJiBQaWNrPFNlc3Npb25TdGF0ZSwgXCJ0b2tlblwiIHwgXCJpc0xvYWRpbmdcIiB8IFwiaXNMb2NrZWRcIiB8IFwiaXNBdXRoZW50aWNhdGVkXCI+O1xuXG5leHBvcnQgY29uc3QgU2Vzc2lvbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFNlc3Npb24gfCBudWxsPihudWxsKTtcblxuZXhwb3J0IHR5cGUgU2Vzc2lvblByb3ZpZGVyUHJvcHMgPSBQcm9wc1dpdGhDaGlsZHJlbjx7XG4gIGxvYWRpbmdGYWxsYmFjaz86IFJlYWN0Tm9kZTtcbiAgdW5sb2NrPzogYm9vbGVhbjtcbn0+O1xuXG4vKipcbiAqIENvbXBvbmVudCB3aGljaCBwcm92aWRlcyBhIHNlc3Npb24gdmlhIHRoZSB7QGxpbmsgdXNlU2Vzc2lvbn0gaG9vay5cbiAqIEBwYXJhbSBwcm9wcy51bmxvY2sgSWYgdHJ1ZSwgYW4gdW5sb2NrIGZvcm0gd2lsbCBiZSBkaXNwbGF5ZWQgaWYgdGhlIHZhdWx0IGlzIGxvY2tlZCBvciB1bmF1dGhlbnRpY2F0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTZXNzaW9uUHJvdmlkZXIocHJvcHM6IFNlc3Npb25Qcm92aWRlclByb3BzKSB7XG4gIGNvbnN0IHsgY2hpbGRyZW4sIGxvYWRpbmdGYWxsYmFjayA9IDxWYXVsdExvYWRpbmdGYWxsYmFjayAvPiwgdW5sb2NrIH0gPSBwcm9wcztcblxuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VTZXNzaW9uUmVkdWNlcigpO1xuICBjb25zdCBwZW5kaW5nQWN0aW9uUmVmID0gdXNlUmVmPFByb21pc2U8YW55Pj4oUHJvbWlzZS5yZXNvbHZlKCkpO1xuXG4gIHVzZU9uY2VFZmZlY3QoYm9vdHN0cmFwU2Vzc2lvbiwgYml0d2FyZGVuKTtcblxuICBhc3luYyBmdW5jdGlvbiBib290c3RyYXBTZXNzaW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBiaXR3YXJkZW5cbiAgICAgICAgLnNldEFjdGlvbkxpc3RlbmVyKFwibG9ja1wiLCBoYW5kbGVMb2NrKVxuICAgICAgICAuc2V0QWN0aW9uTGlzdGVuZXIoXCJ1bmxvY2tcIiwgaGFuZGxlVW5sb2NrKVxuICAgICAgICAuc2V0QWN0aW9uTGlzdGVuZXIoXCJsb2dvdXRcIiwgaGFuZGxlTG9nb3V0KTtcblxuICAgICAgY29uc3QgW3Rva2VuLCBwYXNzd29yZEhhc2gsIGxhc3RBY3Rpdml0eVRpbWVTdHJpbmcsIGxhc3RWYXVsdFN0YXR1c10gPSBhd2FpdCBTZXNzaW9uU3RvcmFnZS5nZXRTYXZlZFNlc3Npb24oKTtcbiAgICAgIGlmICghdG9rZW4gfHwgIXBhc3N3b3JkSGFzaCkgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKCk7XG5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJsb2FkU3RhdGVcIiwgdG9rZW4sIHBhc3N3b3JkSGFzaCB9KTtcbiAgICAgIGJpdHdhcmRlbi5zZXRTZXNzaW9uVG9rZW4odG9rZW4pO1xuXG4gICAgICBpZiAoYml0d2FyZGVuLndhc0NsaVVwZGF0ZWQpIHRocm93IG5ldyBMb2dvdXRWYXVsdEVycm9yKFZBVUxUX0xPQ0tfTUVTU0FHRVMuQ0xJX1VQREFURUQpO1xuICAgICAgaWYgKGxhc3RWYXVsdFN0YXR1cyA9PT0gXCJsb2NrZWRcIikgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKCk7XG4gICAgICBpZiAobGFzdFZhdWx0U3RhdHVzID09PSBcInVuYXV0aGVudGljYXRlZFwiKSB0aHJvdyBuZXcgTG9nb3V0VmF1bHRFcnJvcigpO1xuXG4gICAgICBpZiAobGFzdEFjdGl2aXR5VGltZVN0cmluZykge1xuICAgICAgICBjb25zdCBsYXN0QWN0aXZpdHlUaW1lID0gbmV3IERhdGUobGFzdEFjdGl2aXR5VGltZVN0cmluZyk7XG5cbiAgICAgICAgY29uc3QgdmF1bHRUaW1lb3V0TXMgPSArZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKS5yZXByb21wdElnbm9yZUR1cmF0aW9uO1xuICAgICAgICBpZiAocGxhdGZvcm0gPT09IFwibWFjb3NcIiAmJiB2YXVsdFRpbWVvdXRNcyA9PT0gVkFVTFRfVElNRU9VVC5TWVNURU1fTE9DSykge1xuICAgICAgICAgIGlmIChhd2FpdCBjaGVja1N5c3RlbUxvY2tlZFNpbmNlTGFzdEFjY2VzcyhsYXN0QWN0aXZpdHlUaW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExvY2tWYXVsdEVycm9yKFZBVUxUX0xPQ0tfTUVTU0FHRVMuU1lTVEVNX0xPQ0spO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiICYmIHZhdWx0VGltZW91dE1zID09PSBWQVVMVF9USU1FT1VULlNZU1RFTV9TTEVFUCkge1xuICAgICAgICAgIGlmIChhd2FpdCBjaGVja1N5c3RlbVNsZXB0U2luY2VMYXN0QWNjZXNzKGxhc3RBY3Rpdml0eVRpbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTG9ja1ZhdWx0RXJyb3IoVkFVTFRfTE9DS19NRVNTQUdFUy5TWVNURU1fU0xFRVApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh2YXVsdFRpbWVvdXRNcyAhPT0gVkFVTFRfVElNRU9VVC5ORVZFUikge1xuICAgICAgICAgIGNvbnN0IHRpbWVFbGFwc2VTaW5jZUxhc3RBY3Rpdml0eSA9IERhdGUubm93KCkgLSBsYXN0QWN0aXZpdHlUaW1lLmdldFRpbWUoKTtcbiAgICAgICAgICBpZiAodmF1bHRUaW1lb3V0TXMgPT09IFZBVUxUX1RJTUVPVVQuSU1NRURJQVRFTFkgfHwgdGltZUVsYXBzZVNpbmNlTGFzdEFjdGl2aXR5ID49IHZhdWx0VGltZW91dE1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTG9ja1ZhdWx0RXJyb3IoVkFVTFRfTE9DS19NRVNTQUdFUy5USU1FT1VUKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImZpbmlzaExvYWRpbmdTYXZlZFN0YXRlXCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIExvY2tWYXVsdEVycm9yKSB7XG4gICAgICAgIHBlbmRpbmdBY3Rpb25SZWYuY3VycmVudCA9IGJpdHdhcmRlbi5sb2NrKHsgcmVhc29uOiBlcnJvci5tZXNzYWdlLCBpbW1lZGlhdGU6IHRydWUsIGNoZWNrVmF1bHRTdGF0dXM6IHRydWUgfSk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgTG9nb3V0VmF1bHRFcnJvcikge1xuICAgICAgICBwZW5kaW5nQWN0aW9uUmVmLmN1cnJlbnQgPSBiaXR3YXJkZW4ubG9nb3V0KHsgcmVhc29uOiBlcnJvci5tZXNzYWdlLCBpbW1lZGlhdGU6IHRydWUgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZW5kaW5nQWN0aW9uUmVmLmN1cnJlbnQgPSBiaXR3YXJkZW4ubG9jayh7IGltbWVkaWF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImZhaWxMb2FkaW5nU2F2ZWRTdGF0ZVwiIH0pO1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGJvb3RzdHJhcCBzZXNzaW9uIHN0YXRlXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVVbmxvY2socGFzc3dvcmQ6IHN0cmluZywgdG9rZW46IHN0cmluZykge1xuICAgIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGhhc2hNYXN0ZXJQYXNzd29yZEZvclJlcHJvbXB0aW5nKHBhc3N3b3JkKTtcbiAgICBhd2FpdCBTZXNzaW9uU3RvcmFnZS5zYXZlU2Vzc2lvbih0b2tlbiwgcGFzc3dvcmRIYXNoKTtcbiAgICBhd2FpdCBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MT0NLX1JFQVNPTik7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcInVubG9ja1wiLCB0b2tlbiwgcGFzc3dvcmRIYXNoIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9jayhyZWFzb24/OiBzdHJpbmcpIHtcbiAgICBhd2FpdCBTZXNzaW9uU3RvcmFnZS5jbGVhclNlc3Npb24oKTtcbiAgICBpZiAocmVhc29uKSBhd2FpdCBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MT0NLX1JFQVNPTiwgcmVhc29uKTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6IFwibG9ja1wiIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9nb3V0KHJlYXNvbj86IHN0cmluZykge1xuICAgIGF3YWl0IFNlc3Npb25TdG9yYWdlLmNsZWFyU2Vzc2lvbigpO1xuICAgIENhY2hlLmNsZWFyKCk7XG4gICAgaWYgKHJlYXNvbikgYXdhaXQgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTE9DS19SRUFTT04sIHJlYXNvbik7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcImxvZ291dFwiIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gY29uZmlybU1hc3RlclBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBlbnRlcmVkUGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaE1hc3RlclBhc3N3b3JkRm9yUmVwcm9tcHRpbmcocGFzc3dvcmQpO1xuICAgIHJldHVybiBlbnRlcmVkUGFzc3dvcmRIYXNoID09PSBzdGF0ZS5wYXNzd29yZEhhc2g7XG4gIH1cblxuICBjb25zdCBjb250ZXh0VmFsdWU6IFNlc3Npb24gPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICB0b2tlbjogc3RhdGUudG9rZW4sXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyxcbiAgICAgIGlzQXV0aGVudGljYXRlZDogc3RhdGUuaXNBdXRoZW50aWNhdGVkLFxuICAgICAgaXNMb2NrZWQ6IHN0YXRlLmlzTG9ja2VkLFxuICAgICAgYWN0aXZlOiAhc3RhdGUuaXNMb2FkaW5nICYmIHN0YXRlLmlzQXV0aGVudGljYXRlZCAmJiAhc3RhdGUuaXNMb2NrZWQsXG4gICAgICBjb25maXJtTWFzdGVyUGFzc3dvcmQsXG4gICAgfSksXG4gICAgW3N0YXRlLCBjb25maXJtTWFzdGVyUGFzc3dvcmRdXG4gICk7XG5cbiAgaWYgKHN0YXRlLmlzTG9hZGluZykgcmV0dXJuIGxvYWRpbmdGYWxsYmFjaztcblxuICBjb25zdCBzaG93VW5sb2NrRm9ybSA9IHN0YXRlLmlzTG9ja2VkIHx8ICFzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7XG4gIGNvbnN0IF9jaGlsZHJlbiA9IHN0YXRlLnRva2VuID8gY2hpbGRyZW4gOiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAge3Nob3dVbmxvY2tGb3JtICYmIHVubG9jayA/IDxVbmxvY2tGb3JtIHBlbmRpbmdBY3Rpb249e3BlbmRpbmdBY3Rpb25SZWYuY3VycmVudH0gLz4gOiBfY2hpbGRyZW59XG4gICAgPC9TZXNzaW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNlc3Npb24oKTogU2Vzc2lvbiB7XG4gIGNvbnN0IHNlc3Npb24gPSB1c2VDb250ZXh0KFNlc3Npb25Db250ZXh0KTtcbiAgaWYgKHNlc3Npb24gPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZVNlc3Npb24gbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFNlc3Npb25Qcm92aWRlclwiKTtcbiAgfVxuXG4gIHJldHVybiBzZXNzaW9uO1xufVxuXG5jbGFzcyBMb2NrVmF1bHRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobG9ja1JlYXNvbj86IHN0cmluZykge1xuICAgIHN1cGVyKGxvY2tSZWFzb24pO1xuICB9XG59XG5cbmNsYXNzIExvZ291dFZhdWx0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGxvY2tSZWFzb24/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihsb2NrUmVhc29uKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFjdGlvbiwgQWN0aW9uUGFuZWwsIENsaXBib2FyZCwgRm9ybSwgZ2V0UHJlZmVyZW5jZVZhbHVlcywgSWNvbiwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEZWJ1Z2dpbmdCdWdSZXBvcnRpbmdBY3Rpb25TZWN0aW9uIH0gZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zXCI7XG5pbXBvcnQgeyBMT0NBTF9TVE9SQUdFX0tFWSB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyB1c2VCaXR3YXJkZW4gfSBmcm9tIFwifi9jb250ZXh0L2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgdHJlYXRFcnJvciB9IGZyb20gXCJ+L3V0aWxzL2RlYnVnXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VWYXVsdE1lc3NhZ2VzIGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZVZhdWx0TWVzc2FnZXNcIjtcbmltcG9ydCB7IHVzZUxvY2FsU3RvcmFnZUl0ZW0gfSBmcm9tIFwifi91dGlscy9sb2NhbHN0b3JhZ2VcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIn4vdXRpbHMvcGxhdGZvcm1cIjtcbmltcG9ydCB7IGdldExhYmVsRm9yVGltZW91dFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG50eXBlIFVubG9ja0Zvcm1Qcm9wcyA9IHtcbiAgcGVuZGluZ0FjdGlvbj86IFByb21pc2U8dm9pZD47XG59O1xuXG4vKiogRm9ybSBmb3IgdW5sb2NraW5nIG9yIGxvZ2dpbmcgaW4gdG8gdGhlIEJpdHdhcmRlbiB2YXVsdC4gKi9cbmNvbnN0IFVubG9ja0Zvcm0gPSAoeyBwZW5kaW5nQWN0aW9uID0gUHJvbWlzZS5yZXNvbHZlKCkgfTogVW5sb2NrRm9ybVByb3BzKSA9PiB7XG4gIGNvbnN0IGJpdHdhcmRlbiA9IHVzZUJpdHdhcmRlbigpO1xuICBjb25zdCB7IHVzZXJNZXNzYWdlLCBzZXJ2ZXJNZXNzYWdlLCBzaG91bGRTaG93U2VydmVyIH0gPSB1c2VWYXVsdE1lc3NhZ2VzKCk7XG5cbiAgY29uc3QgW2lzTG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1bmxvY2tFcnJvciwgc2V0VW5sb2NrRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBjb25zdCBbc2hvd1Bhc3N3b3JkLCBzZXRTaG93UGFzc3dvcmRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGFzc3dvcmQsIHNldFBhc3N3b3JkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbG9ja1JlYXNvbiwgeyByZW1vdmU6IGNsZWFyTG9ja1JlYXNvbiB9XSA9IHVzZUxvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTE9DS19SRUFTT04pO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KCkge1xuICAgIGlmIChwYXNzd29yZC5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIGNvbnN0IHRvYXN0ID0gYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkFuaW1hdGVkLCBcIlVubG9ja2luZyBWYXVsdC4uLlwiLCBcIlBsZWFzZSB3YWl0XCIpO1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0VW5sb2NrRXJyb3IodW5kZWZpbmVkKTtcblxuICAgICAgYXdhaXQgcGVuZGluZ0FjdGlvbjtcblxuICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0OiB2YXVsdFN0YXRlIH0gPSBhd2FpdCBiaXR3YXJkZW4uc3RhdHVzKCk7XG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgICBpZiAodmF1bHRTdGF0ZS5zdGF0dXMgPT09IFwidW5hdXRoZW50aWNhdGVkXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBiaXR3YXJkZW4ubG9naW4oKTtcbiAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRpc3BsYXlhYmxlRXJyb3IgPSBgUGxlYXNlIGNoZWNrIHlvdXIgJHtzaG91bGRTaG93U2VydmVyID8gXCJTZXJ2ZXIgVVJMLCBcIiA6IFwiXCJ9QVBJIEtleSBhbmQgU2VjcmV0LmAsXG4gICAgICAgICAgICB0cmVhdGVkRXJyb3IsXG4gICAgICAgICAgfSA9IGdldFVzZWZ1bEVycm9yKGVycm9yLCBwYXNzd29yZCk7XG4gICAgICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIGxvZyBpblwiLCBkaXNwbGF5YWJsZUVycm9yKTtcbiAgICAgICAgICBzZXRVbmxvY2tFcnJvcih0cmVhdGVkRXJyb3IpO1xuICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbG9nIGluXCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgYml0d2FyZGVuLnVubG9jayhwYXNzd29yZCk7XG4gICAgICBhd2FpdCBjbGVhckxvY2tSZWFzb24oKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgeyBkaXNwbGF5YWJsZUVycm9yID0gXCJQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFsc1wiLCB0cmVhdGVkRXJyb3IgfSA9IGdldFVzZWZ1bEVycm9yKGVycm9yLCBwYXNzd29yZCk7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgXCJGYWlsZWQgdG8gdW5sb2NrIHZhdWx0XCIsIGRpc3BsYXlhYmxlRXJyb3IpO1xuICAgICAgc2V0VW5sb2NrRXJyb3IodHJlYXRlZEVycm9yKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gdW5sb2NrIHZhdWx0XCIsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29weVVubG9ja0Vycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdW5sb2NrRXJyb3IpIHJldHVybjtcbiAgICBhd2FpdCBDbGlwYm9hcmQuY29weSh1bmxvY2tFcnJvcik7XG4gICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLlN1Y2Nlc3MsIFwiRXJyb3IgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcbiAgfTtcblxuICBsZXQgUGFzc3dvcmRGaWVsZCA9IEZvcm0uUGFzc3dvcmRGaWVsZDtcbiAgbGV0IHBhc3N3b3JkRmllbGRJZCA9IFwicGFzc3dvcmRcIjtcbiAgaWYgKHNob3dQYXNzd29yZCkge1xuICAgIFBhc3N3b3JkRmllbGQgPSBGb3JtLlRleHRGaWVsZDtcbiAgICBwYXNzd29yZEZpZWxkSWQgPSBcInBsYWluUGFzc3dvcmRcIjtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEZvcm1cbiAgICAgIGFjdGlvbnM9e1xuICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgeyFpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPEFjdGlvbi5TdWJtaXRGb3JtIGljb249e0ljb24uTG9ja1VubG9ja2VkfSB0aXRsZT1cIlVubG9ja1wiIG9uU3VibWl0PXtvblN1Ym1pdH0gLz5cbiAgICAgICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgICAgIGljb249e3Nob3dQYXNzd29yZCA/IEljb24uRXllRGlzYWJsZWQgOiBJY29uLkV5ZX1cbiAgICAgICAgICAgICAgICB0aXRsZT17c2hvd1Bhc3N3b3JkID8gXCJIaWRlIFBhc3N3b3JkXCIgOiBcIlNob3cgUGFzc3dvcmRcIn1cbiAgICAgICAgICAgICAgICBvbkFjdGlvbj17KCkgPT4gc2V0U2hvd1Bhc3N3b3JkKChwcmV2KSA9PiAhcHJldil9XG4gICAgICAgICAgICAgICAgc2hvcnRjdXQ9e3sgbWFjT1M6IHsga2V5OiBcImVcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIl0gfSwgd2luZG93czogeyBrZXk6IFwiZVwiLCBtb2RpZmllcnM6IFtcImFsdFwiXSB9IH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHshIXVubG9ja0Vycm9yICYmIChcbiAgICAgICAgICAgIDxBY3Rpb25cbiAgICAgICAgICAgICAgb25BY3Rpb249e2NvcHlVbmxvY2tFcnJvcn1cbiAgICAgICAgICAgICAgdGl0bGU9XCJDb3B5IExhc3QgRXJyb3JcIlxuICAgICAgICAgICAgICBpY29uPXtJY29uLkJ1Z31cbiAgICAgICAgICAgICAgc3R5bGU9e0FjdGlvbi5TdHlsZS5EZXN0cnVjdGl2ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8RGVidWdnaW5nQnVnUmVwb3J0aW5nQWN0aW9uU2VjdGlvbiAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgID5cbiAgICAgIHtzaG91bGRTaG93U2VydmVyICYmIDxGb3JtLkRlc2NyaXB0aW9uIHRpdGxlPVwiU2VydmVyIFVSTFwiIHRleHQ9e3NlcnZlck1lc3NhZ2V9IC8+fVxuICAgICAgPEZvcm0uRGVzY3JpcHRpb24gdGl0bGU9XCJWYXVsdCBTdGF0dXNcIiB0ZXh0PXt1c2VyTWVzc2FnZX0gLz5cbiAgICAgIDxQYXNzd29yZEZpZWxkXG4gICAgICAgIGlkPXtwYXNzd29yZEZpZWxkSWR9XG4gICAgICAgIHRpdGxlPVwiTWFzdGVyIFBhc3N3b3JkXCJcbiAgICAgICAgdmFsdWU9e3Bhc3N3b3JkfVxuICAgICAgICBvbkNoYW5nZT17c2V0UGFzc3dvcmR9XG4gICAgICAgIHJlZj17KGZpZWxkKSA9PiBmaWVsZD8uZm9jdXMoKX1cbiAgICAgIC8+XG4gICAgICA8Rm9ybS5EZXNjcmlwdGlvblxuICAgICAgICB0aXRsZT1cIlwiXG4gICAgICAgIHRleHQ9e2BQcmVzcyAke3BsYXRmb3JtID09PSBcIm1hY29zXCIgPyBcIlx1MjMyNVwiIDogXCJBbHRcIn0rRSB0byAke3Nob3dQYXNzd29yZCA/IFwiaGlkZVwiIDogXCJzaG93XCJ9IHBhc3N3b3JkYH1cbiAgICAgIC8+XG4gICAgICB7ISFsb2NrUmVhc29uICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8Rm9ybS5EZXNjcmlwdGlvbiB0aXRsZT1cIlx1MjEzOVx1RkUwRlwiIHRleHQ9e2xvY2tSZWFzb259IC8+XG4gICAgICAgICAgPFRpbWVvdXRJbmZvRGVzY3JpcHRpb24gLz5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvRm9ybT5cbiAgKTtcbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXRJbmZvRGVzY3JpcHRpb24oKSB7XG4gIGNvbnN0IHZhdWx0VGltZW91dE1zID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxBbGxQcmVmZXJlbmNlcz4oKS5yZXByb21wdElnbm9yZUR1cmF0aW9uO1xuICBjb25zdCB0aW1lb3V0TGFiZWwgPSBnZXRMYWJlbEZvclRpbWVvdXRQcmVmZXJlbmNlKHZhdWx0VGltZW91dE1zKTtcblxuICBpZiAoIXRpbWVvdXRMYWJlbCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAoXG4gICAgPEZvcm0uRGVzY3JpcHRpb25cbiAgICAgIHRpdGxlPVwiXCJcbiAgICAgIHRleHQ9e2BUaW1lb3V0IGlzIHNldCB0byAke3RpbWVvdXRMYWJlbH0sIHRoaXMgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gdGhlIGV4dGVuc2lvbiBzZXR0aW5nc2B9XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0VXNlZnVsRXJyb3IoZXJyb3I6IHVua25vd24sIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgdHJlYXRlZEVycm9yID0gdHJlYXRFcnJvcihlcnJvciwgeyBvbWl0U2Vuc2l0aXZlVmFsdWU6IHBhc3N3b3JkIH0pO1xuICBsZXQgZGlzcGxheWFibGVFcnJvcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBpZiAoL0ludmFsaWQgbWFzdGVyIHBhc3N3b3JkL2kudGVzdCh0cmVhdGVkRXJyb3IpKSB7XG4gICAgZGlzcGxheWFibGVFcnJvciA9IFwiSW52YWxpZCBtYXN0ZXIgcGFzc3dvcmRcIjtcbiAgfSBlbHNlIGlmICgvSW52YWxpZCBBUEkgS2V5L2kudGVzdCh0cmVhdGVkRXJyb3IpKSB7XG4gICAgZGlzcGxheWFibGVFcnJvciA9IFwiSW52YWxpZCBDbGllbnQgSUQgb3IgU2VjcmV0XCI7XG4gIH1cbiAgcmV0dXJuIHsgZGlzcGxheWFibGVFcnJvciwgdHJlYXRlZEVycm9yIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVubG9ja0Zvcm07XG4iLCAiLyogUHV0IGNvbnN0YW50cyB0aGF0IHlvdSBmZWVsIGxpa2UgdGhleSBzdGlsbCBkb24ndCBkZXNlcnZlIGEgZmlsZSBvZiB0aGVpciBvd24gaGVyZSAqL1xuXG5pbXBvcnQgeyBJY29uLCBLZXlib2FyZCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IEl0ZW1UeXBlIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VSVkVSX1VSTCA9IFwiaHR0cHM6Ly9iaXR3YXJkZW4uY29tXCI7XG5cbmV4cG9ydCBjb25zdCBTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVIgPSBcIkhJRERFTi1WQUxVRVwiO1xuXG5leHBvcnQgY29uc3QgTE9DQUxfU1RPUkFHRV9LRVkgPSB7XG4gIFBBU1NXT1JEX09QVElPTlM6IFwiYnctZ2VuZXJhdGUtcGFzc3dvcmQtb3B0aW9uc1wiLFxuICBQQVNTV09SRF9PTkVfVElNRV9XQVJOSU5HOiBcImJ3LWdlbmVyYXRlLXBhc3N3b3JkLXdhcm5pbmctYWNjZXB0ZWRcIixcbiAgU0VTU0lPTl9UT0tFTjogXCJzZXNzaW9uVG9rZW5cIixcbiAgUkVQUk9NUFRfSEFTSDogXCJzZXNzaW9uUmVwcm9tcHRIYXNoXCIsXG4gIFNFUlZFUl9VUkw6IFwiY2xpU2VydmVyXCIsXG4gIExBU1RfQUNUSVZJVFlfVElNRTogXCJsYXN0QWN0aXZpdHlUaW1lXCIsXG4gIFZBVUxUX0xPQ0tfUkVBU09OOiBcInZhdWx0TG9ja1JlYXNvblwiLFxuICBWQVVMVF9GQVZPUklURV9PUkRFUjogXCJ2YXVsdEZhdm9yaXRlT3JkZXJcIixcbiAgVkFVTFRfTEFTVF9TVEFUVVM6IFwibGFzdFZhdWx0U3RhdHVzXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgVkFVTFRfTE9DS19NRVNTQUdFUyA9IHtcbiAgVElNRU9VVDogXCJWYXVsdCB0aW1lZCBvdXQgZHVlIHRvIGluYWN0aXZpdHlcIixcbiAgTUFOVUFMOiBcIk1hbnVhbGx5IGxvY2tlZCBieSB0aGUgdXNlclwiLFxuICBTWVNURU1fTE9DSzogXCJTY3JlZW4gd2FzIGxvY2tlZFwiLFxuICBTWVNURU1fU0xFRVA6IFwiU3lzdGVtIHdlbnQgdG8gc2xlZXBcIixcbiAgQ0xJX1VQREFURUQ6IFwiQml0d2FyZGVuIGhhcyBiZWVuIHVwZGF0ZWQuIFBsZWFzZSBsb2dpbiBhZ2Fpbi5cIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBTSE9SVENVVF9LRVlfU0VRVUVOQ0U6IEtleWJvYXJkLktleUVxdWl2YWxlbnRbXSA9IFtcbiAgXCIxXCIsXG4gIFwiMlwiLFxuICBcIjNcIixcbiAgXCI0XCIsXG4gIFwiNVwiLFxuICBcIjZcIixcbiAgXCI3XCIsXG4gIFwiOFwiLFxuICBcIjlcIixcbiAgXCJiXCIsXG4gIFwiY1wiLFxuICBcImRcIixcbiAgXCJlXCIsXG4gIFwiZlwiLFxuICBcImdcIixcbiAgXCJoXCIsXG4gIFwiaVwiLFxuICBcImpcIixcbiAgXCJrXCIsXG4gIFwibFwiLFxuICBcIm1cIixcbiAgXCJuXCIsXG4gIFwib1wiLFxuICBcInBcIixcbiAgXCJxXCIsXG4gIFwiclwiLFxuICBcInNcIixcbiAgXCJ0XCIsXG4gIFwidVwiLFxuICBcInZcIixcbiAgXCJ3XCIsXG4gIFwieFwiLFxuICBcInlcIixcbiAgXCJ6XCIsXG4gIFwiK1wiLFxuICBcIi1cIixcbiAgXCIuXCIsXG4gIFwiLFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEZPTERFUl9PUFRJT05TID0ge1xuICBBTEw6IFwiYWxsXCIsXG4gIE5PX0ZPTERFUjogXCJuby1mb2xkZXJcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBDQUNIRV9LRVlTID0ge1xuICBJVjogXCJpdlwiLFxuICBWQVVMVDogXCJ2YXVsdFwiLFxuICBDVVJSRU5UX0ZPTERFUl9JRDogXCJjdXJyZW50Rm9sZGVySWRcIixcbiAgU0VORF9UWVBFX0ZJTFRFUjogXCJzZW5kVHlwZUZpbHRlclwiLFxuICBDTElfVkVSU0lPTjogXCJjbGlWZXJzaW9uXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgSVRFTV9UWVBFX1RPX0lDT05fTUFQOiBSZWNvcmQ8SXRlbVR5cGUsIEljb24+ID0ge1xuICBbSXRlbVR5cGUuTE9HSU5dOiBJY29uLkdsb2JlLFxuICBbSXRlbVR5cGUuQ0FSRF06IEljb24uQ3JlZGl0Q2FyZCxcbiAgW0l0ZW1UeXBlLklERU5USVRZXTogSWNvbi5QZXJzb24sXG4gIFtJdGVtVHlwZS5OT1RFXTogSWNvbi5Eb2N1bWVudCxcbiAgW0l0ZW1UeXBlLlNTSF9LRVldOiBJY29uLktleSxcbn07XG4iLCAiZXhwb3J0IGludGVyZmFjZSBJdGVtIHtcbiAgb2JqZWN0OiBcIml0ZW1cIjtcbiAgaWQ6IHN0cmluZztcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyB8IG51bGw7XG4gIGZvbGRlcklkOiBzdHJpbmcgfCBudWxsO1xuICB0eXBlOiBJdGVtVHlwZTtcbiAgcmVwcm9tcHQ6IFJlcHJvbXB0O1xuICBuYW1lOiBzdHJpbmc7XG4gIG5vdGVzOiBzdHJpbmcgfCBudWxsO1xuICBmYXZvcml0ZTogYm9vbGVhbjtcbiAgbG9naW4/OiBMb2dpbjtcbiAgY29sbGVjdGlvbklkczogc3RyaW5nW107XG4gIHJldmlzaW9uRGF0ZTogc3RyaW5nO1xuICBjcmVhdGlvbkRhdGU6IHN0cmluZztcbiAgZGVsZXRlZERhdGU6IHN0cmluZyB8IG51bGw7XG4gIGlkZW50aXR5PzogSWRlbnRpdHk7XG4gIGZpZWxkcz86IEZpZWxkW107XG4gIHBhc3N3b3JkSGlzdG9yeT86IFBhc3N3b3JkSGlzdG9yeVtdO1xuICBzZWN1cmVOb3RlPzogU2VjdXJlTm90ZTtcbiAgY2FyZD86IENhcmQ7XG4gIHNzaEtleT86IFNzaEtleTtcbn1cblxuZXhwb3J0IGVudW0gSXRlbVR5cGUge1xuICBMT0dJTiA9IDEsXG4gIE5PVEUgPSAyLFxuICBDQVJEID0gMyxcbiAgSURFTlRJVFkgPSA0LFxuICBTU0hfS0VZID0gNSxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb2xkZXIge1xuICBvYmplY3Q6IFwiZm9sZGVyXCI7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IElERU5USVRZX1RJVExFUyA9IHtcbiAgTVI6IFwiTXJcIixcbiAgTVJTOiBcIk1yc1wiLFxuICBNUzogXCJNc1wiLFxuICBNWDogXCJNeFwiLFxuICBEUjogXCJEclwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgSWRlbnRpdHlUaXRsZSA9ICh0eXBlb2YgSURFTlRJVFlfVElUTEVTKVtrZXlvZiB0eXBlb2YgSURFTlRJVFlfVElUTEVTXTtcblxuZXhwb3J0IGludGVyZmFjZSBJZGVudGl0eSB7XG4gIHRpdGxlOiBJZGVudGl0eVRpdGxlIHwgbnVsbDtcbiAgZmlyc3ROYW1lOiBzdHJpbmcgfCBudWxsO1xuICBtaWRkbGVOYW1lOiBzdHJpbmcgfCBudWxsO1xuICBsYXN0TmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgYWRkcmVzczE6IHN0cmluZyB8IG51bGw7XG4gIGFkZHJlc3MyOiBzdHJpbmcgfCBudWxsO1xuICBhZGRyZXNzMzogc3RyaW5nIHwgbnVsbDtcbiAgY2l0eTogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdGU6IHN0cmluZyB8IG51bGw7XG4gIHBvc3RhbENvZGU6IHN0cmluZyB8IG51bGw7XG4gIGNvdW50cnk6IHN0cmluZyB8IG51bGw7XG4gIGNvbXBhbnk6IHN0cmluZyB8IG51bGw7XG4gIGVtYWlsOiBzdHJpbmcgfCBudWxsO1xuICBwaG9uZTogc3RyaW5nIHwgbnVsbDtcbiAgc3NuOiBzdHJpbmcgfCBudWxsO1xuICB1c2VybmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcGFzc3BvcnROdW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIGxpY2Vuc2VOdW1iZXI6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBjb25zdCBDQVJEX0JSQU5EUyA9IHtcbiAgVklTQTogXCJWaXNhXCIsXG4gIE1BU1RFUkNBUkQ6IFwiTWFzdGVyY2FyZFwiLFxuICBBTUVYOiBcIkFtZXhcIixcbiAgRElTQ09WRVI6IFwiRGlzY292ZXJcIixcbiAgRElORVJTX0NMVUI6IFwiRGluZXJzIENsdWJcIixcbiAgSkNCOiBcIkpDQlwiLFxuICBNQUVTVFJPOiBcIk1hZXN0cm9cIixcbiAgVU5JT05fUEFZOiBcIlVuaW9uUGF5XCIsXG4gIFJVX1BBWTogXCJSdVBheVwiLFxuICBPVEhFUjogXCJPdGhlclwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgQ2FyZEJyYW5kID0gKHR5cGVvZiBDQVJEX0JSQU5EUylba2V5b2YgdHlwZW9mIENBUkRfQlJBTkRTXTtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkIHtcbiAgY2FyZGhvbGRlck5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGJyYW5kOiBDYXJkQnJhbmQgfCBudWxsO1xuICBudW1iZXI6IHN0cmluZyB8IG51bGw7XG4gIGV4cE1vbnRoOiBzdHJpbmcgfCBudWxsO1xuICBleHBZZWFyOiBzdHJpbmcgfCBudWxsO1xuICBjb2RlOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNzaEtleSB7XG4gIHByaXZhdGVLZXk6IHN0cmluZztcbiAgcHVibGljS2V5OiBzdHJpbmc7XG4gIGtleUZpbmdlcnByaW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIEZpZWxkVHlwZSB7XG4gIFRFWFQgPSAwLFxuICBISURERU4gPSAxLFxuICBCT09MRUFOID0gMixcbiAgTElOS0VEID0gMyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZCB7XG4gIG5hbWU6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgdHlwZTogRmllbGRUeXBlO1xuICBsaW5rZWRJZDogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dpbiB7XG4gIHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBwYXNzd29yZDogc3RyaW5nIHwgbnVsbDtcbiAgdG90cDogc3RyaW5nIHwgbnVsbDtcbiAgcGFzc3dvcmRSZXZpc2lvbkRhdGU6IHN0cmluZyB8IG51bGw7XG4gIHVyaXM/OiBVcmlzW107XG4gIGZpZG8yQ3JlZGVudGlhbHM/OiBGaWRvMkNyZWRlbnRpYWxbXTtcbn1cblxuZXhwb3J0IGVudW0gVXJpTWF0Y2gge1xuICBCQVNFX0RPTUFJTiA9IDAsXG4gIEhPU1QgPSAxLFxuICBTVEFSVFNfV0lUSCA9IDIsXG4gIEVYQUNUID0gMyxcbiAgUkVHVUxBUl9FWFBSRVNTSU9OID0gNCxcbiAgTkVWRVIgPSA1LFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVyaXMge1xuICBtYXRjaDogVXJpTWF0Y2ggfCBudWxsO1xuICB1cmk6IHN0cmluZyB8IG51bGw7XG59XG5cbmludGVyZmFjZSBGaWRvMkNyZWRlbnRpYWwge1xuICBjcmVkZW50aWFsSWQ6IHN0cmluZztcbiAga2V5VHlwZTogc3RyaW5nO1xuICBrZXlBbGdvcml0aG06IHN0cmluZztcbiAga2V5Q3VydmU6IHN0cmluZztcbiAga2V5VmFsdWU6IHN0cmluZztcbiAgcnBJZDogc3RyaW5nO1xuICB1c2VySGFuZGxlOiBzdHJpbmc7XG4gIHVzZXJOYW1lOiBzdHJpbmc7XG4gIGNvdW50ZXI6IHN0cmluZztcbiAgcnBOYW1lOiBzdHJpbmc7XG4gIHVzZXJEaXNwbGF5TmFtZTogc3RyaW5nO1xuICBkaXNjb3ZlcmFibGU6IHN0cmluZztcbiAgY3JlYXRpb25EYXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFzc3dvcmRIaXN0b3J5IHtcbiAgbGFzdFVzZWREYXRlOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJlTm90ZSB7XG4gIHR5cGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGVudW0gUmVwcm9tcHQge1xuICBOTyA9IDAsXG4gIFJFUVVJUkVEID0gMSxcbn1cblxuZXhwb3J0IHR5cGUgVmF1bHQgPSB7XG4gIGl0ZW1zOiBJdGVtW107XG4gIGZvbGRlcnM6IEZvbGRlcltdO1xufTtcbiIsICJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBQcm9wc1dpdGhDaGlsZHJlbiwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQml0d2FyZGVuIH0gZnJvbSBcIn4vYXBpL2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgTG9hZGluZ0ZhbGxiYWNrIH0gZnJvbSBcIn4vY29tcG9uZW50cy9Mb2FkaW5nRmFsbGJhY2tcIjtcbmltcG9ydCBUcm91Ymxlc2hvb3RpbmdHdWlkZSBmcm9tIFwifi9jb21wb25lbnRzL1Ryb3VibGVzaG9vdGluZ0d1aWRlXCI7XG5pbXBvcnQgeyBJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5pbXBvcnQgdXNlT25jZUVmZmVjdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VPbmNlRWZmZWN0XCI7XG5cbmNvbnN0IEJpdHdhcmRlbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0PEJpdHdhcmRlbiB8IG51bGw+KG51bGwpO1xuXG5leHBvcnQgdHlwZSBCaXR3YXJkZW5Qcm92aWRlclByb3BzID0gUHJvcHNXaXRoQ2hpbGRyZW48e1xuICBsb2FkaW5nRmFsbGJhY2s/OiBSZWFjdE5vZGU7XG59PjtcblxuZXhwb3J0IGNvbnN0IEJpdHdhcmRlblByb3ZpZGVyID0gKHsgY2hpbGRyZW4sIGxvYWRpbmdGYWxsYmFjayA9IDxMb2FkaW5nRmFsbGJhY2sgLz4gfTogQml0d2FyZGVuUHJvdmlkZXJQcm9wcykgPT4ge1xuICBjb25zdCBbYml0d2FyZGVuLCBzZXRCaXR3YXJkZW5dID0gdXNlU3RhdGU8Qml0d2FyZGVuPigpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPEVycm9yPigpO1xuXG4gIHVzZU9uY2VFZmZlY3QoKCkgPT4ge1xuICAgIHZvaWQgbmV3IEJpdHdhcmRlbigpLmluaXRpYWxpemUoKS50aGVuKHNldEJpdHdhcmRlbikuY2F0Y2goaGFuZGxlQndJbml0RXJyb3IpO1xuICB9KTtcblxuICBmdW5jdGlvbiBoYW5kbGVCd0luaXRFcnJvcihlcnJvcjogRXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlcnJvcikgcmV0dXJuIDxUcm91Ymxlc2hvb3RpbmdHdWlkZSBlcnJvcj17ZXJyb3J9IC8+O1xuICBpZiAoIWJpdHdhcmRlbikgcmV0dXJuIGxvYWRpbmdGYWxsYmFjaztcblxuICByZXR1cm4gPEJpdHdhcmRlbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2JpdHdhcmRlbn0+e2NoaWxkcmVufTwvQml0d2FyZGVuQ29udGV4dC5Qcm92aWRlcj47XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQml0d2FyZGVuID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChCaXR3YXJkZW5Db250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUJpdHdhcmRlbiBtdXN0IGJlIHVzZWQgd2l0aGluIGEgQml0d2FyZGVuUHJvdmlkZXJcIik7XG4gIH1cblxuICByZXR1cm4gY29udGV4dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJpdHdhcmRlbkNvbnRleHQ7XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQsIGdldFByZWZlcmVuY2VWYWx1ZXMsIExvY2FsU3RvcmFnZSwgb3Blbiwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGV4ZWNhLCBFeGVjYUNoaWxkUHJvY2VzcywgRXhlY2FFcnJvciwgRXhlY2FSZXR1cm5WYWx1ZSB9IGZyb20gXCJleGVjYVwiO1xuaW1wb3J0IHsgZXhpc3RzU3luYywgdW5saW5rU3luYywgd3JpdGVGaWxlU3luYywgYWNjZXNzU3luYywgY29uc3RhbnRzLCBjaG1vZFN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfS0VZLCBERUZBVUxUX1NFUlZFUl9VUkwsIENBQ0hFX0tFWVMgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgVmF1bHRTdGF0ZSwgVmF1bHRTdGF0dXMgfSBmcm9tIFwifi90eXBlcy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnMgfSBmcm9tIFwifi90eXBlcy9wYXNzd29yZHNcIjtcbmltcG9ydCB7IEZvbGRlciwgSXRlbSwgSXRlbVR5cGUsIExvZ2luIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IGdldFBhc3N3b3JkR2VuZXJhdGluZ0FyZ3MgfSBmcm9tIFwifi91dGlscy9wYXNzd29yZHNcIjtcbmltcG9ydCB7IGdldFNlcnZlclVybFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHtcbiAgRW5zdXJlQ2xpQmluRXJyb3IsXG4gIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IsXG4gIE1hbnVhbGx5VGhyb3duRXJyb3IsXG4gIE5vdExvZ2dlZEluRXJyb3IsXG4gIFByZW1pdW1GZWF0dXJlRXJyb3IsXG4gIFNlbmRJbnZhbGlkUGFzc3dvcmRFcnJvcixcbiAgU2VuZE5lZWRzUGFzc3dvcmRFcnJvcixcbiAgdHJ5RXhlYyxcbiAgVmF1bHRJc0xvY2tlZEVycm9yLFxufSBmcm9tIFwifi91dGlscy9lcnJvcnNcIjtcbmltcG9ydCB7IGpvaW4sIGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2htb2QsIHJlbmFtZSwgcm0gfSBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGRlY29tcHJlc3NGaWxlLCByZW1vdmVGaWxlc1RoYXRTdGFydFdpdGgsIHVubGlua0FsbFN5bmMsIHdhaXRGb3JGaWxlQXZhaWxhYmxlIH0gZnJvbSBcIn4vdXRpbHMvZnNcIjtcbmltcG9ydCB7IGRvd25sb2FkIH0gZnJvbSBcIn4vdXRpbHMvbmV0d29ya1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBSZWNlaXZlZFNlbmQsIFNlbmQsIFNlbmRDcmVhdGVQYXlsb2FkLCBTZW5kVHlwZSB9IGZyb20gXCJ+L3R5cGVzL3NlbmRcIjtcbmltcG9ydCB7IHByZXBhcmVTZW5kUGF5bG9hZCB9IGZyb20gXCJ+L2FwaS9iaXR3YXJkZW4uaGVscGVyc1wiO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tIFwifi91dGlscy9jYWNoZVwiO1xuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwifi91dGlscy9wbGF0Zm9ybVwiO1xuXG50eXBlIEVudiA9IHtcbiAgQklUV0FSREVOQ0xJX0FQUERBVEFfRElSOiBzdHJpbmc7XG4gIEJXX0NMSUVOVFNFQ1JFVDogc3RyaW5nO1xuICBCV19DTElFTlRJRDogc3RyaW5nO1xuICBQQVRIOiBzdHJpbmc7XG4gIE5PREVfRVhUUkFfQ0FfQ0VSVFM/OiBzdHJpbmc7XG4gIEJXX1NFU1NJT04/OiBzdHJpbmc7XG59O1xuXG50eXBlIEFjdGlvbkxpc3RlbmVycyA9IHtcbiAgbG9naW4/OiAoKSA9PiBNYXliZVByb21pc2U8dm9pZD47XG4gIGxvZ291dD86IChyZWFzb24/OiBzdHJpbmcpID0+IE1heWJlUHJvbWlzZTx2b2lkPjtcbiAgbG9jaz86IChyZWFzb24/OiBzdHJpbmcpID0+IE1heWJlUHJvbWlzZTx2b2lkPjtcbiAgdW5sb2NrPzogKHBhc3N3b3JkOiBzdHJpbmcsIHNlc3Npb25Ub2tlbjogc3RyaW5nKSA9PiBNYXliZVByb21pc2U8dm9pZD47XG59O1xuXG50eXBlIEFjdGlvbkxpc3RlbmVyc01hcDxUIGV4dGVuZHMga2V5b2YgQWN0aW9uTGlzdGVuZXJzID0ga2V5b2YgQWN0aW9uTGlzdGVuZXJzPiA9IE1hcDxULCBTZXQ8QWN0aW9uTGlzdGVuZXJzW1RdPj47XG5cbnR5cGUgTWF5YmVFcnJvcjxUID0gdW5kZWZpbmVkPiA9IHsgcmVzdWx0OiBUOyBlcnJvcj86IHVuZGVmaW5lZCB9IHwgeyByZXN1bHQ/OiB1bmRlZmluZWQ7IGVycm9yOiBNYW51YWxseVRocm93bkVycm9yIH07XG5cbnR5cGUgRXhlY1Byb3BzID0ge1xuICAvKiogUmVzZXQgdGhlIHRpbWUgb2YgdGhlIGxhc3QgY29tbWFuZCB0aGF0IGFjY2Vzc2VkIGRhdGEgb3IgbW9kaWZpZWQgdGhlIHZhdWx0LCB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgdmF1bHQgdGltZWQgb3V0ICovXG4gIHJlc2V0VmF1bHRUaW1lb3V0OiBib29sZWFuO1xuICBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXI7XG4gIGlucHV0Pzogc3RyaW5nO1xufTtcblxudHlwZSBMb2NrT3B0aW9ucyA9IHtcbiAgLyoqIFRoZSByZWFzb24gZm9yIGxvY2tpbmcgdGhlIHZhdWx0ICovXG4gIHJlYXNvbj86IHN0cmluZztcbiAgY2hlY2tWYXVsdFN0YXR1cz86IGJvb2xlYW47XG4gIC8qKiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgYmVmb3JlIHRoZSBvcGVyYXRpb24gaXMgZmluaXNoZWQgKG9wdGltaXN0aWMpICovXG4gIGltbWVkaWF0ZT86IGJvb2xlYW47XG59O1xuXG50eXBlIExvZ291dE9wdGlvbnMgPSB7XG4gIC8qKiBUaGUgcmVhc29uIGZvciBsb2NraW5nIHRoZSB2YXVsdCAqL1xuICByZWFzb24/OiBzdHJpbmc7XG4gIC8qKiBUaGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQgYmVmb3JlIHRoZSBvcGVyYXRpb24gaXMgZmluaXNoZWQgKG9wdGltaXN0aWMpICovXG4gIGltbWVkaWF0ZT86IGJvb2xlYW47XG59O1xuXG50eXBlIFJlY2VpdmVTZW5kT3B0aW9ucyA9IHtcbiAgc2F2ZVBhdGg/OiBzdHJpbmc7XG4gIHBhc3N3b3JkPzogc3RyaW5nO1xufTtcblxudHlwZSBDcmVhdGVMb2dpbkl0ZW1PcHRpb25zID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHVzZXJuYW1lPzogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBmb2xkZXJJZDogc3RyaW5nIHwgbnVsbDtcbiAgdXJpPzogc3RyaW5nO1xufTtcblxuY29uc3QgeyBzdXBwb3J0UGF0aCB9ID0gZW52aXJvbm1lbnQ7XG5cbmNvbnN0IFx1MDM5NCA9IFwiNFwiOyAvLyBjaGFuZ2luZyB0aGlzIGZvcmNlcyBhIG5ldyBiaW4gZG93bmxvYWQgZm9yIHBlb3BsZSB0aGF0IGhhZCBhIGZhaWxlZCBvbmVcbmNvbnN0IEJpbkRvd25sb2FkTG9nZ2VyID0gKCgpID0+IHtcbiAgLyogVGhlIGlkZWEgb2YgdGhpcyBsb2dnZXIgaXMgdG8gd3JpdGUgYSBsb2cgZmlsZSB3aGVuIHRoZSBiaW4gZG93bmxvYWQgZmFpbHMsIHNvIHRoYXQgd2UgY2FuIGxldCB0aGUgZXh0ZW5zaW9uIGNyYXNoLFxuICAgYnV0IGZhbGxiYWNrIHRvIHRoZSBsb2NhbCBjbGkgcGF0aCBpbiB0aGUgbmV4dCBsYXVuY2guIFRoaXMgYWxsb3dzIHRoZSBlcnJvciB0byBiZSByZXBvcnRlZCBpbiB0aGUgaXNzdWVzIGRhc2hib2FyZC4gSXQgdXNlcyBmaWxlcyB0byBrZWVwIGl0IHN5bmNocm9ub3VzLCBhcyBpdCdzIG5lZWRlZCBpbiB0aGUgY29uc3RydWN0b3IuXG4gICBBbHRob3VnaCwgdGhlIHBsYW4gaXMgdG8gZGlzY29udGludWUgdGhpcyBtZXRob2QsIGlmIHRoZXJlJ3MgYSBiZXR0ZXIgd2F5IG9mIGxvZ2dpbmcgZXJyb3JzIGluIHRoZSBpc3N1ZXMgZGFzaGJvYXJkXG4gICBvciB0aGVyZSBhcmUgbm8gY3Jhc2hlcyByZXBvcnRlZCB3aXRoIHRoZSBiaW4gZG93bmxvYWQgYWZ0ZXIgc29tZSB0aW1lLiAqL1xuICBjb25zdCBmaWxlUGF0aCA9IGpvaW4oc3VwcG9ydFBhdGgsIGBidy1iaW4tZG93bmxvYWQtZXJyb3ItJHtcdTAzOTR9LmxvZ2ApO1xuICByZXR1cm4ge1xuICAgIGxvZ0Vycm9yOiAoZXJyb3I6IGFueSkgPT4gdHJ5RXhlYygoKSA9PiB3cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBlcnJvcj8ubWVzc2FnZSA/PyBcIlVuZXhwZWN0ZWQgZXJyb3JcIikpLFxuICAgIGNsZWFyRXJyb3I6ICgpID0+IHRyeUV4ZWMoKCkgPT4gdW5saW5rU3luYyhmaWxlUGF0aCkpLFxuICAgIGhhc0Vycm9yOiAoKSA9PiB0cnlFeGVjKCgpID0+IGV4aXN0c1N5bmMoZmlsZVBhdGgpLCBmYWxzZSksXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgY2xpSW5mbyA9IHtcbiAgdmVyc2lvbjogXCIyMDI1LjIuMFwiLFxuICBnZXQgc2hhMjU2KCkge1xuICAgIGlmIChwbGF0Zm9ybSA9PT0gXCJ3aW5kb3dzXCIpIHJldHVybiBcIjMzYTEzMTAxN2FjOWM5OWQ3MjFlNDMwYTg2ZTkyOTM4MzMxNGQzZjkxYzlmMmZiZjQxM2Q4NzI1NjU2NTRjMThcIjtcbiAgICByZXR1cm4gXCJmYWRlNTEwMTJhNDYwMTFjMDE2YTJlNWFlZTJmMmU1MzRjMWVkMDc4ZTQ5ZDExNzhhNjllMjg4OWQyODEyYTk2XCI7XG4gIH0sXG4gIGRvd25sb2FkUGFnZTogXCJodHRwczovL2dpdGh1Yi5jb20vYml0d2FyZGVuL2NsaWVudHMvcmVsZWFzZXNcIixcbiAgcGF0aDoge1xuICAgIGdldCBkb3dubG9hZGVkQmluKCkge1xuICAgICAgcmV0dXJuIGpvaW4oc3VwcG9ydFBhdGgsIGNsaUluZm8uYmluRmlsZW5hbWVWZXJzaW9uZWQpO1xuICAgIH0sXG4gICAgZ2V0IGluc3RhbGxlZEJpbigpIHtcbiAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IGl0IHdhcyBpbnN0YWxsZWQgdXNpbmcgQ2hvY29sYXRleSwgaWYgbm90LCBpdCdzIGhhcmQgdG8gbWFrZSBhIGdvb2QgZ3Vlc3MuXG4gICAgICBpZiAocGxhdGZvcm0gPT09IFwid2luZG93c1wiKSByZXR1cm4gXCJDOlxcXFxQcm9ncmFtRGF0YVxcXFxjaG9jb2xhdGV5XFxcXGJpblxcXFxidy5leGVcIjtcbiAgICAgIHJldHVybiBwcm9jZXNzLmFyY2ggPT09IFwiYXJtNjRcIiA/IFwiL29wdC9ob21lYnJldy9iaW4vYndcIiA6IFwiL3Vzci9sb2NhbC9iaW4vYndcIjtcbiAgICB9LFxuICAgIGdldCBiaW4oKSB7XG4gICAgICByZXR1cm4gIUJpbkRvd25sb2FkTG9nZ2VyLmhhc0Vycm9yKCkgPyB0aGlzLmRvd25sb2FkZWRCaW4gOiB0aGlzLmluc3RhbGxlZEJpbjtcbiAgICB9LFxuICB9LFxuICBnZXQgYmluRmlsZW5hbWUoKSB7XG4gICAgcmV0dXJuIHBsYXRmb3JtID09PSBcIndpbmRvd3NcIiA/IFwiYncuZXhlXCIgOiBcImJ3XCI7XG4gIH0sXG4gIGdldCBiaW5GaWxlbmFtZVZlcnNpb25lZCgpIHtcbiAgICBjb25zdCBuYW1lID0gYGJ3LSR7dGhpcy52ZXJzaW9ufWA7XG4gICAgcmV0dXJuIHBsYXRmb3JtID09PSBcIndpbmRvd3NcIiA/IGAke25hbWV9LmV4ZWAgOiBgJHtuYW1lfWA7XG4gIH0sXG4gIGdldCBkb3dubG9hZFVybCgpIHtcbiAgICBsZXQgYXJjaFN1ZmZpeCA9IFwiXCI7XG4gICAgaWYgKHBsYXRmb3JtID09PSBcIm1hY29zXCIpIHtcbiAgICAgIGFyY2hTdWZmaXggPSBwcm9jZXNzLmFyY2ggPT09IFwiYXJtNjRcIiA/IFwiLWFybTY0XCIgOiBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBgJHt0aGlzLmRvd25sb2FkUGFnZX0vZG93bmxvYWQvY2xpLXYke3RoaXMudmVyc2lvbn0vYnctJHtwbGF0Zm9ybX0ke2FyY2hTdWZmaXh9LSR7dGhpcy52ZXJzaW9ufS56aXBgO1xuICB9LFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNsYXNzIEJpdHdhcmRlbiB7XG4gIHByaXZhdGUgZW52OiBFbnY7XG4gIHByaXZhdGUgaW5pdFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gIHByaXZhdGUgdGVtcFNlc3Npb25Ub2tlbj86IHN0cmluZztcbiAgcHJpdmF0ZSBhY3Rpb25MaXN0ZW5lcnM6IEFjdGlvbkxpc3RlbmVyc01hcCA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBwcmVmZXJlbmNlcyA9IGdldFByZWZlcmVuY2VWYWx1ZXM8UHJlZmVyZW5jZXM+KCk7XG4gIHByaXZhdGUgY2xpUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIHRvYXN0SW5zdGFuY2U6IFRvYXN0IHwgdW5kZWZpbmVkO1xuICB3YXNDbGlVcGRhdGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IodG9hc3RJbnN0YW5jZT86IFRvYXN0KSB7XG4gICAgY29uc3QgeyBjbGlQYXRoOiBjbGlQYXRoUHJlZmVyZW5jZSwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgc2VydmVyQ2VydHNQYXRoIH0gPSB0aGlzLnByZWZlcmVuY2VzO1xuICAgIGNvbnN0IHNlcnZlclVybCA9IGdldFNlcnZlclVybFByZWZlcmVuY2UoKTtcblxuICAgIHRoaXMudG9hc3RJbnN0YW5jZSA9IHRvYXN0SW5zdGFuY2U7XG4gICAgdGhpcy5jbGlQYXRoID0gY2xpUGF0aFByZWZlcmVuY2UgfHwgY2xpSW5mby5wYXRoLmJpbjtcbiAgICB0aGlzLmVudiA9IHtcbiAgICAgIEJJVFdBUkRFTkNMSV9BUFBEQVRBX0RJUjogc3VwcG9ydFBhdGgsXG4gICAgICBCV19DTElFTlRTRUNSRVQ6IGNsaWVudFNlY3JldC50cmltKCksXG4gICAgICBCV19DTElFTlRJRDogY2xpZW50SWQudHJpbSgpLFxuICAgICAgUEFUSDogZGlybmFtZShwcm9jZXNzLmV4ZWNQYXRoKSxcbiAgICAgIC4uLihzZXJ2ZXJVcmwgJiYgc2VydmVyQ2VydHNQYXRoID8geyBOT0RFX0VYVFJBX0NBX0NFUlRTOiBzZXJ2ZXJDZXJ0c1BhdGggfSA6IHt9KSxcbiAgICB9O1xuXG4gICAgdGhpcy5pbml0UHJvbWlzZSA9IChhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUNsaUJpbmFyeSgpO1xuICAgICAgdm9pZCB0aGlzLnJldHJpZXZlQW5kQ2FjaGVDbGlWZXJzaW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmNoZWNrU2VydmVyVXJsKHNlcnZlclVybCk7XG4gICAgfSkoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlQ2xpQmluYXJ5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmNoZWNrQ2xpQmluSXNSZWFkeSh0aGlzLmNsaVBhdGgpKSByZXR1cm47XG4gICAgaWYgKHRoaXMuY2xpUGF0aCA9PT0gdGhpcy5wcmVmZXJlbmNlcy5jbGlQYXRoIHx8IHRoaXMuY2xpUGF0aCA9PT0gY2xpSW5mby5wYXRoLmluc3RhbGxlZEJpbikge1xuICAgICAgdGhyb3cgbmV3IEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IoYEJpdHdhcmRlbiBDTEkgbm90IGZvdW5kIGF0ICR7dGhpcy5jbGlQYXRofWApO1xuICAgIH1cbiAgICBpZiAoQmluRG93bmxvYWRMb2dnZXIuaGFzRXJyb3IoKSkgQmluRG93bmxvYWRMb2dnZXIuY2xlYXJFcnJvcigpO1xuXG4gICAgLy8gcmVtb3ZlIG9sZCBiaW5hcmllcyB0byBjaGVjayBpZiBpdCdzIGFuIHVwZGF0ZSBhbmQgYmVjYXVzZSB0aGV5IGFyZSAxMDBNQitcbiAgICBjb25zdCBoYWRPbGRCaW5hcmllcyA9IGF3YWl0IHJlbW92ZUZpbGVzVGhhdFN0YXJ0V2l0aChcImJ3LVwiLCBzdXBwb3J0UGF0aCk7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCB0aGlzLnNob3dUb2FzdCh7XG4gICAgICB0aXRsZTogYCR7aGFkT2xkQmluYXJpZXMgPyBcIlVwZGF0aW5nXCIgOiBcIkluaXRpYWxpemluZ1wifSBCaXR3YXJkZW4gQ0xJYCxcbiAgICAgIHN0eWxlOiBUb2FzdC5TdHlsZS5BbmltYXRlZCxcbiAgICAgIHByaW1hcnlBY3Rpb246IHsgdGl0bGU6IFwiT3BlbiBEb3dubG9hZCBQYWdlXCIsIG9uQWN0aW9uOiAoKSA9PiBvcGVuKGNsaUluZm8uZG93bmxvYWRQYWdlKSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHRtcEZpbGVOYW1lID0gXCJidy56aXBcIjtcbiAgICBjb25zdCB6aXBQYXRoID0gam9pbihzdXBwb3J0UGF0aCwgdG1wRmlsZU5hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIkRvd25sb2FkaW5nLi4uXCI7XG4gICAgICAgIGF3YWl0IGRvd25sb2FkKGNsaUluZm8uZG93bmxvYWRVcmwsIHppcFBhdGgsIHtcbiAgICAgICAgICBvblByb2dyZXNzOiAocGVyY2VudCkgPT4gKHRvYXN0Lm1lc3NhZ2UgPSBgRG93bmxvYWRpbmcgJHtwZXJjZW50fSVgKSxcbiAgICAgICAgICBzaGEyNTY6IGNsaUluZm8uc2hhMjU2LFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGRvd25sb2FkRXJyb3IpIHtcbiAgICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBkb3dubG9hZCBCaXR3YXJkZW4gQ0xJXCI7XG4gICAgICAgIHRocm93IGRvd25sb2FkRXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIkV4dHJhY3RpbmcuLi5cIjtcbiAgICAgICAgYXdhaXQgZGVjb21wcmVzc0ZpbGUoemlwUGF0aCwgc3VwcG9ydFBhdGgpO1xuICAgICAgICBjb25zdCBkZWNvbXByZXNzZWRCaW5QYXRoID0gam9pbihzdXBwb3J0UGF0aCwgY2xpSW5mby5iaW5GaWxlbmFtZSk7XG5cbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHRoaXMgcmVuYW1lIHN0YXJ0ZWQgdGhyb3dpbmcgYW4gZXJyb3IgYWZ0ZXIgc3VjY2VlZGluZywgc28gZm9yIG5vdyB3ZSdyZSBqdXN0XG4gICAgICAgIC8vIGNhdGNoaW5nIGl0IGFuZCBjaGVja2luZyBpZiB0aGUgZmlsZSBleGlzdHMgXHUwMEFGXFxfKFx1MzBDNClfL1x1MDBBRlxuICAgICAgICBhd2FpdCByZW5hbWUoZGVjb21wcmVzc2VkQmluUGF0aCwgdGhpcy5jbGlQYXRoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgYXdhaXQgd2FpdEZvckZpbGVBdmFpbGFibGUodGhpcy5jbGlQYXRoKTtcblxuICAgICAgICBhd2FpdCBjaG1vZCh0aGlzLmNsaVBhdGgsIFwiNzU1XCIpO1xuICAgICAgICBhd2FpdCBybSh6aXBQYXRoLCB7IGZvcmNlOiB0cnVlIH0pO1xuXG4gICAgICAgIENhY2hlLnNldChDQUNIRV9LRVlTLkNMSV9WRVJTSU9OLCBjbGlJbmZvLnZlcnNpb24pO1xuICAgICAgICB0aGlzLndhc0NsaVVwZGF0ZWQgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXh0cmFjdEVycm9yKSB7XG4gICAgICAgIHRvYXN0LnRpdGxlID0gXCJGYWlsZWQgdG8gZXh0cmFjdCBCaXR3YXJkZW4gQ0xJXCI7XG4gICAgICAgIHRocm93IGV4dHJhY3RFcnJvcjtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QubWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRW5zdXJlQ2xpQmluRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJQbGVhc2UgdHJ5IGFnYWluXCI7XG4gICAgICB0b2FzdC5zdHlsZSA9IFRvYXN0LlN0eWxlLkZhaWx1cmU7XG5cbiAgICAgIHVubGlua0FsbFN5bmMoemlwUGF0aCwgdGhpcy5jbGlQYXRoKTtcblxuICAgICAgaWYgKCFlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSBCaW5Eb3dubG9hZExvZ2dlci5sb2dFcnJvcihlcnJvcik7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgdGhyb3cgbmV3IEVuc3VyZUNsaUJpbkVycm9yKGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCB0b2FzdC5yZXN0b3JlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyaWV2ZUFuZENhY2hlQ2xpVmVyc2lvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0IH0gPSBhd2FpdCB0aGlzLmdldFZlcnNpb24oKTtcbiAgICAgIGlmICghZXJyb3IpIENhY2hlLnNldChDQUNIRV9LRVlTLkNMSV9WRVJTSU9OLCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHJldHJpZXZlIGFuZCBjYWNoZSBjbGkgdmVyc2lvblwiLCBlcnJvciwgeyBjYXB0dXJlVG9SYXljYXN0OiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tDbGlCaW5Jc1JlYWR5KGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFleGlzdHNTeW5jKHRoaXMuY2xpUGF0aCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGFjY2Vzc1N5bmMoZmlsZVBhdGgsIGNvbnN0YW50cy5YX09LKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgY2htb2RTeW5jKGZpbGVQYXRoLCBcIjc1NVwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHNldFNlc3Npb25Ub2tlbih0b2tlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5lbnYgPSB7XG4gICAgICAuLi50aGlzLmVudixcbiAgICAgIEJXX1NFU1NJT046IHRva2VuLFxuICAgIH07XG4gIH1cblxuICBjbGVhclNlc3Npb25Ub2tlbigpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5lbnYuQldfU0VTU0lPTjtcbiAgfVxuXG4gIHdpdGhTZXNzaW9uKHRva2VuOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLnRlbXBTZXNzaW9uVG9rZW4gPSB0b2tlbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgYXdhaXQgdGhpcy5pbml0UHJvbWlzZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2VydmVyVXJsKHNlcnZlclVybDogc3RyaW5nIHwgdW5kZWZpbmVkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2hlY2sgdGhlIENMSSBoYXMgYmVlbiBjb25maWd1cmVkIHRvIHVzZSB0aGUgcHJlZmVyZW5jZSBVcmxcbiAgICBjb25zdCBzdG9yZWRTZXJ2ZXIgPSBhd2FpdCBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KExPQ0FMX1NUT1JBR0VfS0VZLlNFUlZFUl9VUkwpO1xuICAgIGlmICghc2VydmVyVXJsIHx8IHN0b3JlZFNlcnZlciA9PT0gc2VydmVyVXJsKSByZXR1cm47XG5cbiAgICAvLyBVcGRhdGUgdGhlIHNlcnZlciBVcmxcbiAgICBjb25zdCB0b2FzdCA9IGF3YWl0IHRoaXMuc2hvd1RvYXN0KHtcbiAgICAgIHN0eWxlOiBUb2FzdC5TdHlsZS5BbmltYXRlZCxcbiAgICAgIHRpdGxlOiBcIlN3aXRjaGluZyBzZXJ2ZXIuLi5cIixcbiAgICAgIG1lc3NhZ2U6IFwiQml0d2FyZGVuIHNlcnZlciBwcmVmZXJlbmNlIGNoYW5nZWRcIixcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2dvdXQoKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBJdCBkb2Vzbid0IG1hdHRlciBpZiB3ZSB3ZXJlbid0IGxvZ2dlZCBpbi5cbiAgICAgIH1cbiAgICAgIC8vIElmIFVSTCBpcyBlbXB0eSwgc2V0IGl0IHRvIHRoZSBkZWZhdWx0XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wiY29uZmlnXCIsIFwic2VydmVyXCIsIHNlcnZlclVybCB8fCBERUZBVUxUX1NFUlZFUl9VUkxdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlNFUlZFUl9VUkwsIHNlcnZlclVybCk7XG5cbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuU3VjY2VzcztcbiAgICAgIHRvYXN0LnRpdGxlID0gXCJTdWNjZXNzXCI7XG4gICAgICB0b2FzdC5tZXNzYWdlID0gXCJCaXR3YXJkZW4gc2VydmVyIGNoYW5nZWRcIjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3Quc3R5bGUgPSBUb2FzdC5TdHlsZS5GYWlsdXJlO1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBzd2l0Y2ggc2VydmVyXCI7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0b2FzdC5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIjtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXdhaXQgdG9hc3QucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlYyhhcmdzOiBzdHJpbmdbXSwgb3B0aW9uczogRXhlY1Byb3BzKTogUHJvbWlzZTxFeGVjYUNoaWxkUHJvY2Vzcz4ge1xuICAgIGNvbnN0IHsgYWJvcnRDb250cm9sbGVyLCBpbnB1dCA9IFwiXCIsIHJlc2V0VmF1bHRUaW1lb3V0IH0gPSBvcHRpb25zID8/IHt9O1xuXG4gICAgbGV0IGVudiA9IHRoaXMuZW52O1xuICAgIGlmICh0aGlzLnRlbXBTZXNzaW9uVG9rZW4pIHtcbiAgICAgIGVudiA9IHsgLi4uZW52LCBCV19TRVNTSU9OOiB0aGlzLnRlbXBTZXNzaW9uVG9rZW4gfTtcbiAgICAgIHRoaXMudGVtcFNlc3Npb25Ub2tlbiA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjYSh0aGlzLmNsaVBhdGgsIGFyZ3MsIHsgaW5wdXQsIGVudiwgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXI/LnNpZ25hbCB9KTtcblxuICAgIGlmICh0aGlzLmlzUHJvbXB0V2FpdGluZ0Zvck1hc3RlclBhc3N3b3JkKHJlc3VsdCkpIHtcbiAgICAgIC8qIHNpbmNlIHdlIGhhdmUgdGhlIHNlc3Npb24gdG9rZW4gaW4gdGhlIGVudiwgdGhlIHBhc3N3b3JkIFxuICAgICAgc2hvdWxkIG5vdCBiZSByZXF1ZXN0ZWQsIHVubGVzcyB0aGUgdmF1bHQgaXMgbG9ja2VkICovXG4gICAgICBhd2FpdCB0aGlzLmxvY2soKTtcbiAgICAgIHRocm93IG5ldyBWYXVsdElzTG9ja2VkRXJyb3IoKTtcbiAgICB9XG5cbiAgICBpZiAocmVzZXRWYXVsdFRpbWVvdXQpIHtcbiAgICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLkxBU1RfQUNUSVZJVFlfVElNRSwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgYXN5bmMgZ2V0VmVyc2lvbigpOiBQcm9taXNlPE1heWJlRXJyb3I8c3RyaW5nPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dDogcmVzdWx0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiLS12ZXJzaW9uXCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgY2xpIHZlcnNpb25cIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvZ2luKCk6IFByb21pc2U8TWF5YmVFcnJvcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9naW5cIiwgXCItLWFwaWtleVwiXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImxvZ2luXCIsIFwidW5sb2NrZWRcIik7XG4gICAgICBhd2FpdCB0aGlzLmNhbGxBY3Rpb25MaXN0ZW5lcnMoXCJsb2dpblwiKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvZ2luXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2dvdXQob3B0aW9ucz86IExvZ291dE9wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICBjb25zdCB7IHJlYXNvbiwgaW1tZWRpYXRlID0gZmFsc2UgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpbW1lZGlhdGUpIGF3YWl0IHRoaXMuaGFuZGxlUG9zdExvZ291dChyZWFzb24pO1xuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9nb3V0XCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImxvZ291dFwiLCBcInVuYXV0aGVudGljYXRlZFwiKTtcbiAgICAgIGlmICghaW1tZWRpYXRlKSBhd2FpdCB0aGlzLmhhbmRsZVBvc3RMb2dvdXQocmVhc29uKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvZ291dFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9jayhvcHRpb25zPzogTG9ja09wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICBjb25zdCB7IHJlYXNvbiwgY2hlY2tWYXVsdFN0YXR1cyA9IGZhbHNlLCBpbW1lZGlhdGUgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICB0cnkge1xuICAgICAgaWYgKGltbWVkaWF0ZSkgYXdhaXQgdGhpcy5jYWxsQWN0aW9uTGlzdGVuZXJzKFwibG9ja1wiLCByZWFzb24pO1xuICAgICAgaWYgKGNoZWNrVmF1bHRTdGF0dXMpIHtcbiAgICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0IH0gPSBhd2FpdCB0aGlzLnN0YXR1cygpO1xuICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ1bmF1dGhlbnRpY2F0ZWRcIikgcmV0dXJuIHsgZXJyb3I6IG5ldyBOb3RMb2dnZWRJbkVycm9yKFwiTm90IGxvZ2dlZCBpblwiKSB9O1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wibG9ja1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJsb2NrXCIsIFwibG9ja2VkXCIpO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcImxvY2tcIiwgcmVhc29uKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvY2sgdmF1bHRcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVubG9jayhwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPHN0cmluZz4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQ6IHNlc3Npb25Ub2tlbiB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInVubG9ja1wiLCBwYXNzd29yZCwgXCItLXJhd1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuc2V0U2Vzc2lvblRva2VuKHNlc3Npb25Ub2tlbik7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJ1bmxvY2tcIiwgXCJ1bmxvY2tlZFwiKTtcbiAgICAgIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcInVubG9ja1wiLCBwYXNzd29yZCwgc2Vzc2lvblRva2VuKTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogc2Vzc2lvblRva2VuIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHVubG9jayB2YXVsdFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3luYygpOiBQcm9taXNlPE1heWJlRXJyb3I+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5leGVjKFtcInN5bmNcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBzeW5jIHZhdWx0XCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRJdGVtKGlkOiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8SXRlbT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZXRcIiwgXCJpdGVtXCIsIGlkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxJdGVtPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGdldCBpdGVtXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsaXN0SXRlbXMoKTogUHJvbWlzZTxNYXliZUVycm9yPEl0ZW1bXT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJsaXN0XCIsIFwiaXRlbXNcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBpdGVtcyA9IEpTT04ucGFyc2U8SXRlbVtdPihzdGRvdXQpO1xuICAgICAgLy8gRmlsdGVyIG91dCBpdGVtcyB3aXRob3V0IGEgbmFtZSBwcm9wZXJ0eSAodGhleSBhcmUgbm90IGRpc3BsYXllZCBpbiB0aGUgYml0d2FyZGVuIGFwcClcbiAgICAgIHJldHVybiB7IHJlc3VsdDogaXRlbXMuZmlsdGVyKChpdGVtOiBJdGVtKSA9PiAhIWl0ZW0ubmFtZSkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gbGlzdCBpdGVtc1wiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlTG9naW5JdGVtKG9wdGlvbnM6IENyZWF0ZUxvZ2luSXRlbU9wdGlvbnMpOiBQcm9taXNlPE1heWJlRXJyb3I8SXRlbT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvcjogaXRlbVRlbXBsYXRlRXJyb3IsIHJlc3VsdDogaXRlbVRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlPEl0ZW0+KFwiaXRlbVwiKTtcbiAgICAgIGlmIChpdGVtVGVtcGxhdGVFcnJvcikgdGhyb3cgaXRlbVRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHsgZXJyb3I6IGxvZ2luVGVtcGxhdGVFcnJvciwgcmVzdWx0OiBsb2dpblRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlPExvZ2luPihcIml0ZW0ubG9naW5cIik7XG4gICAgICBpZiAobG9naW5UZW1wbGF0ZUVycm9yKSB0aHJvdyBsb2dpblRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGl0ZW1UZW1wbGF0ZS5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgaXRlbVRlbXBsYXRlLnR5cGUgPSBJdGVtVHlwZS5MT0dJTjtcbiAgICAgIGl0ZW1UZW1wbGF0ZS5mb2xkZXJJZCA9IG9wdGlvbnMuZm9sZGVySWQgfHwgbnVsbDtcbiAgICAgIGl0ZW1UZW1wbGF0ZS5sb2dpbiA9IGxvZ2luVGVtcGxhdGU7XG4gICAgICBpdGVtVGVtcGxhdGUubm90ZXMgPSBudWxsO1xuXG4gICAgICBsb2dpblRlbXBsYXRlLnVzZXJuYW1lID0gb3B0aW9ucy51c2VybmFtZSB8fCBudWxsO1xuICAgICAgbG9naW5UZW1wbGF0ZS5wYXNzd29yZCA9IG9wdGlvbnMucGFzc3dvcmQ7XG4gICAgICBsb2dpblRlbXBsYXRlLnRvdHAgPSBudWxsO1xuICAgICAgbG9naW5UZW1wbGF0ZS5maWRvMkNyZWRlbnRpYWxzID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAob3B0aW9ucy51cmkpIHtcbiAgICAgICAgbG9naW5UZW1wbGF0ZS51cmlzID0gW3sgbWF0Y2g6IG51bGwsIHVyaTogb3B0aW9ucy51cmkgfV07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0OiBlbmNvZGVkSXRlbSwgZXJyb3I6IGVuY29kZUVycm9yIH0gPSBhd2FpdCB0aGlzLmVuY29kZShKU09OLnN0cmluZ2lmeShpdGVtVGVtcGxhdGUpKTtcbiAgICAgIGlmIChlbmNvZGVFcnJvcikgdGhyb3cgZW5jb2RlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiY3JlYXRlXCIsIFwiaXRlbVwiLCBlbmNvZGVkSXRlbV0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8SXRlbT4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjcmVhdGUgbG9naW4gaXRlbVwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbGlzdEZvbGRlcnMoKTogUHJvbWlzZTxNYXliZUVycm9yPEZvbGRlcltdPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcImxpc3RcIiwgXCJmb2xkZXJzXCJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBKU09OLnBhcnNlPEZvbGRlcltdPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxpc3QgZm9sZGVyXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVGb2xkZXIobmFtZTogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IsIHJlc3VsdDogZm9sZGVyIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlKFwiZm9sZGVyXCIpO1xuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgICAgZm9sZGVyLm5hbWUgPSBuYW1lO1xuICAgICAgY29uc3QgeyByZXN1bHQ6IGVuY29kZWRGb2xkZXIsIGVycm9yOiBlbmNvZGVFcnJvciB9ID0gYXdhaXQgdGhpcy5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoZm9sZGVyKSk7XG4gICAgICBpZiAoZW5jb2RlRXJyb3IpIHRocm93IGVuY29kZUVycm9yO1xuXG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wiY3JlYXRlXCIsIFwiZm9sZGVyXCIsIGVuY29kZWRGb2xkZXJdLCB7IHJlc2V0VmF1bHRUaW1lb3V0OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiB1bmRlZmluZWQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY3JlYXRlIGZvbGRlclwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VG90cChpZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPHN0cmluZz4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gdGhpcyBjb3VsZCByZXR1cm4gc29tZXRoaW5nIGxpa2UgXCJOb3QgZm91bmQuXCIgYnV0IGNoZWNrcyBmb3IgdG90cCBjb2RlIGFyZSBkb25lIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb25cbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wiZ2V0XCIsIFwidG90cFwiLCBpZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHN0ZG91dCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgVE9UUFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3RhdHVzKCk6IFByb21pc2U8TWF5YmVFcnJvcjxWYXVsdFN0YXRlPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInN0YXR1c1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8VmF1bHRTdGF0ZT4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgc3RhdHVzXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0xvY2tTdGF0dXMoKTogUHJvbWlzZTxWYXVsdFN0YXR1cz4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1widW5sb2NrXCIsIFwiLS1jaGVja1wiXSwgeyByZXNldFZhdWx0VGltZW91dDogZmFsc2UgfSk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJjaGVja0xvY2tTdGF0dXNcIiwgXCJ1bmxvY2tlZFwiKTtcbiAgICAgIHJldHVybiBcInVubG9ja2VkXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY2hlY2sgbG9jayBzdGF0dXNcIiwgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKGVycm9yIGFzIEV4ZWNhRXJyb3IpLnN0ZGVycjtcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UgPT09IFwiVmF1bHQgaXMgbG9ja2VkLlwiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUxhc3RWYXVsdFN0YXR1cyhcImNoZWNrTG9ja1N0YXR1c1wiLCBcImxvY2tlZFwiKTtcbiAgICAgICAgcmV0dXJuIFwibG9ja2VkXCI7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnNhdmVMYXN0VmF1bHRTdGF0dXMoXCJjaGVja0xvY2tTdGF0dXNcIiwgXCJ1bmF1dGhlbnRpY2F0ZWRcIik7XG4gICAgICByZXR1cm4gXCJ1bmF1dGhlbnRpY2F0ZWRcIjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRUZW1wbGF0ZTxUID0gYW55Pih0eXBlOiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8VD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZXRcIiwgXCJ0ZW1wbGF0ZVwiLCB0eXBlXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxUPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGdldCB0ZW1wbGF0ZVwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW5jb2RlKGlucHV0OiBzdHJpbmcpOiBQcm9taXNlPE1heWJlRXJyb3I8c3RyaW5nPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgdGhpcy5leGVjKFtcImVuY29kZVwiXSwgeyBpbnB1dCwgcmVzZXRWYXVsdFRpbWVvdXQ6IGZhbHNlIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBzdGRvdXQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gZW5jb2RlXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZVBhc3N3b3JkKG9wdGlvbnM/OiBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnMsIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgYXJncyA9IG9wdGlvbnMgPyBnZXRQYXNzd29yZEdlbmVyYXRpbmdBcmdzKG9wdGlvbnMpIDogW107XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJnZW5lcmF0ZVwiLCAuLi5hcmdzXSwgeyBhYm9ydENvbnRyb2xsZXIsIHJlc2V0VmF1bHRUaW1lb3V0OiBmYWxzZSB9KTtcbiAgICByZXR1cm4gc3Rkb3V0O1xuICB9XG5cbiAgYXN5bmMgbGlzdFNlbmRzKCk6IFByb21pc2U8TWF5YmVFcnJvcjxTZW5kW10+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoW1wic2VuZFwiLCBcImxpc3RcIl0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8U2VuZFtdPihzdGRvdXQpIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxpc3Qgc2VuZHNcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNlbmQodmFsdWVzOiBTZW5kQ3JlYXRlUGF5bG9hZCk6IFByb21pc2U8TWF5YmVFcnJvcjxTZW5kPj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yOiB0ZW1wbGF0ZUVycm9yLCByZXN1bHQ6IHRlbXBsYXRlIH0gPSBhd2FpdCB0aGlzLmdldFRlbXBsYXRlKFxuICAgICAgICB2YWx1ZXMudHlwZSA9PT0gU2VuZFR5cGUuVGV4dCA/IFwic2VuZC50ZXh0XCIgOiBcInNlbmQuZmlsZVwiXG4gICAgICApO1xuICAgICAgaWYgKHRlbXBsYXRlRXJyb3IpIHRocm93IHRlbXBsYXRlRXJyb3I7XG5cbiAgICAgIGNvbnN0IHBheWxvYWQgPSBwcmVwYXJlU2VuZFBheWxvYWQodGVtcGxhdGUsIHZhbHVlcyk7XG4gICAgICBjb25zdCB7IHJlc3VsdDogZW5jb2RlZFBheWxvYWQsIGVycm9yOiBlbmNvZGVFcnJvciB9ID0gYXdhaXQgdGhpcy5lbmNvZGUoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgaWYgKGVuY29kZUVycm9yKSB0aHJvdyBlbmNvZGVFcnJvcjtcblxuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiY3JlYXRlXCIsIGVuY29kZWRQYXlsb2FkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBKU09OLnBhcnNlPFNlbmQ+KHN0ZG91dCkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY3JlYXRlIHNlbmRcIiwgZXhlY0Vycm9yKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuaGFuZGxlQ29tbW9uRXJyb3JzKGV4ZWNFcnJvcik7XG4gICAgICBpZiAoIWVycm9yKSB0aHJvdyBleGVjRXJyb3I7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVkaXRTZW5kKHZhbHVlczogU2VuZENyZWF0ZVBheWxvYWQpOiBQcm9taXNlPE1heWJlRXJyb3I8U2VuZD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyByZXN1bHQ6IGVuY29kZWRQYXlsb2FkLCBlcnJvcjogZW5jb2RlRXJyb3IgfSA9IGF3YWl0IHRoaXMuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHZhbHVlcykpO1xuICAgICAgaWYgKGVuY29kZUVycm9yKSB0aHJvdyBlbmNvZGVFcnJvcjtcblxuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiZWRpdFwiLCBlbmNvZGVkUGF5bG9hZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IEpTT04ucGFyc2U8U2VuZD4oc3Rkb3V0KSB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBkZWxldGUgc2VuZFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlU2VuZChpZDogc3RyaW5nKTogUHJvbWlzZTxNYXliZUVycm9yPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZXhlYyhbXCJzZW5kXCIsIFwiZGVsZXRlXCIsIGlkXSwgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSB9KTtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdW5kZWZpbmVkIH07XG4gICAgfSBjYXRjaCAoZXhlY0Vycm9yKSB7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGRlbGV0ZSBzZW5kXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVTZW5kUGFzc3dvcmQoaWQ6IHN0cmluZyk6IFByb21pc2U8TWF5YmVFcnJvcj4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmV4ZWMoW1wic2VuZFwiLCBcInJlbW92ZS1wYXNzd29yZFwiLCBpZF0sIHsgcmVzZXRWYXVsdFRpbWVvdXQ6IHRydWUgfSk7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgIH0gY2F0Y2ggKGV4ZWNFcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byByZW1vdmUgc2VuZCBwYXNzd29yZFwiLCBleGVjRXJyb3IpO1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5oYW5kbGVDb21tb25FcnJvcnMoZXhlY0Vycm9yKTtcbiAgICAgIGlmICghZXJyb3IpIHRocm93IGV4ZWNFcnJvcjtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVjZWl2ZVNlbmRJbmZvKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVjZWl2ZVNlbmRPcHRpb25zKTogUHJvbWlzZTxNYXliZUVycm9yPFJlY2VpdmVkU2VuZD4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgdGhpcy5leGVjKFtcInNlbmRcIiwgXCJyZWNlaXZlXCIsIHVybCwgXCItLW9ialwiXSwge1xuICAgICAgICByZXNldFZhdWx0VGltZW91dDogdHJ1ZSxcbiAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LnBhc3N3b3JkLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXN0ZG91dCAmJiAvSW52YWxpZCBwYXNzd29yZC9pLnRlc3Qoc3RkZXJyKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kSW52YWxpZFBhc3N3b3JkRXJyb3IoKSB9O1xuICAgICAgaWYgKCFzdGRvdXQgJiYgL1NlbmQgcGFzc3dvcmQvaS50ZXN0KHN0ZGVycikpIHJldHVybiB7IGVycm9yOiBuZXcgU2VuZE5lZWRzUGFzc3dvcmRFcnJvcigpIH07XG5cbiAgICAgIHJldHVybiB7IHJlc3VsdDogSlNPTi5wYXJzZTxSZWNlaXZlZFNlbmQ+KHN0ZG91dCkgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChleGVjRXJyb3IgYXMgRXhlY2FFcnJvcikuc3RkZXJyO1xuICAgICAgaWYgKC9JbnZhbGlkIHBhc3N3b3JkL2dpLnRlc3QoZXJyb3JNZXNzYWdlKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kSW52YWxpZFBhc3N3b3JkRXJyb3IoKSB9O1xuICAgICAgaWYgKC9TZW5kIHBhc3N3b3JkL2dpLnRlc3QoZXJyb3JNZXNzYWdlKSkgcmV0dXJuIHsgZXJyb3I6IG5ldyBTZW5kTmVlZHNQYXNzd29yZEVycm9yKCkgfTtcblxuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byByZWNlaXZlIHNlbmQgb2JqXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWNlaXZlU2VuZCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlY2VpdmVTZW5kT3B0aW9ucyk6IFByb21pc2U8TWF5YmVFcnJvcjxzdHJpbmc+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2F2ZVBhdGgsIHBhc3N3b3JkIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgY29uc3QgYXJncyA9IFtcInNlbmRcIiwgXCJyZWNlaXZlXCIsIHVybF07XG4gICAgICBpZiAoc2F2ZVBhdGgpIGFyZ3MucHVzaChcIi0tb3V0cHV0XCIsIHNhdmVQYXRoKTtcbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmV4ZWMoYXJncywgeyByZXNldFZhdWx0VGltZW91dDogdHJ1ZSwgaW5wdXQ6IHBhc3N3b3JkIH0pO1xuICAgICAgcmV0dXJuIHsgcmVzdWx0OiBzdGRvdXQgfTtcbiAgICB9IGNhdGNoIChleGVjRXJyb3IpIHtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gcmVjZWl2ZSBzZW5kXCIsIGV4ZWNFcnJvcik7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCB0aGlzLmhhbmRsZUNvbW1vbkVycm9ycyhleGVjRXJyb3IpO1xuICAgICAgaWYgKCFlcnJvcikgdGhyb3cgZXhlY0Vycm9yO1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG4gIH1cblxuICAvLyB1dGlscyBiZWxvd1xuXG4gIGFzeW5jIHNhdmVMYXN0VmF1bHRTdGF0dXMoY2FsbE5hbWU6IHN0cmluZywgc3RhdHVzOiBWYXVsdFN0YXR1cyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlZBVUxUX0xBU1RfU1RBVFVTLCBzdGF0dXMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGFzdFNhdmVkVmF1bHRTdGF0dXMoKTogUHJvbWlzZTxWYXVsdFN0YXR1cyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGxhc3RTYXZlZFN0YXR1cyA9IGF3YWl0IExvY2FsU3RvcmFnZS5nZXRJdGVtPFZhdWx0U3RhdHVzPihMT0NBTF9TVE9SQUdFX0tFWS5WQVVMVF9MQVNUX1NUQVRVUyk7XG4gICAgaWYgKCFsYXN0U2F2ZWRTdGF0dXMpIHtcbiAgICAgIGNvbnN0IHZhdWx0U3RhdHVzID0gYXdhaXQgdGhpcy5zdGF0dXMoKTtcbiAgICAgIHJldHVybiB2YXVsdFN0YXR1cy5yZXN1bHQ/LnN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RTYXZlZFN0YXR1cztcbiAgfVxuXG4gIHByaXZhdGUgaXNQcm9tcHRXYWl0aW5nRm9yTWFzdGVyUGFzc3dvcmQocmVzdWx0OiBFeGVjYVJldHVyblZhbHVlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKHJlc3VsdC5zdGRlcnIgJiYgcmVzdWx0LnN0ZGVyci5pbmNsdWRlcyhcIk1hc3RlciBwYXNzd29yZFwiKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVBvc3RMb2dvdXQocmVhc29uPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jbGVhclNlc3Npb25Ub2tlbigpO1xuICAgIGF3YWl0IHRoaXMuY2FsbEFjdGlvbkxpc3RlbmVycyhcImxvZ291dFwiLCByZWFzb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDb21tb25FcnJvcnMoZXJyb3I6IGFueSk6IFByb21pc2U8eyBlcnJvcj86IE1hbnVhbGx5VGhyb3duRXJyb3IgfT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlcnJvciBhcyBFeGVjYUVycm9yKS5zdGRlcnI7XG4gICAgaWYgKCFlcnJvck1lc3NhZ2UpIHJldHVybiB7fTtcblxuICAgIGlmICgvbm90IGxvZ2dlZCBpbi9pLnRlc3QoZXJyb3JNZXNzYWdlKSkge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVQb3N0TG9nb3V0KCk7XG4gICAgICByZXR1cm4geyBlcnJvcjogbmV3IE5vdExvZ2dlZEluRXJyb3IoXCJOb3QgbG9nZ2VkIGluXCIpIH07XG4gICAgfVxuICAgIGlmICgvUHJlbWl1bSBzdGF0dXMvaS50ZXN0KGVycm9yTWVzc2FnZSkpIHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBuZXcgUHJlbWl1bUZlYXR1cmVFcnJvcigpIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHNldEFjdGlvbkxpc3RlbmVyPEEgZXh0ZW5kcyBrZXlvZiBBY3Rpb25MaXN0ZW5lcnM+KGFjdGlvbjogQSwgbGlzdGVuZXI6IEFjdGlvbkxpc3RlbmVyc1tBXSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuYWN0aW9uTGlzdGVuZXJzLmdldChhY3Rpb24pO1xuICAgIGlmIChsaXN0ZW5lcnMgJiYgbGlzdGVuZXJzLnNpemUgPiAwKSB7XG4gICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3Rpb25MaXN0ZW5lcnMuc2V0KGFjdGlvbiwgbmV3IFNldChbbGlzdGVuZXJdKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVtb3ZlQWN0aW9uTGlzdGVuZXI8QSBleHRlbmRzIGtleW9mIEFjdGlvbkxpc3RlbmVycz4oYWN0aW9uOiBBLCBsaXN0ZW5lcjogQWN0aW9uTGlzdGVuZXJzW0FdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5hY3Rpb25MaXN0ZW5lcnMuZ2V0KGFjdGlvbik7XG4gICAgaWYgKGxpc3RlbmVycyAmJiBsaXN0ZW5lcnMuc2l6ZSA+IDApIHtcbiAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsbEFjdGlvbkxpc3RlbmVyczxBIGV4dGVuZHMga2V5b2YgQWN0aW9uTGlzdGVuZXJzPihcbiAgICBhY3Rpb246IEEsXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxOb25OdWxsYWJsZTxBY3Rpb25MaXN0ZW5lcnNbQV0+PlxuICApIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmFjdGlvbkxpc3RlbmVycy5nZXQoYWN0aW9uKTtcbiAgICBpZiAobGlzdGVuZXJzICYmIGxpc3RlbmVycy5zaXplID4gMCkge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCAobGlzdGVuZXIgYXMgYW55KT8uKC4uLmFyZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oYEVycm9yIGNhbGxpbmcgYml0d2FyZGVuIGFjdGlvbiBsaXN0ZW5lciBmb3IgJHthY3Rpb259YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93VG9hc3QgPSBhc3luYyAodG9hc3RPcHRzOiBUb2FzdC5PcHRpb25zKTogUHJvbWlzZTxUb2FzdCAmIHsgcmVzdG9yZTogKCkgPT4gUHJvbWlzZTx2b2lkPiB9PiA9PiB7XG4gICAgaWYgKHRoaXMudG9hc3RJbnN0YW5jZSkge1xuICAgICAgY29uc3QgcHJldmlvdXNTdGF0ZVRvYXN0T3B0czogVG9hc3QuT3B0aW9ucyA9IHtcbiAgICAgICAgbWVzc2FnZTogdGhpcy50b2FzdEluc3RhbmNlLm1lc3NhZ2UsXG4gICAgICAgIHRpdGxlOiB0aGlzLnRvYXN0SW5zdGFuY2UudGl0bGUsXG4gICAgICAgIHByaW1hcnlBY3Rpb246IHRoaXMudG9hc3RJbnN0YW5jZS5wcmltYXJ5QWN0aW9uLFxuICAgICAgICBzZWNvbmRhcnlBY3Rpb246IHRoaXMudG9hc3RJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb24sXG4gICAgICB9O1xuXG4gICAgICBpZiAodG9hc3RPcHRzLnN0eWxlKSB0aGlzLnRvYXN0SW5zdGFuY2Uuc3R5bGUgPSB0b2FzdE9wdHMuc3R5bGU7XG4gICAgICB0aGlzLnRvYXN0SW5zdGFuY2UubWVzc2FnZSA9IHRvYXN0T3B0cy5tZXNzYWdlO1xuICAgICAgdGhpcy50b2FzdEluc3RhbmNlLnRpdGxlID0gdG9hc3RPcHRzLnRpdGxlO1xuICAgICAgdGhpcy50b2FzdEluc3RhbmNlLnByaW1hcnlBY3Rpb24gPSB0b2FzdE9wdHMucHJpbWFyeUFjdGlvbjtcbiAgICAgIHRoaXMudG9hc3RJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb24gPSB0b2FzdE9wdHMuc2Vjb25kYXJ5QWN0aW9uO1xuICAgICAgYXdhaXQgdGhpcy50b2FzdEluc3RhbmNlLnNob3coKTtcblxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGhpcy50b2FzdEluc3RhbmNlLCB7XG4gICAgICAgIHJlc3RvcmU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNob3dUb2FzdChwcmV2aW91c1N0YXRlVG9hc3RPcHRzKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b2FzdCA9IGF3YWl0IHNob3dUb2FzdCh0b2FzdE9wdHMpO1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odG9hc3QsIHsgcmVzdG9yZTogKCkgPT4gdG9hc3QuaGlkZSgpIH0pO1xuICAgIH1cbiAgfTtcbn1cbiIsICJpbXBvcnQge0J1ZmZlcn0gZnJvbSAnbm9kZTpidWZmZXInO1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCBjaGlsZFByb2Nlc3MgZnJvbSAnbm9kZTpjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5pbXBvcnQgY3Jvc3NTcGF3biBmcm9tICdjcm9zcy1zcGF3bic7XG5pbXBvcnQgc3RyaXBGaW5hbE5ld2xpbmUgZnJvbSAnc3RyaXAtZmluYWwtbmV3bGluZSc7XG5pbXBvcnQge25wbVJ1blBhdGhFbnZ9IGZyb20gJ25wbS1ydW4tcGF0aCc7XG5pbXBvcnQgb25ldGltZSBmcm9tICdvbmV0aW1lJztcbmltcG9ydCB7bWFrZUVycm9yfSBmcm9tICcuL2xpYi9lcnJvci5qcyc7XG5pbXBvcnQge25vcm1hbGl6ZVN0ZGlvLCBub3JtYWxpemVTdGRpb05vZGV9IGZyb20gJy4vbGliL3N0ZGlvLmpzJztcbmltcG9ydCB7c3Bhd25lZEtpbGwsIHNwYXduZWRDYW5jZWwsIHNldHVwVGltZW91dCwgdmFsaWRhdGVUaW1lb3V0LCBzZXRFeGl0SGFuZGxlcn0gZnJvbSAnLi9saWIva2lsbC5qcyc7XG5pbXBvcnQge2hhbmRsZUlucHV0LCBnZXRTcGF3bmVkUmVzdWx0LCBtYWtlQWxsU3RyZWFtLCB2YWxpZGF0ZUlucHV0U3luY30gZnJvbSAnLi9saWIvc3RyZWFtLmpzJztcbmltcG9ydCB7bWVyZ2VQcm9taXNlLCBnZXRTcGF3bmVkUHJvbWlzZX0gZnJvbSAnLi9saWIvcHJvbWlzZS5qcyc7XG5pbXBvcnQge2pvaW5Db21tYW5kLCBwYXJzZUNvbW1hbmQsIGdldEVzY2FwZWRDb21tYW5kfSBmcm9tICcuL2xpYi9jb21tYW5kLmpzJztcblxuY29uc3QgREVGQVVMVF9NQVhfQlVGRkVSID0gMTAwMCAqIDEwMDAgKiAxMDA7XG5cbmNvbnN0IGdldEVudiA9ICh7ZW52OiBlbnZPcHRpb24sIGV4dGVuZEVudiwgcHJlZmVyTG9jYWwsIGxvY2FsRGlyLCBleGVjUGF0aH0pID0+IHtcblx0Y29uc3QgZW52ID0gZXh0ZW5kRW52ID8gey4uLnByb2Nlc3MuZW52LCAuLi5lbnZPcHRpb259IDogZW52T3B0aW9uO1xuXG5cdGlmIChwcmVmZXJMb2NhbCkge1xuXHRcdHJldHVybiBucG1SdW5QYXRoRW52KHtlbnYsIGN3ZDogbG9jYWxEaXIsIGV4ZWNQYXRofSk7XG5cdH1cblxuXHRyZXR1cm4gZW52O1xufTtcblxuY29uc3QgaGFuZGxlQXJndW1lbnRzID0gKGZpbGUsIGFyZ3MsIG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBwYXJzZWQgPSBjcm9zc1NwYXduLl9wYXJzZShmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0ZmlsZSA9IHBhcnNlZC5jb21tYW5kO1xuXHRhcmdzID0gcGFyc2VkLmFyZ3M7XG5cdG9wdGlvbnMgPSBwYXJzZWQub3B0aW9ucztcblxuXHRvcHRpb25zID0ge1xuXHRcdG1heEJ1ZmZlcjogREVGQVVMVF9NQVhfQlVGRkVSLFxuXHRcdGJ1ZmZlcjogdHJ1ZSxcblx0XHRzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSxcblx0XHRleHRlbmRFbnY6IHRydWUsXG5cdFx0cHJlZmVyTG9jYWw6IGZhbHNlLFxuXHRcdGxvY2FsRGlyOiBvcHRpb25zLmN3ZCB8fCBwcm9jZXNzLmN3ZCgpLFxuXHRcdGV4ZWNQYXRoOiBwcm9jZXNzLmV4ZWNQYXRoLFxuXHRcdGVuY29kaW5nOiAndXRmOCcsXG5cdFx0cmVqZWN0OiB0cnVlLFxuXHRcdGNsZWFudXA6IHRydWUsXG5cdFx0YWxsOiBmYWxzZSxcblx0XHR3aW5kb3dzSGlkZTogdHJ1ZSxcblx0XHQuLi5vcHRpb25zLFxuXHR9O1xuXG5cdG9wdGlvbnMuZW52ID0gZ2V0RW52KG9wdGlvbnMpO1xuXG5cdG9wdGlvbnMuc3RkaW8gPSBub3JtYWxpemVTdGRpbyhvcHRpb25zKTtcblxuXHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyAmJiBwYXRoLmJhc2VuYW1lKGZpbGUsICcuZXhlJykgPT09ICdjbWQnKSB7XG5cdFx0Ly8gIzExNlxuXHRcdGFyZ3MudW5zaGlmdCgnL3EnKTtcblx0fVxuXG5cdHJldHVybiB7ZmlsZSwgYXJncywgb3B0aW9ucywgcGFyc2VkfTtcbn07XG5cbmNvbnN0IGhhbmRsZU91dHB1dCA9IChvcHRpb25zLCB2YWx1ZSwgZXJyb3IpID0+IHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHtcblx0XHQvLyBXaGVuIGBleGVjYVN5bmMoKWAgZXJyb3JzLCB3ZSBub3JtYWxpemUgaXQgdG8gJycgdG8gbWltaWMgYGV4ZWNhKClgXG5cdFx0cmV0dXJuIGVycm9yID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiAnJztcblx0fVxuXG5cdGlmIChvcHRpb25zLnN0cmlwRmluYWxOZXdsaW5lKSB7XG5cdFx0cmV0dXJuIHN0cmlwRmluYWxOZXdsaW5lKHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYShmaWxlLCBhcmdzLCBvcHRpb25zKSB7XG5cdGNvbnN0IHBhcnNlZCA9IGhhbmRsZUFyZ3VtZW50cyhmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0Y29uc3QgY29tbWFuZCA9IGpvaW5Db21tYW5kKGZpbGUsIGFyZ3MpO1xuXHRjb25zdCBlc2NhcGVkQ29tbWFuZCA9IGdldEVzY2FwZWRDb21tYW5kKGZpbGUsIGFyZ3MpO1xuXG5cdHZhbGlkYXRlVGltZW91dChwYXJzZWQub3B0aW9ucyk7XG5cblx0bGV0IHNwYXduZWQ7XG5cdHRyeSB7XG5cdFx0c3Bhd25lZCA9IGNoaWxkUHJvY2Vzcy5zcGF3bihwYXJzZWQuZmlsZSwgcGFyc2VkLmFyZ3MsIHBhcnNlZC5vcHRpb25zKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBFbnN1cmUgdGhlIHJldHVybmVkIGVycm9yIGlzIGFsd2F5cyBib3RoIGEgcHJvbWlzZSBhbmQgYSBjaGlsZCBwcm9jZXNzXG5cdFx0Y29uc3QgZHVtbXlTcGF3bmVkID0gbmV3IGNoaWxkUHJvY2Vzcy5DaGlsZFByb2Nlc3MoKTtcblx0XHRjb25zdCBlcnJvclByb21pc2UgPSBQcm9taXNlLnJlamVjdChtYWtlRXJyb3Ioe1xuXHRcdFx0ZXJyb3IsXG5cdFx0XHRzdGRvdXQ6ICcnLFxuXHRcdFx0c3RkZXJyOiAnJyxcblx0XHRcdGFsbDogJycsXG5cdFx0XHRjb21tYW5kLFxuXHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRwYXJzZWQsXG5cdFx0XHR0aW1lZE91dDogZmFsc2UsXG5cdFx0XHRpc0NhbmNlbGVkOiBmYWxzZSxcblx0XHRcdGtpbGxlZDogZmFsc2UsXG5cdFx0fSkpO1xuXHRcdHJldHVybiBtZXJnZVByb21pc2UoZHVtbXlTcGF3bmVkLCBlcnJvclByb21pc2UpO1xuXHR9XG5cblx0Y29uc3Qgc3Bhd25lZFByb21pc2UgPSBnZXRTcGF3bmVkUHJvbWlzZShzcGF3bmVkKTtcblx0Y29uc3QgdGltZWRQcm9taXNlID0gc2V0dXBUaW1lb3V0KHNwYXduZWQsIHBhcnNlZC5vcHRpb25zLCBzcGF3bmVkUHJvbWlzZSk7XG5cdGNvbnN0IHByb2Nlc3NEb25lID0gc2V0RXhpdEhhbmRsZXIoc3Bhd25lZCwgcGFyc2VkLm9wdGlvbnMsIHRpbWVkUHJvbWlzZSk7XG5cblx0Y29uc3QgY29udGV4dCA9IHtpc0NhbmNlbGVkOiBmYWxzZX07XG5cblx0c3Bhd25lZC5raWxsID0gc3Bhd25lZEtpbGwuYmluZChudWxsLCBzcGF3bmVkLmtpbGwuYmluZChzcGF3bmVkKSk7XG5cdHNwYXduZWQuY2FuY2VsID0gc3Bhd25lZENhbmNlbC5iaW5kKG51bGwsIHNwYXduZWQsIGNvbnRleHQpO1xuXG5cdGNvbnN0IGhhbmRsZVByb21pc2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3QgW3tlcnJvciwgZXhpdENvZGUsIHNpZ25hbCwgdGltZWRPdXR9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdCwgYWxsUmVzdWx0XSA9IGF3YWl0IGdldFNwYXduZWRSZXN1bHQoc3Bhd25lZCwgcGFyc2VkLm9wdGlvbnMsIHByb2Nlc3NEb25lKTtcblx0XHRjb25zdCBzdGRvdXQgPSBoYW5kbGVPdXRwdXQocGFyc2VkLm9wdGlvbnMsIHN0ZG91dFJlc3VsdCk7XG5cdFx0Y29uc3Qgc3RkZXJyID0gaGFuZGxlT3V0cHV0KHBhcnNlZC5vcHRpb25zLCBzdGRlcnJSZXN1bHQpO1xuXHRcdGNvbnN0IGFsbCA9IGhhbmRsZU91dHB1dChwYXJzZWQub3B0aW9ucywgYWxsUmVzdWx0KTtcblxuXHRcdGlmIChlcnJvciB8fCBleGl0Q29kZSAhPT0gMCB8fCBzaWduYWwgIT09IG51bGwpIHtcblx0XHRcdGNvbnN0IHJldHVybmVkRXJyb3IgPSBtYWtlRXJyb3Ioe1xuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0ZXhpdENvZGUsXG5cdFx0XHRcdHNpZ25hbCxcblx0XHRcdFx0c3Rkb3V0LFxuXHRcdFx0XHRzdGRlcnIsXG5cdFx0XHRcdGFsbCxcblx0XHRcdFx0Y29tbWFuZCxcblx0XHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRcdHBhcnNlZCxcblx0XHRcdFx0dGltZWRPdXQsXG5cdFx0XHRcdGlzQ2FuY2VsZWQ6IGNvbnRleHQuaXNDYW5jZWxlZCB8fCAocGFyc2VkLm9wdGlvbnMuc2lnbmFsID8gcGFyc2VkLm9wdGlvbnMuc2lnbmFsLmFib3J0ZWQgOiBmYWxzZSksXG5cdFx0XHRcdGtpbGxlZDogc3Bhd25lZC5raWxsZWQsXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5yZWplY3QpIHtcblx0XHRcdFx0cmV0dXJuIHJldHVybmVkRXJyb3I7XG5cdFx0XHR9XG5cblx0XHRcdHRocm93IHJldHVybmVkRXJyb3I7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvbW1hbmQsXG5cdFx0XHRlc2NhcGVkQ29tbWFuZCxcblx0XHRcdGV4aXRDb2RlOiAwLFxuXHRcdFx0c3Rkb3V0LFxuXHRcdFx0c3RkZXJyLFxuXHRcdFx0YWxsLFxuXHRcdFx0ZmFpbGVkOiBmYWxzZSxcblx0XHRcdHRpbWVkT3V0OiBmYWxzZSxcblx0XHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdFx0a2lsbGVkOiBmYWxzZSxcblx0XHR9O1xuXHR9O1xuXG5cdGNvbnN0IGhhbmRsZVByb21pc2VPbmNlID0gb25ldGltZShoYW5kbGVQcm9taXNlKTtcblxuXHRoYW5kbGVJbnB1dChzcGF3bmVkLCBwYXJzZWQub3B0aW9ucy5pbnB1dCk7XG5cblx0c3Bhd25lZC5hbGwgPSBtYWtlQWxsU3RyZWFtKHNwYXduZWQsIHBhcnNlZC5vcHRpb25zKTtcblxuXHRyZXR1cm4gbWVyZ2VQcm9taXNlKHNwYXduZWQsIGhhbmRsZVByb21pc2VPbmNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWNhU3luYyhmaWxlLCBhcmdzLCBvcHRpb25zKSB7XG5cdGNvbnN0IHBhcnNlZCA9IGhhbmRsZUFyZ3VtZW50cyhmaWxlLCBhcmdzLCBvcHRpb25zKTtcblx0Y29uc3QgY29tbWFuZCA9IGpvaW5Db21tYW5kKGZpbGUsIGFyZ3MpO1xuXHRjb25zdCBlc2NhcGVkQ29tbWFuZCA9IGdldEVzY2FwZWRDb21tYW5kKGZpbGUsIGFyZ3MpO1xuXG5cdHZhbGlkYXRlSW5wdXRTeW5jKHBhcnNlZC5vcHRpb25zKTtcblxuXHRsZXQgcmVzdWx0O1xuXHR0cnkge1xuXHRcdHJlc3VsdCA9IGNoaWxkUHJvY2Vzcy5zcGF3blN5bmMocGFyc2VkLmZpbGUsIHBhcnNlZC5hcmdzLCBwYXJzZWQub3B0aW9ucyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0dGhyb3cgbWFrZUVycm9yKHtcblx0XHRcdGVycm9yLFxuXHRcdFx0c3Rkb3V0OiAnJyxcblx0XHRcdHN0ZGVycjogJycsXG5cdFx0XHRhbGw6ICcnLFxuXHRcdFx0Y29tbWFuZCxcblx0XHRcdGVzY2FwZWRDb21tYW5kLFxuXHRcdFx0cGFyc2VkLFxuXHRcdFx0dGltZWRPdXQ6IGZhbHNlLFxuXHRcdFx0aXNDYW5jZWxlZDogZmFsc2UsXG5cdFx0XHRraWxsZWQ6IGZhbHNlLFxuXHRcdH0pO1xuXHR9XG5cblx0Y29uc3Qgc3Rkb3V0ID0gaGFuZGxlT3V0cHV0KHBhcnNlZC5vcHRpb25zLCByZXN1bHQuc3Rkb3V0LCByZXN1bHQuZXJyb3IpO1xuXHRjb25zdCBzdGRlcnIgPSBoYW5kbGVPdXRwdXQocGFyc2VkLm9wdGlvbnMsIHJlc3VsdC5zdGRlcnIsIHJlc3VsdC5lcnJvcik7XG5cblx0aWYgKHJlc3VsdC5lcnJvciB8fCByZXN1bHQuc3RhdHVzICE9PSAwIHx8IHJlc3VsdC5zaWduYWwgIT09IG51bGwpIHtcblx0XHRjb25zdCBlcnJvciA9IG1ha2VFcnJvcih7XG5cdFx0XHRzdGRvdXQsXG5cdFx0XHRzdGRlcnIsXG5cdFx0XHRlcnJvcjogcmVzdWx0LmVycm9yLFxuXHRcdFx0c2lnbmFsOiByZXN1bHQuc2lnbmFsLFxuXHRcdFx0ZXhpdENvZGU6IHJlc3VsdC5zdGF0dXMsXG5cdFx0XHRjb21tYW5kLFxuXHRcdFx0ZXNjYXBlZENvbW1hbmQsXG5cdFx0XHRwYXJzZWQsXG5cdFx0XHR0aW1lZE91dDogcmVzdWx0LmVycm9yICYmIHJlc3VsdC5lcnJvci5jb2RlID09PSAnRVRJTUVET1VUJyxcblx0XHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdFx0a2lsbGVkOiByZXN1bHQuc2lnbmFsICE9PSBudWxsLFxuXHRcdH0pO1xuXG5cdFx0aWYgKCFwYXJzZWQub3B0aW9ucy5yZWplY3QpIHtcblx0XHRcdHJldHVybiBlcnJvcjtcblx0XHR9XG5cblx0XHR0aHJvdyBlcnJvcjtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Y29tbWFuZCxcblx0XHRlc2NhcGVkQ29tbWFuZCxcblx0XHRleGl0Q29kZTogMCxcblx0XHRzdGRvdXQsXG5cdFx0c3RkZXJyLFxuXHRcdGZhaWxlZDogZmFsc2UsXG5cdFx0dGltZWRPdXQ6IGZhbHNlLFxuXHRcdGlzQ2FuY2VsZWQ6IGZhbHNlLFxuXHRcdGtpbGxlZDogZmFsc2UsXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYUNvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuXHRjb25zdCBbZmlsZSwgLi4uYXJnc10gPSBwYXJzZUNvbW1hbmQoY29tbWFuZCk7XG5cdHJldHVybiBleGVjYShmaWxlLCBhcmdzLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWNhQ29tbWFuZFN5bmMoY29tbWFuZCwgb3B0aW9ucykge1xuXHRjb25zdCBbZmlsZSwgLi4uYXJnc10gPSBwYXJzZUNvbW1hbmQoY29tbWFuZCk7XG5cdHJldHVybiBleGVjYVN5bmMoZmlsZSwgYXJncywgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGVjYU5vZGUoc2NyaXB0UGF0aCwgYXJncywgb3B0aW9ucyA9IHt9KSB7XG5cdGlmIChhcmdzICYmICFBcnJheS5pc0FycmF5KGFyZ3MpICYmIHR5cGVvZiBhcmdzID09PSAnb2JqZWN0Jykge1xuXHRcdG9wdGlvbnMgPSBhcmdzO1xuXHRcdGFyZ3MgPSBbXTtcblx0fVxuXG5cdGNvbnN0IHN0ZGlvID0gbm9ybWFsaXplU3RkaW9Ob2RlKG9wdGlvbnMpO1xuXHRjb25zdCBkZWZhdWx0RXhlY0FyZ3YgPSBwcm9jZXNzLmV4ZWNBcmd2LmZpbHRlcihhcmcgPT4gIWFyZy5zdGFydHNXaXRoKCctLWluc3BlY3QnKSk7XG5cblx0Y29uc3Qge1xuXHRcdG5vZGVQYXRoID0gcHJvY2Vzcy5leGVjUGF0aCxcblx0XHRub2RlT3B0aW9ucyA9IGRlZmF1bHRFeGVjQXJndixcblx0fSA9IG9wdGlvbnM7XG5cblx0cmV0dXJuIGV4ZWNhKFxuXHRcdG5vZGVQYXRoLFxuXHRcdFtcblx0XHRcdC4uLm5vZGVPcHRpb25zLFxuXHRcdFx0c2NyaXB0UGF0aCxcblx0XHRcdC4uLihBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFtdKSxcblx0XHRdLFxuXHRcdHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRzdGRpbjogdW5kZWZpbmVkLFxuXHRcdFx0c3Rkb3V0OiB1bmRlZmluZWQsXG5cdFx0XHRzdGRlcnI6IHVuZGVmaW5lZCxcblx0XHRcdHN0ZGlvLFxuXHRcdFx0c2hlbGw6IGZhbHNlLFxuXHRcdH0sXG5cdCk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RyaXBGaW5hbE5ld2xpbmUoaW5wdXQpIHtcblx0Y29uc3QgTEYgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gJ1xcbicgOiAnXFxuJy5jaGFyQ29kZUF0KCk7XG5cdGNvbnN0IENSID0gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyA/ICdcXHInIDogJ1xccicuY2hhckNvZGVBdCgpO1xuXG5cdGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gTEYpIHtcblx0XHRpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcblx0fVxuXG5cdGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PT0gQ1IpIHtcblx0XHRpbnB1dCA9IGlucHV0LnNsaWNlKDAsIC0xKTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cbiIsICJpbXBvcnQgcHJvY2VzcyBmcm9tICdub2RlOnByb2Nlc3MnO1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB1cmwgZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHBhdGhLZXkgZnJvbSAncGF0aC1rZXknO1xuXG5leHBvcnQgZnVuY3Rpb24gbnBtUnVuUGF0aChvcHRpb25zID0ge30pIHtcblx0Y29uc3Qge1xuXHRcdGN3ZCA9IHByb2Nlc3MuY3dkKCksXG5cdFx0cGF0aDogcGF0aF8gPSBwcm9jZXNzLmVudltwYXRoS2V5KCldLFxuXHRcdGV4ZWNQYXRoID0gcHJvY2Vzcy5leGVjUGF0aCxcblx0fSA9IG9wdGlvbnM7XG5cblx0bGV0IHByZXZpb3VzO1xuXHRjb25zdCBjd2RTdHJpbmcgPSBjd2QgaW5zdGFuY2VvZiBVUkwgPyB1cmwuZmlsZVVSTFRvUGF0aChjd2QpIDogY3dkO1xuXHRsZXQgY3dkUGF0aCA9IHBhdGgucmVzb2x2ZShjd2RTdHJpbmcpO1xuXHRjb25zdCByZXN1bHQgPSBbXTtcblxuXHR3aGlsZSAocHJldmlvdXMgIT09IGN3ZFBhdGgpIHtcblx0XHRyZXN1bHQucHVzaChwYXRoLmpvaW4oY3dkUGF0aCwgJ25vZGVfbW9kdWxlcy8uYmluJykpO1xuXHRcdHByZXZpb3VzID0gY3dkUGF0aDtcblx0XHRjd2RQYXRoID0gcGF0aC5yZXNvbHZlKGN3ZFBhdGgsICcuLicpO1xuXHR9XG5cblx0Ly8gRW5zdXJlIHRoZSBydW5uaW5nIGBub2RlYCBiaW5hcnkgaXMgdXNlZC5cblx0cmVzdWx0LnB1c2gocGF0aC5yZXNvbHZlKGN3ZFN0cmluZywgZXhlY1BhdGgsICcuLicpKTtcblxuXHRyZXR1cm4gWy4uLnJlc3VsdCwgcGF0aF9dLmpvaW4ocGF0aC5kZWxpbWl0ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbnBtUnVuUGF0aEVudih7ZW52ID0gcHJvY2Vzcy5lbnYsIC4uLm9wdGlvbnN9ID0ge30pIHtcblx0ZW52ID0gey4uLmVudn07XG5cblx0Y29uc3QgcGF0aCA9IHBhdGhLZXkoe2Vudn0pO1xuXHRvcHRpb25zLnBhdGggPSBlbnZbcGF0aF07XG5cdGVudltwYXRoXSA9IG5wbVJ1blBhdGgob3B0aW9ucyk7XG5cblx0cmV0dXJuIGVudjtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXRoS2V5KG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCB7XG5cdFx0ZW52ID0gcHJvY2Vzcy5lbnYsXG5cdFx0cGxhdGZvcm0gPSBwcm9jZXNzLnBsYXRmb3JtXG5cdH0gPSBvcHRpb25zO1xuXG5cdGlmIChwbGF0Zm9ybSAhPT0gJ3dpbjMyJykge1xuXHRcdHJldHVybiAnUEFUSCc7XG5cdH1cblxuXHRyZXR1cm4gT2JqZWN0LmtleXMoZW52KS5yZXZlcnNlKCkuZmluZChrZXkgPT4ga2V5LnRvVXBwZXJDYXNlKCkgPT09ICdQQVRIJykgfHwgJ1BhdGgnO1xufVxuIiwgImNvbnN0IGNvcHlQcm9wZXJ0eSA9ICh0bywgZnJvbSwgcHJvcGVydHksIGlnbm9yZU5vbkNvbmZpZ3VyYWJsZSkgPT4ge1xuXHQvLyBgRnVuY3Rpb24jbGVuZ3RoYCBzaG91bGQgcmVmbGVjdCB0aGUgcGFyYW1ldGVycyBvZiBgdG9gIG5vdCBgZnJvbWAgc2luY2Ugd2Uga2VlcCBpdHMgYm9keS5cblx0Ly8gYEZ1bmN0aW9uI3Byb3RvdHlwZWAgaXMgbm9uLXdyaXRhYmxlIGFuZCBub24tY29uZmlndXJhYmxlIHNvIGNhbiBuZXZlciBiZSBtb2RpZmllZC5cblx0aWYgKHByb3BlcnR5ID09PSAnbGVuZ3RoJyB8fCBwcm9wZXJ0eSA9PT0gJ3Byb3RvdHlwZScpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBgRnVuY3Rpb24jYXJndW1lbnRzYCBhbmQgYEZ1bmN0aW9uI2NhbGxlcmAgc2hvdWxkIG5vdCBiZSBjb3BpZWQuIFRoZXkgd2VyZSByZXBvcnRlZCB0byBiZSBwcmVzZW50IGluIGBSZWZsZWN0Lm93bktleXNgIGZvciBzb21lIGRldmljZXMgaW4gUmVhY3QgTmF0aXZlICgjNDEpLCBzbyB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGVtIGhlcmUuXG5cdGlmIChwcm9wZXJ0eSA9PT0gJ2FyZ3VtZW50cycgfHwgcHJvcGVydHkgPT09ICdjYWxsZXInKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdG9EZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0bywgcHJvcGVydHkpO1xuXHRjb25zdCBmcm9tRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZnJvbSwgcHJvcGVydHkpO1xuXG5cdGlmICghY2FuQ29weVByb3BlcnR5KHRvRGVzY3JpcHRvciwgZnJvbURlc2NyaXB0b3IpICYmIGlnbm9yZU5vbkNvbmZpZ3VyYWJsZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0bywgcHJvcGVydHksIGZyb21EZXNjcmlwdG9yKTtcbn07XG5cbi8vIGBPYmplY3QuZGVmaW5lUHJvcGVydHkoKWAgdGhyb3dzIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMsIGlzIG5vdCBjb25maWd1cmFibGUgYW5kIGVpdGhlcjpcbi8vIC0gb25lIGl0cyBkZXNjcmlwdG9ycyBpcyBjaGFuZ2VkXG4vLyAtIGl0IGlzIG5vbi13cml0YWJsZSBhbmQgaXRzIHZhbHVlIGlzIGNoYW5nZWRcbmNvbnN0IGNhbkNvcHlQcm9wZXJ0eSA9IGZ1bmN0aW9uICh0b0Rlc2NyaXB0b3IsIGZyb21EZXNjcmlwdG9yKSB7XG5cdHJldHVybiB0b0Rlc2NyaXB0b3IgPT09IHVuZGVmaW5lZCB8fCB0b0Rlc2NyaXB0b3IuY29uZmlndXJhYmxlIHx8IChcblx0XHR0b0Rlc2NyaXB0b3Iud3JpdGFibGUgPT09IGZyb21EZXNjcmlwdG9yLndyaXRhYmxlICYmXG5cdFx0dG9EZXNjcmlwdG9yLmVudW1lcmFibGUgPT09IGZyb21EZXNjcmlwdG9yLmVudW1lcmFibGUgJiZcblx0XHR0b0Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID09PSBmcm9tRGVzY3JpcHRvci5jb25maWd1cmFibGUgJiZcblx0XHQodG9EZXNjcmlwdG9yLndyaXRhYmxlIHx8IHRvRGVzY3JpcHRvci52YWx1ZSA9PT0gZnJvbURlc2NyaXB0b3IudmFsdWUpXG5cdCk7XG59O1xuXG5jb25zdCBjaGFuZ2VQcm90b3R5cGUgPSAodG8sIGZyb20pID0+IHtcblx0Y29uc3QgZnJvbVByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmcm9tKTtcblx0aWYgKGZyb21Qcm90b3R5cGUgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0bykpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRPYmplY3Quc2V0UHJvdG90eXBlT2YodG8sIGZyb21Qcm90b3R5cGUpO1xufTtcblxuY29uc3Qgd3JhcHBlZFRvU3RyaW5nID0gKHdpdGhOYW1lLCBmcm9tQm9keSkgPT4gYC8qIFdyYXBwZWQgJHt3aXRoTmFtZX0qL1xcbiR7ZnJvbUJvZHl9YDtcblxuY29uc3QgdG9TdHJpbmdEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihGdW5jdGlvbi5wcm90b3R5cGUsICd0b1N0cmluZycpO1xuY29uc3QgdG9TdHJpbmdOYW1lID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsICduYW1lJyk7XG5cbi8vIFdlIGNhbGwgYGZyb20udG9TdHJpbmcoKWAgZWFybHkgKG5vdCBsYXppbHkpIHRvIGVuc3VyZSBgZnJvbWAgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkLlxuLy8gV2UgdXNlIGBiaW5kKClgIGluc3RlYWQgb2YgYSBjbG9zdXJlIGZvciB0aGUgc2FtZSByZWFzb24uXG4vLyBDYWxsaW5nIGBmcm9tLnRvU3RyaW5nKClgIGVhcmx5IGFsc28gYWxsb3dzIGNhY2hpbmcgaXQgaW4gY2FzZSBgdG8udG9TdHJpbmcoKWAgaXMgY2FsbGVkIHNldmVyYWwgdGltZXMuXG5jb25zdCBjaGFuZ2VUb1N0cmluZyA9ICh0bywgZnJvbSwgbmFtZSkgPT4ge1xuXHRjb25zdCB3aXRoTmFtZSA9IG5hbWUgPT09ICcnID8gJycgOiBgd2l0aCAke25hbWUudHJpbSgpfSgpIGA7XG5cdGNvbnN0IG5ld1RvU3RyaW5nID0gd3JhcHBlZFRvU3RyaW5nLmJpbmQobnVsbCwgd2l0aE5hbWUsIGZyb20udG9TdHJpbmcoKSk7XG5cdC8vIEVuc3VyZSBgdG8udG9TdHJpbmcudG9TdHJpbmdgIGlzIG5vbi1lbnVtZXJhYmxlIGFuZCBoYXMgdGhlIHNhbWUgYHNhbWVgXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdUb1N0cmluZywgJ25hbWUnLCB0b1N0cmluZ05hbWUpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkodG8sICd0b1N0cmluZycsIHsuLi50b1N0cmluZ0Rlc2NyaXB0b3IsIHZhbHVlOiBuZXdUb1N0cmluZ30pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWltaWNGdW5jdGlvbih0bywgZnJvbSwge2lnbm9yZU5vbkNvbmZpZ3VyYWJsZSA9IGZhbHNlfSA9IHt9KSB7XG5cdGNvbnN0IHtuYW1lfSA9IHRvO1xuXG5cdGZvciAoY29uc3QgcHJvcGVydHkgb2YgUmVmbGVjdC5vd25LZXlzKGZyb20pKSB7XG5cdFx0Y29weVByb3BlcnR5KHRvLCBmcm9tLCBwcm9wZXJ0eSwgaWdub3JlTm9uQ29uZmlndXJhYmxlKTtcblx0fVxuXG5cdGNoYW5nZVByb3RvdHlwZSh0bywgZnJvbSk7XG5cdGNoYW5nZVRvU3RyaW5nKHRvLCBmcm9tLCBuYW1lKTtcblxuXHRyZXR1cm4gdG87XG59XG4iLCAiaW1wb3J0IG1pbWljRnVuY3Rpb24gZnJvbSAnbWltaWMtZm4nO1xuXG5jb25zdCBjYWxsZWRGdW5jdGlvbnMgPSBuZXcgV2Vha01hcCgpO1xuXG5jb25zdCBvbmV0aW1lID0gKGZ1bmN0aW9uXywgb3B0aW9ucyA9IHt9KSA9PiB7XG5cdGlmICh0eXBlb2YgZnVuY3Rpb25fICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBmdW5jdGlvbicpO1xuXHR9XG5cblx0bGV0IHJldHVyblZhbHVlO1xuXHRsZXQgY2FsbENvdW50ID0gMDtcblx0Y29uc3QgZnVuY3Rpb25OYW1lID0gZnVuY3Rpb25fLmRpc3BsYXlOYW1lIHx8IGZ1bmN0aW9uXy5uYW1lIHx8ICc8YW5vbnltb3VzPic7XG5cblx0Y29uc3Qgb25ldGltZSA9IGZ1bmN0aW9uICguLi5hcmd1bWVudHNfKSB7XG5cdFx0Y2FsbGVkRnVuY3Rpb25zLnNldChvbmV0aW1lLCArK2NhbGxDb3VudCk7XG5cblx0XHRpZiAoY2FsbENvdW50ID09PSAxKSB7XG5cdFx0XHRyZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uXy5hcHBseSh0aGlzLCBhcmd1bWVudHNfKTtcblx0XHRcdGZ1bmN0aW9uXyA9IG51bGw7XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLnRocm93ID09PSB0cnVlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZ1bmN0aW9uIFxcYCR7ZnVuY3Rpb25OYW1lfVxcYCBjYW4gb25seSBiZSBjYWxsZWQgb25jZWApO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0fTtcblxuXHRtaW1pY0Z1bmN0aW9uKG9uZXRpbWUsIGZ1bmN0aW9uXyk7XG5cdGNhbGxlZEZ1bmN0aW9ucy5zZXQob25ldGltZSwgY2FsbENvdW50KTtcblxuXHRyZXR1cm4gb25ldGltZTtcbn07XG5cbm9uZXRpbWUuY2FsbENvdW50ID0gZnVuY3Rpb25fID0+IHtcblx0aWYgKCFjYWxsZWRGdW5jdGlvbnMuaGFzKGZ1bmN0aW9uXykpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYFRoZSBnaXZlbiBmdW5jdGlvbiBcXGAke2Z1bmN0aW9uXy5uYW1lfVxcYCBpcyBub3Qgd3JhcHBlZCBieSB0aGUgXFxgb25ldGltZVxcYCBwYWNrYWdlYCk7XG5cdH1cblxuXHRyZXR1cm4gY2FsbGVkRnVuY3Rpb25zLmdldChmdW5jdGlvbl8pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgb25ldGltZTtcbiIsICJpbXBvcnR7Y29uc3RhbnRzfWZyb21cIm5vZGU6b3NcIjtcblxuaW1wb3J0e1NJR1JUTUFYfWZyb21cIi4vcmVhbHRpbWUuanNcIjtcbmltcG9ydHtnZXRTaWduYWxzfWZyb21cIi4vc2lnbmFscy5qc1wiO1xuXG5cblxuY29uc3QgZ2V0U2lnbmFsc0J5TmFtZT1mdW5jdGlvbigpe1xuY29uc3Qgc2lnbmFscz1nZXRTaWduYWxzKCk7XG5yZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHNpZ25hbHMubWFwKGdldFNpZ25hbEJ5TmFtZSkpO1xufTtcblxuY29uc3QgZ2V0U2lnbmFsQnlOYW1lPWZ1bmN0aW9uKHtcbm5hbWUsXG5udW1iZXIsXG5kZXNjcmlwdGlvbixcbnN1cHBvcnRlZCxcbmFjdGlvbixcbmZvcmNlZCxcbnN0YW5kYXJkfSlcbntcbnJldHVybltcbm5hbWUsXG57bmFtZSxudW1iZXIsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9XTtcblxufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25hbHNCeU5hbWU9Z2V0U2lnbmFsc0J5TmFtZSgpO1xuXG5cblxuXG5jb25zdCBnZXRTaWduYWxzQnlOdW1iZXI9ZnVuY3Rpb24oKXtcbmNvbnN0IHNpZ25hbHM9Z2V0U2lnbmFscygpO1xuY29uc3QgbGVuZ3RoPVNJR1JUTUFYKzE7XG5jb25zdCBzaWduYWxzQT1BcnJheS5mcm9tKHtsZW5ndGh9LCh2YWx1ZSxudW1iZXIpPT5cbmdldFNpZ25hbEJ5TnVtYmVyKG51bWJlcixzaWduYWxzKSk7XG5cbnJldHVybiBPYmplY3QuYXNzaWduKHt9LC4uLnNpZ25hbHNBKTtcbn07XG5cbmNvbnN0IGdldFNpZ25hbEJ5TnVtYmVyPWZ1bmN0aW9uKG51bWJlcixzaWduYWxzKXtcbmNvbnN0IHNpZ25hbD1maW5kU2lnbmFsQnlOdW1iZXIobnVtYmVyLHNpZ25hbHMpO1xuXG5pZihzaWduYWw9PT11bmRlZmluZWQpe1xucmV0dXJue307XG59XG5cbmNvbnN0e25hbWUsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9PXNpZ25hbDtcbnJldHVybntcbltudW1iZXJdOntcbm5hbWUsXG5udW1iZXIsXG5kZXNjcmlwdGlvbixcbnN1cHBvcnRlZCxcbmFjdGlvbixcbmZvcmNlZCxcbnN0YW5kYXJkfX07XG5cblxufTtcblxuXG5cbmNvbnN0IGZpbmRTaWduYWxCeU51bWJlcj1mdW5jdGlvbihudW1iZXIsc2lnbmFscyl7XG5jb25zdCBzaWduYWw9c2lnbmFscy5maW5kKCh7bmFtZX0pPT5jb25zdGFudHMuc2lnbmFsc1tuYW1lXT09PW51bWJlcik7XG5cbmlmKHNpZ25hbCE9PXVuZGVmaW5lZCl7XG5yZXR1cm4gc2lnbmFsO1xufVxuXG5yZXR1cm4gc2lnbmFscy5maW5kKChzaWduYWxBKT0+c2lnbmFsQS5udW1iZXI9PT1udW1iZXIpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25hbHNCeU51bWJlcj1nZXRTaWduYWxzQnlOdW1iZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1haW4uanMubWFwIiwgIlxuZXhwb3J0IGNvbnN0IGdldFJlYWx0aW1lU2lnbmFscz1mdW5jdGlvbigpe1xuY29uc3QgbGVuZ3RoPVNJR1JUTUFYLVNJR1JUTUlOKzE7XG5yZXR1cm4gQXJyYXkuZnJvbSh7bGVuZ3RofSxnZXRSZWFsdGltZVNpZ25hbCk7XG59O1xuXG5jb25zdCBnZXRSZWFsdGltZVNpZ25hbD1mdW5jdGlvbih2YWx1ZSxpbmRleCl7XG5yZXR1cm57XG5uYW1lOmBTSUdSVCR7aW5kZXgrMX1gLFxubnVtYmVyOlNJR1JUTUlOK2luZGV4LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkFwcGxpY2F0aW9uLXNwZWNpZmljIHNpZ25hbCAocmVhbHRpbWUpXCIsXG5zdGFuZGFyZDpcInBvc2l4XCJ9O1xuXG59O1xuXG5jb25zdCBTSUdSVE1JTj0zNDtcbmV4cG9ydCBjb25zdCBTSUdSVE1BWD02NDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lLmpzLm1hcCIsICJpbXBvcnR7Y29uc3RhbnRzfWZyb21cIm5vZGU6b3NcIjtcblxuaW1wb3J0e1NJR05BTFN9ZnJvbVwiLi9jb3JlLmpzXCI7XG5pbXBvcnR7Z2V0UmVhbHRpbWVTaWduYWxzfWZyb21cIi4vcmVhbHRpbWUuanNcIjtcblxuXG5cbmV4cG9ydCBjb25zdCBnZXRTaWduYWxzPWZ1bmN0aW9uKCl7XG5jb25zdCByZWFsdGltZVNpZ25hbHM9Z2V0UmVhbHRpbWVTaWduYWxzKCk7XG5jb25zdCBzaWduYWxzPVsuLi5TSUdOQUxTLC4uLnJlYWx0aW1lU2lnbmFsc10ubWFwKG5vcm1hbGl6ZVNpZ25hbCk7XG5yZXR1cm4gc2lnbmFscztcbn07XG5cblxuXG5cblxuXG5cbmNvbnN0IG5vcm1hbGl6ZVNpZ25hbD1mdW5jdGlvbih7XG5uYW1lLFxubnVtYmVyOmRlZmF1bHROdW1iZXIsXG5kZXNjcmlwdGlvbixcbmFjdGlvbixcbmZvcmNlZD1mYWxzZSxcbnN0YW5kYXJkfSlcbntcbmNvbnN0e1xuc2lnbmFsczp7W25hbWVdOmNvbnN0YW50U2lnbmFsfX09XG5jb25zdGFudHM7XG5jb25zdCBzdXBwb3J0ZWQ9Y29uc3RhbnRTaWduYWwhPT11bmRlZmluZWQ7XG5jb25zdCBudW1iZXI9c3VwcG9ydGVkP2NvbnN0YW50U2lnbmFsOmRlZmF1bHROdW1iZXI7XG5yZXR1cm57bmFtZSxudW1iZXIsZGVzY3JpcHRpb24sc3VwcG9ydGVkLGFjdGlvbixmb3JjZWQsc3RhbmRhcmR9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ25hbHMuanMubWFwIiwgIlxuXG5leHBvcnQgY29uc3QgU0lHTkFMUz1bXG57XG5uYW1lOlwiU0lHSFVQXCIsXG5udW1iZXI6MSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hbCBjbG9zZWRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdJTlRcIixcbm51bWJlcjoyLFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlVzZXIgaW50ZXJydXB0aW9uIHdpdGggQ1RSTC1DXCIsXG5zdGFuZGFyZDpcImFuc2lcIn0sXG5cbntcbm5hbWU6XCJTSUdRVUlUXCIsXG5udW1iZXI6MyxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlwiVXNlciBpbnRlcnJ1cHRpb24gd2l0aCBDVFJMLVxcXFxcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdJTExcIixcbm51bWJlcjo0LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJJbnZhbGlkIG1hY2hpbmUgaW5zdHJ1Y3Rpb25cIixcbnN0YW5kYXJkOlwiYW5zaVwifSxcblxue1xubmFtZTpcIlNJR1RSQVBcIixcbm51bWJlcjo1LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJEZWJ1Z2dlciBicmVha3BvaW50XCIsXG5zdGFuZGFyZDpcInBvc2l4XCJ9LFxuXG57XG5uYW1lOlwiU0lHQUJSVFwiLFxubnVtYmVyOjYsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIkFib3J0ZWRcIixcbnN0YW5kYXJkOlwiYW5zaVwifSxcblxue1xubmFtZTpcIlNJR0lPVFwiLFxubnVtYmVyOjYsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIkFib3J0ZWRcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHQlVTXCIsXG5udW1iZXI6NyxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlxuXCJCdXMgZXJyb3IgZHVlIHRvIG1pc2FsaWduZWQsIG5vbi1leGlzdGluZyBhZGRyZXNzIG9yIHBhZ2luZyBlcnJvclwiLFxuc3RhbmRhcmQ6XCJic2RcIn0sXG5cbntcbm5hbWU6XCJTSUdFTVRcIixcbm51bWJlcjo3LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkNvbW1hbmQgc2hvdWxkIGJlIGVtdWxhdGVkIGJ1dCBpcyBub3QgaW1wbGVtZW50ZWRcIixcbnN0YW5kYXJkOlwib3RoZXJcIn0sXG5cbntcbm5hbWU6XCJTSUdGUEVcIixcbm51bWJlcjo4LFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJGbG9hdGluZyBwb2ludCBhcml0aG1ldGljIGVycm9yXCIsXG5zdGFuZGFyZDpcImFuc2lcIn0sXG5cbntcbm5hbWU6XCJTSUdLSUxMXCIsXG5udW1iZXI6OSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJGb3JjZWQgdGVybWluYXRpb25cIixcbnN0YW5kYXJkOlwicG9zaXhcIixcbmZvcmNlZDp0cnVlfSxcblxue1xubmFtZTpcIlNJR1VTUjFcIixcbm51bWJlcjoxMCxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJBcHBsaWNhdGlvbi1zcGVjaWZpYyBzaWduYWxcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdTRUdWXCIsXG5udW1iZXI6MTEsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIlNlZ21lbnRhdGlvbiBmYXVsdFwiLFxuc3RhbmRhcmQ6XCJhbnNpXCJ9LFxuXG57XG5uYW1lOlwiU0lHVVNSMlwiLFxubnVtYmVyOjEyLFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIkFwcGxpY2F0aW9uLXNwZWNpZmljIHNpZ25hbFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1BJUEVcIixcbm51bWJlcjoxMyxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJCcm9rZW4gcGlwZSBvciBzb2NrZXRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdBTFJNXCIsXG5udW1iZXI6MTQsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiVGltZW91dCBvciB0aW1lclwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1RFUk1cIixcbm51bWJlcjoxNSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hdGlvblwiLFxuc3RhbmRhcmQ6XCJhbnNpXCJ9LFxuXG57XG5uYW1lOlwiU0lHU1RLRkxUXCIsXG5udW1iZXI6MTYsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiU3RhY2sgaXMgZW1wdHkgb3Igb3ZlcmZsb3dlZFwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifSxcblxue1xubmFtZTpcIlNJR0NITERcIixcbm51bWJlcjoxNyxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJDaGlsZCBwcm9jZXNzIHRlcm1pbmF0ZWQsIHBhdXNlZCBvciB1bnBhdXNlZFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR0NMRFwiLFxubnVtYmVyOjE3LFxuYWN0aW9uOlwiaWdub3JlXCIsXG5kZXNjcmlwdGlvbjpcIkNoaWxkIHByb2Nlc3MgdGVybWluYXRlZCwgcGF1c2VkIG9yIHVucGF1c2VkXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHQ09OVFwiLFxubnVtYmVyOjE4LFxuYWN0aW9uOlwidW5wYXVzZVwiLFxuZGVzY3JpcHRpb246XCJVbnBhdXNlZFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwiLFxuZm9yY2VkOnRydWV9LFxuXG57XG5uYW1lOlwiU0lHU1RPUFwiLFxubnVtYmVyOjE5LFxuYWN0aW9uOlwicGF1c2VcIixcbmRlc2NyaXB0aW9uOlwiUGF1c2VkXCIsXG5zdGFuZGFyZDpcInBvc2l4XCIsXG5mb3JjZWQ6dHJ1ZX0sXG5cbntcbm5hbWU6XCJTSUdUU1RQXCIsXG5udW1iZXI6MjAsXG5hY3Rpb246XCJwYXVzZVwiLFxuZGVzY3JpcHRpb246XCJQYXVzZWQgdXNpbmcgQ1RSTC1aIG9yIFxcXCJzdXNwZW5kXFxcIlwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR1RUSU5cIixcbm51bWJlcjoyMSxcbmFjdGlvbjpcInBhdXNlXCIsXG5kZXNjcmlwdGlvbjpcIkJhY2tncm91bmQgcHJvY2VzcyBjYW5ub3QgcmVhZCB0ZXJtaW5hbCBpbnB1dFwiLFxuc3RhbmRhcmQ6XCJwb3NpeFwifSxcblxue1xubmFtZTpcIlNJR0JSRUFLXCIsXG5udW1iZXI6MjEsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiVXNlciBpbnRlcnJ1cHRpb24gd2l0aCBDVFJMLUJSRUFLXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHVFRPVVwiLFxubnVtYmVyOjIyLFxuYWN0aW9uOlwicGF1c2VcIixcbmRlc2NyaXB0aW9uOlwiQmFja2dyb3VuZCBwcm9jZXNzIGNhbm5vdCB3cml0ZSB0byB0ZXJtaW5hbCBvdXRwdXRcIixcbnN0YW5kYXJkOlwicG9zaXhcIn0sXG5cbntcbm5hbWU6XCJTSUdVUkdcIixcbm51bWJlcjoyMyxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJTb2NrZXQgcmVjZWl2ZWQgb3V0LW9mLWJhbmQgZGF0YVwiLFxuc3RhbmRhcmQ6XCJic2RcIn0sXG5cbntcbm5hbWU6XCJTSUdYQ1BVXCIsXG5udW1iZXI6MjQsXG5hY3Rpb246XCJjb3JlXCIsXG5kZXNjcmlwdGlvbjpcIlByb2Nlc3MgdGltZWQgb3V0XCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR1hGU1pcIixcbm51bWJlcjoyNSxcbmFjdGlvbjpcImNvcmVcIixcbmRlc2NyaXB0aW9uOlwiRmlsZSB0b28gYmlnXCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR1ZUQUxSTVwiLFxubnVtYmVyOjI2LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlRpbWVvdXQgb3IgdGltZXJcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHUFJPRlwiLFxubnVtYmVyOjI3LFxuYWN0aW9uOlwidGVybWluYXRlXCIsXG5kZXNjcmlwdGlvbjpcIlRpbWVvdXQgb3IgdGltZXJcIixcbnN0YW5kYXJkOlwiYnNkXCJ9LFxuXG57XG5uYW1lOlwiU0lHV0lOQ0hcIixcbm51bWJlcjoyOCxcbmFjdGlvbjpcImlnbm9yZVwiLFxuZGVzY3JpcHRpb246XCJUZXJtaW5hbCB3aW5kb3cgc2l6ZSBjaGFuZ2VkXCIsXG5zdGFuZGFyZDpcImJzZFwifSxcblxue1xubmFtZTpcIlNJR0lPXCIsXG5udW1iZXI6MjksXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiSS9PIGlzIGF2YWlsYWJsZVwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifSxcblxue1xubmFtZTpcIlNJR1BPTExcIixcbm51bWJlcjoyOSxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJXYXRjaGVkIGV2ZW50XCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHSU5GT1wiLFxubnVtYmVyOjI5LFxuYWN0aW9uOlwiaWdub3JlXCIsXG5kZXNjcmlwdGlvbjpcIlJlcXVlc3QgZm9yIHByb2Nlc3MgaW5mb3JtYXRpb25cIixcbnN0YW5kYXJkOlwib3RoZXJcIn0sXG5cbntcbm5hbWU6XCJTSUdQV1JcIixcbm51bWJlcjozMCxcbmFjdGlvbjpcInRlcm1pbmF0ZVwiLFxuZGVzY3JpcHRpb246XCJEZXZpY2UgcnVubmluZyBvdXQgb2YgcG93ZXJcIixcbnN0YW5kYXJkOlwic3lzdGVtdlwifSxcblxue1xubmFtZTpcIlNJR1NZU1wiLFxubnVtYmVyOjMxLFxuYWN0aW9uOlwiY29yZVwiLFxuZGVzY3JpcHRpb246XCJJbnZhbGlkIHN5c3RlbSBjYWxsXCIsXG5zdGFuZGFyZDpcIm90aGVyXCJ9LFxuXG57XG5uYW1lOlwiU0lHVU5VU0VEXCIsXG5udW1iZXI6MzEsXG5hY3Rpb246XCJ0ZXJtaW5hdGVcIixcbmRlc2NyaXB0aW9uOlwiSW52YWxpZCBzeXN0ZW0gY2FsbFwiLFxuc3RhbmRhcmQ6XCJvdGhlclwifV07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcCIsICJpbXBvcnQge3NpZ25hbHNCeU5hbWV9IGZyb20gJ2h1bWFuLXNpZ25hbHMnO1xuXG5jb25zdCBnZXRFcnJvclByZWZpeCA9ICh7dGltZWRPdXQsIHRpbWVvdXQsIGVycm9yQ29kZSwgc2lnbmFsLCBzaWduYWxEZXNjcmlwdGlvbiwgZXhpdENvZGUsIGlzQ2FuY2VsZWR9KSA9PiB7XG5cdGlmICh0aW1lZE91dCkge1xuXHRcdHJldHVybiBgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH0gbWlsbGlzZWNvbmRzYDtcblx0fVxuXG5cdGlmIChpc0NhbmNlbGVkKSB7XG5cdFx0cmV0dXJuICd3YXMgY2FuY2VsZWQnO1xuXHR9XG5cblx0aWYgKGVycm9yQ29kZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGBmYWlsZWQgd2l0aCAke2Vycm9yQ29kZX1gO1xuXHR9XG5cblx0aWYgKHNpZ25hbCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGB3YXMga2lsbGVkIHdpdGggJHtzaWduYWx9ICgke3NpZ25hbERlc2NyaXB0aW9ufSlgO1xuXHR9XG5cblx0aWYgKGV4aXRDb2RlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gYGZhaWxlZCB3aXRoIGV4aXQgY29kZSAke2V4aXRDb2RlfWA7XG5cdH1cblxuXHRyZXR1cm4gJ2ZhaWxlZCc7XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZUVycm9yID0gKHtcblx0c3Rkb3V0LFxuXHRzdGRlcnIsXG5cdGFsbCxcblx0ZXJyb3IsXG5cdHNpZ25hbCxcblx0ZXhpdENvZGUsXG5cdGNvbW1hbmQsXG5cdGVzY2FwZWRDb21tYW5kLFxuXHR0aW1lZE91dCxcblx0aXNDYW5jZWxlZCxcblx0a2lsbGVkLFxuXHRwYXJzZWQ6IHtvcHRpb25zOiB7dGltZW91dH19LFxufSkgPT4ge1xuXHQvLyBgc2lnbmFsYCBhbmQgYGV4aXRDb2RlYCBlbWl0dGVkIG9uIGBzcGF3bmVkLm9uKCdleGl0JylgIGV2ZW50IGNhbiBiZSBgbnVsbGAuXG5cdC8vIFdlIG5vcm1hbGl6ZSB0aGVtIHRvIGB1bmRlZmluZWRgXG5cdGV4aXRDb2RlID0gZXhpdENvZGUgPT09IG51bGwgPyB1bmRlZmluZWQgOiBleGl0Q29kZTtcblx0c2lnbmFsID0gc2lnbmFsID09PSBudWxsID8gdW5kZWZpbmVkIDogc2lnbmFsO1xuXHRjb25zdCBzaWduYWxEZXNjcmlwdGlvbiA9IHNpZ25hbCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogc2lnbmFsc0J5TmFtZVtzaWduYWxdLmRlc2NyaXB0aW9uO1xuXG5cdGNvbnN0IGVycm9yQ29kZSA9IGVycm9yICYmIGVycm9yLmNvZGU7XG5cblx0Y29uc3QgcHJlZml4ID0gZ2V0RXJyb3JQcmVmaXgoe3RpbWVkT3V0LCB0aW1lb3V0LCBlcnJvckNvZGUsIHNpZ25hbCwgc2lnbmFsRGVzY3JpcHRpb24sIGV4aXRDb2RlLCBpc0NhbmNlbGVkfSk7XG5cdGNvbnN0IGV4ZWNhTWVzc2FnZSA9IGBDb21tYW5kICR7cHJlZml4fTogJHtjb21tYW5kfWA7XG5cdGNvbnN0IGlzRXJyb3IgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXJyb3IpID09PSAnW29iamVjdCBFcnJvcl0nO1xuXHRjb25zdCBzaG9ydE1lc3NhZ2UgPSBpc0Vycm9yID8gYCR7ZXhlY2FNZXNzYWdlfVxcbiR7ZXJyb3IubWVzc2FnZX1gIDogZXhlY2FNZXNzYWdlO1xuXHRjb25zdCBtZXNzYWdlID0gW3Nob3J0TWVzc2FnZSwgc3RkZXJyLCBzdGRvdXRdLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblxuXHRpZiAoaXNFcnJvcikge1xuXHRcdGVycm9yLm9yaWdpbmFsTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0ZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH0gZWxzZSB7XG5cdFx0ZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG5cdH1cblxuXHRlcnJvci5zaG9ydE1lc3NhZ2UgPSBzaG9ydE1lc3NhZ2U7XG5cdGVycm9yLmNvbW1hbmQgPSBjb21tYW5kO1xuXHRlcnJvci5lc2NhcGVkQ29tbWFuZCA9IGVzY2FwZWRDb21tYW5kO1xuXHRlcnJvci5leGl0Q29kZSA9IGV4aXRDb2RlO1xuXHRlcnJvci5zaWduYWwgPSBzaWduYWw7XG5cdGVycm9yLnNpZ25hbERlc2NyaXB0aW9uID0gc2lnbmFsRGVzY3JpcHRpb247XG5cdGVycm9yLnN0ZG91dCA9IHN0ZG91dDtcblx0ZXJyb3Iuc3RkZXJyID0gc3RkZXJyO1xuXG5cdGlmIChhbGwgIT09IHVuZGVmaW5lZCkge1xuXHRcdGVycm9yLmFsbCA9IGFsbDtcblx0fVxuXG5cdGlmICgnYnVmZmVyZWREYXRhJyBpbiBlcnJvcikge1xuXHRcdGRlbGV0ZSBlcnJvci5idWZmZXJlZERhdGE7XG5cdH1cblxuXHRlcnJvci5mYWlsZWQgPSB0cnVlO1xuXHRlcnJvci50aW1lZE91dCA9IEJvb2xlYW4odGltZWRPdXQpO1xuXHRlcnJvci5pc0NhbmNlbGVkID0gaXNDYW5jZWxlZDtcblx0ZXJyb3Iua2lsbGVkID0ga2lsbGVkICYmICF0aW1lZE91dDtcblxuXHRyZXR1cm4gZXJyb3I7XG59O1xuIiwgImNvbnN0IGFsaWFzZXMgPSBbJ3N0ZGluJywgJ3N0ZG91dCcsICdzdGRlcnInXTtcblxuY29uc3QgaGFzQWxpYXMgPSBvcHRpb25zID0+IGFsaWFzZXMuc29tZShhbGlhcyA9PiBvcHRpb25zW2FsaWFzXSAhPT0gdW5kZWZpbmVkKTtcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVN0ZGlvID0gb3B0aW9ucyA9PiB7XG5cdGlmICghb3B0aW9ucykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHtzdGRpb30gPSBvcHRpb25zO1xuXG5cdGlmIChzdGRpbyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGFsaWFzZXMubWFwKGFsaWFzID0+IG9wdGlvbnNbYWxpYXNdKTtcblx0fVxuXG5cdGlmIChoYXNBbGlhcyhvcHRpb25zKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihgSXQncyBub3QgcG9zc2libGUgdG8gcHJvdmlkZSBcXGBzdGRpb1xcYCBpbiBjb21iaW5hdGlvbiB3aXRoIG9uZSBvZiAke2FsaWFzZXMubWFwKGFsaWFzID0+IGBcXGAke2FsaWFzfVxcYGApLmpvaW4oJywgJyl9YCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIHN0ZGlvID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBzdGRpbztcblx0fVxuXG5cdGlmICghQXJyYXkuaXNBcnJheShzdGRpbykpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBzdGRpb1xcYCB0byBiZSBvZiB0eXBlIFxcYHN0cmluZ1xcYCBvciBcXGBBcnJheVxcYCwgZ290IFxcYCR7dHlwZW9mIHN0ZGlvfVxcYGApO1xuXHR9XG5cblx0Y29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoc3RkaW8ubGVuZ3RoLCBhbGlhc2VzLmxlbmd0aCk7XG5cdHJldHVybiBBcnJheS5mcm9tKHtsZW5ndGh9LCAodmFsdWUsIGluZGV4KSA9PiBzdGRpb1tpbmRleF0pO1xufTtcblxuLy8gYGlwY2AgaXMgcHVzaGVkIHVubGVzcyBpdCBpcyBhbHJlYWR5IHByZXNlbnRcbmV4cG9ydCBjb25zdCBub3JtYWxpemVTdGRpb05vZGUgPSBvcHRpb25zID0+IHtcblx0Y29uc3Qgc3RkaW8gPSBub3JtYWxpemVTdGRpbyhvcHRpb25zKTtcblxuXHRpZiAoc3RkaW8gPT09ICdpcGMnKSB7XG5cdFx0cmV0dXJuICdpcGMnO1xuXHR9XG5cblx0aWYgKHN0ZGlvID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHN0ZGlvID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBbc3RkaW8sIHN0ZGlvLCBzdGRpbywgJ2lwYyddO1xuXHR9XG5cblx0aWYgKHN0ZGlvLmluY2x1ZGVzKCdpcGMnKSkge1xuXHRcdHJldHVybiBzdGRpbztcblx0fVxuXG5cdHJldHVybiBbLi4uc3RkaW8sICdpcGMnXTtcbn07XG4iLCAiaW1wb3J0IG9zIGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IG9uRXhpdCBmcm9tICdzaWduYWwtZXhpdCc7XG5cbmNvbnN0IERFRkFVTFRfRk9SQ0VfS0lMTF9USU1FT1VUID0gMTAwMCAqIDU7XG5cbi8vIE1vbmtleS1wYXRjaGVzIGBjaGlsZFByb2Nlc3Mua2lsbCgpYCB0byBhZGQgYGZvcmNlS2lsbEFmdGVyVGltZW91dGAgYmVoYXZpb3JcbmV4cG9ydCBjb25zdCBzcGF3bmVkS2lsbCA9IChraWxsLCBzaWduYWwgPSAnU0lHVEVSTScsIG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBraWxsUmVzdWx0ID0ga2lsbChzaWduYWwpO1xuXHRzZXRLaWxsVGltZW91dChraWxsLCBzaWduYWwsIG9wdGlvbnMsIGtpbGxSZXN1bHQpO1xuXHRyZXR1cm4ga2lsbFJlc3VsdDtcbn07XG5cbmNvbnN0IHNldEtpbGxUaW1lb3V0ID0gKGtpbGwsIHNpZ25hbCwgb3B0aW9ucywga2lsbFJlc3VsdCkgPT4ge1xuXHRpZiAoIXNob3VsZEZvcmNlS2lsbChzaWduYWwsIG9wdGlvbnMsIGtpbGxSZXN1bHQpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdGltZW91dCA9IGdldEZvcmNlS2lsbEFmdGVyVGltZW91dChvcHRpb25zKTtcblx0Y29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdGtpbGwoJ1NJR0tJTEwnKTtcblx0fSwgdGltZW91dCk7XG5cblx0Ly8gR3VhcmRlZCBiZWNhdXNlIHRoZXJlJ3Mgbm8gYC51bnJlZigpYCB3aGVuIGBleGVjYWAgaXMgdXNlZCBpbiB0aGUgcmVuZGVyZXJcblx0Ly8gcHJvY2VzcyBpbiBFbGVjdHJvbi4gVGhpcyBjYW5ub3QgYmUgdGVzdGVkIHNpbmNlIHdlIGRvbid0IHJ1biB0ZXN0cyBpblxuXHQvLyBFbGVjdHJvbi5cblx0Ly8gaXN0YW5idWwgaWdub3JlIGVsc2Vcblx0aWYgKHQudW5yZWYpIHtcblx0XHR0LnVucmVmKCk7XG5cdH1cbn07XG5cbmNvbnN0IHNob3VsZEZvcmNlS2lsbCA9IChzaWduYWwsIHtmb3JjZUtpbGxBZnRlclRpbWVvdXR9LCBraWxsUmVzdWx0KSA9PiBpc1NpZ3Rlcm0oc2lnbmFsKSAmJiBmb3JjZUtpbGxBZnRlclRpbWVvdXQgIT09IGZhbHNlICYmIGtpbGxSZXN1bHQ7XG5cbmNvbnN0IGlzU2lndGVybSA9IHNpZ25hbCA9PiBzaWduYWwgPT09IG9zLmNvbnN0YW50cy5zaWduYWxzLlNJR1RFUk1cblx0XHR8fCAodHlwZW9mIHNpZ25hbCA9PT0gJ3N0cmluZycgJiYgc2lnbmFsLnRvVXBwZXJDYXNlKCkgPT09ICdTSUdURVJNJyk7XG5cbmNvbnN0IGdldEZvcmNlS2lsbEFmdGVyVGltZW91dCA9ICh7Zm9yY2VLaWxsQWZ0ZXJUaW1lb3V0ID0gdHJ1ZX0pID0+IHtcblx0aWYgKGZvcmNlS2lsbEFmdGVyVGltZW91dCA9PT0gdHJ1ZSkge1xuXHRcdHJldHVybiBERUZBVUxUX0ZPUkNFX0tJTExfVElNRU9VVDtcblx0fVxuXG5cdGlmICghTnVtYmVyLmlzRmluaXRlKGZvcmNlS2lsbEFmdGVyVGltZW91dCkgfHwgZm9yY2VLaWxsQWZ0ZXJUaW1lb3V0IDwgMCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIHRoZSBcXGBmb3JjZUtpbGxBZnRlclRpbWVvdXRcXGAgb3B0aW9uIHRvIGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsIGdvdCBcXGAke2ZvcmNlS2lsbEFmdGVyVGltZW91dH1cXGAgKCR7dHlwZW9mIGZvcmNlS2lsbEFmdGVyVGltZW91dH0pYCk7XG5cdH1cblxuXHRyZXR1cm4gZm9yY2VLaWxsQWZ0ZXJUaW1lb3V0O1xufTtcblxuLy8gYGNoaWxkUHJvY2Vzcy5jYW5jZWwoKWBcbmV4cG9ydCBjb25zdCBzcGF3bmVkQ2FuY2VsID0gKHNwYXduZWQsIGNvbnRleHQpID0+IHtcblx0Y29uc3Qga2lsbFJlc3VsdCA9IHNwYXduZWQua2lsbCgpO1xuXG5cdGlmIChraWxsUmVzdWx0KSB7XG5cdFx0Y29udGV4dC5pc0NhbmNlbGVkID0gdHJ1ZTtcblx0fVxufTtcblxuY29uc3QgdGltZW91dEtpbGwgPSAoc3Bhd25lZCwgc2lnbmFsLCByZWplY3QpID0+IHtcblx0c3Bhd25lZC5raWxsKHNpZ25hbCk7XG5cdHJlamVjdChPYmplY3QuYXNzaWduKG5ldyBFcnJvcignVGltZWQgb3V0JyksIHt0aW1lZE91dDogdHJ1ZSwgc2lnbmFsfSkpO1xufTtcblxuLy8gYHRpbWVvdXRgIG9wdGlvbiBoYW5kbGluZ1xuZXhwb3J0IGNvbnN0IHNldHVwVGltZW91dCA9IChzcGF3bmVkLCB7dGltZW91dCwga2lsbFNpZ25hbCA9ICdTSUdURVJNJ30sIHNwYXduZWRQcm9taXNlKSA9PiB7XG5cdGlmICh0aW1lb3V0ID09PSAwIHx8IHRpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBzcGF3bmVkUHJvbWlzZTtcblx0fVxuXG5cdGxldCB0aW1lb3V0SWQ7XG5cdGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGltZW91dEtpbGwoc3Bhd25lZCwga2lsbFNpZ25hbCwgcmVqZWN0KTtcblx0XHR9LCB0aW1lb3V0KTtcblx0fSk7XG5cblx0Y29uc3Qgc2FmZVNwYXduZWRQcm9taXNlID0gc3Bhd25lZFByb21pc2UuZmluYWxseSgoKSA9PiB7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cdH0pO1xuXG5cdHJldHVybiBQcm9taXNlLnJhY2UoW3RpbWVvdXRQcm9taXNlLCBzYWZlU3Bhd25lZFByb21pc2VdKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVRpbWVvdXQgPSAoe3RpbWVvdXR9KSA9PiB7XG5cdGlmICh0aW1lb3V0ICE9PSB1bmRlZmluZWQgJiYgKCFOdW1iZXIuaXNGaW5pdGUodGltZW91dCkgfHwgdGltZW91dCA8IDApKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgdGhlIFxcYHRpbWVvdXRcXGAgb3B0aW9uIHRvIGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIsIGdvdCBcXGAke3RpbWVvdXR9XFxgICgke3R5cGVvZiB0aW1lb3V0fSlgKTtcblx0fVxufTtcblxuLy8gYGNsZWFudXBgIG9wdGlvbiBoYW5kbGluZ1xuZXhwb3J0IGNvbnN0IHNldEV4aXRIYW5kbGVyID0gYXN5bmMgKHNwYXduZWQsIHtjbGVhbnVwLCBkZXRhY2hlZH0sIHRpbWVkUHJvbWlzZSkgPT4ge1xuXHRpZiAoIWNsZWFudXAgfHwgZGV0YWNoZWQpIHtcblx0XHRyZXR1cm4gdGltZWRQcm9taXNlO1xuXHR9XG5cblx0Y29uc3QgcmVtb3ZlRXhpdEhhbmRsZXIgPSBvbkV4aXQoKCkgPT4ge1xuXHRcdHNwYXduZWQua2lsbCgpO1xuXHR9KTtcblxuXHRyZXR1cm4gdGltZWRQcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuXHRcdHJlbW92ZUV4aXRIYW5kbGVyKCk7XG5cdH0pO1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gaXNTdHJlYW0oc3RyZWFtKSB7XG5cdHJldHVybiBzdHJlYW0gIT09IG51bGxcblx0XHQmJiB0eXBlb2Ygc3RyZWFtID09PSAnb2JqZWN0J1xuXHRcdCYmIHR5cGVvZiBzdHJlYW0ucGlwZSA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV3JpdGFibGVTdHJlYW0oc3RyZWFtKSB7XG5cdHJldHVybiBpc1N0cmVhbShzdHJlYW0pXG5cdFx0JiYgc3RyZWFtLndyaXRhYmxlICE9PSBmYWxzZVxuXHRcdCYmIHR5cGVvZiBzdHJlYW0uX3dyaXRlID09PSAnZnVuY3Rpb24nXG5cdFx0JiYgdHlwZW9mIHN0cmVhbS5fd3JpdGFibGVTdGF0ZSA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuXHRyZXR1cm4gaXNTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIHN0cmVhbS5yZWFkYWJsZSAhPT0gZmFsc2Vcblx0XHQmJiB0eXBlb2Ygc3RyZWFtLl9yZWFkID09PSAnZnVuY3Rpb24nXG5cdFx0JiYgdHlwZW9mIHN0cmVhbS5fcmVhZGFibGVTdGF0ZSA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0R1cGxleFN0cmVhbShzdHJlYW0pIHtcblx0cmV0dXJuIGlzV3JpdGFibGVTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIGlzUmVhZGFibGVTdHJlYW0oc3RyZWFtKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhbnNmb3JtU3RyZWFtKHN0cmVhbSkge1xuXHRyZXR1cm4gaXNEdXBsZXhTdHJlYW0oc3RyZWFtKVxuXHRcdCYmIHR5cGVvZiBzdHJlYW0uX3RyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJztcbn1cbiIsICJpbXBvcnQge2lzU3RyZWFtfSBmcm9tICdpcy1zdHJlYW0nO1xuaW1wb3J0IGdldFN0cmVhbSBmcm9tICdnZXQtc3RyZWFtJztcbmltcG9ydCBtZXJnZVN0cmVhbSBmcm9tICdtZXJnZS1zdHJlYW0nO1xuXG4vLyBgaW5wdXRgIG9wdGlvblxuZXhwb3J0IGNvbnN0IGhhbmRsZUlucHV0ID0gKHNwYXduZWQsIGlucHV0KSA9PiB7XG5cdGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aWYgKGlzU3RyZWFtKGlucHV0KSkge1xuXHRcdGlucHV0LnBpcGUoc3Bhd25lZC5zdGRpbik7XG5cdH0gZWxzZSB7XG5cdFx0c3Bhd25lZC5zdGRpbi5lbmQoaW5wdXQpO1xuXHR9XG59O1xuXG4vLyBgYWxsYCBpbnRlcmxlYXZlcyBgc3Rkb3V0YCBhbmQgYHN0ZGVycmBcbmV4cG9ydCBjb25zdCBtYWtlQWxsU3RyZWFtID0gKHNwYXduZWQsIHthbGx9KSA9PiB7XG5cdGlmICghYWxsIHx8ICghc3Bhd25lZC5zdGRvdXQgJiYgIXNwYXduZWQuc3RkZXJyKSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IG1peGVkID0gbWVyZ2VTdHJlYW0oKTtcblxuXHRpZiAoc3Bhd25lZC5zdGRvdXQpIHtcblx0XHRtaXhlZC5hZGQoc3Bhd25lZC5zdGRvdXQpO1xuXHR9XG5cblx0aWYgKHNwYXduZWQuc3RkZXJyKSB7XG5cdFx0bWl4ZWQuYWRkKHNwYXduZWQuc3RkZXJyKTtcblx0fVxuXG5cdHJldHVybiBtaXhlZDtcbn07XG5cbi8vIE9uIGZhaWx1cmUsIGByZXN1bHQuc3Rkb3V0fHN0ZGVycnxhbGxgIHNob3VsZCBjb250YWluIHRoZSBjdXJyZW50bHkgYnVmZmVyZWQgc3RyZWFtXG5jb25zdCBnZXRCdWZmZXJlZERhdGEgPSBhc3luYyAoc3RyZWFtLCBzdHJlYW1Qcm9taXNlKSA9PiB7XG5cdC8vIFdoZW4gYGJ1ZmZlcmAgaXMgYGZhbHNlYCwgYHN0cmVhbVByb21pc2VgIGlzIGB1bmRlZmluZWRgIGFuZCB0aGVyZSBpcyBubyBidWZmZXJlZCBkYXRhIHRvIHJldHJpZXZlXG5cdGlmICghc3RyZWFtIHx8IHN0cmVhbVByb21pc2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHN0cmVhbS5kZXN0cm95KCk7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gYXdhaXQgc3RyZWFtUHJvbWlzZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gZXJyb3IuYnVmZmVyZWREYXRhO1xuXHR9XG59O1xuXG5jb25zdCBnZXRTdHJlYW1Qcm9taXNlID0gKHN0cmVhbSwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0pID0+IHtcblx0aWYgKCFzdHJlYW0gfHwgIWJ1ZmZlcikge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChlbmNvZGluZykge1xuXHRcdHJldHVybiBnZXRTdHJlYW0oc3RyZWFtLCB7ZW5jb2RpbmcsIG1heEJ1ZmZlcn0pO1xuXHR9XG5cblx0cmV0dXJuIGdldFN0cmVhbS5idWZmZXIoc3RyZWFtLCB7bWF4QnVmZmVyfSk7XG59O1xuXG4vLyBSZXRyaWV2ZSByZXN1bHQgb2YgY2hpbGQgcHJvY2VzczogZXhpdCBjb2RlLCBzaWduYWwsIGVycm9yLCBzdHJlYW1zIChzdGRvdXQvc3RkZXJyL2FsbClcbmV4cG9ydCBjb25zdCBnZXRTcGF3bmVkUmVzdWx0ID0gYXN5bmMgKHtzdGRvdXQsIHN0ZGVyciwgYWxsfSwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0sIHByb2Nlc3NEb25lKSA9PiB7XG5cdGNvbnN0IHN0ZG91dFByb21pc2UgPSBnZXRTdHJlYW1Qcm9taXNlKHN0ZG91dCwge2VuY29kaW5nLCBidWZmZXIsIG1heEJ1ZmZlcn0pO1xuXHRjb25zdCBzdGRlcnJQcm9taXNlID0gZ2V0U3RyZWFtUHJvbWlzZShzdGRlcnIsIHtlbmNvZGluZywgYnVmZmVyLCBtYXhCdWZmZXJ9KTtcblx0Y29uc3QgYWxsUHJvbWlzZSA9IGdldFN0cmVhbVByb21pc2UoYWxsLCB7ZW5jb2RpbmcsIGJ1ZmZlciwgbWF4QnVmZmVyOiBtYXhCdWZmZXIgKiAyfSk7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoW3Byb2Nlc3NEb25lLCBzdGRvdXRQcm9taXNlLCBzdGRlcnJQcm9taXNlLCBhbGxQcm9taXNlXSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRcdHtlcnJvciwgc2lnbmFsOiBlcnJvci5zaWduYWwsIHRpbWVkT3V0OiBlcnJvci50aW1lZE91dH0sXG5cdFx0XHRnZXRCdWZmZXJlZERhdGEoc3Rkb3V0LCBzdGRvdXRQcm9taXNlKSxcblx0XHRcdGdldEJ1ZmZlcmVkRGF0YShzdGRlcnIsIHN0ZGVyclByb21pc2UpLFxuXHRcdFx0Z2V0QnVmZmVyZWREYXRhKGFsbCwgYWxsUHJvbWlzZSksXG5cdFx0XSk7XG5cdH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUlucHV0U3luYyA9ICh7aW5wdXR9KSA9PiB7XG5cdGlmIChpc1N0cmVhbShpbnB1dCkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgYGlucHV0YCBvcHRpb24gY2Fubm90IGJlIGEgc3RyZWFtIGluIHN5bmMgbW9kZScpO1xuXHR9XG59O1xuIiwgIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZWZlci10b3AtbGV2ZWwtYXdhaXRcbmNvbnN0IG5hdGl2ZVByb21pc2VQcm90b3R5cGUgPSAoYXN5bmMgKCkgPT4ge30pKCkuY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG5jb25zdCBkZXNjcmlwdG9ycyA9IFsndGhlbicsICdjYXRjaCcsICdmaW5hbGx5J10ubWFwKHByb3BlcnR5ID0+IFtcblx0cHJvcGVydHksXG5cdFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5hdGl2ZVByb21pc2VQcm90b3R5cGUsIHByb3BlcnR5KSxcbl0pO1xuXG4vLyBUaGUgcmV0dXJuIHZhbHVlIGlzIGEgbWl4aW4gb2YgYGNoaWxkUHJvY2Vzc2AgYW5kIGBQcm9taXNlYFxuZXhwb3J0IGNvbnN0IG1lcmdlUHJvbWlzZSA9IChzcGF3bmVkLCBwcm9taXNlKSA9PiB7XG5cdGZvciAoY29uc3QgW3Byb3BlcnR5LCBkZXNjcmlwdG9yXSBvZiBkZXNjcmlwdG9ycykge1xuXHRcdC8vIFN0YXJ0aW5nIHRoZSBtYWluIGBwcm9taXNlYCBpcyBkZWZlcnJlZCB0byBhdm9pZCBjb25zdW1pbmcgc3RyZWFtc1xuXHRcdGNvbnN0IHZhbHVlID0gdHlwZW9mIHByb21pc2UgPT09ICdmdW5jdGlvbidcblx0XHRcdD8gKC4uLmFyZ3MpID0+IFJlZmxlY3QuYXBwbHkoZGVzY3JpcHRvci52YWx1ZSwgcHJvbWlzZSgpLCBhcmdzKVxuXHRcdFx0OiBkZXNjcmlwdG9yLnZhbHVlLmJpbmQocHJvbWlzZSk7XG5cblx0XHRSZWZsZWN0LmRlZmluZVByb3BlcnR5KHNwYXduZWQsIHByb3BlcnR5LCB7Li4uZGVzY3JpcHRvciwgdmFsdWV9KTtcblx0fVxuXG5cdHJldHVybiBzcGF3bmVkO1xufTtcblxuLy8gVXNlIHByb21pc2VzIGluc3RlYWQgb2YgYGNoaWxkX3Byb2Nlc3NgIGV2ZW50c1xuZXhwb3J0IGNvbnN0IGdldFNwYXduZWRQcm9taXNlID0gc3Bhd25lZCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdHNwYXduZWQub24oJ2V4aXQnLCAoZXhpdENvZGUsIHNpZ25hbCkgPT4ge1xuXHRcdHJlc29sdmUoe2V4aXRDb2RlLCBzaWduYWx9KTtcblx0fSk7XG5cblx0c3Bhd25lZC5vbignZXJyb3InLCBlcnJvciA9PiB7XG5cdFx0cmVqZWN0KGVycm9yKTtcblx0fSk7XG5cblx0aWYgKHNwYXduZWQuc3RkaW4pIHtcblx0XHRzcGF3bmVkLnN0ZGluLm9uKCdlcnJvcicsIGVycm9yID0+IHtcblx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0fSk7XG5cdH1cbn0pO1xuIiwgImNvbnN0IG5vcm1hbGl6ZUFyZ3MgPSAoZmlsZSwgYXJncyA9IFtdKSA9PiB7XG5cdGlmICghQXJyYXkuaXNBcnJheShhcmdzKSkge1xuXHRcdHJldHVybiBbZmlsZV07XG5cdH1cblxuXHRyZXR1cm4gW2ZpbGUsIC4uLmFyZ3NdO1xufTtcblxuY29uc3QgTk9fRVNDQVBFX1JFR0VYUCA9IC9eW1xcdy4tXSskLztcbmNvbnN0IERPVUJMRV9RVU9URVNfUkVHRVhQID0gL1wiL2c7XG5cbmNvbnN0IGVzY2FwZUFyZyA9IGFyZyA9PiB7XG5cdGlmICh0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyB8fCBOT19FU0NBUEVfUkVHRVhQLnRlc3QoYXJnKSkge1xuXHRcdHJldHVybiBhcmc7XG5cdH1cblxuXHRyZXR1cm4gYFwiJHthcmcucmVwbGFjZShET1VCTEVfUVVPVEVTX1JFR0VYUCwgJ1xcXFxcIicpfVwiYDtcbn07XG5cbmV4cG9ydCBjb25zdCBqb2luQ29tbWFuZCA9IChmaWxlLCBhcmdzKSA9PiBub3JtYWxpemVBcmdzKGZpbGUsIGFyZ3MpLmpvaW4oJyAnKTtcblxuZXhwb3J0IGNvbnN0IGdldEVzY2FwZWRDb21tYW5kID0gKGZpbGUsIGFyZ3MpID0+IG5vcm1hbGl6ZUFyZ3MoZmlsZSwgYXJncykubWFwKGFyZyA9PiBlc2NhcGVBcmcoYXJnKSkuam9pbignICcpO1xuXG5jb25zdCBTUEFDRVNfUkVHRVhQID0gLyArL2c7XG5cbi8vIEhhbmRsZSBgZXhlY2FDb21tYW5kKClgXG5leHBvcnQgY29uc3QgcGFyc2VDb21tYW5kID0gY29tbWFuZCA9PiB7XG5cdGNvbnN0IHRva2VucyA9IFtdO1xuXHRmb3IgKGNvbnN0IHRva2VuIG9mIGNvbW1hbmQudHJpbSgpLnNwbGl0KFNQQUNFU19SRUdFWFApKSB7XG5cdFx0Ly8gQWxsb3cgc3BhY2VzIHRvIGJlIGVzY2FwZWQgYnkgYSBiYWNrc2xhc2ggaWYgbm90IG1lYW50IGFzIGEgZGVsaW1pdGVyXG5cdFx0Y29uc3QgcHJldmlvdXNUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG5cdFx0aWYgKHByZXZpb3VzVG9rZW4gJiYgcHJldmlvdXNUb2tlbi5lbmRzV2l0aCgnXFxcXCcpKSB7XG5cdFx0XHQvLyBNZXJnZSBwcmV2aW91cyB0b2tlbiB3aXRoIGN1cnJlbnQgb25lXG5cdFx0XHR0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdID0gYCR7cHJldmlvdXNUb2tlbi5zbGljZSgwLCAtMSl9ICR7dG9rZW59YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG9rZW5zLnB1c2godG9rZW4pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0b2tlbnM7XG59O1xuIiwgImltcG9ydCB7IExvY2FsU3RvcmFnZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHBia2RmMiB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfS0VZIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IERFRkFVTFRfUEFTU1dPUkRfT1BUSU9OUywgUkVQUk9NUFRfSEFTSF9TQUxUIH0gZnJvbSBcIn4vY29uc3RhbnRzL3Bhc3N3b3Jkc1wiO1xuaW1wb3J0IHsgUGFzc3dvcmRHZW5lcmF0b3JPcHRpb25zIH0gZnJvbSBcIn4vdHlwZXMvcGFzc3dvcmRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXNzd29yZEdlbmVyYXRpbmdBcmdzKG9wdGlvbnM6IFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZsYXRNYXAoKFthcmcsIHZhbHVlXSkgPT4gKHZhbHVlID8gW2AtLSR7YXJnfWAsIHZhbHVlXSA6IFtdKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNoTWFzdGVyUGFzc3dvcmRGb3JSZXByb21wdGluZyhwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBwYmtkZjIocGFzc3dvcmQsIFJFUFJPTVBUX0hBU0hfU0FMVCwgMTAwMDAwLCA2NCwgXCJzaGE1MTJcIiwgKGVycm9yLCBoYXNoZWQpID0+IHtcbiAgICAgIGlmIChlcnJvciAhPSBudWxsKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShoYXNoZWQudG9TdHJpbmcoXCJoZXhcIikpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucygpIHtcbiAgY29uc3Qgc3RvcmVkT3B0aW9ucyA9IGF3YWl0IExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuUEFTU1dPUkRfT1BUSU9OUyk7XG4gIHJldHVybiB7XG4gICAgLi4uREVGQVVMVF9QQVNTV09SRF9PUFRJT05TLFxuICAgIC4uLihzdG9yZWRPcHRpb25zID8gSlNPTi5wYXJzZShzdG9yZWRPcHRpb25zKSA6IHt9KSxcbiAgfSBhcyBQYXNzd29yZEdlbmVyYXRvck9wdGlvbnM7XG59XG4iLCAiaW1wb3J0IHsgUGFzc3dvcmRHZW5lcmF0b3JPcHRpb25zIH0gZnJvbSBcIn4vdHlwZXMvcGFzc3dvcmRzXCI7XG5cbmV4cG9ydCBjb25zdCBSRVBST01QVF9IQVNIX1NBTFQgPSBcImZvb2JhcmJhenp5YmF6XCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1BBU1NXT1JEX09QVElPTlM6IFJlcXVpcmVkPFBhc3N3b3JkR2VuZXJhdG9yT3B0aW9ucz4gPSB7XG4gIGxvd2VyY2FzZTogdHJ1ZSxcbiAgdXBwZXJjYXNlOiB0cnVlLFxuICBudW1iZXI6IGZhbHNlLFxuICBzcGVjaWFsOiBmYWxzZSxcbiAgcGFzc3BocmFzZTogZmFsc2UsXG4gIGxlbmd0aDogXCIxNFwiLFxuICB3b3JkczogXCIzXCIsXG4gIHNlcGFyYXRvcjogXCItXCIsXG4gIGNhcGl0YWxpemU6IGZhbHNlLFxuICBpbmNsdWRlTnVtYmVyOiBmYWxzZSxcbiAgbWluTnVtYmVyOiBcIjFcIixcbiAgbWluU3BlY2lhbDogXCIxXCIsXG59O1xuIiwgImltcG9ydCB7IGVudmlyb25tZW50LCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgVkFVTFRfVElNRU9VVF9NU19UT19MQUJFTCB9IGZyb20gXCJ+L2NvbnN0YW50cy9sYWJlbHNcIjtcbmltcG9ydCB7IENvbW1hbmROYW1lIH0gZnJvbSBcIn4vdHlwZXMvZ2VuZXJhbFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmVyVXJsUHJlZmVyZW5jZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCB7IHNlcnZlclVybCB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKTtcbiAgcmV0dXJuICFzZXJ2ZXJVcmwgfHwgc2VydmVyVXJsID09PSBcImJpdHdhcmRlbi5jb21cIiB8fCBzZXJ2ZXJVcmwgPT09IFwiaHR0cHM6Ly9iaXR3YXJkZW4uY29tXCIgPyB1bmRlZmluZWQgOiBzZXJ2ZXJVcmw7XG59XG5cbnR5cGUgUHJlZmVyZW5jZUtleU9mQ29tbWFuZHNXaXRoVHJhbnNpZW50T3B0aW9ucyA9XG4gIHwga2V5b2YgUHJlZmVyZW5jZXMuU2VhcmNoXG4gIHwga2V5b2YgUHJlZmVyZW5jZXMuR2VuZXJhdGVQYXNzd29yZFxuICB8IGtleW9mIFByZWZlcmVuY2VzLkdlbmVyYXRlUGFzc3dvcmRRdWljaztcblxudHlwZSBUcmFuc2llbnRPcHRpb25zVmFsdWUgPVxuICB8IFByZWZlcmVuY2VzLlNlYXJjaFtcInRyYW5zaWVudENvcHlTZWFyY2hcIl1cbiAgfCBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkW1widHJhbnNpZW50Q29weUdlbmVyYXRlUGFzc3dvcmRcIl1cbiAgfCBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkUXVpY2tbXCJ0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrXCJdO1xuXG5jb25zdCBDT01NQU5EX05BTUVfVE9fUFJFRkVSRU5DRV9LRVlfTUFQOiBSZWNvcmQ8Q29tbWFuZE5hbWUsIFByZWZlcmVuY2VLZXlPZkNvbW1hbmRzV2l0aFRyYW5zaWVudE9wdGlvbnM+ID0ge1xuICBzZWFyY2g6IFwidHJhbnNpZW50Q29weVNlYXJjaFwiLFxuICBcImdlbmVyYXRlLXBhc3N3b3JkXCI6IFwidHJhbnNpZW50Q29weUdlbmVyYXRlUGFzc3dvcmRcIixcbiAgXCJnZW5lcmF0ZS1wYXNzd29yZC1xdWlja1wiOiBcInRyYW5zaWVudENvcHlHZW5lcmF0ZVBhc3N3b3JkUXVpY2tcIixcbn07XG5cbnR5cGUgUHJlZmVyZW5jZXMgPSBQcmVmZXJlbmNlcy5TZWFyY2ggJiBQcmVmZXJlbmNlcy5HZW5lcmF0ZVBhc3N3b3JkICYgUHJlZmVyZW5jZXMuR2VuZXJhdGVQYXNzd29yZFF1aWNrO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UodHlwZTogXCJwYXNzd29yZFwiIHwgXCJvdGhlclwiKTogYm9vbGVhbiB7XG4gIGNvbnN0IHByZWZlcmVuY2VLZXkgPSBDT01NQU5EX05BTUVfVE9fUFJFRkVSRU5DRV9LRVlfTUFQW2Vudmlyb25tZW50LmNvbW1hbmROYW1lIGFzIENvbW1hbmROYW1lXTtcbiAgY29uc3QgdHJhbnNpZW50UHJlZmVyZW5jZSA9IGdldFByZWZlcmVuY2VWYWx1ZXM8UHJlZmVyZW5jZXM+KClbcHJlZmVyZW5jZUtleV0gYXMgVHJhbnNpZW50T3B0aW9uc1ZhbHVlO1xuICBpZiAodHJhbnNpZW50UHJlZmVyZW5jZSA9PT0gXCJuZXZlclwiKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0cmFuc2llbnRQcmVmZXJlbmNlID09PSBcImFsd2F5c1wiKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKHRyYW5zaWVudFByZWZlcmVuY2UgPT09IFwicGFzc3dvcmRzXCIpIHJldHVybiB0eXBlID09PSBcInBhc3N3b3JkXCI7XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFiZWxGb3JUaW1lb3V0UHJlZmVyZW5jZSh0aW1lb3V0OiBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICByZXR1cm4gVkFVTFRfVElNRU9VVF9NU19UT19MQUJFTFt0aW1lb3V0IGFzIGtleW9mIHR5cGVvZiBWQVVMVF9USU1FT1VUX01TX1RPX0xBQkVMXTtcbn1cbiIsICJjb25zdCBWQVVMVF9USU1FT1VUX09QVElPTlMgPSB7XG4gIElNTUVESUFURUxZOiBcIjBcIixcbiAgT05FX01JTlVURTogXCI2MDAwMFwiLFxuICBGSVZFX01JTlVURVM6IFwiMzAwMDAwXCIsXG4gIEZJRlRFRU5fTUlOVVRFUzogXCI5MDAwMDBcIixcbiAgVEhJUlRZX01JTlVURVM6IFwiMTgwMDAwMFwiLFxuICBPTkVfSE9VUjogXCIzNjAwMDAwXCIsXG4gIEZPVVJfSE9VUlM6IFwiMTQ0MDAwMDBcIixcbiAgRUlHSFRfSE9VUlM6IFwiMjg4MDAwMDBcIixcbiAgT05FX0RBWTogXCI4NjQwMDAwMFwiLFxuICBORVZFUjogXCItMVwiLFxuICBTWVNURU1fTE9DSzogXCItMlwiLFxuICBTWVNURU1fU0xFRVA6IFwiLTNcIixcbn0gYXMgY29uc3Qgc2F0aXNmaWVzIFJlY29yZDxzdHJpbmcsIFByZWZlcmVuY2VzW1wicmVwcm9tcHRJZ25vcmVEdXJhdGlvblwiXT47XG5cbmV4cG9ydCBjb25zdCBWQVVMVF9USU1FT1VUID0gT2JqZWN0LmVudHJpZXMoVkFVTFRfVElNRU9VVF9PUFRJT05TKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gIGFjY1trZXkgYXMga2V5b2YgdHlwZW9mIFZBVUxUX1RJTUVPVVRfT1BUSU9OU10gPSBwYXJzZUludCh2YWx1ZSk7XG4gIHJldHVybiBhY2M7XG59LCB7fSBhcyBSZWNvcmQ8a2V5b2YgdHlwZW9mIFZBVUxUX1RJTUVPVVRfT1BUSU9OUywgbnVtYmVyPik7XG4iLCAiaW1wb3J0IHsgVkFVTFRfVElNRU9VVCB9IGZyb20gXCJ+L2NvbnN0YW50cy9wcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgQ2FyZCwgSWRlbnRpdHksIEl0ZW1UeXBlIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuZXhwb3J0IGNvbnN0IFZBVUxUX1RJTUVPVVRfTVNfVE9fTEFCRUw6IFBhcnRpYWw8UmVjb3JkPGtleW9mIHR5cGVvZiBWQVVMVF9USU1FT1VULCBzdHJpbmc+PiA9IHtcbiAgW1ZBVUxUX1RJTUVPVVQuSU1NRURJQVRFTFldOiBcIkltbWVkaWF0ZWx5XCIsXG4gIFtWQVVMVF9USU1FT1VULk9ORV9NSU5VVEVdOiBcIjEgTWludXRlXCIsXG4gIFtWQVVMVF9USU1FT1VULkZJVkVfTUlOVVRFU106IFwiNSBNaW51dGVzXCIsXG4gIFtWQVVMVF9USU1FT1VULkZJRlRFRU5fTUlOVVRFU106IFwiMTUgTWludXRlc1wiLFxuICBbVkFVTFRfVElNRU9VVC5USElSVFlfTUlOVVRFU106IFwiMzAgTWludXRlc1wiLFxuICBbVkFVTFRfVElNRU9VVC5PTkVfSE9VUl06IFwiMSBIb3VyXCIsXG4gIFtWQVVMVF9USU1FT1VULkZPVVJfSE9VUlNdOiBcIjQgSG91cnNcIixcbiAgW1ZBVUxUX1RJTUVPVVQuRUlHSFRfSE9VUlNdOiBcIjggSG91cnNcIixcbiAgW1ZBVUxUX1RJTUVPVVQuT05FX0RBWV06IFwiMSBEYXlcIixcbn07XG5cbmV4cG9ydCBjb25zdCBDQVJEX0tFWV9MQUJFTDogUmVjb3JkPGtleW9mIENhcmQsIHN0cmluZz4gPSB7XG4gIGNhcmRob2xkZXJOYW1lOiBcIkNhcmRob2xkZXIgbmFtZVwiLFxuICBicmFuZDogXCJCcmFuZFwiLFxuICBudW1iZXI6IFwiTnVtYmVyXCIsXG4gIGV4cE1vbnRoOiBcIkV4cGlyYXRpb24gbW9udGhcIixcbiAgZXhwWWVhcjogXCJFeHBpcmF0aW9uIHllYXJcIixcbiAgY29kZTogXCJTZWN1cml0eSBjb2RlIChDVlYpXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSURFTlRJVFlfS0VZX0xBQkVMOiBSZWNvcmQ8a2V5b2YgSWRlbnRpdHksIHN0cmluZz4gPSB7XG4gIHRpdGxlOiBcIlRpdGxlXCIsXG4gIGZpcnN0TmFtZTogXCJGaXJzdCBuYW1lXCIsXG4gIG1pZGRsZU5hbWU6IFwiTWlkZGxlIG5hbWVcIixcbiAgbGFzdE5hbWU6IFwiTGFzdCBuYW1lXCIsXG4gIHVzZXJuYW1lOiBcIlVzZXJuYW1lXCIsXG4gIGNvbXBhbnk6IFwiQ29tcGFueVwiLFxuICBzc246IFwiU29jaWFsIFNlY3VyaXR5IG51bWJlclwiLFxuICBwYXNzcG9ydE51bWJlcjogXCJQYXNzcG9ydCBudW1iZXJcIixcbiAgbGljZW5zZU51bWJlcjogXCJMaWNlbnNlIG51bWJlclwiLFxuICBlbWFpbDogXCJFbWFpbFwiLFxuICBwaG9uZTogXCJQaG9uZVwiLFxuICBhZGRyZXNzMTogXCJBZGRyZXNzIDFcIixcbiAgYWRkcmVzczI6IFwiQWRkcmVzcyAyXCIsXG4gIGFkZHJlc3MzOiBcIkFkZHJlc3MgM1wiLFxuICBjaXR5OiBcIkNpdHkgLyBUb3duXCIsXG4gIHN0YXRlOiBcIlN0YXRlIC8gUHJvdmluY2VcIixcbiAgcG9zdGFsQ29kZTogXCJaaXAgLyBQb3N0YWwgY29kZVwiLFxuICBjb3VudHJ5OiBcIkNvdW50cnlcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfVE9fTEFCRUw6IFJlY29yZDxJdGVtVHlwZSwgc3RyaW5nPiA9IHtcbiAgW0l0ZW1UeXBlLkxPR0lOXTogXCJMb2dpblwiLFxuICBbSXRlbVR5cGUuQ0FSRF06IFwiQ2FyZFwiLFxuICBbSXRlbVR5cGUuSURFTlRJVFldOiBcIklkZW50aXR5XCIsXG4gIFtJdGVtVHlwZS5OT1RFXTogXCJTZWN1cmUgTm90ZVwiLFxuICBbSXRlbVR5cGUuU1NIX0tFWV06IFwiU1NIIEtleVwiLFxufTtcbiIsICJleHBvcnQgY2xhc3MgTWFudWFsbHlUaHJvd25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhY2sgPSBzdGFjaztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGlzcGxheWFibGVFcnJvciBleHRlbmRzIE1hbnVhbGx5VGhyb3duRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgc3RhY2spO1xuICB9XG59XG5cbi8qIC0tIHNwZWNpZmljIGVycm9ycyBiZWxvdyAtLSAqL1xuXG5leHBvcnQgY2xhc3MgQ0xJTm90Rm91bmRFcnJvciBleHRlbmRzIERpc3BsYXlhYmxlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSA/PyBcIkJpdHdhcmRlbiBDTEkgbm90IGZvdW5kXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIkNMSU5vdEZvdW5kRXJyb3JcIjtcbiAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbGxlZENMSU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBEaXNwbGF5YWJsZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJCaXR3YXJkZW4gQ0xJIG5vdCBmb3VuZFwiLCBzdGFjayk7XG4gICAgdGhpcy5uYW1lID0gXCJJbnN0YWxsZWRDTElOb3RGb3VuZEVycm9yXCI7XG4gICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWlsZWRUb0xvYWRWYXVsdEl0ZW1zRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiRmFpbGVkIHRvIGxvYWQgdmF1bHQgaXRlbXNcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZhdWx0SXNMb2NrZWRFcnJvciBleHRlbmRzIERpc3BsYXlhYmxlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJWYXVsdCBpcyBsb2NrZWRcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiVmF1bHRJc0xvY2tlZEVycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdExvZ2dlZEluRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJOb3QgbG9nZ2VkIGluXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIk5vdExvZ2dlZEluRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW5zdXJlQ2xpQmluRXJyb3IgZXh0ZW5kcyBEaXNwbGF5YWJsZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiRmFpbGVkIGRvIGRvd25sb2FkIEJpdHdhcmRlbiBDTElcIiwgc3RhY2spO1xuICAgIHRoaXMubmFtZSA9IFwiRW5zdXJlQ2xpQmluRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUHJlbWl1bUZlYXR1cmVFcnJvciBleHRlbmRzIE1hbnVhbGx5VGhyb3duRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nLCBzdGFjaz86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJQcmVtaXVtIHN0YXR1cyBpcyByZXF1aXJlZCB0byB1c2UgdGhpcyBmZWF0dXJlXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlByZW1pdW1GZWF0dXJlRXJyb3JcIjtcbiAgfVxufVxuZXhwb3J0IGNsYXNzIFNlbmROZWVkc1Bhc3N3b3JkRXJyb3IgZXh0ZW5kcyBNYW51YWxseVRocm93bkVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgc3RhY2s/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlID8/IFwiVGhpcyBTZW5kIGhhcyBhIGlzIHByb3RlY3RlZCBieSBhIHBhc3N3b3JkXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlbmROZWVkc1Bhc3N3b3JkRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2VuZEludmFsaWRQYXNzd29yZEVycm9yIGV4dGVuZHMgTWFudWFsbHlUaHJvd25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcsIHN0YWNrPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSA/PyBcIlRoZSBwYXNzd29yZCB5b3UgZW50ZXJlZCBpcyBpbnZhbGlkXCIsIHN0YWNrKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlbmRJbnZhbGlkUGFzc3dvcmRFcnJvclwiO1xuICB9XG59XG5cbi8qIC0tIGVycm9yIHV0aWxzIGJlbG93IC0tICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cnlFeGVjPFQ+KGZuOiAoKSA9PiBUKTogVCBleHRlbmRzIHZvaWQgPyBUIDogVCB8IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiB0cnlFeGVjPFQsIEY+KGZuOiAoKSA9PiBULCBmYWxsYmFja1ZhbHVlOiBGKTogVCB8IEY7XG5leHBvcnQgZnVuY3Rpb24gdHJ5RXhlYzxULCBGPihmbjogKCkgPT4gVCwgZmFsbGJhY2tWYWx1ZT86IEYpOiBUIHwgRiB8IHVuZGVmaW5lZCB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxsYmFja1ZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5YWJsZUVycm9yTWVzc2FnZShlcnJvcjogYW55KSB7XG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIERpc3BsYXlhYmxlRXJyb3IpIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0RXJyb3JTdHJpbmcgPSAoZXJyb3I6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICghZXJyb3IpIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBlcnJvcjtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIG5hbWUgfSA9IGVycm9yO1xuICAgIGlmIChlcnJvci5zdGFjaykgcmV0dXJuIGVycm9yLnN0YWNrO1xuICAgIHJldHVybiBgJHtuYW1lfTogJHttZXNzYWdlfWA7XG4gIH1cbiAgcmV0dXJuIFN0cmluZyhlcnJvcik7XG59O1xuXG5leHBvcnQgdHlwZSBTdWNjZXNzPFQ+ID0gW1QsIG51bGxdO1xuZXhwb3J0IHR5cGUgRmFpbHVyZTxFPiA9IFtudWxsLCBFXTtcbmV4cG9ydCB0eXBlIFJlc3VsdDxULCBFID0gRXJyb3I+ID0gU3VjY2VzczxUPiB8IEZhaWx1cmU8RT47XG5cbmV4cG9ydCBmdW5jdGlvbiBPazxUPihkYXRhOiBUKTogU3VjY2VzczxUPiB7XG4gIHJldHVybiBbZGF0YSwgbnVsbF07XG59XG5leHBvcnQgZnVuY3Rpb24gRXJyPEUgPSBFcnJvcj4oZXJyb3I6IEUpOiBGYWlsdXJlPEU+IHtcbiAgcmV0dXJuIFtudWxsLCBlcnJvcl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cnlDYXRjaDxULCBFID0gRXJyb3I+KGZuOiAoKSA9PiBUKTogUmVzdWx0PFQsIEU+O1xuZXhwb3J0IGZ1bmN0aW9uIHRyeUNhdGNoPFQsIEUgPSBFcnJvcj4ocHJvbWlzZTogUHJvbWlzZTxUPik6IFByb21pc2U8UmVzdWx0PFQsIEU+Pjtcbi8qKlxuICogRXhlY3V0ZXMgYSBmdW5jdGlvbiBvciBhIHByb21pc2Ugc2FmZWx5IGluc2lkZSBhIHRyeS9jYXRjaCBhbmRcbiAqIHJldHVybnMgYSBgUmVzdWx0YCAoYFtkYXRhLCBlcnJvcl1gKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeUNhdGNoPFQsIEUgPSBFcnJvcj4oZm5PclByb21pc2U6ICgoKSA9PiBUKSB8IFByb21pc2U8VD4pOiBNYXliZVByb21pc2U8UmVzdWx0PFQsIEU+PiB7XG4gIGlmICh0eXBlb2YgZm5PclByb21pc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gT2soZm5PclByb21pc2UoKSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmV0dXJuIEVycihlcnJvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBmbk9yUHJvbWlzZS50aGVuKChkYXRhKSA9PiBPayhkYXRhKSkuY2F0Y2goKGVycm9yKSA9PiBFcnIoZXJyb3IpKTtcbn1cbiIsICJpbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMsIHN0YXRTeW5jLCB1bmxpbmtTeW5jIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgeyByZWFkZGlyLCB1bmxpbmsgfSBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHN0cmVhbVppcCBmcm9tIFwibm9kZS1zdHJlYW0temlwXCI7XG5pbXBvcnQgeyB0cnlFeGVjIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yRmlsZUF2YWlsYWJsZShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcmV0dXJuO1xuICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0U3luYyhwYXRoKTtcbiAgICAgIGlmIChzdGF0cy5pc0ZpbGUoKSkge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0sIDMwMCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmlsZSAke3BhdGh9IG5vdCBmb3VuZC5gKSk7XG4gICAgfSwgNTAwMCk7XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjb21wcmVzc0ZpbGUoZmlsZVBhdGg6IHN0cmluZywgdGFyZ2V0UGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHppcCA9IG5ldyBzdHJlYW1aaXAuYXN5bmMoeyBmaWxlOiBmaWxlUGF0aCB9KTtcbiAgaWYgKCFleGlzdHNTeW5jKHRhcmdldFBhdGgpKSBta2RpclN5bmModGFyZ2V0UGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIGF3YWl0IHppcC5leHRyYWN0KG51bGwsIHRhcmdldFBhdGgpO1xuICBhd2FpdCB6aXAuY2xvc2UoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZpbGVzVGhhdFN0YXJ0V2l0aChzdGFydGluZ1dpdGg6IHN0cmluZywgcGF0aDogc3RyaW5nKSB7XG4gIGxldCByZW1vdmVkQXRMZWFzdE9uZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgcmVhZGRpcihwYXRoKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmICghZmlsZS5zdGFydHNXaXRoKHN0YXJ0aW5nV2l0aCkpIGNvbnRpbnVlO1xuICAgICAgYXdhaXQgdHJ5RXhlYyhhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHVubGluayhqb2luKHBhdGgsIGZpbGUpKTtcbiAgICAgICAgcmVtb3ZlZEF0TGVhc3RPbmUgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHJlbW92ZWRBdExlYXN0T25lO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubGlua0FsbFN5bmMoLi4ucGF0aHM6IHN0cmluZ1tdKSB7XG4gIGZvciAoY29uc3QgcGF0aCBvZiBwYXRocykge1xuICAgIHRyeUV4ZWMoKCkgPT4gdW5saW5rU3luYyhwYXRoKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBjcmVhdGVXcml0ZVN0cmVhbSwgdW5saW5rIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IGh0dHBzIGZyb20gXCJodHRwc1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBnZXRGaWxlU2hhMjU2IH0gZnJvbSBcIn4vdXRpbHMvY3J5cHRvXCI7XG5pbXBvcnQgeyB3YWl0Rm9yRmlsZUF2YWlsYWJsZSB9IGZyb20gXCJ+L3V0aWxzL2ZzXCI7XG5cbnR5cGUgRG93bmxvYWRPcHRpb25zID0ge1xuICBvblByb2dyZXNzPzogKHBlcmNlbnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgc2hhMjU2Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkKHVybDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBEb3dubG9hZE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBvblByb2dyZXNzLCBzaGEyNTYgfSA9IG9wdGlvbnMgPz8ge307XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCB1cmkgPSBuZXcgVVJMKHVybCk7XG4gICAgY29uc3QgcHJvdG9jb2wgPSB1cmkucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIgPyBodHRwcyA6IGh0dHA7XG5cbiAgICBsZXQgcmVkaXJlY3RDb3VudCA9IDA7XG4gICAgY29uc3QgcmVxdWVzdCA9IHByb3RvY29sLmdldCh1cmkuaHJlZiwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSAmJiByZXNwb25zZS5zdGF0dXNDb2RlID49IDMwMCAmJiByZXNwb25zZS5zdGF0dXNDb2RlIDwgNDAwKSB7XG4gICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICByZXNwb25zZS5kZXN0cm95KCk7XG5cbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSByZXNwb25zZS5oZWFkZXJzLmxvY2F0aW9uO1xuICAgICAgICBpZiAoIXJlZGlyZWN0VXJsKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVkaXJlY3QgcmVzcG9uc2Ugd2l0aG91dCBsb2NhdGlvbiBoZWFkZXJgKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCsrcmVkaXJlY3RDb3VudCA+PSAxMCkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJUb28gbWFueSByZWRpcmVjdHNcIikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvd25sb2FkKHJlZGlyZWN0VXJsLCBwYXRoLCBvcHRpb25zKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDIwMCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBSZXNwb25zZSBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXNDb2RlfTogJHtyZXNwb25zZS5zdGF0dXNNZXNzYWdlfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlU2l6ZSA9IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnNbXCJjb250ZW50LWxlbmd0aFwiXSB8fCBcIjBcIiwgMTApO1xuICAgICAgaWYgKGZpbGVTaXplID09PSAwKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIGZpbGUgc2l6ZVwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsZVN0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKHBhdGgsIHsgYXV0b0Nsb3NlOiB0cnVlIH0pO1xuICAgICAgbGV0IGRvd25sb2FkZWRCeXRlcyA9IDA7XG5cbiAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgICByZXNwb25zZS5kZXN0cm95KCk7XG4gICAgICAgIGZpbGVTdHJlYW0uY2xvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNsZWFudXBBbmRSZWplY3QgPSAoZXJyb3I/OiBFcnJvcikgPT4ge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9O1xuXG4gICAgICByZXNwb25zZS5vbihcImRhdGFcIiwgKGNodW5rKSA9PiB7XG4gICAgICAgIGRvd25sb2FkZWRCeXRlcyArPSBjaHVuay5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLmZsb29yKChkb3dubG9hZGVkQnl0ZXMgLyBmaWxlU2l6ZSkgKiAxMDApO1xuICAgICAgICBvblByb2dyZXNzPy4ocGVyY2VudCk7XG4gICAgICB9KTtcblxuICAgICAgZmlsZVN0cmVhbS5vbihcImZpbmlzaFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgd2FpdEZvckZpbGVBdmFpbGFibGUocGF0aCk7XG4gICAgICAgICAgaWYgKHNoYTI1NikgYXdhaXQgd2FpdEZvckhhc2hUb01hdGNoKHBhdGgsIHNoYTI1Nik7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZmlsZVN0cmVhbS5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGBGaWxlIHN0cmVhbSBlcnJvciB3aGlsZSBkb3dubG9hZGluZyAke3VybH1gLCBlcnJvcik7XG4gICAgICAgIHVubGluayhwYXRoLCAoKSA9PiBjbGVhbnVwQW5kUmVqZWN0KGVycm9yKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVzcG9uc2Uub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihgUmVzcG9uc2UgZXJyb3Igd2hpbGUgZG93bmxvYWRpbmcgJHt1cmx9YCwgZXJyb3IpO1xuICAgICAgICB1bmxpbmsocGF0aCwgKCkgPT4gY2xlYW51cEFuZFJlamVjdChlcnJvcikpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlcXVlc3Qub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihgUmVxdWVzdCBlcnJvciB3aGlsZSBkb3dubG9hZGluZyAke3VybH1gLCBlcnJvcik7XG4gICAgICAgIHVubGluayhwYXRoLCAoKSA9PiBjbGVhbnVwQW5kUmVqZWN0KGVycm9yKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVzcG9uc2UucGlwZShmaWxlU3RyZWFtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHdhaXRGb3JIYXNoVG9NYXRjaChwYXRoOiBzdHJpbmcsIHNoYTI1Njogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgZmlsZVNoYSA9IGdldEZpbGVTaGEyNTYocGF0aCk7XG4gICAgaWYgKCFmaWxlU2hhKSByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihgQ291bGQgbm90IGdlbmVyYXRlIGhhc2ggZm9yIGZpbGUgJHtwYXRofS5gKSk7XG4gICAgaWYgKGZpbGVTaGEgPT09IHNoYTI1NikgcmV0dXJuIHJlc29sdmUoKTtcblxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKGdldEZpbGVTaGEyNTYocGF0aCkgPT09IHNoYTI1Nikge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0sIDEwMDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYEhhc2ggZGlkIG5vdCBtYXRjaCwgZXhwZWN0ZWQgJHtzaGEyNTYuc3Vic3RyaW5nKDAsIDcpfSwgZ290ICR7ZmlsZVNoYS5zdWJzdHJpbmcoMCwgNyl9LmApKTtcbiAgICB9LCA1MDAwKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBnZXRFcnJvclN0cmluZyB9IGZyb20gXCJ+L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiBhcyBjYXB0dXJlRXhjZXB0aW9uUmF5Y2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxudHlwZSBMb2cgPSB7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZXJyb3I6IGFueTtcbn07XG5cbmNvbnN0IF9leGNlcHRpb25zID0ge1xuICBsb2dzOiBuZXcgTWFwPERhdGUsIExvZz4oKSxcbiAgc2V0OiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSk6IHZvaWQgPT4ge1xuICAgIGNhcHR1cmVkRXhjZXB0aW9ucy5sb2dzLnNldChuZXcgRGF0ZSgpLCB7IG1lc3NhZ2UsIGVycm9yIH0pO1xuICB9LFxuICBjbGVhcjogKCk6IHZvaWQgPT4gY2FwdHVyZWRFeGNlcHRpb25zLmxvZ3MuY2xlYXIoKSxcbiAgdG9TdHJpbmc6ICgpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGNhcHR1cmVkRXhjZXB0aW9ucy5sb2dzLmZvckVhY2goKGxvZywgZGF0ZSkgPT4ge1xuICAgICAgaWYgKHN0ci5sZW5ndGggPiAwKSBzdHIgKz0gXCJcXG5cXG5cIjtcbiAgICAgIHN0ciArPSBgWyR7ZGF0ZS50b0lTT1N0cmluZygpfV0gJHtsb2cubWVzc2FnZX1gO1xuICAgICAgaWYgKGxvZy5lcnJvcikgc3RyICs9IGA6ICR7Z2V0RXJyb3JTdHJpbmcobG9nLmVycm9yKX1gO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0cjtcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBjYXB0dXJlZEV4Y2VwdGlvbnMgPSBPYmplY3QuZnJlZXplKF9leGNlcHRpb25zKTtcblxudHlwZSBDYXB0dXJlRXhjZXB0aW9uT3B0aW9ucyA9IHtcbiAgY2FwdHVyZVRvUmF5Y2FzdD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY29uc3QgY2FwdHVyZUV4Y2VwdGlvbiA9IChcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IEZhbHN5IHwgKHN0cmluZyB8IEZhbHN5KVtdLFxuICBlcnJvcjogYW55LFxuICBvcHRpb25zPzogQ2FwdHVyZUV4Y2VwdGlvbk9wdGlvbnNcbikgPT4ge1xuICBjb25zdCB7IGNhcHR1cmVUb1JheWNhc3QgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgY29uc3QgZGVzYyA9IEFycmF5LmlzQXJyYXkoZGVzY3JpcHRpb24pID8gZGVzY3JpcHRpb24uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpIDogZGVzY3JpcHRpb24gfHwgXCJDYXB0dXJlZCBleGNlcHRpb25cIjtcbiAgY2FwdHVyZWRFeGNlcHRpb25zLnNldChkZXNjLCBlcnJvcik7XG4gIGlmIChlbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSB7XG4gICAgY29uc29sZS5lcnJvcihkZXNjLCBlcnJvcik7XG4gIH0gZWxzZSBpZiAoY2FwdHVyZVRvUmF5Y2FzdCkge1xuICAgIGNhcHR1cmVFeGNlcHRpb25SYXljYXN0KGVycm9yKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRlYnVnTG9nID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gIGlmICghZW52aXJvbm1lbnQuaXNEZXZlbG9wbWVudCkgcmV0dXJuO1xuICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpO1xufTtcbiIsICJpbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlU2hhMjU2KGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY3JlYXRlSGFzaChcInNoYTI1NlwiKS51cGRhdGUocmVhZEZpbGVTeW5jKGZpbGVQYXRoKSkuZGlnZXN0KFwiaGV4XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgU2VuZENyZWF0ZVBheWxvYWQgfSBmcm9tIFwifi90eXBlcy9zZW5kXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlU2VuZFBheWxvYWQodGVtcGxhdGU6IFNlbmRDcmVhdGVQYXlsb2FkLCB2YWx1ZXM6IFNlbmRDcmVhdGVQYXlsb2FkKTogU2VuZENyZWF0ZVBheWxvYWQge1xuICByZXR1cm4ge1xuICAgIC4uLnRlbXBsYXRlLFxuICAgIC4uLnZhbHVlcyxcbiAgICBmaWxlOiB2YWx1ZXMuZmlsZSA/IHsgLi4udGVtcGxhdGUuZmlsZSwgLi4udmFsdWVzLmZpbGUgfSA6IHRlbXBsYXRlLmZpbGUsXG4gICAgdGV4dDogdmFsdWVzLnRleHQgPyB7IC4uLnRlbXBsYXRlLnRleHQsIC4uLnZhbHVlcy50ZXh0IH0gOiB0ZW1wbGF0ZS50ZXh0LFxuICB9O1xufVxuIiwgImltcG9ydCB7IENhY2hlIGFzIFJheWNhc3RDYWNoZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IENhY2hlID0gbmV3IFJheWNhc3RDYWNoZSh7IG5hbWVzcGFjZTogXCJidy1jYWNoZVwiIH0pO1xuIiwgImV4cG9ydCBjb25zdCBwbGF0Zm9ybSA9IHByb2Nlc3MucGxhdGZvcm0gPT09IFwiZGFyd2luXCIgPyBcIm1hY29zXCIgOiBcIndpbmRvd3NcIjtcbiIsICJpbXBvcnQgeyBGb3JtIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuXG5leHBvcnQgY29uc3QgTG9hZGluZ0ZhbGxiYWNrID0gKCkgPT4gPEZvcm0gaXNMb2FkaW5nIC8+O1xuIiwgImltcG9ydCB7IEVmZmVjdENhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuXG50eXBlIEFzeW5jRWZmZWN0Q2FsbGJhY2sgPSAoKSA9PiBQcm9taXNlPGFueT47XG50eXBlIEVmZmVjdCA9IEVmZmVjdENhbGxiYWNrIHwgQXN5bmNFZmZlY3RDYWxsYmFjaztcblxudHlwZSBEZWZpbmVkVmFsdWUgPSBudWxsIHwgYm9vbGVhbiB8IG51bWJlciB8IHN0cmluZyB8IG9iamVjdCB8IHN5bWJvbDtcblxuLyoqIGB1c2VFZmZlY3RgIHRoYXQgb25seSBydW5zIG9uY2UgYWZ0ZXIgdGhlIGBjb25kaXRpb25gIGlzIG1ldCAqL1xuZnVuY3Rpb24gdXNlT25jZUVmZmVjdChlZmZlY3Q6IEVmZmVjdCwgY29uZGl0aW9uPzogRGVmaW5lZFZhbHVlKSB7XG4gIGNvbnN0IGhhc1J1biA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaGFzUnVuLmN1cnJlbnQpIHJldHVybjtcbiAgICBpZiAoY29uZGl0aW9uICE9PSB1bmRlZmluZWQgJiYgIWNvbmRpdGlvbikgcmV0dXJuO1xuICAgIGhhc1J1bi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB2b2lkIGVmZmVjdCgpO1xuICB9LCBbY29uZGl0aW9uXSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZU9uY2VFZmZlY3Q7XG4iLCAiZXhwb3J0IHR5cGUgT2JqZWN0RW50cmllczxPYmo+ID0geyBbS2V5IGluIGtleW9mIE9ial06IFtLZXksIE9ialtLZXldXSB9W2tleW9mIE9ial1bXTtcblxuLyoqIGBPYmplY3QuZW50cmllc2Agd2l0aCB0eXBlZCBrZXlzICovXG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0RW50cmllczxUIGV4dGVuZHMgb2JqZWN0PihvYmo6IFQpIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iaikgYXMgT2JqZWN0RW50cmllczxUPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KG9iajogdW5rbm93bik6IG9iaiBpcyBvYmplY3Qge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbiIsICJpbXBvcnQgeyBFeGVjYUVycm9yIH0gZnJvbSBcImV4ZWNhXCI7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gXCJ+L3V0aWxzL29iamVjdHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRyZWF0RXJyb3IoZXJyb3I6IHVua25vd24sIG9wdGlvbnM/OiB7IG9taXRTZW5zaXRpdmVWYWx1ZTogc3RyaW5nIH0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBleGVjYUVycm9yID0gZXJyb3IgYXMgRXhlY2FFcnJvcjtcbiAgICBsZXQgZXJyb3JTdHJpbmc6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAoZXhlY2FFcnJvcj8uc3RkZXJyKSB7XG4gICAgICBlcnJvclN0cmluZyA9IGV4ZWNhRXJyb3Iuc3RkZXJyO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZXJyb3JTdHJpbmcgPSBgJHtlcnJvci5uYW1lfTogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChlcnJvcikpIHtcbiAgICAgIGVycm9yU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvclN0cmluZyA9IGAke2Vycm9yfWA7XG4gICAgfVxuXG4gICAgaWYgKCFlcnJvclN0cmluZykgcmV0dXJuIFwiXCI7XG4gICAgaWYgKCFvcHRpb25zPy5vbWl0U2Vuc2l0aXZlVmFsdWUpIHJldHVybiBlcnJvclN0cmluZztcblxuICAgIHJldHVybiBvbWl0U2Vuc2l0aXZlVmFsdWVGcm9tU3RyaW5nKGVycm9yU3RyaW5nLCBvcHRpb25zLm9taXRTZW5zaXRpdmVWYWx1ZSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbWl0U2Vuc2l0aXZlVmFsdWVGcm9tU3RyaW5nKHZhbHVlOiBzdHJpbmcsIHNlbnNpdGl2ZVZhbHVlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChzZW5zaXRpdmVWYWx1ZSwgXCJpXCIpLCBcIltSRURBQ1RFRF1cIik7XG59XG4iLCAiaW1wb3J0IHsgQWxlcnQsIGNsb3NlTWFpbldpbmRvdywgY29uZmlybUFsZXJ0LCBJY29uLCBwb3BUb1Jvb3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VCaXR3YXJkZW4gfSBmcm9tIFwifi9jb250ZXh0L2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgVmF1bHRTdGF0ZSB9IGZyb20gXCJ+L3R5cGVzL2dlbmVyYWxcIjtcbmltcG9ydCB7IGdldFNlcnZlclVybFByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG5mdW5jdGlvbiB1c2VWYXVsdE1lc3NhZ2VzKCkge1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3QgW3ZhdWx0U3RhdGUsIHNldFZhdWx0U3RhdGVdID0gdXNlU3RhdGU8VmF1bHRTdGF0ZSB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdm9pZCBiaXR3YXJkZW5cbiAgICAgIC5zdGF0dXMoKVxuICAgICAgLnRoZW4oKHsgZXJyb3IsIHJlc3VsdCB9KSA9PiB7XG4gICAgICAgIGlmICghZXJyb3IpIHNldFZhdWx0U3RhdGUocmVzdWx0KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvKiBpZ25vcmUgKi9cbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2hvdWxkU2hvd1NlcnZlciA9ICEhZ2V0U2VydmVyVXJsUHJlZmVyZW5jZSgpO1xuXG4gIGxldCB1c2VyTWVzc2FnZSA9IFwiLi4uXCI7XG4gIGxldCBzZXJ2ZXJNZXNzYWdlID0gXCIuLi5cIjtcblxuICBpZiAodmF1bHRTdGF0ZSkge1xuICAgIGNvbnN0IHsgc3RhdHVzLCB1c2VyRW1haWwsIHNlcnZlclVybCB9ID0gdmF1bHRTdGF0ZTtcbiAgICB1c2VyTWVzc2FnZSA9IHN0YXR1cyA9PSBcInVuYXV0aGVudGljYXRlZFwiID8gXCJcdTI3NEMgTG9nZ2VkIG91dFwiIDogYFx1RDgzRFx1REQxMiBMb2NrZWQgKCR7dXNlckVtYWlsfSlgO1xuICAgIGlmIChzZXJ2ZXJVcmwpIHtcbiAgICAgIHNlcnZlck1lc3NhZ2UgPSBzZXJ2ZXJVcmwgfHwgXCJcIjtcbiAgICB9IGVsc2UgaWYgKCghc2VydmVyVXJsICYmIHNob3VsZFNob3dTZXJ2ZXIpIHx8IChzZXJ2ZXJVcmwgJiYgIXNob3VsZFNob3dTZXJ2ZXIpKSB7XG4gICAgICAvLyBIb3N0ZWQgc3RhdGUgbm90IGluIHN5bmMgd2l0aCBDTEkgKHdlIGRvbid0IGNoZWNrIGZvciBlcXVhbGl0eSlcbiAgICAgIHZvaWQgY29uZmlybUFsZXJ0KHtcbiAgICAgICAgaWNvbjogSWNvbi5FeGNsYW1hdGlvbk1hcmssXG4gICAgICAgIHRpdGxlOiBcIlJlc3RhcnQgUmVxdWlyZWRcIixcbiAgICAgICAgbWVzc2FnZTogXCJCaXR3YXJkZW4gc2VydmVyIFVSTCBwcmVmZXJlbmNlIGhhcyBiZWVuIGNoYW5nZWQgc2luY2UgdGhlIGV4dGVuc2lvbiB3YXMgb3BlbmVkLlwiLFxuICAgICAgICBwcmltYXJ5QWN0aW9uOiB7XG4gICAgICAgICAgdGl0bGU6IFwiQ2xvc2UgRXh0ZW5zaW9uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGRpc21pc3NBY3Rpb246IHtcbiAgICAgICAgICB0aXRsZTogXCJDbG9zZSBSYXljYXN0XCIsIC8vIE9ubHkgaGVyZSB0byBwcm92aWRlIHRoZSBuZWNlc3Nhcnkgc2Vjb25kIG9wdGlvblxuICAgICAgICAgIHN0eWxlOiBBbGVydC5BY3Rpb25TdHlsZS5DYW5jZWwsXG4gICAgICAgIH0sXG4gICAgICB9KS50aGVuKChjbG9zZUV4dGVuc2lvbikgPT4ge1xuICAgICAgICBpZiAoY2xvc2VFeHRlbnNpb24pIHtcbiAgICAgICAgICB2b2lkIHBvcFRvUm9vdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvaWQgY2xvc2VNYWluV2luZG93KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHVzZXJNZXNzYWdlLCBzZXJ2ZXJNZXNzYWdlLCBzaG91bGRTaG93U2VydmVyIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVZhdWx0TWVzc2FnZXM7XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuXG50eXBlIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zID0ge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIHNldDogKHZhbHVlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHJlbW92ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn07XG5cbi8qKiBSZWFkIGFuZCBtYW5hZ2UgYSBzaW5nbGUgaXRlbSBpbiBMb2NhbFN0b3JhZ2UuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTG9jYWxTdG9yYWdlSXRlbShrZXk6IHN0cmluZyk6IFtzdHJpbmcgfCB1bmRlZmluZWQsIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IFtzdHJpbmcsIExvY2FsU3RvcmFnZUl0ZW1BY3Rpb25zXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2VJdGVtKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpIHtcbiAgY29uc3QgeyBkYXRhOiB2YWx1ZSwgcmV2YWxpZGF0ZSwgaXNMb2FkaW5nIH0gPSB1c2VQcm9taXNlKCgpID0+IExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oa2V5KSk7XG5cbiAgY29uc3Qgc2V0ID0gYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBhd2FpdCBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICBhd2FpdCByZXZhbGlkYXRlKCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgYXdhaXQgcmV2YWxpZGF0ZSgpO1xuICB9O1xuXG4gIHJldHVybiBbdmFsdWUgPz8gZGVmYXVsdFZhbHVlLCB7IGlzTG9hZGluZywgc2V0LCByZW1vdmUgfV0gYXMgY29uc3Q7XG59XG4iLCAidmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXF1YWwoZm9vLCBiYXIpIHtcblx0dmFyIGN0b3IsIGxlbjtcblx0aWYgKGZvbyA9PT0gYmFyKSByZXR1cm4gdHJ1ZTtcblxuXHRpZiAoZm9vICYmIGJhciAmJiAoY3Rvcj1mb28uY29uc3RydWN0b3IpID09PSBiYXIuY29uc3RydWN0b3IpIHtcblx0XHRpZiAoY3RvciA9PT0gRGF0ZSkgcmV0dXJuIGZvby5nZXRUaW1lKCkgPT09IGJhci5nZXRUaW1lKCk7XG5cdFx0aWYgKGN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGZvby50b1N0cmluZygpID09PSBiYXIudG9TdHJpbmcoKTtcblxuXHRcdGlmIChjdG9yID09PSBBcnJheSkge1xuXHRcdFx0aWYgKChsZW49Zm9vLmxlbmd0aCkgPT09IGJhci5sZW5ndGgpIHtcblx0XHRcdFx0d2hpbGUgKGxlbi0tICYmIGRlcXVhbChmb29bbGVuXSwgYmFyW2xlbl0pKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBsZW4gPT09IC0xO1xuXHRcdH1cblxuXHRcdGlmICghY3RvciB8fCB0eXBlb2YgZm9vID09PSAnb2JqZWN0Jykge1xuXHRcdFx0bGVuID0gMDtcblx0XHRcdGZvciAoY3RvciBpbiBmb28pIHtcblx0XHRcdFx0aWYgKGhhcy5jYWxsKGZvbywgY3RvcikgJiYgKytsZW4gJiYgIWhhcy5jYWxsKGJhciwgY3RvcikpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWYgKCEoY3RvciBpbiBiYXIpIHx8ICFkZXF1YWwoZm9vW2N0b3JdLCBiYXJbY3Rvcl0pKSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoYmFyKS5sZW5ndGggPT09IGxlbjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZm9vICE9PSBmb28gJiYgYmFyICE9PSBiYXI7XG59XG4iLCAiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJub2RlXCIgLz5cblxuZXhwb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gXCIuL3VzZVByb21pc2VcIjtcbmV4cG9ydCB7IHVzZUNhY2hlZFN0YXRlIH0gZnJvbSBcIi4vdXNlQ2FjaGVkU3RhdGVcIjtcbmV4cG9ydCB7IHVzZUNhY2hlZFByb21pc2UgfSBmcm9tIFwiLi91c2VDYWNoZWRQcm9taXNlXCI7XG5leHBvcnQgeyB1c2VGZXRjaCB9IGZyb20gXCIuL3VzZUZldGNoXCI7XG5leHBvcnQgeyB1c2VFeGVjIH0gZnJvbSBcIi4vdXNlRXhlY1wiO1xuZXhwb3J0IHsgdXNlU3RyZWFtSlNPTiB9IGZyb20gXCIuL3VzZVN0cmVhbUpTT05cIjtcbmV4cG9ydCB7IHVzZVNRTCB9IGZyb20gXCIuL3VzZVNRTFwiO1xuZXhwb3J0IHsgdXNlRm9ybSwgRm9ybVZhbGlkYXRpb24gfSBmcm9tIFwiLi91c2VGb3JtXCI7XG5leHBvcnQgeyB1c2VBSSB9IGZyb20gXCIuL3VzZUFJXCI7XG5leHBvcnQgeyB1c2VGcmVjZW5jeVNvcnRpbmcgfSBmcm9tIFwiLi91c2VGcmVjZW5jeVNvcnRpbmdcIjtcbmV4cG9ydCB7IHVzZUxvY2FsU3RvcmFnZSB9IGZyb20gXCIuL3VzZUxvY2FsU3RvcmFnZVwiO1xuXG5leHBvcnQgeyBnZXRBdmF0YXJJY29uLCBnZXRGYXZpY29uLCBnZXRQcm9ncmVzc0ljb24gfSBmcm9tIFwiLi9pY29uXCI7XG5cbmV4cG9ydCB7IE9BdXRoU2VydmljZSwgd2l0aEFjY2Vzc1Rva2VuLCBnZXRBY2Nlc3NUb2tlbiB9IGZyb20gXCIuL29hdXRoXCI7XG5cbmV4cG9ydCB7IGNyZWF0ZURlZXBsaW5rLCBjcmVhdGVFeHRlbnNpb25EZWVwbGluaywgY3JlYXRlU2NyaXB0Q29tbWFuZERlZXBsaW5rLCBEZWVwbGlua1R5cGUgfSBmcm9tIFwiLi9jcmVhdGVEZWVwbGlua1wiO1xuZXhwb3J0IHsgZXhlY3V0ZVNRTCB9IGZyb20gXCIuL2V4ZWN1dGVTUUxcIjtcbmV4cG9ydCB7IHJ1bkFwcGxlU2NyaXB0IH0gZnJvbSBcIi4vcnVuLWFwcGxlc2NyaXB0XCI7XG5leHBvcnQgeyBydW5Qb3dlclNoZWxsU2NyaXB0IH0gZnJvbSBcIi4vcnVuLXBvd2Vyc2hlbGwtc2NyaXB0XCI7XG5leHBvcnQgeyBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIi4vc2hvd0ZhaWx1cmVUb2FzdFwiO1xuZXhwb3J0IHsgd2l0aENhY2hlIH0gZnJvbSBcIi4vY2FjaGVcIjtcblxuZXhwb3J0IHR5cGUgeyBQcm9taXNlT3B0aW9ucyB9IGZyb20gXCIuL3VzZVByb21pc2VcIjtcbmV4cG9ydCB0eXBlIHsgQ2FjaGVkUHJvbWlzZU9wdGlvbnMgfSBmcm9tIFwiLi91c2VDYWNoZWRQcm9taXNlXCI7XG5leHBvcnQgdHlwZSB7XG4gIE9BdXRoU2VydmljZU9wdGlvbnMsXG4gIE9uQXV0aG9yaXplUGFyYW1zLFxuICBXaXRoQWNjZXNzVG9rZW5Db21wb25lbnRPckZuLFxuICBQcm92aWRlcldpdGhEZWZhdWx0Q2xpZW50T3B0aW9ucyxcbiAgUHJvdmlkZXJPcHRpb25zLFxufSBmcm9tIFwiLi9vYXV0aFwiO1xuZXhwb3J0IHR5cGUgeyBBc3luY1N0YXRlLCBNdXRhdGVQcm9taXNlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbiIsICJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCBSZWZPYmplY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGVudmlyb25tZW50LCBMYXVuY2hUeXBlLCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZURlZXBNZW1vIH0gZnJvbSBcIi4vdXNlRGVlcE1lbW9cIjtcbmltcG9ydCB7XG4gIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSxcbiAgTXV0YXRlUHJvbWlzZSxcbiAgVXNlUHJvbWlzZVJldHVyblR5cGUsXG4gIEFzeW5jU3RhdGUsXG4gIEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSxcbiAgVW53cmFwUmV0dXJuLFxuICBQYWdpbmF0aW9uT3B0aW9ucyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuaW1wb3J0IHsgc2hvd0ZhaWx1cmVUb2FzdCB9IGZyb20gXCIuL3Nob3dGYWlsdXJlVG9hc3RcIjtcblxuZXhwb3J0IHR5cGUgUHJvbWlzZU9wdGlvbnM8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSB8IEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZT4gPSB7XG4gIC8qKlxuICAgKiBBIHJlZmVyZW5jZSB0byBhbiBgQWJvcnRDb250cm9sbGVyYCB0byBjYW5jZWwgYSBwcmV2aW91cyBjYWxsIHdoZW4gdHJpZ2dlcmluZyBhIG5ldyBvbmVcbiAgICovXG4gIGFib3J0YWJsZT86IFJlZk9iamVjdDxBYm9ydENvbnRyb2xsZXIgfCBudWxsIHwgdW5kZWZpbmVkPjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYWN0dWFsbHkgZXhlY3V0ZSB0aGUgZnVuY3Rpb24gb3Igbm90LlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgb25lIG9mIHRoZSBmdW5jdGlvbidzIGFyZ3VtZW50cyBkZXBlbmRzIG9uIHNvbWV0aGluZyB0aGF0XG4gICAqIG1pZ2h0IG5vdCBiZSBhdmFpbGFibGUgcmlnaHQgYXdheSAoZm9yIGV4YW1wbGUsIGRlcGVuZHMgb24gc29tZSB1c2VyIGlucHV0cykuIEJlY2F1c2UgUmVhY3QgcmVxdWlyZXNcbiAgICogZXZlcnkgaG9va3MgdG8gYmUgZGVmaW5lZCBvbiB0aGUgcmVuZGVyLCB0aGlzIGZsYWcgZW5hYmxlcyB5b3UgdG8gZGVmaW5lIHRoZSBob29rIHJpZ2h0IGF3YXkgYnV0XG4gICAqIHdhaXQgdXRpbCB5b3UgaGF2ZSBhbGwgdGhlIGFyZ3VtZW50cyByZWFkeSB0byBleGVjdXRlIHRoZSBmdW5jdGlvbi5cbiAgICovXG4gIGV4ZWN1dGU/OiBib29sZWFuO1xuICAvKipcbiAgICogT3B0aW9ucyBmb3IgdGhlIGdlbmVyaWMgZmFpbHVyZSB0b2FzdC5cbiAgICogSXQgYWxsb3dzIHlvdSB0byBjdXN0b21pemUgdGhlIHRpdGxlLCBtZXNzYWdlLCBhbmQgcHJpbWFyeSBhY3Rpb24gb2YgdGhlIGZhaWx1cmUgdG9hc3QuXG4gICAqL1xuICBmYWlsdXJlVG9hc3RPcHRpb25zPzogUGFydGlhbDxQaWNrPFRvYXN0Lk9wdGlvbnMsIFwidGl0bGVcIiB8IFwicHJpbWFyeUFjdGlvblwiIHwgXCJtZXNzYWdlXCI+PjtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGFuIGV4ZWN1dGlvbiBmYWlscy4gQnkgZGVmYXVsdCBpdCB3aWxsIGxvZyB0aGUgZXJyb3IgYW5kIHNob3dcbiAgICogYSBnZW5lcmljIGZhaWx1cmUgdG9hc3QuXG4gICAqL1xuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhbiBleGVjdXRpb24gc3VjY2VlZHMuXG4gICAqL1xuICBvbkRhdGE/OiAoZGF0YTogVW53cmFwUmV0dXJuPFQ+LCBwYWdpbmF0aW9uPzogUGFnaW5hdGlvbk9wdGlvbnM8VW53cmFwUmV0dXJuPFQ+PikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhbiBleGVjdXRpb24gd2lsbCBzdGFydFxuICAgKi9cbiAgb25XaWxsRXhlY3V0ZT86IChwYXJhbWV0ZXJzOiBQYXJhbWV0ZXJzPFQ+KSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBXcmFwcyBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIGluIGFub3RoZXIgZnVuY3Rpb24sIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgQXN5bmNTdGF0ZX0gY29ycmVzcG9uZGluZyB0byB0aGUgZXhlY3V0aW9uIG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcmVtYXJrIFRoaXMgb3ZlcmxvYWQgc2hvdWxkIGJlIHVzZWQgd2hlbiB3b3JraW5nIHdpdGggcGFnaW5hdGVkIGRhdGEgc291cmNlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSBcIm5vZGU6dGltZXJzL3Byb21pc2VzXCI7XG4gKiBpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICogaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZVByb21pc2UgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAqXG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhLCBwYWdpbmF0aW9uIH0gPSB1c2VQcm9taXNlKFxuICogICAgIChzZWFyY2hUZXh0OiBzdHJpbmcpID0+IGFzeW5jIChvcHRpb25zOiB7IHBhZ2U6IG51bWJlciB9KSA9PiB7XG4gKiAgICAgICBhd2FpdCBzZXRUaW1lb3V0KDIwMCk7XG4gKiAgICAgICBjb25zdCBuZXdEYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjUgfSwgKF92LCBpbmRleCkgPT4gKHtcbiAqICAgICAgICAgaW5kZXgsXG4gKiAgICAgICAgIHBhZ2U6IG9wdGlvbnMucGFnZSxcbiAqICAgICAgICAgdGV4dDogc2VhcmNoVGV4dCxcbiAqICAgICAgIH0pKTtcbiAqICAgICAgIHJldHVybiB7IGRhdGE6IG5ld0RhdGEsIGhhc01vcmU6IG9wdGlvbnMucGFnZSA8IDEwIH07XG4gKiAgICAgfSxcbiAqICAgICBbc2VhcmNoVGV4dF1cbiAqICAgKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IG9uU2VhcmNoVGV4dENoYW5nZT17c2V0U2VhcmNoVGV4dH0gcGFnaW5hdGlvbj17cGFnaW5hdGlvbn0+XG4gKiAgICAgICB7ZGF0YT8ubWFwKChpdGVtKSA9PiAoXG4gKiAgICAgICAgIDxMaXN0Lkl0ZW1cbiAqICAgICAgICAgICBrZXk9e2Ake2l0ZW0ucGFnZX0gJHtpdGVtLmluZGV4fSAke2l0ZW0udGV4dH1gfVxuICogICAgICAgICAgIHRpdGxlPXtgUGFnZSAke2l0ZW0ucGFnZX0gSXRlbSAke2l0ZW0uaW5kZXh9YH1cbiAqICAgICAgICAgICBzdWJ0aXRsZT17aXRlbS50ZXh0fVxuICogICAgICAgICAvPlxuICogICAgICAgKSl9XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlPFtdPj4oXG4gIGZuOiBULFxuKTogVXNlUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2U+KFxuICBmbjogVCxcbiAgYXJnczogUGFyYW1ldGVyczxUPixcbiAgb3B0aW9ucz86IFByb21pc2VPcHRpb25zPFQ+LFxuKTogVXNlUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+PjtcblxuLyoqXG4gKiBXcmFwcyBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgQXN5bmNTdGF0ZX0gY29ycmVzcG9uZGluZyB0byB0aGUgZXhlY3V0aW9uIG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcmVtYXJrIFRoZSBmdW5jdGlvbiBpcyBhc3N1bWVkIHRvIGJlIGNvbnN0YW50IChlZy4gY2hhbmdpbmcgaXQgd29uJ3QgdHJpZ2dlciBhIHJldmFsaWRhdGlvbikuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gJ0ByYXljYXN0L3V0aWxzJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPigpO1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcmV2YWxpZGF0ZSB9ID0gdXNlUHJvbWlzZShhc3luYyAodXJsOiBzdHJpbmcpID0+IHtcbiAqICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwgfSk7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICogICAgIHJldHVybiByZXN1bHRcbiAqICAgfSxcbiAqICAgWydodHRwczovL2FwaS5leGFtcGxlJ10sXG4gKiAgIHtcbiAqICAgICBhYm9ydGFibGVcbiAqICAgfSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxEZXRhaWxcbiAqICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nfVxuICogICAgICAgbWFya2Rvd249e2RhdGF9XG4gKiAgICAgICBhY3Rpb25zPXtcbiAqICAgICAgICAgPEFjdGlvblBhbmVsPlxuICogICAgICAgICAgIDxBY3Rpb24gdGl0bGU9XCJSZWxvYWRcIiBvbkFjdGlvbj17KCkgPT4gcmV2YWxpZGF0ZSgpfSAvPlxuICogICAgICAgICA8L0FjdGlvblBhbmVsPlxuICogICAgICAgfVxuICogICAgIC8+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1Byb21pc2U8W10+PihmbjogVCk6IFVzZVByb21pc2VSZXR1cm5UeXBlPFVud3JhcFJldHVybjxUPj47XG5leHBvcnQgZnVuY3Rpb24gdXNlUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlPihcbiAgZm46IFQsXG4gIGFyZ3M6IFBhcmFtZXRlcnM8VD4sXG4gIG9wdGlvbnM/OiBQcm9taXNlT3B0aW9uczxUPixcbik6IFVzZVByb21pc2VSZXR1cm5UeXBlPFVud3JhcFJldHVybjxUPj47XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcm9taXNlPFQgZXh0ZW5kcyBGdW5jdGlvblJldHVybmluZ1Byb21pc2UgfCBGdW5jdGlvblJldHVybmluZ1BhZ2luYXRlZFByb21pc2U+KFxuICBmbjogVCxcbiAgYXJncz86IFBhcmFtZXRlcnM8VD4sXG4gIG9wdGlvbnM/OiBQcm9taXNlT3B0aW9uczxUPixcbik6IFVzZVByb21pc2VSZXR1cm5UeXBlPGFueT4ge1xuICBjb25zdCBsYXN0Q2FsbElkID0gdXNlUmVmKDApO1xuICBjb25zdCBbc3RhdGUsIHNldF0gPSB1c2VTdGF0ZTxBc3luY1N0YXRlPFVud3JhcFJldHVybjxUPj4+KHsgaXNMb2FkaW5nOiB0cnVlIH0pO1xuXG4gIGNvbnN0IGZuUmVmID0gdXNlTGF0ZXN0KGZuKTtcbiAgY29uc3QgbGF0ZXN0QWJvcnRhYmxlID0gdXNlTGF0ZXN0KG9wdGlvbnM/LmFib3J0YWJsZSk7XG4gIGNvbnN0IGxhdGVzdEFyZ3MgPSB1c2VMYXRlc3QoYXJncyB8fCBbXSk7XG4gIGNvbnN0IGxhdGVzdE9uRXJyb3IgPSB1c2VMYXRlc3Qob3B0aW9ucz8ub25FcnJvcik7XG4gIGNvbnN0IGxhdGVzdE9uRGF0YSA9IHVzZUxhdGVzdChvcHRpb25zPy5vbkRhdGEpO1xuICBjb25zdCBsYXRlc3RPbldpbGxFeGVjdXRlID0gdXNlTGF0ZXN0KG9wdGlvbnM/Lm9uV2lsbEV4ZWN1dGUpO1xuICBjb25zdCBsYXRlc3RGYWlsdXJlVG9hc3QgPSB1c2VMYXRlc3Qob3B0aW9ucz8uZmFpbHVyZVRvYXN0T3B0aW9ucyk7XG4gIGNvbnN0IGxhdGVzdFZhbHVlID0gdXNlTGF0ZXN0KHN0YXRlLmRhdGEpO1xuICBjb25zdCBsYXRlc3RDYWxsYmFjayA9IHVzZVJlZjwoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4gUHJvbWlzZTxVbndyYXBSZXR1cm48VD4+PihudWxsKTtcblxuICBjb25zdCBwYWdpbmF0aW9uQXJnc1JlZiA9IHVzZVJlZjxQYWdpbmF0aW9uT3B0aW9ucz4oeyBwYWdlOiAwIH0pO1xuICBjb25zdCB1c2VQYWdpbmF0aW9uUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgaGFzTW9yZVJlZiA9IHVzZVJlZih0cnVlKTtcbiAgY29uc3QgcGFnZVNpemVSZWYgPSB1c2VSZWYoNTApO1xuXG4gIGNvbnN0IGFib3J0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChsYXRlc3RBYm9ydGFibGUuY3VycmVudCkge1xuICAgICAgbGF0ZXN0QWJvcnRhYmxlLmN1cnJlbnQuY3VycmVudD8uYWJvcnQoKTtcbiAgICAgIGxhdGVzdEFib3J0YWJsZS5jdXJyZW50LmN1cnJlbnQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgfVxuICAgIHJldHVybiArK2xhc3RDYWxsSWQuY3VycmVudDtcbiAgfSwgW2xhdGVzdEFib3J0YWJsZV0pO1xuXG4gIGNvbnN0IGNhbGxiYWNrID0gdXNlQ2FsbGJhY2soXG4gICAgKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pOiBQcm9taXNlPFVud3JhcFJldHVybjxUPj4gPT4ge1xuICAgICAgY29uc3QgY2FsbElkID0gYWJvcnQoKTtcblxuICAgICAgbGF0ZXN0T25XaWxsRXhlY3V0ZS5jdXJyZW50Py4oYXJncyk7XG5cbiAgICAgIHNldCgocHJldlN0YXRlKSA9PiAoeyAuLi5wcmV2U3RhdGUsIGlzTG9hZGluZzogdHJ1ZSB9KSk7XG5cbiAgICAgIGNvbnN0IHByb21pc2VPclBhZ2luYXRlZFByb21pc2UgPSBiaW5kUHJvbWlzZUlmTmVlZGVkKGZuUmVmLmN1cnJlbnQpKC4uLmFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIGlmIChlcnJvci5uYW1lID09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhbGxJZCA9PT0gbGFzdENhbGxJZC5jdXJyZW50KSB7XG4gICAgICAgICAgLy8gaGFuZGxlIGVycm9yc1xuICAgICAgICAgIGlmIChsYXRlc3RPbkVycm9yLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGxhdGVzdE9uRXJyb3IuY3VycmVudChlcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChlbnZpcm9ubWVudC5sYXVuY2hUeXBlICE9PSBMYXVuY2hUeXBlLkJhY2tncm91bmQpIHtcbiAgICAgICAgICAgICAgc2hvd0ZhaWx1cmVUb2FzdChlcnJvciwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZhaWxlZCB0byBmZXRjaCBsYXRlc3QgZGF0YVwiLFxuICAgICAgICAgICAgICAgIHByaW1hcnlBY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlJldHJ5XCIsXG4gICAgICAgICAgICAgICAgICBvbkFjdGlvbih0b2FzdCkge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdENhbGxiYWNrLmN1cnJlbnQ/LiguLi4oKGxhdGVzdEFyZ3MuY3VycmVudCB8fCBbXSkgYXMgUGFyYW1ldGVyczxUPikpO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLmxhdGVzdEZhaWx1cmVUb2FzdC5jdXJyZW50LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0KHsgZXJyb3IsIGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgcHJvbWlzZU9yUGFnaW5hdGVkUHJvbWlzZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHVzZVBhZ2luYXRpb25SZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgIHJldHVybiBwcm9taXNlT3JQYWdpbmF0ZWRQcm9taXNlKHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQpLnRoZW4oXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0b28gY29tcGxpY2F0ZWQgZm9yIFRTXG4gICAgICAgICAgKHsgZGF0YSwgaGFzTW9yZSwgY3Vyc29yIH06IHsgZGF0YTogVW53cmFwUmV0dXJuPFQ+OyBoYXNNb3JlOiBib29sZWFuOyBjdXJzb3I/OiBhbnkgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxJZCA9PT0gbGFzdENhbGxJZC5jdXJyZW50KSB7XG4gICAgICAgICAgICAgIGlmIChwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5jdXJzb3IgPSBjdXJzb3I7XG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5sYXN0SXRlbSA9IGRhdGE/LltkYXRhLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGxhdGVzdE9uRGF0YS5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgbGF0ZXN0T25EYXRhLmN1cnJlbnQoZGF0YSwgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoaGFzTW9yZSkge1xuICAgICAgICAgICAgICAgIHBhZ2VTaXplUmVmLmN1cnJlbnQgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoYXNNb3JlUmVmLmN1cnJlbnQgPSBoYXNNb3JlO1xuXG4gICAgICAgICAgICAgIHNldCgocHJldmlvdXNEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQucGFnZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgaXNMb2FkaW5nOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHdlIGtub3cgaXQncyBhbiBhcnJheSBoZXJlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogKHByZXZpb3VzRGF0YS5kYXRhIHx8IFtdKT8uY29uY2F0KGRhdGEpLCBpc0xvYWRpbmc6IGZhbHNlIH07XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgICAgICAgICAgaGFzTW9yZVJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH0sXG4gICAgICAgICkgYXMgUHJvbWlzZTxVbndyYXBSZXR1cm48VD4+O1xuICAgICAgfVxuXG4gICAgICB1c2VQYWdpbmF0aW9uUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBwcm9taXNlT3JQYWdpbmF0ZWRQcm9taXNlLnRoZW4oKGRhdGE6IFVud3JhcFJldHVybjxUPikgPT4ge1xuICAgICAgICBpZiAoY2FsbElkID09PSBsYXN0Q2FsbElkLmN1cnJlbnQpIHtcbiAgICAgICAgICBpZiAobGF0ZXN0T25EYXRhLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGxhdGVzdE9uRGF0YS5jdXJyZW50KGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXQoeyBkYXRhLCBpc0xvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9LCBoYW5kbGVFcnJvcikgYXMgUHJvbWlzZTxVbndyYXBSZXR1cm48VD4+O1xuICAgIH0sXG4gICAgW1xuICAgICAgbGF0ZXN0T25EYXRhLFxuICAgICAgbGF0ZXN0T25FcnJvcixcbiAgICAgIGxhdGVzdEFyZ3MsXG4gICAgICBmblJlZixcbiAgICAgIHNldCxcbiAgICAgIGxhdGVzdENhbGxiYWNrLFxuICAgICAgbGF0ZXN0T25XaWxsRXhlY3V0ZSxcbiAgICAgIHBhZ2luYXRpb25BcmdzUmVmLFxuICAgICAgbGF0ZXN0RmFpbHVyZVRvYXN0LFxuICAgICAgYWJvcnQsXG4gICAgXSxcbiAgKTtcblxuICBsYXRlc3RDYWxsYmFjay5jdXJyZW50ID0gY2FsbGJhY2s7XG5cbiAgY29uc3QgcmV2YWxpZGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyByZXNldCB0aGUgcGFnaW5hdGlvblxuICAgIHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQgPSB7IHBhZ2U6IDAgfTtcblxuICAgIGNvbnN0IGFyZ3MgPSAobGF0ZXN0QXJncy5jdXJyZW50IHx8IFtdKSBhcyBQYXJhbWV0ZXJzPFQ+O1xuICAgIHJldHVybiBjYWxsYmFjayguLi5hcmdzKTtcbiAgfSwgW2NhbGxiYWNrLCBsYXRlc3RBcmdzXSk7XG5cbiAgY29uc3QgbXV0YXRlID0gdXNlQ2FsbGJhY2s8TXV0YXRlUHJvbWlzZTxBd2FpdGVkPFJldHVyblR5cGU8VD4+LCB1bmRlZmluZWQ+PihcbiAgICBhc3luYyAoYXN5bmNVcGRhdGUsIG9wdGlvbnMpID0+IHtcbiAgICAgIGxldCBkYXRhQmVmb3JlT3B0aW1pc3RpY1VwZGF0ZTogQXdhaXRlZDxSZXR1cm5UeXBlPFQ+PiB8IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChvcHRpb25zPy5vcHRpbWlzdGljVXBkYXRlKSB7XG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBpbi1mbGlnaHQgcmVxdWVzdCB0byBtYWtlIHN1cmUgaXQgd29uJ3Qgb3ZlcndyaXRlIHRoZSBvcHRpbWlzdGljIHVwZGF0ZVxuICAgICAgICAgIGFib3J0KCk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gXCJmdW5jdGlvblwiICYmIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGRhdGEgYmVmb3JlIHRoZSBvcHRpbWlzdGljIHVwZGF0ZSxcbiAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmIHdlIG5lZWQgaXQgKGVnLiBvbmx5IHdoZW4gd2Ugd2FudCB0byBhdXRvbWF0aWNhbGx5IHJvbGxiYWNrIGFmdGVyKVxuICAgICAgICAgICAgZGF0YUJlZm9yZU9wdGltaXN0aWNVcGRhdGUgPSBzdHJ1Y3R1cmVkQ2xvbmUobGF0ZXN0VmFsdWUuY3VycmVudD8udmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBvcHRpb25zLm9wdGltaXN0aWNVcGRhdGU7XG4gICAgICAgICAgc2V0KChwcmV2U3RhdGUpID0+ICh7IC4uLnByZXZTdGF0ZSwgZGF0YTogdXBkYXRlKHByZXZTdGF0ZS5kYXRhKSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IGFzeW5jVXBkYXRlO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBvcHRpb25zLnJvbGxiYWNrT25FcnJvcjtcbiAgICAgICAgICBzZXQoKHByZXZTdGF0ZSkgPT4gKHsgLi4ucHJldlN0YXRlLCBkYXRhOiB1cGRhdGUocHJldlN0YXRlLmRhdGEpIH0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zPy5vcHRpbWlzdGljVXBkYXRlICYmIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBzZXQoKHByZXZTdGF0ZSkgPT4gKHsgLi4ucHJldlN0YXRlLCBkYXRhOiBkYXRhQmVmb3JlT3B0aW1pc3RpY1VwZGF0ZSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG9wdGlvbnM/LnNob3VsZFJldmFsaWRhdGVBZnRlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoZW52aXJvbm1lbnQubGF1bmNoVHlwZSA9PT0gTGF1bmNoVHlwZS5CYWNrZ3JvdW5kIHx8IGVudmlyb25tZW50LmNvbW1hbmRNb2RlID09PSBcIm1lbnUtYmFyXCIpIHtcbiAgICAgICAgICAgIC8vIHdoZW4gaW4gdGhlIGJhY2tncm91bmQgb3IgaW4gYSBtZW51IGJhciwgd2UgYXJlIGdvaW5nIHRvIGF3YWl0IHRoZSByZXZhbGlkYXRpb25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSB3ZSBnZXQgdGhlIHJpZ2h0IGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICAgIGF3YWl0IHJldmFsaWRhdGUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV2YWxpZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW3JldmFsaWRhdGUsIGxhdGVzdFZhbHVlLCBzZXQsIGFib3J0XSxcbiAgKTtcblxuICBjb25zdCBvbkxvYWRNb3JlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQucGFnZSArPSAxO1xuICAgIGNvbnN0IGFyZ3MgPSAobGF0ZXN0QXJncy5jdXJyZW50IHx8IFtdKSBhcyBQYXJhbWV0ZXJzPFQ+O1xuICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICB9LCBbcGFnaW5hdGlvbkFyZ3NSZWYsIGxhdGVzdEFyZ3MsIGNhbGxiYWNrXSk7XG5cbiAgLy8gcmV2YWxpZGF0ZSB3aGVuIHRoZSBhcmdzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIHJlc2V0IHRoZSBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudCA9IHsgcGFnZTogMCB9O1xuXG4gICAgaWYgKG9wdGlvbnM/LmV4ZWN1dGUgIT09IGZhbHNlKSB7XG4gICAgICBjYWxsYmFjayguLi4oKGFyZ3MgfHwgW10pIGFzIFBhcmFtZXRlcnM8VD4pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2FuY2VsIHRoZSBwcmV2aW91cyByZXF1ZXN0IGlmIHdlIGRvbid0IHdhbnQgdG8gZXhlY3V0ZSBhbnltb3JlXG4gICAgICBhYm9ydCgpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFt1c2VEZWVwTWVtbyhbYXJncywgb3B0aW9ucz8uZXhlY3V0ZSwgY2FsbGJhY2tdKSwgbGF0ZXN0QWJvcnRhYmxlLCBwYWdpbmF0aW9uQXJnc1JlZl0pO1xuXG4gIC8vIGFib3J0IHJlcXVlc3Qgd2hlbiB1bm1vdW50aW5nXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGFib3J0KCk7XG4gICAgfTtcbiAgfSwgW2Fib3J0XSk7XG5cbiAgLy8gd2Ugb25seSB3YW50IHRvIHNob3cgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGlmIHRoZSBwcm9taXNlIGlzIGV4ZWN1dGluZ1xuICBjb25zdCBpc0xvYWRpbmcgPSBvcHRpb25zPy5leGVjdXRlICE9PSBmYWxzZSA/IHN0YXRlLmlzTG9hZGluZyA6IGZhbHNlO1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgbG9hZGluZyBpcyBoYXMgc29tZSBmaXhlZCB2YWx1ZSBpbiB0aGUgZW51bSB3aGljaFxuICBjb25zdCBzdGF0ZVdpdGhMb2FkaW5nRml4ZWQ6IEFzeW5jU3RhdGU8QXdhaXRlZDxSZXR1cm5UeXBlPFQ+Pj4gPSB7IC4uLnN0YXRlLCBpc0xvYWRpbmcgfTtcblxuICBjb25zdCBwYWdpbmF0aW9uID0gdXNlUGFnaW5hdGlvblJlZi5jdXJyZW50XG4gICAgPyB7XG4gICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZVJlZi5jdXJyZW50LFxuICAgICAgICBoYXNNb3JlOiBoYXNNb3JlUmVmLmN1cnJlbnQsXG4gICAgICAgIG9uTG9hZE1vcmUsXG4gICAgICB9XG4gICAgOiB1bmRlZmluZWQ7XG5cbiAgcmV0dXJuIHsgLi4uc3RhdGVXaXRoTG9hZGluZ0ZpeGVkLCByZXZhbGlkYXRlLCBtdXRhdGUsIHBhZ2luYXRpb24gfTtcbn1cblxuLyoqIEJpbmQgdGhlIGZuIGlmIGl0J3MgYSBQcm9taXNlIG1ldGhvZCAqL1xuZnVuY3Rpb24gYmluZFByb21pc2VJZk5lZWRlZDxUPihmbjogVCk6IFQge1xuICBpZiAoZm4gPT09IChQcm9taXNlLmFsbCBhcyBhbnkpKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0aGlzIGlzIGZpbmVcbiAgICByZXR1cm4gZm4uYmluZChQcm9taXNlKTtcbiAgfVxuICBpZiAoZm4gPT09IChQcm9taXNlLnJhY2UgYXMgYW55KSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdGhpcyBpcyBmaW5lXG4gICAgcmV0dXJuIGZuLmJpbmQoUHJvbWlzZSk7XG4gIH1cbiAgaWYgKGZuID09PSAoUHJvbWlzZS5yZXNvbHZlIGFzIGFueSkpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMgZmluZVxuICAgIHJldHVybiBmbi5iaW5kKFByb21pc2UgYXMgYW55KTtcbiAgfVxuICBpZiAoZm4gPT09IChQcm9taXNlLnJlamVjdCBhcyBhbnkpKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0aGlzIGlzIGZpbmVcbiAgICByZXR1cm4gZm4uYmluZChQcm9taXNlKTtcbiAgfVxuICByZXR1cm4gZm47XG59XG4iLCAiaW1wb3J0IHsgdXNlUmVmLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBkZXF1YWwgfSBmcm9tIFwiZGVxdWFsL2xpdGVcIjtcblxuLyoqXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIGJlIG1lbW9pemVkICh1c3VhbGx5IGEgZGVwZW5kZW5jeSBsaXN0KVxuICogQHJldHVybnMgYSBtZW1vaXplZCB2ZXJzaW9uIG9mIHRoZSB2YWx1ZSBhcyBsb25nIGFzIGl0IHJlbWFpbnMgZGVlcGx5IGVxdWFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VEZWVwTWVtbzxUPih2YWx1ZTogVCkge1xuICBjb25zdCByZWYgPSB1c2VSZWY8VD4odmFsdWUpO1xuICBjb25zdCBzaWduYWxSZWYgPSB1c2VSZWY8bnVtYmVyPigwKTtcblxuICBpZiAoIWRlcXVhbCh2YWx1ZSwgcmVmLmN1cnJlbnQpKSB7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICBzaWduYWxSZWYuY3VycmVudCArPSAxO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiByZWYuY3VycmVudCwgW3NpZ25hbFJlZi5jdXJyZW50XSk7XG59XG4iLCAiaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGF0ZXN0IHN0YXRlLlxuICpcbiAqIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCB0byBnZXQgYWNjZXNzIHRvIHRoZSBsYXRlc3QgdmFsdWUgb2Ygc29tZSBwcm9wcyBvciBzdGF0ZSBpbnNpZGUgYW4gYXN5bmNocm9ub3VzIGNhbGxiYWNrLCBpbnN0ZWFkIG9mIHRoYXQgdmFsdWUgYXQgdGhlIHRpbWUgdGhlIGNhbGxiYWNrIHdhcyBjcmVhdGVkIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VMYXRlc3Q8VD4odmFsdWU6IFQpOiB7IHJlYWRvbmx5IGN1cnJlbnQ6IFQgfSB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZih2YWx1ZSk7XG4gIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIHJldHVybiByZWY7XG59XG4iLCAiaW1wb3J0ICogYXMgZnMgZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuaW1wb3J0IHsgQ2xpcGJvYXJkLCBlbnZpcm9ubWVudCwgb3BlbiwgVG9hc3QsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuLyoqXG4gKiBTaG93cyBhIGZhaWx1cmUgVG9hc3QgZm9yIGEgZ2l2ZW4gRXJyb3IuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IHNob3dIVUQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyBydW5BcHBsZVNjcmlwdCwgc2hvd0ZhaWx1cmVUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAqICAgdHJ5IHtcbiAqICAgICBjb25zdCByZXMgPSBhd2FpdCBydW5BcHBsZVNjcmlwdChcbiAqICAgICAgIGBcbiAqICAgICAgIG9uIHJ1biBhcmd2XG4gKiAgICAgICAgIHJldHVybiBcImhlbGxvLCBcIiAmIGl0ZW0gMSBvZiBhcmd2ICYgXCIuXCJcbiAqICAgICAgIGVuZCBydW5cbiAqICAgICAgIGAsXG4gKiAgICAgICBbXCJ3b3JsZFwiXVxuICogICAgICk7XG4gKiAgICAgYXdhaXQgc2hvd0hVRChyZXMpO1xuICogICB9IGNhdGNoIChlcnJvcikge1xuICogICAgIHNob3dGYWlsdXJlVG9hc3QoZXJyb3IsIHsgdGl0bGU6IFwiQ291bGQgbm90IHJ1biBBcHBsZVNjcmlwdFwiIH0pO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dGYWlsdXJlVG9hc3QoXG4gIGVycm9yOiB1bmtub3duLFxuICBvcHRpb25zPzogUGFydGlhbDxQaWNrPFRvYXN0Lk9wdGlvbnMsIFwidGl0bGVcIiB8IFwicHJpbWFyeUFjdGlvblwiIHwgXCJtZXNzYWdlXCI+Pixcbikge1xuICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICByZXR1cm4gc2hvd1RvYXN0KHtcbiAgICBzdHlsZTogVG9hc3QuU3R5bGUuRmFpbHVyZSxcbiAgICB0aXRsZTogb3B0aW9ucz8udGl0bGUgPz8gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiLFxuICAgIG1lc3NhZ2U6IG9wdGlvbnM/Lm1lc3NhZ2UgPz8gbWVzc2FnZSxcbiAgICBwcmltYXJ5QWN0aW9uOiBvcHRpb25zPy5wcmltYXJ5QWN0aW9uID8/IGhhbmRsZUVycm9yVG9hc3RBY3Rpb24oZXJyb3IpLFxuICAgIHNlY29uZGFyeUFjdGlvbjogb3B0aW9ucz8ucHJpbWFyeUFjdGlvbiA/IGhhbmRsZUVycm9yVG9hc3RBY3Rpb24oZXJyb3IpIDogdW5kZWZpbmVkLFxuICB9KTtcbn1cblxuY29uc3QgaGFuZGxlRXJyb3JUb2FzdEFjdGlvbiA9IChlcnJvcjogdW5rbm93bik6IFRvYXN0LkFjdGlvbk9wdGlvbnMgPT4ge1xuICBsZXQgcHJpdmF0ZUV4dGVuc2lvbiA9IHRydWU7XG4gIGxldCB0aXRsZSA9IFwiW0V4dGVuc2lvbiBOYW1lXS4uLlwiO1xuICBsZXQgZXh0ZW5zaW9uVVJMID0gXCJcIjtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYWNrYWdlSlNPTiA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihlbnZpcm9ubWVudC5hc3NldHNQYXRoLCBcIi4uXCIsIFwicGFja2FnZS5qc29uXCIpLCBcInV0ZjhcIikpO1xuICAgIHRpdGxlID0gYFske3BhY2thZ2VKU09OLnRpdGxlfV0uLi5gO1xuICAgIGV4dGVuc2lvblVSTCA9IGBodHRwczovL3JheWNhc3QuY29tLyR7cGFja2FnZUpTT04ub3duZXIgfHwgcGFja2FnZUpTT04uYXV0aG9yfS8ke3BhY2thZ2VKU09OLm5hbWV9YDtcbiAgICBpZiAoIXBhY2thZ2VKU09OLm93bmVyIHx8IHBhY2thZ2VKU09OLmFjY2VzcyA9PT0gXCJwdWJsaWNcIikge1xuICAgICAgcHJpdmF0ZUV4dGVuc2lvbiA9IGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gbm8tb3BcbiAgfVxuXG4gIC8vIGlmIGl0J3MgYSBwcml2YXRlIGV4dGVuc2lvbiwgd2UgY2FuJ3QgY29uc3RydWN0IHRoZSBVUkwgdG8gcmVwb3J0IHRoZSBlcnJvclxuICAvLyBzbyB3ZSBmYWxsYmFjayB0byBjb3B5aW5nIHRoZSBlcnJvciB0byB0aGUgY2xpcGJvYXJkXG4gIGNvbnN0IGZhbGxiYWNrID0gZW52aXJvbm1lbnQuaXNEZXZlbG9wbWVudCB8fCBwcml2YXRlRXh0ZW5zaW9uO1xuXG4gIGNvbnN0IHN0YWNrID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yPy5zdGFjayB8fCBlcnJvcj8ubWVzc2FnZSB8fCBcIlwiIDogU3RyaW5nKGVycm9yKTtcblxuICByZXR1cm4ge1xuICAgIHRpdGxlOiBmYWxsYmFjayA/IFwiQ29weSBMb2dzXCIgOiBcIlJlcG9ydCBFcnJvclwiLFxuICAgIG9uQWN0aW9uKHRvYXN0KSB7XG4gICAgICB0b2FzdC5oaWRlKCk7XG4gICAgICBpZiAoZmFsbGJhY2spIHtcbiAgICAgICAgQ2xpcGJvYXJkLmNvcHkoc3RhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BlbihcbiAgICAgICAgICBgaHR0cHM6Ly9naXRodWIuY29tL3JheWNhc3QvZXh0ZW5zaW9ucy9pc3N1ZXMvbmV3PyZsYWJlbHM9ZXh0ZW5zaW9uJTJDYnVnJnRlbXBsYXRlPWV4dGVuc2lvbl9idWdfcmVwb3J0LnltbCZ0aXRsZT0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICl9JmV4dGVuc2lvbi11cmw9JHtlbmNvZGVVUkkoZXh0ZW5zaW9uVVJMKX0mZGVzY3JpcHRpb249JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICBgIyMjIyBFcnJvcjpcblxcYFxcYFxcYFxuJHtzdGFja31cblxcYFxcYFxcYFxuYCxcbiAgICAgICAgICApfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn07XG4iLCAiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiwgdXNlU3luY0V4dGVybmFsU3RvcmUsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENhY2hlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyByZXBsYWNlciwgcmV2aXZlciB9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuY29uc3Qgcm9vdENhY2hlID0gLyogI19fUFVSRV9fICovIFN5bWJvbChcImNhY2hlIHdpdGhvdXQgbmFtZXNwYWNlXCIpO1xuY29uc3QgY2FjaGVNYXAgPSAvKiAjX19QVVJFX18gKi8gbmV3IE1hcDxzdHJpbmcgfCBzeW1ib2wsIENhY2hlPigpO1xuXG4vKipcbiAqIFJldHVybnMgYSBzdGF0ZWZ1bCB2YWx1ZSwgYW5kIGEgZnVuY3Rpb24gdG8gdXBkYXRlIGl0LiBUaGUgdmFsdWUgd2lsbCBiZSBrZXB0IGJldHdlZW4gY29tbWFuZCBydW5zLlxuICpcbiAqIEByZW1hcmsgVGhlIHZhbHVlIG5lZWRzIHRvIGJlIEpTT04gc2VyaWFsaXphYmxlLlxuICpcbiAqIEBwYXJhbSBrZXkgLSBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHN0YXRlLiBUaGlzIGNhbiBiZSB1c2VkIHRvIHNoYXJlIHRoZSBzdGF0ZSBhY3Jvc3MgY29tcG9uZW50cyBhbmQvb3IgY29tbWFuZHMuXG4gKiBAcGFyYW0gaW5pdGlhbFN0YXRlIC0gVGhlIGluaXRpYWwgdmFsdWUgb2YgdGhlIHN0YXRlIGlmIHRoZXJlIGFyZW4ndCBhbnkgaW4gdGhlIENhY2hlIHlldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlZFN0YXRlPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgaW5pdGlhbFN0YXRlOiBULFxuICBjb25maWc/OiB7IGNhY2hlTmFtZXNwYWNlPzogc3RyaW5nIH0sXG4pOiBbVCwgRGlzcGF0Y2g8U2V0U3RhdGVBY3Rpb248VD4+XTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VDYWNoZWRTdGF0ZTxUID0gdW5kZWZpbmVkPihrZXk6IHN0cmluZyk6IFtUIHwgdW5kZWZpbmVkLCBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxUIHwgdW5kZWZpbmVkPj5dO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlZFN0YXRlPFQ+KFxuICBrZXk6IHN0cmluZyxcbiAgaW5pdGlhbFN0YXRlPzogVCxcbiAgY29uZmlnPzogeyBjYWNoZU5hbWVzcGFjZT86IHN0cmluZyB9LFxuKTogW1QsIERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPFQ+Pl0ge1xuICBjb25zdCBjYWNoZUtleSA9IGNvbmZpZz8uY2FjaGVOYW1lc3BhY2UgfHwgcm9vdENhY2hlO1xuICBjb25zdCBjYWNoZSA9XG4gICAgY2FjaGVNYXAuZ2V0KGNhY2hlS2V5KSB8fCBjYWNoZU1hcC5zZXQoY2FjaGVLZXksIG5ldyBDYWNoZSh7IG5hbWVzcGFjZTogY29uZmlnPy5jYWNoZU5hbWVzcGFjZSB9KSkuZ2V0KGNhY2hlS2V5KTtcblxuICBpZiAoIWNhY2hlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjYWNoZVwiKTtcbiAgfVxuXG4gIGNvbnN0IGtleVJlZiA9IHVzZUxhdGVzdChrZXkpO1xuICBjb25zdCBpbml0aWFsVmFsdWVSZWYgPSB1c2VMYXRlc3QoaW5pdGlhbFN0YXRlKTtcblxuICBjb25zdCBjYWNoZWRTdGF0ZSA9IHVzZVN5bmNFeHRlcm5hbFN0b3JlKGNhY2hlLnN1YnNjcmliZSwgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleVJlZi5jdXJyZW50KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBnZXQgQ2FjaGUgZGF0YTpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHN0YXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjYWNoZWRTdGF0ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKGNhY2hlZFN0YXRlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjYWNoZWRTdGF0ZSwgcmV2aXZlcik7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gdGhlIGRhdGEgZ290IGNvcnJ1cHRlZCBzb21laG93XG4gICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBjYWNoZWQgZGF0YSBpcyBjb3JydXB0ZWRcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZVJlZi5jdXJyZW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaW5pdGlhbFZhbHVlUmVmLmN1cnJlbnQ7XG4gICAgfVxuICB9LCBbY2FjaGVkU3RhdGUsIGluaXRpYWxWYWx1ZVJlZl0pO1xuXG4gIGNvbnN0IHN0YXRlUmVmID0gdXNlTGF0ZXN0KHN0YXRlKTtcblxuICBjb25zdCBzZXRTdGF0ZUFuZENhY2hlID0gdXNlQ2FsbGJhY2soXG4gICAgKHVwZGF0ZXI6IFNldFN0YXRlQWN0aW9uPFQ+KSA9PiB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTIHN0cnVnZ2xlcyB0byBpbmZlciB0aGUgdHlwZXMgYXMgVCBjb3VsZCBwb3RlbnRpYWxseSBiZSBhIGZ1bmN0aW9uXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHR5cGVvZiB1cGRhdGVyID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGVyKHN0YXRlUmVmLmN1cnJlbnQpIDogdXBkYXRlcjtcbiAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY2FjaGUuc2V0KGtleVJlZi5jdXJyZW50LCBcInVuZGVmaW5lZFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkVmFsdWUgPSBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSwgcmVwbGFjZXIpO1xuICAgICAgICBjYWNoZS5zZXQoa2V5UmVmLmN1cnJlbnQsIHN0cmluZ2lmaWVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgIH0sXG4gICAgW2NhY2hlLCBrZXlSZWYsIHN0YXRlUmVmXSxcbiAgKTtcblxuICByZXR1cm4gW3N0YXRlLCBzZXRTdGF0ZUFuZENhY2hlXTtcbn1cbiIsICJpbXBvcnQgY3J5cHRvIGZyb20gXCJub2RlOmNyeXB0b1wiO1xuaW1wb3J0IHsgdHlwZUhhc2hlciB9IGZyb20gXCIuL3ZlbmRvcnMvdHlwZS1oYXNoZXJcIjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlcih0aGlzOiBhbnksIGtleTogc3RyaW5nLCBfdmFsdWU6IHVua25vd24pIHtcbiAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gYF9fcmF5Y2FzdF9jYWNoZWRfZGF0ZV9fJHt2YWx1ZS50b0lTT1N0cmluZygpfWA7XG4gIH1cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHtcbiAgICByZXR1cm4gYF9fcmF5Y2FzdF9jYWNoZWRfYnVmZmVyX18ke3ZhbHVlLnRvU3RyaW5nKFwiYmFzZTY0XCIpfWA7XG4gIH1cbiAgcmV0dXJuIF92YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldml2ZXIoX2tleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLnN0YXJ0c1dpdGgoXCJfX3JheWNhc3RfY2FjaGVkX2RhdGVfX1wiKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZS5yZXBsYWNlKFwiX19yYXljYXN0X2NhY2hlZF9kYXRlX19cIiwgXCJcIikpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUuc3RhcnRzV2l0aChcIl9fcmF5Y2FzdF9jYWNoZWRfYnVmZmVyX19cIikpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20odmFsdWUucmVwbGFjZShcIl9fcmF5Y2FzdF9jYWNoZWRfYnVmZmVyX19cIiwgXCJcIiksIFwiYmFzZTY0XCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc2gob2JqZWN0OiBhbnkpIHtcbiAgY29uc3QgaGFzaGluZ1N0cmVhbSA9IGNyeXB0by5jcmVhdGVIYXNoKFwic2hhMVwiKTtcbiAgY29uc3QgaGFzaGVyID0gdHlwZUhhc2hlcihoYXNoaW5nU3RyZWFtKTtcbiAgaGFzaGVyLmRpc3BhdGNoKG9iamVjdCk7XG5cbiAgcmV0dXJuIGhhc2hpbmdTdHJlYW0uZGlnZXN0KFwiaGV4XCIpO1xufVxuIiwgIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCBjcnlwdG8gZnJvbSBcIm5vZGU6Y3J5cHRvXCI7XG5cbi8qKiBDaGVjayBpZiB0aGUgZ2l2ZW4gZnVuY3Rpb24gaXMgYSBuYXRpdmUgZnVuY3Rpb24gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlRnVuY3Rpb24oZjogYW55KSB7XG4gIGlmICh0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGV4cCA9IC9eZnVuY3Rpb25cXHMrXFx3KlxccypcXChcXHMqXFwpXFxzKntcXHMrXFxbbmF0aXZlIGNvZGVcXF1cXHMrfSQvaTtcbiAgcmV0dXJuIGV4cC5leGVjKEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGYpKSAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaGFzaFJlcGxhY2VyKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0eXBlSGFzaGVyKFxuICB3cml0ZVRvOlxuICAgIHwgY3J5cHRvLkhhc2hcbiAgICB8IHtcbiAgICAgICAgYnVmOiBzdHJpbmc7XG4gICAgICAgIHdyaXRlOiAoYjogYW55KSA9PiB2b2lkO1xuICAgICAgICBlbmQ6IChiOiBhbnkpID0+IHZvaWQ7XG4gICAgICAgIHJlYWQ6ICgpID0+IHN0cmluZztcbiAgICAgIH0sXG4gIGNvbnRleHQ6IGFueVtdID0gW10sXG4pIHtcbiAgZnVuY3Rpb24gd3JpdGUoc3RyOiBzdHJpbmcpIHtcbiAgICBpZiAoXCJ1cGRhdGVcIiBpbiB3cml0ZVRvKSB7XG4gICAgICByZXR1cm4gd3JpdGVUby51cGRhdGUoc3RyLCBcInV0ZjhcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB3cml0ZVRvLndyaXRlKHN0cik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkaXNwYXRjaDogZnVuY3Rpb24gKHZhbHVlOiBhbnkpIHtcbiAgICAgIHZhbHVlID0gaGFzaFJlcGxhY2VyKHZhbHVlKTtcblxuICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzW1wiX251bGxcIl0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpc1tcIl9cIiArIHR5cGVdKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIF9vYmplY3Q6IGZ1bmN0aW9uIChvYmplY3Q6IGFueSkge1xuICAgICAgY29uc3QgcGF0dGVybiA9IC9cXFtvYmplY3QgKC4qKVxcXS9pO1xuICAgICAgY29uc3Qgb2JqU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCk7XG4gICAgICBsZXQgb2JqVHlwZSA9IHBhdHRlcm4uZXhlYyhvYmpTdHJpbmcpPy5bMV0gPz8gXCJ1bmtub3duOltcIiArIG9ialN0cmluZyArIFwiXVwiO1xuICAgICAgb2JqVHlwZSA9IG9ialR5cGUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgbGV0IG9iamVjdE51bWJlciA9IG51bGwgYXMgYW55O1xuXG4gICAgICBpZiAoKG9iamVjdE51bWJlciA9IGNvbnRleHQuaW5kZXhPZihvYmplY3QpKSA+PSAwKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goXCJbQ0lSQ1VMQVI6XCIgKyBvYmplY3ROdW1iZXIgKyBcIl1cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRleHQucHVzaChvYmplY3QpO1xuICAgICAgfVxuXG4gICAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHtcbiAgICAgICAgd3JpdGUoXCJidWZmZXI6XCIpO1xuICAgICAgICByZXR1cm4gd3JpdGUob2JqZWN0LnRvU3RyaW5nKFwidXRmOFwiKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvYmpUeXBlICE9PSBcIm9iamVjdFwiICYmIG9ialR5cGUgIT09IFwiZnVuY3Rpb25cIiAmJiBvYmpUeXBlICE9PSBcImFzeW5jZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICh0aGlzW1wiX1wiICsgb2JqVHlwZV0pIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgdGhpc1tcIl9cIiArIG9ialR5cGVdKG9iamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG9iamVjdCB0eXBlIFwiJyArIG9ialR5cGUgKyAnXCInKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICAgICAgICBrZXlzID0ga2V5cy5zb3J0KCk7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBpbmNvcnBvcmF0ZSBzcGVjaWFsIHByb3BlcnRpZXMsIHNvXG4gICAgICAgIC8vIFR5cGVzIHdpdGggZGlmZmVyZW50IHByb3RvdHlwZXMgd2lsbCBwcm9kdWNlXG4gICAgICAgIC8vIGEgZGlmZmVyZW50IGhhc2ggYW5kIG9iamVjdHMgZGVyaXZlZCBmcm9tXG4gICAgICAgIC8vIGRpZmZlcmVudCBmdW5jdGlvbnMgKGBuZXcgRm9vYCwgYG5ldyBCYXJgKSB3aWxsXG4gICAgICAgIC8vIHByb2R1Y2UgZGlmZmVyZW50IGhhc2hlcy5cbiAgICAgICAgLy8gV2UgbmV2ZXIgZG8gdGhpcyBmb3IgbmF0aXZlIGZ1bmN0aW9ucyBzaW5jZSBzb21lXG4gICAgICAgIC8vIHNlZW0gdG8gYnJlYWsgYmVjYXVzZSBvZiB0aGF0LlxuICAgICAgICBpZiAoIWlzTmF0aXZlRnVuY3Rpb24ob2JqZWN0KSkge1xuICAgICAgICAgIGtleXMuc3BsaWNlKDAsIDAsIFwicHJvdG90eXBlXCIsIFwiX19wcm90b19fXCIsIFwiY29uc3RydWN0b3JcIik7XG4gICAgICAgIH1cblxuICAgICAgICB3cml0ZShcIm9iamVjdDpcIiArIGtleXMubGVuZ3RoICsgXCI6XCIpO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgc2VsZi5kaXNwYXRjaChrZXkpO1xuICAgICAgICAgIHdyaXRlKFwiOlwiKTtcbiAgICAgICAgICBzZWxmLmRpc3BhdGNoKG9iamVjdFtrZXldKTtcbiAgICAgICAgICB3cml0ZShcIixcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgX2FycmF5OiBmdW5jdGlvbiAoYXJyOiBhbnlbXSwgdW5vcmRlcmVkOiBib29sZWFuKSB7XG4gICAgICB1bm9yZGVyZWQgPSB0eXBlb2YgdW5vcmRlcmVkICE9PSBcInVuZGVmaW5lZFwiID8gdW5vcmRlcmVkIDogZmFsc2U7IC8vIGRlZmF1bHQgdG8gb3B0aW9ucy51bm9yZGVyZWRBcnJheXNcblxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICB3cml0ZShcImFycmF5OlwiICsgYXJyLmxlbmd0aCArIFwiOlwiKTtcbiAgICAgIGlmICghdW5vcmRlcmVkIHx8IGFyci5sZW5ndGggPD0gMSkge1xuICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoZW50cnk6IGFueSkge1xuICAgICAgICAgIHNlbGYuZGlzcGF0Y2goZW50cnkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGUgdW5vcmRlcmVkIGNhc2UgaXMgYSBsaXR0bGUgbW9yZSBjb21wbGljYXRlZDpcbiAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNhbm9uaWNhbCBvcmRlcmluZyBvbiBvYmplY3RzLFxuICAgICAgLy8gaS5lLiB7YToxfSA8IHthOjJ9IGFuZCB7YToxfSA+IHthOjJ9IGFyZSBib3RoIGZhbHNlLFxuICAgICAgLy8gd2UgZmlyc3Qgc2VyaWFsaXplIGVhY2ggZW50cnkgdXNpbmcgYSBQYXNzVGhyb3VnaCBzdHJlYW1cbiAgICAgIC8vIGJlZm9yZSBzb3J0aW5nLlxuICAgICAgLy8gYWxzbzogd2UgY2Fu4oCZdCB1c2UgdGhlIHNhbWUgY29udGV4dCBhcnJheSBmb3IgYWxsIGVudHJpZXNcbiAgICAgIC8vIHNpbmNlIHRoZSBvcmRlciBvZiBoYXNoaW5nIHNob3VsZCAqbm90KiBtYXR0ZXIuIGluc3RlYWQsXG4gICAgICAvLyB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBhZGRpdGlvbnMgdG8gYSBjb3B5IG9mIHRoZSBjb250ZXh0IGFycmF5XG4gICAgICAvLyBhbmQgYWRkIGFsbCBvZiB0aGVtIHRvIHRoZSBnbG9iYWwgY29udGV4dCBhcnJheSB3aGVuIHdl4oCZcmUgZG9uZVxuICAgICAgbGV0IGNvbnRleHRBZGRpdGlvbnM6IGFueVtdID0gW107XG4gICAgICBjb25zdCBlbnRyaWVzID0gYXJyLm1hcChmdW5jdGlvbiAoZW50cnk6IGFueSkge1xuICAgICAgICBjb25zdCBzdHJtID0gUGFzc1Rocm91Z2goKTtcbiAgICAgICAgY29uc3QgbG9jYWxDb250ZXh0ID0gY29udGV4dC5zbGljZSgpOyAvLyBtYWtlIGNvcHlcbiAgICAgICAgY29uc3QgaGFzaGVyID0gdHlwZUhhc2hlcihzdHJtLCBsb2NhbENvbnRleHQpO1xuICAgICAgICBoYXNoZXIuZGlzcGF0Y2goZW50cnkpO1xuICAgICAgICAvLyB0YWtlIG9ubHkgd2hhdCB3YXMgYWRkZWQgdG8gbG9jYWxDb250ZXh0IGFuZCBhcHBlbmQgaXQgdG8gY29udGV4dEFkZGl0aW9uc1xuICAgICAgICBjb250ZXh0QWRkaXRpb25zID0gY29udGV4dEFkZGl0aW9ucy5jb25jYXQobG9jYWxDb250ZXh0LnNsaWNlKGNvbnRleHQubGVuZ3RoKSk7XG4gICAgICAgIHJldHVybiBzdHJtLnJlYWQoKS50b1N0cmluZygpO1xuICAgICAgfSk7XG4gICAgICBjb250ZXh0ID0gY29udGV4dC5jb25jYXQoY29udGV4dEFkZGl0aW9ucyk7XG4gICAgICBlbnRyaWVzLnNvcnQoKTtcbiAgICAgIHRoaXMuX2FycmF5KGVudHJpZXMsIGZhbHNlKTtcbiAgICB9LFxuICAgIF9kYXRlOiBmdW5jdGlvbiAoZGF0ZTogRGF0ZSkge1xuICAgICAgd3JpdGUoXCJkYXRlOlwiICsgZGF0ZS50b0pTT04oKSk7XG4gICAgfSxcbiAgICBfc3ltYm9sOiBmdW5jdGlvbiAoc3ltOiBzeW1ib2wpIHtcbiAgICAgIHdyaXRlKFwic3ltYm9sOlwiICsgc3ltLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX2Vycm9yOiBmdW5jdGlvbiAoZXJyOiBFcnJvcikge1xuICAgICAgd3JpdGUoXCJlcnJvcjpcIiArIGVyci50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIF9ib29sZWFuOiBmdW5jdGlvbiAoYm9vbDogYm9vbGVhbikge1xuICAgICAgd3JpdGUoXCJib29sOlwiICsgYm9vbC50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIF9zdHJpbmc6IGZ1bmN0aW9uIChzdHJpbmc6IHN0cmluZykge1xuICAgICAgd3JpdGUoXCJzdHJpbmc6XCIgKyBzdHJpbmcubGVuZ3RoICsgXCI6XCIpO1xuICAgICAgd3JpdGUoc3RyaW5nLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX2Z1bmN0aW9uOiBmdW5jdGlvbiAoZm46IGFueSkge1xuICAgICAgd3JpdGUoXCJmbjpcIik7XG4gICAgICBpZiAoaXNOYXRpdmVGdW5jdGlvbihmbikpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaChcIltuYXRpdmVdXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaChmbi50b1N0cmluZygpKTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHdlIGNhbiBzdGlsbCBkaXN0aW5ndWlzaCBuYXRpdmUgZnVuY3Rpb25zXG4gICAgICAvLyBieSB0aGVpciBuYW1lLCBvdGhlcndpc2UgU3RyaW5nIGFuZCBGdW5jdGlvbiB3aWxsXG4gICAgICAvLyBoYXZlIHRoZSBzYW1lIGhhc2hcbiAgICAgIHRoaXMuZGlzcGF0Y2goXCJmdW5jdGlvbi1uYW1lOlwiICsgU3RyaW5nKGZuLm5hbWUpKTtcblxuICAgICAgdGhpcy5fb2JqZWN0KGZuKTtcbiAgICB9LFxuICAgIF9udW1iZXI6IGZ1bmN0aW9uIChudW1iZXI6IG51bWJlcikge1xuICAgICAgd3JpdGUoXCJudW1iZXI6XCIgKyBudW1iZXIudG9TdHJpbmcoKSk7XG4gICAgfSxcbiAgICBfeG1sOiBmdW5jdGlvbiAoeG1sOiBhbnkpIHtcbiAgICAgIHdyaXRlKFwieG1sOlwiICsgeG1sLnRvU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgX251bGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiTnVsbFwiKTtcbiAgICB9LFxuICAgIF91bmRlZmluZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiVW5kZWZpbmVkXCIpO1xuICAgIH0sXG4gICAgX3JlZ2V4cDogZnVuY3Rpb24gKHJlZ2V4OiBSZWdFeHApIHtcbiAgICAgIHdyaXRlKFwicmVnZXg6XCIgKyByZWdleC50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIF91aW50OGFycmF5OiBmdW5jdGlvbiAoYXJyOiBVaW50OEFycmF5KSB7XG4gICAgICB3cml0ZShcInVpbnQ4YXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF91aW50OGNsYW1wZWRhcnJheTogZnVuY3Rpb24gKGFycjogVWludDhDbGFtcGVkQXJyYXkpIHtcbiAgICAgIHdyaXRlKFwidWludDhjbGFtcGVkYXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9pbnQ4YXJyYXk6IGZ1bmN0aW9uIChhcnI6IEludDhBcnJheSkge1xuICAgICAgd3JpdGUoXCJpbnQ4YXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF91aW50MTZhcnJheTogZnVuY3Rpb24gKGFycjogVWludDE2QXJyYXkpIHtcbiAgICAgIHdyaXRlKFwidWludDE2YXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9pbnQxNmFycmF5OiBmdW5jdGlvbiAoYXJyOiBJbnQxNkFycmF5KSB7XG4gICAgICB3cml0ZShcImludDE2YXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF91aW50MzJhcnJheTogZnVuY3Rpb24gKGFycjogVWludDMyQXJyYXkpIHtcbiAgICAgIHdyaXRlKFwidWludDMyYXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9pbnQzMmFycmF5OiBmdW5jdGlvbiAoYXJyOiBJbnQzMkFycmF5KSB7XG4gICAgICB3cml0ZShcImludDMyYXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9mbG9hdDMyYXJyYXk6IGZ1bmN0aW9uIChhcnI6IEZsb2F0MzJBcnJheSkge1xuICAgICAgd3JpdGUoXCJmbG9hdDMyYXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9mbG9hdDY0YXJyYXk6IGZ1bmN0aW9uIChhcnI6IEZsb2F0NjRBcnJheSkge1xuICAgICAgd3JpdGUoXCJmbG9hdDY0YXJyYXk6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpKTtcbiAgICB9LFxuICAgIF9hcnJheWJ1ZmZlcjogZnVuY3Rpb24gKGFycjogQXJyYXlCdWZmZXIpIHtcbiAgICAgIHdyaXRlKFwiYXJyYXlidWZmZXI6XCIpO1xuICAgICAgdGhpcy5kaXNwYXRjaChuZXcgVWludDhBcnJheShhcnIpKTtcbiAgICB9LFxuICAgIF91cmw6IGZ1bmN0aW9uICh1cmw6IFVSTCkge1xuICAgICAgd3JpdGUoXCJ1cmw6XCIgKyB1cmwudG9TdHJpbmcoKSk7XG4gICAgfSxcbiAgICBfbWFwOiBmdW5jdGlvbiAobWFwOiBNYXA8YW55LCBhbnk+KSB7XG4gICAgICB3cml0ZShcIm1hcDpcIik7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5mcm9tKG1hcCk7XG4gICAgICB0aGlzLl9hcnJheShhcnIsIHRydWUpO1xuICAgIH0sXG4gICAgX3NldDogZnVuY3Rpb24gKHNldDogU2V0PGFueT4pIHtcbiAgICAgIHdyaXRlKFwic2V0OlwiKTtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmZyb20oc2V0KTtcbiAgICAgIHRoaXMuX2FycmF5KGFyciwgdHJ1ZSk7XG4gICAgfSxcbiAgICBfZmlsZTogZnVuY3Rpb24gKGZpbGU6IGFueSkge1xuICAgICAgd3JpdGUoXCJmaWxlOlwiKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2goW2ZpbGUubmFtZSwgZmlsZS5zaXplLCBmaWxlLnR5cGUsIGZpbGUubGFzdE1vZGlmaWVkXSk7XG4gICAgfSxcbiAgICBfYmxvYjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgIFwiSGFzaGluZyBCbG9iIG9iamVjdHMgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRcXG5cIiArXG4gICAgICAgICAgXCIoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9wdWxlb3Mvb2JqZWN0LWhhc2gvaXNzdWVzLzI2KVxcblwiICtcbiAgICAgICAgICAnVXNlIFwib3B0aW9ucy5yZXBsYWNlclwiIG9yIFwib3B0aW9ucy5pZ25vcmVVbmtub3duXCJcXG4nLFxuICAgICAgKTtcbiAgICB9LFxuICAgIF9kb213aW5kb3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiZG9td2luZG93XCIpO1xuICAgIH0sXG4gICAgX2JpZ2ludDogZnVuY3Rpb24gKG51bWJlcjogYmlnaW50KSB7XG4gICAgICB3cml0ZShcImJpZ2ludDpcIiArIG51bWJlci50b1N0cmluZygpKTtcbiAgICB9LFxuICAgIC8qIE5vZGUuanMgc3RhbmRhcmQgbmF0aXZlIG9iamVjdHMgKi9cbiAgICBfcHJvY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJwcm9jZXNzXCIpO1xuICAgIH0sXG4gICAgX3RpbWVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInRpbWVyXCIpO1xuICAgIH0sXG4gICAgX3BpcGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwicGlwZVwiKTtcbiAgICB9LFxuICAgIF90Y3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwidGNwXCIpO1xuICAgIH0sXG4gICAgX3VkcDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJ1ZHBcIik7XG4gICAgfSxcbiAgICBfdHR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInR0eVwiKTtcbiAgICB9LFxuICAgIF9zdGF0d2F0Y2hlcjogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJzdGF0d2F0Y2hlclwiKTtcbiAgICB9LFxuICAgIF9zZWN1cmVjb250ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInNlY3VyZWNvbnRleHRcIik7XG4gICAgfSxcbiAgICBfY29ubmVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJjb25uZWN0aW9uXCIpO1xuICAgIH0sXG4gICAgX3psaWI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiemxpYlwiKTtcbiAgICB9LFxuICAgIF9jb250ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcImNvbnRleHRcIik7XG4gICAgfSxcbiAgICBfbm9kZXNjcmlwdDogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJub2Rlc2NyaXB0XCIpO1xuICAgIH0sXG4gICAgX2h0dHBwYXJzZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiaHR0cHBhcnNlclwiKTtcbiAgICB9LFxuICAgIF9kYXRhdmlldzogZnVuY3Rpb24gKCkge1xuICAgICAgd3JpdGUoXCJkYXRhdmlld1wiKTtcbiAgICB9LFxuICAgIF9zaWduYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwic2lnbmFsXCIpO1xuICAgIH0sXG4gICAgX2ZzZXZlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdyaXRlKFwiZnNldmVudFwiKTtcbiAgICB9LFxuICAgIF90bHN3cmFwOiBmdW5jdGlvbiAoKSB7XG4gICAgICB3cml0ZShcInRsc3dyYXBcIik7XG4gICAgfSxcbiAgfTtcbn1cblxuLy8gTWluaS1pbXBsZW1lbnRhdGlvbiBvZiBzdHJlYW0uUGFzc1Rocm91Z2hcbi8vIFdlIGFyZSBmYXIgZnJvbSBoYXZpbmcgbmVlZCBmb3IgdGhlIGZ1bGwgaW1wbGVtZW50YXRpb24sIGFuZCB3ZSBjYW5cbi8vIG1ha2UgYXNzdW1wdGlvbnMgbGlrZSBcIm1hbnkgd3JpdGVzLCB0aGVuIG9ubHkgb25lIGZpbmFsIHJlYWRcIlxuLy8gYW5kIHdlIGNhbiBpZ25vcmUgZW5jb2Rpbmcgc3BlY2lmaWNzXG5mdW5jdGlvbiBQYXNzVGhyb3VnaCgpIHtcbiAgcmV0dXJuIHtcbiAgICBidWY6IFwiXCIsXG5cbiAgICB3cml0ZTogZnVuY3Rpb24gKGI6IHN0cmluZykge1xuICAgICAgdGhpcy5idWYgKz0gYjtcbiAgICB9LFxuXG4gICAgZW5kOiBmdW5jdGlvbiAoYjogc3RyaW5nKSB7XG4gICAgICB0aGlzLmJ1ZiArPSBiO1xuICAgIH0sXG5cbiAgICByZWFkOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWY7XG4gICAgfSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSxcbiAgVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGUsXG4gIE11dGF0ZVByb21pc2UsXG4gIEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSxcbiAgVW53cmFwUmV0dXJuLFxuICBQYWdpbmF0aW9uT3B0aW9ucyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHVzZUNhY2hlZFN0YXRlIH0gZnJvbSBcIi4vdXNlQ2FjaGVkU3RhdGVcIjtcbmltcG9ydCB7IHVzZVByb21pc2UsIFByb21pc2VPcHRpb25zIH0gZnJvbSBcIi4vdXNlUHJvbWlzZVwiO1xuaW1wb3J0IHsgdXNlTGF0ZXN0IH0gZnJvbSBcIi4vdXNlTGF0ZXN0XCI7XG5pbXBvcnQgeyBoYXNoIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG4vLyBTeW1ib2wgdG8gZGlmZmVyZW50aWF0ZSBhbiBlbXB0eSBjYWNoZSBmcm9tIGB1bmRlZmluZWRgXG5jb25zdCBlbXB0eUNhY2hlID0gLyogI19fUFVSRV9fICovIFN5bWJvbCgpO1xuXG5leHBvcnQgdHlwZSBDYWNoZWRQcm9taXNlT3B0aW9uczxcbiAgVCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSB8IEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSxcbiAgVSxcbj4gPSBQcm9taXNlT3B0aW9uczxUPiAmIHtcbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsIGRhdGEgaWYgdGhlcmUgYXJlbid0IGFueSBpbiB0aGUgQ2FjaGUgeWV0LlxuICAgKi9cbiAgaW5pdGlhbERhdGE/OiBVO1xuICAvKipcbiAgICogVGVsbHMgdGhlIGhvb2sgdG8ga2VlcCB0aGUgcHJldmlvdXMgcmVzdWx0cyBpbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgaW5pdGlhbCB2YWx1ZVxuICAgKiBpZiB0aGVyZSBhcmVuJ3QgYW55IGluIHRoZSBjYWNoZSBmb3IgdGhlIG5ldyBhcmd1bWVudHMuXG4gICAqIFRoaXMgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCB3aGVuIHVzZWQgZm9yIGRhdGEgZm9yIGEgTGlzdCB0byBhdm9pZCBmbGlja2VyaW5nLlxuICAgKi9cbiAga2VlcFByZXZpb3VzRGF0YT86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIFdyYXBzIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UgaW4gYW5vdGhlciBmdW5jdGlvbiwgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZ1bmN0aW9uLiBUaGUgbGFzdCB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQHJlbWFyayBUaGlzIG92ZXJsb2FkIHNob3VsZCBiZSB1c2VkIHdoZW4gd29ya2luZyB3aXRoIHBhZ2luYXRlZCBkYXRhIHNvdXJjZXMuXG4gKiBAcmVtYXJrIFdoZW4gcGFnaW5hdGluZywgb25seSB0aGUgZmlyc3QgcGFnZSB3aWxsIGJlIGNhY2hlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBpbXBvcnQgeyBzZXRUaW1lb3V0IH0gZnJvbSBcIm5vZGU6dGltZXJzL3Byb21pc2VzXCI7XG4gKiBpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuICogaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZUNhY2hlZFByb21pc2UgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAqXG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhLCBwYWdpbmF0aW9uIH0gPSB1c2VDYWNoZWRQcm9taXNlKFxuICogICAgIChzZWFyY2hUZXh0OiBzdHJpbmcpID0+IGFzeW5jIChvcHRpb25zOiB7IHBhZ2U6IG51bWJlciB9KSA9PiB7XG4gKiAgICAgICBhd2FpdCBzZXRUaW1lb3V0KDIwMCk7XG4gKiAgICAgICBjb25zdCBuZXdEYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjUgfSwgKF92LCBpbmRleCkgPT4gKHtcbiAqICAgICAgICAgaW5kZXgsXG4gKiAgICAgICAgIHBhZ2U6IG9wdGlvbnMucGFnZSxcbiAqICAgICAgICAgdGV4dDogc2VhcmNoVGV4dCxcbiAqICAgICAgIH0pKTtcbiAqICAgICAgIHJldHVybiB7IGRhdGE6IG5ld0RhdGEsIGhhc01vcmU6IG9wdGlvbnMucGFnZSA8IDEwIH07XG4gKiAgICAgfSxcbiAqICAgICBbc2VhcmNoVGV4dF0sXG4gKiAgICk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfSBvblNlYXJjaFRleHRDaGFuZ2U9e3NldFNlYXJjaFRleHR9IHBhZ2luYXRpb249e3BhZ2luYXRpb259PlxuICogICAgICAge2RhdGE/Lm1hcCgoaXRlbSkgPT4gKFxuICogICAgICAgICA8TGlzdC5JdGVtXG4gKiAgICAgICAgICAga2V5PXtgJHtpdGVtLnBhZ2V9ICR7aXRlbS5pbmRleH0gJHtpdGVtLnRleHR9YH1cbiAqICAgICAgICAgICB0aXRsZT17YFBhZ2UgJHtpdGVtLnBhZ2V9IEl0ZW0gJHtpdGVtLmluZGV4fWB9XG4gKiAgICAgICAgICAgc3VidGl0bGU9e2l0ZW0udGV4dH1cbiAqICAgICAgICAgLz5cbiAqICAgICAgICkpfVxuICogICAgIDwvTGlzdD5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlPFtdPj4oXG4gIGZuOiBULFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+LCB1bmRlZmluZWQ+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlZFByb21pc2U8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSwgVSBleHRlbmRzIGFueVtdID0gYW55W10+KFxuICBmbjogVCxcbiAgYXJnczogUGFyYW1ldGVyczxUPixcbiAgb3B0aW9ucz86IENhY2hlZFByb21pc2VPcHRpb25zPFQsIFU+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+LCBVPjtcblxuLyoqXG4gKiBXcmFwcyBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgQXN5bmNTdGF0ZX0gY29ycmVzcG9uZGluZyB0byB0aGUgZXhlY3V0aW9uIG9mIHRoZSBmdW5jdGlvbi4gVGhlIGxhc3QgdmFsdWUgd2lsbCBiZSBrZXB0IGJldHdlZW4gY29tbWFuZCBydW5zLlxuICpcbiAqIEByZW1hcmsgVGhlIHZhbHVlIG5lZWRzIHRvIGJlIEpTT04gc2VyaWFsaXphYmxlLlxuICogQHJlbWFyayBUaGUgZnVuY3Rpb24gaXMgYXNzdW1lZCB0byBiZSBjb25zdGFudCAoZWcuIGNoYW5naW5nIGl0IHdvbid0IHRyaWdnZXIgYSByZXZhbGlkYXRpb24pLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGltcG9ydCB7IHVzZUNhY2hlZFByb21pc2UgfSBmcm9tICdAcmF5Y2FzdC91dGlscyc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29tbWFuZCgpIHtcbiAqICAgY29uc3QgYWJvcnRhYmxlID0gdXNlUmVmPEFib3J0Q29udHJvbGxlcj4oKTtcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEsIHJldmFsaWRhdGUgfSA9IHVzZUNhY2hlZFByb21pc2UoYXN5bmMgKHVybDogc3RyaW5nKSA9PiB7XG4gKiAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgc2lnbmFsOiBhYm9ydGFibGUuY3VycmVudD8uc2lnbmFsIH0pO1xuICogICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAqICAgICByZXR1cm4gcmVzdWx0XG4gKiAgIH0sXG4gKiAgIFsnaHR0cHM6Ly9hcGkuZXhhbXBsZSddLFxuICogICB7XG4gKiAgICAgYWJvcnRhYmxlXG4gKiAgIH0pO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8RGV0YWlsXG4gKiAgICAgICBpc0xvYWRpbmc9e2lzTG9hZGluZ31cbiAqICAgICAgIG1hcmtkb3duPXtkYXRhfVxuICogICAgICAgYWN0aW9ucz17XG4gKiAgICAgICAgIDxBY3Rpb25QYW5lbD5cbiAqICAgICAgICAgICA8QWN0aW9uIHRpdGxlPVwiUmVsb2FkXCIgb25BY3Rpb249eygpID0+IHJldmFsaWRhdGUoKX0gLz5cbiAqICAgICAgICAgPC9BY3Rpb25QYW5lbD5cbiAqICAgICAgIH1cbiAqICAgICAvPlxuICogICApO1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkUHJvbWlzZTxUIGV4dGVuZHMgRnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlPFtdPj4oXG4gIGZuOiBULFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VW53cmFwUmV0dXJuPFQ+LCB1bmRlZmluZWQ+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhY2hlZFByb21pc2U8VCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSwgVSA9IHVuZGVmaW5lZD4oXG4gIGZuOiBULFxuICBhcmdzOiBQYXJhbWV0ZXJzPFQ+LFxuICBvcHRpb25zPzogQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxVbndyYXBSZXR1cm48VD4sIFU+O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FjaGVkUHJvbWlzZTxcbiAgVCBleHRlbmRzIEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSB8IEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgVSBleHRlbmRzIGFueVtdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuPihmbjogVCwgYXJncz86IFBhcmFtZXRlcnM8VD4sIG9wdGlvbnM/OiBDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPikge1xuICAvKipcbiAgICogVGhlIGhvb2sgZ2VuZXJhdGVzIGEgY2FjaGUga2V5IGZyb20gdGhlIHByb21pc2UgaXQgcmVjZWl2ZXMgJiBpdHMgYXJndW1lbnRzLlxuICAgKiBTb21ldGltZXMgdGhhdCdzIG5vdCBlbm91Z2ggdG8gZ3VhcmFudGVlIHVuaXF1ZW5lc3MsIHNvIGhvb2tzIHRoYXQgYnVpbGQgb24gdG9wIG9mIGB1c2VDYWNoZWRQcm9taXNlYCBjYW5cbiAgICogdXNlIGFuIGBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeGAgdG8gaGVscCBpdC5cbiAgICpcbiAgICogQHJlbWFyayBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAqL1xuICBjb25zdCB7XG4gICAgaW5pdGlhbERhdGEsXG4gICAga2VlcFByZXZpb3VzRGF0YSxcbiAgICBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeCxcbiAgICAuLi51c2VQcm9taXNlT3B0aW9uc1xuICB9OiBDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPiAmIHsgaW50ZXJuYWxfY2FjaGVLZXlTdWZmaXg/OiBzdHJpbmcgfSA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IGxhc3RVcGRhdGVGcm9tID0gdXNlUmVmPFwiY2FjaGVcIiB8IFwicHJvbWlzZVwiPihudWxsKTtcblxuICBjb25zdCBbY2FjaGVkRGF0YSwgbXV0YXRlQ2FjaGVdID0gdXNlQ2FjaGVkU3RhdGU8dHlwZW9mIGVtcHR5Q2FjaGUgfCAoVW53cmFwUmV0dXJuPFQ+IHwgVSk+KFxuICAgIGhhc2goYXJncyB8fCBbXSkgKyBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeCxcbiAgICBlbXB0eUNhY2hlLFxuICAgIHtcbiAgICAgIGNhY2hlTmFtZXNwYWNlOiBoYXNoKGZuKSxcbiAgICB9LFxuICApO1xuXG4gIC8vIFVzZSBhIHJlZiB0byBzdG9yZSBwcmV2aW91cyByZXR1cm5lZCBkYXRhLiBVc2UgdGhlIGluaXRhbCBkYXRhIGFzIGl0cyBpbml0YWwgdmFsdWUgZnJvbSB0aGUgY2FjaGUuXG4gIGNvbnN0IGxhZ2d5RGF0YVJlZiA9IHVzZVJlZjxBd2FpdGVkPFJldHVyblR5cGU8VD4+IHwgVT4oY2FjaGVkRGF0YSAhPT0gZW1wdHlDYWNoZSA/IGNhY2hlZERhdGEgOiAoaW5pdGlhbERhdGEgYXMgVSkpO1xuICBjb25zdCBwYWdpbmF0aW9uQXJnc1JlZiA9IHVzZVJlZjxQYWdpbmF0aW9uT3B0aW9uczxVbndyYXBSZXR1cm48VD4gfCBVPiB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuICBjb25zdCB7XG4gICAgbXV0YXRlOiBfbXV0YXRlLFxuICAgIHJldmFsaWRhdGUsXG4gICAgLi4uc3RhdGVcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZuIGhhcyB0aGUgc2FtZSBzaWduYXR1cmUgaW4gYm90aCB1c2VQcm9taXNlIGFuZCB1c2VDYWNoZWRQcm9taXNlXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgfSA9IHVzZVByb21pc2UoZm4sIGFyZ3MgfHwgKFtdIGFzIGFueSBhcyBQYXJhbWV0ZXJzPFQ+KSwge1xuICAgIC4uLnVzZVByb21pc2VPcHRpb25zLFxuICAgIG9uRGF0YShkYXRhLCBwYWdpbmF0aW9uKSB7XG4gICAgICBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50ID0gcGFnaW5hdGlvbjtcbiAgICAgIGlmICh1c2VQcm9taXNlT3B0aW9ucy5vbkRhdGEpIHtcbiAgICAgICAgdXNlUHJvbWlzZU9wdGlvbnMub25EYXRhKGRhdGEsIHBhZ2luYXRpb24pO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2luYXRpb24gJiYgcGFnaW5hdGlvbi5wYWdlID4gMCkge1xuICAgICAgICAvLyBkb24ndCBjYWNoZSBiZXlvbmQgdGhlIGZpcnN0IHBhZ2VcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGFzdFVwZGF0ZUZyb20uY3VycmVudCA9IFwicHJvbWlzZVwiO1xuICAgICAgbGFnZ3lEYXRhUmVmLmN1cnJlbnQgPSBkYXRhO1xuICAgICAgbXV0YXRlQ2FjaGUoZGF0YSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgbGV0IHJldHVybmVkRGF0YTogVSB8IEF3YWl0ZWQ8UmV0dXJuVHlwZTxUPj4gfCBVbndyYXBSZXR1cm48VD47XG4gIGNvbnN0IHBhZ2luYXRpb24gPSBzdGF0ZS5wYWdpbmF0aW9uO1xuICAvLyB3aGVuIHBhZ2luYXRpbmcsIG9ubHkgdGhlIGZpcnN0IHBhZ2UgZ2V0cyBjYWNoZWQsIHNvIHdlIHJldHVybiB0aGUgZGF0YSB3ZSBnZXQgZnJvbSBgdXNlUHJvbWlzZWAsIGJlY2F1c2VcbiAgLy8gaXQgd2lsbCBiZSBhY2N1bXVsYXRlZC5cbiAgaWYgKHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQgJiYgcGFnaW5hdGlvbkFyZ3NSZWYuY3VycmVudC5wYWdlID4gMCAmJiBzdGF0ZS5kYXRhKSB7XG4gICAgcmV0dXJuZWREYXRhID0gc3RhdGUuZGF0YSBhcyBVbndyYXBSZXR1cm48VD47XG4gICAgLy8gaWYgdGhlIGxhdGVzdCB1cGRhdGUgaWYgZnJvbSB0aGUgUHJvbWlzZSwgd2Uga2VlcCBpdFxuICB9IGVsc2UgaWYgKGxhc3RVcGRhdGVGcm9tLmN1cnJlbnQgPT09IFwicHJvbWlzZVwiKSB7XG4gICAgcmV0dXJuZWREYXRhID0gbGFnZ3lEYXRhUmVmLmN1cnJlbnQ7XG4gIH0gZWxzZSBpZiAoa2VlcFByZXZpb3VzRGF0YSAmJiBjYWNoZWREYXRhICE9PSBlbXB0eUNhY2hlKSB7XG4gICAgLy8gaWYgd2Ugd2FudCB0byBrZWVwIHRoZSBsYXRlc3QgZGF0YSwgd2UgcGljayB0aGUgY2FjaGUgYnV0IG9ubHkgaWYgaXQncyBub3QgZW1wdHlcbiAgICByZXR1cm5lZERhdGEgPSBjYWNoZWREYXRhO1xuICAgIGlmIChwYWdpbmF0aW9uKSB7XG4gICAgICBwYWdpbmF0aW9uLmhhc01vcmUgPSB0cnVlO1xuICAgICAgcGFnaW5hdGlvbi5wYWdlU2l6ZSA9IGNhY2hlZERhdGEubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIGlmIChrZWVwUHJldmlvdXNEYXRhICYmIGNhY2hlZERhdGEgPT09IGVtcHR5Q2FjaGUpIHtcbiAgICAvLyBpZiB0aGUgY2FjaGUgaXMgZW1wdHksIHdlIHdpbGwgcmV0dXJuIHRoZSBwcmV2aW91cyBkYXRhXG4gICAgcmV0dXJuZWREYXRhID0gbGFnZ3lEYXRhUmVmLmN1cnJlbnQ7XG4gICAgLy8gdGhlcmUgYXJlIG5vIHNwZWNpYWwgY2FzZXMsIHNvIGVpdGhlciByZXR1cm4gdGhlIGNhY2hlIG9yIGluaXRpYWwgZGF0YVxuICB9IGVsc2UgaWYgKGNhY2hlZERhdGEgIT09IGVtcHR5Q2FjaGUpIHtcbiAgICByZXR1cm5lZERhdGEgPSBjYWNoZWREYXRhO1xuICAgIGlmIChwYWdpbmF0aW9uKSB7XG4gICAgICBwYWdpbmF0aW9uLmhhc01vcmUgPSB0cnVlO1xuICAgICAgcGFnaW5hdGlvbi5wYWdlU2l6ZSA9IGNhY2hlZERhdGEubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm5lZERhdGEgPSBpbml0aWFsRGF0YSBhcyBVO1xuICB9XG5cbiAgY29uc3QgbGF0ZXN0RGF0YSA9IHVzZUxhdGVzdChyZXR1cm5lZERhdGEpO1xuXG4gIC8vIHdlIHJld3JpdGUgdGhlIG11dGF0ZSBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIGNhY2hlIGluc3RlYWRcbiAgY29uc3QgbXV0YXRlID0gdXNlQ2FsbGJhY2s8TXV0YXRlUHJvbWlzZTxBd2FpdGVkPFJldHVyblR5cGU8VD4+IHwgVT4+KFxuICAgIGFzeW5jIChhc3luY1VwZGF0ZSwgb3B0aW9ucykgPT4ge1xuICAgICAgbGV0IGRhdGFCZWZvcmVPcHRpbWlzdGljVXBkYXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm9wdGltaXN0aWNVcGRhdGUpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gXCJmdW5jdGlvblwiICYmIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGRhdGEgYmVmb3JlIHRoZSBvcHRpbWlzdGljIHVwZGF0ZSxcbiAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmIHdlIG5lZWQgaXQgKGVnLiBvbmx5IHdoZW4gd2Ugd2FudCB0byBhdXRvbWF0aWNhbGx5IHJvbGxiYWNrIGFmdGVyKVxuICAgICAgICAgICAgZGF0YUJlZm9yZU9wdGltaXN0aWNVcGRhdGUgPSBzdHJ1Y3R1cmVkQ2xvbmUobGF0ZXN0RGF0YS5jdXJyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZGF0YSA9IG9wdGlvbnMub3B0aW1pc3RpY1VwZGF0ZShsYXRlc3REYXRhLmN1cnJlbnQpO1xuICAgICAgICAgIGxhc3RVcGRhdGVGcm9tLmN1cnJlbnQgPSBcImNhY2hlXCI7XG4gICAgICAgICAgbGFnZ3lEYXRhUmVmLmN1cnJlbnQgPSBkYXRhO1xuICAgICAgICAgIG11dGF0ZUNhY2hlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCBfbXV0YXRlKGFzeW5jVXBkYXRlLCB7IHNob3VsZFJldmFsaWRhdGVBZnRlcjogb3B0aW9ucz8uc2hvdWxkUmV2YWxpZGF0ZUFmdGVyIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucz8ucm9sbGJhY2tPbkVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5yb2xsYmFja09uRXJyb3IobGF0ZXN0RGF0YS5jdXJyZW50KTtcbiAgICAgICAgICBsYXN0VXBkYXRlRnJvbS5jdXJyZW50ID0gXCJjYWNoZVwiO1xuICAgICAgICAgIGxhZ2d5RGF0YVJlZi5jdXJyZW50ID0gZGF0YTtcbiAgICAgICAgICBtdXRhdGVDYWNoZShkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zPy5vcHRpbWlzdGljVXBkYXRlICYmIG9wdGlvbnM/LnJvbGxiYWNrT25FcnJvciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBsYXN0VXBkYXRlRnJvbS5jdXJyZW50ID0gXCJjYWNoZVwiO1xuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igd2hlbiB1bmRlZmluZWQsIGl0J3MgZXhwZWN0ZWRcbiAgICAgICAgICBsYWdneURhdGFSZWYuY3VycmVudCA9IGRhdGFCZWZvcmVPcHRpbWlzdGljVXBkYXRlO1xuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igd2hlbiB1bmRlZmluZWQsIGl0J3MgZXhwZWN0ZWRcbiAgICAgICAgICBtdXRhdGVDYWNoZShkYXRhQmVmb3JlT3B0aW1pc3RpY1VwZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH0sXG4gICAgW211dGF0ZUNhY2hlLCBfbXV0YXRlLCBsYXRlc3REYXRhLCBsYWdneURhdGFSZWYsIGxhc3RVcGRhdGVGcm9tXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYWNoZWREYXRhICE9PSBlbXB0eUNhY2hlKSB7XG4gICAgICBsYXN0VXBkYXRlRnJvbS5jdXJyZW50ID0gXCJjYWNoZVwiO1xuICAgICAgbGFnZ3lEYXRhUmVmLmN1cnJlbnQgPSBjYWNoZWREYXRhO1xuICAgIH1cbiAgfSwgW2NhY2hlZERhdGFdKTtcblxuICByZXR1cm4ge1xuICAgIGRhdGE6IHJldHVybmVkRGF0YSxcbiAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyxcbiAgICBlcnJvcjogc3RhdGUuZXJyb3IsXG4gICAgbXV0YXRlOiBwYWdpbmF0aW9uQXJnc1JlZi5jdXJyZW50ICYmIHBhZ2luYXRpb25BcmdzUmVmLmN1cnJlbnQucGFnZSA+IDAgPyBfbXV0YXRlIDogbXV0YXRlLFxuICAgIHBhZ2luYXRpb24sXG4gICAgcmV2YWxpZGF0ZSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VDYWNoZWRQcm9taXNlLCBDYWNoZWRQcm9taXNlT3B0aW9ucyB9IGZyb20gXCIuL3VzZUNhY2hlZFByb21pc2VcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuaW1wb3J0IHsgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBGdW5jdGlvblJldHVybmluZ1Byb21pc2UsIFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGlzSlNPTiB9IGZyb20gXCIuL2ZldGNoLXV0aWxzXCI7XG5pbXBvcnQgeyBoYXNoIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2luZyhyZXNwb25zZTogUmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgfVxuXG4gIGNvbnN0IGNvbnRlbnRUeXBlSGVhZGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG5cbiAgaWYgKGNvbnRlbnRUeXBlSGVhZGVyICYmIGlzSlNPTihjb250ZW50VHlwZUhlYWRlcikpIHtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIHJldHVybiBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRNYXBwaW5nPFYsIFQgZXh0ZW5kcyB1bmtub3duW10+KHJlc3VsdDogVik6IHsgZGF0YTogVDsgaGFzTW9yZT86IGJvb2xlYW47IGN1cnNvcj86IGFueSB9IHtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IGFzIHVua25vd24gYXMgVCwgaGFzTW9yZTogZmFsc2UgfTtcbn1cblxudHlwZSBSZXF1ZXN0SW5mbyA9IHN0cmluZyB8IFVSTCB8IGdsb2JhbFRoaXMuUmVxdWVzdDtcbnR5cGUgUGFnaW5hdGVkUmVxdWVzdEluZm8gPSAocGFnaW5hdGlvbjogeyBwYWdlOiBudW1iZXI7IGxhc3RJdGVtPzogYW55OyBjdXJzb3I/OiBhbnkgfSkgPT4gUmVxdWVzdEluZm87XG5cbi8qKlxuICogRmV0Y2hlcyB0aGUgcGFnaW5hdGVkVVJMIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgQXN5bmNTdGF0ZX0gY29ycmVzcG9uZGluZyB0byB0aGUgZXhlY3V0aW9uIG9mIHRoZSBmZXRjaC4gVGhlIGxhc3QgdmFsdWUgd2lsbCBiZSBrZXB0IGJldHdlZW4gY29tbWFuZCBydW5zLlxuICpcbiAqIEByZW1hcmsgVGhpcyBvdmVybG9hZCBzaG91bGQgYmUgdXNlZCB3aGVuIHdvcmtpbmcgd2l0aCBwYWdpbmF0ZWQgZGF0YSBzb3VyY2VzLlxuICogQHJlbWFyayBXaGVuIHBhZ2luYXRpbmcsIG9ubHkgdGhlIGZpcnN0IHBhZ2Ugd2lsbCBiZSBjYWNoZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgSWNvbiwgSW1hZ2UsIExpc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyB1c2VGZXRjaCB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICogaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbiAqXG4gKiB0eXBlIFNlYXJjaFJlc3VsdCA9IHsgY29tcGFuaWVzOiBDb21wYW55W107IHBhZ2U6IG51bWJlcjsgdG90YWxQYWdlczogbnVtYmVyIH07XG4gKiB0eXBlIENvbXBhbnkgPSB7IGlkOiBudW1iZXI7IG5hbWU6IHN0cmluZzsgc21hbGxMb2dvVXJsPzogc3RyaW5nIH07XG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEsIHBhZ2luYXRpb24gfSA9IHVzZUZldGNoKFxuICogICAgIChvcHRpb25zKSA9PlxuICogICAgICAgXCJodHRwczovL2FwaS55Y29tYmluYXRvci5jb20vdjAuMS9jb21wYW5pZXM/XCIgK1xuICogICAgICAgbmV3IFVSTFNlYXJjaFBhcmFtcyh7IHBhZ2U6IFN0cmluZyhvcHRpb25zLnBhZ2UgKyAxKSwgcTogc2VhcmNoVGV4dCB9KS50b1N0cmluZygpLFxuICogICAgIHtcbiAqICAgICAgIG1hcFJlc3VsdChyZXN1bHQ6IFNlYXJjaFJlc3VsdCkge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGRhdGE6IHJlc3VsdC5jb21wYW5pZXMsXG4gKiAgICAgICAgICAgaGFzTW9yZTogcmVzdWx0LnBhZ2UgPCByZXN1bHQudG90YWxQYWdlcyxcbiAqICAgICAgICAgfTtcbiAqICAgICAgIH0sXG4gKiAgICAgICBrZWVwUHJldmlvdXNEYXRhOiB0cnVlLFxuICogICAgICAgaW5pdGlhbERhdGE6IFtdLFxuICogICAgIH0sXG4gKiAgICk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfSBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufSBvblNlYXJjaFRleHRDaGFuZ2U9e3NldFNlYXJjaFRleHR9PlxuICogICAgICAge2RhdGEubWFwKChjb21wYW55KSA9PiAoXG4gKiAgICAgICAgIDxMaXN0Lkl0ZW1cbiAqICAgICAgICAgICBrZXk9e2NvbXBhbnkuaWR9XG4gKiAgICAgICAgICAgaWNvbj17eyBzb3VyY2U6IGNvbXBhbnkuc21hbGxMb2dvVXJsID8/IEljb24uTWludXNDaXJjbGUsIG1hc2s6IEltYWdlLk1hc2suUm91bmRlZFJlY3RhbmdsZSB9fVxuICogICAgICAgICAgIHRpdGxlPXtjb21wYW55Lm5hbWV9XG4gKiAgICAgICAgIC8+XG4gKiAgICAgICApKX1cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZldGNoPFYgPSB1bmtub3duLCBVID0gdW5kZWZpbmVkLCBUIGV4dGVuZHMgdW5rbm93bltdID0gdW5rbm93bltdPihcbiAgdXJsOiBQYWdpbmF0ZWRSZXF1ZXN0SW5mbyxcbiAgb3B0aW9uczogUmVxdWVzdEluaXQgJiB7XG4gICAgbWFwUmVzdWx0OiAocmVzdWx0OiBWKSA9PiB7IGRhdGE6IFQ7IGhhc01vcmU/OiBib29sZWFuOyBjdXJzb3I/OiBhbnkgfTtcbiAgICBwYXJzZVJlc3BvbnNlPzogKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gUHJvbWlzZTxWPjtcbiAgfSAmIE9taXQ8Q2FjaGVkUHJvbWlzZU9wdGlvbnM8KHVybDogUmVxdWVzdEluZm8sIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkgPT4gUHJvbWlzZTxUPiwgVT4sIFwiYWJvcnRhYmxlXCI+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCwgVT47XG4vKipcbiAqIEZldGNoIHRoZSBVUkwgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGZldGNoLiBUaGUgbGFzdCB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgdXNlRmV0Y2ggfSBmcm9tICdAcmF5Y2FzdC91dGlscyc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29tbWFuZCgpIHtcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEsIHJldmFsaWRhdGUgfSA9IHVzZUZldGNoKCdodHRwczovL2FwaS5leGFtcGxlJyk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxEZXRhaWxcbiAqICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nfVxuICogICAgICAgbWFya2Rvd249e2RhdGF9XG4gKiAgICAgICBhY3Rpb25zPXtcbiAqICAgICAgICAgPEFjdGlvblBhbmVsPlxuICogICAgICAgICAgIDxBY3Rpb24gdGl0bGU9XCJSZWxvYWRcIiBvbkFjdGlvbj17KCkgPT4gcmV2YWxpZGF0ZSgpfSAvPlxuICogICAgICAgICA8L0FjdGlvblBhbmVsPlxuICogICAgICAgfVxuICogICAgIC8+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGZXRjaDxWID0gdW5rbm93biwgVSA9IHVuZGVmaW5lZCwgVCA9IFY+KFxuICB1cmw6IFJlcXVlc3RJbmZvLFxuICBvcHRpb25zPzogUmVxdWVzdEluaXQgJiB7XG4gICAgbWFwUmVzdWx0PzogKHJlc3VsdDogVikgPT4geyBkYXRhOiBUOyBoYXNNb3JlPzogYm9vbGVhbjsgY3Vyc29yPzogYW55IH07XG4gICAgcGFyc2VSZXNwb25zZT86IChyZXNwb25zZTogUmVzcG9uc2UpID0+IFByb21pc2U8Vj47XG4gIH0gJiBPbWl0PENhY2hlZFByb21pc2VPcHRpb25zPCh1cmw6IFJlcXVlc3RJbmZvLCBvcHRpb25zPzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8VD4sIFU+LCBcImFib3J0YWJsZVwiPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+ICYgeyBwYWdpbmF0aW9uOiB1bmRlZmluZWQgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZldGNoPFYgPSB1bmtub3duLCBVID0gdW5kZWZpbmVkLCBUIGV4dGVuZHMgdW5rbm93bltdID0gdW5rbm93bltdPihcbiAgdXJsOiBSZXF1ZXN0SW5mbyB8IFBhZ2luYXRlZFJlcXVlc3RJbmZvLFxuICBvcHRpb25zPzogUmVxdWVzdEluaXQgJiB7XG4gICAgbWFwUmVzdWx0PzogKHJlc3VsdDogVikgPT4geyBkYXRhOiBUOyBoYXNNb3JlPzogYm9vbGVhbjsgY3Vyc29yPzogYW55IH07XG4gICAgcGFyc2VSZXNwb25zZT86IChyZXNwb25zZTogUmVzcG9uc2UpID0+IFByb21pc2U8Vj47XG4gIH0gJiBPbWl0PENhY2hlZFByb21pc2VPcHRpb25zPCh1cmw6IFJlcXVlc3RJbmZvLCBvcHRpb25zPzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8VD4sIFU+LCBcImFib3J0YWJsZVwiPixcbik6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+IHtcbiAgY29uc3Qge1xuICAgIHBhcnNlUmVzcG9uc2UsXG4gICAgbWFwUmVzdWx0LFxuICAgIGluaXRpYWxEYXRhLFxuICAgIGV4ZWN1dGUsXG4gICAga2VlcFByZXZpb3VzRGF0YSxcbiAgICBvbkVycm9yLFxuICAgIG9uRGF0YSxcbiAgICBvbldpbGxFeGVjdXRlLFxuICAgIGZhaWx1cmVUb2FzdE9wdGlvbnMsXG4gICAgLi4uZmV0Y2hPcHRpb25zXG4gIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gIGNvbnN0IHVzZUNhY2hlZFByb21pc2VPcHRpb25zOiBDYWNoZWRQcm9taXNlT3B0aW9uczwodXJsOiBSZXF1ZXN0SW5mbywgb3B0aW9ucz86IFJlcXVlc3RJbml0KSA9PiBQcm9taXNlPFQ+LCBVPiA9IHtcbiAgICBpbml0aWFsRGF0YSxcbiAgICBleGVjdXRlLFxuICAgIGtlZXBQcmV2aW91c0RhdGEsXG4gICAgb25FcnJvcixcbiAgICBvbkRhdGEsXG4gICAgb25XaWxsRXhlY3V0ZSxcbiAgICBmYWlsdXJlVG9hc3RPcHRpb25zLFxuICB9O1xuXG4gIGNvbnN0IHBhcnNlUmVzcG9uc2VSZWYgPSB1c2VMYXRlc3QocGFyc2VSZXNwb25zZSB8fCBkZWZhdWx0UGFyc2luZyk7XG4gIGNvbnN0IG1hcFJlc3VsdFJlZiA9IHVzZUxhdGVzdChtYXBSZXN1bHQgfHwgZGVmYXVsdE1hcHBpbmcpO1xuICBjb25zdCB1cmxSZWYgPSB1c2VSZWY8UmVxdWVzdEluZm8gfCBQYWdpbmF0ZWRSZXF1ZXN0SW5mbz4obnVsbCk7XG4gIGNvbnN0IGZpcnN0UGFnZVVybFJlZiA9IHVzZVJlZjxSZXF1ZXN0SW5mbyB8IHVuZGVmaW5lZD4obnVsbCk7XG4gIGNvbnN0IGZpcnN0UGFnZVVybCA9IHR5cGVvZiB1cmwgPT09IFwiZnVuY3Rpb25cIiA/IHVybCh7IHBhZ2U6IDAgfSkgOiB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBXaGVuIHBhZ2luYXRpbmcsIGB1cmxgIGlzIGEgYFBhZ2luYXRlZFJlcXVlc3RJbmZvYCwgc28gd2Ugb25seSB3YW50IHRvIHVwZGF0ZSB0aGUgcmVmIHdoZW4gdGhlIGBmaXJzdFBhZ2VVcmxgIGNoYW5nZXMuXG4gICAqIFdoZW4gbm90IHBhZ2luYXRpbmcsIGB1cmxgIGlzIGEgYFJlcXVlc3RJbmZvYCwgc28gd2Ugd2FudCB0byB1cGRhdGUgdGhlIHJlZiB3aGVuZXZlciBgdXJsYCBjaGFuZ2VzLlxuICAgKi9cbiAgaWYgKCF1cmxSZWYuY3VycmVudCB8fCB0eXBlb2YgZmlyc3RQYWdlVXJsUmVmLmN1cnJlbnQgPT09IFwidW5kZWZpbmVkXCIgfHwgZmlyc3RQYWdlVXJsUmVmLmN1cnJlbnQgIT09IGZpcnN0UGFnZVVybCkge1xuICAgIHVybFJlZi5jdXJyZW50ID0gdXJsO1xuICB9XG4gIGZpcnN0UGFnZVVybFJlZi5jdXJyZW50ID0gZmlyc3RQYWdlVXJsO1xuICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPihudWxsKTtcblxuICBjb25zdCBwYWdpbmF0ZWRGbjogRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlPFtQYWdpbmF0ZWRSZXF1ZXN0SW5mbywgdHlwZW9mIGZldGNoT3B0aW9uc10sIFQ+ID0gdXNlQ2FsbGJhY2soXG4gICAgKHVybDogUGFnaW5hdGVkUmVxdWVzdEluZm8sIG9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkgPT4gYXN5bmMgKHBhZ2luYXRpb246IHsgcGFnZTogbnVtYmVyIH0pID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybChwYWdpbmF0aW9uKSwgeyBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwsIC4uLm9wdGlvbnMgfSk7XG4gICAgICBjb25zdCBwYXJzZWQgPSAoYXdhaXQgcGFyc2VSZXNwb25zZVJlZi5jdXJyZW50KHJlcykpIGFzIFY7XG4gICAgICByZXR1cm4gbWFwUmVzdWx0UmVmLmN1cnJlbnQ/LihwYXJzZWQpO1xuICAgIH0sXG4gICAgW3BhcnNlUmVzcG9uc2VSZWYsIG1hcFJlc3VsdFJlZl0sXG4gICk7XG4gIGNvbnN0IGZuOiBGdW5jdGlvblJldHVybmluZ1Byb21pc2U8W1JlcXVlc3RJbmZvLCBSZXF1ZXN0SW5pdD9dLCBUPiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICh1cmw6IFJlcXVlc3RJbmZvLCBvcHRpb25zPzogUmVxdWVzdEluaXQpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBzaWduYWw6IGFib3J0YWJsZS5jdXJyZW50Py5zaWduYWwsIC4uLm9wdGlvbnMgfSk7XG4gICAgICBjb25zdCBwYXJzZWQgPSAoYXdhaXQgcGFyc2VSZXNwb25zZVJlZi5jdXJyZW50KHJlcykpIGFzIFY7XG4gICAgICBjb25zdCBtYXBwZWQgPSBtYXBSZXN1bHRSZWYuY3VycmVudChwYXJzZWQpO1xuICAgICAgcmV0dXJuIG1hcHBlZD8uZGF0YSBhcyB1bmtub3duIGFzIFQ7XG4gICAgfSxcbiAgICBbcGFyc2VSZXNwb25zZVJlZiwgbWFwUmVzdWx0UmVmXSxcbiAgKTtcblxuICBjb25zdCBwcm9taXNlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGZpcnN0UGFnZVVybFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm4gcGFnaW5hdGVkRm47XG4gICAgfVxuICAgIHJldHVybiBmbjtcbiAgfSwgW2ZpcnN0UGFnZVVybFJlZiwgZm4sIHBhZ2luYXRlZEZuXSk7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBsYXN0SXRlbSBjYW4ndCBiZSBpbmZlcnJlZCBwcm9wZXJseVxuICByZXR1cm4gdXNlQ2FjaGVkUHJvbWlzZShwcm9taXNlLCBbdXJsUmVmLmN1cnJlbnQgYXMgUGFnaW5hdGVkUmVxdWVzdEluZm8sIGZldGNoT3B0aW9uc10sIHtcbiAgICAuLi51c2VDYWNoZWRQcm9taXNlT3B0aW9ucyxcbiAgICBpbnRlcm5hbF9jYWNoZUtleVN1ZmZpeDogZmlyc3RQYWdlVXJsUmVmLmN1cnJlbnQgKyBoYXNoKG1hcFJlc3VsdFJlZi5jdXJyZW50KSArIGhhc2gocGFyc2VSZXNwb25zZVJlZi5jdXJyZW50KSxcbiAgICBhYm9ydGFibGUsXG4gIH0pO1xufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBpc0pTT04oY29udGVudFR5cGVIZWFkZXI6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKGNvbnRlbnRUeXBlSGVhZGVyKSB7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gcGFyc2VDb250ZW50VHlwZShjb250ZW50VHlwZUhlYWRlcik7XG5cbiAgICBpZiAoIW1lZGlhVHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChtZWRpYVR5cGUuc3VidHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChtZWRpYVR5cGUuc3VmZml4ID09PSBcImpzb25cIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKG1lZGlhVHlwZS5zdWZmaXggJiYgL1xcYmpzb25cXGIvaS50ZXN0KG1lZGlhVHlwZS5zdWZmaXgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobWVkaWFUeXBlLnN1YnR5cGUgJiYgL1xcYmpzb25cXGIvaS50ZXN0KG1lZGlhVHlwZS5zdWJ0eXBlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZWdFeHAgdG8gbWF0Y2ggdHlwZSBpbiBSRkMgNjgzOCB3aXRoIGFuIG9wdGlvbmFsIHRyYWlsaW5nIGA7YCBiZWNhdXNlIHNvbWUgQXBwbGUgQVBJcyByZXR1cm5zIG9uZS4uLlxuICpcbiAqIHR5cGUtbmFtZSA9IHJlc3RyaWN0ZWQtbmFtZVxuICogc3VidHlwZS1uYW1lID0gcmVzdHJpY3RlZC1uYW1lXG4gKiByZXN0cmljdGVkLW5hbWUgPSByZXN0cmljdGVkLW5hbWUtZmlyc3QgKjEyNnJlc3RyaWN0ZWQtbmFtZS1jaGFyc1xuICogcmVzdHJpY3RlZC1uYW1lLWZpcnN0ICA9IEFMUEhBIC8gRElHSVRcbiAqIHJlc3RyaWN0ZWQtbmFtZS1jaGFycyAgPSBBTFBIQSAvIERJR0lUIC8gXCIhXCIgLyBcIiNcIiAvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgXCIkXCIgLyBcIiZcIiAvIFwiLVwiIC8gXCJeXCIgLyBcIl9cIlxuICogcmVzdHJpY3RlZC1uYW1lLWNoYXJzID0vIFwiLlwiIDsgQ2hhcmFjdGVycyBiZWZvcmUgZmlyc3QgZG90IGFsd2F5c1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7IHNwZWNpZnkgYSBmYWNldCBuYW1lXG4gKiByZXN0cmljdGVkLW5hbWUtY2hhcnMgPS8gXCIrXCIgOyBDaGFyYWN0ZXJzIGFmdGVyIGxhc3QgcGx1cyBhbHdheXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOyBzcGVjaWZ5IGEgc3RydWN0dXJlZCBzeW50YXggc3VmZml4XG4gKiBBTFBIQSA9ICAleDQxLTVBIC8gJXg2MS03QSAgIDsgQS1aIC8gYS16XG4gKiBESUdJVCA9ICAleDMwLTM5ICAgICAgICAgICAgIDsgMC05XG4gKi9cbmNvbnN0IE1FRElBX1RZUEVfUkVHRVhQID0gL14oW0EtWmEtejAtOV1bQS1aYS16MC05ISMkJl5fLV17MCwxMjZ9KVxcLyhbQS1aYS16MC05XVtBLVphLXowLTkhIyQmXl8uKy1dezAsMTI2fSk7PyQvO1xuXG5mdW5jdGlvbiBwYXJzZUNvbnRlbnRUeXBlKGhlYWRlcjogc3RyaW5nKSB7XG4gIGNvbnN0IGhlYWRlckRlbGltaXRhdGlvbmluZGV4ID0gaGVhZGVyLmluZGV4T2YoXCI7XCIpO1xuICBjb25zdCBjb250ZW50VHlwZSA9IGhlYWRlckRlbGltaXRhdGlvbmluZGV4ICE9PSAtMSA/IGhlYWRlci5zbGljZSgwLCBoZWFkZXJEZWxpbWl0YXRpb25pbmRleCkudHJpbSgpIDogaGVhZGVyLnRyaW0oKTtcblxuICBjb25zdCBtYXRjaCA9IE1FRElBX1RZUEVfUkVHRVhQLmV4ZWMoY29udGVudFR5cGUudG9Mb3dlckNhc2UoKS50b0xvd2VyQ2FzZSgpKTtcblxuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdHlwZSA9IG1hdGNoWzFdO1xuICBsZXQgc3VidHlwZSA9IG1hdGNoWzJdO1xuICBsZXQgc3VmZml4O1xuXG4gIC8vIHN1ZmZpeCBhZnRlciBsYXN0ICtcbiAgY29uc3QgaW5kZXggPSBzdWJ0eXBlLmxhc3RJbmRleE9mKFwiK1wiKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHN1ZmZpeCA9IHN1YnR5cGUuc3Vic3RyaW5nKGluZGV4ICsgMSk7XG4gICAgc3VidHlwZSA9IHN1YnR5cGUuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgfVxuXG4gIHJldHVybiB7IHR5cGUsIHN1YnR5cGUsIHN1ZmZpeCB9O1xufVxuIiwgIi8qXG4gKiBJbnNwaXJlZCBieSBFeGVjYVxuICovXG5cbmltcG9ydCBjaGlsZFByb2Nlc3MgZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyB1c2VDYWNoZWRQcm9taXNlLCBDYWNoZWRQcm9taXNlT3B0aW9ucyB9IGZyb20gXCIuL3VzZUNhY2hlZFByb21pc2VcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuaW1wb3J0IHsgVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgZ2V0U3Bhd25lZFByb21pc2UsXG4gIGdldFNwYXduZWRSZXN1bHQsXG4gIGhhbmRsZU91dHB1dCxcbiAgZGVmYXVsdFBhcnNpbmcsXG4gIFBhcnNlRXhlY091dHB1dEhhbmRsZXIsXG59IGZyb20gXCIuL2V4ZWMtdXRpbHNcIjtcblxudHlwZSBFeGVjT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgcnVucyB0aGUgY29tbWFuZCBpbnNpZGUgb2YgYSBzaGVsbC4gVXNlcyBgL2Jpbi9zaGAuIEEgZGlmZmVyZW50IHNoZWxsIGNhbiBiZSBzcGVjaWZpZWQgYXMgYSBzdHJpbmcuIFRoZSBzaGVsbCBzaG91bGQgdW5kZXJzdGFuZCB0aGUgYC1jYCBzd2l0Y2guXG4gICAqXG4gICAqIFdlIHJlY29tbWVuZCBhZ2FpbnN0IHVzaW5nIHRoaXMgb3B0aW9uIHNpbmNlIGl0IGlzOlxuICAgKiAtIG5vdCBjcm9zcy1wbGF0Zm9ybSwgZW5jb3VyYWdpbmcgc2hlbGwtc3BlY2lmaWMgc3ludGF4LlxuICAgKiAtIHNsb3dlciwgYmVjYXVzZSBvZiB0aGUgYWRkaXRpb25hbCBzaGVsbCBpbnRlcnByZXRhdGlvbi5cbiAgICogLSB1bnNhZmUsIHBvdGVudGlhbGx5IGFsbG93aW5nIGNvbW1hbmQgaW5qZWN0aW9uLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgc2hlbGw/OiBib29sZWFuIHwgc3RyaW5nO1xuICAvKipcbiAgICogU3RyaXAgdGhlIGZpbmFsIG5ld2xpbmUgY2hhcmFjdGVyIGZyb20gdGhlIG91dHB1dC5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgc3RyaXBGaW5hbE5ld2xpbmU/OiBib29sZWFuO1xuICAvKipcbiAgICogQ3VycmVudCB3b3JraW5nIGRpcmVjdG9yeSBvZiB0aGUgY2hpbGQgcHJvY2Vzcy5cbiAgICogQGRlZmF1bHQgcHJvY2Vzcy5jd2QoKVxuICAgKi9cbiAgY3dkPzogc3RyaW5nO1xuICAvKipcbiAgICogRW52aXJvbm1lbnQga2V5LXZhbHVlIHBhaXJzLiBFeHRlbmRzIGF1dG9tYXRpY2FsbHkgZnJvbSBgcHJvY2Vzcy5lbnZgLlxuICAgKiBAZGVmYXVsdCBwcm9jZXNzLmVudlxuICAgKi9cbiAgZW52PzogTm9kZUpTLlByb2Nlc3NFbnY7XG4gIC8qKlxuICAgKiBTcGVjaWZ5IHRoZSBjaGFyYWN0ZXIgZW5jb2RpbmcgdXNlZCB0byBkZWNvZGUgdGhlIHN0ZG91dCBhbmQgc3RkZXJyIG91dHB1dC4gSWYgc2V0IHRvIGBcImJ1ZmZlclwiYCwgdGhlbiBzdGRvdXQgYW5kIHN0ZGVyciB3aWxsIGJlIGEgQnVmZmVyIGluc3RlYWQgb2YgYSBzdHJpbmcuXG4gICAqXG4gICAqIEBkZWZhdWx0IFwidXRmOFwiXG4gICAqL1xuICBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nIHwgXCJidWZmZXJcIjtcbiAgLyoqXG4gICAqIFdyaXRlIHNvbWUgaW5wdXQgdG8gdGhlIGBzdGRpbmAgb2YgeW91ciBiaW5hcnkuXG4gICAqL1xuICBpbnB1dD86IHN0cmluZyB8IEJ1ZmZlcjtcbiAgLyoqIElmIHRpbWVvdXQgaXMgZ3JlYXRlciB0aGFuIGAwYCwgdGhlIHBhcmVudCB3aWxsIHNlbmQgdGhlIHNpZ25hbCBgU0lHVEVSTWAgaWYgdGhlIGNoaWxkIHJ1bnMgbG9uZ2VyIHRoYW4gdGltZW91dCBtaWxsaXNlY29uZHMuXG4gICAqXG4gICAqIEBkZWZhdWx0IDEwMDAwXG4gICAqL1xuICB0aW1lb3V0PzogbnVtYmVyO1xufTtcblxuY29uc3QgU1BBQ0VTX1JFR0VYUCA9IC8gKy9nO1xuZnVuY3Rpb24gcGFyc2VDb21tYW5kKGNvbW1hbmQ6IHN0cmluZywgYXJncz86IHN0cmluZ1tdKSB7XG4gIGlmIChhcmdzKSB7XG4gICAgcmV0dXJuIFtjb21tYW5kLCAuLi5hcmdzXTtcbiAgfVxuICBjb25zdCB0b2tlbnM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgdG9rZW4gb2YgY29tbWFuZC50cmltKCkuc3BsaXQoU1BBQ0VTX1JFR0VYUCkpIHtcbiAgICAvLyBBbGxvdyBzcGFjZXMgdG8gYmUgZXNjYXBlZCBieSBhIGJhY2tzbGFzaCBpZiBub3QgbWVhbnQgYXMgYSBkZWxpbWl0ZXJcbiAgICBjb25zdCBwcmV2aW91c1Rva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICBpZiAocHJldmlvdXNUb2tlbiAmJiBwcmV2aW91c1Rva2VuLmVuZHNXaXRoKFwiXFxcXFwiKSkge1xuICAgICAgLy8gTWVyZ2UgcHJldmlvdXMgdG9rZW4gd2l0aCBjdXJyZW50IG9uZVxuICAgICAgdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXSA9IGAke3ByZXZpb3VzVG9rZW4uc2xpY2UoMCwgLTEpfSAke3Rva2VufWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG50eXBlIEV4ZWNDYWNoZWRQcm9taXNlT3B0aW9uczxULCBVPiA9IE9taXQ8XG4gIENhY2hlZFByb21pc2VPcHRpb25zPFxuICAgIChfY29tbWFuZDogc3RyaW5nLCBfYXJnczogc3RyaW5nW10sIF9vcHRpb25zPzogRXhlY09wdGlvbnMsIGlucHV0Pzogc3RyaW5nIHwgQnVmZmVyKSA9PiBQcm9taXNlPFQ+LFxuICAgIFVcbiAgPixcbiAgXCJhYm9ydGFibGVcIlxuPjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhIGNvbW1hbmQgYW5kIHJldHVybnMgdGhlIHtAbGluayBBc3luY1N0YXRlfSBjb3JyZXNwb25kaW5nIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmQuIFRoZSBsYXN0IHZhbHVlIHdpbGwgYmUga2VwdCBiZXR3ZWVuIGNvbW1hbmQgcnVucy5cbiAqXG4gKiBAcmVtYXJrIFdoZW4gc3BlY2lmeWluZyB0aGUgYXJndW1lbnRzIHZpYSB0aGUgYGNvbW1hbmRgIHN0cmluZywgaWYgdGhlIGZpbGUgb3IgYW4gYXJndW1lbnQgb2YgdGhlIGNvbW1hbmQgY29udGFpbnMgc3BhY2VzLCB0aGV5IG11c3QgYmUgZXNjYXBlZCB3aXRoIGJhY2tzbGFzaGVzLiBUaGlzIG1hdHRlcnMgZXNwZWNpYWxseSBpZiBgY29tbWFuZGAgaXMgbm90IGEgY29uc3RhbnQgYnV0IGEgdmFyaWFibGUsIGZvciBleGFtcGxlIHdpdGggYF9fZGlybmFtZWAgb3IgYHByb2Nlc3MuY3dkKClgLiBFeGNlcHQgZm9yIHNwYWNlcywgbm8gZXNjYXBpbmcvcXVvdGluZyBpcyBuZWVkZWQuXG4gKlxuICogVGhlIGBzaGVsbGAgb3B0aW9uIG11c3QgYmUgdXNlZCBpZiB0aGUgY29tbWFuZCB1c2VzIHNoZWxsLXNwZWNpZmljIGZlYXR1cmVzIChmb3IgZXhhbXBsZSwgYCYmYCBvciBgfHxgKSwgYXMgb3Bwb3NlZCB0byBiZWluZyBhIHNpbXBsZSBmaWxlIGZvbGxvd2VkIGJ5IGl0cyBhcmd1bWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgdXNlRXhlYyB9IGZyb20gJ0ByYXljYXN0L3V0aWxzJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcmV2YWxpZGF0ZSB9ID0gdXNlRXhlYyhcImJyZXdcIiwgW1wiaW5mb1wiLCBcIi0tanNvbj12MlwiLCBcIi0taW5zdGFsbGVkXCJdKTtcbiAqICAgY29uc3QgcmVzdWx0cyA9IHVzZU1lbW88e31bXT4oKCkgPT4gSlNPTi5wYXJzZShkYXRhIHx8IFwiW11cIiksIFtkYXRhXSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAqICAgICAgeyhkYXRhIHx8IFtdKS5tYXAoKGl0ZW0pID0+IChcbiAqICAgICAgICA8TGlzdC5JdGVtIGtleT17aXRlbS5pZH0gdGl0bGU9e2l0ZW0ubmFtZX0gLz5cbiAqICAgICAgKSl9XG4gKiAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VFeGVjPFQgPSBCdWZmZXIsIFUgPSB1bmRlZmluZWQ+KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgQnVmZmVyLCBFeGVjT3B0aW9ucz47XG4gIH0gJiBFeGVjT3B0aW9ucyAmIHtcbiAgICAgIGVuY29kaW5nOiBcImJ1ZmZlclwiO1xuICAgIH0gJiBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VFeGVjPFQgPSBzdHJpbmcsIFUgPSB1bmRlZmluZWQ+KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7XG4gICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIHN0cmluZywgRXhlY09wdGlvbnM+O1xuICB9ICYgRXhlY09wdGlvbnMgJiB7XG4gICAgICBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nO1xuICAgIH0gJiBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VFeGVjPFQgPSBCdWZmZXIsIFUgPSB1bmRlZmluZWQ+KFxuICBmaWxlOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIGZpbGUuIE5vIGVzY2FwaW5nL3F1b3RpbmcgaXMgbmVlZGVkLlxuICAgKlxuICAgKiBJZiBkZWZpbmVkLCB0aGUgY29tbWFuZHMgbmVlZHMgdG8gYmUgYSBmaWxlIHRvIGV4ZWN1dGUuIElmIHVuZGVmaW5lZCwgdGhlIGFyZ3VtZW50cyB3aWxsIGJlIHBhcnNlZCBmcm9tIHRoZSBjb21tYW5kLlxuICAgKi9cbiAgYXJnczogc3RyaW5nW10sXG4gIG9wdGlvbnM6IHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgQnVmZmVyLCBFeGVjT3B0aW9ucz47XG4gIH0gJiBFeGVjT3B0aW9ucyAmIHtcbiAgICAgIGVuY29kaW5nOiBcImJ1ZmZlclwiO1xuICAgIH0gJiBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VFeGVjPFQgPSBzdHJpbmcsIFUgPSB1bmRlZmluZWQ+KFxuICBmaWxlOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIGZpbGUuIE5vIGVzY2FwaW5nL3F1b3RpbmcgaXMgbmVlZGVkLlxuICAgKlxuICAgKiBJZiBkZWZpbmVkLCB0aGUgY29tbWFuZHMgbmVlZHMgdG8gYmUgYSBmaWxlIHRvIGV4ZWN1dGUuIElmIHVuZGVmaW5lZCwgdGhlIGFyZ3VtZW50cyB3aWxsIGJlIHBhcnNlZCBmcm9tIHRoZSBjb21tYW5kLlxuICAgKi9cbiAgYXJnczogc3RyaW5nW10sXG4gIG9wdGlvbnM/OiB7XG4gICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIHN0cmluZywgRXhlY09wdGlvbnM+O1xuICB9ICYgRXhlY09wdGlvbnMgJiB7XG4gICAgICBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nO1xuICAgIH0gJiBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4sXG4pOiBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZTxULCBVPjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VFeGVjPFQsIFUgPSB1bmRlZmluZWQ+KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIG9wdGlvbnNPckFyZ3M/OlxuICAgIHwgc3RyaW5nW11cbiAgICB8ICh7XG4gICAgICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBCdWZmZXIsIEV4ZWNPcHRpb25zPiB8IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBFeGVjT3B0aW9ucz47XG4gICAgICB9ICYgRXhlY09wdGlvbnMgJlxuICAgICAgICBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4pLFxuICBvcHRpb25zPzoge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBCdWZmZXIsIEV4ZWNPcHRpb25zPiB8IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBFeGVjT3B0aW9ucz47XG4gIH0gJiBFeGVjT3B0aW9ucyAmXG4gICAgRXhlY0NhY2hlZFByb21pc2VPcHRpb25zPFQsIFU+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCwgVT4ge1xuICBjb25zdCB7XG4gICAgcGFyc2VPdXRwdXQsXG4gICAgaW5wdXQsXG4gICAgb25EYXRhLFxuICAgIG9uV2lsbEV4ZWN1dGUsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgZXhlY3V0ZSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIG9uRXJyb3IsXG4gICAgZmFpbHVyZVRvYXN0T3B0aW9ucyxcbiAgICAuLi5leGVjT3B0aW9uc1xuICB9ID0gQXJyYXkuaXNBcnJheShvcHRpb25zT3JBcmdzKSA/IG9wdGlvbnMgfHwge30gOiBvcHRpb25zT3JBcmdzIHx8IHt9O1xuXG4gIGNvbnN0IHVzZUNhY2hlZFByb21pc2VPcHRpb25zOiBFeGVjQ2FjaGVkUHJvbWlzZU9wdGlvbnM8VCwgVT4gPSB7XG4gICAgaW5pdGlhbERhdGEsXG4gICAgZXhlY3V0ZSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIG9uRXJyb3IsXG4gICAgb25EYXRhLFxuICAgIG9uV2lsbEV4ZWN1dGUsXG4gICAgZmFpbHVyZVRvYXN0T3B0aW9ucyxcbiAgfTtcblxuICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPihudWxsKTtcbiAgY29uc3QgcGFyc2VPdXRwdXRSZWYgPSB1c2VMYXRlc3QocGFyc2VPdXRwdXQgfHwgZGVmYXVsdFBhcnNpbmcpO1xuXG4gIGNvbnN0IGZuID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKF9jb21tYW5kOiBzdHJpbmcsIF9hcmdzOiBzdHJpbmdbXSwgX29wdGlvbnM/OiBFeGVjT3B0aW9ucywgaW5wdXQ/OiBzdHJpbmcgfCBCdWZmZXIpID0+IHtcbiAgICAgIGNvbnN0IFtmaWxlLCAuLi5hcmdzXSA9IHBhcnNlQ29tbWFuZChfY29tbWFuZCwgX2FyZ3MpO1xuICAgICAgY29uc3QgY29tbWFuZCA9IFtmaWxlLCAuLi5hcmdzXS5qb2luKFwiIFwiKTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RyaXBGaW5hbE5ld2xpbmU6IHRydWUsXG4gICAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgICB0aW1lb3V0OiBfb3B0aW9ucz8udGltZW91dCB8fCAxMDAwMCxcbiAgICAgICAgc2lnbmFsOiBhYm9ydGFibGUuY3VycmVudD8uc2lnbmFsLFxuICAgICAgICBlbmNvZGluZzogX29wdGlvbnM/LmVuY29kaW5nID09PSBudWxsID8gXCJidWZmZXJcIiA6IF9vcHRpb25zPy5lbmNvZGluZyB8fCBcInV0ZjhcIixcbiAgICAgICAgZW52OiB7IFBBVEg6IFwiL3Vzci9sb2NhbC9iaW46L3Vzci9iaW46L2JpbjovdXNyL3NiaW46L3NiaW5cIiwgLi4ucHJvY2Vzcy5lbnYsIC4uLl9vcHRpb25zPy5lbnYgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNwYXduZWQgPSBjaGlsZFByb2Nlc3Muc3Bhd24oZmlsZSwgYXJncywgb3B0aW9ucyk7XG4gICAgICBjb25zdCBzcGF3bmVkUHJvbWlzZSA9IGdldFNwYXduZWRQcm9taXNlKHNwYXduZWQsIG9wdGlvbnMpO1xuXG4gICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgc3Bhd25lZC5zdGRpbi5lbmQoaW5wdXQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBbeyBlcnJvciwgZXhpdENvZGUsIHNpZ25hbCwgdGltZWRPdXQgfSwgc3Rkb3V0UmVzdWx0LCBzdGRlcnJSZXN1bHRdID0gYXdhaXQgZ2V0U3Bhd25lZFJlc3VsdChcbiAgICAgICAgc3Bhd25lZCxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgc3Bhd25lZFByb21pc2UsXG4gICAgICApO1xuICAgICAgY29uc3Qgc3Rkb3V0ID0gaGFuZGxlT3V0cHV0KG9wdGlvbnMsIHN0ZG91dFJlc3VsdCk7XG4gICAgICBjb25zdCBzdGRlcnIgPSBoYW5kbGVPdXRwdXQob3B0aW9ucywgc3RkZXJyUmVzdWx0KTtcblxuICAgICAgcmV0dXJuIHBhcnNlT3V0cHV0UmVmLmN1cnJlbnQoe1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRvbyBtYW55IGdlbmVyaWNzLCBJIGdpdmUgdXBcbiAgICAgICAgc3Rkb3V0LFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRvbyBtYW55IGdlbmVyaWNzLCBJIGdpdmUgdXBcbiAgICAgICAgc3RkZXJyLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgZXhpdENvZGUsXG4gICAgICAgIHNpZ25hbCxcbiAgICAgICAgdGltZWRPdXQsXG4gICAgICAgIGNvbW1hbmQsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHBhcmVudEVycm9yOiBuZXcgRXJyb3IoKSxcbiAgICAgIH0pIGFzIFQ7XG4gICAgfSxcbiAgICBbcGFyc2VPdXRwdXRSZWZdLFxuICApO1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgVCBjYW4ndCBiZSBhIFByb21pc2Ugc28gaXQncyBhY3R1YWxseSB0aGUgc2FtZVxuICByZXR1cm4gdXNlQ2FjaGVkUHJvbWlzZShmbiwgW2NvbW1hbmQsIEFycmF5LmlzQXJyYXkob3B0aW9uc09yQXJncykgPyBvcHRpb25zT3JBcmdzIDogW10sIGV4ZWNPcHRpb25zLCBpbnB1dF0sIHtcbiAgICAuLi51c2VDYWNoZWRQcm9taXNlT3B0aW9ucyxcbiAgICBhYm9ydGFibGUsXG4gIH0pO1xufVxuIiwgImltcG9ydCBjaGlsZFByb2Nlc3MgZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgY29uc3RhbnRzIGFzIEJ1ZmZlckNvbnN0YW50cyB9IGZyb20gXCJub2RlOmJ1ZmZlclwiO1xuaW1wb3J0IFN0cmVhbSBmcm9tIFwibm9kZTpzdHJlYW1cIjtcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gXCJub2RlOnV0aWxcIjtcbmltcG9ydCB7IG9uRXhpdCB9IGZyb20gXCIuL3ZlbmRvcnMvc2lnbmFsLWV4aXRcIjtcblxuZXhwb3J0IHR5cGUgU3Bhd25lZFByb21pc2UgPSBQcm9taXNlPHtcbiAgZXhpdENvZGU6IG51bWJlciB8IG51bGw7XG4gIGVycm9yPzogRXJyb3I7XG4gIHNpZ25hbDogTm9kZUpTLlNpZ25hbHMgfCBudWxsO1xuICB0aW1lZE91dDogYm9vbGVhbjtcbn0+O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3Bhd25lZFByb21pc2UoXG4gIHNwYXduZWQ6IGNoaWxkUHJvY2Vzcy5DaGlsZFByb2Nlc3NXaXRob3V0TnVsbFN0cmVhbXMsXG4gIHsgdGltZW91dCB9OiB7IHRpbWVvdXQ/OiBudW1iZXIgfSA9IHt9LFxuKTogU3Bhd25lZFByb21pc2Uge1xuICBjb25zdCBzcGF3bmVkUHJvbWlzZTogU3Bhd25lZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc3Bhd25lZC5vbihcImV4aXRcIiwgKGV4aXRDb2RlLCBzaWduYWwpID0+IHtcbiAgICAgIHJlc29sdmUoeyBleGl0Q29kZSwgc2lnbmFsLCB0aW1lZE91dDogZmFsc2UgfSk7XG4gICAgfSk7XG5cbiAgICBzcGF3bmVkLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaWYgKHNwYXduZWQuc3RkaW4pIHtcbiAgICAgIHNwYXduZWQuc3RkaW4ub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgcmVtb3ZlRXhpdEhhbmRsZXIgPSBvbkV4aXQoKCkgPT4ge1xuICAgIHNwYXduZWQua2lsbCgpO1xuICB9KTtcblxuICBpZiAodGltZW91dCA9PT0gMCB8fCB0aW1lb3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gc3Bhd25lZFByb21pc2UuZmluYWxseSgoKSA9PiByZW1vdmVFeGl0SGFuZGxlcigpKTtcbiAgfVxuXG4gIGxldCB0aW1lb3V0SWQ6IE5vZGVKUy5UaW1lb3V0O1xuICBjb25zdCB0aW1lb3V0UHJvbWlzZTogU3Bhd25lZFByb21pc2UgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc3Bhd25lZC5raWxsKFwiU0lHVEVSTVwiKTtcbiAgICAgIHJlamVjdChPYmplY3QuYXNzaWduKG5ldyBFcnJvcihcIlRpbWVkIG91dFwiKSwgeyB0aW1lZE91dDogdHJ1ZSwgc2lnbmFsOiBcIlNJR1RFUk1cIiB9KSk7XG4gICAgfSwgdGltZW91dCk7XG4gIH0pO1xuXG4gIGNvbnN0IHNhZmVTcGF3bmVkUHJvbWlzZSA9IHNwYXduZWRQcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICB9KTtcblxuICByZXR1cm4gUHJvbWlzZS5yYWNlKFt0aW1lb3V0UHJvbWlzZSwgc2FmZVNwYXduZWRQcm9taXNlXSkuZmluYWxseSgoKSA9PiByZW1vdmVFeGl0SGFuZGxlcigpKTtcbn1cblxuY2xhc3MgTWF4QnVmZmVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiVGhlIG91dHB1dCBpcyB0b28gYmlnXCIpO1xuICAgIHRoaXMubmFtZSA9IFwiTWF4QnVmZmVyRXJyb3JcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBidWZmZXJTdHJlYW08VCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlcj4ob3B0aW9uczogeyBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgfCBcImJ1ZmZlclwiIH0pIHtcbiAgY29uc3QgeyBlbmNvZGluZyB9ID0gb3B0aW9ucztcbiAgY29uc3QgaXNCdWZmZXIgPSBlbmNvZGluZyA9PT0gXCJidWZmZXJcIjtcblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIG1pc3NpbmcgdGhlIG1ldGhvZHMgd2UgYXJlIGFkZGluZyBiZWxvd1xuICBjb25zdCBzdHJlYW06IFN0cmVhbS5QYXNzVGhyb3VnaCAmIHsgZ2V0QnVmZmVyZWRWYWx1ZTogKCkgPT4gVDsgZ2V0QnVmZmVyZWRMZW5ndGg6ICgpID0+IG51bWJlciB9ID1cbiAgICBuZXcgU3RyZWFtLlBhc3NUaHJvdWdoKHsgb2JqZWN0TW9kZTogZmFsc2UgfSk7XG5cbiAgaWYgKGVuY29kaW5nICYmIGVuY29kaW5nICE9PSBcImJ1ZmZlclwiKSB7XG4gICAgc3RyZWFtLnNldEVuY29kaW5nKGVuY29kaW5nKTtcbiAgfVxuXG4gIGxldCBsZW5ndGggPSAwO1xuICBjb25zdCBjaHVua3M6IGFueVtdID0gW107XG5cbiAgc3RyZWFtLm9uKFwiZGF0YVwiLCAoY2h1bmspID0+IHtcbiAgICBjaHVua3MucHVzaChjaHVuayk7XG5cbiAgICBsZW5ndGggKz0gY2h1bmsubGVuZ3RoO1xuICB9KTtcblxuICBzdHJlYW0uZ2V0QnVmZmVyZWRWYWx1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gKGlzQnVmZmVyID8gQnVmZmVyLmNvbmNhdChjaHVua3MsIGxlbmd0aCkgOiBjaHVua3Muam9pbihcIlwiKSkgYXMgVDtcbiAgfTtcblxuICBzdHJlYW0uZ2V0QnVmZmVyZWRMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG5cbiAgcmV0dXJuIHN0cmVhbTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0U3RyZWFtPFQgZXh0ZW5kcyBzdHJpbmcgfCBCdWZmZXI+KFxuICBpbnB1dFN0cmVhbTogU3RyZWFtLlJlYWRhYmxlLFxuICBvcHRpb25zOiB7IGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IFwiYnVmZmVyXCIgfSxcbikge1xuICBjb25zdCBzdHJlYW0gPSBidWZmZXJTdHJlYW08VD4ob3B0aW9ucyk7XG5cbiAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlamVjdFByb21pc2UgPSAoZXJyb3I6IEVycm9yICYgeyBidWZmZXJlZERhdGE/OiBUIH0pID0+IHtcbiAgICAgIC8vIERvbid0IHJldHJpZXZlIGFuIG92ZXJzaXplZCBidWZmZXIuXG4gICAgICBpZiAoZXJyb3IgJiYgc3RyZWFtLmdldEJ1ZmZlcmVkTGVuZ3RoKCkgPD0gQnVmZmVyQ29uc3RhbnRzLk1BWF9MRU5HVEgpIHtcbiAgICAgICAgZXJyb3IuYnVmZmVyZWREYXRhID0gc3RyZWFtLmdldEJ1ZmZlcmVkVmFsdWUoKTtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICB9O1xuXG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHByb21pc2lmeShTdHJlYW0ucGlwZWxpbmUpKGlucHV0U3RyZWFtLCBzdHJlYW0pO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3RQcm9taXNlKGVycm9yIGFzIGFueSk7XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIHN0cmVhbS5vbihcImRhdGFcIiwgKCkgPT4ge1xuICAgICAgLy8gODBtYlxuICAgICAgaWYgKHN0cmVhbS5nZXRCdWZmZXJlZExlbmd0aCgpID4gMTAwMCAqIDEwMDAgKiA4MCkge1xuICAgICAgICByZWplY3RQcm9taXNlKG5ldyBNYXhCdWZmZXJFcnJvcigpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHN0cmVhbS5nZXRCdWZmZXJlZFZhbHVlKCk7XG59XG5cbi8vIE9uIGZhaWx1cmUsIGByZXN1bHQuc3Rkb3V0fHN0ZGVycmAgc2hvdWxkIGNvbnRhaW4gdGhlIGN1cnJlbnRseSBidWZmZXJlZCBzdHJlYW1cbmFzeW5jIGZ1bmN0aW9uIGdldEJ1ZmZlcmVkRGF0YTxUIGV4dGVuZHMgc3RyaW5nIHwgQnVmZmVyPihzdHJlYW06IFN0cmVhbS5SZWFkYWJsZSwgc3RyZWFtUHJvbWlzZTogUHJvbWlzZTxUPikge1xuICBzdHJlYW0uZGVzdHJveSgpO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHN0cmVhbVByb21pc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIChlcnJvciBhcyBhbnkgYXMgeyBidWZmZXJlZERhdGE6IFQgfSkuYnVmZmVyZWREYXRhO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTcGF3bmVkUmVzdWx0PFQgZXh0ZW5kcyBzdHJpbmcgfCBCdWZmZXI+KFxuICB7IHN0ZG91dCwgc3RkZXJyIH06IGNoaWxkUHJvY2Vzcy5DaGlsZFByb2Nlc3NXaXRob3V0TnVsbFN0cmVhbXMsXG4gIHsgZW5jb2RpbmcgfTogeyBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgfCBcImJ1ZmZlclwiIH0sXG4gIHByb2Nlc3NEb25lOiBTcGF3bmVkUHJvbWlzZSxcbikge1xuICBjb25zdCBzdGRvdXRQcm9taXNlID0gZ2V0U3RyZWFtPFQ+KHN0ZG91dCwgeyBlbmNvZGluZyB9KTtcbiAgY29uc3Qgc3RkZXJyUHJvbWlzZSA9IGdldFN0cmVhbTxUPihzdGRlcnIsIHsgZW5jb2RpbmcgfSk7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoW3Byb2Nlc3NEb25lLCBzdGRvdXRQcm9taXNlLCBzdGRlcnJQcm9taXNlXSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAge1xuICAgICAgICBlcnJvcjogZXJyb3IgYXMgRXJyb3IsXG4gICAgICAgIGV4aXRDb2RlOiBudWxsLFxuICAgICAgICBzaWduYWw6IGVycm9yLnNpZ25hbCBhcyBOb2RlSlMuU2lnbmFscyB8IG51bGwsXG4gICAgICAgIHRpbWVkT3V0OiAoZXJyb3IudGltZWRPdXQgYXMgYm9vbGVhbikgfHwgZmFsc2UsXG4gICAgICB9LFxuICAgICAgZ2V0QnVmZmVyZWREYXRhKHN0ZG91dCwgc3Rkb3V0UHJvbWlzZSksXG4gICAgICBnZXRCdWZmZXJlZERhdGEoc3RkZXJyLCBzdGRlcnJQcm9taXNlKSxcbiAgICBdKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdHJpcEZpbmFsTmV3bGluZTxUIGV4dGVuZHMgc3RyaW5nIHwgQnVmZmVyPihpbnB1dDogVCkge1xuICBjb25zdCBMRiA9IHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIiA/IFwiXFxuXCIgOiBcIlxcblwiLmNoYXJDb2RlQXQoMCk7XG4gIGNvbnN0IENSID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gXCJcXHJcIiA6IFwiXFxyXCIuY2hhckNvZGVBdCgwKTtcblxuICBpZiAoaW5wdXRbaW5wdXQubGVuZ3RoIC0gMV0gPT09IExGKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3ZSBhcmUgZG9pbmcgc29tZSBuYXN0eSBzdHVmZiBoZXJlXG4gICAgaW5wdXQgPSBpbnB1dC5zbGljZSgwLCAtMSk7XG4gIH1cblxuICBpZiAoaW5wdXRbaW5wdXQubGVuZ3RoIC0gMV0gPT09IENSKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3ZSBhcmUgZG9pbmcgc29tZSBuYXN0eSBzdHVmZiBoZXJlXG4gICAgaW5wdXQgPSBpbnB1dC5zbGljZSgwLCAtMSk7XG4gIH1cblxuICByZXR1cm4gaW5wdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVPdXRwdXQ8VCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlcj4ob3B0aW9uczogeyBzdHJpcEZpbmFsTmV3bGluZT86IGJvb2xlYW4gfSwgdmFsdWU6IFQpIHtcbiAgaWYgKG9wdGlvbnMuc3RyaXBGaW5hbE5ld2xpbmUpIHtcbiAgICByZXR1cm4gc3RyaXBGaW5hbE5ld2xpbmUodmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBnZXRFcnJvclByZWZpeCh7XG4gIHRpbWVkT3V0LFxuICB0aW1lb3V0LFxuICBzaWduYWwsXG4gIGV4aXRDb2RlLFxufToge1xuICBleGl0Q29kZTogbnVtYmVyIHwgbnVsbDtcbiAgc2lnbmFsOiBOb2RlSlMuU2lnbmFscyB8IG51bGw7XG4gIHRpbWVkT3V0OiBib29sZWFuO1xuICB0aW1lb3V0PzogbnVtYmVyO1xufSkge1xuICBpZiAodGltZWRPdXQpIHtcbiAgICByZXR1cm4gYHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9IG1pbGxpc2Vjb25kc2A7XG4gIH1cblxuICBpZiAoc2lnbmFsICE9PSB1bmRlZmluZWQgJiYgc2lnbmFsICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGB3YXMga2lsbGVkIHdpdGggJHtzaWduYWx9YDtcbiAgfVxuXG4gIGlmIChleGl0Q29kZSAhPT0gdW5kZWZpbmVkICYmIGV4aXRDb2RlICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGBmYWlsZWQgd2l0aCBleGl0IGNvZGUgJHtleGl0Q29kZX1gO1xuICB9XG5cbiAgcmV0dXJuIFwiZmFpbGVkXCI7XG59XG5cbmZ1bmN0aW9uIG1ha2VFcnJvcih7XG4gIHN0ZG91dCxcbiAgc3RkZXJyLFxuICBlcnJvcixcbiAgc2lnbmFsLFxuICBleGl0Q29kZSxcbiAgY29tbWFuZCxcbiAgdGltZWRPdXQsXG4gIG9wdGlvbnMsXG4gIHBhcmVudEVycm9yLFxufToge1xuICBzdGRvdXQ6IHN0cmluZyB8IEJ1ZmZlcjtcbiAgc3RkZXJyOiBzdHJpbmcgfCBCdWZmZXI7XG4gIGVycm9yPzogRXJyb3I7XG4gIGV4aXRDb2RlOiBudW1iZXIgfCBudWxsO1xuICBzaWduYWw6IE5vZGVKUy5TaWduYWxzIHwgbnVsbDtcbiAgdGltZWRPdXQ6IGJvb2xlYW47XG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgb3B0aW9ucz86IHsgdGltZW91dD86IG51bWJlciB9O1xuICBwYXJlbnRFcnJvcjogRXJyb3I7XG59KSB7XG4gIGNvbnN0IHByZWZpeCA9IGdldEVycm9yUHJlZml4KHsgdGltZWRPdXQsIHRpbWVvdXQ6IG9wdGlvbnM/LnRpbWVvdXQsIHNpZ25hbCwgZXhpdENvZGUgfSk7XG4gIGNvbnN0IGV4ZWNhTWVzc2FnZSA9IGBDb21tYW5kICR7cHJlZml4fTogJHtjb21tYW5kfWA7XG4gIGNvbnN0IHNob3J0TWVzc2FnZSA9IGVycm9yID8gYCR7ZXhlY2FNZXNzYWdlfVxcbiR7ZXJyb3IubWVzc2FnZX1gIDogZXhlY2FNZXNzYWdlO1xuICBjb25zdCBtZXNzYWdlID0gW3Nob3J0TWVzc2FnZSwgc3RkZXJyLCBzdGRvdXRdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igbm90IG9uIEVycm9yXG4gICAgZXJyb3Iub3JpZ2luYWxNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgfSBlbHNlIHtcbiAgICBlcnJvciA9IHBhcmVudEVycm9yO1xuICB9XG5cbiAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3Qgb24gRXJyb3JcbiAgZXJyb3Iuc2hvcnRNZXNzYWdlID0gc2hvcnRNZXNzYWdlO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBvbiBFcnJvclxuICBlcnJvci5jb21tYW5kID0gY29tbWFuZDtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3Qgb24gRXJyb3JcbiAgZXJyb3IuZXhpdENvZGUgPSBleGl0Q29kZTtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3Qgb24gRXJyb3JcbiAgZXJyb3Iuc2lnbmFsID0gc2lnbmFsO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBvbiBFcnJvclxuICBlcnJvci5zdGRvdXQgPSBzdGRvdXQ7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3Igbm90IG9uIEVycm9yXG4gIGVycm9yLnN0ZGVyciA9IHN0ZGVycjtcblxuICBpZiAoXCJidWZmZXJlZERhdGFcIiBpbiBlcnJvcikge1xuICAgIGRlbGV0ZSBlcnJvcltcImJ1ZmZlcmVkRGF0YVwiXTtcbiAgfVxuXG4gIHJldHVybiBlcnJvcjtcbn1cblxuZXhwb3J0IHR5cGUgUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxcbiAgVCxcbiAgRGVjb2RlZE91dHB1dCBleHRlbmRzIHN0cmluZyB8IEJ1ZmZlciA9IHN0cmluZyB8IEJ1ZmZlcixcbiAgT3B0aW9ucyA9IHVua25vd24sXG4+ID0gKGFyZ3M6IHtcbiAgLyoqIFRoZSBvdXRwdXQgb2YgdGhlIHByb2Nlc3Mgb24gc3Rkb3V0LiAqL1xuICBzdGRvdXQ6IERlY29kZWRPdXRwdXQ7XG4gIC8qKiBUaGUgb3V0cHV0IG9mIHRoZSBwcm9jZXNzIG9uIHN0ZGVyci4gKi9cbiAgc3RkZXJyOiBEZWNvZGVkT3V0cHV0O1xuICBlcnJvcj86IEVycm9yO1xuICAvKiogVGhlIG51bWVyaWMgZXhpdCBjb2RlIG9mIHRoZSBwcm9jZXNzIHRoYXQgd2FzIHJ1bi4gKi9cbiAgZXhpdENvZGU6IG51bWJlciB8IG51bGw7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgc2lnbmFsIHRoYXQgd2FzIHVzZWQgdG8gdGVybWluYXRlIHRoZSBwcm9jZXNzLiBGb3IgZXhhbXBsZSwgU0lHRlBFLlxuICAgKlxuICAgKiBJZiBhIHNpZ25hbCB0ZXJtaW5hdGVkIHRoZSBwcm9jZXNzLCB0aGlzIHByb3BlcnR5IGlzIGRlZmluZWQuIE90aGVyd2lzZSBpdCBpcyBudWxsLlxuICAgKi9cbiAgc2lnbmFsOiBOb2RlSlMuU2lnbmFscyB8IG51bGw7XG4gIC8qKiBXaGV0aGVyIHRoZSBwcm9jZXNzIHRpbWVkIG91dC4gKi9cbiAgdGltZWRPdXQ6IGJvb2xlYW47XG4gIC8qKiBUaGUgY29tbWFuZCB0aGF0IHdhcyBydW4sIGZvciBsb2dnaW5nIHB1cnBvc2VzLiAqL1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIG9wdGlvbnM/OiBPcHRpb25zO1xufSkgPT4gVDtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQYXJzaW5nPFQgZXh0ZW5kcyBzdHJpbmcgfCBCdWZmZXI+KHtcbiAgc3Rkb3V0LFxuICBzdGRlcnIsXG4gIGVycm9yLFxuICBleGl0Q29kZSxcbiAgc2lnbmFsLFxuICB0aW1lZE91dCxcbiAgY29tbWFuZCxcbiAgb3B0aW9ucyxcbiAgcGFyZW50RXJyb3IsXG59OiB7XG4gIHN0ZG91dDogVDtcbiAgc3RkZXJyOiBUO1xuICBlcnJvcj86IEVycm9yO1xuICBleGl0Q29kZTogbnVtYmVyIHwgbnVsbDtcbiAgc2lnbmFsOiBOb2RlSlMuU2lnbmFscyB8IG51bGw7XG4gIHRpbWVkT3V0OiBib29sZWFuO1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIG9wdGlvbnM/OiB7IHRpbWVvdXQ/OiBudW1iZXIgfTtcbiAgcGFyZW50RXJyb3I6IEVycm9yO1xufSkge1xuICBpZiAoZXJyb3IgfHwgZXhpdENvZGUgIT09IDAgfHwgc2lnbmFsICE9PSBudWxsKSB7XG4gICAgY29uc3QgcmV0dXJuZWRFcnJvciA9IG1ha2VFcnJvcih7XG4gICAgICBlcnJvcixcbiAgICAgIGV4aXRDb2RlLFxuICAgICAgc2lnbmFsLFxuICAgICAgc3Rkb3V0LFxuICAgICAgc3RkZXJyLFxuICAgICAgY29tbWFuZCxcbiAgICAgIHRpbWVkT3V0LFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHBhcmVudEVycm9yLFxuICAgIH0pO1xuXG4gICAgdGhyb3cgcmV0dXJuZWRFcnJvcjtcbiAgfVxuXG4gIHJldHVybiBzdGRvdXQ7XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG4vLyBOb3RlOiBzaW5jZSBueWMgdXNlcyB0aGlzIG1vZHVsZSB0byBvdXRwdXQgY292ZXJhZ2UsIGFueSBsaW5lc1xuLy8gdGhhdCBhcmUgaW4gdGhlIGRpcmVjdCBzeW5jIGZsb3cgb2YgbnljJ3Mgb3V0cHV0Q292ZXJhZ2UgYXJlXG4vLyBpZ25vcmVkLCBzaW5jZSB3ZSBjYW4gbmV2ZXIgZ2V0IGNvdmVyYWdlIGZvciB0aGVtLlxuLy8gZ3JhYiBhIHJlZmVyZW5jZSB0byBub2RlJ3MgcmVhbCBwcm9jZXNzIG9iamVjdCByaWdodCBhd2F5XG5cbmNvbnN0IHByb2Nlc3NPayA9IChwcm9jZXNzOiBhbnkpID0+XG4gICEhcHJvY2VzcyAmJlxuICB0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiICYmXG4gIHR5cGVvZiBwcm9jZXNzLmVtaXQgPT09IFwiZnVuY3Rpb25cIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5yZWFsbHlFeGl0ID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIHByb2Nlc3MubGlzdGVuZXJzID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIHByb2Nlc3Mua2lsbCA9PT0gXCJmdW5jdGlvblwiICYmXG4gIHR5cGVvZiBwcm9jZXNzLnBpZCA9PT0gXCJudW1iZXJcIiAmJlxuICB0eXBlb2YgcHJvY2Vzcy5vbiA9PT0gXCJmdW5jdGlvblwiO1xuY29uc3Qga0V4aXRFbWl0dGVyID0gLyogI19fUFVSRV9fICovIFN5bWJvbC5mb3IoXCJzaWduYWwtZXhpdCBlbWl0dGVyXCIpO1xuLy8gdGVlbnkgc3BlY2lhbCBwdXJwb3NlIGVlXG5jbGFzcyBFbWl0dGVyIHtcbiAgZW1pdHRlZCA9IHtcbiAgICBhZnRlckV4aXQ6IGZhbHNlLFxuICAgIGV4aXQ6IGZhbHNlLFxuICB9O1xuICBsaXN0ZW5lcnMgPSB7XG4gICAgYWZ0ZXJFeGl0OiBbXSxcbiAgICBleGl0OiBbXSxcbiAgfTtcbiAgY291bnQgPSAwO1xuICBpZCA9IE1hdGgucmFuZG9tKCk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoZ2xvYmFsW2tFeGl0RW1pdHRlcl0pIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHJldHVybiBnbG9iYWxba0V4aXRFbWl0dGVyXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwga0V4aXRFbWl0dGVyLCB7XG4gICAgICB2YWx1ZTogdGhpcyxcbiAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB9KTtcbiAgfVxuICBvbihldjogYW55LCBmbjogYW55KSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHRoaXMubGlzdGVuZXJzW2V2XS5wdXNoKGZuKTtcbiAgfVxuICByZW1vdmVMaXN0ZW5lcihldjogYW55LCBmbjogYW55KSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGxpc3QgPSB0aGlzLmxpc3RlbmVyc1tldl07XG4gICAgY29uc3QgaSA9IGxpc3QuaW5kZXhPZihmbik7XG4gICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgaWYgKGkgPT09IDAgJiYgbGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG4gIGVtaXQoZXY6IGFueSwgY29kZTogYW55LCBzaWduYWw6IGFueSk6IGFueSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmICh0aGlzLmVtaXR0ZWRbZXZdKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0aGlzLmVtaXR0ZWRbZXZdID0gdHJ1ZTtcbiAgICBsZXQgcmV0ID0gZmFsc2U7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgZm4gb2YgdGhpcy5saXN0ZW5lcnNbZXZdKSB7XG4gICAgICByZXQgPSBmbihjb2RlLCBzaWduYWwpID09PSB0cnVlIHx8IHJldDtcbiAgICB9XG4gICAgaWYgKGV2ID09PSBcImV4aXRcIikge1xuICAgICAgcmV0ID0gdGhpcy5lbWl0KFwiYWZ0ZXJFeGl0XCIsIGNvZGUsIHNpZ25hbCkgfHwgcmV0O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG59XG5cbmNsYXNzIFNpZ25hbEV4aXRGYWxsYmFjayB7XG4gIG9uRXhpdCgpIHtcbiAgICByZXR1cm4gKCkgPT4ge307XG4gIH1cbiAgbG9hZCgpIHt9XG4gIHVubG9hZCgpIHt9XG59XG5jbGFzcyBTaWduYWxFeGl0IHtcbiAgLy8gXCJTSUdIVVBcIiB0aHJvd3MgYW4gYEVOT1NZU2AgZXJyb3Igb24gV2luZG93cyxcbiAgLy8gc28gdXNlIGEgc3VwcG9ydGVkIHNpZ25hbCBpbnN0ZWFkXG4gIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAvLyBAdHMtaWdub3JlXG4gICNodXBTaWcgPSBwcm9jZXNzLnBsYXRmb3JtID09PSBcIndpbjMyXCIgPyBcIlNJR0lOVFwiIDogXCJTSUdIVVBcIjtcbiAgLyogYzggaWdub3JlIHN0b3AgKi9cbiAgI2VtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAjcHJvY2VzczogYW55O1xuICAjb3JpZ2luYWxQcm9jZXNzRW1pdDogYW55O1xuICAjb3JpZ2luYWxQcm9jZXNzUmVhbGx5RXhpdDogYW55O1xuICAjc2lnTGlzdGVuZXJzID0ge307XG4gICNsb2FkZWQgPSBmYWxzZTtcbiAgI3NpZ25hbHM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0cnVjdG9yKHByb2Nlc3M6IGFueSkge1xuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgbm90IHRoZSBzZXQgb2YgYWxsIHBvc3NpYmxlIHNpZ25hbHMuXG4gICAgICpcbiAgICAgKiBJdCBJUywgaG93ZXZlciwgdGhlIHNldCBvZiBhbGwgc2lnbmFscyB0aGF0IHRyaWdnZXJcbiAgICAgKiBhbiBleGl0IG9uIGVpdGhlciBMaW51eCBvciBCU0Qgc3lzdGVtcy4gIExpbnV4IGlzIGFcbiAgICAgKiBzdXBlcnNldCBvZiB0aGUgc2lnbmFsIG5hbWVzIHN1cHBvcnRlZCBvbiBCU0QsIGFuZFxuICAgICAqIHRoZSB1bmtub3duIHNpZ25hbHMganVzdCBmYWlsIHRvIHJlZ2lzdGVyLCBzbyB3ZSBjYW5cbiAgICAgKiBjYXRjaCB0aGF0IGVhc2lseSBlbm91Z2guXG4gICAgICpcbiAgICAgKiBXaW5kb3dzIHNpZ25hbHMgYXJlIGEgZGlmZmVyZW50IHNldCwgc2luY2UgdGhlcmUgYXJlXG4gICAgICogc2lnbmFscyB0aGF0IHRlcm1pbmF0ZSBXaW5kb3dzIHByb2Nlc3NlcywgYnV0IGRvbid0XG4gICAgICogdGVybWluYXRlIChvciBkb24ndCBldmVuIGV4aXN0KSBvbiBQb3NpeCBzeXN0ZW1zLlxuICAgICAqXG4gICAgICogRG9uJ3QgYm90aGVyIHdpdGggU0lHS0lMTC4gIEl0J3MgdW5jYXRjaGFibGUsIHdoaWNoXG4gICAgICogbWVhbnMgdGhhdCB3ZSBjYW4ndCBmaXJlIGFueSBjYWxsYmFja3MgYW55d2F5LlxuICAgICAqXG4gICAgICogSWYgYSB1c2VyIGRvZXMgaGFwcGVuIHRvIHJlZ2lzdGVyIGEgaGFuZGxlciBvbiBhIG5vbi1cbiAgICAgKiBmYXRhbCBzaWduYWwgbGlrZSBTSUdXSU5DSCBvciBzb21ldGhpbmcsIGFuZCB0aGVuXG4gICAgICogZXhpdCwgaXQnbGwgZW5kIHVwIGZpcmluZyBgcHJvY2Vzcy5lbWl0KCdleGl0JylgLCBzb1xuICAgICAqIHRoZSBoYW5kbGVyIHdpbGwgYmUgZmlyZWQgYW55d2F5LlxuICAgICAqXG4gICAgICogU0lHQlVTLCBTSUdGUEUsIFNJR1NFR1YgYW5kIFNJR0lMTCwgd2hlbiBub3QgcmFpc2VkXG4gICAgICogYXJ0aWZpY2lhbGx5LCBpbmhlcmVudGx5IGxlYXZlIHRoZSBwcm9jZXNzIGluIGFcbiAgICAgKiBzdGF0ZSBmcm9tIHdoaWNoIGl0IGlzIG5vdCBzYWZlIHRvIHRyeSBhbmQgZW50ZXIgSlNcbiAgICAgKiBsaXN0ZW5lcnMuXG4gICAgICovXG4gICAgdGhpcy4jc2lnbmFscy5wdXNoKFwiU0lHSFVQXCIsIFwiU0lHSU5UXCIsIFwiU0lHVEVSTVwiKTtcbiAgICBpZiAoZ2xvYmFsVGhpcy5wcm9jZXNzLnBsYXRmb3JtICE9PSBcIndpbjMyXCIpIHtcbiAgICAgIHRoaXMuI3NpZ25hbHMucHVzaChcbiAgICAgICAgXCJTSUdBTFJNXCIsXG4gICAgICAgIFwiU0lHQUJSVFwiLFxuICAgICAgICBcIlNJR1ZUQUxSTVwiLFxuICAgICAgICBcIlNJR1hDUFVcIixcbiAgICAgICAgXCJTSUdYRlNaXCIsXG4gICAgICAgIFwiU0lHVVNSMlwiLFxuICAgICAgICBcIlNJR1RSQVBcIixcbiAgICAgICAgXCJTSUdTWVNcIixcbiAgICAgICAgXCJTSUdRVUlUXCIsXG4gICAgICAgIFwiU0lHSU9UXCIsXG4gICAgICAgIC8vIHNob3VsZCBkZXRlY3QgcHJvZmlsZXIgYW5kIGVuYWJsZS9kaXNhYmxlIGFjY29yZGluZ2x5LlxuICAgICAgICAvLyBzZWUgIzIxXG4gICAgICAgIC8vICdTSUdQUk9GJ1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGdsb2JhbFRoaXMucHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJsaW51eFwiKSB7XG4gICAgICB0aGlzLiNzaWduYWxzLnB1c2goXCJTSUdJT1wiLCBcIlNJR1BPTExcIiwgXCJTSUdQV1JcIiwgXCJTSUdTVEtGTFRcIik7XG4gICAgfVxuICAgIHRoaXMuI3Byb2Nlc3MgPSBwcm9jZXNzO1xuICAgIC8vIHsgPHNpZ25hbD46IDxsaXN0ZW5lciBmbj4sIC4uLiB9XG4gICAgdGhpcy4jc2lnTGlzdGVuZXJzID0ge307XG4gICAgZm9yIChjb25zdCBzaWcgb2YgdGhpcy4jc2lnbmFscykge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdGhpcy4jc2lnTGlzdGVuZXJzW3NpZ10gPSAoKSA9PiB7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGFuIGV4aXQgaXMgY29taW5nIVxuICAgICAgICAvLyBTaW1wbGVzdCB3YXk6IHJlbW92ZSB1cyBhbmQgdGhlbiByZS1zZW5kIHRoZSBzaWduYWwuXG4gICAgICAgIC8vIFdlIGtub3cgdGhhdCB0aGlzIHdpbGwga2lsbCB0aGUgcHJvY2Vzcywgc28gd2UgY2FuXG4gICAgICAgIC8vIHNhZmVseSBlbWl0IG5vdy5cbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy4jcHJvY2Vzcy5saXN0ZW5lcnMoc2lnKTtcbiAgICAgICAgbGV0IHsgY291bnQgfSA9IHRoaXMuI2VtaXR0ZXI7XG4gICAgICAgIC8vIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgZmFjdCB0aGF0IHNpZ25hbC1leGl0IHYzIGFuZCBzaWduYWxcbiAgICAgICAgLy8gZXhpdCB2NCBhcmUgbm90IGF3YXJlIG9mIGVhY2ggb3RoZXIsIGFuZCBlYWNoIHdpbGwgYXR0ZW1wdCB0byBsZXRcbiAgICAgICAgLy8gdGhlIG90aGVyIGhhbmRsZSBpdCwgc28gbmVpdGhlciBvZiB0aGVtIGRvLiBUbyBjb3JyZWN0IHRoaXMsIHdlXG4gICAgICAgIC8vIGRldGVjdCBpZiB3ZSdyZSB0aGUgb25seSBoYW5kbGVyICpleGNlcHQqIGZvciBwcmV2aW91cyB2ZXJzaW9uc1xuICAgICAgICAvLyBvZiBzaWduYWwtZXhpdCwgYW5kIGluY3JlbWVudCBieSB0aGUgY291bnQgb2YgbGlzdGVuZXJzIGl0IGhhc1xuICAgICAgICAvLyBjcmVhdGVkLlxuICAgICAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICAgICAgY29uc3QgcCA9IHByb2Nlc3M7XG4gICAgICAgIGlmICh0eXBlb2YgcC5fX3NpZ25hbF9leGl0X2VtaXR0ZXJfXyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcC5fX3NpZ25hbF9leGl0X2VtaXR0ZXJfXy5jb3VudCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIGNvdW50ICs9IHAuX19zaWduYWxfZXhpdF9lbWl0dGVyX18uY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyogYzggaWdub3JlIHN0b3AgKi9cbiAgICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IGNvdW50KSB7XG4gICAgICAgICAgdGhpcy51bmxvYWQoKTtcbiAgICAgICAgICBjb25zdCByZXQgPSB0aGlzLiNlbWl0dGVyLmVtaXQoXCJleGl0XCIsIG51bGwsIHNpZyk7XG4gICAgICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICAgICAgY29uc3QgcyA9IHNpZyA9PT0gXCJTSUdIVVBcIiA/IHRoaXMuI2h1cFNpZyA6IHNpZztcbiAgICAgICAgICBpZiAoIXJldCkgcHJvY2Vzcy5raWxsKHByb2Nlc3MucGlkLCBzKTtcbiAgICAgICAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLiNvcmlnaW5hbFByb2Nlc3NSZWFsbHlFeGl0ID0gcHJvY2Vzcy5yZWFsbHlFeGl0O1xuICAgIHRoaXMuI29yaWdpbmFsUHJvY2Vzc0VtaXQgPSBwcm9jZXNzLmVtaXQ7XG4gIH1cbiAgb25FeGl0KGNiOiBhbnksIG9wdHM6IGFueSkge1xuICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgIGlmICghcHJvY2Vzc09rKHRoaXMuI3Byb2Nlc3MpKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgaWYgKHRoaXMuI2xvYWRlZCA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMubG9hZCgpO1xuICAgIH1cbiAgICBjb25zdCBldiA9IG9wdHM/LmFsd2F5c0xhc3QgPyBcImFmdGVyRXhpdFwiIDogXCJleGl0XCI7XG4gICAgdGhpcy4jZW1pdHRlci5vbihldiwgY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLiNlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKGV2LCBjYik7XG4gICAgICBpZiAodGhpcy4jZW1pdHRlci5saXN0ZW5lcnNbXCJleGl0XCJdLmxlbmd0aCA9PT0gMCAmJiB0aGlzLiNlbWl0dGVyLmxpc3RlbmVyc1tcImFmdGVyRXhpdFwiXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy51bmxvYWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGxvYWQoKSB7XG4gICAgaWYgKHRoaXMuI2xvYWRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNsb2FkZWQgPSB0cnVlO1xuICAgIC8vIFRoaXMgaXMgdGhlIG51bWJlciBvZiBvblNpZ25hbEV4aXQncyB0aGF0IGFyZSBpbiBwbGF5LlxuICAgIC8vIEl0J3MgaW1wb3J0YW50IHNvIHRoYXQgd2UgY2FuIGNvdW50IHRoZSBjb3JyZWN0IG51bWJlciBvZlxuICAgIC8vIGxpc3RlbmVycyBvbiBzaWduYWxzLCBhbmQgZG9uJ3Qgd2FpdCBmb3IgdGhlIG90aGVyIG9uZSB0b1xuICAgIC8vIGhhbmRsZSBpdCBpbnN0ZWFkIG9mIHVzLlxuICAgIHRoaXMuI2VtaXR0ZXIuY291bnQgKz0gMTtcbiAgICBmb3IgKGNvbnN0IHNpZyBvZiB0aGlzLiNzaWduYWxzKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGZuID0gdGhpcy4jc2lnTGlzdGVuZXJzW3NpZ107XG4gICAgICAgIGlmIChmbikgdGhpcy4jcHJvY2Vzcy5vbihzaWcsIGZuKTtcbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgLy8gbm8tb3BcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4jcHJvY2Vzcy5lbWl0ID0gKGV2OiBhbnksIC4uLmE6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuI3Byb2Nlc3NFbWl0KGV2LCAuLi5hKTtcbiAgICB9O1xuICAgIHRoaXMuI3Byb2Nlc3MucmVhbGx5RXhpdCA9IChjb2RlOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLiNwcm9jZXNzUmVhbGx5RXhpdChjb2RlKTtcbiAgICB9O1xuICB9XG4gIHVubG9hZCgpIHtcbiAgICBpZiAoIXRoaXMuI2xvYWRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNsb2FkZWQgPSBmYWxzZTtcbiAgICB0aGlzLiNzaWduYWxzLmZvckVhY2goKHNpZykgPT4ge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29uc3QgbGlzdGVuZXIgPSB0aGlzLiNzaWdMaXN0ZW5lcnNbc2lnXTtcbiAgICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgICAgaWYgKCFsaXN0ZW5lcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMaXN0ZW5lciBub3QgZGVmaW5lZCBmb3Igc2lnbmFsOiBcIiArIHNpZyk7XG4gICAgICB9XG4gICAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcihzaWcsIGxpc3RlbmVyKTtcbiAgICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIC8vIG5vLW9wXG4gICAgICB9XG4gICAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAgIH0pO1xuICAgIHRoaXMuI3Byb2Nlc3MuZW1pdCA9IHRoaXMuI29yaWdpbmFsUHJvY2Vzc0VtaXQ7XG4gICAgdGhpcy4jcHJvY2Vzcy5yZWFsbHlFeGl0ID0gdGhpcy4jb3JpZ2luYWxQcm9jZXNzUmVhbGx5RXhpdDtcbiAgICB0aGlzLiNlbWl0dGVyLmNvdW50IC09IDE7XG4gIH1cbiAgI3Byb2Nlc3NSZWFsbHlFeGl0KGNvZGU6IGFueSkge1xuICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgIGlmICghcHJvY2Vzc09rKHRoaXMuI3Byb2Nlc3MpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdGhpcy4jcHJvY2Vzcy5leGl0Q29kZSA9IGNvZGUgfHwgMDtcbiAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICAgIHRoaXMuI2VtaXR0ZXIuZW1pdChcImV4aXRcIiwgdGhpcy4jcHJvY2Vzcy5leGl0Q29kZSwgbnVsbCk7XG4gICAgcmV0dXJuIHRoaXMuI29yaWdpbmFsUHJvY2Vzc1JlYWxseUV4aXQuY2FsbCh0aGlzLiNwcm9jZXNzLCB0aGlzLiNwcm9jZXNzLmV4aXRDb2RlKTtcbiAgfVxuICAjcHJvY2Vzc0VtaXQoZXY6IGFueSwgLi4uYXJnczogYW55KSB7XG4gICAgY29uc3Qgb2cgPSB0aGlzLiNvcmlnaW5hbFByb2Nlc3NFbWl0O1xuICAgIGlmIChldiA9PT0gXCJleGl0XCIgJiYgcHJvY2Vzc09rKHRoaXMuI3Byb2Nlc3MpKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzcy5leGl0Q29kZSA9IGFyZ3NbMF07XG4gICAgICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgICAgfVxuICAgICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgICBjb25zdCByZXQgPSBvZy5jYWxsKHRoaXMuI3Byb2Nlc3MsIGV2LCAuLi5hcmdzKTtcbiAgICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xuICAgICAgdGhpcy4jZW1pdHRlci5lbWl0KFwiZXhpdFwiLCB0aGlzLiNwcm9jZXNzLmV4aXRDb2RlLCBudWxsKTtcbiAgICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2cuY2FsbCh0aGlzLiNwcm9jZXNzLCBldiwgLi4uYXJncyk7XG4gICAgfVxuICB9XG59XG5cbmxldCBzaWduYWxFeGl0OiBTaWduYWxFeGl0IHwgU2lnbmFsRXhpdEZhbGxiYWNrIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBjb25zdCBvbkV4aXQgPSAoXG4gIGNiOiBhbnksXG4gIG9wdHM/OiB7XG4gICAgYWx3YXlzTGFzdD86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIH0sXG4pID0+IHtcbiAgaWYgKCFzaWduYWxFeGl0KSB7XG4gICAgc2lnbmFsRXhpdCA9IHByb2Nlc3NPayhwcm9jZXNzKSA/IG5ldyBTaWduYWxFeGl0KHByb2Nlc3MpIDogbmV3IFNpZ25hbEV4aXRGYWxsYmFjaygpO1xuICB9XG4gIHJldHVybiBzaWduYWxFeGl0Lm9uRXhpdChjYiwgb3B0cyk7XG59O1xuIiwgImltcG9ydCB7IGVudmlyb25tZW50IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlUmVhZFN0cmVhbSwgY3JlYXRlV3JpdGVTdHJlYW0sIG1rZGlyU3luYywgU3RhdHMgfSBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0IHsgc3RhdCB9IGZyb20gXCJub2RlOmZzL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBqb2luLCBub3JtYWxpemUgfSBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgeyBwaXBlbGluZSB9IGZyb20gXCJub2RlOnN0cmVhbS9wcm9taXNlc1wiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQ2hhaW4gZnJvbSBcIi4vdmVuZG9ycy9zdHJlYW0tY2hhaW5cIjtcbmltcG9ydCB7IHBhcnNlciwgUGlja1BhcnNlciwgU3RyZWFtQXJyYXkgfSBmcm9tIFwiLi92ZW5kb3JzL3N0cmVhbS1qc29uXCI7XG5pbXBvcnQgeyBpc0pTT04gfSBmcm9tIFwiLi9mZXRjaC11dGlsc1wiO1xuaW1wb3J0IHsgRmxhdHRlbiwgRnVuY3Rpb25SZXR1cm5pbmdQYWdpbmF0ZWRQcm9taXNlLCBVc2VDYWNoZWRQcm9taXNlUmV0dXJuVHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBDYWNoZWRQcm9taXNlT3B0aW9ucywgdXNlQ2FjaGVkUHJvbWlzZSB9IGZyb20gXCIuL3VzZUNhY2hlZFByb21pc2VcIjtcbmltcG9ydCB7IGhhc2ggfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbnR5cGUgUmVxdWVzdEluZm8gPSBzdHJpbmcgfCBVUkwgfCBnbG9iYWxUaGlzLlJlcXVlc3Q7XG5cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlKHVybDogUmVxdWVzdEluZm8sIGRlc3RpbmF0aW9uOiBzdHJpbmcsIGZldGNoT3B0aW9ucz86IFJlcXVlc3RJbml0KSB7XG4gIGlmICh0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiIHx8IHVybC5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpKSB7XG4gICAgcmV0dXJuIGF3YWl0IGNhY2hlVVJMKHVybCwgZGVzdGluYXRpb24sIGZldGNoT3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAodXJsLnN0YXJ0c1dpdGgoXCJmaWxlOi8vXCIpKSB7XG4gICAgcmV0dXJuIGF3YWl0IGNhY2hlRmlsZShcbiAgICAgIG5vcm1hbGl6ZShkZWNvZGVVUklDb21wb25lbnQobmV3IFVSTCh1cmwpLnBhdGhuYW1lKSksXG4gICAgICBkZXN0aW5hdGlvbixcbiAgICAgIGZldGNoT3B0aW9ucz8uc2lnbmFsID8gZmV0Y2hPcHRpb25zLnNpZ25hbCA6IHVuZGVmaW5lZCxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgSFRUUChTKSBvciBmaWxlIFVSTHMgYXJlIHN1cHBvcnRlZFwiKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYWNoZVVSTCh1cmw6IFJlcXVlc3RJbmZvLCBkZXN0aW5hdGlvbjogc3RyaW5nLCBmZXRjaE9wdGlvbnM/OiBSZXF1ZXN0SW5pdCkge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgZmV0Y2hPcHRpb25zKTtcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIFVSTFwiKTtcbiAgfVxuXG4gIGlmICghaXNKU09OKHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVSTCBkb2VzIG5vdCByZXR1cm4gSlNPTlwiKTtcbiAgfVxuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgZXhwZWN0ZWQgSlNPTiBjb250ZW50OiBSZXNwb25zZSBib2R5IGlzIG1pc3Npbmcgb3IgaW5hY2Nlc3NpYmxlLlwiKTtcbiAgfVxuICBhd2FpdCBwaXBlbGluZShcbiAgICByZXNwb25zZS5ib2R5IGFzIHVua25vd24gYXMgTm9kZUpTLlJlYWRhYmxlU3RyZWFtLFxuICAgIGNyZWF0ZVdyaXRlU3RyZWFtKGRlc3RpbmF0aW9uKSxcbiAgICBmZXRjaE9wdGlvbnM/LnNpZ25hbCA/IHsgc2lnbmFsOiBmZXRjaE9wdGlvbnMuc2lnbmFsIH0gOiB1bmRlZmluZWQsXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlRmlsZShzb3VyY2U6IHN0cmluZywgZGVzdGluYXRpb246IHN0cmluZywgYWJvcnRTaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICBhd2FpdCBwaXBlbGluZShcbiAgICBjcmVhdGVSZWFkU3RyZWFtKHNvdXJjZSksXG4gICAgY3JlYXRlV3JpdGVTdHJlYW0oZGVzdGluYXRpb24pLFxuICAgIGFib3J0U2lnbmFsID8geyBzaWduYWw6IGFib3J0U2lnbmFsIH0gOiB1bmRlZmluZWQsXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhY2hlVVJMSWZOZWNlc3NhcnkoXG4gIHVybDogUmVxdWVzdEluZm8sXG4gIGZvbGRlcjogc3RyaW5nLFxuICBmaWxlTmFtZTogc3RyaW5nLFxuICBmb3JjZVVwZGF0ZTogYm9vbGVhbixcbiAgZmV0Y2hPcHRpb25zPzogUmVxdWVzdEluaXQsXG4pIHtcbiAgY29uc3QgZGVzdGluYXRpb24gPSBqb2luKGZvbGRlciwgZmlsZU5hbWUpO1xuXG4gIHRyeSB7XG4gICAgYXdhaXQgc3RhdChmb2xkZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbWtkaXJTeW5jKGZvbGRlciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgYXdhaXQgY2FjaGUodXJsLCBkZXN0aW5hdGlvbiwgZmV0Y2hPcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGZvcmNlVXBkYXRlKSB7XG4gICAgYXdhaXQgY2FjaGUodXJsLCBkZXN0aW5hdGlvbiwgZmV0Y2hPcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgc3RhdHM6IFN0YXRzIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICB0cnkge1xuICAgIHN0YXRzID0gYXdhaXQgc3RhdChkZXN0aW5hdGlvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBhd2FpdCBjYWNoZSh1cmwsIGRlc3RpbmF0aW9uLCBmZXRjaE9wdGlvbnMpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiIHx8IHVybC5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpKSB7XG4gICAgY29uc3QgaGVhZFJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IC4uLmZldGNoT3B0aW9ucywgbWV0aG9kOiBcIkhFQURcIiB9KTtcbiAgICBpZiAoIWhlYWRSZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZldGNoIFVSTFwiKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzSlNPTihoZWFkUmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVUkwgZG9lcyBub3QgcmV0dXJuIEpTT05cIik7XG4gICAgfVxuXG4gICAgY29uc3QgbGFzdE1vZGlmaWVkID0gRGF0ZS5wYXJzZShoZWFkUmVzcG9uc2UuaGVhZGVycy5nZXQoXCJsYXN0LW1vZGlmaWVkXCIpID8/IFwiXCIpO1xuICAgIGlmIChzdGF0cy5zaXplID09PSAwIHx8IE51bWJlci5pc05hTihsYXN0TW9kaWZpZWQpIHx8IGxhc3RNb2RpZmllZCA+IHN0YXRzLm10aW1lTXMpIHtcbiAgICAgIGF3YWl0IGNhY2hlKHVybCwgZGVzdGluYXRpb24sIGZldGNoT3B0aW9ucyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2UgaWYgKHVybC5zdGFydHNXaXRoKFwiZmlsZTovL1wiKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzb3VyY2VTdGF0cyA9IGF3YWl0IHN0YXQobm9ybWFsaXplKGRlY29kZVVSSUNvbXBvbmVudChuZXcgVVJMKHVybCkucGF0aG5hbWUpKSk7XG4gICAgICBpZiAoc291cmNlU3RhdHMubXRpbWVNcyA+IHN0YXRzLm10aW1lTXMpIHtcbiAgICAgICAgYXdhaXQgY2FjaGUodXJsLCBkZXN0aW5hdGlvbiwgZmV0Y2hPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2UgZmlsZSBjb3VsZCBub3QgYmUgcmVhZFwiKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBIVFRQKFMpIG9yIGZpbGUgVVJMcyBhcmUgc3VwcG9ydGVkXCIpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uKiBzdHJlYW1Kc29uRmlsZTxUPihcbiAgZmlsZVBhdGg6IHN0cmluZyxcbiAgcGFnZVNpemU6IG51bWJlcixcbiAgYWJvcnRTaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgZGF0YVBhdGg/OiBzdHJpbmcgfCBSZWdFeHAsXG4gIGZpbHRlckZuPzogKGl0ZW06IEZsYXR0ZW48VD4pID0+IGJvb2xlYW4sXG4gIHRyYW5zZm9ybUZuPzogKGl0ZW06IGFueSkgPT4gVCxcbik6IEFzeW5jR2VuZXJhdG9yPFQgZXh0ZW5kcyB1bmtub3duW10gPyBUIDogVFtdPiB7XG4gIGxldCBwYWdlOiBUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXSA9IFtdIGFzIFQgZXh0ZW5kcyB1bmtub3duW10gPyBUIDogVFtdO1xuXG4gIGNvbnN0IHBpcGVsaW5lID0gQ2hhaW4oW1xuICAgIGNyZWF0ZVJlYWRTdHJlYW0oZmlsZVBhdGgpLFxuICAgIGRhdGFQYXRoID8gUGlja1BhcnNlcih7IGZpbHRlcjogZGF0YVBhdGggfSkgOiBwYXJzZXIoKSxcbiAgICBTdHJlYW1BcnJheSgpLFxuICAgIChkYXRhOiBhbnkpID0+IHRyYW5zZm9ybUZuPy4oZGF0YS52YWx1ZSkgPz8gZGF0YS52YWx1ZSxcbiAgXSk7XG5cbiAgYWJvcnRTaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgcGlwZWxpbmUuZGVzdHJveSgpO1xuICB9KTtcblxuICB0cnkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgZGF0YSBvZiBwaXBlbGluZSkge1xuICAgICAgaWYgKGFib3J0U2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghZmlsdGVyRm4gfHwgZmlsdGVyRm4oZGF0YSkpIHtcbiAgICAgICAgcGFnZS5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2UubGVuZ3RoID49IHBhZ2VTaXplKSB7XG4gICAgICAgIHlpZWxkIHBhZ2U7XG4gICAgICAgIHBhZ2UgPSBbXSBhcyBUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBwaXBlbGluZS5kZXN0cm95KCk7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIGlmIChwYWdlLmxlbmd0aCA+IDApIHtcbiAgICB5aWVsZCBwYWdlO1xuICB9XG5cbiAgcmV0dXJuIFtdO1xufVxuXG50eXBlIE9wdGlvbnM8VD4gPSB7XG4gIC8qKlxuICAgKiBUaGUgaG9vayBleHBlY3RzIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbiBhcnJheSBvZiBkYXRhLCBzbyBieSBkZWZhdWx0LCBpdCBhc3N1bWVzIHRoZSBKU09OIGl0IHJlY2VpdmVzIGl0c2VsZiByZXByZXNlbnRzIGFuIGFycmF5LiBIb3dldmVyLCBzb21ldGltZXMgdGhlIGFycmF5IG9mIGRhdGEgaXMgd3JhcHBlZCBpbiBhbiBvYmplY3QsXG4gICAqIGkuZS4gYHsgXCJzdWNjZXNzXCI6IHRydWUsIFwiZGF0YVwiOiBb4oCmXSB9YCwgb3IgZXZlbiBgeyBcInN1Y2Nlc3NcIjogdHJ1ZSwgXCJyZXN1bHRzXCI6IHsgXCJkYXRhXCI6IFvigKZdIH0gfWAuIEluIHRob3NlIGNhc2VzLCB5b3UgY2FuIHVzZSBgZGF0YVBhdGhgIHRvIHNwZWNpZnkgd2hlcmUgdGhlIGRhdGEgYXJyYXkgY2FuIGJlIGZvdW5kLlxuICAgKlxuICAgKiBAcmVtYXJrIElmIHlvdXIgSlNPTiBvYmplY3QgaGFzIG11bHRpcGxlIGFycmF5cyB0aGF0IHlvdSB3YW50IHRvIHN0cmVhbSBkYXRhIGZyb20sIHlvdSBjYW4gcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzdHJlYW0gdGhyb3VnaCBhbGwgb2YgdGhlbS5cbiAgICpcbiAgICogQGV4YW1wbGUgRm9yIGB7IFwic3VjY2Vzc1wiOiB0cnVlLCBcImRhdGFcIjogW+KApl0gfWAsIGRhdGFQYXRoIHdvdWxkIGJlIGBkYXRhYFxuICAgKiBAZXhhbXBsZSBGb3IgYHsgXCJzdWNjZXNzXCI6IHRydWUsIFwicmVzdWx0c1wiOiB7IFwiZGF0YVwiOiBb4oCmXSB9IH1gLCBkYXRhUGF0aCB3b3VsZCBiZSBgcmVzdWx0cy5kYXRhYFxuICAgKiBAZXhhbXBsZSBGb3IgYHsgXCJzdWNjZXNzXCI6IHRydWUsIFwicmVzdWx0c1wiOiB7IFwiZmlyc3RfbGlzdFwiOiBb4oCmXSwgXCJzZWNvbmRfbGlzdFwiOiBb4oCmXSwgXCJ0aGlyZF9saXN0XCI6IFvigKZdIH0gfWAsIGRhdGFQYXRoIHdvdWxkIGJlIGAvXnJlc3VsdHNcXC4oZmlyc3RfbGlzdHxzZWNvbmRfbGlzdHx0aGlyZF9saXN0KSRcbi9gLlxuICAgKi9cbiAgZGF0YVBhdGg/OiBzdHJpbmcgfCBSZWdFeHA7XG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGV0aGVyIGEgcGFydGljdWxhciBpdGVtIHNob3VsZCBiZSBrZXB0IG9yIG5vdC5cbiAgICogRGVmYXVsdHMgdG8gYHVuZGVmaW5lZGAsIGtlZXBpbmcgYW55IGVuY291bnRlcmVkIGl0ZW0uXG4gICAqXG4gICAqIEByZW1hcmsgVGhlIGhvb2sgd2lsbCByZXZhbGlkYXRlIGV2ZXJ5IHRpbWUgdGhlIGZpbHRlciBmdW5jdGlvbiBjaGFuZ2VzLCBzbyB5b3UgbmVlZCB0byB1c2UgW3VzZUNhbGxiYWNrXShodHRwczovL3JlYWN0LmRldi9yZWZlcmVuY2UvcmVhY3QvdXNlQ2FsbGJhY2spIHRvIG1ha2Ugc3VyZSBpdCBvbmx5IGNoYW5nZXMgd2hlbiBpdCBuZWVkcyB0by5cbiAgICovXG4gIGZpbHRlcj86IChpdGVtOiBGbGF0dGVuPFQ+KSA9PiBib29sZWFuO1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0gYXMgaXQgaXMgZW5jb3VudGVyZWQuIFVzZWZ1bCBmb3IgYSBjb3VwbGUgb2YgdGhpbmdzOlxuICAgKiAxLiBlbnN1cmluZyB0aGF0IGFsbCBpdGVtcyBoYXZlIHRoZSBleHBlY3RlZCBwcm9wZXJ0aWVzLCBhbmQsIGFzIG9uIG9wdGltaXphdGlvbiwgZm9yIGdldHRpbmcgcmlkIG9mIHRoZSBwcm9wZXJ0aWVzIHRoYXQgeW91IGRvbid0IGNhcmUgYWJvdXQuXG4gICAqIDIuIHdoZW4gdG9wLWxldmVsIG9iamVjdHMgYWN0dWFsbHkgcmVwcmVzZW50IG5lc3RlZCBkYXRhLCB3aGljaCBzaG91bGQgYmUgZmxhdHRlbmVkLiBJbiB0aGlzIGNhc2UsIGB0cmFuc2Zvcm1gIGNhbiByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXMsIGFuZCB0aGUgaG9vayB3aWxsIHN0cmVhbSB0aHJvdWdoIGVhY2ggb25lIG9mIHRob3NlIGl0ZW1zLFxuICAgKiBwYXNzaW5nIHRoZW0gdG8gYGZpbHRlcmAgZXRjLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBhIHBhc3N0aHJvdWdoIGZ1bmN0aW9uIGlmIG5vdCBwcm92aWRlZC5cbiAgICpcbiAgICogQHJlbWFyayBUaGUgaG9vayB3aWxsIHJldmFsaWRhdGUgZXZlcnkgdGltZSB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIGNoYW5nZXMsIHNvIGl0IGlzIGltcG9ydGFudCB0byB1c2UgW3VzZUNhbGxiYWNrXShodHRwczovL3JlYWN0LmRldi9yZWZlcmVuY2UvcmVhY3QvdXNlQ2FsbGJhY2spIHRvIGVuc3VyZSBpdCBvbmx5IGNoYW5nZXMgd2hlbiBuZWNlc3NhcnkgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIG9yIGNvbXB1dGF0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIC8vIEZvciBkYXRhOiBgeyBcImRhdGFcIjogWyB7IFwidHlwZVwiOiBcImZvbGRlclwiLCBcIm5hbWVcIjogXCJpdGVtIDFcIiwgXCJjaGlsZHJlblwiOiBbIHsgXCJ0eXBlXCI6IFwiaXRlbVwiLCBcIm5hbWVcIjogXCJpdGVtIDJcIiB9LCB7IFwidHlwZVwiOiBcIml0ZW1cIiwgXCJuYW1lXCI6IFwiaXRlbSAzXCIgfSBdIH0sIHsgXCJ0eXBlXCI6IFwiZm9sZGVyXCIsIFwibmFtZVwiOiBcIml0ZW0gNFwiLCBjaGlsZHJlbjogW10gfSBdIH1gXG4gICAqXG4gICAqIHR5cGUgSXRlbSA9IHtcbiAgICogIHR5cGU6IFwiaXRlbVwiO1xuICAgKiAgbmFtZTogc3RyaW5nO1xuICAgKiB9O1xuICAgKlxuICAgKiB0eXBlIEZvbGRlciA9IHtcbiAgICogICB0eXBlOiBcImZvbGRlclwiO1xuICAgKiAgIG5hbWU6IHN0cmluZztcbiAgICogICBjaGlsZHJlbjogKEl0ZW0gfCBGb2xkZXIpW107XG4gICAqIH07XG4gICAqXG4gICAqIGZ1bmN0aW9uIGZsYXR0ZW4oaXRlbTogSXRlbSB8IEZvbGRlcik6IHsgbmFtZTogc3RyaW5nIH1bXSB7XG4gICAqICAgY29uc3QgZmxhdHRlbmVkOiB7IG5hbWU6IHN0cmluZyB9W10gPSBbXTtcbiAgICogICBpZiAoaXRlbS50eXBlID09PSBcImZvbGRlclwiKSB7XG4gICAqICAgICBmbGF0dGVuZWQucHVzaCguLi5pdGVtLmNoaWxkcmVuLm1hcChmbGF0dGVuKS5mbGF0KCkpO1xuICAgKiAgIH1cbiAgICogICBpZiAoaXRlbS50eXBlID09PSBcIml0ZW1cIikge1xuICAgKiAgICAgZmxhdHRlbmVkLnB1c2goeyBuYW1lOiBpdGVtLm5hbWUgfSk7XG4gICAqICAgfVxuICAgKiAgIHJldHVybiBmbGF0dGVuZWQ7XG4gICAqIH1cbiAgICpcbiAgICogY29uc3QgdHJhbnNmb3JtID0gdXNlQ2FsbGJhY2soZmxhdHRlbiwgW10pO1xuICAgKiBjb25zdCBmaWx0ZXIgPSB1c2VDYWxsYmFjaygoaXRlbTogeyBuYW1lOiBzdHJpbmcgfSkgPT4ge1xuICAgKiAgIOKAplxuICAgKiB9KVxuICAgKiBgYGBcbiAgICovXG4gIHRyYW5zZm9ybT86IChpdGVtOiBhbnkpID0+IFQ7XG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IG9mIGl0ZW1zIHRvIHJldHVybiBmb3IgZWFjaCBwYWdlLlxuICAgKiBEZWZhdWx0cyB0byBgMjBgLlxuICAgKi9cbiAgcGFnZVNpemU/OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIFRha2VzIGEgYGh0dHA6Ly9gLCBgaHR0cHM6Ly9gIG9yIGBmaWxlOi8vL2AgVVJMIHBvaW50aW5nIHRvIGEgSlNPTiByZXNvdXJjZSwgY2FjaGVzIGl0IHRvIHRoZSBjb21tYW5kJ3Mgc3VwcG9ydFxuICogZm9sZGVyLCBhbmQgc3RyZWFtcyB0aHJvdWdoIGl0cyBjb250ZW50LiBVc2VmdWwgd2hlbiBkZWFsaW5nIHdpdGggbGFyZ2UgSlNPTiBhcnJheXMgd2hpY2ggd291bGQgYmUgdG9vIGJpZyB0byBmaXRcbiAqIGluIHRoZSBjb21tYW5kJ3MgbWVtb3J5LlxuICpcbiAqIEByZW1hcmsgVGhlIEpTT04gcmVzb3VyY2UgbmVlZHMgdG8gY29uc2lzdCBvZiBhbiBhcnJheSBvZiBvYmplY3RzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZVN0cmVhbUpTT04gfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiB0eXBlIEZvcm11bGEgPSB7IG5hbWU6IHN0cmluZzsgZGVzYz86IHN0cmluZyB9O1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1haW4oKTogUmVhY3QuSlNYLkVsZW1lbnQge1xuICogICBjb25zdCB7IGRhdGEsIGlzTG9hZGluZywgcGFnaW5hdGlvbiB9ID0gdXNlU3RyZWFtSlNPTjxGb3JtdWxhPihcImh0dHBzOi8vZm9ybXVsYWUuYnJldy5zaC9hcGkvZm9ybXVsYS5qc29uXCIpO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8TGlzdCBpc0xvYWRpbmc9e2lzTG9hZGluZ30gcGFnaW5hdGlvbj17cGFnaW5hdGlvbn0+XG4gKiAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiRm9ybXVsYWVcIj5cbiAqICAgICAgICAge2RhdGE/Lm1hcCgoZCkgPT4gPExpc3QuSXRlbSBrZXk9e2QubmFtZX0gdGl0bGU9e2QubmFtZX0gc3VidGl0bGU9e2QuZGVzY30gLz4pfVxuICogICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfVxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZVN0cmVhbUpTT04gfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqIGltcG9ydCB7IGhvbWVkaXIgfSBmcm9tIFwib3NcIjtcbiAqIGltcG9ydCB7IGpvaW4gfSBmcm9tIFwicGF0aFwiO1xuICpcbiAqIHR5cGUgRm9ybXVsYSA9IHsgbmFtZTogc3RyaW5nOyBkZXNjPzogc3RyaW5nIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFpbigpOiBSZWFjdC5KU1guRWxlbWVudCB7XG4gKiAgIGNvbnN0IHsgZGF0YSwgaXNMb2FkaW5nLCBwYWdpbmF0aW9uIH0gPSB1c2VTdHJlYW1KU09OPEZvcm11bGE+KGBmaWxlOi8vLyR7am9pbihob21lZGlyKCksIFwiRG93bmxvYWRzXCIsIFwiZm9ybXVsYWUuanNvblwiKX1gKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IHBhZ2luYXRpb249e3BhZ2luYXRpb259PlxuICogICAgICAgPExpc3QuU2VjdGlvbiB0aXRsZT1cIkZvcm11bGFlXCI+XG4gKiAgICAgICAgIHtkYXRhPy5tYXAoKGQpID0+IDxMaXN0Lkl0ZW0ga2V5PXtkLm5hbWV9IHRpdGxlPXtkLm5hbWV9IHN1YnRpdGxlPXtkLmRlc2N9IC8+KX1cbiAqICAgICAgIDwvTGlzdC5TZWN0aW9uPlxuICogICAgIDwvTGlzdD5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RyZWFtSlNPTjxULCBVID0gdW5rbm93bj4odXJsOiBSZXF1ZXN0SW5mbyk6IFVzZUNhY2hlZFByb21pc2VSZXR1cm5UeXBlPFQsIFU+O1xuXG4vKipcbiAqIFRha2VzIGEgYGh0dHA6Ly9gLCBgaHR0cHM6Ly9gIG9yIGBmaWxlOi8vL2AgVVJMIHBvaW50aW5nIHRvIGEgSlNPTiByZXNvdXJjZSwgY2FjaGVzIGl0IHRvIHRoZSBjb21tYW5kJ3Mgc3VwcG9ydFxuICogZm9sZGVyLCBhbmQgc3RyZWFtcyB0aHJvdWdoIGl0cyBjb250ZW50LiBVc2VmdWwgd2hlbiBkZWFsaW5nIHdpdGggbGFyZ2UgSlNPTiBhcnJheXMgd2hpY2ggd291bGQgYmUgdG9vIGJpZyB0byBmaXRcbiAqIGluIHRoZSBjb21tYW5kJ3MgbWVtb3J5LlxuICpcbiAqIEByZW1hcmsgVGhlIEpTT04gcmVzb3VyY2UgbmVlZHMgdG8gY29uc2lzdCBvZiBhbiBhcnJheSBvZiBvYmplY3RzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgTGlzdCwgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyB1c2VTdHJlYW1KU09OIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKiBpbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG4gKiBpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbiAqXG4gKiB0eXBlIEZvcm11bGEgPSB7IG5hbWU6IHN0cmluZzsgZGVzYz86IHN0cmluZyB9O1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1haW4oKTogUmVhY3QuSlNYLkVsZW1lbnQge1xuICogICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAqXG4gKiAgIGNvbnN0IGZvcm11bGFGaWx0ZXIgPSB1c2VDYWxsYmFjayhcbiAqICAgICAoaXRlbTogRm9ybXVsYSkgPT4ge1xuICogICAgICAgaWYgKCFzZWFyY2hUZXh0KSByZXR1cm4gdHJ1ZTtcbiAqICAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXh0KTtcbiAqICAgICB9LFxuICogICAgIFtzZWFyY2hUZXh0XSxcbiAqICAgKTtcbiAqXG4gKiAgIGNvbnN0IGZvcm11bGFUcmFuc2Zvcm0gPSB1c2VDYWxsYmFjaygoaXRlbTogYW55KTogRm9ybXVsYSA9PiB7XG4gKiAgICAgcmV0dXJuIHsgbmFtZTogaXRlbS5uYW1lLCBkZXNjOiBpdGVtLmRlc2MgfTtcbiAqICAgfSwgW10pO1xuICpcbiAqICAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIHBhZ2luYXRpb24gfSA9IHVzZVN0cmVhbUpTT04oXCJodHRwczovL2Zvcm11bGFlLmJyZXcuc2gvYXBpL2Zvcm11bGEuanNvblwiLCB7XG4gKiAgICAgaW5pdGlhbERhdGE6IFtdIGFzIEZvcm11bGFbXSxcbiAqICAgICBwYWdlU2l6ZTogMjAsXG4gKiAgICAgZmlsdGVyOiBmb3JtdWxhRmlsdGVyLFxuICogICAgIHRyYW5zZm9ybTogZm9ybXVsYVRyYW5zZm9ybSxcbiAqICAgfSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfSBwYWdpbmF0aW9uPXtwYWdpbmF0aW9ufSBvblNlYXJjaFRleHRDaGFuZ2U9e3NldFNlYXJjaFRleHR9PlxuICogICAgICAgPExpc3QuU2VjdGlvbiB0aXRsZT1cIkZvcm11bGFlXCI+XG4gKiAgICAgICAgIHtkYXRhLm1hcCgoZCkgPT4gKFxuICogICAgICAgICAgIDxMaXN0Lkl0ZW0ga2V5PXtkLm5hbWV9IHRpdGxlPXtkLm5hbWV9IHN1YnRpdGxlPXtkLmRlc2N9IC8+XG4gKiAgICAgICAgICkpfVxuICogICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfVxuICogYGBgIHN1cHBvcnQgZm9sZGVyLCBhbmQgc3RyZWFtcyB0aHJvdWdoIGl0cyBjb250ZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGltcG9ydCB7IExpc3QsIGVudmlyb25tZW50IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuICogaW1wb3J0IHsgdXNlU3RyZWFtSlNPTiB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICogaW1wb3J0IHsgam9pbiB9IGZyb20gXCJwYXRoXCI7XG4gKiBpbXBvcnQgeyBob21lZGlyIH0gZnJvbSBcIm9zXCI7XG4gKiBpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbiAqXG4gKiB0eXBlIEZvcm11bGEgPSB7IG5hbWU6IHN0cmluZzsgZGVzYz86IHN0cmluZyB9O1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1haW4oKTogUmVhY3QuSlNYLkVsZW1lbnQge1xuICogICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAqXG4gKiAgIGNvbnN0IGZvcm11bGFGaWx0ZXIgPSB1c2VDYWxsYmFjayhcbiAqICAgICAoaXRlbTogRm9ybXVsYSkgPT4ge1xuICogICAgICAgaWYgKCFzZWFyY2hUZXh0KSByZXR1cm4gdHJ1ZTtcbiAqICAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXh0KTtcbiAqICAgICB9LFxuICogICAgIFtzZWFyY2hUZXh0XSxcbiAqICAgKTtcbiAqXG4gKiAgIGNvbnN0IGZvcm11bGFUcmFuc2Zvcm0gPSB1c2VDYWxsYmFjaygoaXRlbTogYW55KTogRm9ybXVsYSA9PiB7XG4gKiAgICAgcmV0dXJuIHsgbmFtZTogaXRlbS5uYW1lLCBkZXNjOiBpdGVtLmRlc2MgfTtcbiAqICAgfSwgW10pO1xuICpcbiAqICAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIHBhZ2luYXRpb24gfSA9IHVzZVN0cmVhbUpTT04oYGZpbGU6Ly8vJHtqb2luKGhvbWVkaXIoKSwgXCJEb3dubG9hZHNcIiwgXCJmb3JtdWxhZS5qc29uXCIpfWAsIHtcbiAqICAgICBpbml0aWFsRGF0YTogW10gYXMgRm9ybXVsYVtdLFxuICogICAgIHBhZ2VTaXplOiAyMCxcbiAqICAgICBmaWx0ZXI6IGZvcm11bGFGaWx0ZXIsXG4gKiAgICAgdHJhbnNmb3JtOiBmb3JtdWxhVHJhbnNmb3JtLFxuICogICB9KTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QgaXNMb2FkaW5nPXtpc0xvYWRpbmd9IHBhZ2luYXRpb249e3BhZ2luYXRpb259IG9uU2VhcmNoVGV4dENoYW5nZT17c2V0U2VhcmNoVGV4dH0+XG4gKiAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiRm9ybXVsYWVcIj5cbiAqICAgICAgICAge2RhdGEubWFwKChkKSA9PiAoXG4gKiAgICAgICAgICAgPExpc3QuSXRlbSBrZXk9e2QubmFtZX0gdGl0bGU9e2QubmFtZX0gc3VidGl0bGU9e2QuZGVzY30gLz5cbiAqICAgICAgICAgKSl9XG4gKiAgICAgICA8L0xpc3QuU2VjdGlvbj5cbiAqICAgICA8L0xpc3Q+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVN0cmVhbUpTT048VCwgVSBleHRlbmRzIGFueVtdID0gYW55W10+KFxuICB1cmw6IFJlcXVlc3RJbmZvLFxuICBvcHRpb25zOiBPcHRpb25zPFQ+ICYgUmVxdWVzdEluaXQgJiBPbWl0PENhY2hlZFByb21pc2VPcHRpb25zPEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSwgVT4sIFwiYWJvcnRhYmxlXCI+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW10sIFU+O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3RyZWFtSlNPTjxULCBVIGV4dGVuZHMgYW55W10gPSBhbnlbXT4oXG4gIHVybDogUmVxdWVzdEluZm8sXG4gIG9wdGlvbnM/OiBPcHRpb25zPFQ+ICYgUmVxdWVzdEluaXQgJiBPbWl0PENhY2hlZFByb21pc2VPcHRpb25zPEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSwgVT4sIFwiYWJvcnRhYmxlXCI+LFxuKTogVXNlQ2FjaGVkUHJvbWlzZVJldHVyblR5cGU8VCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW10sIFU+IHtcbiAgY29uc3Qge1xuICAgIGluaXRpYWxEYXRhLFxuICAgIGV4ZWN1dGUsXG4gICAga2VlcFByZXZpb3VzRGF0YSxcbiAgICBvbkVycm9yLFxuICAgIG9uRGF0YSxcbiAgICBvbldpbGxFeGVjdXRlLFxuICAgIGZhaWx1cmVUb2FzdE9wdGlvbnMsXG4gICAgZGF0YVBhdGgsXG4gICAgZmlsdGVyLFxuICAgIHRyYW5zZm9ybSxcbiAgICBwYWdlU2l6ZSA9IDIwLFxuICAgIC4uLmZldGNoT3B0aW9uc1xuICB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgY29uc3QgcHJldmlvdXNVcmwgPSB1c2VSZWY8UmVxdWVzdEluZm8+KG51bGwpO1xuICBjb25zdCBwcmV2aW91c0Rlc3RpbmF0aW9uID0gdXNlUmVmPHN0cmluZz4obnVsbCk7XG5cbiAgY29uc3QgdXNlQ2FjaGVkUHJvbWlzZU9wdGlvbnM6IENhY2hlZFByb21pc2VPcHRpb25zPEZ1bmN0aW9uUmV0dXJuaW5nUGFnaW5hdGVkUHJvbWlzZSwgVT4gPSB7XG4gICAgaW5pdGlhbERhdGEsXG4gICAgZXhlY3V0ZSxcbiAgICBrZWVwUHJldmlvdXNEYXRhLFxuICAgIG9uRXJyb3IsXG4gICAgb25EYXRhLFxuICAgIG9uV2lsbEV4ZWN1dGUsXG4gICAgZmFpbHVyZVRvYXN0T3B0aW9ucyxcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0b3JSZWYgPSB1c2VSZWY8QXN5bmNHZW5lcmF0b3I8VCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW10+IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGNvbnRyb2xsZXJSZWYgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGhhc01vcmVSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIHJldHVybiB1c2VDYWNoZWRQcm9taXNlKFxuICAgIChcbiAgICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgICBwYWdlU2l6ZTogbnVtYmVyLFxuICAgICAgZmV0Y2hPcHRpb25zOiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCxcbiAgICAgIGRhdGFQYXRoOiBzdHJpbmcgfCBSZWdFeHAgfCB1bmRlZmluZWQsXG4gICAgICBmaWx0ZXI6ICgoaXRlbTogRmxhdHRlbjxUPikgPT4gYm9vbGVhbikgfCB1bmRlZmluZWQsXG4gICAgICB0cmFuc2Zvcm06ICgoaXRlbTogdW5rbm93bikgPT4gVCkgfCB1bmRlZmluZWQsXG4gICAgKSA9PlxuICAgICAgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gaGFzaCh1cmwpICsgXCIuanNvblwiO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBlbnZpcm9ubWVudC5zdXBwb3J0UGF0aDtcbiAgICAgICAgaWYgKHBhZ2UgPT09IDApIHtcbiAgICAgICAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQ/LmFib3J0KCk7XG4gICAgICAgICAgY29udHJvbGxlclJlZi5jdXJyZW50ID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gam9pbihmb2xkZXIsIGZpbGVOYW1lKTtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBGb3JjZSB1cGRhdGUgdGhlIGNhY2hlIHdoZW4gdGhlIFVSTCBjaGFuZ2VzIGJ1dCB0aGUgY2FjaGUgZGVzdGluYXRpb24gZG9lcyBub3QuXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29uc3QgZm9yY2VDYWNoZVVwZGF0ZSA9IEJvb2xlYW4oXG4gICAgICAgICAgICBwcmV2aW91c1VybC5jdXJyZW50ICYmXG4gICAgICAgICAgICAgIHByZXZpb3VzVXJsLmN1cnJlbnQgIT09IHVybCAmJlxuICAgICAgICAgICAgICBwcmV2aW91c0Rlc3RpbmF0aW9uLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICAgcHJldmlvdXNEZXN0aW5hdGlvbi5jdXJyZW50ID09PSBkZXN0aW5hdGlvbixcbiAgICAgICAgICApO1xuICAgICAgICAgIHByZXZpb3VzVXJsLmN1cnJlbnQgPSB1cmw7XG4gICAgICAgICAgcHJldmlvdXNEZXN0aW5hdGlvbi5jdXJyZW50ID0gZGVzdGluYXRpb247XG4gICAgICAgICAgYXdhaXQgY2FjaGVVUkxJZk5lY2Vzc2FyeSh1cmwsIGZvbGRlciwgZmlsZU5hbWUsIGZvcmNlQ2FjaGVVcGRhdGUsIHtcbiAgICAgICAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlclJlZi5jdXJyZW50Py5zaWduYWwsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ2VuZXJhdG9yUmVmLmN1cnJlbnQgPSBzdHJlYW1Kc29uRmlsZShcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICAgICAgcGFnZVNpemUsXG4gICAgICAgICAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQ/LnNpZ25hbCxcbiAgICAgICAgICAgIGRhdGFQYXRoLFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgdHJhbnNmb3JtLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnZW5lcmF0b3JSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJldHVybiB7IGhhc01vcmU6IGhhc01vcmVSZWYuY3VycmVudCwgZGF0YTogW10gYXMgVCBleHRlbmRzIHVua25vd25bXSA/IFQgOiBUW10gfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZhbHVlOiBuZXdEYXRhLCBkb25lIH0gPSBhd2FpdCBnZW5lcmF0b3JSZWYuY3VycmVudC5uZXh0KCk7XG4gICAgICAgIGhhc01vcmVSZWYuY3VycmVudCA9ICFkb25lO1xuICAgICAgICByZXR1cm4geyBoYXNNb3JlOiBoYXNNb3JlUmVmLmN1cnJlbnQsIGRhdGE6IChuZXdEYXRhID8/IFtdKSBhcyBUIGV4dGVuZHMgdW5rbm93bltdID8gVCA6IFRbXSB9O1xuICAgICAgfSxcbiAgICBbdXJsLCBwYWdlU2l6ZSwgZmV0Y2hPcHRpb25zLCBkYXRhUGF0aCwgZmlsdGVyLCB0cmFuc2Zvcm1dLFxuICAgIHVzZUNhY2hlZFByb21pc2VPcHRpb25zLFxuICApO1xufVxuIiwgIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCAqL1xuaW1wb3J0IHsgUmVhZGFibGUsIFdyaXRhYmxlLCBEdXBsZXggfSBmcm9tIFwibm9kZTpzdHJlYW1cIjtcblxuZXhwb3J0IGNvbnN0IG5vbmUgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcIm9iamVjdC1zdHJlYW0ubm9uZVwiKTtcbmNvbnN0IHN0b3AgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcIm9iamVjdC1zdHJlYW0uc3RvcFwiKTtcblxuY29uc3QgZmluYWxTeW1ib2wgPSAvKiAjX19QVVJFX18gKi8gU3ltYm9sLmZvcihcIm9iamVjdC1zdHJlYW0uZmluYWxcIik7XG5jb25zdCBtYW55U3ltYm9sID0gLyogI19fUFVSRV9fICovIFN5bWJvbC5mb3IoXCJvYmplY3Qtc3RyZWFtLm1hbnlcIik7XG5jb25zdCBmbHVzaFN5bWJvbCA9IC8qICNfX1BVUkVfXyAqLyBTeW1ib2wuZm9yKFwib2JqZWN0LXN0cmVhbS5mbHVzaFwiKTtcbmNvbnN0IGZMaXN0U3ltYm9sID0gLyogI19fUFVSRV9fICovIFN5bWJvbC5mb3IoXCJvYmplY3Qtc3RyZWFtLmZMaXN0XCIpO1xuXG5jb25zdCBmaW5hbFZhbHVlID0gKHZhbHVlOiBhbnkpID0+ICh7IFtmaW5hbFN5bWJvbF06IDEsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IG1hbnkgPSAodmFsdWVzOiBhbnkpID0+ICh7IFttYW55U3ltYm9sXTogMSwgdmFsdWVzIH0pO1xuXG5jb25zdCBpc0ZpbmFsVmFsdWUgPSAobzogYW55KSA9PiBvICYmIG9bZmluYWxTeW1ib2xdID09PSAxO1xuY29uc3QgaXNNYW55ID0gKG86IGFueSkgPT4gbyAmJiBvW21hbnlTeW1ib2xdID09PSAxO1xuY29uc3QgaXNGbHVzaGFibGUgPSAobzogYW55KSA9PiBvICYmIG9bZmx1c2hTeW1ib2xdID09PSAxO1xuY29uc3QgaXNGdW5jdGlvbkxpc3QgPSAobzogYW55KSA9PiBvICYmIG9bZkxpc3RTeW1ib2xdID09PSAxO1xuXG5jb25zdCBnZXRGaW5hbFZhbHVlID0gKG86IGFueSkgPT4gby52YWx1ZTtcbmNvbnN0IGdldE1hbnlWYWx1ZXMgPSAobzogYW55KSA9PiBvLnZhbHVlcztcbmNvbnN0IGdldEZ1bmN0aW9uTGlzdCA9IChvOiBhbnkpID0+IG8uZkxpc3Q7XG5cbmV4cG9ydCBjb25zdCBjb21iaW5lTWFueU11dCA9IChhOiBhbnksIGI6IGFueSkgPT4ge1xuICBjb25zdCB2YWx1ZXMgPSBhID09PSBub25lID8gW10gOiBhPy5bbWFueVN5bWJvbF0gPT09IDEgPyBhLnZhbHVlcyA6IFthXTtcbiAgaWYgKGIgPT09IG5vbmUpIHtcbiAgICAvLyBkbyBub3RoaW5nXG4gIH0gZWxzZSBpZiAoYj8uW21hbnlTeW1ib2xdID09PSAxKSB7XG4gICAgdmFsdWVzLnB1c2goLi4uYi52YWx1ZXMpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlcy5wdXNoKGIpO1xuICB9XG4gIHJldHVybiBtYW55KHZhbHVlcyk7XG59O1xuXG5leHBvcnQgY29uc3QgZmx1c2hhYmxlID0gKHdyaXRlOiAodmFsdWU6IGFueSkgPT4gYW55LCBmaW5hbCA9IG51bGwpID0+IHtcbiAgY29uc3QgZm4gPSBmaW5hbCA/ICh2YWx1ZTogYW55KSA9PiAodmFsdWUgPT09IG5vbmUgPyBmaW5hbFZhbHVlKHVuZGVmaW5lZCkgOiB3cml0ZSh2YWx1ZSkpIDogd3JpdGU7XG4gIC8vIEB0cy1pZ25vcmVcbiAgZm5bZmx1c2hTeW1ib2xdID0gMTtcbiAgcmV0dXJuIGZuO1xufTtcblxuY29uc3Qgc2V0RnVuY3Rpb25MaXN0ID0gKG86IGFueSwgZm5zOiBhbnkpID0+IHtcbiAgby5mTGlzdCA9IGZucztcbiAgb1tmTGlzdFN5bWJvbF0gPSAxO1xuICByZXR1cm4gbztcbn07XG5cbi8vIGlzKk5vZGVTdHJlYW0gZnVuY3Rpb25zIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFzdGVyL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3V0aWxzLmpzXG5jb25zdCBpc1JlYWRhYmxlTm9kZVN0cmVhbSA9IChvYmo6IGFueSkgPT5cbiAgb2JqICYmXG4gIHR5cGVvZiBvYmoucGlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gIHR5cGVvZiBvYmoub24gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAoIW9iai5fd3JpdGFibGVTdGF0ZSB8fCAodHlwZW9mIG9iai5fcmVhZGFibGVTdGF0ZSA9PT0gXCJvYmplY3RcIiA/IG9iai5fcmVhZGFibGVTdGF0ZS5yZWFkYWJsZSA6IG51bGwpICE9PSBmYWxzZSkgJiYgLy8gRHVwbGV4XG4gICghb2JqLl93cml0YWJsZVN0YXRlIHx8IG9iai5fcmVhZGFibGVTdGF0ZSk7IC8vIFdyaXRhYmxlIGhhcyAucGlwZS5cblxuY29uc3QgaXNXcml0YWJsZU5vZGVTdHJlYW0gPSAob2JqOiBhbnkpID0+XG4gIG9iaiAmJlxuICB0eXBlb2Ygb2JqLndyaXRlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIG9iai5vbiA9PT0gXCJmdW5jdGlvblwiICYmXG4gICghb2JqLl9yZWFkYWJsZVN0YXRlIHx8ICh0eXBlb2Ygb2JqLl93cml0YWJsZVN0YXRlID09PSBcIm9iamVjdFwiID8gb2JqLl93cml0YWJsZVN0YXRlLndyaXRhYmxlIDogbnVsbCkgIT09IGZhbHNlKTsgLy8gRHVwbGV4XG5cbmNvbnN0IGlzRHVwbGV4Tm9kZVN0cmVhbSA9IChvYmo6IGFueSkgPT5cbiAgb2JqICYmXG4gIHR5cGVvZiBvYmoucGlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gIG9iai5fcmVhZGFibGVTdGF0ZSAmJlxuICB0eXBlb2Ygb2JqLm9uID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgdHlwZW9mIG9iai53cml0ZSA9PT0gXCJmdW5jdGlvblwiO1xuXG5jb25zdCBpc1JlYWRhYmxlV2ViU3RyZWFtID0gKG9iajogYW55KSA9PiBvYmogJiYgZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSAmJiBvYmogaW5zdGFuY2VvZiBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtO1xuXG5jb25zdCBpc1dyaXRhYmxlV2ViU3RyZWFtID0gKG9iajogYW55KSA9PiBvYmogJiYgZ2xvYmFsVGhpcy5Xcml0YWJsZVN0cmVhbSAmJiBvYmogaW5zdGFuY2VvZiBnbG9iYWxUaGlzLldyaXRhYmxlU3RyZWFtO1xuXG5jb25zdCBpc0R1cGxleFdlYlN0cmVhbSA9IChvYmo6IGFueSkgPT5cbiAgb2JqICYmXG4gIGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW0gJiZcbiAgb2JqLnJlYWRhYmxlIGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSAmJlxuICBnbG9iYWxUaGlzLldyaXRhYmxlU3RyZWFtICYmXG4gIG9iai53cml0YWJsZSBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuV3JpdGFibGVTdHJlYW07XG5cbmNvbnN0IGdyb3VwRnVuY3Rpb25zID0gKG91dHB1dDogYW55LCBmbjogYW55LCBpbmRleDogYW55LCBmbnM6IGFueSkgPT4ge1xuICBpZiAoXG4gICAgaXNEdXBsZXhOb2RlU3RyZWFtKGZuKSB8fFxuICAgICghaW5kZXggJiYgaXNSZWFkYWJsZU5vZGVTdHJlYW0oZm4pKSB8fFxuICAgIChpbmRleCA9PT0gZm5zLmxlbmd0aCAtIDEgJiYgaXNXcml0YWJsZU5vZGVTdHJlYW0oZm4pKVxuICApIHtcbiAgICBvdXRwdXQucHVzaChmbik7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBpZiAoaXNEdXBsZXhXZWJTdHJlYW0oZm4pKSB7XG4gICAgb3V0cHV0LnB1c2goRHVwbGV4LmZyb21XZWIoZm4sIHsgb2JqZWN0TW9kZTogdHJ1ZSB9KSk7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBpZiAoIWluZGV4ICYmIGlzUmVhZGFibGVXZWJTdHJlYW0oZm4pKSB7XG4gICAgb3V0cHV0LnB1c2goUmVhZGFibGUuZnJvbVdlYihmbiwgeyBvYmplY3RNb2RlOiB0cnVlIH0pKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIGlmIChpbmRleCA9PT0gZm5zLmxlbmd0aCAtIDEgJiYgaXNXcml0YWJsZVdlYlN0cmVhbShmbikpIHtcbiAgICBvdXRwdXQucHVzaChXcml0YWJsZS5mcm9tV2ViKGZuLCB7IG9iamVjdE1vZGU6IHRydWUgfSkpO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBmbiAhPSBcImZ1bmN0aW9uXCIpIHRocm93IFR5cGVFcnJvcihcIkl0ZW0gI1wiICsgaW5kZXggKyBcIiBpcyBub3QgYSBwcm9wZXIgc3RyZWFtLCBub3IgYSBmdW5jdGlvbi5cIik7XG4gIGlmICghb3V0cHV0Lmxlbmd0aCkgb3V0cHV0LnB1c2goW10pO1xuICBjb25zdCBsYXN0ID0gb3V0cHV0W291dHB1dC5sZW5ndGggLSAxXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobGFzdCkpIHtcbiAgICBsYXN0LnB1c2goZm4pO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dC5wdXNoKFtmbl0pO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG5jbGFzcyBTdG9wIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGNvbnN0IGFzU3RyZWFtID0gKGZuOiBhbnkpID0+IHtcbiAgaWYgKHR5cGVvZiBmbiAhPSBcImZ1bmN0aW9uXCIpIHRocm93IFR5cGVFcnJvcihcIk9ubHkgYSBmdW5jdGlvbiBpcyBhY2NlcHRlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnRcIik7XG5cbiAgLy8gcHVtcCB2YXJpYWJsZXNcbiAgbGV0IHBhdXNlZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBsZXQgcmVzb2x2ZVBhdXNlZDogKCh2YWx1ZTogdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBjb25zdCBxdWV1ZTogYW55W10gPSBbXTtcblxuICAvLyBwYXVzZS9yZXN1bWVcbiAgY29uc3QgcmVzdW1lOiBhbnkgPSAoKSA9PiB7XG4gICAgaWYgKCFyZXNvbHZlUGF1c2VkKSByZXR1cm47XG4gICAgcmVzb2x2ZVBhdXNlZCgpO1xuICAgIHJlc29sdmVQYXVzZWQgPSBudWxsO1xuICAgIHBhdXNlZCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBjb25zdCBwYXVzZTogYW55ID0gKCkgPT4ge1xuICAgIGlmIChyZXNvbHZlUGF1c2VkKSByZXR1cm47XG4gICAgcGF1c2VkID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IChyZXNvbHZlUGF1c2VkID0gcmVzb2x2ZSkpO1xuICB9O1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgbGV0IHN0cmVhbTogRHVwbGV4OyAvLyB3aWxsIGJlIGFzc2lnbmVkIGxhdGVyXG5cbiAgLy8gZGF0YSBwcm9jZXNzaW5nXG4gIGNvbnN0IHB1c2hSZXN1bHRzOiBhbnkgPSAodmFsdWVzOiBhbnkpID0+IHtcbiAgICBpZiAodmFsdWVzICYmIHR5cGVvZiB2YWx1ZXMubmV4dCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIGdlbmVyYXRvclxuICAgICAgcXVldWUucHVzaCh2YWx1ZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhcnJheVxuICAgIHF1ZXVlLnB1c2godmFsdWVzW1N5bWJvbC5pdGVyYXRvcl0oKSk7XG4gIH07XG4gIGNvbnN0IHB1bXA6IGFueSA9IGFzeW5jICgpID0+IHtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBwYXVzZWQ7XG4gICAgICBjb25zdCBnZW4gPSBxdWV1ZVtxdWV1ZS5sZW5ndGggLSAxXTtcbiAgICAgIGxldCByZXN1bHQgPSBnZW4ubmV4dCgpO1xuICAgICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICBxdWV1ZS5wb3AoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhbHVlID0gYXdhaXQgdmFsdWU7XG4gICAgICB9XG4gICAgICBhd2FpdCBzYW5pdGl6ZSh2YWx1ZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBzYW5pdGl6ZTogYW55ID0gYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gbm9uZSkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSA9PT0gc3RvcCkgdGhyb3cgbmV3IFN0b3AoKTtcblxuICAgIGlmIChpc01hbnkodmFsdWUpKSB7XG4gICAgICBwdXNoUmVzdWx0cyhnZXRNYW55VmFsdWVzKHZhbHVlKSk7XG4gICAgICByZXR1cm4gcHVtcCgpO1xuICAgIH1cblxuICAgIGlmIChpc0ZpbmFsVmFsdWUodmFsdWUpKSB7XG4gICAgICAvLyBhIGZpbmFsIHZhbHVlIGlzIG5vdCBzdXBwb3J0ZWQsIGl0IGlzIHRyZWF0ZWQgYXMgYSByZWd1bGFyIHZhbHVlXG4gICAgICB2YWx1ZSA9IGdldEZpbmFsVmFsdWUodmFsdWUpO1xuICAgICAgcmV0dXJuIHByb2Nlc3NWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKCFzdHJlYW0ucHVzaCh2YWx1ZSkpIHtcbiAgICAgIHBhdXNlKCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzQ2h1bms6IGFueSA9IGFzeW5jIChjaHVuazogYW55LCBlbmNvZGluZzogYW55KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZm4oY2h1bmssIGVuY29kaW5nKTtcbiAgICAgIGF3YWl0IHByb2Nlc3NWYWx1ZSh2YWx1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFN0b3ApIHtcbiAgICAgICAgc3RyZWFtLnB1c2gobnVsbCk7XG4gICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJvY2Vzc1ZhbHVlOiBhbnkgPSBhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIHRoZW5hYmxlXG4gICAgICByZXR1cm4gdmFsdWUudGhlbigodmFsdWU6IGFueSkgPT4gcHJvY2Vzc1ZhbHVlKHZhbHVlKSk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUubmV4dCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIGdlbmVyYXRvclxuICAgICAgcHVzaFJlc3VsdHModmFsdWUpO1xuICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNhbml0aXplKHZhbHVlKTtcbiAgfTtcblxuICBzdHJlYW0gPSBuZXcgRHVwbGV4KFxuICAgIE9iamVjdC5hc3NpZ24oeyB3cml0YWJsZU9iamVjdE1vZGU6IHRydWUsIHJlYWRhYmxlT2JqZWN0TW9kZTogdHJ1ZSB9LCB1bmRlZmluZWQsIHtcbiAgICAgIHdyaXRlKGNodW5rOiBhbnksIGVuY29kaW5nOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgICAgICAgcHJvY2Vzc0NodW5rKGNodW5rLCBlbmNvZGluZykudGhlbihcbiAgICAgICAgICAoKSA9PiBjYWxsYmFjayhudWxsKSxcbiAgICAgICAgICAoZXJyb3I6IGFueSkgPT4gY2FsbGJhY2soZXJyb3IpLFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIGZpbmFsKGNhbGxiYWNrOiBhbnkpIHtcbiAgICAgICAgaWYgKCFpc0ZsdXNoYWJsZShmbikpIHtcbiAgICAgICAgICBzdHJlYW0ucHVzaChudWxsKTtcbiAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzc0NodW5rKG5vbmUsIG51bGwpLnRoZW4oXG4gICAgICAgICAgKCkgPT4gKHN0cmVhbS5wdXNoKG51bGwpLCBjYWxsYmFjayhudWxsKSksXG4gICAgICAgICAgKGVycm9yOiBhbnkpID0+IGNhbGxiYWNrKGVycm9yKSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICByZWFkKCkge1xuICAgICAgICByZXN1bWUoKTtcbiAgICAgIH0sXG4gICAgfSksXG4gICk7XG5cbiAgcmV0dXJuIHN0cmVhbTtcbn07XG5cbmNvbnN0IHByb2R1Y2VTdHJlYW1zID0gKGl0ZW06IGFueSkgPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgIGlmICghaXRlbS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIGlmIChpdGVtLmxlbmd0aCA9PSAxKSByZXR1cm4gaXRlbVswXSAmJiBhc1N0cmVhbShpdGVtWzBdKTtcbiAgICByZXR1cm4gYXNTdHJlYW0oZ2VuKC4uLml0ZW0pKTtcbiAgfVxuICByZXR1cm4gaXRlbTtcbn07XG5cbmNvbnN0IG5leHQ6IGFueSA9IGFzeW5jIGZ1bmN0aW9uKiAodmFsdWU6IGFueSwgZm5zOiBhbnksIGluZGV4OiBhbnkpIHtcbiAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDw9IGZucy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIC8vIHRoZW5hYmxlXG4gICAgICB2YWx1ZSA9IGF3YWl0IHZhbHVlO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG5vbmUpIGJyZWFrO1xuICAgIGlmICh2YWx1ZSA9PT0gc3RvcCkgdGhyb3cgbmV3IFN0b3AoKTtcbiAgICBpZiAoaXNGaW5hbFZhbHVlKHZhbHVlKSkge1xuICAgICAgeWllbGQgZ2V0RmluYWxWYWx1ZSh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKGlzTWFueSh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGdldE1hbnlWYWx1ZXModmFsdWUpO1xuICAgICAgaWYgKGkgPT0gZm5zLmxlbmd0aCkge1xuICAgICAgICB5aWVsZCogdmFsdWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB2YWx1ZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB5aWVsZCogbmV4dCh2YWx1ZXNbal0sIGZucywgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLm5leHQgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAvLyBnZW5lcmF0b3JcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IGRhdGEgPSB2YWx1ZS5uZXh0KCk7XG4gICAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhLnRoZW4gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgZGF0YSA9IGF3YWl0IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuZG9uZSkgYnJlYWs7XG4gICAgICAgIGlmIChpID09IGZucy5sZW5ndGgpIHtcbiAgICAgICAgICB5aWVsZCBkYXRhLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHlpZWxkKiBuZXh0KGRhdGEudmFsdWUsIGZucywgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaSA9PSBmbnMubGVuZ3RoKSB7XG4gICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBmID0gZm5zW2ldO1xuICAgIHZhbHVlID0gZih2YWx1ZSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZW4gPSAoLi4uZm5zOiBhbnkpID0+IHtcbiAgZm5zID0gZm5zXG4gICAgLmZpbHRlcigoZm46IGFueSkgPT4gZm4pXG4gICAgLmZsYXQoSW5maW5pdHkpXG4gICAgLm1hcCgoZm46IGFueSkgPT4gKGlzRnVuY3Rpb25MaXN0KGZuKSA/IGdldEZ1bmN0aW9uTGlzdChmbikgOiBmbikpXG4gICAgLmZsYXQoSW5maW5pdHkpO1xuICBpZiAoIWZucy5sZW5ndGgpIHtcbiAgICBmbnMgPSBbKHg6IGFueSkgPT4geF07XG4gIH1cbiAgbGV0IGZsdXNoZWQgPSBmYWxzZTtcbiAgbGV0IGcgPSBhc3luYyBmdW5jdGlvbiogKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAoZmx1c2hlZCkgdGhyb3cgRXJyb3IoXCJDYWxsIHRvIGEgZmx1c2hlZCBwaXBlLlwiKTtcbiAgICBpZiAodmFsdWUgIT09IG5vbmUpIHtcbiAgICAgIHlpZWxkKiBuZXh0KHZhbHVlLCBmbnMsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbHVzaGVkID0gdHJ1ZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGYgPSBmbnNbaV07XG4gICAgICAgIGlmIChpc0ZsdXNoYWJsZShmKSkge1xuICAgICAgICAgIHlpZWxkKiBuZXh0KGYobm9uZSksIGZucywgaSArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBuZWVkVG9GbHVzaCA9IGZucy5zb21lKChmbjogYW55KSA9PiBpc0ZsdXNoYWJsZShmbikpO1xuICBpZiAobmVlZFRvRmx1c2gpIGcgPSBmbHVzaGFibGUoZyk7XG4gIHJldHVybiBzZXRGdW5jdGlvbkxpc3QoZywgZm5zKTtcbn07XG5cbmNvbnN0IHdyaXRlID0gKGlucHV0OiBhbnksIGNodW5rOiBhbnksIGVuY29kaW5nOiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHtcbiAgbGV0IGVycm9yOiBhbnkgPSBudWxsO1xuICB0cnkge1xuICAgIGlucHV0LndyaXRlKGNodW5rLCBlbmNvZGluZywgKGU6IGFueSkgPT4gY2FsbGJhY2soZSB8fCBlcnJvcikpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9XG59O1xuXG5jb25zdCBmaW5hbCA9IChpbnB1dDogYW55LCBjYWxsYmFjazogYW55KSA9PiB7XG4gIGxldCBlcnJvcjogYW55ID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBpbnB1dC5lbmQobnVsbCwgbnVsbCwgKGU6IGFueSkgPT4gY2FsbGJhY2soZSB8fCBlcnJvcikpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9XG59O1xuXG5jb25zdCByZWFkID0gKG91dHB1dDogYW55KSA9PiB7XG4gIG91dHB1dC5yZXN1bWUoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNoYWluKGZuczogYW55KSB7XG4gIGZucyA9IGZucy5mbGF0KEluZmluaXR5KS5maWx0ZXIoKGZuOiBhbnkpID0+IGZuKTtcblxuICBjb25zdCBzdHJlYW1zID0gZm5zXG4gICAgICAubWFwKChmbjogYW55KSA9PiAoaXNGdW5jdGlvbkxpc3QoZm4pID8gZ2V0RnVuY3Rpb25MaXN0KGZuKSA6IGZuKSlcbiAgICAgIC5mbGF0KEluZmluaXR5KVxuICAgICAgLnJlZHVjZShncm91cEZ1bmN0aW9ucywgW10pXG4gICAgICAubWFwKHByb2R1Y2VTdHJlYW1zKVxuICAgICAgLmZpbHRlcigoczogYW55KSA9PiBzKSxcbiAgICBpbnB1dCA9IHN0cmVhbXNbMF0sXG4gICAgb3V0cHV0ID0gc3RyZWFtcy5yZWR1Y2UoKG91dHB1dDogYW55LCBpdGVtOiBhbnkpID0+IChvdXRwdXQgJiYgb3V0cHV0LnBpcGUoaXRlbSkpIHx8IGl0ZW0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgbGV0IHN0cmVhbTogRHVwbGV4OyAvLyB3aWxsIGJlIGFzc2lnbmVkIGxhdGVyXG5cbiAgbGV0IHdyaXRlTWV0aG9kID0gKGNodW5rOiBhbnksIGVuY29kaW5nOiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHdyaXRlKGlucHV0LCBjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSxcbiAgICBmaW5hbE1ldGhvZCA9IChjYWxsYmFjazogYW55KSA9PiBmaW5hbChpbnB1dCwgY2FsbGJhY2spLFxuICAgIHJlYWRNZXRob2QgPSAoKSA9PiByZWFkKG91dHB1dCk7XG5cbiAgaWYgKCFpc1dyaXRhYmxlTm9kZVN0cmVhbShpbnB1dCkpIHtcbiAgICB3cml0ZU1ldGhvZCA9IChfMSwgXzIsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhudWxsKTtcbiAgICBmaW5hbE1ldGhvZCA9IChjYWxsYmFjaykgPT4gY2FsbGJhY2sobnVsbCk7XG4gICAgaW5wdXQub24oXCJlbmRcIiwgKCkgPT4gc3RyZWFtLmVuZCgpKTtcbiAgfVxuXG4gIGlmIChpc1JlYWRhYmxlTm9kZVN0cmVhbShvdXRwdXQpKSB7XG4gICAgb3V0cHV0Lm9uKFwiZGF0YVwiLCAoY2h1bms6IGFueSkgPT4gIXN0cmVhbS5wdXNoKGNodW5rKSAmJiBvdXRwdXQucGF1c2UoKSk7XG4gICAgb3V0cHV0Lm9uKFwiZW5kXCIsICgpID0+IHN0cmVhbS5wdXNoKG51bGwpKTtcbiAgfSBlbHNlIHtcbiAgICByZWFkTWV0aG9kID0gKCkgPT4ge307IC8vIG5vcFxuICAgIG91dHB1dC5vbihcImZpbmlzaFwiLCAoKSA9PiBzdHJlYW0ucHVzaChudWxsKSk7XG4gIH1cblxuICBzdHJlYW0gPSBuZXcgRHVwbGV4KFxuICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICB7IHdyaXRhYmxlT2JqZWN0TW9kZTogdHJ1ZSwgcmVhZGFibGVPYmplY3RNb2RlOiB0cnVlIH0sXG4gICAgICB7XG4gICAgICAgIHJlYWRhYmxlOiBpc1JlYWRhYmxlTm9kZVN0cmVhbShvdXRwdXQpLFxuICAgICAgICB3cml0YWJsZTogaXNXcml0YWJsZU5vZGVTdHJlYW0oaW5wdXQpLFxuICAgICAgICB3cml0ZTogd3JpdGVNZXRob2QsXG4gICAgICAgIGZpbmFsOiBmaW5hbE1ldGhvZCxcbiAgICAgICAgcmVhZDogcmVhZE1ldGhvZCxcbiAgICAgIH0sXG4gICAgKSxcbiAgKTtcbiAgLy8gQHRzLWlnbm9yZVxuICBzdHJlYW0uc3RyZWFtcyA9IHN0cmVhbXM7XG4gIC8vIEB0cy1pZ25vcmVcbiAgc3RyZWFtLmlucHV0ID0gaW5wdXQ7XG4gIC8vIEB0cy1pZ25vcmVcbiAgc3RyZWFtLm91dHB1dCA9IG91dHB1dDtcblxuICBpZiAoIWlzUmVhZGFibGVOb2RlU3RyZWFtKG91dHB1dCkpIHtcbiAgICBzdHJlYW0ucmVzdW1lKCk7XG4gIH1cblxuICAvLyBjb25uZWN0IGV2ZW50c1xuICBzdHJlYW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4gaXRlbS5vbihcImVycm9yXCIsIChlcnJvcjogYW55KSA9PiBzdHJlYW0uZW1pdChcImVycm9yXCIsIGVycm9yKSkpO1xuXG4gIHJldHVybiBzdHJlYW07XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuaW1wb3J0IHsgZmx1c2hhYmxlLCBnZW4sIG1hbnksIG5vbmUsIGNvbWJpbmVNYW55TXV0IH0gZnJvbSBcIi4vc3RyZWFtLWNoYWluXCI7XG5pbXBvcnQgeyBTdHJpbmdEZWNvZGVyIH0gZnJvbSBcIm5vZGU6c3RyaW5nX2RlY29kZXJcIjtcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcIm5vZGU6ZXZlbnRzXCI7XG5cbmNvbnN0IGZpeFV0ZjhTdHJlYW0gPSAoKSA9PiB7XG4gIGNvbnN0IHN0cmluZ0RlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcigpO1xuICBsZXQgaW5wdXQgPSBcIlwiO1xuICByZXR1cm4gZmx1c2hhYmxlKChjaHVuazogYW55KSA9PiB7XG4gICAgaWYgKGNodW5rID09PSBub25lKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBpbnB1dCArIHN0cmluZ0RlY29kZXIuZW5kKCk7XG4gICAgICBpbnB1dCA9IFwiXCI7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNodW5rID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmICghaW5wdXQpIHJldHVybiBjaHVuaztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGlucHV0ICsgY2h1bms7XG4gICAgICBpbnB1dCA9IFwiXCI7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAoY2h1bmsgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGlucHV0ICsgc3RyaW5nRGVjb2Rlci53cml0ZShjaHVuayk7XG4gICAgICBpbnB1dCA9IFwiXCI7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYSBCdWZmZXJcIik7XG4gIH0pO1xufTtcblxuY29uc3QgcGF0dGVybnMgPSB7XG4gIHZhbHVlMTogL1tcXFwiXFx7XFxbXFxdXFwtXFxkXXx0cnVlXFxifGZhbHNlXFxifG51bGxcXGJ8XFxzezEsMjU2fS95LFxuICBzdHJpbmc6IC9bXlxceDAwLVxceDFmXFxcIlxcXFxdezEsMjU2fXxcXFxcW2JmbnJ0XFxcIlxcXFxcXC9dfFxcXFx1W1xcZGEtZkEtRl17NH18XFxcIi95LFxuICBrZXkxOiAvW1xcXCJcXH1dfFxcc3sxLDI1Nn0veSxcbiAgY29sb246IC9cXDp8XFxzezEsMjU2fS95LFxuICBjb21tYTogL1tcXCxcXF1cXH1dfFxcc3sxLDI1Nn0veSxcbiAgd3M6IC9cXHN7MSwyNTZ9L3ksXG4gIG51bWJlclN0YXJ0OiAvXFxkL3ksXG4gIG51bWJlckRpZ2l0OiAvXFxkezAsMjU2fS95LFxuICBudW1iZXJGcmFjdGlvbjogL1tcXC5lRV0veSxcbiAgbnVtYmVyRXhwb25lbnQ6IC9bZUVdL3ksXG4gIG51bWJlckV4cFNpZ246IC9bLStdL3ksXG59O1xuY29uc3QgTUFYX1BBVFRFUk5fU0laRSA9IDE2O1xuXG5jb25zdCB2YWx1ZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7IHRydWU6IHRydWUsIGZhbHNlOiBmYWxzZSwgbnVsbDogbnVsbCB9LFxuICBleHBlY3RlZDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHsgb2JqZWN0OiBcIm9iamVjdFN0b3BcIiwgYXJyYXk6IFwiYXJyYXlTdG9wXCIsIFwiXCI6IFwiZG9uZVwiIH07XG5cbi8vIGxvbmcgaGV4YWRlY2ltYWwgY29kZXM6IFxcdVhYWFhcbmNvbnN0IGZyb21IZXggPSAoczogc3RyaW5nKSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KHMuc2xpY2UoMiksIDE2KSk7XG5cbi8vIHNob3J0IGNvZGVzOiBcXGIgXFxmIFxcbiBcXHIgXFx0IFxcXCIgXFxcXCBcXC9cbmNvbnN0IGNvZGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICBiOiBcIlxcYlwiLFxuICBmOiBcIlxcZlwiLFxuICBuOiBcIlxcblwiLFxuICByOiBcIlxcclwiLFxuICB0OiBcIlxcdFwiLFxuICAnXCInOiAnXCInLFxuICBcIlxcXFxcIjogXCJcXFxcXCIsXG4gIFwiL1wiOiBcIi9cIixcbn07XG5cbmNvbnN0IGpzb25QYXJzZXIgPSAob3B0aW9ucz86IGFueSkgPT4ge1xuICBsZXQgcGFja0tleXMgPSB0cnVlLFxuICAgIHBhY2tTdHJpbmdzID0gdHJ1ZSxcbiAgICBwYWNrTnVtYmVycyA9IHRydWUsXG4gICAgc3RyZWFtS2V5cyA9IHRydWUsXG4gICAgc3RyZWFtU3RyaW5ncyA9IHRydWUsXG4gICAgc3RyZWFtTnVtYmVycyA9IHRydWUsXG4gICAganNvblN0cmVhbWluZyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgXCJwYWNrVmFsdWVzXCIgaW4gb3B0aW9ucyAmJiAocGFja0tleXMgPSBwYWNrU3RyaW5ncyA9IHBhY2tOdW1iZXJzID0gb3B0aW9ucy5wYWNrVmFsdWVzKTtcbiAgICBcInBhY2tLZXlzXCIgaW4gb3B0aW9ucyAmJiAocGFja0tleXMgPSBvcHRpb25zLnBhY2tLZXlzKTtcbiAgICBcInBhY2tTdHJpbmdzXCIgaW4gb3B0aW9ucyAmJiAocGFja1N0cmluZ3MgPSBvcHRpb25zLnBhY2tTdHJpbmdzKTtcbiAgICBcInBhY2tOdW1iZXJzXCIgaW4gb3B0aW9ucyAmJiAocGFja051bWJlcnMgPSBvcHRpb25zLnBhY2tOdW1iZXJzKTtcbiAgICBcInN0cmVhbVZhbHVlc1wiIGluIG9wdGlvbnMgJiYgKHN0cmVhbUtleXMgPSBzdHJlYW1TdHJpbmdzID0gc3RyZWFtTnVtYmVycyA9IG9wdGlvbnMuc3RyZWFtVmFsdWVzKTtcbiAgICBcInN0cmVhbUtleXNcIiBpbiBvcHRpb25zICYmIChzdHJlYW1LZXlzID0gb3B0aW9ucy5zdHJlYW1LZXlzKTtcbiAgICBcInN0cmVhbVN0cmluZ3NcIiBpbiBvcHRpb25zICYmIChzdHJlYW1TdHJpbmdzID0gb3B0aW9ucy5zdHJlYW1TdHJpbmdzKTtcbiAgICBcInN0cmVhbU51bWJlcnNcIiBpbiBvcHRpb25zICYmIChzdHJlYW1OdW1iZXJzID0gb3B0aW9ucy5zdHJlYW1OdW1iZXJzKTtcbiAgICBqc29uU3RyZWFtaW5nID0gb3B0aW9ucy5qc29uU3RyZWFtaW5nO1xuICB9XG5cbiAgIXBhY2tLZXlzICYmIChzdHJlYW1LZXlzID0gdHJ1ZSk7XG4gICFwYWNrU3RyaW5ncyAmJiAoc3RyZWFtU3RyaW5ncyA9IHRydWUpO1xuICAhcGFja051bWJlcnMgJiYgKHN0cmVhbU51bWJlcnMgPSB0cnVlKTtcblxuICBsZXQgZG9uZSA9IGZhbHNlLFxuICAgIGV4cGVjdCA9IGpzb25TdHJlYW1pbmcgPyBcImRvbmVcIiA6IFwidmFsdWVcIixcbiAgICBwYXJlbnQgPSBcIlwiLFxuICAgIG9wZW5OdW1iZXIgPSBmYWxzZSxcbiAgICBhY2N1bXVsYXRvciA9IFwiXCIsXG4gICAgYnVmZmVyID0gXCJcIjtcblxuICBjb25zdCBzdGFjazogYW55W10gPSBbXTtcblxuICByZXR1cm4gZmx1c2hhYmxlKChidWY6IGFueSkgPT4ge1xuICAgIGNvbnN0IHRva2VuczogYW55W10gPSBbXTtcblxuICAgIGlmIChidWYgPT09IG5vbmUpIHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWZmZXIgKz0gYnVmO1xuICAgIH1cblxuICAgIGxldCBtYXRjaDogYW55O1xuICAgIGxldCB2YWx1ZTogYW55O1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICBtYWluOiBmb3IgKDs7KSB7XG4gICAgICBzd2l0Y2ggKGV4cGVjdCkge1xuICAgICAgICBjYXNlIFwidmFsdWUxXCI6XG4gICAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgICAgIHBhdHRlcm5zLnZhbHVlMS5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLnZhbHVlMS5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGRvbmUgfHwgaW5kZXggKyBNQVhfUEFUVEVSTl9TSVpFIDwgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCBhIHZhbHVlXCIpO1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgaGFzIGV4cGVjdGVkIGEgdmFsdWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSAnXCInOlxuICAgICAgICAgICAgICBpZiAoc3RyZWFtU3RyaW5ncykgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0U3RyaW5nXCIgfSk7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIntcIjpcbiAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0T2JqZWN0XCIgfSk7XG4gICAgICAgICAgICAgIHN0YWNrLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgICAgcGFyZW50ID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJrZXkxXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIltcIjpcbiAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0QXJyYXlcIiB9KTtcbiAgICAgICAgICAgICAgc3RhY2sucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICBwYXJlbnQgPSBcImFycmF5XCI7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwidmFsdWUxXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIl1cIjpcbiAgICAgICAgICAgICAgaWYgKGV4cGVjdCAhPT0gXCJ2YWx1ZTFcIikgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogdW5leHBlY3RlZCB0b2tlbiAnXSdcIik7XG4gICAgICAgICAgICAgIGlmIChvcGVuTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmROdW1iZXJcIiB9KTtcbiAgICAgICAgICAgICAgICBvcGVuTnVtYmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyVmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwiZW5kQXJyYXlcIiB9KTtcbiAgICAgICAgICAgICAgcGFyZW50ID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgICAgb3Blbk51bWJlciA9IHRydWU7XG4gICAgICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0TnVtYmVyXCIgfSwgeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiBcIi1cIiB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgPSBcIi1cIik7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyU3RhcnRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiMFwiOlxuICAgICAgICAgICAgICBvcGVuTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RhcnROdW1iZXJcIiB9LCB7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IFwiMFwiIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciA9IFwiMFwiKTtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJGcmFjdGlvblwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgICAgY2FzZSBcIjNcIjpcbiAgICAgICAgICAgIGNhc2UgXCI0XCI6XG4gICAgICAgICAgICBjYXNlIFwiNVwiOlxuICAgICAgICAgICAgY2FzZSBcIjZcIjpcbiAgICAgICAgICAgIGNhc2UgXCI3XCI6XG4gICAgICAgICAgICBjYXNlIFwiOFwiOlxuICAgICAgICAgICAgY2FzZSBcIjlcIjpcbiAgICAgICAgICAgICAgb3Blbk51bWJlciA9IHRydWU7XG4gICAgICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0TnVtYmVyXCIgfSwgeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgPSB2YWx1ZSk7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRGlnaXRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidHJ1ZVwiOlxuICAgICAgICAgICAgY2FzZSBcImZhbHNlXCI6XG4gICAgICAgICAgICBjYXNlIFwibnVsbFwiOlxuICAgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGluZGV4ID09PSB2YWx1ZS5sZW5ndGggJiYgIWRvbmUpIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiB2YWx1ZSArIFwiVmFsdWVcIiwgdmFsdWU6IHZhbHVlc1t2YWx1ZV0gfSk7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gZGVmYXVsdDogLy8gd3NcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwia2V5VmFsXCI6XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICBwYXR0ZXJucy5zdHJpbmcubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5zdHJpbmcuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggJiYgKGRvbmUgfHwgYnVmZmVyLmxlbmd0aCAtIGluZGV4ID49IDYpKVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBlc2NhcGVkIGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICBpZiAoZG9uZSkgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGhhcyBleHBlY3RlZCBhIHN0cmluZyB2YWx1ZVwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdcIicpIHtcbiAgICAgICAgICAgIGlmIChleHBlY3QgPT09IFwia2V5VmFsXCIpIHtcbiAgICAgICAgICAgICAgaWYgKHN0cmVhbUtleXMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmRLZXlcIiB9KTtcbiAgICAgICAgICAgICAgaWYgKHBhY2tLZXlzKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcImtleVZhbHVlXCIsIHZhbHVlOiBhY2N1bXVsYXRvciB9KTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJjb2xvblwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHN0cmVhbVN0cmluZ3MpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmRTdHJpbmdcIiB9KTtcbiAgICAgICAgICAgICAgaWYgKHBhY2tTdHJpbmdzKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0cmluZ1ZhbHVlXCIsIHZhbHVlOiBhY2N1bXVsYXRvciB9KTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLmxlbmd0aCA+IDEgJiYgdmFsdWUuY2hhckF0KDApID09PSBcIlxcXFxcIikge1xuICAgICAgICAgICAgY29uc3QgdCA9IHZhbHVlLmxlbmd0aCA9PSAyID8gY29kZXNbdmFsdWUuY2hhckF0KDEpXSA6IGZyb21IZXgodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGV4cGVjdCA9PT0gXCJrZXlWYWxcIiA/IHN0cmVhbUtleXMgOiBzdHJlYW1TdHJpbmdzKSB7XG4gICAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgbmFtZTogXCJzdHJpbmdDaHVua1wiLCB2YWx1ZTogdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBlY3QgPT09IFwia2V5VmFsXCIgPyBwYWNrS2V5cyA6IHBhY2tTdHJpbmdzKSB7XG4gICAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChleHBlY3QgPT09IFwia2V5VmFsXCIgPyBzdHJlYW1LZXlzIDogc3RyZWFtU3RyaW5ncykge1xuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwic3RyaW5nQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGVjdCA9PT0gXCJrZXlWYWxcIiA/IHBhY2tLZXlzIDogcGFja1N0cmluZ3MpIHtcbiAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImtleTFcIjpcbiAgICAgICAgY2FzZSBcImtleVwiOlxuICAgICAgICAgIHBhdHRlcm5zLmtleTEubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5rZXkxLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkIGFuIG9iamVjdCBrZXlcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHZhbHVlID09PSAnXCInKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtS2V5cykgdG9rZW5zLnB1c2goeyBuYW1lOiBcInN0YXJ0S2V5XCIgfSk7XG4gICAgICAgICAgICBleHBlY3QgPSBcImtleVZhbFwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IFwifVwiKSB7XG4gICAgICAgICAgICBpZiAoZXhwZWN0ICE9PSBcImtleTFcIikgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogdW5leHBlY3RlZCB0b2tlbiAnfSdcIik7XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwiZW5kT2JqZWN0XCIgfSk7XG4gICAgICAgICAgICBwYXJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNvbG9uXCI6XG4gICAgICAgICAgcGF0dGVybnMuY29sb24ubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5jb2xvbi5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCAnOidcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgdmFsdWUgPT09IFwiOlwiICYmIChleHBlY3QgPSBcInZhbHVlXCIpO1xuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFycmF5U3RvcFwiOlxuICAgICAgICBjYXNlIFwib2JqZWN0U3RvcFwiOlxuICAgICAgICAgIHBhdHRlcm5zLmNvbW1hLmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMuY29tbWEuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggfHwgZG9uZSkgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogZXhwZWN0ZWQgJywnXCIpO1xuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3Blbk51bWJlcikge1xuICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmROdW1iZXJcIiB9KTtcbiAgICAgICAgICAgIG9wZW5OdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChwYWNrTnVtYmVycykge1xuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyVmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHZhbHVlID09PSBcIixcIikge1xuICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ID09PSBcImFycmF5U3RvcFwiID8gXCJ2YWx1ZVwiIDogXCJrZXlcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBcIn1cIiB8fCB2YWx1ZSA9PT0gXCJdXCIpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJ9XCIgPyBleHBlY3QgPT09IFwiYXJyYXlTdG9wXCIgOiBleHBlY3QgIT09IFwiYXJyYXlTdG9wXCIpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogZXhwZWN0ZWQgJ1wiICsgKGV4cGVjdCA9PT0gXCJhcnJheVN0b3BcIiA/IFwiXVwiIDogXCJ9XCIpICsgXCInXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW5zLnB1c2goeyBuYW1lOiB2YWx1ZSA9PT0gXCJ9XCIgPyBcImVuZE9iamVjdFwiIDogXCJlbmRBcnJheVwiIH0pO1xuICAgICAgICAgICAgcGFyZW50ID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBleHBlY3QgPSBleHBlY3RlZFtwYXJlbnRdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIG51bWJlciBjaHVua3NcbiAgICAgICAgY2FzZSBcIm51bWJlclN0YXJ0XCI6IC8vIFswLTldXG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyU3RhcnQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJTdGFydC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKSB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCBhIHN0YXJ0aW5nIGRpZ2l0XCIpO1xuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciArPSB2YWx1ZSk7XG4gICAgICAgICAgZXhwZWN0ID0gdmFsdWUgPT09IFwiMFwiID8gXCJudW1iZXJGcmFjdGlvblwiIDogXCJudW1iZXJEaWdpdFwiO1xuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm51bWJlckRpZ2l0XCI6IC8vIFswLTldKlxuICAgICAgICAgIHBhdHRlcm5zLm51bWJlckRpZ2l0Lmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMubnVtYmVyRGlnaXQuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGggfHwgZG9uZSkgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VyIGNhbm5vdCBwYXJzZSBpbnB1dDogZXhwZWN0ZWQgYSBkaWdpdFwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckZyYWN0aW9uXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRnJhY3Rpb25cIjogLy8gW1xcLmVFXT9cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJGcmFjdGlvbi5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlckZyYWN0aW9uLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gZXhwZWN0ZWRbcGFyZW50XTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICBleHBlY3QgPSB2YWx1ZSA9PT0gXCIuXCIgPyBcIm51bWJlckZyYWNTdGFydFwiIDogXCJudW1iZXJFeHBTaWduXCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRnJhY1N0YXJ0XCI6IC8vIFswLTldXG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyU3RhcnQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJTdGFydC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZXIgY2Fubm90IHBhcnNlIGlucHV0OiBleHBlY3RlZCBhIGZyYWN0aW9uYWwgcGFydCBvZiBhIG51bWJlclwiKTtcbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRnJhY0RpZ2l0XCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRnJhY0RpZ2l0XCI6IC8vIFswLTldKlxuICAgICAgICAgIHBhdHRlcm5zLm51bWJlckRpZ2l0Lmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMubnVtYmVyRGlnaXQuZXhlYyhidWZmZXIpO1xuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIHBhY2tOdW1iZXJzICYmIChhY2N1bXVsYXRvciArPSB2YWx1ZSk7XG4gICAgICAgICAgICBpbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ID0gXCJudW1iZXJFeHBvbmVudFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm51bWJlckV4cG9uZW50XCI6IC8vIFtlRV0/XG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyRXhwb25lbnQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJFeHBvbmVudC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBleHBlY3RlZFtwYXJlbnRdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IFwiZG9uZVwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAoc3RyZWFtTnVtYmVycykgdG9rZW5zLnB1c2goeyBuYW1lOiBcIm51bWJlckNodW5rXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwYWNrTnVtYmVycyAmJiAoYWNjdW11bGF0b3IgKz0gdmFsdWUpO1xuICAgICAgICAgIGV4cGVjdCA9IFwibnVtYmVyRXhwU2lnblwiO1xuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm51bWJlckV4cFNpZ25cIjogLy8gWy0rXT9cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJFeHBTaWduLmxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1hdGNoID0gcGF0dGVybnMubnVtYmVyRXhwU2lnbi5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckV4cFN0YXJ0XCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvbmUpIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBoYXMgZXhwZWN0ZWQgYW4gZXhwb25lbnQgdmFsdWUgb2YgYSBudW1iZXJcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckV4cFN0YXJ0XCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRXhwU3RhcnRcIjogLy8gWzAtOV1cbiAgICAgICAgICBwYXR0ZXJucy5udW1iZXJTdGFydC5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLm51bWJlclN0YXJ0LmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoIHx8IGRvbmUpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IGV4cGVjdGVkIGFuIGV4cG9uZW50IHBhcnQgb2YgYSBudW1iZXJcIik7XG4gICAgICAgICAgICBicmVhayBtYWluOyAvLyB3YWl0IGZvciBtb3JlIGlucHV0XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gbWF0Y2hbMF07XG4gICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJudW1iZXJDaHVua1wiLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICBleHBlY3QgPSBcIm51bWJlckV4cERpZ2l0XCI7XG4gICAgICAgICAgaW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibnVtYmVyRXhwRGlnaXRcIjogLy8gWzAtOV0qXG4gICAgICAgICAgcGF0dGVybnMubnVtYmVyRGlnaXQubGFzdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbWF0Y2ggPSBwYXR0ZXJucy5udW1iZXJEaWdpdC5leGVjKGJ1ZmZlcik7XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1OdW1iZXJzKSB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyQ2h1bmtcIiwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgcGFja051bWJlcnMgJiYgKGFjY3VtdWxhdG9yICs9IHZhbHVlKTtcbiAgICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYnVmZmVyLmxlbmd0aCB8fCBkb25lKSB7XG4gICAgICAgICAgICAgIGV4cGVjdCA9IGV4cGVjdGVkW3BhcmVudF07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWsgbWFpbjsgLy8gd2FpdCBmb3IgbW9yZSBpbnB1dFxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRvbmVcIjpcbiAgICAgICAgICBwYXR0ZXJucy53cy5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtYXRjaCA9IHBhdHRlcm5zLndzLmV4ZWMoYnVmZmVyKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGlmIChqc29uU3RyZWFtaW5nKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ID0gXCJ2YWx1ZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlciBjYW5ub3QgcGFyc2UgaW5wdXQ6IHVuZXhwZWN0ZWQgY2hhcmFjdGVyc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrIG1haW47IC8vIHdhaXQgZm9yIG1vcmUgaW5wdXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICBpZiAob3Blbk51bWJlcikge1xuICAgICAgICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmROdW1iZXJcIiB9KTtcbiAgICAgICAgICAgIG9wZW5OdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChwYWNrTnVtYmVycykge1xuICAgICAgICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyVmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4ICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvbmUgJiYgb3Blbk51bWJlcikge1xuICAgICAgaWYgKHN0cmVhbU51bWJlcnMpIHRva2Vucy5wdXNoKHsgbmFtZTogXCJlbmROdW1iZXJcIiB9KTtcbiAgICAgIG9wZW5OdW1iZXIgPSBmYWxzZTtcbiAgICAgIGlmIChwYWNrTnVtYmVycykge1xuICAgICAgICB0b2tlbnMucHVzaCh7IG5hbWU6IFwibnVtYmVyVmFsdWVcIiwgdmFsdWU6IGFjY3VtdWxhdG9yIH0pO1xuICAgICAgICBhY2N1bXVsYXRvciA9IFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShpbmRleCk7XG4gICAgcmV0dXJuIHRva2Vucy5sZW5ndGggPyBtYW55KHRva2VucykgOiBub25lO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZXIgPSAob3B0aW9ucz86IGFueSkgPT4gZ2VuKGZpeFV0ZjhTdHJlYW0oKSwganNvblBhcnNlcihvcHRpb25zKSk7XG5cbmNvbnN0IHdpdGhQYXJzZXIgPSAoZm46IGFueSwgb3B0aW9ucz86IGFueSkgPT4gZ2VuKHBhcnNlcihvcHRpb25zKSwgZm4ob3B0aW9ucykpO1xuXG5jb25zdCBjaGVja2FibGVUb2tlbnMgPSB7XG4gICAgc3RhcnRPYmplY3Q6IDEsXG4gICAgc3RhcnRBcnJheTogMSxcbiAgICBzdGFydFN0cmluZzogMSxcbiAgICBzdGFydE51bWJlcjogMSxcbiAgICBudWxsVmFsdWU6IDEsXG4gICAgdHJ1ZVZhbHVlOiAxLFxuICAgIGZhbHNlVmFsdWU6IDEsXG4gICAgc3RyaW5nVmFsdWU6IDEsXG4gICAgbnVtYmVyVmFsdWU6IDEsXG4gIH0sXG4gIHN0b3BUb2tlbnMgPSB7XG4gICAgc3RhcnRPYmplY3Q6IFwiZW5kT2JqZWN0XCIsXG4gICAgc3RhcnRBcnJheTogXCJlbmRBcnJheVwiLFxuICAgIHN0YXJ0U3RyaW5nOiBcImVuZFN0cmluZ1wiLFxuICAgIHN0YXJ0TnVtYmVyOiBcImVuZE51bWJlclwiLFxuICB9LFxuICBvcHRpb25hbFRva2VucyA9IHsgZW5kU3RyaW5nOiBcInN0cmluZ1ZhbHVlXCIsIGVuZE51bWJlcjogXCJudW1iZXJWYWx1ZVwiIH07XG5cbmNvbnN0IGRlZmF1bHRGaWx0ZXIgPSAoX3N0YWNrOiBzdHJpbmdbXSwgX2E6IGFueSkgPT4gdHJ1ZTtcblxuY29uc3Qgc3RyaW5nRmlsdGVyID0gKHN0cmluZzogc3RyaW5nLCBzZXBhcmF0b3I6IHN0cmluZykgPT4ge1xuICBjb25zdCBzdHJpbmdXaXRoU2VwYXJhdG9yID0gc3RyaW5nICsgc2VwYXJhdG9yO1xuICByZXR1cm4gKHN0YWNrOiBzdHJpbmdbXSwgX2E6IGFueSkgPT4ge1xuICAgIGNvbnN0IHBhdGggPSBzdGFjay5qb2luKHNlcGFyYXRvcik7XG4gICAgcmV0dXJuIHBhdGggPT09IHN0cmluZyB8fCBwYXRoLnN0YXJ0c1dpdGgoc3RyaW5nV2l0aFNlcGFyYXRvcik7XG4gIH07XG59O1xuXG5jb25zdCByZWdFeHBGaWx0ZXIgPSAocmVnRXhwOiBSZWdFeHAsIHNlcGFyYXRvcjogc3RyaW5nKSA9PiB7XG4gIHJldHVybiAoc3RhY2s6IHN0cmluZ1tdLCBfYTogYW55KSA9PiByZWdFeHAudGVzdChzdGFjay5qb2luKHNlcGFyYXRvcikpO1xufTtcblxuY29uc3QgZmlsdGVyQmFzZSA9XG4gICh7XG4gICAgc3BlY2lhbEFjdGlvbiA9IFwiYWNjZXB0XCIsXG4gICAgZGVmYXVsdEFjdGlvbiA9IFwiaWdub3JlXCIsXG4gICAgbm9uQ2hlY2thYmxlQWN0aW9uID0gXCJwcm9jZXNzLWtleVwiLFxuICAgIHRyYW5zaXRpb24gPSB1bmRlZmluZWQgYXMgYW55LFxuICB9ID0ge30pID0+XG4gIChvcHRpb25zOiBhbnkpID0+IHtcbiAgICBjb25zdCBvbmNlID0gb3B0aW9ucz8ub25jZSxcbiAgICAgIHNlcGFyYXRvciA9IG9wdGlvbnM/LnBhdGhTZXBhcmF0b3IgfHwgXCIuXCI7XG4gICAgbGV0IGZpbHRlciA9IGRlZmF1bHRGaWx0ZXIsXG4gICAgICBzdHJlYW1LZXlzID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbHRlciA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmZpbHRlciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGZpbHRlciA9IHN0cmluZ0ZpbHRlcihvcHRpb25zLmZpbHRlciwgc2VwYXJhdG9yKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5maWx0ZXIgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgZmlsdGVyID0gcmVnRXhwRmlsdGVyKG9wdGlvbnMuZmlsdGVyLCBzZXBhcmF0b3IpO1xuICAgICAgfVxuICAgICAgaWYgKFwic3RyZWFtVmFsdWVzXCIgaW4gb3B0aW9ucykgc3RyZWFtS2V5cyA9IG9wdGlvbnMuc3RyZWFtVmFsdWVzO1xuICAgICAgaWYgKFwic3RyZWFtS2V5c1wiIGluIG9wdGlvbnMpIHN0cmVhbUtleXMgPSBvcHRpb25zLnN0cmVhbUtleXM7XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCB7IGZpbHRlciwgc3RyZWFtS2V5cywgc2VwYXJhdG9yIH0pO1xuICAgIGxldCBzdGF0ZSA9IFwiY2hlY2tcIjtcbiAgICBjb25zdCBzdGFjazogYW55W10gPSBbXTtcbiAgICBsZXQgZGVwdGggPSAwLFxuICAgICAgcHJldmlvdXNUb2tlbiA9IFwiXCIsXG4gICAgICBlbmRUb2tlbiA9IFwiXCIsXG4gICAgICBvcHRpb25hbFRva2VuID0gXCJcIixcbiAgICAgIHN0YXJ0VHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgIHJldHVybiBmbHVzaGFibGUoKGNodW5rKSA9PiB7XG4gICAgICAvLyB0aGUgZmx1c2hcbiAgICAgIGlmIChjaHVuayA9PT0gbm9uZSkgcmV0dXJuIHRyYW5zaXRpb24gPyB0cmFuc2l0aW9uKFtdLCBudWxsLCBcImZsdXNoXCIsIHNhbml0aXplZE9wdGlvbnMpIDogbm9uZTtcblxuICAgICAgLy8gcHJvY2VzcyB0aGUgb3B0aW9uYWwgdmFsdWUgdG9rZW4gKHVuZmluaXNoZWQpXG4gICAgICBpZiAob3B0aW9uYWxUb2tlbikge1xuICAgICAgICBpZiAob3B0aW9uYWxUb2tlbiA9PT0gY2h1bmsubmFtZSkge1xuICAgICAgICAgIGxldCByZXR1cm5Ub2tlbiA9IG5vbmU7XG4gICAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInByb2Nlc3Mta2V5XCI6XG4gICAgICAgICAgICAgIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICAgIHN0YXRlID0gXCJjaGVja1wiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhY2NlcHQtdmFsdWVcIjpcbiAgICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSBjaHVuaztcbiAgICAgICAgICAgICAgc3RhdGUgPSBvbmNlID8gXCJwYXNzXCIgOiBcImNoZWNrXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgc3RhdGUgPSBvbmNlID8gXCJhbGxcIiA6IFwiY2hlY2tcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wdGlvbmFsVG9rZW4gPSBcIlwiO1xuICAgICAgICAgIHJldHVybiByZXR1cm5Ub2tlbjtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25hbFRva2VuID0gXCJcIjtcbiAgICAgICAgc3RhdGUgPSBvbmNlICYmIHN0YXRlICE9PSBcInByb2Nlc3Mta2V5XCIgPyBcInBhc3NcIiA6IFwiY2hlY2tcIjtcbiAgICAgIH1cblxuICAgICAgbGV0IHJldHVyblRva2VuOiBhbnkgPSBub25lO1xuXG4gICAgICByZWNoZWNrOiBmb3IgKDs7KSB7XG4gICAgICAgIC8vIGFjY2VwdC9yZWplY3QgdG9rZW5zXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJvY2Vzcy1rZXlcIjpcbiAgICAgICAgICAgIGlmIChjaHVuay5uYW1lID09PSBcImVuZEtleVwiKSBvcHRpb25hbFRva2VuID0gXCJrZXlWYWx1ZVwiO1xuICAgICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgICAgY2FzZSBcInBhc3NcIjpcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICAgIGNhc2UgXCJhbGxcIjpcbiAgICAgICAgICAgIHJldHVybiBjaHVuaztcbiAgICAgICAgICBjYXNlIFwiYWNjZXB0XCI6XG4gICAgICAgICAgY2FzZSBcInJlamVjdFwiOlxuICAgICAgICAgICAgaWYgKHN0YXJ0VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICBzdGFydFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSB0cmFuc2l0aW9uKHN0YWNrLCBjaHVuaywgc3RhdGUsIHNhbml0aXplZE9wdGlvbnMpIHx8IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGNodW5rLm5hbWUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0T2JqZWN0XCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJzdGFydEFycmF5XCI6XG4gICAgICAgICAgICAgICAgKytkZXB0aDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcImVuZE9iamVjdFwiOlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kQXJyYXlcIjpcbiAgICAgICAgICAgICAgICAtLWRlcHRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBcImFjY2VwdFwiKSB7XG4gICAgICAgICAgICAgIHJldHVyblRva2VuID0gY29tYmluZU1hbnlNdXQocmV0dXJuVG9rZW4sIGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGVwdGgpIHtcbiAgICAgICAgICAgICAgaWYgKG9uY2UpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0YXRlID09PSBcImFjY2VwdFwiID8gXCJwYXNzXCIgOiBcImFsbFwiO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gXCJjaGVja1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVG9rZW47XG4gICAgICAgICAgY2FzZSBcImFjY2VwdC12YWx1ZVwiOlxuICAgICAgICAgIGNhc2UgXCJyZWplY3QtdmFsdWVcIjpcbiAgICAgICAgICAgIGlmIChzdGFydFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgc3RhcnRUcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVyblRva2VuID0gdHJhbnNpdGlvbihzdGFjaywgY2h1bmssIHN0YXRlLCBzYW5pdGl6ZWRPcHRpb25zKSB8fCBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBcImFjY2VwdC12YWx1ZVwiKSB7XG4gICAgICAgICAgICAgIHJldHVyblRva2VuID0gY29tYmluZU1hbnlNdXQocmV0dXJuVG9rZW4sIGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaHVuay5uYW1lID09PSBlbmRUb2tlbikge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIG9wdGlvbmFsVG9rZW4gPSBvcHRpb25hbFRva2Vuc1tlbmRUb2tlbl0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgZW5kVG9rZW4gPSBcIlwiO1xuICAgICAgICAgICAgICBpZiAoIW9wdGlvbmFsVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAob25jZSkge1xuICAgICAgICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZSA9PT0gXCJhY2NlcHQtdmFsdWVcIiA/IFwicGFzc1wiIDogXCJhbGxcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVG9rZW47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxhc3QgaW5kZXggaW4gdGhlIHN0YWNrXG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIC8vIGFycmF5XG4gICAgICAgICAgc3dpdGNoIChjaHVuay5uYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwic3RhcnRPYmplY3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydEFycmF5XCI6XG4gICAgICAgICAgICBjYXNlIFwic3RhcnRTdHJpbmdcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydE51bWJlclwiOlxuICAgICAgICAgICAgY2FzZSBcIm51bGxWYWx1ZVwiOlxuICAgICAgICAgICAgY2FzZSBcInRydWVWYWx1ZVwiOlxuICAgICAgICAgICAgY2FzZSBcImZhbHNlVmFsdWVcIjpcbiAgICAgICAgICAgICAgKytzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibnVtYmVyVmFsdWVcIjpcbiAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVG9rZW4gIT09IFwiZW5kTnVtYmVyXCIpICsrc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1ZhbHVlXCI6XG4gICAgICAgICAgICAgIGlmIChwcmV2aW91c1Rva2VuICE9PSBcImVuZFN0cmluZ1wiKSArK3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNodW5rLm5hbWUgPT09IFwia2V5VmFsdWVcIikgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPSBjaHVuay52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c1Rva2VuID0gY2h1bmsubmFtZTtcblxuICAgICAgICAvLyBjaGVjayB0aGUgdG9rZW5cbiAgICAgICAgY29uc3QgYWN0aW9uID1cbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY2hlY2thYmxlVG9rZW5zW2NodW5rLm5hbWVdICE9PSAxID8gbm9uQ2hlY2thYmxlQWN0aW9uIDogZmlsdGVyKHN0YWNrLCBjaHVuaykgPyBzcGVjaWFsQWN0aW9uIDogZGVmYXVsdEFjdGlvbjtcblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGVuZFRva2VuID0gc3RvcFRva2Vuc1tjaHVuay5uYW1lXSB8fCBcIlwiO1xuICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICAgIGNhc2UgXCJwcm9jZXNzLWtleVwiOlxuICAgICAgICAgICAgaWYgKGNodW5rLm5hbWUgPT09IFwic3RhcnRLZXlcIikge1xuICAgICAgICAgICAgICBzdGF0ZSA9IFwicHJvY2Vzcy1rZXlcIjtcbiAgICAgICAgICAgICAgY29udGludWUgcmVjaGVjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhY2NlcHQtdG9rZW5cIjpcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGlmIChlbmRUb2tlbiAmJiBvcHRpb25hbFRva2Vuc1tlbmRUb2tlbl0pIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBcImFjY2VwdC12YWx1ZVwiO1xuICAgICAgICAgICAgICBzdGFydFRyYW5zaXRpb24gPSAhIXRyYW5zaXRpb247XG4gICAgICAgICAgICAgIGNvbnRpbnVlIHJlY2hlY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikgcmV0dXJuVG9rZW4gPSB0cmFuc2l0aW9uKHN0YWNrLCBjaHVuaywgYWN0aW9uLCBzYW5pdGl6ZWRPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVyblRva2VuID0gY29tYmluZU1hbnlNdXQocmV0dXJuVG9rZW4sIGNodW5rKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhY2NlcHRcIjpcbiAgICAgICAgICAgIGlmIChlbmRUb2tlbikge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIHN0YXRlID0gb3B0aW9uYWxUb2tlbnNbZW5kVG9rZW5dID8gXCJhY2NlcHQtdmFsdWVcIiA6IFwiYWNjZXB0XCI7XG4gICAgICAgICAgICAgIHN0YXJ0VHJhbnNpdGlvbiA9ICEhdHJhbnNpdGlvbjtcbiAgICAgICAgICAgICAgY29udGludWUgcmVjaGVjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uKSByZXR1cm5Ub2tlbiA9IHRyYW5zaXRpb24oc3RhY2ssIGNodW5rLCBhY3Rpb24sIHNhbml0aXplZE9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuVG9rZW4gPSBjb21iaW5lTWFueU11dChyZXR1cm5Ub2tlbiwgY2h1bmspO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInJlamVjdFwiOlxuICAgICAgICAgICAgaWYgKGVuZFRva2VuKSB7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgc3RhdGUgPSBvcHRpb25hbFRva2Vuc1tlbmRUb2tlbl0gPyBcInJlamVjdC12YWx1ZVwiIDogXCJyZWplY3RcIjtcbiAgICAgICAgICAgICAgc3RhcnRUcmFuc2l0aW9uID0gISF0cmFuc2l0aW9uO1xuICAgICAgICAgICAgICBjb250aW51ZSByZWNoZWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHJldHVyblRva2VuID0gdHJhbnNpdGlvbihzdGFjaywgY2h1bmssIGFjdGlvbiwgc2FuaXRpemVkT3B0aW9ucyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwicGFzc1wiOlxuICAgICAgICAgICAgc3RhdGUgPSBcInBhc3NcIjtcbiAgICAgICAgICAgIGNvbnRpbnVlIHJlY2hlY2s7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gdXBkYXRlIHRoZSBzdGFja1xuICAgICAgc3dpdGNoIChjaHVuay5uYW1lKSB7XG4gICAgICAgIGNhc2UgXCJzdGFydE9iamVjdFwiOlxuICAgICAgICAgIHN0YWNrLnB1c2gobnVsbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzdGFydEFycmF5XCI6XG4gICAgICAgICAgc3RhY2sucHVzaCgtMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJlbmRPYmplY3RcIjpcbiAgICAgICAgY2FzZSBcImVuZEFycmF5XCI6XG4gICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXR1cm5Ub2tlbjtcbiAgICB9KTtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IFBpY2tQYXJzZXIgPSAob3B0aW9ucz86IGFueSkgPT4gd2l0aFBhcnNlcihmaWx0ZXJCYXNlKCksIE9iamVjdC5hc3NpZ24oeyBwYWNrS2V5czogdHJ1ZSB9LCBvcHRpb25zKSk7XG5cbmNsYXNzIENvdW50ZXIge1xuICBkZXB0aDogbnVtYmVyO1xuICBjb25zdHJ1Y3Rvcihpbml0aWFsRGVwdGg6IG51bWJlcikge1xuICAgIHRoaXMuZGVwdGggPSBpbml0aWFsRGVwdGg7XG4gIH1cbiAgc3RhcnRPYmplY3QoKSB7XG4gICAgKyt0aGlzLmRlcHRoO1xuICB9XG4gIGVuZE9iamVjdCgpIHtcbiAgICAtLXRoaXMuZGVwdGg7XG4gIH1cbiAgc3RhcnRBcnJheSgpIHtcbiAgICArK3RoaXMuZGVwdGg7XG4gIH1cbiAgZW5kQXJyYXkoKSB7XG4gICAgLS10aGlzLmRlcHRoO1xuICB9XG59XG5cbmNsYXNzIEFzc2VtYmxlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHN0YXRpYyBjb25uZWN0VG8oc3RyZWFtOiBhbnksIG9wdGlvbnM6IGFueSkge1xuICAgIHJldHVybiBuZXcgQXNzZW1ibGVyKG9wdGlvbnMpLmNvbm5lY3RUbyhzdHJlYW0pO1xuICB9XG5cbiAgc3RhY2s6IGFueTtcbiAgY3VycmVudDogYW55O1xuICBrZXk6IGFueTtcbiAgZG9uZTogYm9vbGVhbjtcbiAgcmV2aXZlcjogYW55O1xuICAvLyBAdHMtaWdub3JlXG4gIHN0cmluZ1ZhbHVlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdGFwQ2hhaW46IChjaHVuazogYW55KSA9PiBhbnk7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogYW55KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YWNrID0gW107XG4gICAgdGhpcy5jdXJyZW50ID0gdGhpcy5rZXkgPSBudWxsO1xuICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMucmV2aXZlciA9IHR5cGVvZiBvcHRpb25zLnJldml2ZXIgPT0gXCJmdW5jdGlvblwiICYmIG9wdGlvbnMucmV2aXZlcjtcbiAgICAgIGlmICh0aGlzLnJldml2ZXIpIHtcbiAgICAgICAgdGhpcy5zdHJpbmdWYWx1ZSA9IHRoaXMuX3NhdmVWYWx1ZSA9IHRoaXMuX3NhdmVWYWx1ZVdpdGhSZXZpdmVyO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMubnVtYmVyQXNTdHJpbmcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLm51bWJlclZhbHVlID0gdGhpcy5zdHJpbmdWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRhcENoYWluID0gKGNodW5rKSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBpZiAodGhpc1tjaHVuay5uYW1lXSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXNbY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICBpZiAodGhpcy5kb25lKSByZXR1cm4gdGhpcy5jdXJyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vbmU7XG4gICAgfTtcblxuICAgIHRoaXMuc3RyaW5nVmFsdWUgPSB0aGlzLl9zYXZlVmFsdWU7XG4gIH1cblxuICBjb25uZWN0VG8oc3RyZWFtOiBhbnkpIHtcbiAgICBzdHJlYW0ub24oXCJkYXRhXCIsIChjaHVuazogYW55KSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBpZiAodGhpc1tjaHVuay5uYW1lXSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXNbY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICh0aGlzLmRvbmUpIHRoaXMuZW1pdChcImRvbmVcIiwgdGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXQgZGVwdGgoKSB7XG4gICAgcmV0dXJuICh0aGlzLnN0YWNrLmxlbmd0aCA+PiAxKSArICh0aGlzLmRvbmUgPyAwIDogMSk7XG4gIH1cblxuICBnZXQgcGF0aCgpIHtcbiAgICBjb25zdCBwYXRoOiBhbnlbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgY29uc3Qga2V5ID0gdGhpcy5zdGFja1tpICsgMV07XG4gICAgICBwYXRoLnB1c2goa2V5ID09PSBudWxsID8gdGhpcy5zdGFja1tpXS5sZW5ndGggOiBrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbiAgfVxuXG4gIGRyb3BUb0xldmVsKGxldmVsOiBhbnkpIHtcbiAgICBpZiAobGV2ZWwgPCB0aGlzLmRlcHRoKSB7XG4gICAgICBpZiAobGV2ZWwgPiAwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gKGxldmVsIC0gMSkgPDwgMTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5zdGFja1tpbmRleF07XG4gICAgICAgIHRoaXMua2V5ID0gdGhpcy5zdGFja1tpbmRleCArIDFdO1xuICAgICAgICB0aGlzLnN0YWNrLnNwbGljZShpbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YWNrID0gW107XG4gICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMua2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25zdW1lKGNodW5rOiBhbnkpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdGhpc1tjaHVuay5uYW1lXSAmJiB0aGlzW2NodW5rLm5hbWVdKGNodW5rLnZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGtleVZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLmtleSA9IHZhbHVlO1xuICB9XG5cbiAgLy9zdHJpbmdWYWx1ZSgpIC0gYWxpYXNlZCBiZWxvdyB0byBfc2F2ZVZhbHVlKClcblxuICBudW1iZXJWYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5fc2F2ZVZhbHVlKHBhcnNlRmxvYXQodmFsdWUpKTtcbiAgfVxuICBudWxsVmFsdWUoKSB7XG4gICAgdGhpcy5fc2F2ZVZhbHVlKG51bGwpO1xuICB9XG4gIHRydWVWYWx1ZSgpIHtcbiAgICB0aGlzLl9zYXZlVmFsdWUodHJ1ZSk7XG4gIH1cbiAgZmFsc2VWYWx1ZSgpIHtcbiAgICB0aGlzLl9zYXZlVmFsdWUoZmFsc2UpO1xuICB9XG5cbiAgc3RhcnRPYmplY3QoKSB7XG4gICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLmN1cnJlbnQsIHRoaXMua2V5KTtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50ID0gbmV3IE9iamVjdCgpO1xuICAgIHRoaXMua2V5ID0gbnVsbDtcbiAgfVxuXG4gIGVuZE9iamVjdCgpIHtcbiAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5rZXkgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5zdGFjay5wb3AoKTtcbiAgICAgIHRoaXMuX3NhdmVWYWx1ZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRBcnJheSgpIHtcbiAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuY3VycmVudCwgdGhpcy5rZXkpO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnQgPSBbXTtcbiAgICB0aGlzLmtleSA9IG51bGw7XG4gIH1cblxuICBlbmRBcnJheSgpIHtcbiAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5rZXkgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5zdGFjay5wb3AoKTtcbiAgICAgIHRoaXMuX3NhdmVWYWx1ZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgX3NhdmVWYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB0aGlzLmN1cnJlbnQucHVzaCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmN1cnJlbnRbdGhpcy5rZXldID0gdmFsdWU7XG4gICAgICAgIHRoaXMua2V5ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3NhdmVWYWx1ZVdpdGhSZXZpdmVyKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnJldml2ZXIoXCJcIiwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLnJldml2ZXIoXCJcIiArIHRoaXMuY3VycmVudC5sZW5ndGgsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5jdXJyZW50LnB1c2godmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRbdGhpcy5jdXJyZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRoaXMucmV2aXZlcih0aGlzLmtleSwgdmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudFt0aGlzLmtleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmtleSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IHN0cmVhbUJhc2UgPVxuICAoeyBwdXNoLCBmaXJzdCwgbGV2ZWwgfTogYW55KSA9PlxuICAob3B0aW9ucyA9IHt9IGFzIGFueSkgPT4ge1xuICAgIGNvbnN0IHsgb2JqZWN0RmlsdGVyLCBpbmNsdWRlVW5kZWNpZGVkIH0gPSBvcHRpb25zO1xuICAgIGxldCBhc20gPSBuZXcgQXNzZW1ibGVyKG9wdGlvbnMpIGFzIGFueSxcbiAgICAgIHN0YXRlID0gZmlyc3QgPyBcImZpcnN0XCIgOiBcImNoZWNrXCIsXG4gICAgICBzYXZlZEFzbSA9IG51bGwgYXMgYW55O1xuXG4gICAgaWYgKHR5cGVvZiBvYmplY3RGaWx0ZXIgIT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAvLyBubyBvYmplY3QgZmlsdGVyICsgbm8gZmlyc3QgY2hlY2tcbiAgICAgIGlmIChzdGF0ZSA9PT0gXCJjaGVja1wiKVxuICAgICAgICByZXR1cm4gKGNodW5rOiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAoYXNtW2NodW5rLm5hbWVdKSB7XG4gICAgICAgICAgICBhc21bY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHB1c2goYXNtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5vbmU7XG4gICAgICAgIH07XG4gICAgICAvLyBubyBvYmplY3QgZmlsdGVyXG4gICAgICByZXR1cm4gKGNodW5rOiBhbnkpID0+IHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJmaXJzdFwiOlxuICAgICAgICAgICAgZmlyc3QoY2h1bmspO1xuICAgICAgICAgICAgc3RhdGUgPSBcImFjY2VwdFwiO1xuICAgICAgICAgIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgIGNhc2UgXCJhY2NlcHRcIjpcbiAgICAgICAgICAgIGlmIChhc21bY2h1bmsubmFtZV0pIHtcbiAgICAgICAgICAgICAgYXNtW2NodW5rLm5hbWVdKGNodW5rLnZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHVzaChhc20pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9uZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gb2JqZWN0IGZpbHRlciArIGEgcG9zc2libGUgZmlyc3QgY2hlY2tcbiAgICByZXR1cm4gKGNodW5rOiBhbnkpID0+IHtcbiAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgY2FzZSBcImZpcnN0XCI6XG4gICAgICAgICAgZmlyc3QoY2h1bmspO1xuICAgICAgICAgIHN0YXRlID0gXCJjaGVja1wiO1xuICAgICAgICAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgaWYgKGFzbVtjaHVuay5uYW1lXSkge1xuICAgICAgICAgICAgYXNtW2NodW5rLm5hbWVdKGNodW5rLnZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9iamVjdEZpbHRlcihhc20pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICBzdGF0ZSA9IFwiYWNjZXB0XCI7XG4gICAgICAgICAgICAgIGlmIChhc20uZGVwdGggPT09IGxldmVsKSByZXR1cm4gcHVzaChhc20pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGlmIChhc20uZGVwdGggPT09IGxldmVsKSByZXR1cm4gcHVzaChhc20sIHRydWUpO1xuICAgICAgICAgICAgICBzdGF0ZSA9IFwicmVqZWN0XCI7XG4gICAgICAgICAgICAgIHNhdmVkQXNtID0gYXNtO1xuICAgICAgICAgICAgICBhc20gPSBuZXcgQ291bnRlcihzYXZlZEFzbS5kZXB0aCk7XG4gICAgICAgICAgICAgIHNhdmVkQXNtLmRyb3BUb0xldmVsKGxldmVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChhc20uZGVwdGggPT09IGxldmVsKSByZXR1cm4gcHVzaChhc20sICFpbmNsdWRlVW5kZWNpZGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhY2NlcHRcIjpcbiAgICAgICAgICBpZiAoYXNtW2NodW5rLm5hbWVdKSB7XG4gICAgICAgICAgICBhc21bY2h1bmsubmFtZV0oY2h1bmsudmFsdWUpO1xuICAgICAgICAgICAgaWYgKGFzbS5kZXB0aCA9PT0gbGV2ZWwpIHtcbiAgICAgICAgICAgICAgc3RhdGUgPSBcImNoZWNrXCI7XG4gICAgICAgICAgICAgIHJldHVybiBwdXNoKGFzbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVqZWN0XCI6XG4gICAgICAgICAgaWYgKGFzbVtjaHVuay5uYW1lXSkge1xuICAgICAgICAgICAgYXNtW2NodW5rLm5hbWVdKGNodW5rLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChhc20uZGVwdGggPT09IGxldmVsKSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gXCJjaGVja1wiO1xuICAgICAgICAgICAgICBhc20gPSBzYXZlZEFzbTtcbiAgICAgICAgICAgICAgc2F2ZWRBc20gPSBudWxsO1xuICAgICAgICAgICAgICByZXR1cm4gcHVzaChhc20sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBub25lO1xuICAgIH07XG4gIH07XG5cbmV4cG9ydCBjb25zdCBTdHJlYW1BcnJheSA9IChvcHRpb25zPzogYW55KSA9PiB7XG4gIGxldCBrZXkgPSAwO1xuICByZXR1cm4gc3RyZWFtQmFzZSh7XG4gICAgbGV2ZWw6IDEsXG5cbiAgICBmaXJzdChjaHVuazogYW55KSB7XG4gICAgICBpZiAoY2h1bmsubmFtZSAhPT0gXCJzdGFydEFycmF5XCIpIHRocm93IG5ldyBFcnJvcihcIlRvcC1sZXZlbCBvYmplY3Qgc2hvdWxkIGJlIGFuIGFycmF5LlwiKTtcbiAgICB9LFxuXG4gICAgcHVzaChhc206IGFueSwgZGlzY2FyZDogYW55KSB7XG4gICAgICBpZiAoYXNtLmN1cnJlbnQubGVuZ3RoKSB7XG4gICAgICAgIGlmIChkaXNjYXJkKSB7XG4gICAgICAgICAgKytrZXk7XG4gICAgICAgICAgYXNtLmN1cnJlbnQucG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHsga2V5OiBrZXkrKywgdmFsdWU6IGFzbS5jdXJyZW50LnBvcCgpIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBub25lO1xuICAgIH0sXG4gIH0pKG9wdGlvbnMpO1xufTtcbiIsICJpbXBvcnQgeyBMaXN0LCBNZW51QmFyRXh0cmEsIEljb24sIG9wZW4sIExhdW5jaFR5cGUsIGVudmlyb25tZW50LCBBY3Rpb25QYW5lbCwgQWN0aW9uIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgb3MgZnJvbSBcIm5vZGU6b3NcIjtcbmltcG9ydCB7IHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VQcm9taXNlLCBQcm9taXNlT3B0aW9ucyB9IGZyb20gXCIuL3VzZVByb21pc2VcIjtcbmltcG9ydCB7IHVzZUxhdGVzdCB9IGZyb20gXCIuL3VzZUxhdGVzdFwiO1xuaW1wb3J0IHsgc2hvd0ZhaWx1cmVUb2FzdCB9IGZyb20gXCIuL3Nob3dGYWlsdXJlVG9hc3RcIjtcbmltcG9ydCB7IGJhc2VFeGVjdXRlU1FMLCBQZXJtaXNzaW9uRXJyb3IsIGlzUGVybWlzc2lvbkVycm9yIH0gZnJvbSBcIi4vc3FsLXV0aWxzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYSBxdWVyeSBvbiBhIGxvY2FsIFNRTCBkYXRhYmFzZSBhbmQgcmV0dXJucyB0aGUge0BsaW5rIEFzeW5jU3RhdGV9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHF1ZXJ5IG9mIHRoZSBjb21tYW5kLiBUaGUgbGFzdCB2YWx1ZSB3aWxsIGJlIGtlcHQgYmV0d2VlbiBjb21tYW5kIHJ1bnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgdXNlU1FMIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKiBpbXBvcnQgeyByZXNvbHZlIH0gZnJvbSBcInBhdGhcIjtcbiAqIGltcG9ydCB7IGhvbWVkaXIgfSBmcm9tIFwib3NcIjtcbiAqXG4gKiBjb25zdCBOT1RFU19EQiA9IHJlc29sdmUoaG9tZWRpcigpLCBcIkxpYnJhcnkvR3JvdXAgQ29udGFpbmVycy9ncm91cC5jb20uYXBwbGUubm90ZXMvTm90ZVN0b3JlLnNxbGl0ZVwiKTtcbiAqIGNvbnN0IG5vdGVzUXVlcnkgPSBgU0VMRUNUIGlkLCB0aXRsZSBGUk9NIC4uLmA7XG4gKiB0eXBlIE5vdGVJdGVtID0ge1xuICogICBpZDogc3RyaW5nO1xuICogICB0aXRsZTogc3RyaW5nO1xuICogfTtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKCkge1xuICogICBjb25zdCB7IGlzTG9hZGluZywgZGF0YSwgcGVybWlzc2lvblZpZXcgfSA9IHVzZVNRTDxOb3RlSXRlbT4oTk9URVNfREIsIG5vdGVzUXVlcnkpO1xuICpcbiAqICAgaWYgKHBlcm1pc3Npb25WaWV3KSB7XG4gKiAgICAgcmV0dXJuIHBlcm1pc3Npb25WaWV3O1xuICogICB9XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxMaXN0IGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAqICAgICAgIHsoZGF0YSB8fCBbXSkubWFwKChpdGVtKSA9PiAoXG4gKiAgICAgICAgIDxMaXN0Lkl0ZW0ga2V5PXtpdGVtLmlkfSB0aXRsZT17aXRlbS50aXRsZX0gLz5cbiAqICAgICAgICkpfVxuICogICAgIDwvTGlzdD5cbiAqICApO1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlU1FMPFQgPSB1bmtub3duPihcbiAgZGF0YWJhc2VQYXRoOiBzdHJpbmcsXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7XG4gICAgLyoqIEEgc3RyaW5nIGV4cGxhaW5pbmcgd2h5IHRoZSBleHRlbnNpb24gbmVlZHMgZnVsbCBkaXNrIGFjY2Vzcy4gRm9yIGV4YW1wbGUsIHRoZSBBcHBsZSBOb3RlcyBleHRlbnNpb24gdXNlcyBgXCJUaGlzIGlzIHJlcXVpcmVkIHRvIHNlYXJjaCB5b3VyIEFwcGxlIE5vdGVzLlwiYC4gV2hpbGUgaXQgaXMgb3B0aW9uYWwsIHdlIHJlY29tbWVuZCBzZXR0aW5nIGl0IHRvIGhlbHAgdXNlcnMgdW5kZXJzdGFuZC4gKi9cbiAgICBwZXJtaXNzaW9uUHJpbWluZz86IHN0cmluZztcbiAgfSAmIE9taXQ8UHJvbWlzZU9wdGlvbnM8KGRhdGFiYXNlOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpID0+IFByb21pc2U8VFtdPj4sIFwiYWJvcnRhYmxlXCI+LFxuKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgY29uc3QgeyBwZXJtaXNzaW9uUHJpbWluZywgLi4udXNlUHJvbWlzZU9wdGlvbnMgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgY29uc3QgW3Blcm1pc3Npb25WaWV3LCBzZXRQZXJtaXNzaW9uVmlld10gPSB1c2VTdGF0ZTxSZWFjdC5KU1guRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsYXRlc3RPcHRpb25zID0gdXNlTGF0ZXN0KG9wdGlvbnMgfHwge30pO1xuICBjb25zdCBhYm9ydGFibGUgPSB1c2VSZWY8QWJvcnRDb250cm9sbGVyPihudWxsKTtcblxuICBjb25zdCBoYW5kbGVFcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIChfZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKF9lcnJvcik7XG4gICAgICBjb25zdCBlcnJvciA9XG4gICAgICAgIF9lcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIF9lcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiYXV0aG9yaXphdGlvbiBkZW5pZWRcIilcbiAgICAgICAgICA/IG5ldyBQZXJtaXNzaW9uRXJyb3IoXCJZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIGRhdGFiYXNlLlwiKVxuICAgICAgICAgIDogKF9lcnJvciBhcyBFcnJvcik7XG5cbiAgICAgIGlmIChpc1Blcm1pc3Npb25FcnJvcihlcnJvcikpIHtcbiAgICAgICAgc2V0UGVybWlzc2lvblZpZXcoPFBlcm1pc3Npb25FcnJvclNjcmVlbiBwcmltaW5nPXtsYXRlc3RPcHRpb25zLmN1cnJlbnQucGVybWlzc2lvblByaW1pbmd9IC8+KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsYXRlc3RPcHRpb25zLmN1cnJlbnQub25FcnJvcikge1xuICAgICAgICAgIGxhdGVzdE9wdGlvbnMuY3VycmVudC5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZW52aXJvbm1lbnQubGF1bmNoVHlwZSAhPT0gTGF1bmNoVHlwZS5CYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBzaG93RmFpbHVyZVRvYXN0KGVycm9yLCB7XG4gICAgICAgICAgICAgIHRpdGxlOiBcIkNhbm5vdCBxdWVyeSB0aGUgZGF0YVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbbGF0ZXN0T3B0aW9uc10sXG4gICk7XG5cbiAgY29uc3QgZm4gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWV4aXN0c1N5bmMoZGF0YWJhc2VQYXRoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRhdGFiYXNlIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiBhc3luYyAoZGF0YWJhc2VQYXRoOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGFib3J0U2lnbmFsID0gYWJvcnRhYmxlLmN1cnJlbnQ/LnNpZ25hbDtcbiAgICAgIHJldHVybiBiYXNlRXhlY3V0ZVNRTDxUPihkYXRhYmFzZVBhdGgsIHF1ZXJ5LCB7IHNpZ25hbDogYWJvcnRTaWduYWwgfSk7XG4gICAgfTtcbiAgfSwgW2RhdGFiYXNlUGF0aF0pO1xuXG4gIHJldHVybiB7XG4gICAgLi4udXNlUHJvbWlzZShmbiwgW2RhdGFiYXNlUGF0aCwgcXVlcnldLCB7IC4uLnVzZVByb21pc2VPcHRpb25zLCBvbkVycm9yOiBoYW5kbGVFcnJvciB9KSxcbiAgICBwZXJtaXNzaW9uVmlldyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gUGVybWlzc2lvbkVycm9yU2NyZWVuKHByb3BzOiB7IHByaW1pbmc/OiBzdHJpbmcgfSkge1xuICBjb25zdCBtYWNvc1ZlbnR1cmFBbmRMYXRlciA9IHBhcnNlSW50KG9zLnJlbGVhc2UoKS5zcGxpdChcIi5cIilbMF0pID49IDIyO1xuICBjb25zdCBwcmVmZXJlbmNlc1N0cmluZyA9IG1hY29zVmVudHVyYUFuZExhdGVyID8gXCJTZXR0aW5nc1wiIDogXCJQcmVmZXJlbmNlc1wiO1xuXG4gIGNvbnN0IGFjdGlvbiA9IG1hY29zVmVudHVyYUFuZExhdGVyXG4gICAgPyB7XG4gICAgICAgIHRpdGxlOiBcIk9wZW4gU3lzdGVtIFNldHRpbmdzIC0+IFByaXZhY3lcIixcbiAgICAgICAgdGFyZ2V0OiBcIngtYXBwbGUuc3lzdGVtcHJlZmVyZW5jZXM6Y29tLmFwcGxlLnByZWZlcmVuY2Uuc2VjdXJpdHk/UHJpdmFjeV9BbGxGaWxlc1wiLFxuICAgICAgfVxuICAgIDoge1xuICAgICAgICB0aXRsZTogXCJPcGVuIFN5c3RlbSBQcmVmZXJlbmNlcyAtPiBTZWN1cml0eVwiLFxuICAgICAgICB0YXJnZXQ6IFwieC1hcHBsZS5zeXN0ZW1wcmVmZXJlbmNlczpjb20uYXBwbGUucHJlZmVyZW5jZS5zZWN1cml0eT9Qcml2YWN5X0FsbEZpbGVzXCIsXG4gICAgICB9O1xuXG4gIGlmIChlbnZpcm9ubWVudC5jb21tYW5kTW9kZSA9PT0gXCJtZW51LWJhclwiKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNZW51QmFyRXh0cmEgaWNvbj17SWNvbi5XYXJuaW5nfSB0aXRsZT17ZW52aXJvbm1lbnQuY29tbWFuZE5hbWV9PlxuICAgICAgICA8TWVudUJhckV4dHJhLkl0ZW1cbiAgICAgICAgICB0aXRsZT1cIlJheWNhc3QgbmVlZHMgZnVsbCBkaXNrIGFjY2Vzc1wiXG4gICAgICAgICAgdG9vbHRpcD17YFlvdSBjYW4gcmV2ZXJ0IHRoaXMgYWNjZXNzIGluICR7cHJlZmVyZW5jZXNTdHJpbmd9IHdoZW5ldmVyIHlvdSB3YW50YH1cbiAgICAgICAgLz5cbiAgICAgICAge3Byb3BzLnByaW1pbmcgPyAoXG4gICAgICAgICAgPE1lbnVCYXJFeHRyYS5JdGVtXG4gICAgICAgICAgICB0aXRsZT17cHJvcHMucHJpbWluZ31cbiAgICAgICAgICAgIHRvb2x0aXA9e2BZb3UgY2FuIHJldmVydCB0aGlzIGFjY2VzcyBpbiAke3ByZWZlcmVuY2VzU3RyaW5nfSB3aGVuZXZlciB5b3Ugd2FudGB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIDxNZW51QmFyRXh0cmEuU2VwYXJhdG9yIC8+XG4gICAgICAgIDxNZW51QmFyRXh0cmEuSXRlbSB0aXRsZT17YWN0aW9uLnRpdGxlfSBvbkFjdGlvbj17KCkgPT4gb3BlbihhY3Rpb24udGFyZ2V0KX0gLz5cbiAgICAgIDwvTWVudUJhckV4dHJhPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMaXN0PlxuICAgICAgPExpc3QuRW1wdHlWaWV3XG4gICAgICAgIGljb249e3tcbiAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgIGxpZ2h0OiBcImh0dHBzOi8vcmF5Y2FzdC5jb20vdXBsb2Fkcy9leHRlbnNpb25zLXV0aWxzLXNlY3VyaXR5LXBlcm1pc3Npb25zLWxpZ2h0LnBuZ1wiLFxuICAgICAgICAgICAgZGFyazogXCJodHRwczovL3JheWNhc3QuY29tL3VwbG9hZHMvZXh0ZW5zaW9ucy11dGlscy1zZWN1cml0eS1wZXJtaXNzaW9ucy1kYXJrLnBuZ1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH19XG4gICAgICAgIHRpdGxlPVwiUmF5Y2FzdCBuZWVkcyBmdWxsIGRpc2sgYWNjZXNzLlwiXG4gICAgICAgIGRlc2NyaXB0aW9uPXtgJHtcbiAgICAgICAgICBwcm9wcy5wcmltaW5nID8gcHJvcHMucHJpbWluZyArIFwiXFxuXCIgOiBcIlwiXG4gICAgICAgIH1Zb3UgY2FuIHJldmVydCB0aGlzIGFjY2VzcyBpbiAke3ByZWZlcmVuY2VzU3RyaW5nfSB3aGVuZXZlciB5b3Ugd2FudC5gfVxuICAgICAgICBhY3Rpb25zPXtcbiAgICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgICA8QWN0aW9uLk9wZW4gey4uLmFjdGlvbn0gLz5cbiAgICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgICB9XG4gICAgICAvPlxuICAgIDwvTGlzdD5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCB7IGNvcHlGaWxlLCBta2Rpciwgd3JpdGVGaWxlIH0gZnJvbSBcIm5vZGU6ZnMvcHJvbWlzZXNcIjtcbmltcG9ydCBvcyBmcm9tIFwibm9kZTpvc1wiO1xuaW1wb3J0IGNoaWxkUHJvY2VzcyBmcm9tIFwibm9kZTpjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgeyBnZXRTcGF3bmVkUHJvbWlzZSwgZ2V0U3Bhd25lZFJlc3VsdCB9IGZyb20gXCIuL2V4ZWMtdXRpbHNcIjtcbmltcG9ydCB7IGhhc2ggfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiUGVybWlzc2lvbkVycm9yXCI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGVybWlzc2lvbkVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUGVybWlzc2lvbkVycm9yIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJQZXJtaXNzaW9uRXJyb3JcIjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJhc2VFeGVjdXRlU1FMPFQgPSB1bmtub3duPihcbiAgZGF0YWJhc2VQYXRoOiBzdHJpbmcsXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7XG4gICAgc2lnbmFsPzogQWJvcnRTaWduYWw7XG4gIH0sXG4pOiBQcm9taXNlPFRbXT4ge1xuICBpZiAoIWV4aXN0c1N5bmMoZGF0YWJhc2VQYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBkYXRhYmFzZSBkb2VzIG5vdCBleGlzdFwiKTtcbiAgfVxuXG4gIGxldCBzcWxpdGUzOiB0eXBlb2YgaW1wb3J0KFwibm9kZTpzcWxpdGVcIik7XG4gIHRyeSB7XG4gICAgLy8gdGhpcyBpcyBhIGJpdCB1Z2x5IGJ1dCB3ZSBjYW4ndCBkaXJlY3RseSBpbXBvcnQgXCJub2RlOnNxbGl0ZVwiIGhlcmUgYmVjYXVzZSBwYXJjZWwgd2lsbCBob2lzdCBpdCBhbnl3YXkgYW5kIGl0IHdpbGwgYnJlYWsgd2hlbiBpdCdzIG5vdCBhdmFpbGFibGVcbiAgICBjb25zdCBkeW5hbWljSW1wb3J0ID0gKG1vZHVsZTogc3RyaW5nKSA9PiBpbXBvcnQobW9kdWxlKTtcbiAgICBzcWxpdGUzID0gYXdhaXQgZHluYW1pY0ltcG9ydChcIm5vZGU6c3FsaXRlXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIElmIHNxbGl0ZTMgaXMgbm90IGF2YWlsYWJsZSwgd2UgZmFsbGJhY2sgdG8gdXNpbmcgdGhlIHNxbGl0ZTMgQ0xJIChhdmFpbGFibGUgb24gbWFjT1MgYW5kIExpbnV4IGJ5IGRlZmF1bHQpLlxuICAgIHJldHVybiBzcWxpdGVGYWxsYmFjazxUPihkYXRhYmFzZVBhdGgsIHF1ZXJ5LCBvcHRpb25zKTtcbiAgfVxuXG4gIGxldCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlU3luYyhkYXRhYmFzZVBhdGgsIHsgb3BlbjogZmFsc2UsIHJlYWRPbmx5OiB0cnVlIH0pO1xuXG4gIGNvbnN0IGFib3J0U2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuXG4gIHRyeSB7XG4gICAgZGIub3BlbigpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIGlmIChlcnJvci5tZXNzYWdlLm1hdGNoKFwiKDUpXCIpIHx8IGVycm9yLm1lc3NhZ2UubWF0Y2goXCIoMTQpXCIpKSB7XG4gICAgICAvLyBUaGF0IG1lYW5zIHRoYXQgdGhlIERCIGlzIGJ1c3kgYmVjYXVzZSBvZiBhbm90aGVyIGFwcCBpcyBsb2NraW5nIGl0XG4gICAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiBDaHJvbWUgb3IgQXJjIGlzIG9wZW5lZDogdGhleSBsb2NrIHRoZSBIaXN0b3J5IGRiLlxuICAgICAgLy8gQXMgYW4gdWdseSB3b3JrYXJvdW5kLCB3ZSBkdXBsaWNhdGUgdGhlIGZpbGUgYW5kIHJlYWQgdGhhdCBpbnN0ZWFkXG4gICAgICAvLyAod2l0aCB2ZnMgdW5peCAtIG5vbmUgdG8ganVzdCBub3QgY2FyZSBhYm91dCBsb2NrcylcbiAgICAgIGxldCB3b3JrYXJvdW5kQ29waWVkRGI6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGlmICghd29ya2Fyb3VuZENvcGllZERiKSB7XG4gICAgICAgIGNvbnN0IHRlbXBGb2xkZXIgPSBwYXRoLmpvaW4ob3MudG1wZGlyKCksIFwidXNlU1FMXCIsIGhhc2goZGF0YWJhc2VQYXRoKSk7XG4gICAgICAgIGF3YWl0IG1rZGlyKHRlbXBGb2xkZXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuXG4gICAgICAgIHdvcmthcm91bmRDb3BpZWREYiA9IHBhdGguam9pbih0ZW1wRm9sZGVyLCBcImRiLmRiXCIpO1xuICAgICAgICBhd2FpdCBjb3B5RmlsZShkYXRhYmFzZVBhdGgsIHdvcmthcm91bmRDb3BpZWREYik7XG5cbiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKHdvcmthcm91bmRDb3BpZWREYiArIFwiLXNobVwiLCBcIlwiKTtcbiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKHdvcmthcm91bmRDb3BpZWREYiArIFwiLXdhbFwiLCBcIlwiKTtcblxuICAgICAgICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuICAgICAgfVxuXG4gICAgICBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlU3luYyh3b3JrYXJvdW5kQ29waWVkRGIsIHsgb3BlbjogZmFsc2UsIHJlYWRPbmx5OiB0cnVlIH0pO1xuICAgICAgZGIub3BlbigpO1xuICAgICAgY2hlY2tBYm9ydGVkKGFib3J0U2lnbmFsKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBzdGF0ZW1lbnQgPSBkYi5wcmVwYXJlKHF1ZXJ5KTtcbiAgY2hlY2tBYm9ydGVkKGFib3J0U2lnbmFsKTtcblxuICBjb25zdCByZXN1bHQgPSBzdGF0ZW1lbnQuYWxsKCk7XG5cbiAgZGIuY2xvc2UoKTtcblxuICByZXR1cm4gcmVzdWx0IGFzIFRbXTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3FsaXRlRmFsbGJhY2s8VCA9IHVua25vd24+KFxuICBkYXRhYmFzZVBhdGg6IHN0cmluZyxcbiAgcXVlcnk6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbDtcbiAgfSxcbik6IFByb21pc2U8VFtdPiB7XG4gIGNvbnN0IGFib3J0U2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuXG4gIGxldCBzcGF3bmVkID0gY2hpbGRQcm9jZXNzLnNwYXduKFwic3FsaXRlM1wiLCBbXCItLWpzb25cIiwgXCItLXJlYWRvbmx5XCIsIGRhdGFiYXNlUGF0aCwgcXVlcnldLCB7IHNpZ25hbDogYWJvcnRTaWduYWwgfSk7XG4gIGxldCBzcGF3bmVkUHJvbWlzZSA9IGdldFNwYXduZWRQcm9taXNlKHNwYXduZWQpO1xuICBsZXQgW3sgZXJyb3IsIGV4aXRDb2RlLCBzaWduYWwgfSwgc3Rkb3V0UmVzdWx0LCBzdGRlcnJSZXN1bHRdID0gYXdhaXQgZ2V0U3Bhd25lZFJlc3VsdDxzdHJpbmc+KFxuICAgIHNwYXduZWQsXG4gICAgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sXG4gICAgc3Bhd25lZFByb21pc2UsXG4gICk7XG4gIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG5cbiAgaWYgKHN0ZGVyclJlc3VsdC5tYXRjaChcIig1KVwiKSB8fCBzdGRlcnJSZXN1bHQubWF0Y2goXCIoMTQpXCIpKSB7XG4gICAgLy8gVGhhdCBtZWFucyB0aGF0IHRoZSBEQiBpcyBidXN5IGJlY2F1c2Ugb2YgYW5vdGhlciBhcHAgaXMgbG9ja2luZyBpdFxuICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIENocm9tZSBvciBBcmMgaXMgb3BlbmVkOiB0aGV5IGxvY2sgdGhlIEhpc3RvcnkgZGIuXG4gICAgLy8gQXMgYW4gdWdseSB3b3JrYXJvdW5kLCB3ZSBkdXBsaWNhdGUgdGhlIGZpbGUgYW5kIHJlYWQgdGhhdCBpbnN0ZWFkXG4gICAgLy8gKHdpdGggdmZzIHVuaXggLSBub25lIHRvIGp1c3Qgbm90IGNhcmUgYWJvdXQgbG9ja3MpXG4gICAgbGV0IHdvcmthcm91bmRDb3BpZWREYjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICghd29ya2Fyb3VuZENvcGllZERiKSB7XG4gICAgICBjb25zdCB0ZW1wRm9sZGVyID0gcGF0aC5qb2luKG9zLnRtcGRpcigpLCBcInVzZVNRTFwiLCBoYXNoKGRhdGFiYXNlUGF0aCkpO1xuICAgICAgYXdhaXQgbWtkaXIodGVtcEZvbGRlciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuXG4gICAgICB3b3JrYXJvdW5kQ29waWVkRGIgPSBwYXRoLmpvaW4odGVtcEZvbGRlciwgXCJkYi5kYlwiKTtcbiAgICAgIGF3YWl0IGNvcHlGaWxlKGRhdGFiYXNlUGF0aCwgd29ya2Fyb3VuZENvcGllZERiKTtcblxuICAgICAgYXdhaXQgd3JpdGVGaWxlKHdvcmthcm91bmRDb3BpZWREYiArIFwiLXNobVwiLCBcIlwiKTtcbiAgICAgIGF3YWl0IHdyaXRlRmlsZSh3b3JrYXJvdW5kQ29waWVkRGIgKyBcIi13YWxcIiwgXCJcIik7XG5cbiAgICAgIGNoZWNrQWJvcnRlZChhYm9ydFNpZ25hbCk7XG4gICAgfVxuXG4gICAgc3Bhd25lZCA9IGNoaWxkUHJvY2Vzcy5zcGF3bihcInNxbGl0ZTNcIiwgW1wiLS1qc29uXCIsIFwiLS1yZWFkb25seVwiLCBcIi0tdmZzXCIsIFwidW5peC1ub25lXCIsIHdvcmthcm91bmRDb3BpZWREYiwgcXVlcnldLCB7XG4gICAgICBzaWduYWw6IGFib3J0U2lnbmFsLFxuICAgIH0pO1xuICAgIHNwYXduZWRQcm9taXNlID0gZ2V0U3Bhd25lZFByb21pc2Uoc3Bhd25lZCk7XG4gICAgW3sgZXJyb3IsIGV4aXRDb2RlLCBzaWduYWwgfSwgc3Rkb3V0UmVzdWx0LCBzdGRlcnJSZXN1bHRdID0gYXdhaXQgZ2V0U3Bhd25lZFJlc3VsdDxzdHJpbmc+KFxuICAgICAgc3Bhd25lZCxcbiAgICAgIHsgZW5jb2Rpbmc6IFwidXRmLThcIiB9LFxuICAgICAgc3Bhd25lZFByb21pc2UsXG4gICAgKTtcbiAgICBjaGVja0Fib3J0ZWQoYWJvcnRTaWduYWwpO1xuICB9XG5cbiAgaWYgKGVycm9yIHx8IGV4aXRDb2RlICE9PSAwIHx8IHNpZ25hbCAhPT0gbnVsbCkge1xuICAgIGlmIChzdGRlcnJSZXN1bHQuaW5jbHVkZXMoXCJhdXRob3JpemF0aW9uIGRlbmllZFwiKSkge1xuICAgICAgdGhyb3cgbmV3IFBlcm1pc3Npb25FcnJvcihcIllvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyB0aGUgZGF0YWJhc2UuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RkZXJyUmVzdWx0IHx8IFwiVW5rbm93biBlcnJvclwiKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gSlNPTi5wYXJzZShzdGRvdXRSZXN1bHQudHJpbSgpIHx8IFwiW11cIikgYXMgVFtdO1xufVxuXG5mdW5jdGlvbiBjaGVja0Fib3J0ZWQoc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgaWYgKHNpZ25hbD8uYWJvcnRlZCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiYWJvcnRlZFwiKTtcbiAgICBlcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBGb3JtIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VSZWYsIFNldFN0YXRlQWN0aW9uIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VMYXRlc3QgfSBmcm9tIFwiLi91c2VMYXRlc3RcIjtcblxuLyoqXG4gKiBTaG9ydGhhbmRzIGZvciBjb21tb24gdmFsaWRhdGlvbiBjYXNlc1xuICovXG5leHBvcnQgZW51bSBGb3JtVmFsaWRhdGlvbiB7XG4gIC8qKiBTaG93IGFuIGVycm9yIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBpdGVtIGlzIGVtcHR5ICovXG4gIFJlcXVpcmVkID0gXCJyZXF1aXJlZFwiLFxufVxuXG50eXBlIFZhbGlkYXRpb25FcnJvciA9IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGw7XG50eXBlIFZhbGlkYXRvcjxWYWx1ZVR5cGU+ID0gKCh2YWx1ZTogVmFsdWVUeXBlIHwgdW5kZWZpbmVkKSA9PiBWYWxpZGF0aW9uRXJyb3IpIHwgRm9ybVZhbGlkYXRpb247XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcjxWYWx1ZVR5cGU+KFxuICB2YWxpZGF0aW9uOiBWYWxpZGF0b3I8VmFsdWVUeXBlPiB8IHVuZGVmaW5lZCxcbiAgdmFsdWU6IFZhbHVlVHlwZSB8IHVuZGVmaW5lZCxcbik6IFZhbGlkYXRpb25FcnJvciB7XG4gIGlmICh2YWxpZGF0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9uKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHZhbGlkYXRpb24gPT09IEZvcm1WYWxpZGF0aW9uLlJlcXVpcmVkKSB7XG4gICAgICBsZXQgdmFsdWVJc1ZhbGlkID0gdHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiICYmIHZhbHVlICE9PSBudWxsO1xuICAgICAgaWYgKHZhbHVlSXNWYWxpZCkge1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHZhbHVlSXNWYWxpZCA9IHZhbHVlLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmFsdWVJc1ZhbGlkID0gdmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgIHZhbHVlSXNWYWxpZCA9IHZhbHVlLmdldFRpbWUoKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdmFsdWVJc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBcIlRoZSBpdGVtIGlzIHJlcXVpcmVkXCI7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnR5cGUgVmFsaWRhdGlvbjxUIGV4dGVuZHMgRm9ybS5WYWx1ZXM+ID0geyBbaWQgaW4ga2V5b2YgVF0/OiBWYWxpZGF0b3I8VFtpZF0+IH07XG5cbmludGVyZmFjZSBGb3JtUHJvcHM8VCBleHRlbmRzIEZvcm0uVmFsdWVzPiB7XG4gIC8qKiBGdW5jdGlvbiB0byBwYXNzIHRvIHRoZSBgb25TdWJtaXRgIHByb3Agb2YgdGhlIGA8QWN0aW9uLlN1Ym1pdEZvcm0+YCBlbGVtZW50LiBJdCB3cmFwcyB0aGUgaW5pdGlhbCBgb25TdWJtaXRgIGFyZ3VtZW50IHdpdGggc29tZSBnb29kaWVzIHJlbGF0ZWQgdG8gdGhlIHZhbGlkYXRpb24uICovXG4gIGhhbmRsZVN1Ym1pdDogKHZhbHVlczogVCkgPT4gdm9pZCB8IGJvb2xlYW4gfCBQcm9taXNlPHZvaWQgfCBib29sZWFuPjtcbiAgLyoqIFRoZSBwcm9wcyB0aGF0IG11c3QgYmUgcGFzc2VkIHRvIHRoZSBgPEZvcm0uSXRlbT5gIGVsZW1lbnRzIHRvIGhhbmRsZSB0aGUgdmFsaWRhdGlvbnMuICovXG4gIGl0ZW1Qcm9wczoge1xuICAgIFtpZCBpbiBrZXlvZiBSZXF1aXJlZDxUPl06IFBhcnRpYWw8Rm9ybS5JdGVtUHJvcHM8VFtpZF0+PiAmIHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgLyoqIEZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvZ3JhbW1hdGljYWxseSBzZXQgdGhlIHZhbGlkYXRpb24gb2YgYSBzcGVjaWZpYyBmaWVsZC4gKi9cbiAgc2V0VmFsaWRhdGlvbkVycm9yOiAoaWQ6IGtleW9mIFQsIGVycm9yOiBWYWxpZGF0aW9uRXJyb3IpID0+IHZvaWQ7XG4gIC8qKiBGdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb2dyYW1tYXRpY2FsbHkgc2V0IHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmljIGZpZWxkLiAqL1xuICBzZXRWYWx1ZTogPEsgZXh0ZW5kcyBrZXlvZiBUPihpZDogSywgdmFsdWU6IFNldFN0YXRlQWN0aW9uPFRbS10+KSA9PiB2b2lkO1xuICAvKiogVGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBmb3JtLiAqL1xuICB2YWx1ZXM6IFQ7XG4gIC8qKiBGdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb2dyYW1tYXRpY2FsbHkgZm9jdXMgYSBzcGVjaWZpYyBmaWVsZC4gKi9cbiAgZm9jdXM6IChpZDoga2V5b2YgVCkgPT4gdm9pZDtcbiAgLyoqIEZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQgdGhlIHZhbHVlcyBvZiB0aGUgRm9ybS4gKi9cbiAgcmVzZXQ6IChpbml0aWFsVmFsdWVzPzogUGFydGlhbDxUPikgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBIb29rIHRoYXQgcHJvdmlkZXMgYSBoaWdoLWxldmVsIGludGVyZmFjZSB0byB3b3JrIHdpdGggRm9ybXMsIGFuZCBtb3JlIHBhcnRpY3VsYXJseSwgd2l0aCBGb3JtIHZhbGlkYXRpb25zLiBJdCBpbmNvcnBvcmF0ZXMgYWxsIHRoZSBnb29kIHByYWN0aWNlcyB0byBwcm92aWRlIGEgZ3JlYXQgVXNlciBFeHBlcmllbmNlIGZvciB5b3VyIEZvcm1zLlxuICpcbiAqIEByZXR1cm5zIGFuIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgbmVjZXNzYXJ5IG1ldGhvZHMgYW5kIHByb3BzIHRvIHByb3ZpZGUgYSBnb29kIFVzZXIgRXhwZXJpZW5jZSBpbiB5b3VyIEZvcm0uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25QYW5lbCwgRm9ybSwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHVzZUZvcm0sIEZvcm1WYWxpZGF0aW9uIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogaW50ZXJmYWNlIFNpZ25VcEZvcm1WYWx1ZXMge1xuICogICBuaWNrbmFtZTogc3RyaW5nO1xuICogICBwYXNzd29yZDogc3RyaW5nO1xuICogfVxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IHsgaGFuZGxlU3VibWl0LCBpdGVtUHJvcHMgfSA9IHVzZUZvcm08U2lnblVwRm9ybVZhbHVlcz4oe1xuICogICAgIG9uU3VibWl0KHZhbHVlcykge1xuICogICAgICAgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLlN1Y2Nlc3MsIFwiWWF5IVwiLCBgJHt2YWx1ZXMubmlja25hbWV9IGFjY291bnQgY3JlYXRlZGApO1xuICogICAgIH0sXG4gKiAgICAgdmFsaWRhdGlvbjoge1xuICogICAgICAgbmlja25hbWU6IEZvcm1WYWxpZGF0aW9uLlJlcXVpcmVkLFxuICogICAgICAgcGFzc3dvcmQ6ICh2YWx1ZSkgPT4ge1xuICogICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoIDwgOCkge1xuICogICAgICAgICAgIHJldHVybiBcIlBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBzeW1ib2xzXCI7XG4gKiAgICAgICAgIH0gZWxzZSBpZiAoIXZhbHVlKSB7XG4gKiAgICAgICAgICAgcmV0dXJuIFwiVGhlIGl0ZW0gaXMgcmVxdWlyZWRcIjtcbiAqICAgICAgICAgfVxuICogICAgICAgfSxcbiAqICAgICB9LFxuICogICB9KTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPEZvcm1cbiAqICAgICAgIGFjdGlvbnM9e1xuICogICAgICAgICA8QWN0aW9uUGFuZWw+XG4gKiAgICAgICAgICAgPEFjdGlvbi5TdWJtaXRGb3JtIHRpdGxlPVwiU3VibWl0XCIgb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gLz5cbiAqICAgICAgICAgPC9BY3Rpb25QYW5lbD5cbiAqICAgICAgIH1cbiAqICAgICA+XG4gKiAgICAgICA8Rm9ybS5UZXh0RmllbGQgdGl0bGU9XCJOaWNrbmFtZVwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgeW91ciBuaWNrbmFtZVwiIHsuLi5pdGVtUHJvcHMubmlja25hbWV9IC8+XG4gKiAgICAgICA8Rm9ybS5QYXNzd29yZEZpZWxkXG4gKiAgICAgICAgIHRpdGxlPVwiUGFzc3dvcmRcIlxuICogICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIHBhc3N3b3JkIGF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nXCJcbiAqICAgICAgICAgey4uLml0ZW1Qcm9wcy5wYXNzd29yZH1cbiAqICAgICAgIC8+XG4gKiAgICAgPC9Gb3JtPlxuICogICApO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb3JtPFQgZXh0ZW5kcyBGb3JtLlZhbHVlcz4ocHJvcHM6IHtcbiAgLyoqIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQgYW5kIGFsbCB2YWxpZGF0aW9ucyBwYXNzLiAqL1xuICBvblN1Ym1pdDogKHZhbHVlczogVCkgPT4gdm9pZCB8IGJvb2xlYW4gfCBQcm9taXNlPHZvaWQgfCBib29sZWFuPjtcbiAgLyoqIFRoZSBpbml0aWFsIHZhbHVlcyB0byBzZXQgd2hlbiB0aGUgRm9ybSBpcyBmaXJzdCByZW5kZXJlZC4gKi9cbiAgaW5pdGlhbFZhbHVlcz86IFBhcnRpYWw8VD47XG4gIC8qKiBUaGUgdmFsaWRhdGlvbiBydWxlcyBmb3IgdGhlIEZvcm0uIEEgdmFsaWRhdGlvbiBmb3IgYSBGb3JtIGl0ZW0gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBpdGVtIGFzIGFuIGFyZ3VtZW50IGFuZCBtdXN0IHJldHVybiBhIHN0cmluZyB3aGVuIHRoZSB2YWxpZGF0aW9uIGlzIGZhaWxpbmcuXG4gICAqXG4gICAqIFRoZXJlIGFyZSBhbHNvIHNvbWUgc2hvcnRoYW5kcyBmb3IgY29tbW9uIGNhc2VzLCBzZWUge0BsaW5rIEZvcm1WYWxpZGF0aW9ufS5cbiAgICogKi9cbiAgdmFsaWRhdGlvbj86IFZhbGlkYXRpb248VD47XG59KTogRm9ybVByb3BzPFQ+IHtcbiAgY29uc3QgeyBvblN1Ym1pdDogX29uU3VibWl0LCB2YWxpZGF0aW9uLCBpbml0aWFsVmFsdWVzID0ge30gfSA9IHByb3BzO1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgaXQncyBmaW5lIGlmIHdlIGRvbid0IHNwZWNpZnkgYWxsIHRoZSB2YWx1ZXNcbiAgY29uc3QgW3ZhbHVlcywgc2V0VmFsdWVzXSA9IHVzZVN0YXRlPFQ+KGluaXRpYWxWYWx1ZXMpO1xuICBjb25zdCBbZXJyb3JzLCBzZXRFcnJvcnNdID0gdXNlU3RhdGU8eyBbaWQgaW4ga2V5b2YgVF0/OiBWYWxpZGF0aW9uRXJyb3IgfT4oe30pO1xuICBjb25zdCByZWZzID0gdXNlUmVmPHsgW2lkIGluIGtleW9mIFRdPzogRm9ybS5JdGVtUmVmZXJlbmNlIH0+KHt9KTtcblxuICBjb25zdCBsYXRlc3RWYWxpZGF0aW9uID0gdXNlTGF0ZXN0PFZhbGlkYXRpb248VD4+KHZhbGlkYXRpb24gfHwge30pO1xuICBjb25zdCBsYXRlc3RPblN1Ym1pdCA9IHVzZUxhdGVzdChfb25TdWJtaXQpO1xuXG4gIGNvbnN0IGZvY3VzID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBrZXlvZiBUKSA9PiB7XG4gICAgICByZWZzLmN1cnJlbnRbaWRdPy5mb2N1cygpO1xuICAgIH0sXG4gICAgW3JlZnNdLFxuICApO1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICh2YWx1ZXM6IFQpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICAgIGxldCB2YWxpZGF0aW9uRXJyb3JzOiBmYWxzZSB8IHsgW2tleSBpbiBrZXlvZiBUXT86IFZhbGlkYXRpb25FcnJvciB9ID0gZmFsc2U7XG4gICAgICBmb3IgKGNvbnN0IFtpZCwgdmFsaWRhdGlvbl0gb2YgT2JqZWN0LmVudHJpZXMobGF0ZXN0VmFsaWRhdGlvbi5jdXJyZW50KSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IHZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uLCB2YWx1ZXNbaWRdKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzID0ge307XG4gICAgICAgICAgICAvLyB3ZSBmb2N1cyB0aGUgZmlyc3QgaXRlbSB0aGF0IGhhcyBhbiBlcnJvclxuICAgICAgICAgICAgZm9jdXMoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzW2lkIGFzIGtleW9mIFRdID0gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgIHNldEVycm9ycyh2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGF0ZXN0T25TdWJtaXQuY3VycmVudCh2YWx1ZXMpO1xuICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09IFwiYm9vbGVhblwiID8gcmVzdWx0IDogdHJ1ZTtcbiAgICB9LFxuICAgIFtsYXRlc3RWYWxpZGF0aW9uLCBsYXRlc3RPblN1Ym1pdCwgZm9jdXNdLFxuICApO1xuXG4gIGNvbnN0IHNldFZhbGlkYXRpb25FcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDoga2V5b2YgVCwgZXJyb3I6IFZhbGlkYXRpb25FcnJvcikgPT4ge1xuICAgICAgc2V0RXJyb3JzKChlcnJvcnMpID0+ICh7IC4uLmVycm9ycywgW2lkXTogZXJyb3IgfSkpO1xuICAgIH0sXG4gICAgW3NldEVycm9yc10sXG4gICk7XG5cbiAgY29uc3Qgc2V0VmFsdWUgPSB1c2VDYWxsYmFjayhcbiAgICBmdW5jdGlvbiA8SyBleHRlbmRzIGtleW9mIFQ+KGlkOiBLLCB2YWx1ZTogU2V0U3RhdGVBY3Rpb248VFtLXT4pIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMgaXMgYWx3YXlzIGNvbmZ1c2VkIGFib3V0IFNldFN0YXRlQWN0aW9uLCBidXQgaXQncyBmaW5lIGhlcmVcbiAgICAgIHNldFZhbHVlcygodmFsdWVzKSA9PiAoeyAuLi52YWx1ZXMsIFtpZF06IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gdmFsdWUodmFsdWVzW2lkXSkgOiB2YWx1ZSB9KSk7XG4gICAgfSxcbiAgICBbc2V0VmFsdWVzXSxcbiAgKTtcblxuICBjb25zdCBpdGVtUHJvcHMgPSB1c2VNZW1vPHsgW2lkIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogUGFydGlhbDxGb3JtLkl0ZW1Qcm9wczxUW2lkXT4+ICYgeyBpZDogc3RyaW5nIH0gfT4oKCkgPT4ge1xuICAgIC8vIHdlIGhhdmUgdG8gdXNlIGEgcHJveHkgYmVjYXVzZSB3ZSBkb24ndCBhY3R1YWxseSBoYXZlIGFueSBvYmplY3QgdG8gaXRlcmF0ZSB0aHJvdWdoXG4gICAgLy8gc28gaW5zdGVhZCB3ZSBkeW5hbWljYWxseSBjcmVhdGUgdGhlIHByb3BzIHdoZW4gcmVxdWlyZWRcbiAgICByZXR1cm4gbmV3IFByb3h5PHsgW2lkIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogUGFydGlhbDxGb3JtLkl0ZW1Qcm9wczxUW2lkXT4+ICYgeyBpZDogc3RyaW5nIH0gfT4oXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoZSB3aG9sZSBwb2ludCBvZiBhIHByb3h5Li4uXG4gICAgICB7fSxcbiAgICAgIHtcbiAgICAgICAgZ2V0KHRhcmdldCwgaWQ6IGtleW9mIFQpIHtcbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gbGF0ZXN0VmFsaWRhdGlvbi5jdXJyZW50W2lkXTtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpZF07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChlcnJvcnNbaWRdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHNldFZhbGlkYXRpb25FcnJvcihpZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2V0VmFsdWUoaWQsIHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkJsdXIoZXZlbnQpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbiwgZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkVycm9yKGlkLCBlcnJvcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JzW2lkXSxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkbid0IHJldHVybiBgdW5kZWZpbmVkYCBvdGhlcndpc2UgaXQgd2lsbCBiZSBhbiB1bmNvbnRyb2xsZWQgY29tcG9uZW50XG4gICAgICAgICAgICB2YWx1ZTogdHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IHZhbHVlLFxuICAgICAgICAgICAgcmVmOiAoaW5zdGFuY2U6IEZvcm0uSXRlbVJlZmVyZW5jZSkgPT4ge1xuICAgICAgICAgICAgICByZWZzLmN1cnJlbnRbaWRdID0gaW5zdGFuY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0gYXMgUGFydGlhbDxGb3JtLkl0ZW1Qcm9wczxUW2tleW9mIFRdPj4gJiB7IGlkOiBzdHJpbmcgfTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcbiAgfSwgW2Vycm9ycywgbGF0ZXN0VmFsaWRhdGlvbiwgc2V0VmFsaWRhdGlvbkVycm9yLCB2YWx1ZXMsIHJlZnMsIHNldFZhbHVlXSk7XG5cbiAgY29uc3QgcmVzZXQgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWVzPzogUGFydGlhbDxUPikgPT4ge1xuICAgICAgc2V0RXJyb3JzKHt9KTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHJlZnMuY3VycmVudCkuZm9yRWFjaCgoW2lkLCByZWZdKSA9PiB7XG4gICAgICAgIGlmICghdmFsdWVzPy5baWRdKSB7XG4gICAgICAgICAgcmVmPy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBpdCdzIGZpbmUgaWYgd2UgZG9uJ3Qgc3BlY2lmeSBhbGwgdGhlIHZhbHVlc1xuICAgICAgICBzZXRWYWx1ZXModmFsdWVzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzZXRWYWx1ZXMsIHNldEVycm9ycywgcmVmc10sXG4gICk7XG5cbiAgcmV0dXJuIHsgaGFuZGxlU3VibWl0LCBzZXRWYWxpZGF0aW9uRXJyb3IsIHNldFZhbHVlLCB2YWx1ZXMsIGl0ZW1Qcm9wcywgZm9jdXMsIHJlc2V0IH07XG59XG4iLCAiaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQUkgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBQcm9taXNlT3B0aW9ucywgdXNlUHJvbWlzZSB9IGZyb20gXCIuL3VzZVByb21pc2VcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmV0dXJuaW5nUHJvbWlzZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICogU3RyZWFtIGEgcHJvbXB0IGNvbXBsZXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IERldGFpbCwgTGF1bmNoUHJvcHMgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyB1c2UgQUkgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tYW5kKHByb3BzOiBMYXVuY2hQcm9wczx7IGFyZ3VtZW50czogeyBwcm9tcHQ6IHN0cmluZyB9IH0+KSB7XG4gKiAgIGNvbnN0IHsgaXNMb2FkaW5nLCBkYXRhIH0gPSB1c2VBSShwcm9wcy5hcmd1bWVudHMucHJvbXB0KTtcbiAqXG4gKiAgIHJldHVybiA8RGV0YWlsIGlzTG9hZGluZz17aXNMb2FkaW5nfSBtYXJrZG93bj17ZGF0YX0gLz47XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUFJKFxuICBwcm9tcHQ6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIC8qKlxuICAgICAqIENvbmNyZXRlIHRhc2tzLCBzdWNoIGFzIGZpeGluZyBncmFtbWFyLCByZXF1aXJlIGxlc3MgY3JlYXRpdml0eSB3aGlsZSBvcGVuLWVuZGVkIHF1ZXN0aW9ucywgc3VjaCBhcyBnZW5lcmF0aW5nIGlkZWFzLCByZXF1aXJlIG1vcmUuXG4gICAgICogSWYgYSBudW1iZXIgaXMgcGFzc2VkLCBpdCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2UgMC0yLiBGb3IgbGFyZ2VyIHZhbHVlcywgMiB3aWxsIGJlIHVzZWQuIEZvciBsb3dlciB2YWx1ZXMsIDAgd2lsbCBiZSB1c2VkLlxuICAgICAqL1xuICAgIGNyZWF0aXZpdHk/OiBBSS5DcmVhdGl2aXR5O1xuICAgIC8qKlxuICAgICAqIFRoZSBBSSBtb2RlbCB0byB1c2UgdG8gYW5zd2VyIHRvIHRoZSBwcm9tcHQuXG4gICAgICovXG4gICAgbW9kZWw/OiBBSS5Nb2RlbDtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN0cmVhbSB0aGUgYW5zd2VyIG9yIG9ubHkgdXBkYXRlIHRoZSBkYXRhIHdoZW4gdGhlIGVudGlyZSBhbnN3ZXIgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gICAgICovXG4gICAgc3RyZWFtPzogYm9vbGVhbjtcbiAgfSAmIE9taXQ8UHJvbWlzZU9wdGlvbnM8RnVuY3Rpb25SZXR1cm5pbmdQcm9taXNlPiwgXCJhYm9ydGFibGVcIj4gPSB7fSxcbikge1xuICBjb25zdCB7IGNyZWF0aXZpdHksIHN0cmVhbSwgbW9kZWwsIC4uLnVzZVByb21pc2VPcHRpb25zIH0gPSBvcHRpb25zO1xuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgYWJvcnRhYmxlID0gdXNlUmVmPEFib3J0Q29udHJvbGxlcj4obnVsbCk7XG4gIGNvbnN0IHsgaXNMb2FkaW5nLCBlcnJvciwgcmV2YWxpZGF0ZSB9ID0gdXNlUHJvbWlzZShcbiAgICBhc3luYyAocHJvbXB0OiBzdHJpbmcsIGNyZWF0aXZpdHk/OiBBSS5DcmVhdGl2aXR5LCBzaG91bGRTdHJlYW0/OiBib29sZWFuKSA9PiB7XG4gICAgICBzZXREYXRhKFwiXCIpO1xuICAgICAgY29uc3Qgc3RyZWFtID0gQUkuYXNrKHByb21wdCwgeyBjcmVhdGl2aXR5LCBtb2RlbCwgc2lnbmFsOiBhYm9ydGFibGUuY3VycmVudD8uc2lnbmFsIH0pO1xuICAgICAgaWYgKHNob3VsZFN0cmVhbSA9PT0gZmFsc2UpIHtcbiAgICAgICAgc2V0RGF0YShhd2FpdCBzdHJlYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyZWFtLm9uKFwiZGF0YVwiLCAoZGF0YSkgPT4ge1xuICAgICAgICAgIHNldERhdGEoKHgpID0+IHggKyBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHN0cmVhbTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcm9tcHQsIGNyZWF0aXZpdHksIHN0cmVhbV0sXG4gICAgeyAuLi51c2VQcm9taXNlT3B0aW9ucywgYWJvcnRhYmxlIH0sXG4gICk7XG5cbiAgcmV0dXJuIHsgaXNMb2FkaW5nLCBkYXRhLCBlcnJvciwgcmV2YWxpZGF0ZSB9O1xufVxuIiwgImltcG9ydCB7IHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VMYXRlc3QgfSBmcm9tIFwiLi91c2VMYXRlc3RcIjtcbmltcG9ydCB7IHVzZUNhY2hlZFN0YXRlIH0gZnJvbSBcIi4vdXNlQ2FjaGVkU3RhdGVcIjtcblxuLy8gVGhlIGFsZ29yaXRobSBiZWxvdyBpcyBpbnNwaXJlZCBieSB0aGUgb25lIHVzZWQgYnkgRmlyZWZveDpcbi8vIGh0dHBzOi8vd2lraS5tb3ppbGxhLm9yZy9Vc2VyOkplc3NlL05ld0ZyZWNlbmN5XG5cbnR5cGUgRnJlY2VuY3kgPSB7XG4gIGxhc3RWaXNpdGVkOiBudW1iZXI7XG4gIGZyZWNlbmN5OiBudW1iZXI7XG59O1xuXG5jb25zdCBIQUxGX0xJRkVfREFZUyA9IDEwO1xuXG5jb25zdCBNU19QRVJfREFZID0gMjQgKiA2MCAqIDYwICogMTAwMDtcblxuY29uc3QgVklTSVRfVFlQRV9QT0lOVFMgPSB7XG4gIERlZmF1bHQ6IDEwMCxcbiAgRW1iZWQ6IDAsXG4gIEJvb2ttYXJrOiAxNDAsXG59O1xuXG5mdW5jdGlvbiBnZXROZXdGcmVjZW5jeShpdGVtPzogRnJlY2VuY3kpOiBGcmVjZW5jeSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IGxhc3RWaXNpdGVkID0gaXRlbSA/IGl0ZW0ubGFzdFZpc2l0ZWQgOiAwO1xuICBjb25zdCBmcmVjZW5jeSA9IGl0ZW0gPyBpdGVtLmZyZWNlbmN5IDogMDtcblxuICBjb25zdCB2aXNpdEFnZUluRGF5cyA9IChub3cgLSBsYXN0VmlzaXRlZCkgLyBNU19QRVJfREFZO1xuICBjb25zdCBERUNBWV9SQVRFX0NPTlNUQU5UID0gTWF0aC5sb2coMikgLyAoSEFMRl9MSUZFX0RBWVMgKiBNU19QRVJfREFZKTtcbiAgY29uc3QgY3VycmVudFZpc2l0VmFsdWUgPSBWSVNJVF9UWVBFX1BPSU5UUy5EZWZhdWx0ICogTWF0aC5leHAoLURFQ0FZX1JBVEVfQ09OU1RBTlQgKiB2aXNpdEFnZUluRGF5cyk7XG4gIGNvbnN0IHRvdGFsVmlzaXRWYWx1ZSA9IGZyZWNlbmN5ICsgY3VycmVudFZpc2l0VmFsdWU7XG5cbiAgcmV0dXJuIHtcbiAgICBsYXN0VmlzaXRlZDogbm93LFxuICAgIGZyZWNlbmN5OiB0b3RhbFZpc2l0VmFsdWUsXG4gIH07XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCBkZWZhdWx0S2V5ID0gKGl0ZW06IGFueSk6IHN0cmluZyA9PiB7XG4gIGlmIChcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiZcbiAgICAodHlwZW9mIGl0ZW0gIT09IFwib2JqZWN0XCIgfHwgIWl0ZW0gfHwgIShcImlkXCIgaW4gaXRlbSkgfHwgdHlwZW9mIGl0ZW0uaWQgIT0gXCJzdHJpbmdcIilcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU3BlY2lmeSBhIGtleSBmdW5jdGlvbiBvciBtYWtlIHN1cmUgeW91ciBpdGVtcyBoYXZlIGFuICdpZCcgcHJvcGVydHlcIik7XG4gIH1cbiAgcmV0dXJuIGl0ZW0uaWQ7XG59O1xuXG4vKipcbiAqIFNvcnQgYW4gYXJyYXkgYnkgaXRzIGZyZWNlbmN5IGFuZCBwcm92aWRlIG1ldGhvZHMgdG8gdXBkYXRlIHRoZSBmcmVjZW5jeSBvZiBpdHMgaXRlbXMuXG4gKiBGcmVjZW5jeSBpcyBhIG1lYXN1cmUgdGhhdCBjb21iaW5lcyBmcmVxdWVuY3kgYW5kIHJlY2VuY3kuIFRoZSBtb3JlIG9mdGVuIGFuIGl0ZW0gaXMgdmlzaXRlZC91c2VkLCBhbmQgdGhlIG1vcmUgcmVjZW50bHkgYW4gaXRlbSBpcyB2aXNpdGVkL3VzZWQsIHRoZSBoaWdoZXIgaXQgd2lsbCByYW5rLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGltcG9ydCB7IExpc3QsIEFjdGlvblBhbmVsLCBBY3Rpb24sIEljb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyB1c2VGZXRjaCwgdXNlRnJlY2VuY3lTb3J0aW5nIH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29tbWFuZCgpIHtcbiAqICAgY29uc3QgeyBpc0xvYWRpbmcsIGRhdGEgfSA9IHVzZUZldGNoKFwiaHR0cHM6Ly9hcGkuZXhhbXBsZVwiKTtcbiAqICAgY29uc3QgeyBkYXRhOiBzb3J0ZWREYXRhLCB2aXNpdEl0ZW0sIHJlc2V0UmFua2luZyB9ID0gdXNlRnJlY2VuY3lTb3J0aW5nKGRhdGEpO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8TGlzdCBpc0xvYWRpbmc9e2lzTG9hZGluZ30+XG4gKiAgICAgICB7c29ydGVkRGF0YS5tYXAoKGl0ZW0pID0+IChcbiAqICAgICAgICAgPExpc3QuSXRlbVxuICogICAgICAgICAgIGtleT17aXRlbS5pZH1cbiAqICAgICAgICAgICB0aXRsZT17aXRlbS50aXRsZX1cbiAqICAgICAgICAgICBhY3Rpb25zPXtcbiAqICAgICAgICAgICAgIDxBY3Rpb25QYW5lbD5cbiAqICAgICAgICAgICAgICAgPEFjdGlvbi5PcGVuSW5Ccm93c2VyIHVybD17aXRlbS51cmx9IG9uT3Blbj17KCkgPT4gdmlzaXRJdGVtKGl0ZW0pfSAvPlxuICogICAgICAgICAgICAgICA8QWN0aW9uLkNvcHlUb0NsaXBib2FyZCB0aXRsZT1cIkNvcHkgTGlua1wiIGNvbnRlbnQ9e2l0ZW0udXJsfSBvbkNvcHk9eygpID0+IHZpc2l0SXRlbShpdGVtKX0gLz5cbiAqICAgICAgICAgICAgICAgPEFjdGlvbiB0aXRsZT1cIlJlc2V0IFJhbmtpbmdcIiBpY29uPXtJY29uLkFycm93Q291bnRlckNsb2Nrd2lzZX0gb25BY3Rpb249eygpID0+IHJlc2V0UmFua2luZyhpdGVtKX0gLz5cbiAqICAgICAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gKiAgICAgICAgICAgfVxuICogICAgICAgICAvPlxuICogICAgICAgKSl9XG4gKiAgICAgPC9MaXN0PlxuICogICApO1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRnJlY2VuY3lTb3J0aW5nPFQgZXh0ZW5kcyB7IGlkOiBzdHJpbmcgfT4oXG4gIGRhdGE/OiBUW10sXG4gIG9wdGlvbnM/OiB7IG5hbWVzcGFjZT86IHN0cmluZzsga2V5PzogKGl0ZW06IFQpID0+IHN0cmluZzsgc29ydFVudmlzaXRlZD86IChhOiBULCBiOiBUKSA9PiBudW1iZXIgfSxcbik6IHtcbiAgZGF0YTogVFtdO1xuICB2aXNpdEl0ZW06IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZXNldFJhbmtpbmc6IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xufTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VGcmVjZW5jeVNvcnRpbmc8VD4oXG4gIGRhdGE6IFRbXSB8IHVuZGVmaW5lZCxcbiAgb3B0aW9uczogeyBuYW1lc3BhY2U/OiBzdHJpbmc7IGtleTogKGl0ZW06IFQpID0+IHN0cmluZzsgc29ydFVudmlzaXRlZD86IChhOiBULCBiOiBUKSA9PiBudW1iZXIgfSxcbik6IHtcbiAgZGF0YTogVFtdO1xuICB2aXNpdEl0ZW06IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZXNldFJhbmtpbmc6IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xufTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VGcmVjZW5jeVNvcnRpbmc8VD4oXG4gIGRhdGE/OiBUW10sXG4gIG9wdGlvbnM/OiB7IG5hbWVzcGFjZT86IHN0cmluZzsga2V5PzogKGl0ZW06IFQpID0+IHN0cmluZzsgc29ydFVudmlzaXRlZD86IChhOiBULCBiOiBUKSA9PiBudW1iZXIgfSxcbik6IHtcbiAgZGF0YTogVFtdO1xuICB2aXNpdEl0ZW06IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZXNldFJhbmtpbmc6IChpdGVtOiBUKSA9PiBQcm9taXNlPHZvaWQ+O1xufSB7XG4gIGNvbnN0IGtleVJlZiA9IHVzZUxhdGVzdChvcHRpb25zPy5rZXkgfHwgZGVmYXVsdEtleSk7XG4gIGNvbnN0IHNvcnRVbnZpc2l0ZWRSZWYgPSB1c2VMYXRlc3Qob3B0aW9ucz8uc29ydFVudmlzaXRlZCk7XG5cbiAgY29uc3QgW3N0b3JlZEZyZWNlbmNpZXMsIHNldFN0b3JlZEZyZWNlbmNpZXNdID0gdXNlQ2FjaGVkU3RhdGU8UmVjb3JkPHN0cmluZywgRnJlY2VuY3kgfCB1bmRlZmluZWQ+PihcbiAgICBgcmF5Y2FzdF9mcmVjZW5jeV8ke29wdGlvbnM/Lm5hbWVzcGFjZX1gLFxuICAgIHt9LFxuICApO1xuXG4gIGNvbnN0IHZpc2l0SXRlbSA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUZyZWNlbmN5KGl0ZW06IFQpIHtcbiAgICAgIGNvbnN0IGl0ZW1LZXkgPSBrZXlSZWYuY3VycmVudChpdGVtKTtcblxuICAgICAgc2V0U3RvcmVkRnJlY2VuY2llcygoc3RvcmVkRnJlY2VuY2llcykgPT4ge1xuICAgICAgICBjb25zdCBmcmVjZW5jeSA9IHN0b3JlZEZyZWNlbmNpZXNbaXRlbUtleV07XG4gICAgICAgIGNvbnN0IG5ld0ZyZWNlbmN5ID0gZ2V0TmV3RnJlY2VuY3koZnJlY2VuY3kpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RvcmVkRnJlY2VuY2llcyxcbiAgICAgICAgICBbaXRlbUtleV06IG5ld0ZyZWNlbmN5LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBba2V5UmVmLCBzZXRTdG9yZWRGcmVjZW5jaWVzXSxcbiAgKTtcblxuICBjb25zdCByZXNldFJhbmtpbmcgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyBmdW5jdGlvbiByZW1vdmVGcmVjZW5jeShpdGVtOiBUKSB7XG4gICAgICBjb25zdCBpdGVtS2V5ID0ga2V5UmVmLmN1cnJlbnQoaXRlbSk7XG5cbiAgICAgIHNldFN0b3JlZEZyZWNlbmNpZXMoKHN0b3JlZEZyZWNlbmNpZXMpID0+IHtcbiAgICAgICAgY29uc3QgbmV3RnJlbmNlbmNpZXMgPSB7IC4uLnN0b3JlZEZyZWNlbmNpZXMgfTtcbiAgICAgICAgZGVsZXRlIG5ld0ZyZW5jZW5jaWVzW2l0ZW1LZXldO1xuXG4gICAgICAgIHJldHVybiBuZXdGcmVuY2VuY2llcztcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2tleVJlZiwgc2V0U3RvcmVkRnJlY2VuY2llc10sXG4gICk7XG5cbiAgY29uc3Qgc29ydGVkRGF0YSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGZyZWNlbmN5QSA9IHN0b3JlZEZyZWNlbmNpZXNba2V5UmVmLmN1cnJlbnQoYSldO1xuICAgICAgY29uc3QgZnJlY2VuY3lCID0gc3RvcmVkRnJlY2VuY2llc1trZXlSZWYuY3VycmVudChiKV07XG5cbiAgICAgIC8vIElmIGEgaGFzIGEgZnJlY2VuY3ksIGJ1dCBiIGRvZXNuJ3QsIGEgc2hvdWxkIGNvbWUgZmlyc3RcbiAgICAgIGlmIChmcmVjZW5jeUEgJiYgIWZyZWNlbmN5Qikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGIgaGFzIGEgZnJlY2VuY3ksIGJ1dCBhIGRvZXNuJ3QsIGIgc2hvdWxkIGNvbWUgZmlyc3RcbiAgICAgIGlmICghZnJlY2VuY3lBICYmIGZyZWNlbmN5Qikge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYm90aCBmcmVjZW5jaWVzIGFyZSBkZWZpbmVkLHB1dCB0aGUgb25lIHdpdGggdGhlIGhpZ2hlciBmcmVjZW5jeSBmaXJzdFxuICAgICAgaWYgKGZyZWNlbmN5QSAmJiBmcmVjZW5jeUIpIHtcbiAgICAgICAgcmV0dXJuIGZyZWNlbmN5Qi5mcmVjZW5jeSAtIGZyZWNlbmN5QS5mcmVjZW5jeTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYm90aCBmcmVjZW5jaWVzIGFyZSB1bmRlZmluZWQsIGtlZXAgdGhlIG9yaWdpbmFsIG9yZGVyXG4gICAgICByZXR1cm4gc29ydFVudmlzaXRlZFJlZi5jdXJyZW50ID8gc29ydFVudmlzaXRlZFJlZi5jdXJyZW50KGEsIGIpIDogMDtcbiAgICB9KTtcbiAgfSwgW3N0b3JlZEZyZWNlbmNpZXMsIGRhdGEsIGtleVJlZiwgc29ydFVudmlzaXRlZFJlZl0pO1xuXG4gIHJldHVybiB7IGRhdGE6IHNvcnRlZERhdGEsIHZpc2l0SXRlbSwgcmVzZXRSYW5raW5nIH07XG59XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgc2hvd0ZhaWx1cmVUb2FzdCB9IGZyb20gXCIuL3Nob3dGYWlsdXJlVG9hc3RcIjtcbmltcG9ydCB7IHJlcGxhY2VyLCByZXZpdmVyIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuaW1wb3J0IHsgdXNlUHJvbWlzZSB9IGZyb20gXCIuL3VzZVByb21pc2VcIjtcblxuLyoqXG4gKiBBIGhvb2sgdG8gbWFuYWdlIGEgdmFsdWUgaW4gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKlxuICogQHJlbWFyayBUaGUgdmFsdWUgaXMgc3RvcmVkIGFzIGEgSlNPTiBzdHJpbmcgaW4gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKlxuICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gdXNlIGZvciB0aGUgdmFsdWUgaW4gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKiBAcGFyYW0gaW5pdGlhbFZhbHVlIC0gVGhlIGluaXRpYWwgdmFsdWUgdG8gdXNlIGlmIHRoZSBrZXkgZG9lc24ndCBleGlzdCBpbiB0aGUgbG9jYWwgc3RvcmFnZS5cbiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIC0gYHZhbHVlYDogVGhlIHZhbHVlIGZyb20gdGhlIGxvY2FsIHN0b3JhZ2Ugb3IgdGhlIGluaXRpYWwgdmFsdWUgaWYgdGhlIGtleSBkb2Vzbid0IGV4aXN0LlxuICogLSBgc2V0VmFsdWVgOiBBIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdmFsdWUgaW4gdGhlIGxvY2FsIHN0b3JhZ2UuXG4gKiAtIGByZW1vdmVWYWx1ZWA6IEEgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoZSB2YWx1ZSBmcm9tIHRoZSBsb2NhbCBzdG9yYWdlLlxuICogLSBgaXNMb2FkaW5nYDogQSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIHZhbHVlIGlzIGxvYWRpbmcuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY29uc3QgeyB2YWx1ZSwgc2V0VmFsdWUgfSA9IHVzZUxvY2FsU3RvcmFnZTxzdHJpbmc+KFwibXkta2V5XCIpO1xuICogY29uc3QgeyB2YWx1ZSwgc2V0VmFsdWUgfSA9IHVzZUxvY2FsU3RvcmFnZTxzdHJpbmc+KFwibXkta2V5XCIsIFwiZGVmYXVsdCB2YWx1ZVwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTG9jYWxTdG9yYWdlPFQ+KGtleTogc3RyaW5nLCBpbml0aWFsVmFsdWU/OiBUKSB7XG4gIGNvbnN0IHtcbiAgICBkYXRhOiB2YWx1ZSxcbiAgICBpc0xvYWRpbmcsXG4gICAgbXV0YXRlLFxuICB9ID0gdXNlUHJvbWlzZShcbiAgICBhc3luYyAoc3RvcmFnZUtleTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgTG9jYWxTdG9yYWdlLmdldEl0ZW08c3RyaW5nPihzdG9yYWdlS2V5KTtcblxuICAgICAgcmV0dXJuIHR5cGVvZiBpdGVtICE9PSBcInVuZGVmaW5lZFwiID8gKEpTT04ucGFyc2UoaXRlbSwgcmV2aXZlcikgYXMgVCkgOiBpbml0aWFsVmFsdWU7XG4gICAgfSxcbiAgICBba2V5XSxcbiAgKTtcblxuICBhc3luYyBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZTogVCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBtdXRhdGUoTG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgcmVwbGFjZXIpKSwge1xuICAgICAgICBvcHRpbWlzdGljVXBkYXRlKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dGYWlsdXJlVG9hc3QoZXJyb3IsIHsgdGl0bGU6IFwiRmFpbGVkIHRvIHNldCB2YWx1ZSBpbiBsb2NhbCBzdG9yYWdlXCIgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlVmFsdWUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG11dGF0ZShMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpLCB7XG4gICAgICAgIG9wdGltaXN0aWNVcGRhdGUoKSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBzaG93RmFpbHVyZVRvYXN0KGVycm9yLCB7IHRpdGxlOiBcIkZhaWxlZCB0byByZW1vdmUgdmFsdWUgZnJvbSBsb2NhbCBzdG9yYWdlXCIgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgdmFsdWUsIHNldFZhbHVlLCByZW1vdmVWYWx1ZSwgaXNMb2FkaW5nIH07XG59XG4iLCAiZXhwb3J0IHsgZ2V0QXZhdGFySWNvbiB9IGZyb20gXCIuL2F2YXRhclwiO1xuZXhwb3J0IHsgZ2V0RmF2aWNvbiB9IGZyb20gXCIuL2Zhdmljb25cIjtcbmV4cG9ydCB7IGdldFByb2dyZXNzSWNvbiB9IGZyb20gXCIuL3Byb2dyZXNzXCI7XG4iLCAiaW1wb3J0IHR5cGUgeyBJbWFnZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHNsaWdodGx5TGlnaHRlckNvbG9yLCBzbGlnaHRseURhcmtlckNvbG9yIH0gZnJvbSBcIi4vY29sb3JcIjtcblxuZnVuY3Rpb24gZ2V0V2hvbGVDaGFyQW5kSShzdHI6IHN0cmluZywgaTogbnVtYmVyKTogW3N0cmluZywgbnVtYmVyXSB7XG4gIGNvbnN0IGNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcblxuICBpZiAoTnVtYmVyLmlzTmFOKGNvZGUpKSB7XG4gICAgcmV0dXJuIFtcIlwiLCBpXTtcbiAgfVxuICBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID4gMHhkZmZmKSB7XG4gICAgcmV0dXJuIFtzdHIuY2hhckF0KGkpLCBpXTsgLy8gTm9ybWFsIGNoYXJhY3Rlciwga2VlcGluZyAnaScgdGhlIHNhbWVcbiAgfVxuXG4gIC8vIEhpZ2ggc3Vycm9nYXRlIChjb3VsZCBjaGFuZ2UgbGFzdCBoZXggdG8gMHhEQjdGIHRvIHRyZWF0IGhpZ2ggcHJpdmF0ZVxuICAvLyBzdXJyb2dhdGVzIGFzIHNpbmdsZSBjaGFyYWN0ZXJzKVxuICBpZiAoMHhkODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweGRiZmYpIHtcbiAgICBpZiAoc3RyLmxlbmd0aCA8PSBpICsgMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSGlnaCBzdXJyb2dhdGUgd2l0aG91dCBmb2xsb3dpbmcgbG93IHN1cnJvZ2F0ZVwiKTtcbiAgICB9XG4gICAgY29uc3QgbmV4dCA9IHN0ci5jaGFyQ29kZUF0KGkgKyAxKTtcbiAgICBpZiAoMHhkYzAwID4gbmV4dCB8fCBuZXh0ID4gMHhkZmZmKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIaWdoIHN1cnJvZ2F0ZSB3aXRob3V0IGZvbGxvd2luZyBsb3cgc3Vycm9nYXRlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gW3N0ci5jaGFyQXQoaSkgKyBzdHIuY2hhckF0KGkgKyAxKSwgaSArIDFdO1xuICB9XG5cbiAgLy8gTG93IHN1cnJvZ2F0ZSAoMHhEQzAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERGRkYpXG4gIGlmIChpID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTG93IHN1cnJvZ2F0ZSB3aXRob3V0IHByZWNlZGluZyBoaWdoIHN1cnJvZ2F0ZVwiKTtcbiAgfVxuXG4gIGNvbnN0IHByZXYgPSBzdHIuY2hhckNvZGVBdChpIC0gMSk7XG5cbiAgLy8gKGNvdWxkIGNoYW5nZSBsYXN0IGhleCB0byAweERCN0YgdG8gdHJlYXQgaGlnaCBwcml2YXRlIHN1cnJvZ2F0ZXNcbiAgLy8gYXMgc2luZ2xlIGNoYXJhY3RlcnMpXG4gIGlmICgweGQ4MDAgPiBwcmV2IHx8IHByZXYgPiAweGRiZmYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb3cgc3Vycm9nYXRlIHdpdGhvdXQgcHJlY2VkaW5nIGhpZ2ggc3Vycm9nYXRlXCIpO1xuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBuZXh0IGNoYXJhY3RlciBpbnN0ZWFkIChhbmQgaW5jcmVtZW50KVxuICByZXR1cm4gW3N0ci5jaGFyQXQoaSArIDEpLCBpICsgMV07XG59XG5cbmNvbnN0IGF2YXRhckNvbG9yU2V0ID0gW1xuICBcIiNEQzgyOUFcIiwgLy8gUGlua1xuICBcIiNENjQ4NTRcIiwgLy8gUmVkXG4gIFwiI0Q0NzYwMFwiLCAvLyBZZWxsb3dPcmFuZ2VcbiAgXCIjRDM2Q0REXCIsIC8vIE1hZ2VudGFcbiAgXCIjNTJBOUU0XCIsIC8vIEFxdWFcbiAgXCIjNzg3MUU4XCIsIC8vIEluZGlnb1xuICBcIiM3MDkyMEZcIiwgLy8gWWVsbG93R3JlZW5cbiAgXCIjNDNCOTNBXCIsIC8vIEdyZWVuXG4gIFwiI0VCNkIzRVwiLCAvLyBPcmFuZ2VcbiAgXCIjMjZCNzk1XCIsIC8vIEJsdWVHcmVlblxuICBcIiNEODVBOUJcIiwgLy8gSG90UGlua1xuICBcIiNBMDY3RENcIiwgLy8gUHVycGxlXG4gIFwiI0JEOTUwMFwiLCAvLyBZZWxsb3dcbiAgXCIjNTM4NUQ5XCIsIC8vIEJsdWVcbl07XG5cbi8qKlxuICogSWNvbiB0byByZXByZXNlbnQgYW4gYXZhdGFyIHdoZW4geW91IGRvbid0IGhhdmUgb25lLiBUaGUgZ2VuZXJhdGVkIGF2YXRhclxuICogd2lsbCBiZSBnZW5lcmF0ZWQgZnJvbSB0aGUgaW5pdGlhbHMgb2YgdGhlIG5hbWUgYW5kIGhhdmUgYSBjb2xvcmZ1bCBidXQgY29uc2lzdGVudCBiYWNrZ3JvdW5kLlxuICpcbiAqIEByZXR1cm5zIGFuIEltYWdlIHRoYXQgY2FuIGJlIHVzZWQgd2hlcmUgUmF5Y2FzdCBleHBlY3RzIHRoZW0uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogPExpc3QuSXRlbSBpY29uPXtnZXRBdmF0YXJJY29uKCdNYXRoaWV1IER1dG91cicpfSB0aXRsZT1cIlByb2plY3RcIiAvPlxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdmF0YXJJY29uKFxuICBuYW1lOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7XG4gICAgLyoqXG4gICAgICogQ3VzdG9tIGJhY2tncm91bmQgY29sb3JcbiAgICAgKi9cbiAgICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gdXNlIGEgZ3JhZGllbnQgZm9yIHRoZSBiYWNrZ3JvdW5kIG9yIG5vdC5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZ3JhZGllbnQ/OiBib29sZWFuO1xuICB9LFxuKTogSW1hZ2UuQXNzZXQge1xuICBjb25zdCB3b3JkcyA9IG5hbWUudHJpbSgpLnNwbGl0KFwiIFwiKTtcbiAgbGV0IGluaXRpYWxzOiBzdHJpbmc7XG4gIGlmICh3b3Jkcy5sZW5ndGggPT0gMSAmJiBnZXRXaG9sZUNoYXJBbmRJKHdvcmRzWzBdLCAwKVswXSkge1xuICAgIGluaXRpYWxzID0gZ2V0V2hvbGVDaGFyQW5kSSh3b3Jkc1swXSwgMClbMF07XG4gIH0gZWxzZSBpZiAod29yZHMubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGZpcnN0V29yZEZpcnN0TGV0dGVyID0gZ2V0V2hvbGVDaGFyQW5kSSh3b3Jkc1swXSwgMClbMF0gfHwgXCJcIjtcbiAgICBjb25zdCBsYXN0V29yZEZpcnN0TGV0dGVyID0gZ2V0V2hvbGVDaGFyQW5kSSh3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXSwgMClbMF0gPz8gXCJcIjtcbiAgICBpbml0aWFscyA9IGZpcnN0V29yZEZpcnN0TGV0dGVyICsgbGFzdFdvcmRGaXJzdExldHRlcjtcbiAgfSBlbHNlIHtcbiAgICBpbml0aWFscyA9IFwiXCI7XG4gIH1cblxuICBsZXQgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG5cbiAgaWYgKG9wdGlvbnM/LmJhY2tncm91bmQpIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zPy5iYWNrZ3JvdW5kO1xuICB9IGVsc2Uge1xuICAgIGxldCBpbml0aWFsc0NoYXJJbmRleCA9IDA7XG4gICAgbGV0IFtjaGFyLCBpXSA9IGdldFdob2xlQ2hhckFuZEkoaW5pdGlhbHMsIDApO1xuICAgIHdoaWxlIChjaGFyKSB7XG4gICAgICBpbml0aWFsc0NoYXJJbmRleCArPSBjaGFyLmNoYXJDb2RlQXQoMCk7XG4gICAgICBbY2hhciwgaV0gPSBnZXRXaG9sZUNoYXJBbmRJKGluaXRpYWxzLCBpICsgMSk7XG4gICAgfVxuXG4gICAgY29uc3QgY29sb3JJbmRleCA9IGluaXRpYWxzQ2hhckluZGV4ICUgYXZhdGFyQ29sb3JTZXQubGVuZ3RoO1xuICAgIGJhY2tncm91bmRDb2xvciA9IGF2YXRhckNvbG9yU2V0W2NvbG9ySW5kZXhdO1xuICB9XG5cbiAgY29uc3QgcGFkZGluZyA9IDA7XG4gIGNvbnN0IHJhZGl1cyA9IDUwIC0gcGFkZGluZztcblxuICBjb25zdCBzdmcgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCI+XG4gICR7XG4gICAgb3B0aW9ucz8uZ3JhZGllbnQgIT09IGZhbHNlXG4gICAgICA/IGA8ZGVmcz5cbiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cIkdyYWRpZW50XCIgeDE9XCIwLjI1XCIgeDI9XCIwLjc1XCIgeTE9XCIwXCIgeTI9XCIxXCI+XG4gICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgc3RvcC1jb2xvcj1cIiR7c2xpZ2h0bHlMaWdodGVyQ29sb3IoYmFja2dyb3VuZENvbG9yKX1cIi8+XG4gICAgICAgIDxzdG9wIG9mZnNldD1cIjUwJVwiIHN0b3AtY29sb3I9XCIke2JhY2tncm91bmRDb2xvcn1cIi8+XG4gICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdG9wLWNvbG9yPVwiJHtzbGlnaHRseURhcmtlckNvbG9yKGJhY2tncm91bmRDb2xvcil9XCIvPlxuICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgPC9kZWZzPmBcbiAgICAgIDogXCJcIlxuICB9XG4gICAgICA8Y2lyY2xlIGN4PVwiNTBcIiBjeT1cIjUwXCIgcj1cIiR7cmFkaXVzfVwiIGZpbGw9XCIke1xuICAgICAgICBvcHRpb25zPy5ncmFkaWVudCAhPT0gZmFsc2UgPyBcInVybCgjR3JhZGllbnQpXCIgOiBiYWNrZ3JvdW5kQ29sb3JcbiAgICAgIH1cIiAvPlxuICAgICAgJHtcbiAgICAgICAgaW5pdGlhbHNcbiAgICAgICAgICA/IGA8dGV4dCB4PVwiNTBcIiB5PVwiODBcIiBmb250LXNpemU9XCIke1xuICAgICAgICAgICAgICByYWRpdXMgLSAxXG4gICAgICAgICAgICB9XCIgZm9udC1mYW1pbHk9XCJJbnRlciwgc2Fucy1zZXJpZlwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgZmlsbD1cIndoaXRlXCI+JHtpbml0aWFscy50b1VwcGVyQ2FzZSgpfTwvdGV4dD5gXG4gICAgICAgICAgOiBcIlwiXG4gICAgICB9XG4gICAgPC9zdmc+XG4gIGAucmVwbGFjZUFsbChcIlxcblwiLCBcIlwiKTtcbiAgcmV0dXJuIGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoc3ZnKX1gO1xufVxuIiwgImZ1bmN0aW9uIGhleFRvUkdCKGhleDogc3RyaW5nKSB7XG4gIGxldCByID0gMDtcbiAgbGV0IGcgPSAwO1xuICBsZXQgYiA9IDA7XG5cbiAgLy8gMyBkaWdpdHNcbiAgaWYgKGhleC5sZW5ndGggPT09IDQpIHtcbiAgICByID0gcGFyc2VJbnQoYCR7aGV4WzFdfSR7aGV4WzFdfWAsIDE2KTtcbiAgICBnID0gcGFyc2VJbnQoYCR7aGV4WzJdfSR7aGV4WzJdfWAsIDE2KTtcbiAgICBiID0gcGFyc2VJbnQoYCR7aGV4WzNdfSR7aGV4WzNdfWAsIDE2KTtcblxuICAgIC8vIDYgZGlnaXRzXG4gIH0gZWxzZSBpZiAoaGV4Lmxlbmd0aCA9PT0gNykge1xuICAgIHIgPSBwYXJzZUludChgJHtoZXhbMV19JHtoZXhbMl19YCwgMTYpO1xuICAgIGcgPSBwYXJzZUludChgJHtoZXhbM119JHtoZXhbNF19YCwgMTYpO1xuICAgIGIgPSBwYXJzZUludChgJHtoZXhbNV19JHtoZXhbNl19YCwgMTYpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWFsZm9ybWVkIGhleCBjb2xvcjogJHtoZXh9YCk7XG4gIH1cblxuICByZXR1cm4geyByLCBnLCBiIH07XG59XG5cbmZ1bmN0aW9uIHJnYlRvSGV4KHsgciwgZywgYiB9OiB7IHI6IG51bWJlcjsgZzogbnVtYmVyOyBiOiBudW1iZXIgfSkge1xuICBsZXQgclN0cmluZyA9IHIudG9TdHJpbmcoMTYpO1xuICBsZXQgZ1N0cmluZyA9IGcudG9TdHJpbmcoMTYpO1xuICBsZXQgYlN0cmluZyA9IGIudG9TdHJpbmcoMTYpO1xuXG4gIGlmIChyU3RyaW5nLmxlbmd0aCA9PT0gMSkge1xuICAgIHJTdHJpbmcgPSBgMCR7clN0cmluZ31gO1xuICB9XG4gIGlmIChnU3RyaW5nLmxlbmd0aCA9PT0gMSkge1xuICAgIGdTdHJpbmcgPSBgMCR7Z1N0cmluZ31gO1xuICB9XG4gIGlmIChiU3RyaW5nLmxlbmd0aCA9PT0gMSkge1xuICAgIGJTdHJpbmcgPSBgMCR7YlN0cmluZ31gO1xuICB9XG5cbiAgcmV0dXJuIGAjJHtyU3RyaW5nfSR7Z1N0cmluZ30ke2JTdHJpbmd9YDtcbn1cblxuZnVuY3Rpb24gcmdiVG9IU0woeyByLCBnLCBiIH06IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlciB9KSB7XG4gIC8vIE1ha2UgciwgZywgYW5kIGIgZnJhY3Rpb25zIG9mIDFcbiAgciAvPSAyNTU7XG4gIGcgLz0gMjU1O1xuICBiIC89IDI1NTtcblxuICAvLyBGaW5kIGdyZWF0ZXN0IGFuZCBzbWFsbGVzdCBjaGFubmVsIHZhbHVlc1xuICBjb25zdCBjbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gIGNvbnN0IGNtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgY29uc3QgZGVsdGEgPSBjbWF4IC0gY21pbjtcbiAgbGV0IGggPSAwO1xuICBsZXQgcyA9IDA7XG4gIGxldCBsID0gMDtcblxuICAvLyBDYWxjdWxhdGUgaHVlXG4gIC8vIE5vIGRpZmZlcmVuY2VcbiAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgaCA9IDA7XG4gIH1cbiAgLy8gUmVkIGlzIG1heFxuICBlbHNlIGlmIChjbWF4ID09PSByKSB7XG4gICAgaCA9ICgoZyAtIGIpIC8gZGVsdGEpICUgNjtcbiAgfVxuICAvLyBHcmVlbiBpcyBtYXhcbiAgZWxzZSBpZiAoY21heCA9PT0gZykge1xuICAgIGggPSAoYiAtIHIpIC8gZGVsdGEgKyAyO1xuICB9XG4gIC8vIEJsdWUgaXMgbWF4XG4gIGVsc2Uge1xuICAgIGggPSAociAtIGcpIC8gZGVsdGEgKyA0O1xuICB9XG5cbiAgaCA9IE1hdGgucm91bmQoaCAqIDYwKTtcblxuICAvLyBNYWtlIG5lZ2F0aXZlIGh1ZXMgcG9zaXRpdmUgYmVoaW5kIDM2MMKwXG4gIGlmIChoIDwgMCkge1xuICAgIGggKz0gMzYwO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGxpZ2h0bmVzc1xuICBsID0gKGNtYXggKyBjbWluKSAvIDI7XG5cbiAgLy8gQ2FsY3VsYXRlIHNhdHVyYXRpb25cbiAgcyA9IGRlbHRhID09PSAwID8gMCA6IGRlbHRhIC8gKDEgLSBNYXRoLmFicygyICogbCAtIDEpKTtcblxuICAvLyBNdWx0aXBseSBsIGFuZCBzIGJ5IDEwMFxuICBzID0gKyhzICogMTAwKS50b0ZpeGVkKDEpO1xuICBsID0gKyhsICogMTAwKS50b0ZpeGVkKDEpO1xuXG4gIHJldHVybiB7IGgsIHMsIGwgfTtcbn1cblxuZnVuY3Rpb24gaHNsVG9SR0IoeyBoLCBzLCBsIH06IHsgaDogbnVtYmVyOyBzOiBudW1iZXI7IGw6IG51bWJlciB9KSB7XG4gIC8vIE11c3QgYmUgZnJhY3Rpb25zIG9mIDFcbiAgcyAvPSAxMDA7XG4gIGwgLz0gMTAwO1xuXG4gIGNvbnN0IGMgPSAoMSAtIE1hdGguYWJzKDIgKiBsIC0gMSkpICogcztcbiAgY29uc3QgeCA9IGMgKiAoMSAtIE1hdGguYWJzKCgoaCAvIDYwKSAlIDIpIC0gMSkpO1xuICBjb25zdCBtID0gbCAtIGMgLyAyO1xuICBsZXQgciA9IDA7XG4gIGxldCBnID0gMDtcbiAgbGV0IGIgPSAwO1xuXG4gIGlmIChoID49IDAgJiYgaCA8IDYwKSB7XG4gICAgciA9IGM7XG4gICAgZyA9IHg7XG4gICAgYiA9IDA7XG4gIH0gZWxzZSBpZiAoaCA+PSA2MCAmJiBoIDwgMTIwKSB7XG4gICAgciA9IHg7XG4gICAgZyA9IGM7XG4gICAgYiA9IDA7XG4gIH0gZWxzZSBpZiAoaCA+PSAxMjAgJiYgaCA8IDE4MCkge1xuICAgIHIgPSAwO1xuICAgIGcgPSBjO1xuICAgIGIgPSB4O1xuICB9IGVsc2UgaWYgKGggPj0gMTgwICYmIGggPCAyNDApIHtcbiAgICByID0gMDtcbiAgICBnID0geDtcbiAgICBiID0gYztcbiAgfSBlbHNlIGlmIChoID49IDI0MCAmJiBoIDwgMzAwKSB7XG4gICAgciA9IHg7XG4gICAgZyA9IDA7XG4gICAgYiA9IGM7XG4gIH0gZWxzZSBpZiAoaCA+PSAzMDAgJiYgaCA8IDM2MCkge1xuICAgIHIgPSBjO1xuICAgIGcgPSAwO1xuICAgIGIgPSB4O1xuICB9XG4gIHIgPSBNYXRoLnJvdW5kKChyICsgbSkgKiAyNTUpO1xuICBnID0gTWF0aC5yb3VuZCgoZyArIG0pICogMjU1KTtcbiAgYiA9IE1hdGgucm91bmQoKGIgKyBtKSAqIDI1NSk7XG5cbiAgcmV0dXJuIHsgciwgZywgYiB9O1xufVxuXG5mdW5jdGlvbiBoZXhUb0hTTChoZXg6IHN0cmluZykge1xuICByZXR1cm4gcmdiVG9IU0woaGV4VG9SR0IoaGV4KSk7XG59XG5cbmZ1bmN0aW9uIGhzbFRvSGV4KGhzbDogeyBoOiBudW1iZXI7IHM6IG51bWJlcjsgbDogbnVtYmVyIH0pIHtcbiAgcmV0dXJuIHJnYlRvSGV4KGhzbFRvUkdCKGhzbCkpO1xufVxuXG5mdW5jdGlvbiBjbGFtcCh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgcmV0dXJuIG1pbiA8IG1heCA/ICh2YWx1ZSA8IG1pbiA/IG1pbiA6IHZhbHVlID4gbWF4ID8gbWF4IDogdmFsdWUpIDogdmFsdWUgPCBtYXggPyBtYXggOiB2YWx1ZSA+IG1pbiA/IG1pbiA6IHZhbHVlO1xufVxuXG5jb25zdCBvZmZzZXQgPSAxMjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNsaWdodGx5RGFya2VyQ29sb3IoaGV4OiBzdHJpbmcpIHtcbiAgY29uc3QgaHNsID0gaGV4VG9IU0woaGV4KTtcblxuICByZXR1cm4gaHNsVG9IZXgoe1xuICAgIGg6IGhzbC5oLFxuICAgIHM6IGhzbC5zLFxuICAgIGw6IGNsYW1wKGhzbC5sIC0gb2Zmc2V0LCAwLCAxMDApLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNsaWdodGx5TGlnaHRlckNvbG9yKGhleDogc3RyaW5nKSB7XG4gIGNvbnN0IGhzbCA9IGhleFRvSFNMKGhleCk7XG5cbiAgcmV0dXJuIGhzbFRvSGV4KHtcbiAgICBoOiBoc2wuaCxcbiAgICBzOiBoc2wucyxcbiAgICBsOiBjbGFtcChoc2wubCArIG9mZnNldCwgMCwgMTAwKSxcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgSWNvbiwgSW1hZ2UgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBVUkwgfSBmcm9tIFwibm9kZTp1cmxcIjtcblxuLyoqXG4gKiBJY29uIHNob3dpbmcgdGhlIGZhdmljb24gb2YgYSB3ZWJzaXRlLlxuICpcbiAqIEEgZmF2aWNvbiAoZmF2b3JpdGUgaWNvbikgaXMgYSB0aW55IGljb24gaW5jbHVkZWQgYWxvbmcgd2l0aCBhIHdlYnNpdGUsIHdoaWNoIGlzIGRpc3BsYXllZCBpbiBwbGFjZXMgbGlrZSB0aGUgYnJvd3NlcidzIGFkZHJlc3MgYmFyLCBwYWdlIHRhYnMsIGFuZCBib29rbWFya3MgbWVudS5cbiAqXG4gKiBAcGFyYW0gdXJsIFRoZSBVUkwgb2YgdGhlIHdlYnNpdGUgdG8gcmVwcmVzZW50LlxuICpcbiAqIEByZXR1cm5zIGFuIEltYWdlIHRoYXQgY2FuIGJlIHVzZWQgd2hlcmUgUmF5Y2FzdCBleHBlY3RzIHRoZW0uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogPExpc3QuSXRlbSBpY29uPXtnZXRGYXZpY29uKFwiaHR0cHM6Ly9yYXljYXN0LmNvbVwiKX0gdGl0bGU9XCJSYXljYXN0IFdlYnNpdGVcIiAvPlxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGYXZpY29uKFxuICB1cmw6IHN0cmluZyB8IFVSTCxcbiAgb3B0aW9ucz86IHtcbiAgICAvKipcbiAgICAgKiBTaXplIG9mIHRoZSBGYXZpY29uXG4gICAgICogQGRlZmF1bHQgNjRcbiAgICAgKi9cbiAgICBzaXplPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEZhbGxiYWNrIGljb24gaW4gY2FzZSB0aGUgRmF2aWNvbiBpcyBub3QgZm91bmQuXG4gICAgICogQGRlZmF1bHQgSWNvbi5MaW5rXG4gICAgICovXG4gICAgZmFsbGJhY2s/OiBJbWFnZS5GYWxsYmFjaztcbiAgICAvKipcbiAgICAgKiBBIHtAbGluayBJbWFnZS5NYXNrfSB0byBhcHBseSB0byB0aGUgRmF2aWNvbi5cbiAgICAgKi9cbiAgICBtYXNrPzogSW1hZ2UuTWFzaztcbiAgfSxcbik6IEltYWdlLkltYWdlTGlrZSB7XG4gIHRyeSB7XG4gICAgLy8gYSBmdW5jIGFkZGluZyBodHRwczovLyB0byB0aGUgVVJMXG4gICAgLy8gZm9yIGNhc2VzIHdoZXJlIHRoZSBVUkwgaXMgbm90IGEgZnVsbCBVUkxcbiAgICAvLyBlLmcuIFwicmF5Y2FzdC5jb21cIlxuICAgIGNvbnN0IHNhbml0aXplID0gKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIXVybC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHt1cmx9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcblxuICAgIGNvbnN0IHVybE9iaiA9IHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIgPyBuZXcgVVJMKHNhbml0aXplKHVybCkpIDogdXJsO1xuICAgIGNvbnN0IGhvc3RuYW1lID0gdXJsT2JqLmhvc3RuYW1lO1xuXG4gICAgY29uc3QgZmF2aWNvblByb3ZpZGVyOiBcIm5vbmVcIiB8IFwicmF5Y2FzdFwiIHwgXCJhcHBsZVwiIHwgXCJnb29nbGVcIiB8IFwiZHVja0R1Y2tHb1wiIHwgXCJkdWNrZHVja2dvXCIgfCBcImxlZ2FjeVwiID1cbiAgICAgIChwcm9jZXNzLmVudi5GQVZJQ09OX1BST1ZJREVSIGFzIGFueSkgPz8gXCJyYXljYXN0XCI7XG5cbiAgICBzd2l0Y2ggKGZhdmljb25Qcm92aWRlcikge1xuICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IG9wdGlvbnM/LmZhbGxiYWNrID8/IEljb24uTGluayxcbiAgICAgICAgICBtYXNrOiBvcHRpb25zPy5tYXNrLFxuICAgICAgICB9O1xuICAgICAgY2FzZSBcImFwcGxlXCI6XG4gICAgICAgIC8vIHdlIGNhbid0IHN1cHBvcnQgYXBwbGUgZmF2aWNvbnMgYXMgaXQncyBhIG5hdGl2ZSBBUElcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IG9wdGlvbnM/LmZhbGxiYWNrID8/IEljb24uTGluayxcbiAgICAgICAgICBtYXNrOiBvcHRpb25zPy5tYXNrLFxuICAgICAgICB9O1xuICAgICAgY2FzZSBcImR1Y2tkdWNrZ29cIjpcbiAgICAgIGNhc2UgXCJkdWNrRHVja0dvXCI6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc291cmNlOiBgaHR0cHM6Ly9pY29ucy5kdWNrZHVja2dvLmNvbS9pcDMvJHtob3N0bmFtZX0uaWNvYCxcbiAgICAgICAgICBmYWxsYmFjazogb3B0aW9ucz8uZmFsbGJhY2sgPz8gSWNvbi5MaW5rLFxuICAgICAgICAgIG1hc2s6IG9wdGlvbnM/Lm1hc2ssXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwiZ29vZ2xlXCI6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc291cmNlOiBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zMi9mYXZpY29ucz9zej0ke29wdGlvbnM/LnNpemUgPz8gNjR9JmRvbWFpbj0ke2hvc3RuYW1lfWAsXG4gICAgICAgICAgZmFsbGJhY2s6IG9wdGlvbnM/LmZhbGxiYWNrID8/IEljb24uTGluayxcbiAgICAgICAgICBtYXNrOiBvcHRpb25zPy5tYXNrLFxuICAgICAgICB9O1xuICAgICAgY2FzZSBcImxlZ2FjeVwiOlxuICAgICAgY2FzZSBcInJheWNhc3RcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc291cmNlOiBgaHR0cHM6Ly9hcGkucmF5LnNvL2Zhdmljb24/dXJsPSR7aG9zdG5hbWV9JnNpemU9JHtvcHRpb25zPy5zaXplID8/IDY0fWAsXG4gICAgICAgICAgZmFsbGJhY2s6IG9wdGlvbnM/LmZhbGxiYWNrID8/IEljb24uTGluayxcbiAgICAgICAgICBtYXNrOiBvcHRpb25zPy5tYXNrLFxuICAgICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgcmV0dXJuIEljb24uTGluaztcbiAgfVxufVxuIiwgImltcG9ydCB7IGVudmlyb25tZW50LCBDb2xvciB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB0eXBlIHsgSW1hZ2UgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5cbmZ1bmN0aW9uIHBvbGFyVG9DYXJ0ZXNpYW4oY2VudGVyWDogbnVtYmVyLCBjZW50ZXJZOiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBhbmdsZUluRGVncmVlczogbnVtYmVyKSB7XG4gIGNvbnN0IGFuZ2xlSW5SYWRpYW5zID0gKChhbmdsZUluRGVncmVlcyAtIDkwKSAqIE1hdGguUEkpIC8gMTgwLjA7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBjZW50ZXJYICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpLFxuICAgIHk6IGNlbnRlclkgKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZUluUmFkaWFucyksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlc2NyaWJlQXJjKHg6IG51bWJlciwgeTogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgc3RhcnRBbmdsZTogbnVtYmVyLCBlbmRBbmdsZTogbnVtYmVyKSB7XG4gIGNvbnN0IHN0YXJ0ID0gcG9sYXJUb0NhcnRlc2lhbih4LCB5LCByYWRpdXMsIGVuZEFuZ2xlKTtcbiAgY29uc3QgZW5kID0gcG9sYXJUb0NhcnRlc2lhbih4LCB5LCByYWRpdXMsIHN0YXJ0QW5nbGUpO1xuXG4gIGNvbnN0IGxhcmdlQXJjRmxhZyA9IGVuZEFuZ2xlIC0gc3RhcnRBbmdsZSA8PSAxODAgPyBcIjBcIiA6IFwiMVwiO1xuXG4gIGNvbnN0IGQgPSBbXCJNXCIsIHN0YXJ0LngsIHN0YXJ0LnksIFwiQVwiLCByYWRpdXMsIHJhZGl1cywgMCwgbGFyZ2VBcmNGbGFnLCAwLCBlbmQueCwgZW5kLnldLmpvaW4oXCIgXCIpO1xuXG4gIHJldHVybiBkO1xufVxuXG4vKipcbiAqIEljb24gdG8gcmVwcmVzZW50IHRoZSBwcm9ncmVzcyBvZiBfc29tZXRoaW5nXy5cbiAqXG4gKiBAcGFyYW0gcHJvZ3Jlc3MgTnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAqIEBwYXJhbSBjb2xvciBIZXggY29sb3IgKGRlZmF1bHQgYFwiI0ZGNjM2M1wiYCkgb3IgQ29sb3IuXG4gKlxuICogQHJldHVybnMgYW4gSW1hZ2UgdGhhdCBjYW4gYmUgdXNlZCB3aGVyZSBSYXljYXN0IGV4cGVjdHMgdGhlbS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiA8TGlzdC5JdGVtIGljb249e2dldFByb2dyZXNzSWNvbigwLjEpfSB0aXRsZT1cIlByb2plY3RcIiAvPlxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9ncmVzc0ljb24oXG4gIHByb2dyZXNzOiBudW1iZXIsXG4gIGNvbG9yOiBDb2xvciB8IHN0cmluZyA9IENvbG9yLlJlZCxcbiAgb3B0aW9ucz86IHsgYmFja2dyb3VuZD86IENvbG9yIHwgc3RyaW5nOyBiYWNrZ3JvdW5kT3BhY2l0eT86IG51bWJlciB9LFxuKTogSW1hZ2UuQXNzZXQge1xuICBjb25zdCBiYWNrZ3JvdW5kID0gb3B0aW9ucz8uYmFja2dyb3VuZCB8fCAoZW52aXJvbm1lbnQuYXBwZWFyYW5jZSA9PT0gXCJsaWdodFwiID8gXCJibGFja1wiIDogXCJ3aGl0ZVwiKTtcbiAgY29uc3QgYmFja2dyb3VuZE9wYWNpdHkgPSBvcHRpb25zPy5iYWNrZ3JvdW5kT3BhY2l0eSB8fCAwLjE7XG5cbiAgY29uc3Qgc3Ryb2tlID0gMTA7XG4gIGNvbnN0IHBhZGRpbmcgPSA1O1xuICBjb25zdCByYWRpdXMgPSA1MCAtIHBhZGRpbmcgLSBzdHJva2UgLyAyO1xuXG4gIGNvbnN0IHN2ZyA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIj5cbiAgICAgIDxjaXJjbGUgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiJHtyYWRpdXN9XCIgc3Ryb2tlLXdpZHRoPVwiJHtzdHJva2V9XCIgc3Ryb2tlPVwiJHtcbiAgICAgICAgcHJvZ3Jlc3MgPCAxID8gYmFja2dyb3VuZCA6IGNvbG9yXG4gICAgICB9XCIgb3BhY2l0eT1cIiR7cHJvZ3Jlc3MgPCAxID8gYmFja2dyb3VuZE9wYWNpdHkgOiBcIjFcIn1cIiBmaWxsPVwibm9uZVwiIC8+XG4gICAgICAke1xuICAgICAgICBwcm9ncmVzcyA+IDAgJiYgcHJvZ3Jlc3MgPCAxXG4gICAgICAgICAgPyBgPHBhdGggZD1cIiR7ZGVzY3JpYmVBcmMoXG4gICAgICAgICAgICAgIDUwLFxuICAgICAgICAgICAgICA1MCxcbiAgICAgICAgICAgICAgcmFkaXVzLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICBwcm9ncmVzcyAqIDM2MCxcbiAgICAgICAgICAgICl9XCIgc3Ryb2tlPVwiJHtjb2xvcn1cIiBzdHJva2Utd2lkdGg9XCIke3N0cm9rZX1cIiBmaWxsPVwibm9uZVwiIC8+YFxuICAgICAgICAgIDogXCJcIlxuICAgICAgfVxuICAgIDwvc3ZnPlxuICBgLnJlcGxhY2VBbGwoXCJcXG5cIiwgXCJcIik7XG4gIHJldHVybiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2Zyl9YDtcbn1cbiIsICJleHBvcnQgeyBPQXV0aFNlcnZpY2UgfSBmcm9tIFwiLi9PQXV0aFNlcnZpY2VcIjtcbmV4cG9ydCB7IHdpdGhBY2Nlc3NUb2tlbiwgZ2V0QWNjZXNzVG9rZW4gfSBmcm9tIFwiLi93aXRoQWNjZXNzVG9rZW5cIjtcblxuZXhwb3J0IHR5cGUgeyBXaXRoQWNjZXNzVG9rZW5Db21wb25lbnRPckZuIH0gZnJvbSBcIi4vd2l0aEFjY2Vzc1Rva2VuXCI7XG5leHBvcnQgdHlwZSB7XG4gIE9uQXV0aG9yaXplUGFyYW1zLFxuICBPQXV0aFNlcnZpY2VPcHRpb25zLFxuICBQcm92aWRlcldpdGhEZWZhdWx0Q2xpZW50T3B0aW9ucyxcbiAgUHJvdmlkZXJPcHRpb25zLFxufSBmcm9tIFwiLi90eXBlc1wiO1xuIiwgImltcG9ydCB7IENvbG9yLCBPQXV0aCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IFBST1ZJREVSX0NMSUVOVF9JRFMgfSBmcm9tIFwiLi9wcm92aWRlcnNcIjtcbmltcG9ydCB0eXBlIHtcbiAgT0F1dGhTZXJ2aWNlT3B0aW9ucyxcbiAgT25BdXRob3JpemVQYXJhbXMsXG4gIFByb3ZpZGVyT3B0aW9ucyxcbiAgUHJvdmlkZXJXaXRoRGVmYXVsdENsaWVudE9wdGlvbnMsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICogQ2xhc3MgYWxsb3dpbmcgdG8gY3JlYXRlIGFuIE9BdXRoIHNlcnZpY2UgdXNpbmcgdGhlIHRoZSBQS0NFIChQcm9vZiBLZXkgZm9yIENvZGUgRXhjaGFuZ2UpIGZsb3cuXG4gKlxuICogVGhpcyBzZXJ2aWNlIGlzIGNhcGFibGUgb2Ygc3RhcnRpbmcgdGhlIGF1dGhvcml6YXRpb24gcHJvY2VzcywgZmV0Y2hpbmcgYW5kIHJlZnJlc2hpbmcgdG9rZW5zLFxuICogYXMgd2VsbCBhcyBtYW5hZ2luZyB0aGUgYXV0aGVudGljYXRpb24gc3RhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG9hdXRoQ2xpZW50ID0gbmV3IE9BdXRoLlBLQ0VDbGllbnQoeyAuLi4gfSk7XG4gKiBjb25zdCBvYXV0aFNlcnZpY2UgPSBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAqICAgY2xpZW50OiBvYXV0aENsaWVudCxcbiAqICAgY2xpZW50SWQ6ICd5b3VyLWNsaWVudC1pZCcsXG4gKiAgIHNjb3BlOiAncmVxdWlyZWQgc2NvcGVzJyxcbiAqICAgYXV0aG9yaXplVXJsOiAnaHR0cHM6Ly9wcm92aWRlci5jb20vb2F1dGgvYXV0aG9yaXplJyxcbiAqICAgdG9rZW5Vcmw6ICdodHRwczovL3Byb3ZpZGVyLmNvbS9vYXV0aC90b2tlbicsXG4gKiAgIHJlZnJlc2hUb2tlblVybDogJ2h0dHBzOi8vcHJvdmlkZXIuY29tL29hdXRoL3Rva2VuJyxcbiAqICAgZXh0cmFQYXJhbWV0ZXJzOiB7ICdhZGRpdGlvbmFsX3BhcmFtJzogJ3ZhbHVlJyB9XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgT0F1dGhTZXJ2aWNlIGltcGxlbWVudHMgT0F1dGhTZXJ2aWNlT3B0aW9ucyB7XG4gIHB1YmxpYyBjbGllbnRJZDogc3RyaW5nO1xuICBwdWJsaWMgc2NvcGU6IHN0cmluZztcbiAgcHVibGljIGNsaWVudDogT0F1dGguUEtDRUNsaWVudDtcbiAgcHVibGljIGV4dHJhUGFyYW1ldGVycz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHB1YmxpYyBhdXRob3JpemVVcmw6IHN0cmluZztcbiAgcHVibGljIHRva2VuVXJsOiBzdHJpbmc7XG4gIHB1YmxpYyByZWZyZXNoVG9rZW5Vcmw/OiBzdHJpbmc7XG4gIHB1YmxpYyBib2R5RW5jb2Rpbmc/OiBcImpzb25cIiB8IFwidXJsLWVuY29kZWRcIjtcbiAgcHVibGljIHBlcnNvbmFsQWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIG9uQXV0aG9yaXplPzogKHBhcmFtczogT25BdXRob3JpemVQYXJhbXMpID0+IHZvaWQ7XG4gIHRva2VuUmVzcG9uc2VQYXJzZXI6IChyZXNwb25zZTogdW5rbm93bikgPT4gT0F1dGguVG9rZW5SZXNwb25zZTtcbiAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IChyZXNwb25zZTogdW5rbm93bikgPT4gT0F1dGguVG9rZW5SZXNwb25zZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBPQXV0aFNlcnZpY2VPcHRpb25zKSB7XG4gICAgdGhpcy5jbGllbnRJZCA9IG9wdGlvbnMuY2xpZW50SWQ7XG4gICAgdGhpcy5zY29wZSA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5zY29wZSkgPyBvcHRpb25zLnNjb3BlLmpvaW4oXCIgXCIpIDogb3B0aW9ucy5zY29wZTtcbiAgICB0aGlzLnBlcnNvbmFsQWNjZXNzVG9rZW4gPSBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW47XG4gICAgdGhpcy5ib2R5RW5jb2RpbmcgPSBvcHRpb25zLmJvZHlFbmNvZGluZztcbiAgICB0aGlzLmNsaWVudCA9IG9wdGlvbnMuY2xpZW50O1xuICAgIHRoaXMuZXh0cmFQYXJhbWV0ZXJzID0gb3B0aW9ucy5leHRyYVBhcmFtZXRlcnM7XG4gICAgdGhpcy5hdXRob3JpemVVcmwgPSBvcHRpb25zLmF1dGhvcml6ZVVybDtcbiAgICB0aGlzLnRva2VuVXJsID0gb3B0aW9ucy50b2tlblVybDtcbiAgICB0aGlzLnJlZnJlc2hUb2tlblVybCA9IG9wdGlvbnMucmVmcmVzaFRva2VuVXJsO1xuICAgIHRoaXMub25BdXRob3JpemUgPSBvcHRpb25zLm9uQXV0aG9yaXplO1xuICAgIHRoaXMudG9rZW5SZXNwb25zZVBhcnNlciA9IG9wdGlvbnMudG9rZW5SZXNwb25zZVBhcnNlciA/PyAoKHgpID0+IHggYXMgT0F1dGguVG9rZW5SZXNwb25zZSk7XG4gICAgdGhpcy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlciA9IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIgPz8gKCh4KSA9PiB4IGFzIE9BdXRoLlRva2VuUmVzcG9uc2UpO1xuICAgIHRoaXMuYXV0aG9yaXplID0gdGhpcy5hdXRob3JpemUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc2FuYSBPQXV0aCBzZXJ2aWNlIHByb3ZpZGVkIG91dCBvZiB0aGUgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGFzYW5hID0gT0F1dGhTZXJ2aWNlLmFzYW5hKHsgc2NvcGU6ICdkZWZhdWx0JyB9KVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYXNhbmEob3B0aW9uczogUHJvdmlkZXJXaXRoRGVmYXVsdENsaWVudE9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IE9BdXRoU2VydmljZSh7XG4gICAgICBjbGllbnQ6IG5ldyBPQXV0aC5QS0NFQ2xpZW50KHtcbiAgICAgICAgcmVkaXJlY3RNZXRob2Q6IE9BdXRoLlJlZGlyZWN0TWV0aG9kLldlYixcbiAgICAgICAgcHJvdmlkZXJOYW1lOiBcIkFzYW5hXCIsXG4gICAgICAgIHByb3ZpZGVySWNvbjogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNTFcIiBoZWlnaHQ9XCIyMzJcIiBmaWxsPVwibm9uZVwiPjxwYXRoIGZpbGw9XCIjRjA2QTZBXCIgZD1cIk0xNzkuMzgzIDU0LjM3M2MwIDMwLjAxNy0yNC4zMzcgNTQuMzc0LTU0LjM1NCA1NC4zNzQtMzAuMDM1IDAtNTQuMzczLTI0LjMzOC01NC4zNzMtNTQuMzc0QzcwLjY1NiAyNC4zMzggOTQuOTkzIDAgMTI1LjAyOSAwYzMwLjAxNyAwIDU0LjM1NCAyNC4zMzggNTQuMzU0IDU0LjM3M1pNNTQuMzkzIDEyMi4zM0MyNC4zNzYgMTIyLjMzLjAyIDE0Ni42NjguMDIgMTc2LjY4NWMwIDMwLjAxNyAyNC4zMzcgNTQuMzczIDU0LjM3MyA1NC4zNzMgMzAuMDM1IDAgNTQuMzczLTI0LjMzOCA1NC4zNzMtNTQuMzczIDAtMzAuMDE3LTI0LjMzOC01NC4zNTUtNTQuMzczLTU0LjM1NVptMTQxLjI1MyAwYy0zMC4wMzUgMC01NC4zNzMgMjQuMzM4LTU0LjM3MyA1NC4zNzQgMCAzMC4wMzUgMjQuMzM4IDU0LjM3MyA1NC4zNzMgNTQuMzczIDMwLjAxNyAwIDU0LjM3NC0yNC4zMzggNTQuMzc0LTU0LjM3MyAwLTMwLjAzNi0yNC4zMzgtNTQuMzc0LTU0LjM3NC01NC4zNzRaXCIvPjwvc3ZnPmAsXG4gICAgICAgICl9YCxcbiAgICAgICAgcHJvdmlkZXJJZDogXCJhc2FuYVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDb25uZWN0IHlvdXIgQXNhbmEgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCA/PyBQUk9WSURFUl9DTElFTlRfSURTLmFzYW5hLFxuICAgICAgYXV0aG9yaXplVXJsOiBvcHRpb25zLmF1dGhvcml6ZVVybCA/PyBcImh0dHBzOi8vYXNhbmEub2F1dGgucmF5Y2FzdC5jb20vYXV0aG9yaXplXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vYXNhbmEub2F1dGgucmF5Y2FzdC5jb20vdG9rZW5cIixcbiAgICAgIHJlZnJlc2hUb2tlblVybDogb3B0aW9ucy5yZWZyZXNoVG9rZW5VcmwgPz8gXCJodHRwczovL2FzYW5hLm9hdXRoLnJheWNhc3QuY29tL3JlZnJlc2gtdG9rZW5cIixcbiAgICAgIHNjb3BlOiBvcHRpb25zLnNjb3BlLFxuICAgICAgcGVyc29uYWxBY2Nlc3NUb2tlbjogb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuLFxuICAgICAgb25BdXRob3JpemU6IG9wdGlvbnMub25BdXRob3JpemUsXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMuYm9keUVuY29kaW5nLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICB0b2tlblJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVzcG9uc2VQYXJzZXIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2l0SHViIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgZ2l0aHViID0gT0F1dGhTZXJ2aWNlLmdpdGh1Yih7IHNjb3BlOiAncmVwbyB1c2VyJyB9KVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2l0aHViKG9wdGlvbnM6IFByb3ZpZGVyV2l0aERlZmF1bHRDbGllbnRPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5XZWIsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJHaXRIdWJcIixcbiAgICAgICAgcHJvdmlkZXJJY29uOiB7XG4gICAgICAgICAgc291cmNlOiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNjRcIiBoZWlnaHQ9XCI2NFwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIj48cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk04IDBDMy41OCAwIDAgMy41OCAwIDhjMCAzLjU0IDIuMjkgNi41MyA1LjQ3IDcuNTkuNC4wNy41NS0uMTcuNTUtLjM4IDAtLjE5LS4wMS0uODItLjAxLTEuNDktMi4wMS4zNy0yLjUzLS40OS0yLjY5LS45NC0uMDktLjIzLS40OC0uOTQtLjgyLTEuMTMtLjI4LS4xNS0uNjgtLjUyLS4wMS0uNTMuNjMtLjAxIDEuMDguNTggMS4yMy44Mi43MiAxLjIxIDEuODcuODcgMi4zMy42Ni4wNy0uNTIuMjgtLjg3LjUxLTEuMDctMS43OC0uMi0zLjY0LS44OS0zLjY0LTMuOTUgMC0uODcuMzEtMS41OS44Mi0yLjE1LS4wOC0uMi0uMzYtMS4wMi4wOC0yLjEyIDAgMCAuNjctLjIxIDIuMi44Mi42NC0uMTggMS4zMi0uMjcgMi0uMjcuNjggMCAxLjM2LjA5IDIgLjI3IDEuNTMtMS4wNCAyLjItLjgyIDIuMi0uODIuNDQgMS4xLjE2IDEuOTIuMDggMi4xMi41MS41Ni44MiAxLjI3LjgyIDIuMTUgMCAzLjA3LTEuODcgMy43NS0zLjY1IDMuOTUuMjkuMjUuNTQuNzMuNTQgMS40OCAwIDEuMDctLjAxIDEuOTMtLjAxIDIuMiAwIC4yMS4xNS40Ni41NS4zOEE4LjAxMyA4LjAxMyAwIDAgMCAxNiA4YzAtNC40Mi0zLjU4LTgtOC04elwiLz48L3N2Zz5gLFxuICAgICAgICAgICl9YCxcblxuICAgICAgICAgIHRpbnRDb2xvcjogQ29sb3IuUHJpbWFyeVRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIHByb3ZpZGVySWQ6IFwiZ2l0aHViXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbm5lY3QgeW91ciBHaXRIdWIgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCA/PyBQUk9WSURFUl9DTElFTlRfSURTLmdpdGh1YixcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL2dpdGh1Yi5vYXV0aC5yYXljYXN0LmNvbS9hdXRob3JpemVcIixcbiAgICAgIHRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsID8/IFwiaHR0cHM6Ly9naXRodWIub2F1dGgucmF5Y2FzdC5jb20vdG9rZW5cIixcbiAgICAgIHJlZnJlc2hUb2tlblVybDogb3B0aW9ucy5yZWZyZXNoVG9rZW5VcmwgPz8gXCJodHRwczovL2dpdGh1Yi5vYXV0aC5yYXljYXN0LmNvbS9yZWZyZXNoLXRva2VuXCIsXG4gICAgICBzY29wZTogb3B0aW9ucy5zY29wZSxcbiAgICAgIHBlcnNvbmFsQWNjZXNzVG9rZW46IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbixcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgYm9keUVuY29kaW5nOiBvcHRpb25zLmJvZHlFbmNvZGluZyxcbiAgICAgIHRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyLFxuICAgICAgdG9rZW5SZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdvb2dsZSBPQXV0aCBzZXJ2aWNlIHByb3ZpZGVkIG91dCBvZiB0aGUgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGdvb2dsZSA9IE9BdXRoU2VydmljZS5nb29nbGUoe1xuICAgKiAgIGNsaWVudElkOiAnY3VzdG9tLWNsaWVudC1pZCcsXG4gICAqICAgYXV0aG9yaXplVXJsOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3YyL2F1dGgnLFxuICAgKiAgIHRva2VuVXJsOiAnaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4nLFxuICAgKiAgIHNjb3BlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZS5yZWFkb25seScsXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ29vZ2xlKG9wdGlvbnM6IFByb3ZpZGVyT3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAgICAgIGNsaWVudDogbmV3IE9BdXRoLlBLQ0VDbGllbnQoe1xuICAgICAgICByZWRpcmVjdE1ldGhvZDogT0F1dGguUmVkaXJlY3RNZXRob2QuQXBwVVJJLFxuICAgICAgICBwcm92aWRlck5hbWU6IFwiR29vZ2xlXCIsXG4gICAgICAgIHByb3ZpZGVySWNvbjogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgc3R5bGU9XCJkaXNwbGF5OmJsb2NrXCIgdmlld0JveD1cIjAgMCA0OCA0OFwiPjxwYXRoIGZpbGw9XCIjRUE0MzM1XCIgZD1cIk0yNCA5LjVjMy41NCAwIDYuNzEgMS4yMiA5LjIxIDMuNmw2Ljg1LTYuODVDMzUuOSAyLjM4IDMwLjQ3IDAgMjQgMCAxNC42MiAwIDYuNTEgNS4zOCAyLjU2IDEzLjIybDcuOTggNi4xOUMxMi40MyAxMy43MiAxNy43NCA5LjUgMjQgOS41elwiLz48cGF0aCBmaWxsPVwiIzQyODVGNFwiIGQ9XCJNNDYuOTggMjQuNTVjMC0xLjU3LS4xNS0zLjA5LS4zOC00LjU1SDI0djkuMDJoMTIuOTRjLS41OCAyLjk2LTIuMjYgNS40OC00Ljc4IDcuMThsNy43MyA2YzQuNTEtNC4xOCA3LjA5LTEwLjM2IDcuMDktMTcuNjV6XCIvPjxwYXRoIGZpbGw9XCIjRkJCQzA1XCIgZD1cIk0xMC41MyAyOC41OWMtLjQ4LTEuNDUtLjc2LTIuOTktLjc2LTQuNTlzLjI3LTMuMTQuNzYtNC41OWwtNy45OC02LjE5Qy45MiAxNi40NiAwIDIwLjEyIDAgMjRjMCAzLjg4LjkyIDcuNTQgMi41NiAxMC43OGw3Ljk3LTYuMTl6XCIvPjxwYXRoIGZpbGw9XCIjMzRBODUzXCIgZD1cIk0yNCA0OGM2LjQ4IDAgMTEuOTMtMi4xMyAxNS44OS01LjgxbC03LjczLTZjLTIuMTUgMS40NS00LjkyIDIuMy04LjE2IDIuMy02LjI2IDAtMTEuNTctNC4yMi0xMy40Ny05LjkxbC03Ljk4IDYuMTlDNi41MSA0Mi42MiAxNC42MiA0OCAyNCA0OHpcIi8+PHBhdGggZmlsbD1cIm5vbmVcIiBkPVwiTTAgMGg0OHY0OEgwelwiLz48L3N2Zz5gLFxuICAgICAgICApfWAsXG4gICAgICAgIHByb3ZpZGVySWQ6IFwiZ29vZ2xlXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbm5lY3QgeW91ciBHb29nbGUgYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvdjIvYXV0aFwiLFxuICAgICAgdG9rZW5Vcmw6IG9wdGlvbnMudG9rZW5VcmwgPz8gXCJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlblwiLFxuICAgICAgcmVmcmVzaFRva2VuVXJsOiBvcHRpb25zLnRva2VuVXJsLFxuICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBwZXJzb25hbEFjY2Vzc1Rva2VuOiBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4sXG4gICAgICBib2R5RW5jb2Rpbmc6IG9wdGlvbnMuYm9keUVuY29kaW5nID8/IFwidXJsLWVuY29kZWRcIixcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgdG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZWZyZXNoUmVzcG9uc2VQYXJzZXIsXG4gICAgICB0b2tlblJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVzcG9uc2VQYXJzZXIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSmlyYSBPQXV0aCBzZXJ2aWNlIHByb3ZpZGVkIG91dCBvZiB0aGUgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGppcmEgPSBPQXV0aFNlcnZpY2UuamlyYSh7XG4gICAqICAgY2xpZW50SWQ6ICdjdXN0b20tY2xpZW50LWlkJyxcbiAgICogICBhdXRob3JpemVVcmw6ICdodHRwczovL2F1dGguYXRsYXNzaWFuLmNvbS9hdXRob3JpemUnLFxuICAgKiAgIHRva2VuVXJsOiAnaHR0cHM6Ly9hcGkuYXRsYXNzaWFuLmNvbS9vYXV0aC90b2tlbicsXG4gICAqICAgc2NvcGU6ICdyZWFkOmppcmEtdXNlciByZWFkOmppcmEtd29yayBvZmZsaW5lX2FjY2VzcydcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBqaXJhKG9wdGlvbnM6IFByb3ZpZGVyT3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAgICAgIGNsaWVudDogbmV3IE9BdXRoLlBLQ0VDbGllbnQoe1xuICAgICAgICByZWRpcmVjdE1ldGhvZDogT0F1dGguUmVkaXJlY3RNZXRob2QuV2ViLFxuICAgICAgICBwcm92aWRlck5hbWU6IFwiSmlyYVwiLFxuICAgICAgICBwcm92aWRlckljb246IGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHdpZHRoPVwiMjM2MVwiIGhlaWdodD1cIjI1MDBcIiB2aWV3Qm94PVwiMi41OSAwIDIxNC4wOTEgMjI0XCI+PGxpbmVhckdyYWRpZW50IGlkPVwiYVwiIHgxPVwiMTAyLjRcIiB4Mj1cIjU2LjE1XCIgeTE9XCIyMTguNjNcIiB5Mj1cIjE3Mi4zOVwiIGdyYWRpZW50VHJhbnNmb3JtPVwibWF0cml4KDEgMCAwIC0xIDAgMjY0KVwiIGdyYWRpZW50VW5pdHM9XCJ1c2VyU3BhY2VPblVzZVwiPjxzdG9wIG9mZnNldD1cIi4xOFwiIHN0b3AtY29sb3I9XCIjMDA1MmNjXCIvPjxzdG9wIG9mZnNldD1cIjFcIiBzdG9wLWNvbG9yPVwiIzI2ODRmZlwiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4bGluazpocmVmPVwiI2FcIiBpZD1cImJcIiB4MT1cIjExNC42NVwiIHgyPVwiMTYwLjgxXCIgeTE9XCI4NS43N1wiIHkyPVwiMTMxLjkyXCIvPjxwYXRoIGZpbGw9XCIjMjY4NGZmXCIgZD1cIk0yMTQuMDYgMTA1LjczIDExNy42NyA5LjM0IDEwOC4zMyAwIDM1Ljc3IDcyLjU2IDIuNTkgMTA1LjczYTguODkgOC44OSAwIDAgMCAwIDEyLjU0bDY2LjI5IDY2LjI5TDEwOC4zMyAyMjRsNzIuNTUtNzIuNTYgMS4xMy0xLjEyIDMyLjA1LTMyYTguODcgOC44NyAwIDAgMCAwLTEyLjU5em0tMTA1LjczIDM5LjM5TDc1LjIxIDExMmwzMy4xMi0zMy4xMkwxNDEuNDQgMTEyelwiLz48cGF0aCBmaWxsPVwidXJsKCNhKVwiIGQ9XCJNMTA4LjMzIDc4Ljg4YTU1Ljc1IDU1Ljc1IDAgMCAxLS4yNC03OC42MUwzNS42MiA3Mi43MWwzOS40NCAzOS40NHpcIi8+PHBhdGggZmlsbD1cInVybCgjYilcIiBkPVwibTE0MS41MyAxMTEuOTEtMzMuMiAzMy4yMWE1NS43NyA1NS43NyAwIDAgMSAwIDc4Ljg2TDE4MSAxNTEuMzV6XCIvPjwvc3ZnPmAsXG4gICAgICAgICl9YCxcbiAgICAgICAgcHJvdmlkZXJJZDogXCJqaXJhXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbm5lY3QgeW91ciBKaXJhIGFjY291bnRcIixcbiAgICAgIH0pLFxuICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICBhdXRob3JpemVVcmw6IG9wdGlvbnMuYXV0aG9yaXplVXJsID8/IFwiaHR0cHM6Ly9hdXRoLmF0bGFzc2lhbi5jb20vYXV0aG9yaXplXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL29hdXRoL3Rva2VuXCIsXG4gICAgICByZWZyZXNoVG9rZW5Vcmw6IG9wdGlvbnMucmVmcmVzaFRva2VuVXJsLFxuICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBwZXJzb25hbEFjY2Vzc1Rva2VuOiBvcHRpb25zLnBlcnNvbmFsQWNjZXNzVG9rZW4sXG4gICAgICBvbkF1dGhvcml6ZTogb3B0aW9ucy5vbkF1dGhvcml6ZSxcbiAgICAgIGJvZHlFbmNvZGluZzogb3B0aW9ucy5ib2R5RW5jb2RpbmcsXG4gICAgICB0b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcixcbiAgICAgIHRva2VuUmVzcG9uc2VQYXJzZXI6IG9wdGlvbnMudG9rZW5SZXNwb25zZVBhcnNlcixcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5lYXIgT0F1dGggc2VydmljZSBwcm92aWRlZCBvdXQgb2YgdGhlIGJveC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCBsaW5lYXIgPSBPQXV0aFNlcnZpY2UubGluZWFyKHsgc2NvcGU6ICdyZWFkIHdyaXRlJyB9KVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbGluZWFyKG9wdGlvbnM6IFByb3ZpZGVyV2l0aERlZmF1bHRDbGllbnRPcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPQXV0aFNlcnZpY2Uoe1xuICAgICAgY2xpZW50OiBuZXcgT0F1dGguUEtDRUNsaWVudCh7XG4gICAgICAgIHJlZGlyZWN0TWV0aG9kOiBPQXV0aC5SZWRpcmVjdE1ldGhvZC5XZWIsXG4gICAgICAgIHByb3ZpZGVyTmFtZTogXCJMaW5lYXJcIixcbiAgICAgICAgcHJvdmlkZXJJY29uOiB7XG4gICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICBsaWdodDogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCIjMjIyMzI2XCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIj48cGF0aCBkPVwiTTEuMjI1NDEgNjEuNTIyOGMtLjIyMjUtLjk0ODUuOTA3NDgtMS41NDU5IDEuNTk2MzgtLjg1N0wzOS4zMzQyIDk3LjE3ODJjLjY4ODkuNjg4OS4wOTE1IDEuODE4OS0uODU3IDEuNTk2NEMyMC4wNTE1IDk0LjQ1MjIgNS41NDc3OSA3OS45NDg1IDEuMjI1NDEgNjEuNTIyOFpNLjAwMTg5MTM1IDQ2Ljg4OTFjLS4wMTc2NDM3NS4yODMzLjA4ODg3MjE1LjU1OTkuMjg5NTcxNjUuNzYwNkw1Mi4zNTAzIDk5LjcwODVjLjIwMDcuMjAwNy40NzczLjMwNzUuNzYwNi4yODk2IDIuMzY5Mi0uMTQ3NiA0LjY5MzgtLjQ2IDYuOTYyNC0uOTI1OS43NjQ1LS4xNTcgMS4wMzAxLTEuMDk2My40NzgyLTEuNjQ4MUwyLjU3NTk1IDM5LjQ0ODVjLS41NTE4Ni0uNTUxOS0xLjQ5MTE3LS4yODYzLTEuNjQ4MTc0LjQ3ODItLjQ2NTkxNSAyLjI2ODYtLjc3ODMyIDQuNTkzMi0uOTI1ODg0NjUgNi45NjI0Wk00LjIxMDkzIDI5LjcwNTRjLS4xNjY0OS4zNzM4LS4wODE2OS44MTA2LjIwNzY1IDEuMWw2NC43NzYwMiA2NC43NzZjLjI4OTQuMjg5NC43MjYyLjM3NDIgMS4xLjIwNzcgMS43ODYxLS43OTU2IDMuNTE3MS0xLjY5MjcgNS4xODU1LTIuNjg0LjU1MjEtLjMyOC42MzczLTEuMDg2Ny4xODMyLTEuNTQwN0w4LjQzNTY2IDI0LjMzNjdjLS40NTQwOS0uNDU0MS0xLjIxMjcxLS4zNjg5LTEuNTQwNzQuMTgzMi0uOTkxMzIgMS42Njg0LTEuODg4NDMgMy4zOTk0LTIuNjgzOTkgNS4xODU1Wk0xMi42NTg3IDE4LjA3NGMtLjM3MDEtLjM3MDEtLjM5My0uOTYzNy0uMDQ0My0xLjM1NDFDMjEuNzc5NSA2LjQ1OTMxIDM1LjExMTQgMCA0OS45NTE5IDAgNzcuNTkyNyAwIDEwMCAyMi40MDczIDEwMCA1MC4wNDgxYzAgMTQuODQwNS02LjQ1OTMgMjguMTcyNC0xNi43MTk5IDM3LjMzNzUtLjM5MDMuMzQ4Ny0uOTg0LjMyNTgtMS4zNTQyLS4wNDQzTDEyLjY1ODcgMTguMDc0WlwiLz48L3N2Zz5gLFxuICAgICAgICAgICAgKX1gLFxuICAgICAgICAgICAgZGFyazogYGRhdGE6aW1hZ2Uvc3ZnK3htbCwke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCIjZmZmXCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIj48cGF0aCBkPVwiTTEuMjI1NDEgNjEuNTIyOGMtLjIyMjUtLjk0ODUuOTA3NDgtMS41NDU5IDEuNTk2MzgtLjg1N0wzOS4zMzQyIDk3LjE3ODJjLjY4ODkuNjg4OS4wOTE1IDEuODE4OS0uODU3IDEuNTk2NEMyMC4wNTE1IDk0LjQ1MjIgNS41NDc3OSA3OS45NDg1IDEuMjI1NDEgNjEuNTIyOFpNLjAwMTg5MTM1IDQ2Ljg4OTFjLS4wMTc2NDM3NS4yODMzLjA4ODg3MjE1LjU1OTkuMjg5NTcxNjUuNzYwNkw1Mi4zNTAzIDk5LjcwODVjLjIwMDcuMjAwNy40NzczLjMwNzUuNzYwNi4yODk2IDIuMzY5Mi0uMTQ3NiA0LjY5MzgtLjQ2IDYuOTYyNC0uOTI1OS43NjQ1LS4xNTcgMS4wMzAxLTEuMDk2My40NzgyLTEuNjQ4MUwyLjU3NTk1IDM5LjQ0ODVjLS41NTE4Ni0uNTUxOS0xLjQ5MTE3LS4yODYzLTEuNjQ4MTc0LjQ3ODItLjQ2NTkxNSAyLjI2ODYtLjc3ODMyIDQuNTkzMi0uOTI1ODg0NjUgNi45NjI0Wk00LjIxMDkzIDI5LjcwNTRjLS4xNjY0OS4zNzM4LS4wODE2OS44MTA2LjIwNzY1IDEuMWw2NC43NzYwMiA2NC43NzZjLjI4OTQuMjg5NC43MjYyLjM3NDIgMS4xLjIwNzcgMS43ODYxLS43OTU2IDMuNTE3MS0xLjY5MjcgNS4xODU1LTIuNjg0LjU1MjEtLjMyOC42MzczLTEuMDg2Ny4xODMyLTEuNTQwN0w4LjQzNTY2IDI0LjMzNjdjLS40NTQwOS0uNDU0MS0xLjIxMjcxLS4zNjg5LTEuNTQwNzQuMTgzMi0uOTkxMzIgMS42Njg0LTEuODg4NDMgMy4zOTk0LTIuNjgzOTkgNS4xODU1Wk0xMi42NTg3IDE4LjA3NGMtLjM3MDEtLjM3MDEtLjM5My0uOTYzNy0uMDQ0My0xLjM1NDFDMjEuNzc5NSA2LjQ1OTMxIDM1LjExMTQgMCA0OS45NTE5IDAgNzcuNTkyNyAwIDEwMCAyMi40MDczIDEwMCA1MC4wNDgxYzAgMTQuODQwNS02LjQ1OTMgMjguMTcyNC0xNi43MTk5IDM3LjMzNzUtLjM5MDMuMzQ4Ny0uOTg0LjMyNTgtMS4zNTQyLS4wNDQzTDEyLjY1ODcgMTguMDc0WlwiIC8+PC9zdmc+YCxcbiAgICAgICAgICAgICl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwcm92aWRlcklkOiBcImxpbmVhclwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDb25uZWN0IHlvdXIgTGluZWFyIGFjY291bnRcIixcbiAgICAgIH0pLFxuICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQgPz8gUFJPVklERVJfQ0xJRU5UX0lEUy5saW5lYXIsXG4gICAgICBhdXRob3JpemVVcmw6IG9wdGlvbnMuYXV0aG9yaXplVXJsID8/IFwiaHR0cHM6Ly9saW5lYXIub2F1dGgucmF5Y2FzdC5jb20vYXV0aG9yaXplXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vbGluZWFyLm9hdXRoLnJheWNhc3QuY29tL3Rva2VuXCIsXG4gICAgICByZWZyZXNoVG9rZW5Vcmw6IG9wdGlvbnMucmVmcmVzaFRva2VuVXJsID8/IFwiaHR0cHM6Ly9saW5lYXIub2F1dGgucmF5Y2FzdC5jb20vcmVmcmVzaC10b2tlblwiLFxuICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBleHRyYVBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWN0b3I6IFwidXNlclwiLFxuICAgICAgfSxcbiAgICAgIG9uQXV0aG9yaXplOiBvcHRpb25zLm9uQXV0aG9yaXplLFxuICAgICAgYm9keUVuY29kaW5nOiBvcHRpb25zLmJvZHlFbmNvZGluZyxcbiAgICAgIHRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyLFxuICAgICAgdG9rZW5SZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNsYWNrIE9BdXRoIHNlcnZpY2UgcHJvdmlkZWQgb3V0IG9mIHRoZSBib3guXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3Qgc2xhY2sgPSBPQXV0aFNlcnZpY2Uuc2xhY2soeyBzY29wZTogJ2Vtb2ppOnJlYWQnIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzbGFjayhvcHRpb25zOiBQcm92aWRlcldpdGhEZWZhdWx0Q2xpZW50T3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAgICAgIGNsaWVudDogbmV3IE9BdXRoLlBLQ0VDbGllbnQoe1xuICAgICAgICByZWRpcmVjdE1ldGhvZDogT0F1dGguUmVkaXJlY3RNZXRob2QuV2ViLFxuICAgICAgICBwcm92aWRlck5hbWU6IFwiU2xhY2tcIixcbiAgICAgICAgcHJvdmlkZXJJY29uOiBgZGF0YTppbWFnZS9zdmcreG1sLCR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiNzMgNzMgMTI0IDEyNFwiPjxzdHlsZT4uc3Qwe2ZpbGw6I2UwMWU1YX0uc3Qxe2ZpbGw6IzM2YzVmMH0uc3Qye2ZpbGw6IzJlYjY3ZH0uc3Qze2ZpbGw6I2VjYjIyZX08L3N0eWxlPjxwYXRoIGQ9XCJNOTkuNCAxNTEuMmMwIDcuMS01LjggMTIuOS0xMi45IDEyLjktNy4xIDAtMTIuOS01LjgtMTIuOS0xMi45IDAtNy4xIDUuOC0xMi45IDEyLjktMTIuOWgxMi45djEyLjl6TTEwNS45IDE1MS4yYzAtNy4xIDUuOC0xMi45IDEyLjktMTIuOXMxMi45IDUuOCAxMi45IDEyLjl2MzIuM2MwIDcuMS01LjggMTIuOS0xMi45IDEyLjlzLTEyLjktNS44LTEyLjktMTIuOXYtMzIuM3pcIiBjbGFzcz1cInN0MFwiLz48cGF0aCBkPVwiTTExOC44IDk5LjRjLTcuMSAwLTEyLjktNS44LTEyLjktMTIuOSAwLTcuMSA1LjgtMTIuOSAxMi45LTEyLjlzMTIuOSA1LjggMTIuOSAxMi45djEyLjloLTEyLjl6TTExOC44IDEwNS45YzcuMSAwIDEyLjkgNS44IDEyLjkgMTIuOXMtNS44IDEyLjktMTIuOSAxMi45SDg2LjVjLTcuMSAwLTEyLjktNS44LTEyLjktMTIuOXM1LjgtMTIuOSAxMi45LTEyLjloMzIuM3pcIiBjbGFzcz1cInN0MVwiLz48cGF0aCBkPVwiTTE3MC42IDExOC44YzAtNy4xIDUuOC0xMi45IDEyLjktMTIuOSA3LjEgMCAxMi45IDUuOCAxMi45IDEyLjlzLTUuOCAxMi45LTEyLjkgMTIuOWgtMTIuOXYtMTIuOXpNMTY0LjEgMTE4LjhjMCA3LjEtNS44IDEyLjktMTIuOSAxMi45LTcuMSAwLTEyLjktNS44LTEyLjktMTIuOVY4Ni41YzAtNy4xIDUuOC0xMi45IDEyLjktMTIuOSA3LjEgMCAxMi45IDUuOCAxMi45IDEyLjl2MzIuM3pcIiBjbGFzcz1cInN0MlwiLz48cGF0aCBkPVwiTTE1MS4yIDE3MC42YzcuMSAwIDEyLjkgNS44IDEyLjkgMTIuOSAwIDcuMS01LjggMTIuOS0xMi45IDEyLjktNy4xIDAtMTIuOS01LjgtMTIuOS0xMi45di0xMi45aDEyLjl6TTE1MS4yIDE2NC4xYy03LjEgMC0xMi45LTUuOC0xMi45LTEyLjkgMC03LjEgNS44LTEyLjkgMTIuOS0xMi45aDMyLjNjNy4xIDAgMTIuOSA1LjggMTIuOSAxMi45IDAgNy4xLTUuOCAxMi45LTEyLjkgMTIuOWgtMzIuM3pcIiBjbGFzcz1cInN0M1wiLz48L3N2Zz5gLFxuICAgICAgICApfWAsXG4gICAgICAgIHByb3ZpZGVySWQ6IFwic2xhY2tcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29ubmVjdCB5b3VyIFNsYWNrIGFjY291bnRcIixcbiAgICAgIH0pLFxuICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQgPz8gUFJPVklERVJfQ0xJRU5UX0lEUy5zbGFjayxcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL3NsYWNrLm9hdXRoLnJheWNhc3QuY29tL2F1dGhvcml6ZVwiLFxuICAgICAgdG9rZW5Vcmw6IG9wdGlvbnMudG9rZW5VcmwgPz8gXCJodHRwczovL3NsYWNrLm9hdXRoLnJheWNhc3QuY29tL3Rva2VuXCIsXG4gICAgICByZWZyZXNoVG9rZW5Vcmw6IG9wdGlvbnMudG9rZW5VcmwgPz8gXCJodHRwczovL3NsYWNrLm9hdXRoLnJheWNhc3QuY29tL3JlZnJlc2gtdG9rZW5cIixcbiAgICAgIHNjb3BlOiBcIlwiLFxuICAgICAgZXh0cmFQYXJhbWV0ZXJzOiB7XG4gICAgICAgIHVzZXJfc2NvcGU6IG9wdGlvbnMuc2NvcGUsXG4gICAgICB9LFxuICAgICAgcGVyc29uYWxBY2Nlc3NUb2tlbjogb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuLFxuICAgICAgYm9keUVuY29kaW5nOiBvcHRpb25zLnRva2VuVXJsID8gb3B0aW9ucy5ib2R5RW5jb2RpbmcgPz8gXCJ1cmwtZW5jb2RlZFwiIDogXCJqc29uXCIsXG4gICAgICBvbkF1dGhvcml6ZTogb3B0aW9ucy5vbkF1dGhvcml6ZSxcbiAgICAgIHRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgIHRva2VuUmVzcG9uc2VQYXJzZXI6XG4gICAgICAgIG9wdGlvbnMudG9rZW5SZXNwb25zZVBhcnNlciA/P1xuICAgICAgICAoKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiByZXNwb25zZS5hdXRoZWRfdXNlci5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICBzY29wZTogcmVzcG9uc2UuYXV0aGVkX3VzZXIuc2NvcGUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogWm9vbSBPQXV0aCBzZXJ2aWNlIHByb3ZpZGVkIG91dCBvZiB0aGUgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IHpvb20gPSBPQXV0aFNlcnZpY2Uuem9vbSh7XG4gICAqICAgY2xpZW50SWQ6ICdjdXN0b20tY2xpZW50LWlkJyxcbiAgICogICBhdXRob3JpemVVcmw6ICdodHRwczovL3pvb20udXMvb2F1dGgvYXV0aG9yaXplJyxcbiAgICogICB0b2tlblVybDogJ2h0dHBzOi8vem9vbS51cy9vYXV0aC90b2tlbicsXG4gICAqICAgc2NvcGU6ICdtZWV0aW5nOndyaXRlJyxcbiAgICogICBwZXJzb25hbEFjY2Vzc1Rva2VuOiAncGVyc29uYWwtYWNjZXNzLXRva2VuJyxcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB6b29tKG9wdGlvbnM6IFByb3ZpZGVyT3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT0F1dGhTZXJ2aWNlKHtcbiAgICAgIGNsaWVudDogbmV3IE9BdXRoLlBLQ0VDbGllbnQoe1xuICAgICAgICByZWRpcmVjdE1ldGhvZDogT0F1dGguUmVkaXJlY3RNZXRob2QuV2ViLFxuICAgICAgICBwcm92aWRlck5hbWU6IFwiWm9vbVwiLFxuICAgICAgICBwcm92aWRlckljb246IGBkYXRhOmltYWdlL3N2Zyt4bWwsJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMzUxLjg0NSA4MFwiPjxwYXRoIGQ9XCJNNzMuNzg2IDc4LjgzNUgxMC44OEExMC44NDIgMTAuODQyIDAgMCAxIC44MzMgNzIuMTIyYTEwLjg0MSAxMC44NDEgMCAwIDEgMi4zNTctMTEuODVMNDYuNzY0IDE2LjdoLTMxLjIzQzYuOTU0IDE2LjY5OSAwIDkuNzQ0IDAgMS4xNjVoNTguMDE0YzQuNDE0IDAgOC4zNTcgMi42MzQgMTAuMDQ2IDYuNzEyYTEwLjg0MyAxMC44NDMgMCAwIDEtMi4zNTYgMTEuODVMMjIuMTMgNjMuMzAyaDM2LjEyMmM4LjU4IDAgMTUuNTM0IDYuOTU1IDE1LjUzNCAxNS41MzRabTI3OC4wNTktNDguNTQ0QzM1MS44NDUgMTMuNTg4IDMzOC4yNTYgMCAzMjEuNTUzIDBjLTguOTM0IDAtMTYuOTc1IDMuODktMjIuNTI0IDEwLjA2M0MyOTMuNDggMy44OSAyODUuNDQgMCAyNzYuNTA1IDBjLTE2LjcwMyAwLTMwLjI5MSAxMy41ODgtMzAuMjkxIDMwLjI5MXY0OC41NDRjOC41NzkgMCAxNS41MzQtNi45NTUgMTUuNTM0LTE1LjUzNHYtMzMuMDFjMC04LjEzNyA2LjYyLTE0Ljc1NyAxNC43NTctMTQuNzU3czE0Ljc1NyA2LjYyIDE0Ljc1NyAxNC43NTd2MzMuMDFjMCA4LjU4IDYuOTU1IDE1LjUzNCAxNS41MzQgMTUuNTM0VjMwLjI5MWMwLTguMTM3IDYuNjItMTQuNzU3IDE0Ljc1Ny0xNC43NTdzMTQuNzU4IDYuNjIgMTQuNzU4IDE0Ljc1N3YzMy4wMWMwIDguNTggNi45NTQgMTUuNTM0IDE1LjUzNCAxNS41MzRWMzAuMjkxWk0yMzguNDQ3IDQwYzAgMjIuMDkxLTE3LjkwOSA0MC00MCA0MHMtNDAtMTcuOTA5LTQwLTQwIDE3LjkwOC00MCA0MC00MCA0MCAxNy45MDkgNDAgNDBabS0xNS41MzQgMGMwLTEzLjUxMi0xMC45NTQtMjQuNDY2LTI0LjQ2Ni0yNC40NjZTMTczLjk4IDI2LjQ4OCAxNzMuOTggNDBzMTAuOTUzIDI0LjQ2NiAyNC40NjYgMjQuNDY2UzIyMi45MTMgNTMuNTEyIDIyMi45MTMgNDBabS03MC42OCAwYzAgMjIuMDkxLTE3LjkwOSA0MC00MCA0MHMtNDAtMTcuOTA5LTQwLTQwIDE3LjkwOS00MCA0MC00MCA0MCAxNy45MDkgNDAgNDBabS0xNS41MzQgMGMwLTEzLjUxMi0xMC45NTQtMjQuNDY2LTI0LjQ2Ni0yNC40NjZTODcuNzY3IDI2LjQ4OCA4Ny43NjcgNDBzMTAuOTU0IDI0LjQ2NiAyNC40NjYgMjQuNDY2UzEzNi42OTkgNTMuNTEyIDEzNi42OTkgNDBaXCIgc3R5bGU9XCJmaWxsOiMwYjVjZmZcIi8+PC9zdmc+YCxcbiAgICAgICAgKX1gLFxuICAgICAgICBwcm92aWRlcklkOiBcInpvb21cIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29ubmVjdCB5b3VyIFpvb20gYWNjb3VudFwiLFxuICAgICAgfSksXG4gICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgIGF1dGhvcml6ZVVybDogb3B0aW9ucy5hdXRob3JpemVVcmwgPz8gXCJodHRwczovL3pvb20udXMvb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICB0b2tlblVybDogb3B0aW9ucy50b2tlblVybCA/PyBcImh0dHBzOi8vem9vbS51cy9vYXV0aC90b2tlblwiLFxuICAgICAgcmVmcmVzaFRva2VuVXJsOiBvcHRpb25zLnJlZnJlc2hUb2tlblVybCxcbiAgICAgIHNjb3BlOiBvcHRpb25zLnNjb3BlLFxuICAgICAgcGVyc29uYWxBY2Nlc3NUb2tlbjogb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuLFxuICAgICAgYm9keUVuY29kaW5nOiBvcHRpb25zLmJvZHlFbmNvZGluZyA/PyBcInVybC1lbmNvZGVkXCIsXG4gICAgICBvbkF1dGhvcml6ZTogb3B0aW9ucy5vbkF1dGhvcml6ZSxcbiAgICAgIHRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyOiBvcHRpb25zLnRva2VuUmVmcmVzaFJlc3BvbnNlUGFyc2VyLFxuICAgICAgdG9rZW5SZXNwb25zZVBhcnNlcjogb3B0aW9ucy50b2tlblJlc3BvbnNlUGFyc2VyLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyB0aGUgT0F1dGggYXV0aG9yaXphdGlvbiBwcm9jZXNzIG9yIHJlZnJlc2hlcyBleGlzdGluZyB0b2tlbnMgaWYgbmVjZXNzYXJ5LlxuICAgKiBJZiB0aGUgY3VycmVudCB0b2tlbiBzZXQgaGFzIGEgcmVmcmVzaCB0b2tlbiBhbmQgaXQgaXMgZXhwaXJlZCwgdGhlbiB0aGUgZnVuY3Rpb24gd2lsbCByZWZyZXNoIHRoZSB0b2tlbnMuXG4gICAqIElmIG5vIHRva2VucyBleGlzdCwgaXQgd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggYXV0aG9yaXphdGlvbiBwcm9jZXNzIGFuZCBmZXRjaCB0aGUgdG9rZW5zLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBhY2Nlc3MgdG9rZW4gb2J0YWluZWQgZnJvbSB0aGUgYXV0aG9yaXphdGlvbiBmbG93LCBvciBudWxsIGlmIHRoZSB0b2tlbiBjb3VsZCBub3QgYmUgb2J0YWluZWQuXG4gICAqL1xuICBhc3luYyBhdXRob3JpemUoKSB7XG4gICAgY29uc3QgY3VycmVudFRva2VuU2V0ID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0VG9rZW5zKCk7XG4gICAgaWYgKGN1cnJlbnRUb2tlblNldD8uYWNjZXNzVG9rZW4pIHtcbiAgICAgIGlmIChjdXJyZW50VG9rZW5TZXQucmVmcmVzaFRva2VuICYmIGN1cnJlbnRUb2tlblNldC5pc0V4cGlyZWQoKSkge1xuICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCB0aGlzLnJlZnJlc2hUb2tlbnMoe1xuICAgICAgICAgIHRva2VuOiBjdXJyZW50VG9rZW5TZXQucmVmcmVzaFRva2VuLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJbiB0aGUgY2FzZSB3aGVyZSB0aGUgcmVmcmVzaCB0b2tlbiBmbG93cyBmYWlscywgbm90aGluZyBpcyByZXR1cm5lZCBhbmQgdGhlIGF1dGhvcml6ZSBmdW5jdGlvbiBpcyBjYWxsZWQgYWdhaW4uXG4gICAgICAgIGlmICh0b2tlbnMpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5zZXRUb2tlbnModG9rZW5zKTtcbiAgICAgICAgICByZXR1cm4gdG9rZW5zLmFjY2Vzc190b2tlbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnRUb2tlblNldC5hY2Nlc3NUb2tlbjtcbiAgICB9XG5cbiAgICBjb25zdCBhdXRoUmVxdWVzdCA9IGF3YWl0IHRoaXMuY2xpZW50LmF1dGhvcml6YXRpb25SZXF1ZXN0KHtcbiAgICAgIGVuZHBvaW50OiB0aGlzLmF1dGhvcml6ZVVybCxcbiAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgc2NvcGU6IHRoaXMuc2NvcGUsXG4gICAgICBleHRyYVBhcmFtZXRlcnM6IHRoaXMuZXh0cmFQYXJhbWV0ZXJzLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBhdXRob3JpemF0aW9uQ29kZSB9ID0gYXdhaXQgdGhpcy5jbGllbnQuYXV0aG9yaXplKGF1dGhSZXF1ZXN0KTtcbiAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCB0aGlzLmZldGNoVG9rZW5zKHtcbiAgICAgIGF1dGhSZXF1ZXN0LFxuICAgICAgYXV0aG9yaXphdGlvbkNvZGUsXG4gICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLmNsaWVudC5zZXRUb2tlbnModG9rZW5zKTtcblxuICAgIHJldHVybiB0b2tlbnMuYWNjZXNzX3Rva2VuO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmZXRjaFRva2Vucyh7XG4gICAgYXV0aFJlcXVlc3QsXG4gICAgYXV0aG9yaXphdGlvbkNvZGUsXG4gIH06IHtcbiAgICBhdXRoUmVxdWVzdDogT0F1dGguQXV0aG9yaXphdGlvblJlcXVlc3Q7XG4gICAgYXV0aG9yaXphdGlvbkNvZGU6IHN0cmluZztcbiAgfSkge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmICh0aGlzLmJvZHlFbmNvZGluZyA9PT0gXCJ1cmwtZW5jb2RlZFwiKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwiY2xpZW50X2lkXCIsIHRoaXMuY2xpZW50SWQpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImNvZGVcIiwgYXV0aG9yaXphdGlvbkNvZGUpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImNvZGVfdmVyaWZpZXJcIiwgYXV0aFJlcXVlc3QuY29kZVZlcmlmaWVyKTtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJncmFudF90eXBlXCIsIFwiYXV0aG9yaXphdGlvbl9jb2RlXCIpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcInJlZGlyZWN0X3VyaVwiLCBhdXRoUmVxdWVzdC5yZWRpcmVjdFVSSSk7XG5cbiAgICAgIG9wdGlvbnMgPSB7IGJvZHk6IHBhcmFtcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY2xpZW50X2lkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgIGNvZGU6IGF1dGhvcml6YXRpb25Db2RlLFxuICAgICAgICAgIGNvZGVfdmVyaWZpZXI6IGF1dGhSZXF1ZXN0LmNvZGVWZXJpZmllcixcbiAgICAgICAgICBncmFudF90eXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuICAgICAgICAgIHJlZGlyZWN0X3VyaTogYXV0aFJlcXVlc3QucmVkaXJlY3RVUkksXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy50b2tlblVybCwgeyBtZXRob2Q6IFwiUE9TVFwiLCAuLi5vcHRpb25zIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJmZXRjaCB0b2tlbnMgZXJyb3I6XCIsIHJlc3BvbnNlVGV4dCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHdoaWxlIGZldGNoaW5nIHRva2VuczogJHtyZXNwb25zZS5zdGF0dXN9ICgke3Jlc3BvbnNlLnN0YXR1c1RleHR9KVxcbiR7cmVzcG9uc2VUZXh0fWApO1xuICAgIH1cbiAgICBjb25zdCB0b2tlbnMgPSB0aGlzLnRva2VuUmVzcG9uc2VQYXJzZXIoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcblxuICAgIC8vIFNvbWUgY2xpZW50cyBzdWNoIGFzIExpbmVhciBjYW4gcmV0dXJuIGEgc2NvcGUgYXJyYXkgaW5zdGVhZCBvZiBhIHN0cmluZ1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRva2Vucy5zY29wZSkgPyB7IC4uLnRva2Vucywgc2NvcGU6IHRva2Vucy5zY29wZS5qb2luKFwiIFwiKSB9IDogdG9rZW5zO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoVG9rZW5zKHsgdG9rZW4gfTogeyB0b2tlbjogc3RyaW5nIH0pIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAodGhpcy5ib2R5RW5jb2RpbmcgPT09IFwidXJsLWVuY29kZWRcIikge1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgcGFyYW1zLmFwcGVuZChcImNsaWVudF9pZFwiLCB0aGlzLmNsaWVudElkKTtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJyZWZyZXNoX3Rva2VuXCIsIHRva2VuKTtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJncmFudF90eXBlXCIsIFwicmVmcmVzaF90b2tlblwiKTtcblxuICAgICAgb3B0aW9ucyA9IHsgYm9keTogcGFyYW1zIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgcmVmcmVzaF90b2tlbjogdG9rZW4sXG4gICAgICAgICAgZ3JhbnRfdHlwZTogXCJyZWZyZXNoX3Rva2VuXCIsXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5yZWZyZXNoVG9rZW5VcmwgPz8gdGhpcy50b2tlblVybCwgeyBtZXRob2Q6IFwiUE9TVFwiLCAuLi5vcHRpb25zIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJyZWZyZXNoIHRva2VucyBlcnJvcjpcIiwgcmVzcG9uc2VUZXh0KTtcbiAgICAgIC8vIElmIHRoZSByZWZyZXNoIHRva2VuIGlzIGludmFsaWQsIHN0b3AgdGhlIGZsb3cgaGVyZSwgbG9nIG91dCB0aGUgdXNlciBhbmQgcHJvbXB0IHRoZW0gdG8gcmUtYXV0aG9yaXplLlxuICAgICAgdGhpcy5jbGllbnQuZGVzY3JpcHRpb24gPSBgJHt0aGlzLmNsaWVudC5wcm92aWRlck5hbWV9IG5lZWRzIHlvdSB0byBzaWduLWluIGFnYWluLiBQcmVzcyDij44gb3IgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byBjb250aW51ZS5gO1xuICAgICAgYXdhaXQgdGhpcy5jbGllbnQucmVtb3ZlVG9rZW5zKCk7XG4gICAgICBhd2FpdCB0aGlzLmF1dGhvcml6ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gdGhpcy50b2tlblJlZnJlc2hSZXNwb25zZVBhcnNlcihhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgdG9rZW5SZXNwb25zZS5yZWZyZXNoX3Rva2VuID0gdG9rZW5SZXNwb25zZS5yZWZyZXNoX3Rva2VuID8/IHRva2VuO1xuICAgICAgcmV0dXJuIHRva2VuUmVzcG9uc2U7XG4gICAgfVxuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IFBST1ZJREVSX0NMSUVOVF9JRFMgPSB7XG4gIGFzYW5hOiBcIjExOTEyMDE3NDU2ODQzMTJcIixcbiAgZ2l0aHViOiBcIjcyMzVmZThkNDIxNTdmMWYzOGMwXCIsXG4gIGxpbmVhcjogXCJjOGZmMzdiOTIyNWMzYzlhZWZkN2Q2NmVhMGU1YjZmMVwiLFxuICBzbGFjazogXCI4NTE3NTY4ODQ2OTIuNTU0NjkyNzI5MDIxMlwiLFxufTtcbiIsICJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBlbnZpcm9ubWVudCwgT0F1dGggfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgdHlwZSB7IE9BdXRoVHlwZSwgT25BdXRob3JpemVQYXJhbXMgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5sZXQgdG9rZW46IHN0cmluZyB8IG51bGwgPSBudWxsO1xubGV0IHR5cGU6IE9BdXRoVHlwZSB8IG51bGwgPSBudWxsO1xubGV0IGF1dGhvcml6ZTogUHJvbWlzZTxzdHJpbmc+IHwgbnVsbCA9IG51bGw7XG5sZXQgZ2V0SWRUb2tlbjogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHwgbnVsbCA9IG51bGw7XG5sZXQgb25BdXRob3JpemU6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcblxudHlwZSBXaXRoQWNjZXNzVG9rZW5QYXJhbWV0ZXJzID0ge1xuICAvKipcbiAgICogQW4gb3B0aW9uYWwgaW5zdGFuY2Ugb2YgYSBQS0NFIENsaWVudCB0aGF0IHlvdSBjYW4gY3JlYXRlIHVzaW5nIFJheWNhc3QgQVBJLlxuICAgKiBUaGlzIGNsaWVudCBpcyB1c2VkIHRvIHJldHVybiB0aGUgYGlkVG9rZW5gIGFzIHBhcnQgb2YgdGhlIGBvbkF1dGhvcml6ZWAgY2FsbGJhY2suXG4gICAqL1xuICBjbGllbnQ/OiBPQXV0aC5QS0NFQ2xpZW50O1xuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IGluaXRpYXRlcyB0aGUgT0F1dGggdG9rZW4gcmV0cmlldmFsIHByb2Nlc3NcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYWNjZXNzIHRva2VuLlxuICAgKi9cbiAgYXV0aG9yaXplOiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBzdHJpbmcgdGhhdCByZXByZXNlbnRzIGFuIGFscmVhZHkgb2J0YWluZWQgcGVyc29uYWwgYWNjZXNzIHRva2VuXG4gICAqL1xuICBwZXJzb25hbEFjY2Vzc1Rva2VuPzogc3RyaW5nO1xuICAvKipcbiAgICogQW4gb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgb25jZSB0aGUgdXNlciBoYXMgYmVlbiBwcm9wZXJseSBsb2dnZWQgaW4gdGhyb3VnaCBPQXV0aC5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyAtIFBhcmFtZXRlcnMgb2YgdGhlIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRva2VuIC0gVGhlIHJldHJpZXZlZCBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudHlwZSAtIFRoZSBhY2Nlc3MgdG9rZW4ncyB0eXBlIChlaXRoZXIgYG9hdXRoYCBvciBgcGVyc29uYWxgKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5pZFRva2VuIC0gVGhlIG9wdGlvbmFsIGlkIHRva2VuLiBUaGUgYGlkVG9rZW5gIGlzIHJldHVybmVkIGlmIGBvcHRpb25zLmNsaWVudGAgaXMgcHJvdmlkZWQgYW5kIGlmIGl0J3MgcmV0dXJuZWQgaW4gdGhlIGluaXRpYWwgdG9rZW4gc2V0LlxuICAgKi9cbiAgb25BdXRob3JpemU/OiAocGFyYW1zOiBPbkF1dGhvcml6ZVBhcmFtcykgPT4gdm9pZDtcbn07XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCAoZm9yIGEgdmlldy9tZW51LWJhciBjb21tYW5kcykgb3IgZnVuY3Rpb24gKGZvciBhIG5vLXZpZXcgY29tbWFuZCkgdGhhdCBpcyBwYXNzZWQgdG8gd2l0aEFjY2Vzc1Rva2VuLlxuICovXG5leHBvcnQgdHlwZSBXaXRoQWNjZXNzVG9rZW5Db21wb25lbnRPckZuPFQgPSBhbnksIFUgPSBhbnk+ID0gKChwYXJhbXM6IFQpID0+IFByb21pc2U8VT4gfCBVKSB8IFJlYWN0LkNvbXBvbmVudFR5cGU8VD47XG5cbi8qKlxuICogSGlnaGVyLW9yZGVyIGNvbXBvbmVudCB0byB3cmFwIGEgZ2l2ZW4gY29tcG9uZW50IG9yIGZ1bmN0aW9uIGFuZCBzZXQgYW4gYWNjZXNzIHRva2VuIGluIGEgc2hhcmVkIGdsb2JhbCB2YXJpYWJsZS5cbiAqXG4gKiBUaGUgZnVuY3Rpb24gaW50ZXJjZXB0cyB0aGUgY29tcG9uZW50IHJlbmRlcmluZyBwcm9jZXNzIHRvIGVpdGhlciBmZXRjaCBhbiBPQXV0aCB0b2tlbiBhc3luY2hyb25vdXNseVxuICogb3IgdXNlIGEgcHJvdmlkZWQgcGVyc29uYWwgYWNjZXNzIHRva2VuLiBBIGdsb2JhbCB2YXJpYWJsZSB3aWxsIGJlIHRoZW4gc2V0IHdpdGggdGhlIHJlY2VpdmVkIHRva2VuXG4gKiB0aGF0IHlvdSBjYW4gZ2V0IHdpdGggdGhlIGBnZXRBY2Nlc3NUb2tlbmAgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IERldGFpbCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IE9BdXRoU2VydmljZSwgZ2V0QWNjZXNzVG9rZW4sIHdpdGhBY2Nlc3NUb2tlbiB9IGZyb20gXCJAcmF5Y2FzdC91dGlsc1wiO1xuICpcbiAqIGNvbnN0IGdpdGh1YiA9IE9BdXRoU2VydmljZS5naXRodWIoeyBzY29wZTogXCJub3RpZmljYXRpb25zIHJlcG8gcmVhZDpvcmcgcmVhZDp1c2VyIHJlYWQ6cHJvamVjdFwiIH0pO1xuICpcbiAqIGZ1bmN0aW9uIEF1dGhvcml6ZWRDb21wb25lbnQoKSB7XG4gKiAgY29uc3QgeyB0b2tlbiB9ID0gZ2V0QWNjZXNzVG9rZW4oKTtcbiAqICAuLi5cbiAqIH1cbiAqXG4gKiBleHBvcnQgZGVmYXVsdCB3aXRoQWNjZXNzVG9rZW4oZ2l0aHViKShBdXRob3JpemVkQ29tcG9uZW50KTtcbiAqIGBgYFxuICpcbiAqIEByZXR1cm5zIHtSZWFjdC5Db21wb25lbnRUeXBlPFQ+fSBUaGUgd3JhcHBlZCBjb21wb25lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoQWNjZXNzVG9rZW48VCA9IGFueSwgVSA9IGFueT4oXG4gIG9wdGlvbnM6IFdpdGhBY2Nlc3NUb2tlblBhcmFtZXRlcnMsXG4pOiA8ViBleHRlbmRzIFdpdGhBY2Nlc3NUb2tlbkNvbXBvbmVudE9yRm48VCwgVT4+KFxuICBmbk9yQ29tcG9uZW50OiBWLFxuKSA9PiBWIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50VHlwZTxUPiA/IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PFQ+IDogKHByb3BzOiBUKSA9PiBQcm9taXNlPFU+O1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBY2Nlc3NUb2tlbjxUPihvcHRpb25zOiBXaXRoQWNjZXNzVG9rZW5QYXJhbWV0ZXJzKSB7XG4gIGlmIChlbnZpcm9ubWVudC5jb21tYW5kTW9kZSA9PT0gXCJuby12aWV3XCIpIHtcbiAgICByZXR1cm4gKGZuOiAocHJvcHM6IFQpID0+IFByb21pc2U8dm9pZD4gfCAoKCkgPT4gdm9pZCkpID0+IHtcbiAgICAgIGNvbnN0IG5vVmlld0ZuID0gYXN5bmMgKHByb3BzOiBUKSA9PiB7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICB0b2tlbiA9IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbiA/PyAoYXdhaXQgb3B0aW9ucy5hdXRob3JpemUoKSk7XG4gICAgICAgICAgdHlwZSA9IG9wdGlvbnMucGVyc29uYWxBY2Nlc3NUb2tlbiA/IFwicGVyc29uYWxcIiA6IFwib2F1dGhcIjtcbiAgICAgICAgICBjb25zdCBpZFRva2VuID0gKGF3YWl0IG9wdGlvbnMuY2xpZW50Py5nZXRUb2tlbnMoKSk/LmlkVG9rZW47XG5cbiAgICAgICAgICBpZiAob3B0aW9ucy5vbkF1dGhvcml6ZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKG9wdGlvbnMub25BdXRob3JpemUoeyB0b2tlbiwgdHlwZSwgaWRUb2tlbiB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZuKHByb3BzKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBub1ZpZXdGbjtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIChDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8VD4pID0+IHtcbiAgICBjb25zdCBXcmFwcGVkQ29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPFQ+ID0gKHByb3BzKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHRva2VuID0gb3B0aW9ucy5wZXJzb25hbEFjY2Vzc1Rva2VuO1xuICAgICAgICB0eXBlID0gXCJwZXJzb25hbFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFhdXRob3JpemUpIHtcbiAgICAgICAgICBhdXRob3JpemUgPSBvcHRpb25zLmF1dGhvcml6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRva2VuID0gUmVhY3QudXNlKGF1dGhvcml6ZSk7XG4gICAgICAgIHR5cGUgPSBcIm9hdXRoXCI7XG4gICAgICB9XG5cbiAgICAgIGxldCBpZFRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAob3B0aW9ucy5jbGllbnQpIHtcbiAgICAgICAgaWYgKCFnZXRJZFRva2VuKSB7XG4gICAgICAgICAgZ2V0SWRUb2tlbiA9IG9wdGlvbnMuY2xpZW50Py5nZXRUb2tlbnMoKS50aGVuKCh0b2tlbnMpID0+IHRva2Vucz8uaWRUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgaWRUb2tlbiA9IFJlYWN0LnVzZShnZXRJZFRva2VuKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMub25BdXRob3JpemUpIHtcbiAgICAgICAgaWYgKCFvbkF1dGhvcml6ZSkge1xuICAgICAgICAgIG9uQXV0aG9yaXplID0gUHJvbWlzZS5yZXNvbHZlKG9wdGlvbnMub25BdXRob3JpemUoeyB0b2tlbjogdG9rZW4hLCB0eXBlLCBpZFRva2VuIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBSZWFjdC51c2Uob25BdXRob3JpemUpO1xuICAgICAgfVxuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAvLyBAdHMtaWdub3JlIHRvbyBjb21wbGljYXRlZCBmb3IgVFNcbiAgICAgIHJldHVybiA8Q29tcG9uZW50IHsuLi5wcm9wc30gLz47XG4gICAgfTtcblxuICAgIFdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgPSBgd2l0aEFjY2Vzc1Rva2VuKCR7Q29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lfSlgO1xuXG4gICAgcmV0dXJuIFdyYXBwZWRDb21wb25lbnQ7XG4gIH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYWNjZXNzIHRva2VuIGFuZCBpdHMgdHlwZS4gTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgaW4gYSBjb21wb25lbnQgd3JhcHBlZCB3aXRoIGB3aXRoQWNjZXNzVG9rZW5gLlxuICpcbiAqIFdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgY2FsbGVkIG91dHNpZGUgb2YgYSBmdW5jdGlvbiBvciBjb21wb25lbnQgd3JhcHBlZCB3aXRoIGB3aXRoQWNjZXNzVG9rZW5gXG4gKlxuICogQHJldHVybnMge3sgdG9rZW46IHN0cmluZywgdHlwZTogXCJvYXV0aFwiIHwgXCJwZXJzb25hbFwiIH19IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBgdG9rZW5gXG4gKiBhbmQgaXRzIGB0eXBlYCwgd2hlcmUgdHlwZSBjYW4gYmUgZWl0aGVyICdvYXV0aCcgZm9yIE9BdXRoIHRva2VucyBvciAncGVyc29uYWwnIGZvciBhXG4gKiBwZXJzb25hbCBhY2Nlc3MgdG9rZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpOiB7XG4gIHRva2VuOiBzdHJpbmc7XG4gIC8qKiBgb2F1dGhgIGZvciBPQXV0aCB0b2tlbnMgb3IgYHBlcnNvbmFsYCBmb3IgcGVyc29uYWwgYWNjZXNzIHRva2VuICovXG4gIHR5cGU6IFwib2F1dGhcIiB8IFwicGVyc29uYWxcIjtcbn0ge1xuICBpZiAoIXRva2VuIHx8ICF0eXBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZ2V0QWNjZXNzVG9rZW4gbXVzdCBiZSB1c2VkIHdoZW4gYXV0aGVudGljYXRlZCAoZWcuIHVzZWQgaW5zaWRlIGB3aXRoQWNjZXNzVG9rZW5gKVwiKTtcbiAgfVxuXG4gIHJldHVybiB7IHRva2VuLCB0eXBlIH07XG59XG4iLCAiaW1wb3J0IHsgZW52aXJvbm1lbnQsIExhdW5jaFByb3BzLCBMYXVuY2hUeXBlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5cbmV4cG9ydCBlbnVtIERlZXBsaW5rVHlwZSB7XG4gIC8qKiBBIHNjcmlwdCBjb21tYW5kICovXG4gIFNjcmlwdENvbW1hbmQgPSBcInNjcmlwdC1jb21tYW5kXCIsXG4gIC8qKiBBbiBleHRlbnNpb24gY29tbWFuZCAqL1xuICBFeHRlbnNpb24gPSBcImV4dGVuc2lvblwiLFxufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgZGVlcGxpbmsgdG8gYSBzY3JpcHQgY29tbWFuZC5cbiAqL1xuZXhwb3J0IHR5cGUgQ3JlYXRlU2NyaXB0Q29tbWFuZERlZXBsaW5rT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGRlZXBsaW5rLCB3aGljaCBzaG91bGQgYmUgXCJzY3JpcHQtY29tbWFuZFwiLlxuICAgKi9cbiAgdHlwZTogRGVlcGxpbmtUeXBlLlNjcmlwdENvbW1hbmQ7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgY29tbWFuZC5cbiAgICovXG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgLyoqXG4gICAqIElmIHRoZSBjb21tYW5kIGFjY2VwdHMgYXJndW1lbnRzLCB0aGV5IGNhbiBiZSBwYXNzZWQgdXNpbmcgdGhpcyBxdWVyeSBwYXJhbWV0ZXIuXG4gICAqL1xuICBhcmd1bWVudHM/OiBzdHJpbmdbXTtcbn07XG5cbi8qKlxuICogQmFzZSBvcHRpb25zIGZvciBjcmVhdGluZyBhIGRlZXBsaW5rIHRvIGFuIGV4dGVuc2lvbi5cbiAqL1xuZXhwb3J0IHR5cGUgQ3JlYXRlRXh0ZW5zaW9uRGVlcGxpbmtCYXNlT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGRlZXBsaW5rLCB3aGljaCBzaG91bGQgYmUgXCJleHRlbnNpb25cIi5cbiAgICovXG4gIHR5cGU/OiBEZWVwbGlua1R5cGUuRXh0ZW5zaW9uO1xuICAvKipcbiAgICogVGhlIGNvbW1hbmQgYXNzb2NpYXRlZCB3aXRoIHRoZSBleHRlbnNpb24uXG4gICAqL1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFaXRoZXIgXCJ1c2VySW5pdGlhdGVkXCIsIHdoaWNoIHJ1bnMgdGhlIGNvbW1hbmQgaW4gdGhlIGZvcmVncm91bmQsIG9yIFwiYmFja2dyb3VuZFwiLCB3aGljaCBza2lwcyBicmluZ2luZyBSYXljYXN0IHRvIHRoZSBmcm9udC5cbiAgICovXG4gIGxhdW5jaFR5cGU/OiBMYXVuY2hUeXBlO1xuICAvKipcbiAgICogSWYgdGhlIGNvbW1hbmQgYWNjZXB0cyBhcmd1bWVudHMsIHRoZXkgY2FuIGJlIHBhc3NlZCB1c2luZyB0aGlzIHF1ZXJ5IHBhcmFtZXRlci5cbiAgICovXG4gIGFyZ3VtZW50cz86IExhdW5jaFByb3BzW1wiYXJndW1lbnRzXCJdO1xuICAvKipcbiAgICogSWYgdGhlIGNvbW1hbmQgbWFrZSB1c2Ugb2YgTGF1bmNoQ29udGV4dCwgaXQgY2FuIGJlIHBhc3NlZCB1c2luZyB0aGlzIHF1ZXJ5IHBhcmFtZXRlci5cbiAgICovXG4gIGNvbnRleHQ/OiBMYXVuY2hQcm9wc1tcImxhdW5jaENvbnRleHRcIl07XG4gIC8qKlxuICAgKiBTb21lIHRleHQgdG8gcHJlZmlsbCB0aGUgc2VhcmNoIGJhciBvciBmaXJzdCB0ZXh0IGlucHV0IG9mIHRoZSBjb21tYW5kXG4gICAqL1xuICBmYWxsYmFja1RleHQ/OiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgZGVlcGxpbmsgdG8gYW4gZXh0ZW5zaW9uIGZyb20gYW5vdGhlciBleHRlbnNpb24uXG4gKiBSZXF1aXJlcyBib3RoIHRoZSBvd25lck9yQXV0aG9yTmFtZSBhbmQgZXh0ZW5zaW9uTmFtZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ3JlYXRlSW50ZXJFeHRlbnNpb25EZWVwbGlua09wdGlvbnMgPSBDcmVhdGVFeHRlbnNpb25EZWVwbGlua0Jhc2VPcHRpb25zICYge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIG93bmVyIG9yIGF1dGhvciBvZiB0aGUgZXh0ZW5zaW9uLlxuICAgKi9cbiAgb3duZXJPckF1dGhvck5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBleHRlbnNpb24uXG4gICAqL1xuICBleHRlbnNpb25OYW1lOiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgZGVlcGxpbmsgdG8gYW4gZXh0ZW5zaW9uLlxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVFeHRlbnNpb25EZWVwbGlua09wdGlvbnMgPSBDcmVhdGVJbnRlckV4dGVuc2lvbkRlZXBsaW5rT3B0aW9ucyB8IENyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rQmFzZU9wdGlvbnM7XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBkZWVwbGluay5cbiAqL1xuZXhwb3J0IHR5cGUgQ3JlYXRlRGVlcGxpbmtPcHRpb25zID0gQ3JlYXRlU2NyaXB0Q29tbWFuZERlZXBsaW5rT3B0aW9ucyB8IENyZWF0ZUV4dGVuc2lvbkRlZXBsaW5rT3B0aW9ucztcblxuZnVuY3Rpb24gZ2V0UHJvdG9jb2woKSB7XG4gIHJldHVybiBlbnZpcm9ubWVudC5yYXljYXN0VmVyc2lvbi5pbmNsdWRlcyhcImFscGhhXCIpID8gXCJyYXljYXN0aW50ZXJuYWw6Ly9cIiA6IFwicmF5Y2FzdDovL1wiO1xufVxuXG5mdW5jdGlvbiBnZXRPd25lck9yQXV0aG9yTmFtZSgpIHtcbiAgY29uc3QgcGFja2FnZUpTT04gPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4oZW52aXJvbm1lbnQuYXNzZXRzUGF0aCwgXCIuLlwiLCBcInBhY2thZ2UuanNvblwiKSwgXCJ1dGY4XCIpKTtcbiAgcmV0dXJuIHBhY2thZ2VKU09OLm93bmVyIHx8IHBhY2thZ2VKU09OLmF1dGhvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdENvbW1hbmREZWVwbGluayhvcHRpb25zOiBDcmVhdGVTY3JpcHRDb21tYW5kRGVlcGxpbmtPcHRpb25zKTogc3RyaW5nIHtcbiAgbGV0IHVybCA9IGAke2dldFByb3RvY29sKCl9c2NyaXB0LWNvbW1hbmRzLyR7b3B0aW9ucy5jb21tYW5kfWA7XG5cbiAgaWYgKG9wdGlvbnMuYXJndW1lbnRzKSB7XG4gICAgbGV0IHBhcmFtcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBhcmcgb2Ygb3B0aW9ucy5hcmd1bWVudHMpIHtcbiAgICAgIHBhcmFtcyArPSBcIiZhcmd1bWVudHM9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoYXJnKTtcbiAgICB9XG4gICAgdXJsICs9IFwiP1wiICsgcGFyYW1zLnN1YnN0cmluZygxKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHRlbnNpb25EZWVwbGluayhvcHRpb25zOiBDcmVhdGVFeHRlbnNpb25EZWVwbGlua09wdGlvbnMpOiBzdHJpbmcge1xuICBsZXQgb3duZXJPckF1dGhvck5hbWUgPSBnZXRPd25lck9yQXV0aG9yTmFtZSgpO1xuICBsZXQgZXh0ZW5zaW9uTmFtZSA9IGVudmlyb25tZW50LmV4dGVuc2lvbk5hbWU7XG5cbiAgaWYgKFwib3duZXJPckF1dGhvck5hbWVcIiBpbiBvcHRpb25zICYmIFwiZXh0ZW5zaW9uTmFtZVwiIGluIG9wdGlvbnMpIHtcbiAgICBvd25lck9yQXV0aG9yTmFtZSA9IG9wdGlvbnMub3duZXJPckF1dGhvck5hbWU7XG4gICAgZXh0ZW5zaW9uTmFtZSA9IG9wdGlvbnMuZXh0ZW5zaW9uTmFtZTtcbiAgfVxuXG4gIGxldCB1cmwgPSBgJHtnZXRQcm90b2NvbCgpfWV4dGVuc2lvbnMvJHtvd25lck9yQXV0aG9yTmFtZX0vJHtleHRlbnNpb25OYW1lfS8ke29wdGlvbnMuY29tbWFuZH1gO1xuXG4gIGxldCBwYXJhbXMgPSBcIlwiO1xuICBpZiAob3B0aW9ucy5sYXVuY2hUeXBlKSB7XG4gICAgcGFyYW1zICs9IFwiJmxhdW5jaFR5cGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5sYXVuY2hUeXBlKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmFyZ3VtZW50cykge1xuICAgIHBhcmFtcyArPSBcIiZhcmd1bWVudHM9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hcmd1bWVudHMpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmNvbnRleHQpIHtcbiAgICBwYXJhbXMgKz0gXCImY29udGV4dD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShvcHRpb25zLmNvbnRleHQpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmZhbGxiYWNrVGV4dCkge1xuICAgIHBhcmFtcyArPSBcIiZmYWxsYmFja1RleHQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5mYWxsYmFja1RleHQpO1xuICB9XG5cbiAgaWYgKHBhcmFtcykge1xuICAgIHVybCArPSBcIj9cIiArIHBhcmFtcy5zdWJzdHJpbmcoMSk7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWVwbGluayB0byBhIHNjcmlwdCBjb21tYW5kIG9yIGV4dGVuc2lvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlZXBsaW5rKG9wdGlvbnM6IENyZWF0ZURlZXBsaW5rT3B0aW9ucyk6IHN0cmluZyB7XG4gIGlmIChvcHRpb25zLnR5cGUgPT09IERlZXBsaW5rVHlwZS5TY3JpcHRDb21tYW5kKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVNjcmlwdENvbW1hbmREZWVwbGluayhvcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlRXh0ZW5zaW9uRGVlcGxpbmsob3B0aW9ucyk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBiYXNlRXhlY3V0ZVNRTCB9IGZyb20gXCIuL3NxbC11dGlsc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgU1FMIHF1ZXJ5IG9uIGEgbG9jYWwgU1FMaXRlIGRhdGFiYXNlIGFuZCByZXR1cm5zIHRoZSBxdWVyeSByZXN1bHQgaW4gSlNPTiBmb3JtYXQuXG4gKlxuICogQHBhcmFtIGRhdGFiYXNlUGF0aCAtIFRoZSBwYXRoIHRvIHRoZSBTUUxpdGUgZGF0YWJhc2UgZmlsZS5cbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBTUUwgcXVlcnkgdG8gZXhlY3V0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIG9iamVjdHMgcmVwcmVzZW50aW5nIHRoZSBxdWVyeSByZXN1bHRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBjbG9zZU1haW5XaW5kb3csIENsaXBib2FyZCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IGV4ZWN1dGVTUUwgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbiAqXG4gKiB0eXBlIE1lc3NhZ2UgPSB7IGJvZHk6IHN0cmluZzsgY29kZTogc3RyaW5nIH07XG4gKlxuICogY29uc3QgREJfUEFUSCA9IFwiL3BhdGgvdG8vY2hhdC5kYlwiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIENvbW1hbmQoKSB7XG4gKiAgIGNvbnN0IHF1ZXJ5ID0gYFNFTEVDVCBib2R5LCBjb2RlIEZST00gLi4uYFxuICpcbiAqICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBleGVjdXRlU1FMPE1lc3NhZ2U+KERCX1BBVEgsIHF1ZXJ5KTtcbiAqXG4gKiAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gKiAgICAgY29uc3QgbGF0ZXN0Q29kZSA9IG1lc3NhZ2VzWzBdLmNvZGU7XG4gKiAgICAgYXdhaXQgQ2xpcGJvYXJkLnBhc3RlKGxhdGVzdENvZGUpO1xuICogICAgIGF3YWl0IGNsb3NlTWFpbldpbmRvdygpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVTUUw8VCA9IHVua25vd24+KGRhdGFiYXNlUGF0aDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKSB7XG4gIHJldHVybiBiYXNlRXhlY3V0ZVNRTDxUPihkYXRhYmFzZVBhdGgsIHF1ZXJ5KTtcbn1cbiIsICJpbXBvcnQgY2hpbGRQcm9jZXNzIGZyb20gXCJub2RlOmNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7XG4gIGRlZmF1bHRQYXJzaW5nLFxuICBnZXRTcGF3bmVkUHJvbWlzZSxcbiAgZ2V0U3Bhd25lZFJlc3VsdCxcbiAgaGFuZGxlT3V0cHV0LFxuICBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyLFxufSBmcm9tIFwiLi9leGVjLXV0aWxzXCI7XG5cbnR5cGUgQXBwbGVTY3JpcHRPcHRpb25zID0ge1xuICAvKipcbiAgICogQnkgZGVmYXVsdCwgYHJ1bkFwcGxlU2NyaXB0YCByZXR1cm5zIGl0cyByZXN1bHRzIGluIGh1bWFuLXJlYWRhYmxlIGZvcm06IHN0cmluZ3MgZG8gbm90IGhhdmUgcXVvdGVzIGFyb3VuZCB0aGVtLCBjaGFyYWN0ZXJzIGFyZSBub3QgZXNjYXBlZCwgYnJhY2VzIGZvciBsaXN0cyBhbmQgcmVjb3JkcyBhcmUgb21pdHRlZCwgZXRjLiBUaGlzIGlzIGdlbmVyYWxseSBtb3JlIHVzZWZ1bCwgYnV0IGNhbiBpbnRyb2R1Y2UgYW1iaWd1aXRpZXMuIEZvciBleGFtcGxlLCB0aGUgbGlzdHMgYHtcImZvb1wiLCBcImJhclwifWAgYW5kIGB7e1wiZm9vXCIsIHtcImJhclwifX19YCB3b3VsZCBib3RoIGJlIGRpc3BsYXllZCBhcyDigJhmb28sIGJhcuKAmS4gVG8gc2VlIHRoZSByZXN1bHRzIGluIGFuIHVuYW1iaWd1b3VzIGZvcm0gdGhhdCBjb3VsZCBiZSByZWNvbXBpbGVkIGludG8gdGhlIHNhbWUgdmFsdWUsIHNldCBgaHVtYW5SZWFkYWJsZU91dHB1dGAgdG8gYGZhbHNlYC5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgaHVtYW5SZWFkYWJsZU91dHB1dD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzY3JpcHQgaXMgdXNpbmcgW2BBcHBsZVNjcmlwdGBdKGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2FyY2hpdmUvZG9jdW1lbnRhdGlvbi9BcHBsZVNjcmlwdC9Db25jZXB0dWFsL0FwcGxlU2NyaXB0TGFuZ0d1aWRlL2ludHJvZHVjdGlvbi9BU0xSX2ludHJvLmh0bWwjLy9hcHBsZV9yZWYvZG9jL3VpZC9UUDQwMDAwOTgzKSBvciBbYEphdmFTY3JpcHRgXShodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vbGlicmFyeS9hcmNoaXZlL3JlbGVhc2Vub3Rlcy9JbnRlcmFwcGxpY2F0aW9uQ29tbXVuaWNhdGlvbi9STi1KYXZhU2NyaXB0Rm9yQXV0b21hdGlvbi9BcnRpY2xlcy9JbnRyb2R1Y3Rpb24uaHRtbCMvL2FwcGxlX3JlZi9kb2MvdWlkL1RQNDAwMTQ1MDgtQ0gxMTEtU1cxKS5cbiAgICpcbiAgICogQGRlZmF1bHQgXCJBcHBsZVNjcmlwdFwiXG4gICAqL1xuICBsYW5ndWFnZT86IFwiQXBwbGVTY3JpcHRcIiB8IFwiSmF2YVNjcmlwdFwiO1xuICAvKipcbiAgICogQSBTaWduYWwgb2JqZWN0IHRoYXQgYWxsb3dzIHlvdSB0byBhYm9ydCB0aGUgcmVxdWVzdCBpZiByZXF1aXJlZCB2aWEgYW4gQWJvcnRDb250cm9sbGVyIG9iamVjdC5cbiAgICovXG4gIHNpZ25hbD86IEFib3J0U2lnbmFsO1xuICAvKiogSWYgdGltZW91dCBpcyBncmVhdGVyIHRoYW4gYDBgLCB0aGUgcGFyZW50IHdpbGwgc2VuZCB0aGUgc2lnbmFsIGBTSUdURVJNYCBpZiB0aGUgY2hpbGQgcnVucyBsb25nZXIgdGhhbiB0aW1lb3V0IG1pbGxpc2Vjb25kcy5cbiAgICpcbiAgICogQGRlZmF1bHQgMTAwMDBcbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGVzIGFuIEFwcGxlU2NyaXB0IHNjcmlwdC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgc2hvd0hVRCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbiAqIGltcG9ydCB7IHJ1bkFwcGxlU2NyaXB0LCBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKCkge1xuICogICB0cnkge1xuICogICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJ1bkFwcGxlU2NyaXB0KFxuICogICAgICAgYFxuICogICAgICAgb24gcnVuIGFyZ3ZcbiAqICAgICAgICAgcmV0dXJuIFwiaGVsbG8sIFwiICYgaXRlbSAxIG9mIGFyZ3YgJiBcIi5cIlxuICogICAgICAgZW5kIHJ1blxuICogICAgICAgYCxcbiAqICAgICAgIFtcIndvcmxkXCJdXG4gKiAgICAgKTtcbiAqICAgICBhd2FpdCBzaG93SFVEKHJlcyk7XG4gKiAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgICAgc2hvd0ZhaWx1cmVUb2FzdChlcnJvciwgeyB0aXRsZTogXCJDb3VsZCBub3QgcnVuIEFwcGxlU2NyaXB0XCIgfSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuQXBwbGVTY3JpcHQ8VCA9IHN0cmluZz4oXG4gIHNjcmlwdDogc3RyaW5nLFxuICBvcHRpb25zPzogQXBwbGVTY3JpcHRPcHRpb25zICYge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIEFwcGxlU2NyaXB0T3B0aW9ucz47XG4gIH0sXG4pOiBQcm9taXNlPHN0cmluZz47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuQXBwbGVTY3JpcHQ8VCA9IHN0cmluZz4oXG4gIHNjcmlwdDogc3RyaW5nLFxuICAvKipcbiAgICogVGhlIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBzY3JpcHQuXG4gICAqL1xuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IEFwcGxlU2NyaXB0T3B0aW9ucyAmIHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBBcHBsZVNjcmlwdE9wdGlvbnM+O1xuICB9LFxuKTogUHJvbWlzZTxzdHJpbmc+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkFwcGxlU2NyaXB0PFQgPSBzdHJpbmc+KFxuICBzY3JpcHQ6IHN0cmluZyxcbiAgb3B0aW9uc09yQXJncz86XG4gICAgfCBzdHJpbmdbXVxuICAgIHwgKEFwcGxlU2NyaXB0T3B0aW9ucyAmIHtcbiAgICAgICAgcGFyc2VPdXRwdXQ/OiBQYXJzZUV4ZWNPdXRwdXRIYW5kbGVyPFQsIHN0cmluZywgQXBwbGVTY3JpcHRPcHRpb25zPjtcbiAgICAgIH0pLFxuICBvcHRpb25zPzogQXBwbGVTY3JpcHRPcHRpb25zICYge1xuICAgIHBhcnNlT3V0cHV0PzogUGFyc2VFeGVjT3V0cHV0SGFuZGxlcjxULCBzdHJpbmcsIEFwcGxlU2NyaXB0T3B0aW9ucz47XG4gIH0sXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gXCJkYXJ3aW5cIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFwcGxlU2NyaXB0IGlzIG9ubHkgc3VwcG9ydGVkIG9uIG1hY09TXCIpO1xuICB9XG5cbiAgY29uc3QgeyBodW1hblJlYWRhYmxlT3V0cHV0LCBsYW5ndWFnZSwgdGltZW91dCwgLi4uZXhlY09wdGlvbnMgfSA9IEFycmF5LmlzQXJyYXkob3B0aW9uc09yQXJncylcbiAgICA/IG9wdGlvbnMgfHwge31cbiAgICA6IG9wdGlvbnNPckFyZ3MgfHwge307XG5cbiAgY29uc3Qgb3V0cHV0QXJndW1lbnRzID0gaHVtYW5SZWFkYWJsZU91dHB1dCAhPT0gZmFsc2UgPyBbXSA6IFtcIi1zc1wiXTtcbiAgaWYgKGxhbmd1YWdlID09PSBcIkphdmFTY3JpcHRcIikge1xuICAgIG91dHB1dEFyZ3VtZW50cy5wdXNoKFwiLWxcIiwgXCJKYXZhU2NyaXB0XCIpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnNPckFyZ3MpKSB7XG4gICAgb3V0cHV0QXJndW1lbnRzLnB1c2goXCItXCIsIC4uLm9wdGlvbnNPckFyZ3MpO1xuICB9XG5cbiAgY29uc3Qgc3Bhd25lZCA9IGNoaWxkUHJvY2Vzcy5zcGF3bihcIm9zYXNjcmlwdFwiLCBvdXRwdXRBcmd1bWVudHMsIHtcbiAgICAuLi5leGVjT3B0aW9ucyxcbiAgICBlbnY6IHsgUEFUSDogXCIvdXNyL2xvY2FsL2JpbjovdXNyL2JpbjovYmluOi91c3Ivc2Jpbjovc2JpblwiIH0sXG4gIH0pO1xuICBjb25zdCBzcGF3bmVkUHJvbWlzZSA9IGdldFNwYXduZWRQcm9taXNlKHNwYXduZWQsIHsgdGltZW91dDogdGltZW91dCA/PyAxMDAwMCB9KTtcblxuICBzcGF3bmVkLnN0ZGluLmVuZChzY3JpcHQpO1xuXG4gIGNvbnN0IFt7IGVycm9yLCBleGl0Q29kZSwgc2lnbmFsLCB0aW1lZE91dCB9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdF0gPSBhd2FpdCBnZXRTcGF3bmVkUmVzdWx0PHN0cmluZz4oXG4gICAgc3Bhd25lZCxcbiAgICB7IGVuY29kaW5nOiBcInV0ZjhcIiB9LFxuICAgIHNwYXduZWRQcm9taXNlLFxuICApO1xuICBjb25zdCBzdGRvdXQgPSBoYW5kbGVPdXRwdXQoeyBzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSB9LCBzdGRvdXRSZXN1bHQpO1xuICBjb25zdCBzdGRlcnIgPSBoYW5kbGVPdXRwdXQoeyBzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSB9LCBzdGRlcnJSZXN1bHQpO1xuXG4gIHJldHVybiBkZWZhdWx0UGFyc2luZyh7XG4gICAgc3Rkb3V0LFxuICAgIHN0ZGVycixcbiAgICBlcnJvcixcbiAgICBleGl0Q29kZSxcbiAgICBzaWduYWwsXG4gICAgdGltZWRPdXQsXG4gICAgY29tbWFuZDogXCJvc2FzY3JpcHRcIixcbiAgICBvcHRpb25zLFxuICAgIHBhcmVudEVycm9yOiBuZXcgRXJyb3IoKSxcbiAgfSk7XG59XG4iLCAiaW1wb3J0IGNoaWxkUHJvY2VzcyBmcm9tIFwibm9kZTpjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQge1xuICBkZWZhdWx0UGFyc2luZyxcbiAgZ2V0U3Bhd25lZFByb21pc2UsXG4gIGdldFNwYXduZWRSZXN1bHQsXG4gIGhhbmRsZU91dHB1dCxcbiAgUGFyc2VFeGVjT3V0cHV0SGFuZGxlcixcbn0gZnJvbSBcIi4vZXhlYy11dGlsc1wiO1xuXG50eXBlIFBvd2VyU2hlbGxTY3JpcHRPcHRpb25zID0ge1xuICAvKipcbiAgICogQSBTaWduYWwgb2JqZWN0IHRoYXQgYWxsb3dzIHlvdSB0byBhYm9ydCB0aGUgcmVxdWVzdCBpZiByZXF1aXJlZCB2aWEgYW4gQWJvcnRDb250cm9sbGVyIG9iamVjdC5cbiAgICovXG4gIHNpZ25hbD86IEFib3J0U2lnbmFsO1xuICAvKiogSWYgdGltZW91dCBpcyBncmVhdGVyIHRoYW4gYDBgLCB0aGUgcGFyZW50IHdpbGwgc2VuZCB0aGUgc2lnbmFsIGBTSUdURVJNYCBpZiB0aGUgY2hpbGQgcnVucyBsb25nZXIgdGhhbiB0aW1lb3V0IG1pbGxpc2Vjb25kcy5cbiAgICpcbiAgICogQGRlZmF1bHQgMTAwMDBcbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgUG93ZXJTaGVsbCBzY3JpcHQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IHNob3dIVUQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG4gKiBpbXBvcnQgeyBydW5Qb3dlclNoZWxsU2NyaXB0LCBzaG93RmFpbHVyZVRvYXN0IH0gZnJvbSBcIkByYXljYXN0L3V0aWxzXCI7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gKCkge1xuICogICB0cnkge1xuICogICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJ1blBvd2VyU2hlbGxTY3JpcHQoXG4gKiAgICAgICBgXG4gKiAgICAgICBXcml0ZS1Ib3N0IFwiaGVsbG8sIHdvcmxkLlwiXG4gKiAgICAgICBgLFxuICogICAgICk7XG4gKiAgICAgYXdhaXQgc2hvd0hVRChyZXMpO1xuICogICB9IGNhdGNoIChlcnJvcikge1xuICogICAgIHNob3dGYWlsdXJlVG9hc3QoZXJyb3IsIHsgdGl0bGU6IFwiQ291bGQgbm90IHJ1biBQb3dlclNoZWxsXCIgfSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuUG93ZXJTaGVsbFNjcmlwdDxUID0gc3RyaW5nPihcbiAgc2NyaXB0OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBQb3dlclNoZWxsU2NyaXB0T3B0aW9ucyAmIHtcbiAgICBwYXJzZU91dHB1dD86IFBhcnNlRXhlY091dHB1dEhhbmRsZXI8VCwgc3RyaW5nLCBQb3dlclNoZWxsU2NyaXB0T3B0aW9ucz47XG4gIH0sXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gXCJ3aW4zMlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUG93ZXJTaGVsbCBpcyBvbmx5IHN1cHBvcnRlZCBvbiBXaW5kb3dzXCIpO1xuICB9XG5cbiAgY29uc3QgeyB0aW1lb3V0LCAuLi5leGVjT3B0aW9ucyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICBjb25zdCBvdXRwdXRBcmd1bWVudHMgPSBbXCItTm9Mb2dvXCIsIFwiLU5vUHJvZmlsZVwiLCBcIi1Ob25JbnRlcmFjdGl2ZVwiLCBcIi1Db21tYW5kXCIsIFwiLVwiXTtcblxuICBjb25zdCBzcGF3bmVkID0gY2hpbGRQcm9jZXNzLnNwYXduKFwicG93ZXJzaGVsbC5leGVcIiwgb3V0cHV0QXJndW1lbnRzLCB7XG4gICAgLi4uZXhlY09wdGlvbnMsXG4gIH0pO1xuICBjb25zdCBzcGF3bmVkUHJvbWlzZSA9IGdldFNwYXduZWRQcm9taXNlKHNwYXduZWQsIHsgdGltZW91dDogdGltZW91dCA/PyAxMDAwMCB9KTtcblxuICBzcGF3bmVkLnN0ZGluLmVuZChzY3JpcHQpO1xuXG4gIGNvbnN0IFt7IGVycm9yLCBleGl0Q29kZSwgc2lnbmFsLCB0aW1lZE91dCB9LCBzdGRvdXRSZXN1bHQsIHN0ZGVyclJlc3VsdF0gPSBhd2FpdCBnZXRTcGF3bmVkUmVzdWx0PHN0cmluZz4oXG4gICAgc3Bhd25lZCxcbiAgICB7IGVuY29kaW5nOiBcInV0ZjhcIiB9LFxuICAgIHNwYXduZWRQcm9taXNlLFxuICApO1xuICBjb25zdCBzdGRvdXQgPSBoYW5kbGVPdXRwdXQoeyBzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSB9LCBzdGRvdXRSZXN1bHQpO1xuICBjb25zdCBzdGRlcnIgPSBoYW5kbGVPdXRwdXQoeyBzdHJpcEZpbmFsTmV3bGluZTogdHJ1ZSB9LCBzdGRlcnJSZXN1bHQpO1xuXG4gIHJldHVybiBkZWZhdWx0UGFyc2luZyh7XG4gICAgc3Rkb3V0LFxuICAgIHN0ZGVycixcbiAgICBlcnJvcixcbiAgICBleGl0Q29kZSxcbiAgICBzaWduYWwsXG4gICAgdGltZWRPdXQsXG4gICAgY29tbWFuZDogXCJwb3dlcnNoZWxsLmV4ZVwiLFxuICAgIG9wdGlvbnMsXG4gICAgcGFyZW50RXJyb3I6IG5ldyBFcnJvcigpLFxuICB9KTtcbn1cbiIsICJpbXBvcnQgeyBDYWNoZSB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGhhc2gsIHJlcGxhY2VyLCByZXZpdmVyIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG4vKipcbiAqIFdyYXBzIGEgZnVuY3Rpb24gd2l0aCBjYWNoaW5nIGZ1bmN0aW9uYWxpdHkgdXNpbmcgUmF5Y2FzdCdzIENhY2hlIEFQSS5cbiAqIEFsbG93cyBmb3IgY2FjaGluZyBvZiBleHBlbnNpdmUgZnVuY3Rpb25zIGxpa2UgcGFnaW5hdGVkIEFQSSBjYWxscyB0aGF0IHJhcmVseSBjaGFuZ2UuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGFzeW5jIGZ1bmN0aW9uIHRvIGNhY2hlIHJlc3VsdHMgZnJvbVxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgY2FjaGUgYmVoYXZpb3JcbiAqIEBwYXJhbSBvcHRpb25zLnZhbGlkYXRlIC0gT3B0aW9uYWwgdmFsaWRhdGlvbiBmdW5jdGlvbiBmb3IgY2FjaGVkIGRhdGFcbiAqIEBwYXJhbSBvcHRpb25zLm1heEFnZSAtIE1heGltdW0gYWdlIG9mIGNhY2hlZCBkYXRhIGluIG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMgQW4gYXN5bmMgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uLCBlaXRoZXIgZnJvbSBjYWNoZSBvciBmcmVzaCBleGVjdXRpb25cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGNhY2hlZEZ1bmN0aW9uID0gd2l0aENhY2hlKGZldGNoRXhwZW5zaXZlRGF0YSwge1xuICogICBtYXhBZ2U6IDUgKiA2MCAqIDEwMDAgLy8gQ2FjaGUgZm9yIDUgbWludXRlc1xuICogfSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FjaGVkRnVuY3Rpb24ocXVlcnkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoQ2FjaGU8Rm4gZXh0ZW5kcyAoLi4uYXJnczogYW55KSA9PiBQcm9taXNlPGFueT4+KFxuICBmbjogRm4sXG4gIG9wdGlvbnM/OiB7XG4gICAgLyoqIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgdGhlIGNhY2hlZCBkYXRhIGFuZCByZXR1cm5zIGEgYm9vbGVhbiBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZGF0YSBpcyBzdGlsbCB2YWxpZCBvciBub3QuICovXG4gICAgdmFsaWRhdGU/OiAoZGF0YTogQXdhaXRlZDxSZXR1cm5UeXBlPEZuPj4pID0+IGJvb2xlYW47XG4gICAgLyoqIE1heGltdW0gYWdlIG9mIGNhY2hlZCBkYXRhIGluIG1pbGxpc2Vjb25kcyBhZnRlciB3aGljaCB0aGUgZGF0YSB3aWxsIGJlIGNvbnNpZGVyZWQgaW52YWxpZCAqL1xuICAgIG1heEFnZT86IG51bWJlcjtcbiAgfSxcbik6IEZuICYgeyBjbGVhckNhY2hlOiAoKSA9PiB2b2lkIH0ge1xuICBjb25zdCBjYWNoZSA9IG5ldyBDYWNoZSh7IG5hbWVzcGFjZTogaGFzaChmbikgfSk7XG5cbiAgY29uc3Qgd3JhcHBlZEZuID0gYXN5bmMgKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rm4+KSA9PiB7XG4gICAgY29uc3Qga2V5ID1cbiAgICAgIGhhc2goYXJncyB8fCBbXSkgKyAob3B0aW9ucyBhcyB1bmtub3duIGFzIHsgaW50ZXJuYWxfY2FjaGVLZXlTdWZmaXg/OiBzdHJpbmcgfSk/LmludGVybmFsX2NhY2hlS2V5U3VmZml4O1xuICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgdGltZXN0YW1wIH0gPSBKU09OLnBhcnNlKGNhY2hlZCwgcmV2aXZlcik7XG4gICAgICBjb25zdCBpc0V4cGlyZWQgPSBvcHRpb25zPy5tYXhBZ2UgJiYgRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCA+IG9wdGlvbnMubWF4QWdlO1xuICAgICAgaWYgKCFpc0V4cGlyZWQgJiYgKCFvcHRpb25zPy52YWxpZGF0ZSB8fCBvcHRpb25zLnZhbGlkYXRlKGRhdGEpKSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKC4uLmFyZ3MpO1xuICAgIGNhY2hlLnNldChcbiAgICAgIGtleSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KFxuICAgICAgICB7XG4gICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVwbGFjZXIsXG4gICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB3cmFwcGVkRm4uY2xlYXJDYWNoZSA9ICgpID0+IHtcbiAgICBjYWNoZS5jbGVhcigpO1xuICB9O1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgdG9vIGNvbXBsZXggZm9yIFRTXG4gIHJldHVybiB3cmFwcGVkRm47XG59XG4iLCAiaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IFZhdWx0TG9hZGluZ0ZhbGxiYWNrID0gKCkgPT4gPExpc3Qgc2VhcmNoQmFyUGxhY2Vob2xkZXI9XCJTZWFyY2ggdmF1bHRcIiBpc0xvYWRpbmcgLz47XG4iLCAiaW1wb3J0IHsgdXNlUmVkdWNlciB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgU2Vzc2lvblN0YXRlIH0gZnJvbSBcIn4vdHlwZXMvc2Vzc2lvblwiO1xuXG5jb25zdCBpbml0aWFsU3RhdGU6IFNlc3Npb25TdGF0ZSA9IHtcbiAgdG9rZW46IHVuZGVmaW5lZCxcbiAgcGFzc3dvcmRIYXNoOiB1bmRlZmluZWQsXG5cbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBpc0xvY2tlZDogZmFsc2UsXG4gIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG59O1xuXG50eXBlIFNlc3Npb25SZWR1Y2VyQWN0aW9ucyA9XG4gIHwgKHsgdHlwZTogXCJsb2FkU3RhdGVcIiB9ICYgUGFydGlhbDxPbWl0PFNlc3Npb25TdGF0ZSwgXCJpc0xvYWRpbmdcIiB8IFwiaXNMb2NrZWRcIiB8IFwiaXNBdXRoZW50aWNhdGVkXCI+PilcbiAgfCB7IHR5cGU6IFwibG9ja1wiIH1cbiAgfCAoeyB0eXBlOiBcInVubG9ja1wiIH0gJiBQaWNrPFNlc3Npb25TdGF0ZSwgXCJ0b2tlblwiIHwgXCJwYXNzd29yZEhhc2hcIj4pXG4gIHwgeyB0eXBlOiBcImxvZ291dFwiIH1cbiAgfCB7IHR5cGU6IFwidmF1bHRUaW1lb3V0XCIgfVxuICB8IHsgdHlwZTogXCJmaW5pc2hMb2FkaW5nU2F2ZWRTdGF0ZVwiIH1cbiAgfCB7IHR5cGU6IFwiZmFpbExvYWRpbmdTYXZlZFN0YXRlXCIgfTtcblxuZXhwb3J0IGNvbnN0IHVzZVNlc3Npb25SZWR1Y2VyID0gKCkgPT4ge1xuICByZXR1cm4gdXNlUmVkdWNlcigoc3RhdGU6IFNlc3Npb25TdGF0ZSwgYWN0aW9uOiBTZXNzaW9uUmVkdWNlckFjdGlvbnMpOiBTZXNzaW9uU3RhdGUgPT4ge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJsb2FkU3RhdGVcIjoge1xuICAgICAgICBjb25zdCB7IHR5cGU6IF8sIC4uLmFjdGlvblBheWxvYWQgfSA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIC4uLmFjdGlvblBheWxvYWQgfTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJsb2NrXCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICB0b2tlbjogdW5kZWZpbmVkLFxuICAgICAgICAgIHBhc3N3b3JkSGFzaDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgaXNMb2NrZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwidW5sb2NrXCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICB0b2tlbjogYWN0aW9uLnRva2VuLFxuICAgICAgICAgIHBhc3N3b3JkSGFzaDogYWN0aW9uLnBhc3N3b3JkSGFzaCxcbiAgICAgICAgICBpc0xvY2tlZDogZmFsc2UsXG4gICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcImxvZ291dFwiOiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgdG9rZW46IHVuZGVmaW5lZCxcbiAgICAgICAgICBwYXNzd29yZEhhc2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwidmF1bHRUaW1lb3V0XCI6IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaW5pc2hMb2FkaW5nU2F2ZWRTdGF0ZVwiOiB7XG4gICAgICAgIGlmICghc3RhdGUudG9rZW4gfHwgIXN0YXRlLnBhc3N3b3JkSGFzaCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiB0b2tlbiwgcGFzc3dvcmRIYXNoXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGFzVG9rZW4gPSAhIXN0YXRlLnRva2VuO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgaXNMb2NrZWQ6ICFoYXNUb2tlbixcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGhhc1Rva2VuLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZhaWxMb2FkaW5nU2F2ZWRTdGF0ZVwiOiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBpc0xvY2tlZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgaW5pdGlhbFN0YXRlKTtcbn07XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgTE9DQUxfU1RPUkFHRV9LRVkgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgZXhlYyBhcyBjYWxsYmFja0V4ZWMsIFByb21pc2VXaXRoQ2hpbGQgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSBcInV0aWxcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24sIGRlYnVnTG9nIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcblxuY29uc3QgZXhlYyA9IHByb21pc2lmeShjYWxsYmFja0V4ZWMpO1xuXG5leHBvcnQgY29uc3QgU2Vzc2lvblN0b3JhZ2UgPSB7XG4gIGdldFNhdmVkU2Vzc2lvbjogKCkgPT4ge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KExPQ0FMX1NUT1JBR0VfS0VZLlNFU1NJT05fVE9LRU4pLFxuICAgICAgTG9jYWxTdG9yYWdlLmdldEl0ZW08c3RyaW5nPihMT0NBTF9TVE9SQUdFX0tFWS5SRVBST01QVF9IQVNIKSxcbiAgICAgIExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuTEFTVF9BQ1RJVklUWV9USU1FKSxcbiAgICAgIExvY2FsU3RvcmFnZS5nZXRJdGVtPHN0cmluZz4oTE9DQUxfU1RPUkFHRV9LRVkuVkFVTFRfTEFTVF9TVEFUVVMpLFxuICAgIF0pO1xuICB9LFxuICBjbGVhclNlc3Npb246IGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5TRVNTSU9OX1RPS0VOKSxcbiAgICAgIExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlJFUFJPTVBUX0hBU0gpLFxuICAgIF0pO1xuICB9LFxuICBzYXZlU2Vzc2lvbjogYXN5bmMgKHRva2VuOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSA9PiB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuU0VTU0lPTl9UT0tFTiwgdG9rZW4pLFxuICAgICAgTG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuUkVQUk9NUFRfSEFTSCwgcGFzc3dvcmRIYXNoKSxcbiAgICBdKTtcbiAgfSxcbiAgbG9nb3V0Q2xlYXJTZXNzaW9uOiBhc3luYyAoKSA9PiB7XG4gICAgLy8gY2xlYXIgZXZlcnl0aGluZyByZWxhdGVkIHRvIHRoZSBzZXNzaW9uXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgTG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkuU0VTU0lPTl9UT0tFTiksXG4gICAgICBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0tFWS5SRVBST01QVF9IQVNIKSxcbiAgICAgIExvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLkxBU1RfQUNUSVZJVFlfVElNRSksXG4gICAgXSk7XG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgY2hlY2tTeXN0ZW1Mb2NrZWRTaW5jZUxhc3RBY2Nlc3MgPSAobGFzdEFjdGl2aXR5VGltZTogRGF0ZSkgPT4ge1xuICByZXR1cm4gY2hlY2tTeXN0ZW1Mb2dUaW1lQWZ0ZXIobGFzdEFjdGl2aXR5VGltZSwgKHRpbWU6IG51bWJlcikgPT4gZ2V0TGFzdFN5c2xvZyh0aW1lLCBcImhhbmRsZVVubG9ja1Jlc3VsdFwiKSk7XG59O1xuZXhwb3J0IGNvbnN0IGNoZWNrU3lzdGVtU2xlcHRTaW5jZUxhc3RBY2Nlc3MgPSAobGFzdEFjdGl2aXR5VGltZTogRGF0ZSkgPT4ge1xuICByZXR1cm4gY2hlY2tTeXN0ZW1Mb2dUaW1lQWZ0ZXIobGFzdEFjdGl2aXR5VGltZSwgKHRpbWU6IG51bWJlcikgPT4gZ2V0TGFzdFN5c2xvZyh0aW1lLCBcInNsZWVwIDBcIikpO1xufTtcblxuZnVuY3Rpb24gZ2V0TGFzdFN5c2xvZyhob3VyczogbnVtYmVyLCBmaWx0ZXI6IHN0cmluZykge1xuICByZXR1cm4gZXhlYyhcbiAgICBgbG9nIHNob3cgLS1zdHlsZSBzeXNsb2cgLS1wcmVkaWNhdGUgXCJwcm9jZXNzID09ICdsb2dpbndpbmRvdydcIiAtLWluZm8gLS1sYXN0ICR7aG91cnN9aCB8IGdyZXAgXCIke2ZpbHRlcn1cIiB8IHRhaWwgLW4gMWBcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrU3lzdGVtTG9nVGltZUFmdGVyKFxuICB0aW1lOiBEYXRlLFxuICBnZXRMb2dFbnRyeTogKHRpbWVTcGFuSG91cnM6IG51bWJlcikgPT4gUHJvbWlzZVdpdGhDaGlsZDx7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9PlxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IGxhc3RTY3JlZW5Mb2NrVGltZSA9IGF3YWl0IGdldFN5c3RlbUxvZ1RpbWUoZ2V0TG9nRW50cnkpO1xuICBpZiAoIWxhc3RTY3JlZW5Mb2NrVGltZSkgcmV0dXJuIHRydWU7IC8vIGFzc3VtZSB0aGF0IGxvZyB3YXMgZm91bmQgZm9yIGltcHJvdmVkIHNhZmV0eVxuICByZXR1cm4gbmV3IERhdGUobGFzdFNjcmVlbkxvY2tUaW1lKS5nZXRUaW1lKCkgPiB0aW1lLmdldFRpbWUoKTtcbn1cblxuY29uc3QgZ2V0U3lzdGVtTG9nVGltZV9JTkNSRU1FTlRfSE9VUlMgPSAyO1xuY29uc3QgZ2V0U3lzdGVtTG9nVGltZV9NQVhfUkVUUklFUyA9IDU7XG4vKipcbiAqIFN0YXJ0cyBieSBjaGVja2luZyB0aGUgbGFzdCBob3VyIGFuZCBpbmNyZWFzZXMgdGhlIHRpbWUgc3BhbiBieSB7QGxpbmsgZ2V0U3lzdGVtTG9nVGltZV9JTkNSRU1FTlRfSE9VUlN9IGhvdXJzIG9uIGVhY2ggcmV0cnkuXG4gKiBcdTI2QTBcdUZFMEYgQ2FsbHMgdG8gdGhlIHN5c3RlbSBsb2cgYXJlIHZlcnkgc2xvdywgYW5kIGlmIHRoZSBzY3JlZW4gaGFzbid0IGJlZW4gbG9ja2VkIGZvciBzb21lIGhvdXJzLCBpdCBnZXRzIHNsb3dlci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0U3lzdGVtTG9nVGltZShcbiAgZ2V0TG9nRW50cnk6ICh0aW1lU3BhbkhvdXJzOiBudW1iZXIpID0+IFByb21pc2VXaXRoQ2hpbGQ8eyBzdGRvdXQ6IHN0cmluZzsgc3RkZXJyOiBzdHJpbmcgfT4sXG4gIHRpbWVTcGFuSG91cnMgPSAxLFxuICByZXRyeUF0dGVtcHQgPSAwXG4pOiBQcm9taXNlPERhdGUgfCB1bmRlZmluZWQ+IHtcbiAgdHJ5IHtcbiAgICBpZiAocmV0cnlBdHRlbXB0ID4gZ2V0U3lzdGVtTG9nVGltZV9NQVhfUkVUUklFUykge1xuICAgICAgZGVidWdMb2coXCJNYXggcmV0cnkgYXR0ZW1wdHMgcmVhY2hlZCB0byBnZXQgbGFzdCBzY3JlZW4gbG9jayB0aW1lXCIpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgZ2V0TG9nRW50cnkodGltZVNwYW5Ib3Vycyk7XG4gICAgY29uc3QgW2xvZ0RhdGUsIGxvZ1RpbWVdID0gc3Rkb3V0Py5zcGxpdChcIiBcIikgPz8gW107XG4gICAgaWYgKHN0ZGVyciB8fCAhbG9nRGF0ZSB8fCAhbG9nVGltZSkge1xuICAgICAgcmV0dXJuIGdldFN5c3RlbUxvZ1RpbWUoZ2V0TG9nRW50cnksIHRpbWVTcGFuSG91cnMgKyBnZXRTeXN0ZW1Mb2dUaW1lX0lOQ1JFTUVOVF9IT1VSUywgcmV0cnlBdHRlbXB0ICsgMSk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9nRnVsbERhdGUgPSBuZXcgRGF0ZShgJHtsb2dEYXRlfVQke2xvZ1RpbWV9YCk7XG4gICAgaWYgKCFsb2dGdWxsRGF0ZSB8fCBsb2dGdWxsRGF0ZS50b1N0cmluZygpID09PSBcIkludmFsaWQgRGF0ZVwiKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGxvZ0Z1bGxEYXRlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gZ2V0IGxhc3Qgc2NyZWVuIGxvY2sgdGltZVwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFjdGlvbiwgQ2xpcGJvYXJkLCBJY29uLCBUb2FzdCwgZW52aXJvbm1lbnQsIGdldFByZWZlcmVuY2VWYWx1ZXMsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHsgZXhlYyBhcyBleGVjV2l0aENhbGxiYWNrcyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwidXRpbFwiO1xuaW1wb3J0IHsgY2xpSW5mbyB9IGZyb20gXCJ+L2FwaS9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwifi91dGlscy9wbGF0Zm9ybVwiO1xuXG5jb25zdCBleGVjID0gcHJvbWlzaWZ5KGV4ZWNXaXRoQ2FsbGJhY2tzKTtcbmNvbnN0IHsgc3VwcG9ydFBhdGggfSA9IGVudmlyb25tZW50O1xuXG4vKiogc3RyaXAgb3V0IGFueSBzZW5zaXRpdmUgZGF0YSBmcm9tIHByZWZlcmVuY2VzICovXG5jb25zdCBnZXRTYWZlUHJlZmVyZW5jZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBjbGllbnRJZCxcbiAgICBjbGllbnRTZWNyZXQsXG4gICAgZmV0Y2hGYXZpY29ucyxcbiAgICBnZW5lcmF0ZVBhc3N3b3JkUXVpY2tBY3Rpb24sXG4gICAgcmVwcm9tcHRJZ25vcmVEdXJhdGlvbixcbiAgICBzZXJ2ZXJDZXJ0c1BhdGgsXG4gICAgc2VydmVyVXJsLFxuICAgIHNob3VsZENhY2hlVmF1bHRJdGVtcyxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZCxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrLFxuICAgIHRyYW5zaWVudENvcHlTZWFyY2gsXG4gICAgd2luZG93QWN0aW9uT25Db3B5LFxuICB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxBbGxQcmVmZXJlbmNlcz4oKTtcblxuICByZXR1cm4ge1xuICAgIGhhc19jbGllbnRJZDogISFjbGllbnRJZCxcbiAgICBoYXNfY2xpZW50U2VjcmV0OiAhIWNsaWVudFNlY3JldCxcbiAgICBmZXRjaEZhdmljb25zLFxuICAgIGdlbmVyYXRlUGFzc3dvcmRRdWlja0FjdGlvbixcbiAgICByZXByb21wdElnbm9yZUR1cmF0aW9uLFxuICAgIGhhc19zZXJ2ZXJDZXJ0c1BhdGg6ICEhc2VydmVyQ2VydHNQYXRoLFxuICAgIGhhc19zZXJ2ZXJVcmw6ICEhc2VydmVyVXJsLFxuICAgIHNob3VsZENhY2hlVmF1bHRJdGVtcyxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZCxcbiAgICB0cmFuc2llbnRDb3B5R2VuZXJhdGVQYXNzd29yZFF1aWNrLFxuICAgIHRyYW5zaWVudENvcHlTZWFyY2gsXG4gICAgd2luZG93QWN0aW9uT25Db3B5LFxuICB9O1xufTtcblxuY29uc3QgTkEgPSBcIk4vQVwiO1xuY29uc3QgdHJ5RXhlYyA9IGFzeW5jIChjb21tYW5kOiBzdHJpbmcsIHRyaW1MaW5lQnJlYWtzID0gdHJ1ZSkgPT4ge1xuICB0cnkge1xuICAgIGxldCBjbWQgPSBjb21tYW5kO1xuXG4gICAgaWYgKHBsYXRmb3JtID09PSBcIndpbmRvd3NcIikge1xuICAgICAgY21kID0gYHBvd2Vyc2hlbGwgLUNvbW1hbmQgXCIke2NvbW1hbmR9XCJgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbWQgPSBgUEFUSD1cIiRQQVRIOiR7ZGlybmFtZShwcm9jZXNzLmV4ZWNQYXRoKX1cIiAke2NvbW1hbmR9YDtcbiAgICB9XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IGV4ZWMoY21kLCB7IGVudjogeyBCSVRXQVJERU5DTElfQVBQREFUQV9ESVI6IHN1cHBvcnRQYXRoIH0gfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBzdGRvdXQudHJpbSgpO1xuICAgIGlmICh0cmltTGluZUJyZWFrcykgcmV0dXJuIHJlc3BvbnNlLnJlcGxhY2UoL1xcbnxcXHIvZywgXCJcIik7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhcHR1cmVFeGNlcHRpb24oYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZH1gLCBlcnJvcik7XG4gICAgcmV0dXJuIE5BO1xuICB9XG59O1xuXG5jb25zdCBnZXRCd0JpbkluZm8gPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpUGF0aFByZWYgPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzPigpLmNsaVBhdGg7XG4gICAgaWYgKGNsaVBhdGhQcmVmKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImN1c3RvbVwiLCBwYXRoOiBjbGlQYXRoUHJlZiB9O1xuICAgIH1cbiAgICBpZiAoY2xpSW5mby5wYXRoLmJpbiA9PT0gY2xpSW5mby5wYXRoLmRvd25sb2FkZWRCaW4pIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiZG93bmxvYWRlZFwiLCBwYXRoOiBjbGlJbmZvLnBhdGguZG93bmxvYWRlZEJpbiB9O1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcImluc3RhbGxlZFwiLCBwYXRoOiBjbGlJbmZvLnBhdGguaW5zdGFsbGVkQmluIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogTkEsIHBhdGg6IE5BIH07XG4gIH1cbn07XG5cbmNvbnN0IGdldEhvbWVicmV3SW5mbyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBsZXQgcGF0aCA9IFwiL29wdC9ob21lYnJldy9iaW4vYnJld1wiO1xuICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcGF0aCA9IFwiL3Vzci9sb2NhbC9iaW4vYnJld1wiO1xuICAgIGlmICghZXhpc3RzU3luYyhwYXRoKSkgcmV0dXJuIHsgYXJjaDogTkEsIHZlcnNpb246IE5BIH07XG5cbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCB0cnlFeGVjKGAke3BhdGh9IGNvbmZpZ2AsIGZhbHNlKTtcbiAgICBpZiAoY29uZmlnID09PSBOQSkgcmV0dXJuIHsgYXJjaDogTkEsIHZlcnNpb246IE5BIH07XG5cbiAgICBjb25zdCBhcmNoVmFsdWUgPSAvSE9NRUJSRVdfUFJFRklYOiAoLispLy5leGVjKGNvbmZpZyk/LlsxXSB8fCBOQTtcbiAgICBjb25zdCB2ZXJzaW9uID0gL0hPTUVCUkVXX1ZFUlNJT046ICguKykvLmV4ZWMoY29uZmlnKT8uWzFdIHx8IE5BO1xuICAgIGNvbnN0IGFyY2ggPSBhcmNoVmFsdWUgIT09IE5BID8gKGFyY2hWYWx1ZS5pbmNsdWRlcyhcIi9vcHQvaG9tZWJyZXdcIikgPyBcImFybTY0XCIgOiBcIng4Nl82NFwiKSA6IE5BO1xuXG4gICAgcmV0dXJuIHsgYXJjaCwgdmVyc2lvbiB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IGFyY2g6IE5BLCB2ZXJzaW9uOiBOQSB9O1xuICB9XG59O1xuXG5mdW5jdGlvbiBCdWdSZXBvcnRDb2xsZWN0RGF0YUFjdGlvbigpIHtcbiAgY29uc3QgY29sbGVjdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuQW5pbWF0ZWQsIFwiQ29sbGVjdGluZyBkYXRhLi4uXCIpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IGdldFNhZmVQcmVmZXJlbmNlcygpO1xuICAgICAgY29uc3QgYndJbmZvID0gZ2V0QndCaW5JbmZvKCk7XG4gICAgICBjb25zdCBbc3lzdGVtQXJjaCwgb3NWZXJzaW9uLCBvc0J1aWxkVmVyc2lvbiwgYndWZXJzaW9uXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgLi4uKHBsYXRmb3JtID09PSBcIm1hY29zXCJcbiAgICAgICAgICA/IFt0cnlFeGVjKFwidW5hbWUgLW1cIiksIHRyeUV4ZWMoXCJzd192ZXJzIC1wcm9kdWN0VmVyc2lvblwiKSwgdHJ5RXhlYyhcInN3X3ZlcnMgLWJ1aWxkVmVyc2lvblwiKV1cbiAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgdHJ5RXhlYyhcIihHZXQtQ2ltSW5zdGFuY2UgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5PU0FyY2hpdGVjdHVyZVwiKSxcbiAgICAgICAgICAgICAgdHJ5RXhlYyhcIihHZXQtQ2ltSW5zdGFuY2UgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5DYXB0aW9uXCIpLFxuICAgICAgICAgICAgICB0cnlFeGVjKFwiKEdldC1DaW1JbnN0YW5jZSBXaW4zMl9PcGVyYXRpbmdTeXN0ZW0pLlZlcnNpb25cIiksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgdHJ5RXhlYyhgJHtid0luZm8ucGF0aH0gLS12ZXJzaW9uYCksXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICAgICAgcmF5Y2FzdDoge1xuICAgICAgICAgIHZlcnNpb246IGVudmlyb25tZW50LnJheWNhc3RWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICBhcmNoOiBzeXN0ZW1BcmNoLFxuICAgICAgICAgIHZlcnNpb246IG9zVmVyc2lvbixcbiAgICAgICAgICBidWlsZFZlcnNpb246IG9zQnVpbGRWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBub2RlOiB7XG4gICAgICAgICAgYXJjaDogcHJvY2Vzcy5hcmNoLFxuICAgICAgICAgIHZlcnNpb246IHByb2Nlc3MudmVyc2lvbixcbiAgICAgICAgfSxcbiAgICAgICAgY2xpOiB7XG4gICAgICAgICAgdHlwZTogYndJbmZvLnR5cGUsXG4gICAgICAgICAgdmVyc2lvbjogYndWZXJzaW9uLFxuICAgICAgICB9LFxuICAgICAgICBwcmVmZXJlbmNlcyxcbiAgICAgIH07XG5cbiAgICAgIGlmIChwbGF0Zm9ybSA9PT0gXCJtYWNvc1wiKSB7XG4gICAgICAgIGNvbnN0IGJyZXdJbmZvID0gYXdhaXQgZ2V0SG9tZWJyZXdJbmZvKCk7XG4gICAgICAgIGRhdGEuaG9tZWJyZXcgPSB7XG4gICAgICAgICAgYXJjaDogYnJld0luZm8uYXJjaCxcbiAgICAgICAgICB2ZXJzaW9uOiBicmV3SW5mby52ZXJzaW9uLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBDbGlwYm9hcmQuY29weShKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XG4gICAgICB0b2FzdC5zdHlsZSA9IFRvYXN0LlN0eWxlLlN1Y2Nlc3M7XG4gICAgICB0b2FzdC50aXRsZSA9IFwiRGF0YSBjb3BpZWQgdG8gY2xpcGJvYXJkXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuRmFpbHVyZTtcbiAgICAgIHRvYXN0LnRpdGxlID0gXCJGYWlsZWQgdG8gY29sbGVjdCBidWcgcmVwb3J0IGRhdGFcIjtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29sbGVjdCBidWcgcmVwb3J0IGRhdGFcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gPEFjdGlvbiB0aXRsZT1cIkNvbGxlY3QgQnVnIFJlcG9ydCBEYXRhXCIgaWNvbj17SWNvbi5CdWd9IG9uQWN0aW9uPXtjb2xsZWN0RGF0YX0gLz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJ1Z1JlcG9ydENvbGxlY3REYXRhQWN0aW9uO1xuIiwgImltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IEJVR19SRVBPUlRfVVJMID1cbiAgXCJodHRwczovL2dpdGh1Yi5jb20vcmF5Y2FzdC9leHRlbnNpb25zL2lzc3Vlcy9uZXc/YXNzaWduZWVzPSZsYWJlbHM9ZXh0ZW5zaW9uJTJDYnVnJnRlbXBsYXRlPWV4dGVuc2lvbl9idWdfcmVwb3J0LnltbCZ0aXRsZT0lNUJCaXR3YXJkZW4lNUQrLi4uXCI7XG5cbmZ1bmN0aW9uIEJ1Z1JlcG9ydE9wZW5BY3Rpb24oKSB7XG4gIHJldHVybiA8QWN0aW9uLk9wZW5JbkJyb3dzZXIgdGl0bGU9XCJPcGVuIEJ1ZyBSZXBvcnRcIiB1cmw9e0JVR19SRVBPUlRfVVJMfSAvPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQnVnUmVwb3J0T3BlbkFjdGlvbjtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEFsZXJ0LCBDbGlwYm9hcmQsIEljb24sIFRvYXN0LCBjb25maXJtQWxlcnQsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGNhcHR1cmVkRXhjZXB0aW9ucyB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5cbmZ1bmN0aW9uIENvcHlSdW50aW1lRXJyb3JMb2coKSB7XG4gIGNvbnN0IGNvcHlFcnJvcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZXJyb3JTdHJpbmcgPSBjYXB0dXJlZEV4Y2VwdGlvbnMudG9TdHJpbmcoKTtcbiAgICBpZiAoZXJyb3JTdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gc2hvd1RvYXN0KFRvYXN0LlN0eWxlLlN1Y2Nlc3MsIFwiTm8gZXJyb3JzIHRvIGNvcHlcIik7XG4gICAgfVxuICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KGVycm9yU3RyaW5nKTtcbiAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuU3VjY2VzcywgXCJFcnJvcnMgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcbiAgICBhd2FpdCBjb25maXJtQWxlcnQoe1xuICAgICAgdGl0bGU6IFwiQmUgY2FyZWZ1bCB3aXRoIHRoaXMgaW5mb3JtYXRpb25cIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiUGxlYXNlIGJlIG1pbmRmdWwgb2Ygd2hlcmUgeW91IHNoYXJlIHRoaXMgZXJyb3IgbG9nLCBhcyBpdCBtYXkgY29udGFpbiBzZW5zaXRpdmUgaW5mb3JtYXRpb24uIEFsd2F5cyBhbmFseXplIGl0IGJlZm9yZSBzaGFyaW5nLlwiLFxuICAgICAgcHJpbWFyeUFjdGlvbjogeyB0aXRsZTogXCJHb3QgaXRcIiwgc3R5bGU6IEFsZXJ0LkFjdGlvblN0eWxlLkRlZmF1bHQgfSxcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBY3Rpb24gb25BY3Rpb249e2NvcHlFcnJvcnN9IHRpdGxlPVwiQ29weSBMYXN0IEVycm9yc1wiIGljb249e0ljb24uQ29weUNsaXBib2FyZH0gc3R5bGU9e0FjdGlvbi5TdHlsZS5SZWd1bGFyfSAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5UnVudGltZUVycm9yTG9nO1xuIiwgImltcG9ydCB7IEFjdGlvblBhbmVsIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgQnVnUmVwb3J0Q29sbGVjdERhdGFBY3Rpb24sIEJ1Z1JlcG9ydE9wZW5BY3Rpb24sIENvcHlSdW50aW1lRXJyb3JMb2cgfSBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnNcIjtcbmltcG9ydCB7IHVzZUNsaVZlcnNpb24gfSBmcm9tIFwifi91dGlscy9ob29rcy91c2VDbGlWZXJzaW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBEZWJ1Z2dpbmdCdWdSZXBvcnRpbmdBY3Rpb25TZWN0aW9uKCkge1xuICBjb25zdCBjbGlWZXJzaW9uID0gdXNlQ2xpVmVyc2lvbigpO1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9e2BEZWJ1Z2dpbmcgJiBCdWcgUmVwb3J0aW5nIChDTEkgdiR7Y2xpVmVyc2lvbn0pYH0+XG4gICAgICA8Q29weVJ1bnRpbWVFcnJvckxvZyAvPlxuICAgICAgPEJ1Z1JlcG9ydE9wZW5BY3Rpb24gLz5cbiAgICAgIDxCdWdSZXBvcnRDb2xsZWN0RGF0YUFjdGlvbiAvPlxuICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ0FDSEVfS0VZUyB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCJ+L3V0aWxzL2NhY2hlXCI7XG5pbXBvcnQgdXNlT25jZUVmZmVjdCBmcm9tIFwifi91dGlscy9ob29rcy91c2VPbmNlRWZmZWN0XCI7XG5cbmNvbnN0IGdldENsaVZlcnNpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHZlcnNpb24gPSBDYWNoZS5nZXQoQ0FDSEVfS0VZUy5DTElfVkVSU0lPTik7XG4gIGlmICh2ZXJzaW9uKSByZXR1cm4gcGFyc2VGbG9hdCh2ZXJzaW9uKTtcbiAgcmV0dXJuIC0xO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUNsaVZlcnNpb24gPSAoKSA9PiB7XG4gIGNvbnN0IFt2ZXJzaW9uLCBzZXRWZXJzaW9uXSA9IHVzZVN0YXRlPG51bWJlcj4oZ2V0Q2xpVmVyc2lvbik7XG5cbiAgdXNlT25jZUVmZmVjdCgoKSA9PiB7XG4gICAgQ2FjaGUuc3Vic2NyaWJlKChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgJiYga2V5ID09PSBDQUNIRV9LRVlTLkNMSV9WRVJTSU9OKSB7XG4gICAgICAgIHNldFZlcnNpb24ocGFyc2VGbG9hdCh2YWx1ZSkgfHwgLTEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdmVyc2lvbjtcbn07XG4iLCAiaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25QYW5lbCwgQ29sb3IsIEljb24sIHNob3dUb2FzdCwgVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBWQVVMVF9MT0NLX01FU1NBR0VTIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IHVzZUJpdHdhcmRlbiB9IGZyb20gXCJ+L2NvbnRleHQvYml0d2FyZGVuXCI7XG5pbXBvcnQgeyB1c2VWYXVsdENvbnRleHQgfSBmcm9tIFwifi9jb250ZXh0L3ZhdWx0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBWYXVsdEFjdGlvbnNTZWN0aW9uKCkge1xuICBjb25zdCB2YXVsdCA9IHVzZVZhdWx0Q29udGV4dCgpO1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcblxuICBjb25zdCBoYW5kbGVMb2NrVmF1bHQgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuQW5pbWF0ZWQsIFwiTG9ja2luZyBWYXVsdC4uLlwiLCBcIlBsZWFzZSB3YWl0XCIpO1xuICAgIGF3YWl0IGJpdHdhcmRlbi5sb2NrKHsgcmVhc29uOiBWQVVMVF9MT0NLX01FU1NBR0VTLk1BTlVBTCB9KTtcbiAgICBhd2FpdCB0b2FzdC5oaWRlKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTG9nb3V0VmF1bHQgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoeyB0aXRsZTogXCJMb2dnaW5nIE91dC4uLlwiLCBzdHlsZTogVG9hc3QuU3R5bGUuQW5pbWF0ZWQgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGJpdHdhcmRlbi5sb2dvdXQoKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBsb2dvdXRcIjtcbiAgICAgIHRvYXN0LnN0eWxlID0gVG9hc3QuU3R5bGUuRmFpbHVyZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbiB0aXRsZT1cIlZhdWx0IEFjdGlvbnNcIj5cbiAgICAgIDxBY3Rpb25cbiAgICAgICAgdGl0bGU9XCJTeW5jIFZhdWx0XCJcbiAgICAgICAgc2hvcnRjdXQ9e3sgbWFjT1M6IHsga2V5OiBcInJcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIl0gfSwgd2luZG93czogeyBrZXk6IFwiclwiLCBtb2RpZmllcnM6IFtcImFsdFwiXSB9IH19XG4gICAgICAgIGljb249e0ljb24uQXJyb3dDbG9ja3dpc2V9XG4gICAgICAgIG9uQWN0aW9uPXt2YXVsdC5zeW5jSXRlbXN9XG4gICAgICAvPlxuICAgICAgPEFjdGlvblxuICAgICAgICBpY29uPXt7IHNvdXJjZTogXCJzZl9zeW1ib2xzX2xvY2suc3ZnXCIsIHRpbnRDb2xvcjogQ29sb3IuUHJpbWFyeVRleHQgfX0gLy8gRG9lcyBub3QgaW1tZWRpYXRlbHkgZm9sbG93IHRoZW1lXG4gICAgICAgIHRpdGxlPVwiTG9jayBWYXVsdFwiXG4gICAgICAgIHNob3J0Y3V0PXt7XG4gICAgICAgICAgbWFjT1M6IHsga2V5OiBcImxcIiwgbW9kaWZpZXJzOiBbXCJvcHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICAgIHdpbmRvd3M6IHsga2V5OiBcImxcIiwgbW9kaWZpZXJzOiBbXCJhbHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICB9fVxuICAgICAgICBvbkFjdGlvbj17aGFuZGxlTG9ja1ZhdWx0fVxuICAgICAgLz5cbiAgICAgIDxBY3Rpb24gc3R5bGU9e0FjdGlvbi5TdHlsZS5EZXN0cnVjdGl2ZX0gdGl0bGU9XCJMb2dvdXRcIiBpY29uPXtJY29uLkxvZ291dH0gb25BY3Rpb249e2hhbmRsZUxvZ291dFZhdWx0fSAvPlxuICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBnZXRQcmVmZXJlbmNlVmFsdWVzLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VNZW1vLCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VWYXVsdEl0ZW1QdWJsaXNoZXIgfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IHVzZUJpdHdhcmRlbiB9IGZyb20gXCJ+L2NvbnRleHQvYml0d2FyZGVuXCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSBcIn4vY29udGV4dC9zZXNzaW9uXCI7XG5pbXBvcnQgeyBGb2xkZXIsIEl0ZW0sIFZhdWx0IH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHVzZVZhdWx0Q2FjaGluZyBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZVZhdWx0Q2FjaGluZ1wiO1xuaW1wb3J0IHsgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yLCBnZXREaXNwbGF5YWJsZUVycm9yTWVzc2FnZSB9IGZyb20gXCJ+L3V0aWxzL2Vycm9yc1wiO1xuaW1wb3J0IHVzZU9uY2VFZmZlY3QgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlT25jZUVmZmVjdFwiO1xuaW1wb3J0IHsgdXNlQ2FjaGVkU3RhdGUgfSBmcm9tIFwiQHJheWNhc3QvdXRpbHNcIjtcbmltcG9ydCB7IENBQ0hFX0tFWVMsIEZPTERFUl9PUFRJT05TIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcblxuZXhwb3J0IHR5cGUgVmF1bHRTdGF0ZSA9IFZhdWx0ICYge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBWYXVsdENvbnRleHRUeXBlID0gVmF1bHRTdGF0ZSAmIHtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgc3luY0l0ZW1zOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkSXRlbXM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGN1cnJlbnRGb2xkZXJJZDogTnVsbGFibGU8c3RyaW5nPjtcbiAgc2V0Q3VycmVudEZvbGRlcjogKGZvbGRlck9ySWQ6IE51bGxhYmxlPHN0cmluZyB8IEZvbGRlcj4pID0+IHZvaWQ7XG4gIHVwZGF0ZVN0YXRlOiAobmV4dDogUmVhY3QuU2V0U3RhdGVBY3Rpb248VmF1bHRTdGF0ZT4pID0+IHZvaWQ7XG59O1xuXG5jb25zdCBWYXVsdENvbnRleHQgPSBjcmVhdGVDb250ZXh0PFZhdWx0Q29udGV4dFR5cGUgfCBudWxsPihudWxsKTtcblxuZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCk6IFZhdWx0U3RhdGUge1xuICByZXR1cm4geyBpdGVtczogW10sIGZvbGRlcnM6IFtdLCBpc0xvYWRpbmc6IHRydWUgfTtcbn1cblxuZXhwb3J0IHR5cGUgVmF1bHRQcm92aWRlclByb3BzID0ge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xufTtcblxuY29uc3QgeyBzeW5jT25MYXVuY2ggfSA9IGdldFByZWZlcmVuY2VWYWx1ZXM8QWxsUHJlZmVyZW5jZXM+KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBWYXVsdFByb3ZpZGVyKHByb3BzOiBWYXVsdFByb3ZpZGVyUHJvcHMpIHtcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcHJvcHM7XG5cbiAgY29uc3Qgc2Vzc2lvbiA9IHVzZVNlc3Npb24oKTtcbiAgY29uc3QgYml0d2FyZGVuID0gdXNlQml0d2FyZGVuKCk7XG4gIGNvbnN0IHB1Ymxpc2hJdGVtcyA9IHVzZVZhdWx0SXRlbVB1Ymxpc2hlcigpO1xuICBjb25zdCB7IGdldENhY2hlZFZhdWx0LCBjYWNoZVZhdWx0IH0gPSB1c2VWYXVsdENhY2hpbmcoKTtcblxuICBjb25zdCBbY3VycmVudEZvbGRlcklkLCBzZXRDdXJyZW50Rm9sZGVySWRdID0gdXNlQ2FjaGVkU3RhdGU8TnVsbGFibGU8c3RyaW5nPj4oQ0FDSEVfS0VZUy5DVVJSRU5UX0ZPTERFUl9JRCwgbnVsbCk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlUmVkdWNlcihcbiAgICAocHJldmlvdXM6IFZhdWx0U3RhdGUsIG5leHQ6IFBhcnRpYWw8VmF1bHRTdGF0ZT4pID0+ICh7IC4uLnByZXZpb3VzLCAuLi5uZXh0IH0pLFxuICAgIHsgLi4uZ2V0SW5pdGlhbFN0YXRlKCksIC4uLmdldENhY2hlZFZhdWx0KCkgfVxuICApO1xuXG4gIHVzZU9uY2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzeW5jT25MYXVuY2gpIHtcbiAgICAgIHZvaWQgc3luY0l0ZW1zKHsgaXNJbml0aWFsOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2b2lkIGxvYWRJdGVtcygpO1xuICAgIH1cbiAgfSwgc2Vzc2lvbi5hY3RpdmUgJiYgc2Vzc2lvbi50b2tlbik7XG5cbiAgYXN5bmMgZnVuY3Rpb24gbG9hZEl0ZW1zKCkge1xuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcblxuICAgICAgbGV0IGl0ZW1zOiBJdGVtW10gPSBbXTtcbiAgICAgIGxldCBmb2xkZXJzOiBGb2xkZXJbXSA9IFtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2l0ZW1zUmVzdWx0LCBmb2xkZXJzUmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtiaXR3YXJkZW4ubGlzdEl0ZW1zKCksIGJpdHdhcmRlbi5saXN0Rm9sZGVycygpXSk7XG4gICAgICAgIGlmIChpdGVtc1Jlc3VsdC5lcnJvcikgdGhyb3cgaXRlbXNSZXN1bHQuZXJyb3I7XG4gICAgICAgIGlmIChmb2xkZXJzUmVzdWx0LmVycm9yKSB0aHJvdyBmb2xkZXJzUmVzdWx0LmVycm9yO1xuICAgICAgICBpdGVtcyA9IGl0ZW1zUmVzdWx0LnJlc3VsdDtcbiAgICAgICAgZm9sZGVycyA9IGZvbGRlcnNSZXN1bHQucmVzdWx0O1xuICAgICAgICBpdGVtcy5zb3J0KGZhdm9yaXRlSXRlbXNGaXJzdFNvcnRlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBwdWJsaXNoSXRlbXMobmV3IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcigpKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHsgaXRlbXMsIGZvbGRlcnMgfSk7XG4gICAgICBwdWJsaXNoSXRlbXMoaXRlbXMpO1xuICAgICAgY2FjaGVWYXVsdChpdGVtcywgZm9sZGVycyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBsb2FkIHZhdWx0IGl0ZW1zXCIsIGdldERpc3BsYXlhYmxlRXJyb3JNZXNzYWdlKGVycm9yKSk7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGxvYWQgdmF1bHQgaXRlbXNcIiwgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gc3luY0l0ZW1zKHByb3BzPzogeyBpc0luaXRpYWw/OiBib29sZWFuIH0pIHtcbiAgICBjb25zdCB7IGlzSW5pdGlhbCA9IGZhbHNlIH0gPSBwcm9wcyA/PyB7fTtcblxuICAgIGNvbnN0IHRvYXN0ID0gYXdhaXQgc2hvd1RvYXN0KHtcbiAgICAgIHRpdGxlOiBcIlN5bmNpbmcgVmF1bHQuLi5cIixcbiAgICAgIG1lc3NhZ2U6IGlzSW5pdGlhbCA/IFwiQmFja2dyb3VuZCBUYXNrXCIgOiB1bmRlZmluZWQsXG4gICAgICBzdHlsZTogVG9hc3QuU3R5bGUuQW5pbWF0ZWQsXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGJpdHdhcmRlbi5zeW5jKCk7XG4gICAgICBhd2FpdCBsb2FkSXRlbXMoKTtcbiAgICAgIGF3YWl0IHRvYXN0LmhpZGUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgYml0d2FyZGVuLmxvZ291dCgpO1xuICAgICAgdG9hc3Quc3R5bGUgPSBUb2FzdC5TdHlsZS5GYWlsdXJlO1xuICAgICAgdG9hc3QudGl0bGUgPSBcIkZhaWxlZCB0byBzeW5jIHZhdWx0XCI7XG4gICAgICB0b2FzdC5tZXNzYWdlID0gZ2V0RGlzcGxheWFibGVFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEN1cnJlbnRGb2xkZXIoZm9sZGVyT3JJZDogTnVsbGFibGU8c3RyaW5nIHwgRm9sZGVyPikge1xuICAgIHNldEN1cnJlbnRGb2xkZXJJZCh0eXBlb2YgZm9sZGVyT3JJZCA9PT0gXCJzdHJpbmdcIiA/IGZvbGRlck9ySWQgOiBmb2xkZXJPcklkPy5pZCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVTdGF0ZShuZXh0OiBSZWFjdC5TZXRTdGF0ZUFjdGlvbjxWYXVsdFN0YXRlPikge1xuICAgIGNvbnN0IG5ld1N0YXRlID0gdHlwZW9mIG5leHQgPT09IFwiZnVuY3Rpb25cIiA/IG5leHQoc3RhdGUpIDogbmV4dDtcbiAgICBzZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgY2FjaGVWYXVsdChuZXdTdGF0ZS5pdGVtcywgbmV3U3RhdGUuZm9sZGVycyk7XG4gIH1cblxuICBjb25zdCBtZW1vaXplZFZhbHVlOiBWYXVsdENvbnRleHRUeXBlID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBpdGVtczogZmlsdGVySXRlbXNCeUZvbGRlcklkKHN0YXRlLml0ZW1zLCBjdXJyZW50Rm9sZGVySWQpLFxuICAgICAgaXNFbXB0eTogc3RhdGUuaXRlbXMubGVuZ3RoID09IDAsXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyB8fCBzZXNzaW9uLmlzTG9hZGluZyxcbiAgICAgIGN1cnJlbnRGb2xkZXJJZCxcbiAgICAgIHN5bmNJdGVtcyxcbiAgICAgIGxvYWRJdGVtcyxcbiAgICAgIHNldEN1cnJlbnRGb2xkZXIsXG4gICAgICB1cGRhdGVTdGF0ZSxcbiAgICB9KSxcbiAgICBbc3RhdGUsIHNlc3Npb24uaXNMb2FkaW5nLCBjdXJyZW50Rm9sZGVySWQsIHN5bmNJdGVtcywgbG9hZEl0ZW1zLCBzZXRDdXJyZW50Rm9sZGVyLCB1cGRhdGVTdGF0ZV1cbiAgKTtcblxuICByZXR1cm4gPFZhdWx0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17bWVtb2l6ZWRWYWx1ZX0+e2NoaWxkcmVufTwvVmF1bHRDb250ZXh0LlByb3ZpZGVyPjtcbn1cblxuZnVuY3Rpb24gZmlsdGVySXRlbXNCeUZvbGRlcklkKGl0ZW1zOiBJdGVtW10sIGZvbGRlcklkOiBOdWxsYWJsZTxzdHJpbmc+KSB7XG4gIGlmICghZm9sZGVySWQgfHwgZm9sZGVySWQgPT09IEZPTERFUl9PUFRJT05TLkFMTCkgcmV0dXJuIGl0ZW1zO1xuICBpZiAoZm9sZGVySWQgPT09IEZPTERFUl9PUFRJT05TLk5PX0ZPTERFUikgcmV0dXJuIGl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5mb2xkZXJJZCA9PT0gbnVsbCk7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZm9sZGVySWQgPT09IGZvbGRlcklkKTtcbn1cblxuZnVuY3Rpb24gZmF2b3JpdGVJdGVtc0ZpcnN0U29ydGVyKGE6IEl0ZW0sIGI6IEl0ZW0pIHtcbiAgaWYgKGEuZmF2b3JpdGUgJiYgYi5mYXZvcml0ZSkgcmV0dXJuIDA7XG4gIHJldHVybiBhLmZhdm9yaXRlID8gLTEgOiAxO1xufVxuXG5leHBvcnQgY29uc3QgdXNlVmF1bHRDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdENvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlVmF1bHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFZhdWx0UHJvdmlkZXJcIik7XG4gIH1cblxuICByZXR1cm4gY29udGV4dDtcbn07XG4iLCAiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgTXV0YWJsZVJlZk9iamVjdCwgUmVhY3ROb2RlLCB1c2VDb250ZXh0LCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yIH0gZnJvbSBcIn4vdXRpbHMvZXJyb3JzXCI7XG5cbmV4cG9ydCB0eXBlIEl0ZW1MaXN0ZW5lciA9IChpdGVtOiBJdGVtIHwgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yKSA9PiB2b2lkO1xuXG5leHBvcnQgdHlwZSBWYXVsdExpc3RlbmVyc0NvbnRleHRUeXBlID0ge1xuICBsaXN0ZW5lcnM6IE11dGFibGVSZWZPYmplY3Q8TWFwPHN0cmluZywgSXRlbUxpc3RlbmVyPj47XG4gIHN1YnNjcmliZUl0ZW06IChpdGVtSWQ6IHN0cmluZywgbGlzdGVuZXI6IEl0ZW1MaXN0ZW5lcikgPT4gKCkgPT4gdm9pZDtcbiAgcHVibGlzaEl0ZW1zOiAoaXRlbXM6IEl0ZW1bXSB8IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcikgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFZhdWx0TGlzdGVuZXJzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8VmF1bHRMaXN0ZW5lcnNDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xuXG5jb25zdCBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyID0gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pID0+IHtcbiAgY29uc3QgbGlzdGVuZXJzID0gdXNlUmVmKG5ldyBNYXA8c3RyaW5nLCBJdGVtTGlzdGVuZXI+KCkpO1xuXG4gIGNvbnN0IHB1Ymxpc2hJdGVtcyA9IChpdGVtc09yRXJyb3I6IEl0ZW1bXSB8IEZhaWxlZFRvTG9hZFZhdWx0SXRlbXNFcnJvcikgPT4ge1xuICAgIGlmIChpdGVtc09yRXJyb3IgaW5zdGFuY2VvZiBGYWlsZWRUb0xvYWRWYXVsdEl0ZW1zRXJyb3IpIHtcbiAgICAgIGxpc3RlbmVycy5jdXJyZW50LmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihpdGVtc09yRXJyb3IpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdGVuZXJzLmN1cnJlbnQuZm9yRWFjaCgobGlzdGVuZXIsIGl0ZW1JZCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNPckVycm9yLmZpbmQoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IGl0ZW1JZCk7XG4gICAgICAgIGlmIChpdGVtKSBsaXN0ZW5lcihpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdWJzY3JpYmVJdGVtID0gKGl0ZW1JZDogc3RyaW5nLCBsaXN0ZW5lcjogSXRlbUxpc3RlbmVyKSA9PiB7XG4gICAgbGlzdGVuZXJzLmN1cnJlbnQuc2V0KGl0ZW1JZCwgbGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuY3VycmVudC5kZWxldGUoaXRlbUlkKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IG1lbW9pemVkVmFsdWUgPSB1c2VNZW1vKCgpID0+ICh7IGxpc3RlbmVycywgcHVibGlzaEl0ZW1zLCBzdWJzY3JpYmVJdGVtIH0pLCBbXSk7XG5cbiAgcmV0dXJuIDxWYXVsdExpc3RlbmVyc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e21lbW9pemVkVmFsdWV9PntjaGlsZHJlbn08L1ZhdWx0TGlzdGVuZXJzQ29udGV4dC5Qcm92aWRlcj47XG59O1xuXG5leHBvcnQgY29uc3QgdXNlVmF1bHRJdGVtUHVibGlzaGVyID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdExpc3RlbmVyc0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VWYXVsdEl0ZW1QdWJsaXNoZXIgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFZhdWx0TGlzdGVuZXJzUHJvdmlkZXJcIik7XG5cbiAgcmV0dXJuIGNvbnRleHQucHVibGlzaEl0ZW1zO1xufTtcblxuLyoqIEFsbG93cyB5b3UgdG8gc3Vic2NyaWJlIHRvIGEgc3BlY2lmaWMgaXRlbSBhbmQgZ2V0IG5vdGlmaWVkIHdoZW4gaXQgY2hhbmdlcy4gKi9cbmV4cG9ydCBjb25zdCB1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChWYXVsdExpc3RlbmVyc0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBWYXVsdExpc3RlbmVyc1Byb3ZpZGVyXCIpO1xuXG4gIHJldHVybiAoaXRlbUlkOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgdGltZW91dElkOiBOb2RlSlMuVGltZW91dDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxJdGVtPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNvbnRleHQuc3Vic2NyaWJlSXRlbShpdGVtSWQsIChpdGVtT3JFcnJvcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgaWYgKGl0ZW1PckVycm9yIGluc3RhbmNlb2YgRmFpbGVkVG9Mb2FkVmF1bHRJdGVtc0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBpdGVtT3JFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzb2x2ZShpdGVtT3JFcnJvcik7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICByZWplY3QobmV3IFN1YnNjcmliZXJUaW1lb3V0RXJyb3IoKSk7XG4gICAgICB9LCAxNTAwMCk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5jbGFzcyBTdWJzY3JpYmVyVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlRpbWVkIG91dCB3YWl0aW5nIGZvciBpdGVtXCIpO1xuICAgIHRoaXMubmFtZSA9IFwiU3Vic2NyaWJlclRpbWVvdXRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhdWx0TGlzdGVuZXJzUHJvdmlkZXI7XG4iLCAiaW1wb3J0IHsgZ2V0UHJlZmVyZW5jZVZhbHVlcyB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHByZXBhcmVGb2xkZXJzRm9yQ2FjaGUsIHByZXBhcmVJdGVtc0ZvckNhY2hlIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy9jYWNoaW5nXCI7XG5pbXBvcnQgeyBDQUNIRV9LRVlTIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IEZvbGRlciwgSXRlbSwgVmF1bHQgfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tIFwifi91dGlscy9jYWNoZVwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyB1c2VDb250ZW50RW5jcnlwdG9yIH0gZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlQ29udGVudEVuY3J5cHRvclwiO1xuaW1wb3J0IHVzZU9uY2VFZmZlY3QgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlT25jZUVmZmVjdFwiO1xuXG5mdW5jdGlvbiB1c2VWYXVsdENhY2hpbmcoKSB7XG4gIGNvbnN0IHsgZW5jcnlwdCwgZGVjcnlwdCB9ID0gdXNlQ29udGVudEVuY3J5cHRvcigpO1xuICBjb25zdCBpc0NhY2hpbmdFbmFibGUgPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzLlNlYXJjaD4oKS5zaG91bGRDYWNoZVZhdWx0SXRlbXM7XG5cbiAgdXNlT25jZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gdXNlcnMgdGhhdCBvcHQgb3V0IG9mIGNhY2hpbmcgcHJvYmFibHkgd2FudCB0byBkZWxldGUgYW55IGNhY2hlZCBkYXRhXG4gICAgaWYgKCFDYWNoZS5pc0VtcHR5KSBDYWNoZS5jbGVhcigpO1xuICB9LCAhaXNDYWNoaW5nRW5hYmxlKTtcblxuICBjb25zdCBnZXRDYWNoZWRWYXVsdCA9ICgpOiBWYXVsdCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaXNDYWNoaW5nRW5hYmxlKSB0aHJvdyBuZXcgVmF1bHRDYWNoaW5nTm9FbmFibGVkRXJyb3IoKTtcblxuICAgICAgY29uc3QgY2FjaGVkSXYgPSBDYWNoZS5nZXQoQ0FDSEVfS0VZUy5JVik7XG4gICAgICBjb25zdCBjYWNoZWRFbmNyeXB0ZWRWYXVsdCA9IENhY2hlLmdldChDQUNIRV9LRVlTLlZBVUxUKTtcbiAgICAgIGlmICghY2FjaGVkSXYgfHwgIWNhY2hlZEVuY3J5cHRlZFZhdWx0KSB0aHJvdyBuZXcgVmF1bHRDYWNoaW5nTm9FbmFibGVkRXJyb3IoKTtcblxuICAgICAgY29uc3QgZGVjcnlwdGVkVmF1bHQgPSBkZWNyeXB0KGNhY2hlZEVuY3J5cHRlZFZhdWx0LCBjYWNoZWRJdik7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZTxWYXVsdD4oZGVjcnlwdGVkVmF1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yKSkge1xuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGRlY3J5cHQgY2FjaGVkIHZhdWx0XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGl0ZW1zOiBbXSwgZm9sZGVyczogW10gfTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2FjaGVWYXVsdCA9IChpdGVtczogSXRlbVtdLCBmb2xkZXJzOiBGb2xkZXJbXSk6IHZvaWQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWlzQ2FjaGluZ0VuYWJsZSkgdGhyb3cgbmV3IFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yKCk7XG5cbiAgICAgIGNvbnN0IHZhdWx0VG9FbmNyeXB0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpdGVtczogcHJlcGFyZUl0ZW1zRm9yQ2FjaGUoaXRlbXMpLFxuICAgICAgICBmb2xkZXJzOiBwcmVwYXJlRm9sZGVyc0ZvckNhY2hlKGZvbGRlcnMpLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmNyeXB0ZWRWYXVsdCA9IGVuY3J5cHQodmF1bHRUb0VuY3J5cHQpO1xuICAgICAgQ2FjaGUuc2V0KENBQ0hFX0tFWVMuVkFVTFQsIGVuY3J5cHRlZFZhdWx0LmNvbnRlbnQpO1xuICAgICAgQ2FjaGUuc2V0KENBQ0hFX0tFWVMuSVYsIGVuY3J5cHRlZFZhdWx0Lml2KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBWYXVsdENhY2hpbmdOb0VuYWJsZWRFcnJvcikpIHtcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjYWNoZSB2YXVsdFwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7IGdldENhY2hlZFZhdWx0LCBjYWNoZVZhdWx0IH07XG59XG5cbmNsYXNzIFZhdWx0Q2FjaGluZ05vRW5hYmxlZEVycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGRlZmF1bHQgdXNlVmF1bHRDYWNoaW5nO1xuIiwgImltcG9ydCB7IFNFTlNJVElWRV9WQUxVRV9QTEFDRUhPTERFUiB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBGb2xkZXIsIElkZW50aXR5VGl0bGUsIEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZUl0ZW1zRm9yQ2FjaGUoaXRlbXM6IEl0ZW1bXSk6IEl0ZW1bXSB7XG4gIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+ICh7XG4gICAgb2JqZWN0OiBpdGVtLm9iamVjdCxcbiAgICBpZDogaXRlbS5pZCxcbiAgICBvcmdhbml6YXRpb25JZDogaXRlbS5vcmdhbml6YXRpb25JZCxcbiAgICBmb2xkZXJJZDogaXRlbS5mb2xkZXJJZCxcbiAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgbmFtZTogaXRlbS5uYW1lLFxuICAgIHJldmlzaW9uRGF0ZTogaXRlbS5yZXZpc2lvbkRhdGUsXG4gICAgY3JlYXRpb25EYXRlOiBpdGVtLmNyZWF0aW9uRGF0ZSxcbiAgICBkZWxldGVkRGF0ZTogaXRlbS5kZWxldGVkRGF0ZSxcbiAgICBmYXZvcml0ZTogaXRlbS5mYXZvcml0ZSxcbiAgICByZXByb21wdDogaXRlbS5yZXByb21wdCxcbiAgICBjb2xsZWN0aW9uSWRzOiBpdGVtLmNvbGxlY3Rpb25JZHMsXG4gICAgc2VjdXJlTm90ZTogaXRlbS5zZWN1cmVOb3RlID8geyB0eXBlOiBpdGVtLnNlY3VyZU5vdGUudHlwZSB9IDogdW5kZWZpbmVkLFxuICAgIC8vIHNlbnNpdGl2ZSBkYXRhIGJlbG93XG4gICAgZmllbGRzOiBjbGVhbkZpZWxkcyhpdGVtLmZpZWxkcyksXG4gICAgbG9naW46IGNsZWFuTG9naW4oaXRlbS5sb2dpbiksXG4gICAgaWRlbnRpdHk6IGNsZWFuSWRlbnRpdHkoaXRlbS5pZGVudGl0eSksXG4gICAgY2FyZDogY2xlYW5DYXJkKGl0ZW0uY2FyZCksXG4gICAgcGFzc3dvcmRIaXN0b3J5OiBjbGVhblBhc3N3b3JkSGlzdG9yeShpdGVtLnBhc3N3b3JkSGlzdG9yeSksXG4gICAgbm90ZXM6IGhpZGVJZkRlZmluZWQoaXRlbS5ub3RlcyksXG4gICAgc3NoS2V5OiBjbGVhblNzaEtleShpdGVtLnNzaEtleSksXG4gIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVGb2xkZXJzRm9yQ2FjaGUoZm9sZGVyczogRm9sZGVyW10pOiBGb2xkZXJbXSB7XG4gIHJldHVybiBmb2xkZXJzLm1hcCgoZm9sZGVyKSA9PiAoeyBvYmplY3Q6IGZvbGRlci5vYmplY3QsIGlkOiBmb2xkZXIuaWQsIG5hbWU6IGZvbGRlci5uYW1lIH0pKTtcbn1cblxuZnVuY3Rpb24gY2xlYW5GaWVsZHMoZmllbGRzOiBJdGVtW1wiZmllbGRzXCJdKTogSXRlbVtcImZpZWxkc1wiXSB7XG4gIHJldHVybiBmaWVsZHM/Lm1hcCgoZmllbGQpID0+ICh7XG4gICAgbmFtZTogZmllbGQubmFtZSwgLy8gbmVjZXNzYXJ5IGZvciBkaXNwbGF5XG4gICAgdmFsdWU6IGhpZGVJZkRlZmluZWQoZmllbGQudmFsdWUpLFxuICAgIHR5cGU6IGZpZWxkLnR5cGUsXG4gICAgbGlua2VkSWQ6IGZpZWxkLmxpbmtlZElkLFxuICB9KSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFuTG9naW4obG9naW46IEl0ZW1bXCJsb2dpblwiXSk6IEl0ZW1bXCJsb2dpblwiXSB7XG4gIGlmICghbG9naW4pIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IGxvZ2luLnVzZXJuYW1lLCAvLyBuZWNlc3NhcnkgZm9yIGRpc3BsYXlcbiAgICB1cmlzOiBsb2dpbi51cmlzLFxuICAgIHBhc3N3b3JkOiBoaWRlSWZEZWZpbmVkKGxvZ2luLnBhc3N3b3JkKSxcbiAgICBwYXNzd29yZFJldmlzaW9uRGF0ZTogaGlkZUlmRGVmaW5lZChsb2dpbi5wYXNzd29yZFJldmlzaW9uRGF0ZSksXG4gICAgdG90cDogaGlkZUlmRGVmaW5lZChsb2dpbi50b3RwKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5JZGVudGl0eShpZGVudGl0eTogSXRlbVtcImlkZW50aXR5XCJdKTogSXRlbVtcImlkZW50aXR5XCJdIHtcbiAgaWYgKCFpZGVudGl0eSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS50aXRsZSkgYXMgSWRlbnRpdHlUaXRsZSB8IG51bGwsXG4gICAgZmlyc3ROYW1lOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmZpcnN0TmFtZSksXG4gICAgbWlkZGxlTmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5taWRkbGVOYW1lKSxcbiAgICBsYXN0TmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5sYXN0TmFtZSksXG4gICAgYWRkcmVzczE6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuYWRkcmVzczEpLFxuICAgIGFkZHJlc3MyOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmFkZHJlc3MyKSxcbiAgICBhZGRyZXNzMzogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5hZGRyZXNzMyksXG4gICAgY2l0eTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5jaXR5KSxcbiAgICBzdGF0ZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5zdGF0ZSksXG4gICAgcG9zdGFsQ29kZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS5wb3N0YWxDb2RlKSxcbiAgICBjb3VudHJ5OiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LmNvdW50cnkpLFxuICAgIGNvbXBhbnk6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuY29tcGFueSksXG4gICAgZW1haWw6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuZW1haWwpLFxuICAgIHBob25lOiBoaWRlSWZEZWZpbmVkKGlkZW50aXR5LnBob25lKSxcbiAgICBzc246IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkuc3NuKSxcbiAgICB1c2VybmFtZTogaGlkZUlmRGVmaW5lZChpZGVudGl0eS51c2VybmFtZSksXG4gICAgcGFzc3BvcnROdW1iZXI6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkucGFzc3BvcnROdW1iZXIpLFxuICAgIGxpY2Vuc2VOdW1iZXI6IGhpZGVJZkRlZmluZWQoaWRlbnRpdHkubGljZW5zZU51bWJlciksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsZWFuQ2FyZChjYXJkOiBJdGVtW1wiY2FyZFwiXSk6IEl0ZW1bXCJjYXJkXCJdIHtcbiAgaWYgKCFjYXJkKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4ge1xuICAgIGJyYW5kOiBjYXJkLmJyYW5kLFxuICAgIGNhcmRob2xkZXJOYW1lOiBoaWRlSWZEZWZpbmVkKGNhcmQuY2FyZGhvbGRlck5hbWUpLFxuICAgIG51bWJlcjogaGlkZUlmRGVmaW5lZChjYXJkLm51bWJlciksXG4gICAgZXhwTW9udGg6IGhpZGVJZkRlZmluZWQoY2FyZC5leHBNb250aCksXG4gICAgZXhwWWVhcjogaGlkZUlmRGVmaW5lZChjYXJkLmV4cFllYXIpLFxuICAgIGNvZGU6IGhpZGVJZkRlZmluZWQoY2FyZC5jb2RlKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5QYXNzd29yZEhpc3RvcnkocGFzc3dvcmRIaXN0b3J5SXRlbXM6IEl0ZW1bXCJwYXNzd29yZEhpc3RvcnlcIl0pOiBJdGVtW1wicGFzc3dvcmRIaXN0b3J5XCJdIHtcbiAgcmV0dXJuIHBhc3N3b3JkSGlzdG9yeUl0ZW1zPy5tYXAoKHBhc3N3b3JkSGlzdG9yeSkgPT4gKHtcbiAgICBwYXNzd29yZDogaGlkZUlmRGVmaW5lZChwYXNzd29yZEhpc3RvcnkucGFzc3dvcmQpLFxuICAgIGxhc3RVc2VkRGF0ZTogaGlkZUlmRGVmaW5lZChwYXNzd29yZEhpc3RvcnkubGFzdFVzZWREYXRlKSxcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiBjbGVhblNzaEtleShzc2hLZXk6IEl0ZW1bXCJzc2hLZXlcIl0pOiBJdGVtW1wic3NoS2V5XCJdIHtcbiAgaWYgKCFzc2hLZXkpIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgcHVibGljS2V5OiBzc2hLZXkucHVibGljS2V5LFxuICAgIGtleUZpbmdlcnByaW50OiBzc2hLZXkua2V5RmluZ2VycHJpbnQsXG4gICAgcHJpdmF0ZUtleTogaGlkZUlmRGVmaW5lZChzc2hLZXkucHJpdmF0ZUtleSksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGhpZGVJZkRlZmluZWQ8VD4odmFsdWU6IFQpIHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuICByZXR1cm4gU0VOU0lUSVZFX1ZBTFVFX1BMQUNFSE9MREVSO1xufVxuIiwgImltcG9ydCB7IGdldFByZWZlcmVuY2VWYWx1ZXMgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBjcmVhdGVDaXBoZXJpdiwgY3JlYXRlRGVjaXBoZXJpdiwgY3JlYXRlSGFzaCwgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEFMR09SSVRITSA9IFwiYWVzLTI1Ni1jYmNcIjtcblxuZXhwb3J0IHR5cGUgRW5jcnlwdGVkQ29udGVudCA9IHsgaXY6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH07XG5cbi8qKiBFbmNyeXB0cyBhbmQgZGVjcnlwdHMgZGF0YSB1c2luZyB0aGUgdXNlcidzIGNsaWVudCBzZWNyZXQgKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb250ZW50RW5jcnlwdG9yKCkge1xuICBjb25zdCB7IGNsaWVudFNlY3JldCB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlczxQcmVmZXJlbmNlcz4oKTtcbiAgY29uc3QgY2lwaGVyS2V5QnVmZmVyID0gdXNlTWVtbygoKSA9PiBnZXQzMkJpdFNlY3JldEtleUJ1ZmZlcihjbGllbnRTZWNyZXQudHJpbSgpKSwgW2NsaWVudFNlY3JldF0pO1xuXG4gIGNvbnN0IGVuY3J5cHQgPSAoZGF0YTogc3RyaW5nKTogRW5jcnlwdGVkQ29udGVudCA9PiB7XG4gICAgY29uc3QgaXZCdWZmZXIgPSByYW5kb21CeXRlcygxNik7XG4gICAgY29uc3QgY2lwaGVyID0gY3JlYXRlQ2lwaGVyaXYoQUxHT1JJVEhNLCBjaXBoZXJLZXlCdWZmZXIsIGl2QnVmZmVyKTtcbiAgICBjb25zdCBlbmNyeXB0ZWRDb250ZW50QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbY2lwaGVyLnVwZGF0ZShkYXRhKSwgY2lwaGVyLmZpbmFsKCldKTtcbiAgICByZXR1cm4geyBpdjogaXZCdWZmZXIudG9TdHJpbmcoXCJoZXhcIiksIGNvbnRlbnQ6IGVuY3J5cHRlZENvbnRlbnRCdWZmZXIudG9TdHJpbmcoXCJoZXhcIikgfTtcbiAgfTtcblxuICBjb25zdCBkZWNyeXB0ID0gKGNvbnRlbnQ6IHN0cmluZywgaXY6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgZGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcml2KEFMR09SSVRITSwgY2lwaGVyS2V5QnVmZmVyLCBCdWZmZXIuZnJvbShpdiwgXCJoZXhcIikpO1xuICAgIGNvbnN0IGRlY3J5cHRlZENvbnRlbnRCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtkZWNpcGhlci51cGRhdGUoQnVmZmVyLmZyb20oY29udGVudCwgXCJoZXhcIikpLCBkZWNpcGhlci5maW5hbCgpXSk7XG4gICAgcmV0dXJuIGRlY3J5cHRlZENvbnRlbnRCdWZmZXIudG9TdHJpbmcoKTtcbiAgfTtcblxuICByZXR1cm4geyBlbmNyeXB0LCBkZWNyeXB0IH07XG59XG5cbmZ1bmN0aW9uIGdldDMyQml0U2VjcmV0S2V5QnVmZmVyKGtleTogc3RyaW5nKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShrZXkpLmRpZ2VzdChcImJhc2U2NFwiKS5zbGljZSgwLCAzMikpO1xufVxuIiwgImltcG9ydCB7IExpc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgVmF1bHRJdGVtQWN0aW9uUGFuZWwgZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9JdGVtQWN0aW9uUGFuZWxcIjtcbmltcG9ydCBWYXVsdEl0ZW1Db250ZXh0IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB7IHVzZUl0ZW1BY2Nlc3NvcmllcyB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlSXRlbUFjY2Vzc29yaWVzXCI7XG5pbXBvcnQgeyB1c2VJdGVtSWNvbiB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlSXRlbUljb25cIjtcbmltcG9ydCB7IEZvbGRlciwgSXRlbSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5cbmV4cG9ydCB0eXBlIFZhdWx0SXRlbVByb3BzID0ge1xuICBpdGVtOiBJdGVtO1xuICBmb2xkZXI6IEZvbGRlciB8IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IFZhdWx0SXRlbSA9ICh7IGl0ZW0sIGZvbGRlciB9OiBWYXVsdEl0ZW1Qcm9wcykgPT4ge1xuICBjb25zdCBpY29uID0gdXNlSXRlbUljb24oaXRlbSk7XG4gIGNvbnN0IGFjY2Vzc29yaWVzID0gdXNlSXRlbUFjY2Vzc29yaWVzKGl0ZW0sIGZvbGRlcik7XG5cbiAgcmV0dXJuIChcbiAgICA8VmF1bHRJdGVtQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXRlbX0+XG4gICAgICA8TGlzdC5JdGVtXG4gICAgICAgIGlkPXtpdGVtLmlkfVxuICAgICAgICB0aXRsZT17aXRlbS5uYW1lfVxuICAgICAgICBhY2Nlc3Nvcmllcz17YWNjZXNzb3JpZXN9XG4gICAgICAgIGljb249e2ljb259XG4gICAgICAgIHN1YnRpdGxlPXtpdGVtLmxvZ2luPy51c2VybmFtZSB8fCB1bmRlZmluZWR9XG4gICAgICAgIGFjdGlvbnM9ezxWYXVsdEl0ZW1BY3Rpb25QYW5lbCAvPn1cbiAgICAgIC8+XG4gICAgPC9WYXVsdEl0ZW1Db250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVmF1bHRJdGVtO1xuIiwgImltcG9ydCB7IEFjdGlvbiwgQWN0aW9uUGFuZWwsIGVudmlyb25tZW50LCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IENvbXBvbmVudFJldmVyc2VyIGZyb20gXCJ+L2NvbXBvbmVudHMvQ29tcG9uZW50UmV2ZXJzZXJcIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHtcbiAgQ29weVBhc3N3b3JkQWN0aW9uLFxuICBDb3B5VG90cEFjdGlvbixcbiAgQ29weVVzZXJuYW1lQWN0aW9uLFxuICBPcGVuVXJsSW5Ccm93c2VyQWN0aW9uLFxuICBQYXN0ZVBhc3N3b3JkQWN0aW9uLFxuICBQYXN0ZVVzZXJuYW1lQWN0aW9uLFxuICBTaG93Q2FyZERldGFpbHNBY3Rpb24sXG4gIFNob3dOb3Rlc0FjdGlvbixcbiAgU2hvd0lkZW50aXR5RGV0YWlsc0FjdGlvbixcbiAgQ29weUNhcmRGaWVsZHNBY3Rpb25zLFxuICBDb3B5SWRlbnRpdHlGaWVsZHNBY3Rpb25zLFxuICBDb3B5TG9naW5VcmlzQWN0aW9ucyxcbiAgQ29weUN1c3RvbUZpZWxkc0FjdGlvbnMsXG4gIFBhc3RlVG90cEFjdGlvbixcbiAgQ29weVB1YmxpY0tleUFjdGlvbixcbn0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zXCI7XG5pbXBvcnQgeyBJdGVtVHlwZSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5pbXBvcnQgRmF2b3JpdGVJdGVtQWN0aW9ucyBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvRmF2b3JpdGVJdGVtQWN0aW9uc1wiO1xuaW1wb3J0IHsgRGVidWdnaW5nQnVnUmVwb3J0aW5nQWN0aW9uU2VjdGlvbiB9IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9uc1wiO1xuaW1wb3J0IENvcHlLZXlGaW5nZXJwcmludEFjdGlvbiBmcm9tIFwiLi9hY3Rpb25zL0NvcHlLZXlGaW5nZXJwcmludEFjdGlvblwiO1xuaW1wb3J0IENvcHlQcml2YXRlS2V5QWN0aW9uIGZyb20gXCIuL2FjdGlvbnMvQ29weVByaXZhdGVLZXlBY3Rpb25cIjtcbmltcG9ydCB7IFZhdWx0QWN0aW9uc1NlY3Rpb24gfSBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnNcIjtcblxuY29uc3QgeyBwcmltYXJ5QWN0aW9uIH0gPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzLlNlYXJjaD4oKTtcblxuY29uc3QgVmF1bHRJdGVtQWN0aW9uUGFuZWwgPSAoKSA9PiB7XG4gIGNvbnN0IHsgdHlwZSwgaWQgfSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uUGFuZWw+XG4gICAgICB7dHlwZSA9PT0gSXRlbVR5cGUuTE9HSU4gJiYgKFxuICAgICAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICAgICA8Q29tcG9uZW50UmV2ZXJzZXIgcmV2ZXJzZT17cHJpbWFyeUFjdGlvbiA9PT0gXCJwYXN0ZVwifT5cbiAgICAgICAgICAgIDxDb3B5UGFzc3dvcmRBY3Rpb24gLz5cbiAgICAgICAgICAgIDxQYXN0ZVBhc3N3b3JkQWN0aW9uIC8+XG4gICAgICAgICAgPC9Db21wb25lbnRSZXZlcnNlcj5cbiAgICAgICAgICA8Q29weVRvdHBBY3Rpb24gLz5cbiAgICAgICAgICA8UGFzdGVUb3RwQWN0aW9uIC8+XG4gICAgICAgICAgPENvcHlVc2VybmFtZUFjdGlvbiAvPlxuICAgICAgICAgIDxQYXN0ZVVzZXJuYW1lQWN0aW9uIC8+XG4gICAgICAgICAgPE9wZW5VcmxJbkJyb3dzZXJBY3Rpb24gLz5cbiAgICAgICAgICA8Q29weUxvZ2luVXJpc0FjdGlvbnMgLz5cbiAgICAgICAgICA8U2hvd05vdGVzQWN0aW9uIC8+XG4gICAgICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICl9XG4gICAgICB7dHlwZSA9PT0gSXRlbVR5cGUuQ0FSRCAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICAgICAgICA8U2hvd0NhcmREZXRhaWxzQWN0aW9uIC8+XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgIDxBY3Rpb25QYW5lbC5TZWN0aW9uIHRpdGxlPVwiQ2FyZCBGaWVsZHNcIj5cbiAgICAgICAgICAgIDxDb3B5Q2FyZEZpZWxkc0FjdGlvbnMgLz5cbiAgICAgICAgICA8L0FjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICAgICAgICA8U2hvd05vdGVzQWN0aW9uIC8+XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgICB7dHlwZSA9PT0gSXRlbVR5cGUuSURFTlRJVFkgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIDxBY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgICAgPFNob3dJZGVudGl0eURldGFpbHNBY3Rpb24gLz5cbiAgICAgICAgICA8L0FjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9XCJJZGVudGl0eSBGaWVsZHNcIj5cbiAgICAgICAgICAgIDxDb3B5SWRlbnRpdHlGaWVsZHNBY3Rpb25zIC8+XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgIDxBY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgICAgPFNob3dOb3Rlc0FjdGlvbiAvPlxuICAgICAgICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgICAge3R5cGUgPT09IEl0ZW1UeXBlLk5PVEUgJiYgKFxuICAgICAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICAgICA8U2hvd05vdGVzQWN0aW9uIC8+XG4gICAgICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICl9XG4gICAgICB7dHlwZSA9PT0gSXRlbVR5cGUuU1NIX0tFWSAmJiAoXG4gICAgICAgIDxBY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICAgIDxDb3B5UHVibGljS2V5QWN0aW9uIC8+XG4gICAgICAgICAgPENvcHlLZXlGaW5nZXJwcmludEFjdGlvbiAvPlxuICAgICAgICAgIDxDb3B5UHJpdmF0ZUtleUFjdGlvbiAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICApfVxuICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9XCJDdXN0b20gRmllbGRzXCI+XG4gICAgICAgIDxDb3B5Q3VzdG9tRmllbGRzQWN0aW9ucyAvPlxuICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9XCJJdGVtIEFjdGlvbnNcIj5cbiAgICAgICAgPEZhdm9yaXRlSXRlbUFjdGlvbnMgLz5cbiAgICAgIDwvQWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgIDxWYXVsdEFjdGlvbnNTZWN0aW9uIC8+XG4gICAgICA8RGVidWdnaW5nQnVnUmVwb3J0aW5nQWN0aW9uU2VjdGlvbiAvPlxuICAgICAge2Vudmlyb25tZW50LmlzRGV2ZWxvcG1lbnQgJiYgKFxuICAgICAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbiB0aXRsZT1cIkRldmVsb3BtZW50XCI+XG4gICAgICAgICAgPEFjdGlvbi5Db3B5VG9DbGlwYm9hcmQgdGl0bGU9XCJDb3B5IGl0ZW0gVVVJRFwiIGNvbnRlbnQ9e2lkfSAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICApfVxuICAgIDwvQWN0aW9uUGFuZWw+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWYXVsdEl0ZW1BY3Rpb25QYW5lbDtcbiIsICJpbXBvcnQgeyBDaGlsZHJlbiwgUmVhY3ROb2RlIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgU3luY0NoaWxkcmVuID0gRXhjbHVkZTxSZWFjdE5vZGUsIFByb21pc2U8dW5rbm93bj4+O1xuXG5leHBvcnQgdHlwZSBDb21wb25lbnRSZXZlcnNlclByb3BzID0ge1xuICByZXZlcnNlPzogYm9vbGVhbjtcbiAgY2hpbGRyZW4/OiBTeW5jQ2hpbGRyZW47XG59O1xuXG5jb25zdCBDb21wb25lbnRSZXZlcnNlciA9IChwcm9wczogQ29tcG9uZW50UmV2ZXJzZXJQcm9wcykgPT4ge1xuICBjb25zdCBjaGlsZHJlbiA9IENoaWxkcmVuLnRvQXJyYXkocHJvcHMuY2hpbGRyZW4pIGFzIFN5bmNDaGlsZHJlbltdO1xuICBpZiAocHJvcHMucmV2ZXJzZSkgY2hpbGRyZW4ucmV2ZXJzZSgpO1xuICByZXR1cm4gPD57Y2hpbGRyZW59PC8+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50UmV2ZXJzZXI7XG4iLCAiaW1wb3J0IHsgQ2xpcGJvYXJkLCBJY29uLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IEFjdGlvbldpdGhSZXByb21wdCBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9uV2l0aFJlcHJvbXB0XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlIH0gZnJvbSBcIn4vdXRpbHMvY2xpcGJvYXJkXCI7XG5cbmZ1bmN0aW9uIENvcHlQYXNzd29yZEFjdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5sb2dpbj8ucGFzc3dvcmQpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhhbmRsZUNvcHlQYXNzd29yZCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFzc3dvcmQgPSBhd2FpdCBnZXRVcGRhdGVkVmF1bHRJdGVtKHNlbGVjdGVkSXRlbSwgKGl0ZW0pID0+IGl0ZW0ubG9naW4/LnBhc3N3b3JkLCBcIkdldHRpbmcgcGFzc3dvcmQuLi5cIik7XG4gICAgICBpZiAocGFzc3dvcmQpIHtcbiAgICAgICAgYXdhaXQgQ2xpcGJvYXJkLmNvcHkocGFzc3dvcmQsIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcInBhc3N3b3JkXCIpIH0pO1xuICAgICAgICBhd2FpdCBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlKFwiQ29waWVkIHBhc3N3b3JkIHRvIGNsaXBib2FyZFwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIGdldCBwYXNzd29yZFwiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29weSBwYXNzd29yZFwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvbldpdGhSZXByb21wdFxuICAgICAgdGl0bGU9XCJDb3B5IFBhc3N3b3JkXCJcbiAgICAgIGljb249e0ljb24uS2V5fVxuICAgICAgb25BY3Rpb249e2hhbmRsZUNvcHlQYXNzd29yZH1cbiAgICAgIHJlcHJvbXB0RGVzY3JpcHRpb249e2BDb3B5aW5nIHRoZSBwYXNzd29yZCBvZiA8JHtzZWxlY3RlZEl0ZW0ubmFtZX0+YH1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5UGFzc3dvcmRBY3Rpb247XG4iLCAiaW1wb3J0IHsgVG9hc3QsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IHVzZVZhdWx0SXRlbVN1YnNjcmliZXIgfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IFNFTlNJVElWRV9WQUxVRV9QTEFDRUhPTERFUiB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyB1c2VCaXR3YXJkZW4gfSBmcm9tIFwifi9jb250ZXh0L2JpdHdhcmRlblwiO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBnZXQgdGhlIGxhdGVzdCB2YWx1ZSBvZiBhIHZhdWx0IGl0ZW0uXG4gKiBJZiB0aGUgdmFsdWUgaXMgYWxyZWFkeSBrbm93biwgaXQgd2lsbCBiZSByZXR1cm5lZCBpbW1lZGlhdGVseS5cbiAqIE90aGVyd2lzZSwgaXQgd2lsbCB3YWl0IGZvciB0aGUgdmFsdWUgdG8gYmUgcmV0cmlldmVkIGZyb20gdGhlIHZhdWx0LlxuICovXG5mdW5jdGlvbiB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCkge1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3Qgd2FpdEZvckl0ZW1Mb2FkZWQgPSB1c2VWYXVsdEl0ZW1TdWJzY3JpYmVyKCk7XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0SXRlbUZyb21WYXVsdChpZDogc3RyaW5nKTogUHJvbWlzZTxJdGVtPiB7XG4gICAgY29uc3QgaXRlbXNSZXN1bHQgPSBhd2FpdCBiaXR3YXJkZW4uZ2V0SXRlbShpZCk7XG4gICAgaWYgKGl0ZW1zUmVzdWx0LmVycm9yKSB0aHJvdyBpdGVtc1Jlc3VsdC5lcnJvcjtcbiAgICByZXR1cm4gaXRlbXNSZXN1bHQucmVzdWx0O1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0SXRlbTxUUmVzdWx0ID0gSXRlbT4oXG4gICAgcG9zc2libHlDYWNoZWRJdGVtOiBJdGVtLFxuICAgIHNlbGVjdG9yID0gKChpdGVtKSA9PiBpdGVtKSBhcyAoaXRlbTogSXRlbSkgPT4gVFJlc3VsdCxcbiAgICBsb2FkaW5nTWVzc2FnZT86IHN0cmluZ1xuICApOiBQcm9taXNlPFRSZXN1bHQ+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBzZWxlY3Rvcihwb3NzaWJseUNhY2hlZEl0ZW0pO1xuICAgIGlmICghdmFsdWVIYXNTZW5zaXRpdmVWYWx1ZVBsYWNlaG9sZGVyKGN1cnJlbnRWYWx1ZSkpIHJldHVybiBjdXJyZW50VmFsdWU7XG5cbiAgICBjb25zdCB0b2FzdCA9IGxvYWRpbmdNZXNzYWdlID8gYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkFuaW1hdGVkLCBsb2FkaW5nTWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdmFsdWUgPSBzZWxlY3RvcihcbiAgICAgIGF3YWl0IFByb21pc2UucmFjZShbd2FpdEZvckl0ZW1Mb2FkZWQocG9zc2libHlDYWNoZWRJdGVtLmlkKSwgZ2V0SXRlbUZyb21WYXVsdChwb3NzaWJseUNhY2hlZEl0ZW0uaWQpXSlcbiAgICApO1xuICAgIGF3YWl0IHRvYXN0Py5oaWRlKCk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gZ2V0SXRlbTtcbn1cblxuZnVuY3Rpb24gdmFsdWVIYXNTZW5zaXRpdmVWYWx1ZVBsYWNlaG9sZGVyKHZhbHVlOiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpLmluY2x1ZGVzKFNFTlNJVElWRV9WQUxVRV9QTEFDRUhPTERFUik7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHZhbHVlID09PSBTRU5TSVRJVkVfVkFMVUVfUExBQ0VIT0xERVI7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtO1xuIiwgImltcG9ydCB7IFRvYXN0LCBnZXRQcmVmZXJlbmNlVmFsdWVzLCBwb3BUb1Jvb3QsIHNob3dIVUQsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tIFwifi91dGlscy9zdHJpbmdzXCI7XG5cbi8qKiBEaXNwbGF5cyBhIEhVRCBvciBUb2FzdCBhbmQgY2xvc2VzIHRoZSB3aW5kb3cgb3Igbm90LCBkZXBlbmRpbmcgb24gdGhlIHByZWZlcmVuY2VzLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UodGl0bGU6IHN0cmluZywgbWVzc2FnZT86IHN0cmluZykge1xuICBjb25zdCBhY3Rpb24gPSBnZXRQcmVmZXJlbmNlVmFsdWVzPFByZWZlcmVuY2VzPigpLndpbmRvd0FjdGlvbk9uQ29weTtcbiAgY29uc3QgbWVzc2FnZVRpdGxlID0gY2FwaXRhbGl6ZSh0aXRsZSwgdHJ1ZSk7XG5cbiAgaWYgKGFjdGlvbiA9PT0gXCJrZWVwT3BlblwiKSB7XG4gICAgYXdhaXQgc2hvd1RvYXN0KHsgdGl0bGU6IG1lc3NhZ2VUaXRsZSwgbWVzc2FnZSwgc3R5bGU6IFRvYXN0LlN0eWxlLlN1Y2Nlc3MgfSk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcImNsb3NlQW5kUG9wVG9Sb290XCIpIHtcbiAgICBhd2FpdCBzaG93SFVEKG1lc3NhZ2VUaXRsZSk7XG4gICAgYXdhaXQgcG9wVG9Sb290KCk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgc2hvd0hVRChtZXNzYWdlVGl0bGUpO1xuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IGNhcGl0YWxpemUgPSAodmFsdWU6IHN0cmluZywgbG93ZXJjYXNlUmVzdCA9IGZhbHNlKSA9PiB7XG4gIGNvbnN0IGZpcnN0TGV0dGVyID0gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IHJlc3QgPSBsb3dlcmNhc2VSZXN0ID8gdmFsdWUuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSA6IHZhbHVlLnNsaWNlKDEpO1xuXG4gIHJldHVybiBmaXJzdExldHRlciArIHJlc3Q7XG59O1xuIiwgImltcG9ydCB7IENsaXBib2FyZCwgSWNvbiwgVG9hc3QsIHNob3dUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCBBY3Rpb25XaXRoUmVwcm9tcHQgZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zL0FjdGlvbldpdGhSZXByb21wdFwiO1xuaW1wb3J0IHsgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRJdGVtXCI7XG5pbXBvcnQgdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZUdldFVwZGF0ZWRWYXVsdEl0ZW1cIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHVzZUZyb250bW9zdEFwcGxpY2F0aW9uTmFtZSBmcm9tIFwifi91dGlscy9ob29rcy91c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWVcIjtcblxuZnVuY3Rpb24gUGFzdGVQYXNzd29yZEFjdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgYWN0aW9uVGl0bGUgPSB1c2VBY3Rpb25UaXRsZSgpO1xuXG4gIGlmICghc2VsZWN0ZWRJdGVtLmxvZ2luPy5wYXNzd29yZCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgcGFzdGVQYXNzd29yZCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFzc3dvcmQgPSBhd2FpdCBnZXRVcGRhdGVkVmF1bHRJdGVtKHNlbGVjdGVkSXRlbSwgKGl0ZW0pID0+IGl0ZW0ubG9naW4/LnBhc3N3b3JkLCBcIkdldHRpbmcgcGFzc3dvcmQuLi5cIik7XG4gICAgICBpZiAocGFzc3dvcmQpIGF3YWl0IENsaXBib2FyZC5wYXN0ZShwYXNzd29yZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgcGFzc3dvcmRcIik7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHBhc3RlIHBhc3N3b3JkXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICB0aXRsZT17YWN0aW9uVGl0bGV9XG4gICAgICBpY29uPXtJY29uLldpbmRvd31cbiAgICAgIG9uQWN0aW9uPXtwYXN0ZVBhc3N3b3JkfVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YFBhc3RpbmcgdGhlIHBhc3N3b3JkIG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIHVzZUFjdGlvblRpdGxlKCkge1xuICBjb25zdCBjdXJyZW50QXBwbGljYXRpb24gPSB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUoKTtcbiAgcmV0dXJuIGN1cnJlbnRBcHBsaWNhdGlvbiA/IGBQYXN0ZSBQYXNzd29yZCBpbnRvICR7Y3VycmVudEFwcGxpY2F0aW9ufWAgOiBcIlBhc3RlIFBhc3N3b3JkXCI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhc3RlUGFzc3dvcmRBY3Rpb247XG4iLCAiaW1wb3J0IHsgZ2V0RnJvbnRtb3N0QXBwbGljYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUZyb250bW9zdEFwcGxpY2F0aW9uTmFtZSgpIHtcbiAgY29uc3QgW2N1cnJlbnRBcHBsaWNhdGlvbiwgc2V0Q3VycmVudEFwcGxpY2F0aW9uXSA9IHVzZVN0YXRlPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZvaWQgZ2V0RnJvbnRtb3N0QXBwbGljYXRpb24oKVxuICAgICAgLnRoZW4oKGFwcGxpY2F0aW9uKSA9PiBzZXRDdXJyZW50QXBwbGljYXRpb24oYXBwbGljYXRpb24ubmFtZSkpXG4gICAgICAuY2F0Y2goKCkgPT4gc2V0Q3VycmVudEFwcGxpY2F0aW9uKHVuZGVmaW5lZCkpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIGN1cnJlbnRBcHBsaWNhdGlvbjtcbn1cbiIsICJpbXBvcnQgeyBDbGlwYm9hcmQsIEljb24sIHNob3dUb2FzdCwgVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IHVzZUJpdHdhcmRlbiB9IGZyb20gXCJ+L2NvbnRleHQvYml0d2FyZGVuXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlIH0gZnJvbSBcIn4vdXRpbHMvY2xpcGJvYXJkXCI7XG5cbmZ1bmN0aW9uIENvcHlUb3RwQWN0aW9uKCkge1xuICBjb25zdCBiaXR3YXJkZW4gPSB1c2VCaXR3YXJkZW4oKTtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5sb2dpbj8udG90cCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgY29weVRvdHAgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG9hc3QgPSBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuQW5pbWF0ZWQsIFwiR2V0dGluZyBUT1RQIGNvZGUuLi5cIik7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgZ2V0VXBkYXRlZFZhdWx0SXRlbShzZWxlY3RlZEl0ZW0sIChpdGVtKSA9PiBpdGVtLmlkKTtcbiAgICAgIGNvbnN0IHsgZXJyb3IsIHJlc3VsdDogdG90cCB9ID0gYXdhaXQgYml0d2FyZGVuLmdldFRvdHAoaWQpO1xuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgICAgYXdhaXQgdG9hc3Q/LmhpZGUoKTtcbiAgICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KHRvdHAsIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcIm90aGVyXCIpIH0pO1xuICAgICAgYXdhaXQgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZShcIkNvcGllZCBjb2RlIHRvIGNsaXBib2FyZFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QubWVzc2FnZSA9IFwiRmFpbGVkIHRvIGdldCBUT1RQXCI7XG4gICAgICB0b2FzdC5zdHlsZSA9IFRvYXN0LlN0eWxlLkZhaWx1cmU7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGNvcHkgVE9UUFwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvbldpdGhSZXByb21wdFxuICAgICAgdGl0bGU9XCJDb3B5IFRPVFBcIlxuICAgICAgaWNvbj17SWNvbi5DbGlwYm9hcmR9XG4gICAgICBvbkFjdGlvbj17Y29weVRvdHB9XG4gICAgICBzaG9ydGN1dD17eyBtYWNPUzogeyBrZXk6IFwidFwiLCBtb2RpZmllcnM6IFtcIm9wdFwiXSB9LCB3aW5kb3dzOiB7IGtleTogXCJ0XCIsIG1vZGlmaWVyczogW1wiYWx0XCJdIH0gfX1cbiAgICAgIHJlcHJvbXB0RGVzY3JpcHRpb249e2BDb3B5aW5nIHRoZSBUT1RQIG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcHlUb3RwQWN0aW9uO1xuIiwgImltcG9ydCB7IENsaXBib2FyZCwgSWNvbiwgc2hvd1RvYXN0LCBUb2FzdCB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCBBY3Rpb25XaXRoUmVwcm9tcHQgZnJvbSBcIn4vY29tcG9uZW50cy9hY3Rpb25zL0FjdGlvbldpdGhSZXByb21wdFwiO1xuaW1wb3J0IHsgdXNlQml0d2FyZGVuIH0gZnJvbSBcIn4vY29udGV4dC9iaXR3YXJkZW5cIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUgZnJvbSBcIn4vdXRpbHMvaG9va3MvdXNlRnJvbnRtb3N0QXBwbGljYXRpb25OYW1lXCI7XG5cbmZ1bmN0aW9uIFBhc3RlVG90cEFjdGlvbigpIHtcbiAgY29uc3QgYml0d2FyZGVuID0gdXNlQml0d2FyZGVuKCk7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGN1cnJlbnRBcHBsaWNhdGlvbk5hbWUgPSB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUoKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5sb2dpbj8udG90cCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgcGFzdGVUb3RwID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRvYXN0ID0gYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkFuaW1hdGVkLCBcIkdldHRpbmcgVE9UUCBjb2RlLi4uXCIpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZCA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oc2VsZWN0ZWRJdGVtLCAoaXRlbSkgPT4gaXRlbS5pZCk7XG4gICAgICBjb25zdCB7IGVycm9yLCByZXN1bHQ6IHRvdHAgfSA9IGF3YWl0IGJpdHdhcmRlbi5nZXRUb3RwKGlkKTtcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICAgIGF3YWl0IHRvYXN0Py5oaWRlKCk7XG4gICAgICBhd2FpdCBDbGlwYm9hcmQucGFzdGUodG90cCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRvYXN0Lm1lc3NhZ2UgPSBcIkZhaWxlZCB0byBnZXQgVE9UUFwiO1xuICAgICAgdG9hc3Quc3R5bGUgPSBUb2FzdC5TdHlsZS5GYWlsdXJlO1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBwYXN0ZSBUT1RQXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICB0aXRsZT17Y3VycmVudEFwcGxpY2F0aW9uTmFtZSA/IGBQYXN0ZSBUT1RQIGludG8gJHtjdXJyZW50QXBwbGljYXRpb25OYW1lfWAgOiBcIlBhc3RlIFRPVFBcIn1cbiAgICAgIGljb249e0ljb24uV2luZG93fVxuICAgICAgb25BY3Rpb249e3Bhc3RlVG90cH1cbiAgICAgIHNob3J0Y3V0PXt7XG4gICAgICAgIG1hY09TOiB7IGtleTogXCJ0XCIsIG1vZGlmaWVyczogW1wib3B0XCIsIFwic2hpZnRcIl0gfSxcbiAgICAgICAgd2luZG93czogeyBrZXk6IFwidFwiLCBtb2RpZmllcnM6IFtcImFsdFwiLCBcInNoaWZ0XCJdIH0sXG4gICAgICB9fVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YFBhc3RpbmcgdGhlIFRPVFAgb2YgPCR7c2VsZWN0ZWRJdGVtLm5hbWV9PmB9XG4gICAgLz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFzdGVUb3RwQWN0aW9uO1xuIiwgImltcG9ydCB7IEFjdGlvbiwgQ2xpcGJvYXJkLCBJY29uLCBUb2FzdCwgc2hvd1RvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRJdGVtXCI7XG5pbXBvcnQgdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZUdldFVwZGF0ZWRWYXVsdEl0ZW1cIjtcbmltcG9ydCB7IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UgfSBmcm9tIFwifi91dGlscy9jbGlwYm9hcmRcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHsgZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG5mdW5jdGlvbiBDb3B5VXNlcm5hbWVBY3Rpb24oKSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG5cbiAgaWYgKCFzZWxlY3RlZEl0ZW0ubG9naW4/LnVzZXJuYW1lKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVDb3B5VXNlcm5hbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gYXdhaXQgZ2V0VXBkYXRlZFZhdWx0SXRlbShzZWxlY3RlZEl0ZW0sIChpdGVtKSA9PiBpdGVtLmxvZ2luPy51c2VybmFtZSwgXCJHZXR0aW5nIHVzZXJuYW1lLi4uXCIpO1xuICAgICAgaWYgKHVzZXJuYW1lKSB7XG4gICAgICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KHVzZXJuYW1lLCB7IHRyYW5zaWVudDogZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UoXCJvdGhlclwiKSB9KTtcbiAgICAgICAgYXdhaXQgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZShcIkNvcGllZCB1c2VybmFtZSB0byBjbGlwYm9hcmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgdXNlcm5hbWVcIik7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIGNvcHkgdXNlcm5hbWVcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBY3Rpb25cbiAgICAgIHRpdGxlPVwiQ29weSBVc2VybmFtZVwiXG4gICAgICBpY29uPXtJY29uLlBlcnNvbn1cbiAgICAgIG9uQWN0aW9uPXtoYW5kbGVDb3B5VXNlcm5hbWV9XG4gICAgICBzaG9ydGN1dD17eyBtYWNPUzogeyBrZXk6IFwidVwiLCBtb2RpZmllcnM6IFtcIm9wdFwiXSB9LCB3aW5kb3dzOiB7IGtleTogXCJ1XCIsIG1vZGlmaWVyczogW1wiYWx0XCJdIH0gfX1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5VXNlcm5hbWVBY3Rpb247XG4iLCAiaW1wb3J0IHsgQ2xpcGJvYXJkLCBJY29uLCBUb2FzdCwgc2hvd1RvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IEFjdGlvbldpdGhSZXByb21wdCBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9uV2l0aFJlcHJvbXB0XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgdXNlRnJvbnRtb3N0QXBwbGljYXRpb25OYW1lIGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZUZyb250bW9zdEFwcGxpY2F0aW9uTmFtZVwiO1xuXG5mdW5jdGlvbiBQYXN0ZVVzZXJuYW1lQWN0aW9uKCkge1xuICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1c2VTZWxlY3RlZFZhdWx0SXRlbSgpO1xuICBjb25zdCBnZXRVcGRhdGVkVmF1bHRJdGVtID0gdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSgpO1xuICBjb25zdCBjdXJyZW50QXBwbGljYXRpb24gPSB1c2VGcm9udG1vc3RBcHBsaWNhdGlvbk5hbWUoKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5sb2dpbj8udXNlcm5hbWUpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHBhc3RlVXNlcm5hbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gYXdhaXQgZ2V0VXBkYXRlZFZhdWx0SXRlbShzZWxlY3RlZEl0ZW0sIChpdGVtKSA9PiBpdGVtLmxvZ2luPy51c2VybmFtZSwgXCJHZXR0aW5nIHVzZXJuYW1lLi4uXCIpO1xuICAgICAgaWYgKHVzZXJuYW1lKSBhd2FpdCBDbGlwYm9hcmQucGFzdGUodXNlcm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgXCJGYWlsZWQgdG8gZ2V0IHVzZXJuYW1lXCIpO1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBwYXN0ZSB1c2VybmFtZVwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvbldpdGhSZXByb21wdFxuICAgICAgdGl0bGU9e2N1cnJlbnRBcHBsaWNhdGlvbiA/IGBQYXN0ZSBVc2VybmFtZSBpbnRvICR7Y3VycmVudEFwcGxpY2F0aW9ufWAgOiBcIlBhc3RlIFVzZXJuYW1lXCJ9XG4gICAgICBpY29uPXtJY29uLldpbmRvd31cbiAgICAgIG9uQWN0aW9uPXtwYXN0ZVVzZXJuYW1lfVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YFBhc3RpbmcgdGhlIHVzZXJuYW1lIG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgICAgc2hvcnRjdXQ9e3tcbiAgICAgICAgbWFjT1M6IHsga2V5OiBcInVcIiwgbW9kaWZpZXJzOiBbXCJjbWRcIiwgXCJvcHRcIl0gfSxcbiAgICAgICAgd2luZG93czogeyBrZXk6IFwidVwiLCBtb2RpZmllcnM6IFtcImN0cmxcIiwgXCJhbHRcIl0gfSxcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFzdGVVc2VybmFtZUFjdGlvbjtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEljb24sIFRvYXN0LCBvcGVuLCBzaG93VG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcblxuZnVuY3Rpb24gT3BlblVybEluQnJvd3NlckFjdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcblxuICBpZiAoIWdldFVyaShzZWxlY3RlZEl0ZW0pKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVPcGVuVXJsSW5Ccm93c2VyID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtYWluVXJpID0gYXdhaXQgZ2V0VXBkYXRlZFZhdWx0SXRlbShzZWxlY3RlZEl0ZW0sIGdldFVyaSwgXCJHZXR0aW5nIFVSTC4uLlwiKTtcbiAgICAgIGlmIChtYWluVXJpKSBhd2FpdCBvcGVuKG1haW5VcmkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgXCJGYWlsZWQgdG8gZ2V0IFVSTFwiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gb3BlbiBVUkwgaW4gYnJvd3NlclwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvblxuICAgICAgdGl0bGU9XCJPcGVuIGluIEJyb3dzZXJcIlxuICAgICAgb25BY3Rpb249e2hhbmRsZU9wZW5VcmxJbkJyb3dzZXJ9XG4gICAgICBpY29uPXtJY29uLkdsb2JlfVxuICAgICAgc2hvcnRjdXQ9e3sgbWFjT1M6IHsga2V5OiBcIm9cIiwgbW9kaWZpZXJzOiBbXCJvcHRcIl0gfSwgd2luZG93czogeyBrZXk6IFwib1wiLCBtb2RpZmllcnM6IFtcImFsdFwiXSB9IH19XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0VXJpKGl0ZW06IEl0ZW0pIHtcbiAgcmV0dXJuIGl0ZW0ubG9naW4/LnVyaXM/LlswXT8udXJpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBPcGVuVXJsSW5Ccm93c2VyQWN0aW9uO1xuIiwgImltcG9ydCB7IEljb24sIFRvYXN0LCBzaG93VG9hc3QsIHVzZU5hdmlnYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBjYXJkQml0d2FyZGVuUGFnZUZpZWxkT3JkZXJTb3J0ZXIsIGdldENhcmREZXRhaWxzQ29weVZhbHVlLCBnZXRDYXJkRGV0YWlsc01hcmtkb3duIH0gZnJvbSBcIn4vdXRpbHMvY2FyZHNcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHsgQ0FSRF9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgU2hvd0RldGFpbHNTY3JlZW4gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9hY3Rpb25zL3NoYXJlZC9TaG93RGV0YWlsc1NjcmVlblwiO1xuXG5mdW5jdGlvbiBTaG93Q2FyZERldGFpbHNBY3Rpb24oKSB7XG4gIGNvbnN0IHsgcHVzaCB9ID0gdXNlTmF2aWdhdGlvbigpO1xuICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1c2VTZWxlY3RlZFZhdWx0SXRlbSgpO1xuICBjb25zdCBnZXRVcGRhdGVkVmF1bHRJdGVtID0gdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSgpO1xuXG4gIGlmICghc2VsZWN0ZWRJdGVtLmNhcmQpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHNob3dDYXJkRGV0YWlscyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FyZCA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oc2VsZWN0ZWRJdGVtLCAoaXRlbSkgPT4gaXRlbS5jYXJkLCBcIkdldHRpbmcgY2FyZCBkZXRhaWxzLi4uXCIpO1xuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgcHVzaChcbiAgICAgICAgICA8U2hvd0RldGFpbHNTY3JlZW5cbiAgICAgICAgICAgIGxhYmVsPVwiQ2FyZFwiXG4gICAgICAgICAgICBkZXRhaWxzPXtjYXJkfVxuICAgICAgICAgICAgaXRlbU5hbWU9e3NlbGVjdGVkSXRlbS5uYW1lfVxuICAgICAgICAgICAgdGl0bGVNYXA9e0NBUkRfS0VZX0xBQkVMfVxuICAgICAgICAgICAgc29ydGVyPXtjYXJkQml0d2FyZGVuUGFnZUZpZWxkT3JkZXJTb3J0ZXJ9XG4gICAgICAgICAgICBnZXRNYXJrZG93bj17Z2V0Q2FyZERldGFpbHNNYXJrZG93bn1cbiAgICAgICAgICAgIGdldENvcHlWYWx1ZT17Z2V0Q2FyZERldGFpbHNDb3B5VmFsdWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIGdldCBjYXJkIGRldGFpbHNcIik7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHNob3cgY2FyZCBkZXRhaWxzXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICB0aXRsZT1cIlNob3cgQ2FyZFwiXG4gICAgICBpY29uPXtJY29uLkV5ZX1cbiAgICAgIG9uQWN0aW9uPXtzaG93Q2FyZERldGFpbHN9XG4gICAgICByZXByb21wdERlc2NyaXB0aW9uPXtgU2hvd2luZyB0aGUgY2FyZCBkZXRhaWxzIG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNob3dDYXJkRGV0YWlsc0FjdGlvbjtcbiIsICJpbXBvcnQgeyBTSE9SVENVVF9LRVlfU0VRVUVOQ0UgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgQ0FSRF9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBDQVJEX0JSQU5EUywgQ2FyZCwgQ2FyZEJyYW5kIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IHBsYXRmb3JtIH0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcblxuY29uc3QgTU9OVEhfTlVNQkVSX1RPX0xBQkVMX01BUCA9IHtcbiAgMTogXCIwMSAtIEphbnVhcnlcIixcbiAgMjogXCIwMiAtIEZlYnJ1YXJ5XCIsXG4gIDM6IFwiMDMgLSBNYXJjaFwiLFxuICA0OiBcIjA0IC0gQXByaWxcIixcbiAgNTogXCIwNSAtIE1heVwiLFxuICA2OiBcIjA2IC0gSnVuZVwiLFxuICA3OiBcIjA3IC0gSnVseVwiLFxuICA4OiBcIjA4IC0gQXVndXN0XCIsXG4gIDk6IFwiMDkgLSBTZXB0ZW1iZXJcIixcbiAgMTA6IFwiMTAgLSBPY3RvYmVyXCIsXG4gIDExOiBcIjExIC0gTm92ZW1iZXJcIixcbiAgMTI6IFwiMTIgLSBEZWNlbWJlclwiLFxufSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG5jb25zdCBDQVJEX01BUFBFUjogUmVjb3JkPHN0cmluZywgKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZz4gPSB7XG4gIGV4cE1vbnRoOiAodmFsdWU6IHN0cmluZykgPT4gTU9OVEhfTlVNQkVSX1RPX0xBQkVMX01BUFt2YWx1ZV0gPz8gdmFsdWUsXG59O1xuXG5jb25zdCBnZXRDYXJkVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIENBUkRfTUFQUEVSW2tleSBhcyBrZXlvZiBDYXJkXT8uKHZhbHVlKSA/PyB2YWx1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkRGV0YWlsc01hcmtkb3duKGl0ZW1OYW1lOiBzdHJpbmcsIGNhcmQ6IENhcmQpIHtcbiAgcmV0dXJuIGAjIFx1RDgzRFx1RENCMyAke2l0ZW1OYW1lfVxuJm5ic3A7XG58ICR7cGxhdGZvcm0gPT09IFwibWFjb3NcIiA/IFwiXHUyMzI1XCIgOiBcIkFsdFwifVxcdCoqRmllbGQqKiB8ICoqVmFsdWUqKiB8XG58IC0tLSB8IC0tLSB8XG4ke09iamVjdC5lbnRyaWVzKGNhcmQpXG4gIC5tYXAoKFtrZXksIHZhbHVlXSwgaW5kZXgpID0+IHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBsYWJlbCA9IENBUkRfS0VZX0xBQkVMW2tleSBhcyBrZXlvZiBDYXJkXTtcbiAgICBjb25zdCBzaG9ydGN1dEtleSA9IFNIT1JUQ1VUX0tFWV9TRVFVRU5DRVtpbmRleF07XG5cbiAgICByZXR1cm4gYHwgJHtzaG9ydGN1dEtleSA/IGAke3Nob3J0Y3V0S2V5fS5gIDogXCImbmJzcDtcIn1cXHQqKiR7bGFiZWx9KiogfCAke2dldENhcmRWYWx1ZShrZXksIHZhbHVlKX0gfGA7XG4gIH0pXG4gIC5maWx0ZXIoQm9vbGVhbilcbiAgLmpvaW4oXCJcXG5cIil9XG5gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZERldGFpbHNDb3B5VmFsdWUoY2FyZDogQ2FyZCkge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY2FyZClcbiAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+ICh2YWx1ZSA/IGAke0NBUkRfS0VZX0xBQkVMW2tleSBhcyBrZXlvZiBDYXJkXX06ICR7Z2V0Q2FyZFZhbHVlKGtleSwgdmFsdWUpfWAgOiBudWxsKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cbmNvbnN0IENBUkRfS0VZX0xBQkVMX0tFWVMgPSBPYmplY3Qua2V5cyhDQVJEX0tFWV9MQUJFTCk7XG4vKiogc29ydHMgdGhlIGZpZWxkcyBhY2NvcmRpbmcgdG8gdGhlIG9yZGVyIHRoZXkgYXBwZWFyIG9uIGJpdHdhcmRlbidzIHdlYiB2YXVsdCBmb3JtICovXG5leHBvcnQgZnVuY3Rpb24gY2FyZEJpdHdhcmRlblBhZ2VGaWVsZE9yZGVyU29ydGVyKFthXTogc3RyaW5nIHwgW3N0cmluZywgYW55XSwgW2JdOiBzdHJpbmcgfCBbc3RyaW5nLCBhbnldKSB7XG4gIGNvbnN0IGFJbmRleCA9IENBUkRfS0VZX0xBQkVMX0tFWVMuaW5kZXhPZigoQXJyYXkuaXNBcnJheShhKSA/IGFbMF0gOiBhKSBhcyBrZXlvZiBDYXJkKTtcbiAgY29uc3QgYkluZGV4ID0gQ0FSRF9LRVlfTEFCRUxfS0VZUy5pbmRleE9mKChBcnJheS5pc0FycmF5KGIpID8gYlswXSA6IGIpIGFzIGtleW9mIENhcmQpO1xuICByZXR1cm4gYUluZGV4IC0gYkluZGV4O1xufVxuXG5jb25zdCBCQVNFX0NBUkRfSU1BR0VfVVJMID0gXCJodHRwczovL3ZhdWx0LmJpdHdhcmRlbi5jb20vaW1hZ2VzXCI7XG5jb25zdCBDQVJEX0JSQU5EU19UT19JTUFHRV9VUkxfTUFQOiBQYXJ0aWFsPFJlY29yZDxDYXJkQnJhbmQsIHN0cmluZz4+ID0ge1xuICBbQ0FSRF9CUkFORFMuVklTQV06IGAke0JBU0VfQ0FSRF9JTUFHRV9VUkx9L3Zpc2EtbGlnaHQucG5nYCxcbiAgW0NBUkRfQlJBTkRTLk1BU1RFUkNBUkRdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9tYXN0ZXJjYXJkLWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5BTUVYXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vYW1leC1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuRElTQ09WRVJdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9kaXNjb3Zlci1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuRElORVJTX0NMVUJdOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9kaW5lcnNfY2x1Yi1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuSkNCXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vamNiLWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5NQUVTVFJPXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vbWFlc3Ryby1saWdodC5wbmdgLFxuICBbQ0FSRF9CUkFORFMuVU5JT05fUEFZXTogYCR7QkFTRV9DQVJEX0lNQUdFX1VSTH0vdW5pb25fcGF5LWxpZ2h0LnBuZ2AsXG4gIFtDQVJEX0JSQU5EUy5SVV9QQVldOiBgJHtCQVNFX0NBUkRfSU1BR0VfVVJMfS9ydV9wYXktbGlnaHQucG5nYCxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkSW1hZ2VVcmwoYnJhbmQ6IENhcmRCcmFuZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBDQVJEX0JSQU5EU19UT19JTUFHRV9VUkxfTUFQW2JyYW5kXTtcbn1cbiIsICJpbXBvcnQgeyBBY3Rpb24sIEFjdGlvblBhbmVsLCBDbGlwYm9hcmQsIERldGFpbCwgSWNvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tIFwifi91dGlscy9zdHJpbmdzXCI7XG5pbXBvcnQgeyBTSE9SVENVVF9LRVlfU0VRVUVOQ0UgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZSB9IGZyb20gXCJ+L3V0aWxzL2NsaXBib2FyZFwiO1xuXG50eXBlIENvbnN0cmFpbnQgPSBSZWNvcmRPZkFueTtcblxuZXhwb3J0IHR5cGUgU2hvd0RldGFpbHNTY3JlZW5Qcm9wczxURGV0YWlscyBleHRlbmRzIENvbnN0cmFpbnQgPSBDb25zdHJhaW50PiA9IHtcbiAgZGV0YWlsczogVERldGFpbHM7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGl0ZW1OYW1lOiBzdHJpbmc7XG4gIHNvcnRlcj86IChhOiBzdHJpbmcgfCBbc3RyaW5nLCBhbnldLCBiOiBzdHJpbmcgfCBbc3RyaW5nLCBhbnldKSA9PiBudW1iZXI7XG4gIGdldE1hcmtkb3duOiAoaXRlbU5hbWU6IHN0cmluZywgZGV0YWlsczogVERldGFpbHMpID0+IHN0cmluZztcbiAgZ2V0Q29weVZhbHVlOiAoZGV0YWlsczogVERldGFpbHMpID0+IHN0cmluZztcbiAgdGl0bGVNYXA/OiBSZWNvcmQ8a2V5b2YgVERldGFpbHMsIHN0cmluZz4gfCAoKGtleToga2V5b2YgVERldGFpbHMpID0+IHN0cmluZyk7XG59O1xuXG5mdW5jdGlvbiBTaG93RGV0YWlsc1NjcmVlbjxURGV0YWlscyBleHRlbmRzIENvbnN0cmFpbnQ+KHByb3BzOiBTaG93RGV0YWlsc1NjcmVlblByb3BzPFREZXRhaWxzPikge1xuICBjb25zdCB7IGl0ZW1OYW1lLCBkZXRhaWxzLCBzb3J0ZXIsIGxhYmVsLCBnZXRNYXJrZG93biwgZ2V0Q29weVZhbHVlLCB0aXRsZU1hcCB9ID0gcHJvcHM7XG4gIGNvbnN0IGNhcGl0YWxpemVkTGFiZWwgPSBjYXBpdGFsaXplKGxhYmVsLCB0cnVlKTtcblxuICBjb25zdCBoYW5kbGVDb3B5RmllbGQgPSAodmFsdWU6IHN0cmluZykgPT4gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KHZhbHVlLCB7IHRyYW5zaWVudDogZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UoXCJvdGhlclwiKSB9KTtcbiAgICBhd2FpdCBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlKFwiQ29waWVkIGRldGFpbHMgdG8gY2xpcGJvYXJkXCIpO1xuICB9O1xuXG4gIGNvbnN0IHsgc29ydGVkRGV0YWlscywgc29ydGVkRGV0YWlsc0VudHJpZXMgfSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc29ydGVyKSByZXR1cm4geyBzb3J0ZWREZXRhaWxzOiBkZXRhaWxzLCBzb3J0ZWREZXRhaWxzRW50cmllczogT2JqZWN0LmVudHJpZXMoZGV0YWlscykgfTtcblxuICAgIGNvbnN0IHNvcnRlZEVudHJpZXM6IFtzdHJpbmcsIHN0cmluZ11bXSA9IE9iamVjdC5lbnRyaWVzKGRldGFpbHMpLnNvcnQoc29ydGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgc29ydGVkRGV0YWlsczogT2JqZWN0LmZyb21FbnRyaWVzKHNvcnRlZEVudHJpZXMpIGFzIHVua25vd24gYXMgVERldGFpbHMsXG4gICAgICBzb3J0ZWREZXRhaWxzRW50cmllczogc29ydGVkRW50cmllcyxcbiAgICB9O1xuICB9LCBbZGV0YWlsc10pO1xuXG4gIGNvbnN0IGNvcHlEZXRhaWxzID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KGdldENvcHlWYWx1ZShzb3J0ZWREZXRhaWxzKSwgeyB0cmFuc2llbnQ6IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlKFwib3RoZXJcIikgfSk7XG4gICAgYXdhaXQgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZShgQ29waWVkICR7bGFiZWx9IGRldGFpbHMgdG8gY2xpcGJvYXJkYCk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8RGV0YWlsXG4gICAgICBtYXJrZG93bj17Z2V0TWFya2Rvd24oaXRlbU5hbWUsIHNvcnRlZERldGFpbHMpfVxuICAgICAgYWN0aW9ucz17XG4gICAgICAgIDxBY3Rpb25QYW5lbD5cbiAgICAgICAgICA8QWN0aW9uUGFuZWwuU2VjdGlvbj5cbiAgICAgICAgICAgIDxBY3Rpb24gdGl0bGU9e2BDb3B5ICR7Y2FwaXRhbGl6ZWRMYWJlbH0gRGV0YWlsc2B9IG9uQWN0aW9uPXtjb3B5RGV0YWlsc30gLz5cbiAgICAgICAgICA8L0FjdGlvblBhbmVsLlNlY3Rpb24+XG4gICAgICAgICAgPEFjdGlvblBhbmVsLlNlY3Rpb24gdGl0bGU9e2Ake2NhcGl0YWxpemVkTGFiZWx9IEZpZWxkc2B9PlxuICAgICAgICAgICAge3NvcnRlZERldGFpbHNFbnRyaWVzLm1hcCgoW2ZpZWxkS2V5LCBjb250ZW50XSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgY29uc3Qgc2hvcnRjdXRLZXkgPSBTSE9SVENVVF9LRVlfU0VRVUVOQ0VbaW5kZXhdO1xuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgICAgICAga2V5PXtgJHtpbmRleH0tJHtmaWVsZEtleX1gfVxuICAgICAgICAgICAgICAgICAgdGl0bGU9e2BDb3B5ICR7Z2V0VGl0bGUoZmllbGRLZXksIHRpdGxlTWFwKX1gfVxuICAgICAgICAgICAgICAgICAgaWNvbj17SWNvbi5DbGlwYm9hcmR9XG4gICAgICAgICAgICAgICAgICBvbkFjdGlvbj17aGFuZGxlQ29weUZpZWxkKGNvbnRlbnQpfVxuICAgICAgICAgICAgICAgICAgc2hvcnRjdXQ9e1xuICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dEtleVxuICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtYWNPUzogeyBrZXk6IHNob3J0Y3V0S2V5LCBtb2RpZmllcnM6IFtcIm9wdFwiXSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dzOiB7IGtleTogc2hvcnRjdXRLZXksIG1vZGlmaWVyczogW1wiYWx0XCJdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9BY3Rpb25QYW5lbC5TZWN0aW9uPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldFRpdGxlKGZpZWxkS2V5OiBzdHJpbmcsIHRpdGxlTWFwPzogU2hvd0RldGFpbHNTY3JlZW5Qcm9wc1tcInRpdGxlTWFwXCJdKSB7XG4gIGlmICghdGl0bGVNYXApIHJldHVybiBjYXBpdGFsaXplKGZpZWxkS2V5LCB0cnVlKTtcbiAgaWYgKHR5cGVvZiB0aXRsZU1hcCA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdGl0bGVNYXAoZmllbGRLZXkpO1xuXG4gIHJldHVybiB0aXRsZU1hcFtmaWVsZEtleV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNob3dEZXRhaWxzU2NyZWVuO1xuIiwgImltcG9ydCB7IEljb24sIFRvYXN0LCBzaG93VG9hc3QsIHVzZU5hdmlnYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBJREVOVElUWV9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB7IGdldElkZW50aXR5RGV0YWlsc0NvcHlWYWx1ZSwgZ2V0SWRlbnRpdHlEZXRhaWxzTWFya2Rvd24sIGlkZW50aXR5Rm9ybU9yZGVyU29ydGVyIH0gZnJvbSBcIn4vdXRpbHMvaWRlbnRpdHlcIjtcbmltcG9ydCBTaG93RGV0YWlsc1NjcmVlbiBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvc2hhcmVkL1Nob3dEZXRhaWxzU2NyZWVuXCI7XG5cbmZ1bmN0aW9uIFNob3dJZGVudGl0eURldGFpbHNBY3Rpb24oKSB7XG4gIGNvbnN0IHsgcHVzaCB9ID0gdXNlTmF2aWdhdGlvbigpO1xuICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB1c2VTZWxlY3RlZFZhdWx0SXRlbSgpO1xuICBjb25zdCBnZXRVcGRhdGVkVmF1bHRJdGVtID0gdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSgpO1xuXG4gIGlmICghc2VsZWN0ZWRJdGVtLmlkZW50aXR5KSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBzaG93SWRlbnRpdHlEZXRhaWxzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZGVudGl0eSA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oc2VsZWN0ZWRJdGVtLCAoaXRlbSkgPT4gaXRlbS5pZGVudGl0eSwgXCJHZXR0aW5nIGlkZW50aXR5IGRldGFpbHMuLi5cIik7XG4gICAgICBpZiAoaWRlbnRpdHkpIHtcbiAgICAgICAgcHVzaChcbiAgICAgICAgICA8U2hvd0RldGFpbHNTY3JlZW5cbiAgICAgICAgICAgIGxhYmVsPVwiSWRlbnRpdHlcIlxuICAgICAgICAgICAgZGV0YWlscz17aWRlbnRpdHl9XG4gICAgICAgICAgICBpdGVtTmFtZT17c2VsZWN0ZWRJdGVtLm5hbWV9XG4gICAgICAgICAgICB0aXRsZU1hcD17SURFTlRJVFlfS0VZX0xBQkVMfVxuICAgICAgICAgICAgc29ydGVyPXtpZGVudGl0eUZvcm1PcmRlclNvcnRlcn1cbiAgICAgICAgICAgIGdldE1hcmtkb3duPXtnZXRJZGVudGl0eURldGFpbHNNYXJrZG93bn1cbiAgICAgICAgICAgIGdldENvcHlWYWx1ZT17Z2V0SWRlbnRpdHlEZXRhaWxzQ29weVZhbHVlfVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgaWRlbnRpdHkgZGV0YWlsc1wiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gc2hvdyBpZGVudGl0eSBkZXRhaWxzXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICB0aXRsZT1cIlNob3cgSWRlbnRpdHlcIlxuICAgICAgaWNvbj17SWNvbi5FeWV9XG4gICAgICBvbkFjdGlvbj17c2hvd0lkZW50aXR5RGV0YWlsc31cbiAgICAgIHJlcHJvbXB0RGVzY3JpcHRpb249e2BTaG93aW5nIHRoZSBpZGVudGl0eSBkZXRhaWxzIG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5leHBvcnQgZGVmYXVsdCBTaG93SWRlbnRpdHlEZXRhaWxzQWN0aW9uO1xuIiwgImltcG9ydCB7IFNIT1JUQ1VUX0tFWV9TRVFVRU5DRSB9IGZyb20gXCJ+L2NvbnN0YW50cy9nZW5lcmFsXCI7XG5pbXBvcnQgeyBJREVOVElUWV9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBJZGVudGl0eSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5pbXBvcnQgeyBwbGF0Zm9ybSB9IGZyb20gXCIuL3BsYXRmb3JtXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZGVudGl0eURldGFpbHNNYXJrZG93bihpdGVtTmFtZTogc3RyaW5nLCBpZGVudGl0eTogSWRlbnRpdHkpIHtcbiAgcmV0dXJuIGAjIFx1RDgzRVx1REVBQSAke2l0ZW1OYW1lfVxuJm5ic3A7XG58ICR7cGxhdGZvcm0gPT09IFwibWFjb3NcIiA/IFwiXHUyMzI1XCIgOiBcIkFsdFwifVxcdCoqRmllbGQqKiB8ICoqVmFsdWUqKiB8XG58IC0tLSB8IC0tLSB8XG4ke09iamVjdC5lbnRyaWVzKGlkZW50aXR5KVxuICAubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbGFiZWwgPSBJREVOVElUWV9LRVlfTEFCRUxba2V5IGFzIGtleW9mIElkZW50aXR5XTtcbiAgICBjb25zdCBzaG9ydGN1dEtleSA9IFNIT1JUQ1VUX0tFWV9TRVFVRU5DRVtpbmRleF07XG5cbiAgICByZXR1cm4gYHwgJHtzaG9ydGN1dEtleSA/IGAke3Nob3J0Y3V0S2V5fS5gIDogXCImbmJzcDtcIn1cXHQqKiR7bGFiZWx9KiogfCAke3ZhbHVlfSB8YDtcbiAgfSlcbiAgLmZpbHRlcihCb29sZWFuKVxuICAuam9pbihcIlxcblwiKX1cbmA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZGVudGl0eURldGFpbHNDb3B5VmFsdWUoaWRlbnRpdHk6IElkZW50aXR5KTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGlkZW50aXR5KVxuICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHZhbHVlID8gYCR7SURFTlRJVFlfS0VZX0xBQkVMW2tleSBhcyBrZXlvZiBJZGVudGl0eV19OiAke3ZhbHVlfWAgOiBudWxsKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cbmNvbnN0IElERU5USVRZX0tFWV9MQUJFTF9LRVlTID0gT2JqZWN0LmtleXMoSURFTlRJVFlfS0VZX0xBQkVMKTtcbi8qKiBzb3J0cyB0aGUgZmllbGRzIGFjY29yZGluZyB0byB0aGUgb3JkZXIgdGhleSBhcHBlYXIgb24gYml0d2FyZGVuJ3Mgd2ViIHZhdWx0IGZvcm0gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eUZvcm1PcmRlclNvcnRlcihbYV06IHN0cmluZyB8IFtzdHJpbmcsIGFueV0sIFtiXTogc3RyaW5nIHwgW3N0cmluZywgYW55XSkge1xuICBjb25zdCBhSW5kZXggPSBJREVOVElUWV9LRVlfTEFCRUxfS0VZUy5pbmRleE9mKChBcnJheS5pc0FycmF5KGEpID8gYVswXSA6IGEpIGFzIGtleW9mIElkZW50aXR5KTtcbiAgY29uc3QgYkluZGV4ID0gSURFTlRJVFlfS0VZX0xBQkVMX0tFWVMuaW5kZXhPZigoQXJyYXkuaXNBcnJheShiKSA/IGJbMF0gOiBiKSBhcyBrZXlvZiBJZGVudGl0eSk7XG4gIHJldHVybiBhSW5kZXggLSBiSW5kZXg7XG59XG4iLCAiaW1wb3J0IHsgQWN0aW9uLCBBY3Rpb25QYW5lbCwgQ2xpcGJvYXJkLCBEZXRhaWwsIEljb24sIFRvYXN0LCBzaG93VG9hc3QsIHVzZU5hdmlnYXRpb24gfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlIH0gZnJvbSBcIn4vdXRpbHMvY2xpcGJvYXJkXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcblxuZnVuY3Rpb24gU2hvd05vdGVzQWN0aW9uKCkge1xuICBjb25zdCB7IHB1c2ggfSA9IHVzZU5hdmlnYXRpb24oKTtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5ub3RlcykgcmV0dXJuIG51bGw7XG5cbiAgY29uc3Qgc2hvd05vdGVzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBub3RlcyA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oc2VsZWN0ZWRJdGVtLCAoaXRlbSkgPT4gaXRlbS5ub3RlcywgXCJHZXR0aW5nIG5vdGVzLi4uXCIpO1xuICAgICAgaWYgKG5vdGVzKSBwdXNoKDxEZXRhaWxzU2NyZWVuIGl0ZW1OYW1lPXtzZWxlY3RlZEl0ZW0ubmFtZX0gbm90ZXM9e25vdGVzfSAvPik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgbm90ZXNcIik7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHNob3cgbm90ZXNcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBY3Rpb25XaXRoUmVwcm9tcHRcbiAgICAgIHRpdGxlPVwiU2hvdyBOb3Rlc1wiXG4gICAgICBpY29uPXtJY29uLkV5ZX1cbiAgICAgIG9uQWN0aW9uPXtzaG93Tm90ZXN9XG4gICAgICByZXByb21wdERlc2NyaXB0aW9uPXtgU2hvd2luZyB0aGUgbm90ZXMgb2YgPCR7c2VsZWN0ZWRJdGVtLm5hbWV9PmB9XG4gICAgICBzaG9ydGN1dD17eyBtYWNPUzogeyBrZXk6IFwiblwiLCBtb2RpZmllcnM6IFtcIm9wdFwiXSB9LCB3aW5kb3dzOiB7IGtleTogXCJuXCIsIG1vZGlmaWVyczogW1wiYWx0XCJdIH0gfX1cbiAgICAvPlxuICApO1xufVxuXG5mdW5jdGlvbiBEZXRhaWxzU2NyZWVuKHsgaXRlbU5hbWUsIG5vdGVzIH06IHsgaXRlbU5hbWU6IHN0cmluZzsgbm90ZXM6IHN0cmluZyB9KSB7XG4gIGNvbnN0IGhhbmRsZUNvcHkgPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgQ2xpcGJvYXJkLmNvcHkobm90ZXMsIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcIm90aGVyXCIpIH0pO1xuICAgIGF3YWl0IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UoXCJDb3BpZWQgbm90ZXMgdG8gY2xpcGJvYXJkXCIpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPERldGFpbFxuICAgICAgbWFya2Rvd249e2dldE5vdGVzRGV0YWlsc01hcmtkb3duKGl0ZW1OYW1lLCBub3Rlcyl9XG4gICAgICBhY3Rpb25zPXtcbiAgICAgICAgPEFjdGlvblBhbmVsPlxuICAgICAgICAgIDxBY3Rpb24gdGl0bGU9XCJDb3B5IE5vdGVzXCIgb25BY3Rpb249e2hhbmRsZUNvcHl9IGljb249e0ljb24uQ2xpcGJvYXJkfSAvPlxuICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldE5vdGVzRGV0YWlsc01hcmtkb3duKGl0ZW1OYW1lOiBzdHJpbmcsIG5vdGVzOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGAjIFx1RDgzRFx1RENDNCAke2l0ZW1OYW1lfVxuJm5ic3A7XG5cXGBcXGBcXGBcbiR7bm90ZXN9XG5cXGBcXGBcXGBcbmA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNob3dOb3Rlc0FjdGlvbjtcbiIsICJpbXBvcnQgeyBDbGlwYm9hcmQsIEljb24sIHNob3dUb2FzdCwgVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyBjYXBpdGFsaXplIH0gZnJvbSBcIn4vdXRpbHMvc3RyaW5nc1wiO1xuaW1wb3J0IHsgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRJdGVtXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gXCJ+L3R5cGVzL3ZhdWx0XCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB7IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UgfSBmcm9tIFwifi91dGlscy9jbGlwYm9hcmRcIjtcblxudHlwZSBDb25zdHJhaW50ID0gUmVjb3JkT2ZBbnk7XG5cbmV4cG9ydCB0eXBlIENvcHlPYmplY3RTdHJpbmdGaWVsZHNBY3Rpb25zUHJvcHM8VFZhbHVlIGV4dGVuZHMgQ29uc3RyYWludD4gPSB7XG4gIHNlbGVjdG9yOiAoaXRlbTogSXRlbSkgPT4gVFZhbHVlIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgc29ydGVyPzogKGl0ZW1BOiBbc3RyaW5nLCBhbnldLCBpdGVtQjogW3N0cmluZywgYW55XSkgPT4gbnVtYmVyO1xuICBsYWJlbE1hcHBlcj86IChmaWVsZDoga2V5b2YgVFZhbHVlKSA9PiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBDb3B5T2JqZWN0U3RyaW5nRmllbGRzQWN0aW9uczxUVmFsdWUgZXh0ZW5kcyBDb25zdHJhaW50Pih7XG4gIHNlbGVjdG9yLFxuICBzb3J0ZXIsXG4gIGxhYmVsTWFwcGVyLFxufTogQ29weU9iamVjdFN0cmluZ0ZpZWxkc0FjdGlvbnNQcm9wczxUVmFsdWU+KSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbUVudHJpZXMgPSBnZXRJdGVtT2JqZWN0RW50cmllcyhzZWxlY3RlZEl0ZW0sIHNlbGVjdG9yLCBzb3J0ZXIpO1xuXG4gIGlmICghc2VsZWN0ZWRJdGVtRW50cmllcykgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgaGFuZGxlQ29weUZpZWxkID0gKGZpZWxkOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcpID0+IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBnZXRVcGRhdGVkVmF1bHRJdGVtKHNlbGVjdGVkSXRlbSwgKGl0ZW0pID0+IHNlbGVjdG9yKGl0ZW0pPy5bZmllbGRdLCBgR2V0dGluZyAke2ZpZWxkfS4uLmApO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBvZiAke2ZpZWxkfSBpcyBub3QgYSBzdHJpbmdgKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBhd2FpdCBDbGlwYm9hcmQuY29weSh2YWx1ZSwgeyB0cmFuc2llbnQ6IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlKFwib3RoZXJcIikgfSk7XG4gICAgICAgIGF3YWl0IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UoYENvcGllZCAke2xhYmVsfSB0byBjbGlwYm9hcmRgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIGBGYWlsZWQgdG8gY29weSAke2ZpZWxkfWApO1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihgRmFpbGVkIHRvIGNvcHkgJHtmaWVsZH1gLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtzZWxlY3RlZEl0ZW1FbnRyaWVzLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbE1hcHBlcj8uKGtleSBhcyBrZXlvZiBUVmFsdWUpID8/IGNhcGl0YWxpemUoa2V5KTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICAgICAgICBrZXk9e2Ake2luZGV4fS0ke2tleX1gfVxuICAgICAgICAgICAgdGl0bGU9e2BDb3B5ICR7bGFiZWx9YH1cbiAgICAgICAgICAgIGljb249e0ljb24uQ2xpcGJvYXJkfVxuICAgICAgICAgICAgb25BY3Rpb249e2hhbmRsZUNvcHlGaWVsZChrZXksIGxhYmVsKX1cbiAgICAgICAgICAgIHJlcHJvbXB0RGVzY3JpcHRpb249e2BDb3B5aW5nIHRoZSAke2xhYmVsfSBvZiA8JHtzZWxlY3RlZEl0ZW0ubmFtZX0+YH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfSl9XG4gICAgPC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW1PYmplY3RFbnRyaWVzPFRWYWx1ZSBleHRlbmRzIENvbnN0cmFpbnQ+KFxuICBzZWxlY3RlZEl0ZW06IEl0ZW0sXG4gIHNlbGVjdG9yOiBDb3B5T2JqZWN0U3RyaW5nRmllbGRzQWN0aW9uc1Byb3BzPFRWYWx1ZT5bXCJzZWxlY3RvclwiXSxcbiAgc29ydGVyOiBDb3B5T2JqZWN0U3RyaW5nRmllbGRzQWN0aW9uc1Byb3BzPFRWYWx1ZT5bXCJzb3J0ZXJcIl1cbikge1xuICBjb25zdCB2YWx1ZSA9IHNlbGVjdG9yKHNlbGVjdGVkSXRlbSk7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgaXRlbUVudHJpZXMgPSBPYmplY3QuZW50cmllcyh2YWx1ZSk7XG4gIGlmIChzb3J0ZXIpIGl0ZW1FbnRyaWVzLnNvcnQoc29ydGVyKTtcblxuICByZXR1cm4gaXRlbUVudHJpZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcHlPYmplY3RTdHJpbmdGaWVsZHNBY3Rpb25zO1xuIiwgImltcG9ydCBDb3B5T2JqZWN0U3RyaW5nRmllbGRzQWN0aW9ucyBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvc2hhcmVkL0NvcHlPYmplY3RGaWVsZHNBY3Rpb25zXCI7XG5pbXBvcnQgeyBJREVOVElUWV9LRVlfTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBpZGVudGl0eUZvcm1PcmRlclNvcnRlciB9IGZyb20gXCJ+L3V0aWxzL2lkZW50aXR5XCI7XG5cbmZ1bmN0aW9uIENvcHlJZGVudGl0eUZpZWxkc0FjdGlvbnMoKSB7XG4gIHJldHVybiAoXG4gICAgPENvcHlPYmplY3RTdHJpbmdGaWVsZHNBY3Rpb25zXG4gICAgICBzZWxlY3Rvcj17KGl0ZW0pID0+IGl0ZW0uaWRlbnRpdHl9XG4gICAgICBzb3J0ZXI9e2lkZW50aXR5Rm9ybU9yZGVyU29ydGVyfVxuICAgICAgbGFiZWxNYXBwZXI9eyhmaWVsZCkgPT4gSURFTlRJVFlfS0VZX0xBQkVMW2ZpZWxkXX1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5SWRlbnRpdHlGaWVsZHNBY3Rpb25zO1xuIiwgImltcG9ydCBDb3B5T2JqZWN0U3RyaW5nRmllbGRzQWN0aW9ucyBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2FjdGlvbnMvc2hhcmVkL0NvcHlPYmplY3RGaWVsZHNBY3Rpb25zXCI7XG5pbXBvcnQgeyBDQVJEX0tFWV9MQUJFTCB9IGZyb20gXCJ+L2NvbnN0YW50cy9sYWJlbHNcIjtcbmltcG9ydCB7IGNhcmRCaXR3YXJkZW5QYWdlRmllbGRPcmRlclNvcnRlciB9IGZyb20gXCJ+L3V0aWxzL2NhcmRzXCI7XG5cbmZ1bmN0aW9uIENvcHlDYXJkRmllbGRzQWN0aW9ucygpIHtcbiAgcmV0dXJuIChcbiAgICA8Q29weU9iamVjdFN0cmluZ0ZpZWxkc0FjdGlvbnNcbiAgICAgIHNlbGVjdG9yPXsoaXRlbSkgPT4gaXRlbS5jYXJkfVxuICAgICAgc29ydGVyPXtjYXJkQml0d2FyZGVuUGFnZUZpZWxkT3JkZXJTb3J0ZXJ9XG4gICAgICBsYWJlbE1hcHBlcj17KGZpZWxkKSA9PiBDQVJEX0tFWV9MQUJFTFtmaWVsZF19XG4gICAgLz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29weUNhcmRGaWVsZHNBY3Rpb25zO1xuIiwgImltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IENvcHlPYmplY3RTdHJpbmdGaWVsZHNBY3Rpb25zIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9zaGFyZWQvQ29weU9iamVjdEZpZWxkc0FjdGlvbnNcIjtcblxuZnVuY3Rpb24gQ29weUxvZ2luVXJpc0FjdGlvbnMoKSB7XG4gIGNvbnN0IGdldFVyaU1hcCA9IChpdGVtOiBJdGVtKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGl0ZW0ubG9naW4/LnVyaXM/LnJlZHVjZTxSZWNvcmRPZlN0cmluZ3M+KChyZXN1bHQsIHVyaSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCF1cmkudXJpKSByZXR1cm4gcmVzdWx0O1xuICAgICAgICByZXN1bHRbYFVSSSAke2luZGV4ICsgMX1gXSA9IHVyaS51cmk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LCB7fSkgPz8ge31cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiA8Q29weU9iamVjdFN0cmluZ0ZpZWxkc0FjdGlvbnMgc2VsZWN0b3I9e2dldFVyaU1hcH0gLz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcHlMb2dpblVyaXNBY3Rpb25zO1xuIiwgImltcG9ydCB7IEFjdGlvbiwgQ2xpcGJvYXJkLCBJY29uLCBUb2FzdCwgc2hvd1RvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlU2VsZWN0ZWRWYXVsdEl0ZW0gfSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L2NvbnRleHQvdmF1bHRJdGVtXCI7XG5pbXBvcnQgdXNlR2V0VXBkYXRlZFZhdWx0SXRlbSBmcm9tIFwifi9jb21wb25lbnRzL3NlYXJjaFZhdWx0L3V0aWxzL3VzZUdldFVwZGF0ZWRWYXVsdEl0ZW1cIjtcbmltcG9ydCB7IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UgfSBmcm9tIFwifi91dGlscy9jbGlwYm9hcmRcIjtcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tIFwifi91dGlscy9kZXZlbG9wbWVudFwiO1xuaW1wb3J0IHsgZ2V0VHJhbnNpZW50Q29weVByZWZlcmVuY2UgfSBmcm9tIFwifi91dGlscy9wcmVmZXJlbmNlc1wiO1xuXG5mdW5jdGlvbiBDb3B5Tm90ZXNBY3Rpb24oKSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG5cbiAgaWYgKCFzZWxlY3RlZEl0ZW0ubm90ZXMpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhhbmRsZUNvcHlOb3RlcyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSBhd2FpdCBnZXRVcGRhdGVkVmF1bHRJdGVtKHNlbGVjdGVkSXRlbSwgKGl0ZW0pID0+IGl0ZW0ubm90ZXMsIFwiR2V0dGluZyBub3Rlcy4uLlwiKTtcbiAgICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgICBhd2FpdCBDbGlwYm9hcmQuY29weSh1c2VybmFtZSwgeyB0cmFuc2llbnQ6IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlKFwib3RoZXJcIikgfSk7XG4gICAgICAgIGF3YWl0IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UoXCJDb3BpZWQgbm90ZXMgdG8gY2xpcGJvYXJkXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBzaG93VG9hc3QoVG9hc3QuU3R5bGUuRmFpbHVyZSwgXCJGYWlsZWQgdG8gZ2V0IG5vdGVzXCIpO1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjb3B5IG5vdGVzXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIDxBY3Rpb24gdGl0bGU9XCJDb3B5IE5vdGVzXCIgaWNvbj17SWNvbi5DbGlwYm9hcmR9IG9uQWN0aW9uPXtoYW5kbGVDb3B5Tm90ZXN9IC8+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb3B5Tm90ZXNBY3Rpb247XG4iLCAiaW1wb3J0IENvcHlPYmplY3RTdHJpbmdGaWVsZHNBY3Rpb25zIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvYWN0aW9ucy9zaGFyZWQvQ29weU9iamVjdEZpZWxkc0FjdGlvbnNcIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuXG5mdW5jdGlvbiBDb3B5Q3VzdG9tRmllbGRzQWN0aW9ucygpIHtcbiAgY29uc3QgZ2V0RmllbGRNYXAgPSAoaXRlbTogSXRlbSk6IFJlY29yZE9mU3RyaW5ncyA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhpdGVtLmZpZWxkcz8ubWFwKChmaWVsZCkgPT4gW2ZpZWxkLm5hbWUsIGZpZWxkLnZhbHVlXSkgfHwgW10pO1xuICB9O1xuXG4gIHJldHVybiA8Q29weU9iamVjdFN0cmluZ0ZpZWxkc0FjdGlvbnMgc2VsZWN0b3I9e2dldEZpZWxkTWFwfSAvPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29weUN1c3RvbUZpZWxkc0FjdGlvbnM7XG4iLCAiaW1wb3J0IHsgQ2xpcGJvYXJkLCBJY29uLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IEFjdGlvbldpdGhSZXByb21wdCBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9uV2l0aFJlcHJvbXB0XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZSB9IGZyb20gXCJ+L3V0aWxzL2NsaXBib2FyZFwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZSB9IGZyb20gXCJ+L3V0aWxzL3ByZWZlcmVuY2VzXCI7XG5cbmZ1bmN0aW9uIENvcHlQdWJsaWNLZXlBY3Rpb24oKSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG5cbiAgaWYgKCFzZWxlY3RlZEl0ZW0uc3NoS2V5Py5wdWJsaWNLZXkpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhhbmRsZUNvcHlQdWJsaWNLZXkgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oXG4gICAgICAgIHNlbGVjdGVkSXRlbSxcbiAgICAgICAgKGl0ZW0pID0+IGl0ZW0uc3NoS2V5Py5wdWJsaWNLZXksXG4gICAgICAgIFwiR2V0dGluZyBwdWJsaWMga2V5Li4uXCJcbiAgICAgICk7XG4gICAgICBpZiAocHVibGljS2V5KSB7XG4gICAgICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KHB1YmxpY0tleSwgeyB0cmFuc2llbnQ6IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlKFwib3RoZXJcIikgfSk7XG4gICAgICAgIGF3YWl0IHNob3dDb3B5U3VjY2Vzc01lc3NhZ2UoXCJDb3BpZWQgcHVibGljIGtleSB0byBjbGlwYm9hcmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQgcHVibGljIGtleVwiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29weSBwdWJsaWMga2V5XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QWN0aW9uV2l0aFJlcHJvbXB0XG4gICAgICB0aXRsZT1cIkNvcHkgUHVibGljIEtleVwiXG4gICAgICBpY29uPXtJY29uLktleX1cbiAgICAgIG9uQWN0aW9uPXtoYW5kbGVDb3B5UHVibGljS2V5fVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YENvcHlpbmcgdGhlIHB1YmxpYyBrZXkgb2YgPCR7c2VsZWN0ZWRJdGVtLm5hbWV9PmB9XG4gICAgLz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29weVB1YmxpY0tleUFjdGlvbjtcbiIsICJpbXBvcnQgeyBBY3Rpb24sIEljb24sIFRvYXN0LCBzaG93VG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB7IHVzZUZhdm9yaXRlc0NvbnRleHQgfSBmcm9tIFwifi9jb250ZXh0L2Zhdm9yaXRlc1wiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5cbmZ1bmN0aW9uIEZhdm9yaXRlSXRlbUFjdGlvbnMoKSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IHsgZmF2b3JpdGVPcmRlciwgdG9nZ2xlRmF2b3JpdGUsIG1vdmVGYXZvcml0ZSB9ID0gdXNlRmF2b3JpdGVzQ29udGV4dCgpO1xuXG4gIGNvbnN0IGlzQml0d2FyZGVuRmF2b3JpdGUgPSBzZWxlY3RlZEl0ZW0uZmF2b3JpdGU7XG4gIGNvbnN0IGlzTG9jYWxGYXZvcml0ZSA9IGZhdm9yaXRlT3JkZXIuaW5jbHVkZXMoc2VsZWN0ZWRJdGVtLmlkKTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGVGYXZvcml0ZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdG9nZ2xlRmF2b3JpdGUoc2VsZWN0ZWRJdGVtKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIHRvZ2dsZSBmYXZvcml0ZSBcdTI2MzlcdUZFMEZcIik7XG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKFwiRmFpbGVkIHRvIHRvZ2dsZSBmYXZvcml0ZVwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU1vdmVGYXZvcml0ZSA9IChkaXI6IFwidXBcIiB8IFwiZG93blwiKSA9PiAoKSA9PiBtb3ZlRmF2b3JpdGUoc2VsZWN0ZWRJdGVtLCBkaXIpO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHshaXNCaXR3YXJkZW5GYXZvcml0ZSAmJiAoXG4gICAgICAgIDxBY3Rpb25cbiAgICAgICAgICB0aXRsZT17aXNMb2NhbEZhdm9yaXRlID8gXCJSZW1vdmUgRmF2b3JpdGVcIiA6IFwiTWFyayBBcyBGYXZvcml0ZVwifVxuICAgICAgICAgIG9uQWN0aW9uPXtoYW5kbGVUb2dnbGVGYXZvcml0ZX1cbiAgICAgICAgICBpY29uPXtpc0xvY2FsRmF2b3JpdGUgPyBJY29uLlN0YXJEaXNhYmxlZCA6IEljb24uU3Rhcn1cbiAgICAgICAgICBzaG9ydGN1dD17eyBtYWNPUzogeyBrZXk6IFwiZlwiLCBtb2RpZmllcnM6IFtcIm9wdFwiXSB9LCB3aW5kb3dzOiB7IGtleTogXCJmXCIsIG1vZGlmaWVyczogW1wiYWx0XCJdIH0gfX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7KGlzQml0d2FyZGVuRmF2b3JpdGUgfHwgaXNMb2NhbEZhdm9yaXRlKSAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgdGl0bGU9XCJNb3ZlIEZhdm9yaXRlIFVwXCJcbiAgICAgICAgICAgIG9uQWN0aW9uPXtoYW5kbGVNb3ZlRmF2b3JpdGUoXCJ1cFwiKX1cbiAgICAgICAgICAgIGljb249e0ljb24uQXJyb3dVcENpcmNsZUZpbGxlZH1cbiAgICAgICAgICAgIHNob3J0Y3V0PXt7XG4gICAgICAgICAgICAgIG1hY09TOiB7IGtleTogXCJhcnJvd1VwXCIsIG1vZGlmaWVyczogW1wib3B0XCIsIFwic2hpZnRcIl0gfSxcbiAgICAgICAgICAgICAgd2luZG93czogeyBrZXk6IFwiYXJyb3dVcFwiLCBtb2RpZmllcnM6IFtcImFsdFwiLCBcInNoaWZ0XCJdIH0sXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgdGl0bGU9XCJNb3ZlIEZhdm9yaXRlIERvd25cIlxuICAgICAgICAgICAgb25BY3Rpb249e2hhbmRsZU1vdmVGYXZvcml0ZShcImRvd25cIil9XG4gICAgICAgICAgICBpY29uPXtJY29uLkFycm93RG93bkNpcmNsZUZpbGxlZH1cbiAgICAgICAgICAgIHNob3J0Y3V0PXt7XG4gICAgICAgICAgICAgIG1hY09TOiB7IGtleTogXCJhcnJvd0Rvd25cIiwgbW9kaWZpZXJzOiBbXCJvcHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICAgICAgICB3aW5kb3dzOiB7IGtleTogXCJhcnJvd0Rvd25cIiwgbW9kaWZpZXJzOiBbXCJhbHRcIiwgXCJzaGlmdFwiXSB9LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZhdm9yaXRlSXRlbUFjdGlvbnM7XG4iLCAiaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgRGlzcGF0Y2gsIFNldFN0YXRlQWN0aW9uLCBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBWYXVsdExvYWRpbmdGYWxsYmFjayB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvVmF1bHRMb2FkaW5nRmFsbGJhY2tcIjtcbmltcG9ydCB7IExPQ0FMX1NUT1JBR0VfS0VZIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IHVzZVZhdWx0Q29udGV4dCB9IGZyb20gXCJ+L2NvbnRleHQvdmF1bHRcIjtcbmltcG9ydCB7IEl0ZW0gfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyB1c2VBc3luY0VmZmVjdCB9IGZyb20gXCJ+L3V0aWxzL2hvb2tzL3VzZUFzeW5jRWZmZWN0XCI7XG5cbnR5cGUgRmF2b3JpdGVzQ29udGV4dCA9IHtcbiAgZmF2b3JpdGVPcmRlcjogc3RyaW5nW107XG4gIHNldEZhdm9yaXRlT3JkZXI6IERpc3BhdGNoPFNldFN0YXRlQWN0aW9uPHN0cmluZ1tdIHwgdW5kZWZpbmVkPj47XG4gIHRvZ2dsZUZhdm9yaXRlOiAoaXRlbTogSXRlbSkgPT4gdm9pZDtcbiAgbW92ZUZhdm9yaXRlOiAoaXRlbTogSXRlbSwgZGlyZWN0aW9uOiBcInVwXCIgfCBcImRvd25cIikgPT4gdm9pZDtcbn07XG5cbmNvbnN0IEZhdm9yaXRlc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0PEZhdm9yaXRlc0NvbnRleHQ+KHt9IGFzIEZhdm9yaXRlc0NvbnRleHQpO1xuXG50eXBlIEZhdm9yaXRlc1Byb3ZpZGVyUHJvcHMgPSB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gRmF2b3JpdGVzUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiBGYXZvcml0ZXNQcm92aWRlclByb3BzKSB7XG4gIGNvbnN0IHsgaXRlbXMgfSA9IHVzZVZhdWx0Q29udGV4dCgpO1xuXG4gIGNvbnN0IFtmYXZvcml0ZU9yZGVyLCBzZXRGYXZvcml0ZU9yZGVyXSA9IHVzZVN0YXRlPHN0cmluZ1tdPigpO1xuXG4gIHVzZUFzeW5jRWZmZWN0KGFzeW5jICgpID0+IHtcbiAgICAvLyByZXN0b3JlIGZhdm9yaXRlIG9yZGVyIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgIGNvbnN0IHNlcmlhbGl6ZWRGYXZvcml0ZU9yZGVyID0gYXdhaXQgZ2V0U2F2ZWRGYXZvcml0ZU9yZGVyKCk7XG4gICAgc2V0RmF2b3JpdGVPcmRlcihzZXJpYWxpemVkRmF2b3JpdGVPcmRlciA/PyBbXSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG1ha2VzIHN1cmUgb25seSBhbmQgYWxsIHRoZSBleGlzdGluZyBmYXZvcml0ZXMgYXJlIGluIHRoZSBvcmRlciBhcnJheVxuICAgIGlmICghZmF2b3JpdGVPcmRlcikgcmV0dXJuO1xuICAgIGNvbnN0IGNsZWFuRmF2b3JpdGVPcmRlciA9IGl0ZW1zLmZsYXRNYXAoKGl0ZW0pID0+IHtcbiAgICAgIGlmICghaXRlbS5mYXZvcml0ZSkgcmV0dXJuIFtdO1xuICAgICAgcmV0dXJuICFmYXZvcml0ZU9yZGVyLnNvbWUoKGZpZCkgPT4gZmlkID09PSBpdGVtLmlkKSA/IFtpdGVtLmlkXSA6IFtdO1xuICAgIH0pO1xuICAgIGlmIChjbGVhbkZhdm9yaXRlT3JkZXIubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgc2V0RmF2b3JpdGVPcmRlcihBcnJheS5mcm9tKG5ldyBTZXQoY2xlYW5GYXZvcml0ZU9yZGVyKSkpO1xuICB9LCBbaXRlbXMsICEhZmF2b3JpdGVPcmRlcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8ga2VlcCBsb2NhbCBzdG9yYWdlIGZhdm9yaXRlIG9yZGVyIHVwIHRvIGRhdGVcbiAgICBpZiAoIWZhdm9yaXRlT3JkZXIpIHJldHVybjtcbiAgICB2b2lkIHBlcnNpc3RGYXZvcml0ZU9yZGVyKGZhdm9yaXRlT3JkZXIpO1xuICB9LCBbZmF2b3JpdGVPcmRlcl0pO1xuXG4gIGNvbnN0IHRvZ2dsZUZhdm9yaXRlID0gKGl0ZW06IEl0ZW0pID0+IHtcbiAgICBzZXRGYXZvcml0ZU9yZGVyKChvcmRlciA9IFtdKSA9PiB7XG4gICAgICBpZiAoIWZhdm9yaXRlT3JkZXI/LmluY2x1ZGVzKGl0ZW0uaWQpKSByZXR1cm4gW2l0ZW0uaWQsIC4uLm9yZGVyXTtcbiAgICAgIHJldHVybiBvcmRlci5maWx0ZXIoKGZpZCkgPT4gZmlkICE9PSBpdGVtLmlkKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBtb3ZlRmF2b3JpdGUgPSAoeyBpZCB9OiBJdGVtLCBkaXJlY3Rpb246IFwidXBcIiB8IFwiZG93blwiKSA9PiB7XG4gICAgaWYgKCFmYXZvcml0ZU9yZGVyKSByZXR1cm47XG4gICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gZmF2b3JpdGVPcmRlci5pbmRleE9mKGlkKTtcbiAgICBpZiAoY3VycmVudFBvc2l0aW9uID09PSAtMSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbmV3UG9zaXRpb24gPSBjdXJyZW50UG9zaXRpb24gKyAoZGlyZWN0aW9uID09PSBcInVwXCIgPyAtMSA6IDEpO1xuICAgIGlmIChuZXdQb3NpdGlvbiA+PSAwICYmIG5ld1Bvc2l0aW9uIDwgZmF2b3JpdGVPcmRlci5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IG5ld0Zhdm9yaXRlT3JkZXIgPSBmYXZvcml0ZU9yZGVyLnNsaWNlKDApO1xuICAgICAgbmV3RmF2b3JpdGVPcmRlci5zcGxpY2UoY3VycmVudFBvc2l0aW9uLCAxKTsgLy8gcmVtb3ZlIGZyb20gY3VycmVudCBwb3NpdGlvblxuICAgICAgbmV3RmF2b3JpdGVPcmRlci5zcGxpY2UobmV3UG9zaXRpb24sIDAsIGlkKTsgLy8gaW5zZXJ0IGF0IG5ldyBwb3NpdGlvblxuICAgICAgc2V0RmF2b3JpdGVPcmRlcihuZXdGYXZvcml0ZU9yZGVyKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKCFmYXZvcml0ZU9yZGVyKSByZXR1cm4gPFZhdWx0TG9hZGluZ0ZhbGxiYWNrIC8+O1xuXG4gIHJldHVybiAoXG4gICAgPEZhdm9yaXRlc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgZmF2b3JpdGVPcmRlciwgc2V0RmF2b3JpdGVPcmRlciwgdG9nZ2xlRmF2b3JpdGUsIG1vdmVGYXZvcml0ZSB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0Zhdm9yaXRlc0NvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBjb25zdCB1c2VGYXZvcml0ZXNDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChGYXZvcml0ZXNDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VGYXZvcml0ZXNDb250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBGYXZvcml0ZXNQcm92aWRlclwiKTtcbiAgcmV0dXJuIGNvbnRleHQ7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRTYXZlZEZhdm9yaXRlT3JkZXIoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZEZhdm9yaXRlT3JkZXIgPSBhd2FpdCBMb2NhbFN0b3JhZ2UuZ2V0SXRlbTxzdHJpbmc+KExPQ0FMX1NUT1JBR0VfS0VZLlZBVUxUX0ZBVk9SSVRFX09SREVSKTtcbiAgICByZXR1cm4gc2VyaWFsaXplZEZhdm9yaXRlT3JkZXIgPyBKU09OLnBhcnNlPHN0cmluZ1tdPihzZXJpYWxpemVkRmF2b3JpdGVPcmRlcikgOiB1bmRlZmluZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgZmF2b3JpdGUgb3JkZXIgZnJvbSBsb2NhbCBzdG9yYWdlXCIsIGVycm9yKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBlcnNpc3RGYXZvcml0ZU9yZGVyKG9yZGVyOiBzdHJpbmdbXSkge1xuICB0cnkge1xuICAgIGF3YWl0IExvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZLlZBVUxUX0ZBVk9SSVRFX09SREVSLCBKU09OLnN0cmluZ2lmeShvcmRlcikpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gcGVyc2lzdCBmYXZvcml0ZSBvcmRlciB0byBsb2NhbCBzdG9yYWdlXCIsIGVycm9yKTtcbiAgfVxufVxuXG50eXBlIEZhdm9yaXRlSXRlbSA9IEl0ZW0gJiB7XG4gIGxpc3RPcmRlcjogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgVmF1bHRJdGVtc1dpdGhGYXZvcml0ZXMgPSB7XG4gIGZhdm9yaXRlSXRlbXM6IEZhdm9yaXRlSXRlbVtdO1xuICBub25GYXZvcml0ZUl0ZW1zOiBJdGVtW107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2VwYXJhdGVGYXZvcml0ZUl0ZW1zKGl0ZW1zOiBJdGVtW10pIHtcbiAgY29uc3QgeyBmYXZvcml0ZU9yZGVyIH0gPSB1c2VGYXZvcml0ZXNDb250ZXh0KCk7XG5cbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNlY3Rpb25lZEl0ZW1zID0gaXRlbXMucmVkdWNlPFZhdWx0SXRlbXNXaXRoRmF2b3JpdGVzPihcbiAgICAgIChyZXN1bHQsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgZmF2b3JpdGVQb3NpdGlvbiA9IGZhdm9yaXRlT3JkZXIuaW5kZXhPZihpdGVtLmlkKTtcbiAgICAgICAgaWYgKGl0ZW0uZmF2b3JpdGUgfHwgZmF2b3JpdGVQb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICByZXN1bHQuZmF2b3JpdGVJdGVtcy5wdXNoKHsgLi4uaXRlbSwgbGlzdE9yZGVyOiBmYXZvcml0ZVBvc2l0aW9uID8/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5ub25GYXZvcml0ZUl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICB7IGZhdm9yaXRlSXRlbXM6IFtdLCBub25GYXZvcml0ZUl0ZW1zOiBbXSB9XG4gICAgKTtcbiAgICBzZWN0aW9uZWRJdGVtcy5mYXZvcml0ZUl0ZW1zLnNvcnQoKGEsIGIpID0+IGEubGlzdE9yZGVyIC0gYi5saXN0T3JkZXIpO1xuXG4gICAgcmV0dXJuIHNlY3Rpb25lZEl0ZW1zO1xuICB9LCBbaXRlbXMsIGZhdm9yaXRlT3JkZXJdKTtcbn1cbiIsICJpbXBvcnQgeyBEZXBlbmRlbmN5TGlzdCwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgRWZmZWN0Q2FsbGJhY2sgPSAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXN5bmNFZmZlY3QoZWZmZWN0OiBFZmZlY3RDYWxsYmFjaywgZGVwcz86IERlcGVuZGVuY3lMaXN0KSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdm9pZCBlZmZlY3QoKTtcbiAgfSwgZGVwcyk7XG59XG4iLCAiaW1wb3J0IHsgQ2xpcGJvYXJkLCBJY29uLCBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IEFjdGlvbldpdGhSZXByb21wdCBmcm9tIFwifi9jb21wb25lbnRzL2FjdGlvbnMvQWN0aW9uV2l0aFJlcHJvbXB0XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RlZFZhdWx0SXRlbSB9IGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvY29udGV4dC92YXVsdEl0ZW1cIjtcbmltcG9ydCB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtIGZyb20gXCJ+L2NvbXBvbmVudHMvc2VhcmNoVmF1bHQvdXRpbHMvdXNlR2V0VXBkYXRlZFZhdWx0SXRlbVwiO1xuaW1wb3J0IHsgc2hvd0NvcHlTdWNjZXNzTWVzc2FnZSB9IGZyb20gXCJ+L3V0aWxzL2NsaXBib2FyZFwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5pbXBvcnQgeyBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZSB9IGZyb20gXCJ+L3V0aWxzL3ByZWZlcmVuY2VzXCI7XG5cbmZ1bmN0aW9uIENvcHlLZXlGaW5nZXJwcmludEFjdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdXNlU2VsZWN0ZWRWYXVsdEl0ZW0oKTtcbiAgY29uc3QgZ2V0VXBkYXRlZFZhdWx0SXRlbSA9IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0oKTtcblxuICBpZiAoIXNlbGVjdGVkSXRlbS5zc2hLZXk/LmtleUZpbmdlcnByaW50KSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVDb3B5S2V5RmluZ2VycHJpbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleUZpbmdlcnByaW50ID0gYXdhaXQgZ2V0VXBkYXRlZFZhdWx0SXRlbShcbiAgICAgICAgc2VsZWN0ZWRJdGVtLFxuICAgICAgICAoaXRlbSkgPT4gaXRlbS5zc2hLZXk/LmtleUZpbmdlcnByaW50LFxuICAgICAgICBcIkdldHRpbmcga2V5IGZpbmdlcnByaW50Li4uXCJcbiAgICAgICk7XG4gICAgICBpZiAoa2V5RmluZ2VycHJpbnQpIHtcbiAgICAgICAgYXdhaXQgQ2xpcGJvYXJkLmNvcHkoa2V5RmluZ2VycHJpbnQsIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcIm90aGVyXCIpIH0pO1xuICAgICAgICBhd2FpdCBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlKFwiQ29waWVkIGtleSBmaW5nZXJwcmludCB0byBjbGlwYm9hcmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IHNob3dUb2FzdChUb2FzdC5TdHlsZS5GYWlsdXJlLCBcIkZhaWxlZCB0byBnZXQga2V5IGZpbmdlcnByaW50XCIpO1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBjb3B5IGtleSBmaW5nZXJwcmludFwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvbldpdGhSZXByb21wdFxuICAgICAgdGl0bGU9XCJDb3B5IEtleSBGaW5nZXJwcmludFwiXG4gICAgICBpY29uPXtJY29uLktleX1cbiAgICAgIG9uQWN0aW9uPXtoYW5kbGVDb3B5S2V5RmluZ2VycHJpbnR9XG4gICAgICByZXByb21wdERlc2NyaXB0aW9uPXtgQ29weWluZyB0aGUga2V5IGZpbmdlcnByaW50IG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcHlLZXlGaW5nZXJwcmludEFjdGlvbjtcbiIsICJpbXBvcnQgeyBDbGlwYm9hcmQsIEljb24sIHNob3dUb2FzdCwgVG9hc3QgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQgQWN0aW9uV2l0aFJlcHJvbXB0IGZyb20gXCJ+L2NvbXBvbmVudHMvYWN0aW9ucy9BY3Rpb25XaXRoUmVwcm9tcHRcIjtcbmltcG9ydCB7IHVzZVNlbGVjdGVkVmF1bHRJdGVtIH0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC9jb250ZXh0L3ZhdWx0SXRlbVwiO1xuaW1wb3J0IHVzZUdldFVwZGF0ZWRWYXVsdEl0ZW0gZnJvbSBcIn4vY29tcG9uZW50cy9zZWFyY2hWYXVsdC91dGlscy91c2VHZXRVcGRhdGVkVmF1bHRJdGVtXCI7XG5pbXBvcnQgeyBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlIH0gZnJvbSBcIn4vdXRpbHMvY2xpcGJvYXJkXCI7XG5pbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSBcIn4vdXRpbHMvZGV2ZWxvcG1lbnRcIjtcbmltcG9ydCB7IGdldFRyYW5zaWVudENvcHlQcmVmZXJlbmNlIH0gZnJvbSBcIn4vdXRpbHMvcHJlZmVyZW5jZXNcIjtcblxuZnVuY3Rpb24gQ29weVByaXZhdGVLZXlBY3Rpb24oKSB7XG4gIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHVzZVNlbGVjdGVkVmF1bHRJdGVtKCk7XG4gIGNvbnN0IGdldFVwZGF0ZWRWYXVsdEl0ZW0gPSB1c2VHZXRVcGRhdGVkVmF1bHRJdGVtKCk7XG5cbiAgaWYgKCFzZWxlY3RlZEl0ZW0uc3NoS2V5Py5wcml2YXRlS2V5KSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVDb3B5UHJpdmF0ZUtleSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJpdmF0ZUtleSA9IGF3YWl0IGdldFVwZGF0ZWRWYXVsdEl0ZW0oXG4gICAgICAgIHNlbGVjdGVkSXRlbSxcbiAgICAgICAgKGl0ZW0pID0+IGl0ZW0uc3NoS2V5Py5wcml2YXRlS2V5LFxuICAgICAgICBcIkdldHRpbmcgcHJpdmF0ZSBrZXkuLi5cIlxuICAgICAgKTtcbiAgICAgIGlmIChwcml2YXRlS2V5KSB7XG4gICAgICAgIGF3YWl0IENsaXBib2FyZC5jb3B5KHByaXZhdGVLZXksIHsgdHJhbnNpZW50OiBnZXRUcmFuc2llbnRDb3B5UHJlZmVyZW5jZShcIm90aGVyXCIpIH0pO1xuICAgICAgICBhd2FpdCBzaG93Q29weVN1Y2Nlc3NNZXNzYWdlKFwiQ29waWVkIHByaXZhdGUga2V5IHRvIGNsaXBib2FyZFwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgc2hvd1RvYXN0KFRvYXN0LlN0eWxlLkZhaWx1cmUsIFwiRmFpbGVkIHRvIGdldCBwcml2YXRlIGtleVwiKTtcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oXCJGYWlsZWQgdG8gY29weSBwcml2YXRlIGtleVwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFjdGlvbldpdGhSZXByb21wdFxuICAgICAgdGl0bGU9XCJDb3B5IFByaXZhdGUgS2V5XCJcbiAgICAgIGljb249e0ljb24uS2V5fVxuICAgICAgb25BY3Rpb249e2hhbmRsZUNvcHlQcml2YXRlS2V5fVxuICAgICAgcmVwcm9tcHREZXNjcmlwdGlvbj17YENvcHlpbmcgdGhlIHByaXZhdGUga2V5IG9mIDwke3NlbGVjdGVkSXRlbS5uYW1lfT5gfVxuICAgIC8+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvcHlQcml2YXRlS2V5QWN0aW9uO1xuIiwgImltcG9ydCB7IENvbG9yLCBJY29uLCBMaXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSVRFTV9UWVBFX1RPX0lDT05fTUFQIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IElURU1fVFlQRV9UT19MQUJFTCB9IGZyb20gXCJ+L2NvbnN0YW50cy9sYWJlbHNcIjtcbmltcG9ydCB7IHVzZUZhdm9yaXRlc0NvbnRleHQgfSBmcm9tIFwifi9jb250ZXh0L2Zhdm9yaXRlc1wiO1xuaW1wb3J0IHsgRm9sZGVyLCBJdGVtLCBJdGVtVHlwZSwgUmVwcm9tcHQgfSBmcm9tIFwifi90eXBlcy92YXVsdFwiO1xuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJ+L3V0aWxzL2RldmVsb3BtZW50XCI7XG5cbnR5cGUgTGlzdEl0ZW1BY2Nlc3NvcnkgPSBOb25OdWxsYWJsZTxMaXN0Lkl0ZW0uUHJvcHNbXCJhY2Nlc3Nvcmllc1wiXT5bbnVtYmVyXTtcbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfVE9fQUNDRVNTT1JZX01BUDogUmVjb3JkPEl0ZW1UeXBlLCBMaXN0SXRlbUFjY2Vzc29yeT4gPSB7XG4gIFtJdGVtVHlwZS5MT0dJTl06IHtcbiAgICBpY29uOiB7IHNvdXJjZTogSVRFTV9UWVBFX1RPX0lDT05fTUFQW0l0ZW1UeXBlLkxPR0lOXSwgdGludENvbG9yOiBDb2xvci5CbHVlIH0sXG4gICAgdG9vbHRpcDogSVRFTV9UWVBFX1RPX0xBQkVMW0l0ZW1UeXBlLkxPR0lOXSxcbiAgfSxcbiAgW0l0ZW1UeXBlLkNBUkRdOiB7XG4gICAgaWNvbjogeyBzb3VyY2U6IElURU1fVFlQRV9UT19JQ09OX01BUFtJdGVtVHlwZS5DQVJEXSwgdGludENvbG9yOiBDb2xvci5HcmVlbiB9LFxuICAgIHRvb2x0aXA6IElURU1fVFlQRV9UT19MQUJFTFtJdGVtVHlwZS5DQVJEXSxcbiAgfSxcbiAgW0l0ZW1UeXBlLklERU5USVRZXToge1xuICAgIGljb246IHsgc291cmNlOiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuSURFTlRJVFldLCB0aW50Q29sb3I6IENvbG9yLk9yYW5nZSB9LFxuICAgIHRvb2x0aXA6IElURU1fVFlQRV9UT19MQUJFTFtJdGVtVHlwZS5JREVOVElUWV0sXG4gIH0sXG4gIFtJdGVtVHlwZS5OT1RFXToge1xuICAgIGljb246IHsgc291cmNlOiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuTk9URV0sIHRpbnRDb2xvcjogQ29sb3IuUHJpbWFyeVRleHQgfSxcbiAgICB0b29sdGlwOiBJVEVNX1RZUEVfVE9fTEFCRUxbSXRlbVR5cGUuTk9URV0sXG4gIH0sXG4gIFtJdGVtVHlwZS5TU0hfS0VZXToge1xuICAgIGljb246IHsgc291cmNlOiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuU1NIX0tFWV0sIHRpbnRDb2xvcjogQ29sb3IuU2Vjb25kYXJ5VGV4dCB9LFxuICAgIHRvb2x0aXA6IElURU1fVFlQRV9UT19MQUJFTFtJdGVtVHlwZS5TU0hfS0VZXSxcbiAgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJdGVtQWNjZXNzb3JpZXMoaXRlbTogSXRlbSwgZm9sZGVyOiBGb2xkZXIgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgeyBmYXZvcml0ZU9yZGVyIH0gPSB1c2VGYXZvcml0ZXNDb250ZXh0KCk7XG5cbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhY2Nlc3NvcmllczogTGlzdEl0ZW1BY2Nlc3NvcnlbXSA9IFtdO1xuXG4gICAgICBpZiAoZm9sZGVyPy5pZCkge1xuICAgICAgICBhY2Nlc3Nvcmllcy5wdXNoKHtcbiAgICAgICAgICBpY29uOiB7IHNvdXJjZTogSWNvbi5Gb2xkZXIsIHRpbnRDb2xvcjogQ29sb3IuU2Vjb25kYXJ5VGV4dCB9LFxuICAgICAgICAgIHRhZzogeyB2YWx1ZTogZm9sZGVyLm5hbWUsIGNvbG9yOiBDb2xvci5TZWNvbmRhcnlUZXh0IH0sXG4gICAgICAgICAgdG9vbHRpcDogYCR7Zm9sZGVyLm5hbWV9IEZvbGRlcmAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5mYXZvcml0ZSkge1xuICAgICAgICBhY2Nlc3Nvcmllcy5wdXNoKHsgaWNvbjogeyBzb3VyY2U6IEljb24uU3RhciwgdGludENvbG9yOiBDb2xvci5CbHVlIH0sIHRvb2x0aXA6IFwiQml0d2FyZGVuIEZhdm9yaXRlXCIgfSk7XG4gICAgICB9IGVsc2UgaWYgKGZhdm9yaXRlT3JkZXIuaW5jbHVkZXMoaXRlbS5pZCkpIHtcbiAgICAgICAgYWNjZXNzb3JpZXMucHVzaCh7IGljb246IHsgc291cmNlOiBJY29uLlN0YXIsIHRpbnRDb2xvcjogQ29sb3IuWWVsbG93IH0sIHRvb2x0aXA6IFwiRmF2b3JpdGVcIiB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW0ucmVwcm9tcHQgPT09IFJlcHJvbXB0LlJFUVVJUkVEKSB7XG4gICAgICAgIGFjY2Vzc29yaWVzLnB1c2goe1xuICAgICAgICAgIGljb246IHsgc291cmNlOiBJY29uLkxvY2ssIHRpbnRDb2xvcjogQ29sb3IuU2Vjb25kYXJ5VGV4dCB9LFxuICAgICAgICAgIHRvb2x0aXA6IFwiTWFzdGVyIHBhc3N3b3JkIHJlLXByb21wdFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFJVEVNX1RZUEVfVE9fQUNDRVNTT1JZX01BUFtpdGVtLnR5cGVdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gYWNjZXNzb3J5IGRlZmluZWQgZm9yIGl0ZW0gJHtpdGVtLm5hbWV9IHdpdGggdHlwZSAke2l0ZW0udHlwZX1gKTtcbiAgICAgIH1cbiAgICAgIGFjY2Vzc29yaWVzLnB1c2goSVRFTV9UWVBFX1RPX0FDQ0VTU09SWV9NQVBbaXRlbS50eXBlXSk7XG5cbiAgICAgIHJldHVybiBhY2Nlc3NvcmllcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY2FwdHVyZUV4Y2VwdGlvbihcIkZhaWxlZCB0byBnZXQgaXRlbSBhY2Nlc3Nvcmllc1wiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LCBbZmF2b3JpdGVPcmRlciwgaXRlbS5mYXZvcml0ZSwgaXRlbS5yZXByb21wdCwgaXRlbS50eXBlLCBmb2xkZXI/LmlkLCBmb2xkZXI/Lm5hbWVdKTtcbn1cbiIsICJpbXBvcnQgeyBJY29uLCBnZXRQcmVmZXJlbmNlVmFsdWVzIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSVRFTV9UWVBFX1RPX0lDT05fTUFQIH0gZnJvbSBcIn4vY29uc3RhbnRzL2dlbmVyYWxcIjtcbmltcG9ydCB7IEl0ZW0sIEl0ZW1UeXBlIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcbmltcG9ydCB7IGdldENhcmRJbWFnZVVybCB9IGZyb20gXCJ+L3V0aWxzL2NhcmRzXCI7XG5pbXBvcnQgeyBmYXZpY29uVXJsIH0gZnJvbSBcIn4vdXRpbHMvc2VhcmNoXCI7XG5cbmNvbnN0IHsgZmV0Y2hGYXZpY29ucyB9ID0gZ2V0UHJlZmVyZW5jZVZhbHVlcygpO1xuXG5leHBvcnQgY29uc3QgSVRFTV9UWVBFX1RPX0lNQUdFX09SX0lDT05fTUFQOiBSZWNvcmQ8SXRlbVR5cGUsIChpdGVtOiBJdGVtKSA9PiBzdHJpbmcgfCBJY29uPiA9IHtcbiAgW0l0ZW1UeXBlLkxPR0lOXTogKGl0ZW06IEl0ZW0pID0+IHtcbiAgICBjb25zdCBpY29uVXJpID0gaXRlbS5sb2dpbj8udXJpcz8uWzBdPy51cmk7XG4gICAgaWYgKGZldGNoRmF2aWNvbnMgJiYgaWNvblVyaSkgcmV0dXJuIGZhdmljb25VcmwoaWNvblVyaSk7XG4gICAgcmV0dXJuIElURU1fVFlQRV9UT19JQ09OX01BUFtJdGVtVHlwZS5MT0dJTl07XG4gIH0sXG4gIFtJdGVtVHlwZS5DQVJEXTogKGl0ZW06IEl0ZW0pID0+IHtcbiAgICBjb25zdCB7IGJyYW5kIH0gPSBpdGVtLmNhcmQgPz8ge307XG4gICAgaWYgKGJyYW5kKSB7XG4gICAgICBjb25zdCBjYXJkQnJhbmRJbWFnZSA9IGdldENhcmRJbWFnZVVybChicmFuZCk7XG4gICAgICBpZiAoY2FyZEJyYW5kSW1hZ2UpIHJldHVybiBjYXJkQnJhbmRJbWFnZTtcbiAgICB9XG4gICAgcmV0dXJuIElURU1fVFlQRV9UT19JQ09OX01BUFtJdGVtVHlwZS5DQVJEXTtcbiAgfSxcbiAgW0l0ZW1UeXBlLklERU5USVRZXTogKCkgPT4gSVRFTV9UWVBFX1RPX0lDT05fTUFQW0l0ZW1UeXBlLklERU5USVRZXSxcbiAgW0l0ZW1UeXBlLk5PVEVdOiAoKSA9PiBJVEVNX1RZUEVfVE9fSUNPTl9NQVBbSXRlbVR5cGUuTk9URV0sXG4gIFtJdGVtVHlwZS5TU0hfS0VZXTogKCkgPT4gSVRFTV9UWVBFX1RPX0lDT05fTUFQW0l0ZW1UeXBlLlNTSF9LRVldLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUl0ZW1JY29uKGl0ZW06IEl0ZW0pIHtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGltYWdlT3JJY29uID0gSVRFTV9UWVBFX1RPX0lNQUdFX09SX0lDT05fTUFQW2l0ZW0udHlwZV0/LihpdGVtKTtcbiAgICBpZiAoaW1hZ2VPckljb24pIHJldHVybiBpbWFnZU9ySWNvbjtcbiAgICByZXR1cm4gSWNvbi5RdWVzdGlvbk1hcms7XG4gIH0sIFtpdGVtLnR5cGUsIGl0ZW0uY2FyZD8uYnJhbmQsIGl0ZW0ubG9naW4/LnVyaXM/LlswXT8udXJpXSk7XG59XG4iLCAiaW1wb3J0IHsgSWNvbiB9IGZyb20gXCJAcmF5Y2FzdC9hcGlcIjtcbmltcG9ydCB7IFNlYXJjaGVyIH0gZnJvbSBcImZhc3QtZnV6enlcIjtcbmltcG9ydCB7IHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBVUkwgfSBmcm9tIFwidXJsXCI7XG5pbXBvcnQgeyBJVEVNX1RZUEVfVE9fTEFCRUwgfSBmcm9tIFwifi9jb25zdGFudHMvbGFiZWxzXCI7XG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIn4vdHlwZXMvdmF1bHRcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZhdmljb25VcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIGNvbnN0IGRvbWFpbiA9IG5ldyBVUkwodXJsKS5ob3N0bmFtZTtcbiAgICByZXR1cm4gYGh0dHBzOi8vaWNvbnMuYml0d2FyZGVuLm5ldC8ke2RvbWFpbn0vaWNvbi5wbmdgO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gSWNvbi5HbG9iZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlVmF1bHRTZWFyY2goaXRlbXM6IEl0ZW1bXSkge1xuICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcblxuICBjb25zdCBzZWFyY2hlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBuZXcgU2VhcmNoZXIoaXRlbXMsIHtcbiAgICAgIGlnbm9yZVN5bWJvbHM6IGZhbHNlLFxuICAgICAgdGhyZXNob2xkOiAwLjcsXG4gICAgICBrZXlTZWxlY3RvcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgeyBsb2dpbiwgY2FyZCB9ID0gaXRlbTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBpdGVtLm5hbWUsXG4gICAgICAgICAgSVRFTV9UWVBFX1RPX0xBQkVMW2l0ZW0udHlwZV0sXG4gICAgICAgICAgbG9naW4/LnVzZXJuYW1lLFxuICAgICAgICAgIGxvZ2luPy51cmlzPy5tYXAoKHsgdXJpIH0pID0+IHVyaSksXG4gICAgICAgICAgY2FyZD8uYnJhbmQsXG4gICAgICAgICAgY2FyZD8ubnVtYmVyLFxuICAgICAgICBdXG4gICAgICAgICAgLmZsYXQoKVxuICAgICAgICAgIC5maWx0ZXIoKHZhbHVlKTogdmFsdWUgaXMgc3RyaW5nID0+ICEhdmFsdWUpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSwgW2l0ZW1zXSk7XG5cbiAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc2VhcmNoVGV4dCkgcmV0dXJuIGl0ZW1zO1xuICAgIHJldHVybiBzZWFyY2hlci5zZWFyY2goc2VhcmNoVGV4dCk7XG4gIH0sIFtzZWFyY2hlciwgc2VhcmNoVGV4dF0pO1xuXG4gIHJldHVybiB7IHNldFNlYXJjaFRleHQsIGZpbHRlcmVkSXRlbXMgfTtcbn1cbiIsICJpbXBvcnQgc3BsaXQgZnJvbSAnZ3JhcGhlbWVzcGxpdCc7XG5cbmNvbnN0IHNwbGl0VW5pY29kZSA9IHN0ciA9PiBzdHIubm9ybWFsaXplKFwiTkZLRFwiKS5zcGxpdChcIlwiKTtcblxuY29uc3Qgd2hpdGVzcGFjZVJlZ2V4ID0gL15cXHMrJC87XG5jb25zdCBub25Xb3JkUmVnZXggPSAvXltgfiFAIyQlXiYqKClcXC09Xyt7fVtcXF1cXHxcXFxcOyc6XCIsLi88Pj9dKyQvO1xuY29uc3Qgc29ydEtpbmQgPSB7XG4gIGluc2VydE9yZGVyOiBcImluc2VydE9yZGVyXCIsXG4gIGJlc3RNYXRjaDogXCJiZXN0TWF0Y2hcIlxufTsgLy8gdGhlIGRlZmF1bHQgb3B0aW9ucywgd2hpY2ggd2lsbCBiZSB1c2VkIGZvciBhbnkgdW5zZXQgb3B0aW9uXG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICBrZXlTZWxlY3RvcjogcyA9PiBzLFxuICB0aHJlc2hvbGQ6IC42LFxuICBpZ25vcmVDYXNlOiB0cnVlLFxuICBpZ25vcmVTeW1ib2xzOiB0cnVlLFxuICBub3JtYWxpemVXaGl0ZXNwYWNlOiB0cnVlLFxuICByZXR1cm5NYXRjaERhdGE6IGZhbHNlLFxuICB1c2VEYW1lcmF1OiB0cnVlLFxuICB1c2VTZWxsZXJzOiB0cnVlLFxuICB1c2VTZXBhcmF0ZWRVbmljb2RlOiBmYWxzZSxcbiAgc29ydEJ5OiBzb3J0S2luZC5iZXN0TWF0Y2hcbn07XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuY29uc3QgYXJyYXlXcmFwID0gaXRlbSA9PiBpdGVtIGluc3RhbmNlb2YgQXJyYXkgPyBpdGVtIDogW2l0ZW1dOyAvLyByZXR1cm4gbm9ybWFsaXplZCBzdHJpbmcsIHdpdGggbWFwIGluY2x1ZGVkXG5cblxuZnVuY3Rpb24gbm9ybWFsaXplKHN0cmluZywgb3B0aW9ucykge1xuICBjb25zdCBsb3dlciA9IG9wdGlvbnMuaWdub3JlQ2FzZSA/IHN0cmluZy50b0xvY2FsZUxvd2VyQ2FzZSgpIDogc3RyaW5nOyAvLyB0cmFjayB0cmFuc2Zvcm1hdGlvbnNcblxuICBjb25zdCBub3JtYWwgPSBbXTtcbiAgY29uc3QgbWFwID0gW107XG4gIGxldCBsYXN0V2FzV2hpdGVzcGFjZSA9IHRydWU7XG4gIGxldCBsZW5ndGggPSAwO1xuICBjb25zdCBncmFwaGVtZUxpc3QgPSBvcHRpb25zLnVzZVNlcGFyYXRlZFVuaWNvZGUgPyBzcGxpdFVuaWNvZGUobG93ZXIpIDogc3BsaXQobG93ZXIpO1xuXG4gIGZvciAoY29uc3QgZ3JhcGhlbWUgb2YgZ3JhcGhlbWVMaXN0KSB7XG4gICAgd2hpdGVzcGFjZVJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgbm9uV29yZFJlZ2V4Lmxhc3RJbmRleCA9IDA7XG5cbiAgICBpZiAob3B0aW9ucy5ub3JtYWxpemVXaGl0ZXNwYWNlICYmIHdoaXRlc3BhY2VSZWdleC50ZXN0KGdyYXBoZW1lKSkge1xuICAgICAgaWYgKCFsYXN0V2FzV2hpdGVzcGFjZSkge1xuICAgICAgICBub3JtYWwucHVzaChcIiBcIik7XG4gICAgICAgIG1hcC5wdXNoKGxlbmd0aCk7XG4gICAgICAgIGxhc3RXYXNXaGl0ZXNwYWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEob3B0aW9ucy5pZ25vcmVTeW1ib2xzICYmIG5vbldvcmRSZWdleC50ZXN0KGdyYXBoZW1lKSkpIHtcbiAgICAgIGlmIChvcHRpb25zLnVzZVNlcGFyYXRlZFVuaWNvZGUpIHtcbiAgICAgICAgbm9ybWFsLnB1c2goZ3JhcGhlbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9ybWFsLnB1c2goZ3JhcGhlbWUubm9ybWFsaXplKCkpO1xuICAgICAgfVxuXG4gICAgICBtYXAucHVzaChsZW5ndGgpO1xuICAgICAgbGFzdFdhc1doaXRlc3BhY2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBsZW5ndGggKz0gZ3JhcGhlbWUubGVuZ3RoO1xuICB9IC8vIGFkZCB0aGUgZW5kIG9mIHRoZSBzdHJpbmdcblxuXG4gIG1hcC5wdXNoKHN0cmluZy5sZW5ndGgpO1xuXG4gIHdoaWxlIChub3JtYWxbbm9ybWFsLmxlbmd0aCAtIDFdID09PSBcIiBcIikge1xuICAgIG5vcm1hbC5wb3AoKTtcbiAgICBtYXAucG9wKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9yaWdpbmFsOiBzdHJpbmcsXG4gICAgbm9ybWFsLFxuICAgIG1hcFxuICB9O1xufSAvLyB0cmFuc2xhdGVzIGEgbWF0Y2ggdG8gdGhlIG9yaWdpbmFsIHN0cmluZ1xuXG5cbmZ1bmN0aW9uIGRlbm9ybWFsaXplTWF0Y2hQb3NpdGlvbihtYXRjaCwgbWFwKSB7XG4gIHJldHVybiB7XG4gICAgaW5kZXg6IG1hcFttYXRjaC5zdGFydF0sXG4gICAgbGVuZ3RoOiBtYXBbbWF0Y2guZW5kICsgMV0gLSBtYXBbbWF0Y2guc3RhcnRdXG4gIH07XG59IC8vIHdhbGtzIGJhY2sgdXAgdGhlIG1hdHJpeCB0byBmaW5kIHRoZSBtYXRjaCBpbmRleCBhbmQgbGVuZ3RoXG5cblxuZnVuY3Rpb24gd2Fsa0JhY2socm93cywgc2NvcmVJbmRleCkge1xuICBpZiAoc2NvcmVJbmRleCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleDogMCxcbiAgICAgIGxlbmd0aDogMFxuICAgIH07XG4gIH1cblxuICBsZXQgc3RhcnQgPSBzY29yZUluZGV4O1xuXG4gIGZvciAobGV0IGkgPSByb3dzLmxlbmd0aCAtIDI7IGkgPiAwICYmIHN0YXJ0ID4gMTsgaS0tKSB7XG4gICAgY29uc3Qgcm93ID0gcm93c1tpXTtcbiAgICBzdGFydCA9IHJvd1tzdGFydF0gPCByb3dbc3RhcnQgLSAxXSA/IHN0YXJ0IDogc3RhcnQgLSAxO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQgLSAxLFxuICAgIGVuZDogc2NvcmVJbmRleCAtIDFcbiAgfTtcbn0gLy8gd2Fsa2JhY2sgaXMgYSBub29wIGZvciBub24tc2VsbGVycywgYnV0IHNob3VsZCBzdGlsbCByZXR1cm4gYW4gb2JqZWN0XG5cblxuZnVuY3Rpb24gbm9vcFdhbGtiYWNrKCkge1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiAwLFxuICAgIGVuZDogMFxuICB9O1xufVxuXG5jb25zdCBsZXZVcGRhdGVTY29yZSA9ICgpID0+IHRydWU7XG5cbmNvbnN0IHNlbGxlcnNVcGRhdGVTY29yZSA9IChjdXIsIG1pbikgPT4gY3VyIDwgbWluO1xuXG5mdW5jdGlvbiBnZXRMZXZTY29yZShyb3dzLCBsZW5ndGgpIHtcbiAgY29uc3QgbGFzdFJvdyA9IHJvd3Nbcm93cy5sZW5ndGggLSAxXTtcbiAgY29uc3QgbGFzdENlbGwgPSBsYXN0Um93W2xlbmd0aCAtIDFdO1xuICBjb25zdCBzY29yZUxlbmd0aCA9IE1hdGgubWF4KHJvd3MubGVuZ3RoLCBsZW5ndGgpO1xuICByZXR1cm4ge1xuICAgIHNjb3JlOiAxIC0gbGFzdENlbGwgLyAoc2NvcmVMZW5ndGggLSAxKSxcbiAgICBzY29yZUluZGV4OiBsZW5ndGggLSAxXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNlbGxlcnNTY29yZShyb3dzLCBsZW5ndGgpIHtcbiAgLy8gc2VhcmNoIHRlcm0gd2FzIGVtcHR5IHN0cmluZywgcmV0dXJuIHBlcmZlY3Qgc2NvcmVcbiAgaWYgKHJvd3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3JlOiAxLFxuICAgICAgc2NvcmVJbmRleDogMFxuICAgIH07XG4gIH1cblxuICBjb25zdCBsYXN0Um93ID0gcm93c1tyb3dzLmxlbmd0aCAtIDFdO1xuICBsZXQgbWluVmFsdWUgPSBsYXN0Um93WzBdO1xuICBsZXQgbWluSW5kZXggPSAwO1xuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB2YWwgPSBsYXN0Um93W2ldO1xuXG4gICAgaWYgKHZhbCA8IG1pblZhbHVlKSB7XG4gICAgICBtaW5WYWx1ZSA9IHZhbDtcbiAgICAgIG1pbkluZGV4ID0gaTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNjb3JlOiAxIC0gbWluVmFsdWUgLyAocm93cy5sZW5ndGggLSAxKSxcbiAgICBzY29yZUluZGV4OiBtaW5JbmRleFxuICB9O1xufVxuXG5mdW5jdGlvbiBpbml0TGV2Um93cyhyb3dDb3VudCwgY29sdW1uQ291bnQpIHtcbiAgY29uc3Qgcm93cyA9IG5ldyBBcnJheShyb3dDb3VudCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dDb3VudDsgaSsrKSB7XG4gICAgcm93c1tpXSA9IG5ldyBBcnJheShjb2x1bW5Db3VudCk7XG4gICAgcm93c1tpXVswXSA9IGk7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbkNvdW50OyBpKyspIHtcbiAgICByb3dzWzBdW2ldID0gaTtcbiAgfVxuXG4gIHJldHVybiByb3dzO1xufVxuXG5mdW5jdGlvbiBpbml0U2VsbGVyc1Jvd3Mocm93Q291bnQsIGNvbHVtbkNvdW50KSB7XG4gIGNvbnN0IHJvd3MgPSBuZXcgQXJyYXkocm93Q291bnQpO1xuICByb3dzWzBdID0gbmV3IEFycmF5KGNvbHVtbkNvdW50KS5maWxsKDApO1xuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcm93Q291bnQ7IGkrKykge1xuICAgIHJvd3NbaV0gPSBuZXcgQXJyYXkoY29sdW1uQ291bnQpO1xuICAgIHJvd3NbaV1bMF0gPSBpO1xuICB9XG5cbiAgcmV0dXJuIHJvd3M7XG59IC8vIHRoZSBjb250ZW50IG9mIHRoZSBpbm5lcm1vc3QgbG9vcCBvZiBsZXZlbnNodGVpblxuXG5cbmZ1bmN0aW9uIGxldkNvcmUodGVybSwgY2FuZGlkYXRlLCByb3dzLCBpLCBqKSB7XG4gIGNvbnN0IHJvd0EgPSByb3dzW2ldO1xuICBjb25zdCByb3dCID0gcm93c1tpICsgMV07XG4gIGNvbnN0IGNvc3QgPSB0ZXJtW2ldID09PSBjYW5kaWRhdGVbal0gPyAwIDogMTtcbiAgbGV0IG07XG4gIGxldCBtaW4gPSByb3dCW2pdICsgMTsgLy8gaW5zZXJ0aW9uXG5cbiAgaWYgKChtID0gcm93QVtqICsgMV0gKyAxKSA8IG1pbikgbWluID0gbTsgLy8gZGVsZXRpb25cblxuICBpZiAoKG0gPSByb3dBW2pdICsgY29zdCkgPCBtaW4pIG1pbiA9IG07IC8vIHN1YnN0aXR1dGlvblxuXG4gIHJvd0JbaiArIDFdID0gbWluO1xufSAvLyBydW50aW1lIGNvbXBsZXhpdHk6IE8obW4pIHdoZXJlIG0gYW5kIG4gYXJlIHRoZSBsZW5ndGhzIG9mIHRlcm0gYW5kIGNhbmRpZGF0ZSwgcmVzcGVjdGl2ZWx5XG4vLyBOb3RlOiB0aGlzIG1ldGhvZCBvbmx5IHJ1bnMgb24gYSBzaW5nbGUgY29sdW1uXG5cblxuZnVuY3Rpb24gbGV2ZW5zaHRlaW4odGVybSwgY2FuZGlkYXRlLCByb3dzLCBqKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGVybS5sZW5ndGg7IGkrKykge1xuICAgIGxldkNvcmUodGVybSwgY2FuZGlkYXRlLCByb3dzLCBpLCBqKTtcbiAgfVxufSAvLyBoYXMgYWxsIHRoZSBydW50aW1lIGNoYXJhY3RlcmlzdGljcyBvZiB0aGUgYWJvdmUsIGJ1dCBwdW5pc2hlcyB0cmFuc3Bvc2l0aW9ucyBsZXNzLFxuLy8gcmVzdWx0aW5nIGluIGJldHRlciB0b2xlcmFuY2UgdG8gdGhvc2UgdHlwZXMgb2YgdHlwb3Ncbi8vIE5vdGU6IHRoaXMgbWV0aG9kIG9ubHkgcnVucyBvbiBhIHNpbmdsZSBjb2x1bW5cblxuXG5mdW5jdGlvbiBkYW1lcmF1TGV2ZW5zaHRlaW4odGVybSwgY2FuZGlkYXRlLCByb3dzLCBqKSB7XG4gIC8vIGlmIGogPT09IDAsIHdlIGNhbid0IGNoZWNrIGZvciB0cmFuc3Bvc2l0aW9ucyxcbiAgLy8gc28gdXNlIG5vcm1hbCBsZXZlbnNodGVpbiBpbnN0ZWFkXG4gIGlmIChqID09PSAwKSB7XG4gICAgbGV2ZW5zaHRlaW4odGVybSwgY2FuZGlkYXRlLCByb3dzLCBqKTtcbiAgICByZXR1cm47XG4gIH0gLy8gZm9yIGkgPT09IDAsIHdlIGFsc28gY2FuJ3QgY2hlY2sgZm9yIHRyYW5zcG9zaXRpb25zLCBzbyBjYWxjdWxhdGVcbiAgLy8gdGhlIGZpcnN0IHJvdyB1c2luZyBub3JtYWwgbGV2ZW5zaHRlaW4gYXMgd2VsbFxuXG5cbiAgaWYgKHRlcm0ubGVuZ3RoID4gMCkge1xuICAgIGxldkNvcmUodGVybSwgY2FuZGlkYXRlLCByb3dzLCAwLCBqKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgdGVybS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJvd0EgPSByb3dzW2kgLSAxXTtcbiAgICBjb25zdCByb3dCID0gcm93c1tpXTtcbiAgICBjb25zdCByb3dDID0gcm93c1tpICsgMV07XG4gICAgY29uc3QgY29zdCA9IHRlcm1baV0gPT09IGNhbmRpZGF0ZVtqXSA/IDAgOiAxO1xuICAgIGxldCBtOyAvLyBpbnNlcnRpb25cblxuICAgIGxldCBtaW4gPSByb3dDW2pdICsgMTsgLy8gZGVsZXRpb25cblxuICAgIGlmICgobSA9IHJvd0JbaiArIDFdICsgMSkgPCBtaW4pIG1pbiA9IG07IC8vIHN1YnN0aXR1dGlvblxuXG4gICAgaWYgKChtID0gcm93QltqXSArIGNvc3QpIDwgbWluKSBtaW4gPSBtOyAvLyB0cmFuc3Bvc2l0aW9uXG5cbiAgICBpZiAodGVybVtpXSA9PT0gY2FuZGlkYXRlW2ogLSAxXSAmJiB0ZXJtW2kgLSAxXSA9PT0gY2FuZGlkYXRlW2pdICYmIChtID0gcm93QVtqIC0gMV0gKyBjb3N0KSA8IG1pbikgbWluID0gbTtcbiAgICByb3dDW2ogKyAxXSA9IG1pbjtcbiAgfVxufSAvLyBtZXRob2QgZm9yIGNyZWF0aW5nIGEgdHJpZSBmcm9tIHNlYXJjaCBjYW5kaWRhdGVzXG4vLyB1c2luZyBhIHRyaWUgY2FuIHNpZ25pZmljYW50bHkgaW1wcm92ZSBzZWFyY2ggdGltZVxuXG5cbmZ1bmN0aW9uIHRyaWVJbnNlcnQodHJpZSwgc3RyaW5nLCBpdGVtKSB7XG4gIGxldCB3YWxrZXIgPSB0cmllO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhciA9IHN0cmluZ1tpXTsgLy8gYWRkIGNoaWxkIG5vZGUgaWYgbm90IGFscmVhZHkgcHJlc2VudFxuXG4gICAgaWYgKHdhbGtlci5jaGlsZHJlbltjaGFyXSA9PSBudWxsKSB7XG4gICAgICB3YWxrZXIuY2hpbGRyZW5bY2hhcl0gPSB7XG4gICAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICAgICAgY2FuZGlkYXRlczogW10sXG4gICAgICAgIGRlcHRoOiAwXG4gICAgICB9O1xuICAgIH0gLy8gbG9nIG1heCBkZXB0aCBvZiB0aGlzIHN1YnRyZWVcblxuXG4gICAgd2Fsa2VyLmRlcHRoID0gTWF0aC5tYXgod2Fsa2VyLmRlcHRoLCBzdHJpbmcubGVuZ3RoIC0gaSk7IC8vIHN0ZXAgaW50byBjaGlsZCBub2RlXG5cbiAgICB3YWxrZXIgPSB3YWxrZXIuY2hpbGRyZW5bY2hhcl07XG4gIH1cblxuICB3YWxrZXIuY2FuZGlkYXRlcy5wdXNoKGl0ZW0pO1xufSAvLyB0cmFuc2Zvcm1zIGEgbGlzdCBvZiBjYW5kaWRhdGVzIGludG8gb2JqZWN0cyB3aXRoIG5vcm1hbGl6ZWQgc2VhcmNoIGtleXMsXG4vLyBhbmQgaW5zZXJ0cyB0aGVtIGludG8gYSB0cmllXG4vLyB0aGUga2V5U2VsZWN0b3IgaXMgdXNlZCB0byBwaWNrIHN0cmluZ3MgZnJvbSBhbiBvYmplY3QgdG8gc2VhcmNoIGJ5XG5cblxuZnVuY3Rpb24gY3JlYXRlU2VhcmNoVHJpZSh0cmllLCBpbmRleCwgaXRlbXMsIG9wdGlvbnMpIHtcbiAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IGFycmF5V3JhcChvcHRpb25zLmtleVNlbGVjdG9yKGl0ZW0pKS5tYXAoKGtleSwga2V5SW5kZXgpID0+ICh7XG4gICAgICBpbmRleCxcbiAgICAgIGtleUluZGV4LFxuICAgICAgaXRlbSxcbiAgICAgIG5vcm1hbGl6ZWQ6IG5vcm1hbGl6ZShrZXksIG9wdGlvbnMpXG4gICAgfSkpO1xuICAgIGluZGV4Kys7XG5cbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICB0cmllSW5zZXJ0KHRyaWUsIGNhbmRpZGF0ZS5ub3JtYWxpemVkLm5vcm1hbCwgY2FuZGlkYXRlKTtcbiAgICB9XG4gIH1cbn0gLy8gc2NvcmVkIGl0ZW0gY29tcGFyYXRvclxuXG5cbmZ1bmN0aW9uIGNvbXBhcmVJdGVtc0Jlc3RTY29yZShhLCBiKSB7XG4gIC8vIGhpZ2hlc3QgcHJpb3JpdHkgaXMgcmF3IGxldmVuc2h0ZWluIHNjb3JlXG4gIGNvbnN0IHNjb3JlRGlmZiA9IGIuc2NvcmUgLSBhLnNjb3JlO1xuXG4gIGlmIChzY29yZURpZmYgIT09IDApIHtcbiAgICByZXR1cm4gc2NvcmVEaWZmO1xuICB9IC8vIHRpZXMgYXJlIGJyb2tlbiBieSBlYXJsaWVyIG1hdGNoIHBvc2l0aW9uc1xuXG5cbiAgY29uc3QgbWF0Y2hQb3NEaWZmID0gYS5tYXRjaC5zdGFydCAtIGIubWF0Y2guc3RhcnQ7XG5cbiAgaWYgKG1hdGNoUG9zRGlmZiAhPT0gMCkge1xuICAgIHJldHVybiBtYXRjaFBvc0RpZmY7XG4gIH0gLy8gcHJpb3JpdGl6ZSBlYXJsaWVyIGtleXNcblxuXG4gIGNvbnN0IGtleUluZGV4RGlmZiA9IGEua2V5SW5kZXggLSBiLmtleUluZGV4O1xuXG4gIGlmIChrZXlJbmRleERpZmYgIT09IDApIHtcbiAgICByZXR1cm4ga2V5SW5kZXhEaWZmO1xuICB9IC8vIGxhc3RseSwgYnJlYWsgdGllcyBieSBwcmVmZXJyaW5nIHRoZSBjbG9zZXIgbGVuZ3RoIG1hdGNoXG5cblxuICBjb25zdCBsZW5ndGhEaWZmID0gYS5sZW5ndGhEaWZmIC0gYi5sZW5ndGhEaWZmO1xuXG4gIGlmIChsZW5ndGhEaWZmICE9PSAwKSB7XG4gICAgcmV0dXJuIGxlbmd0aERpZmY7XG4gIH0gLy8gaWYgYWxsIGVsc2UgZmFpbHMsIHJlc29ydCB0byBpbnNlcnRpb24gb3JkZXJcblxuXG4gIHJldHVybiBjb21wYXJlSXRlbXNJbnNlcnRPcmRlcihhLCBiKTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZUl0ZW1zSW5zZXJ0T3JkZXIoYSwgYikge1xuICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG59XG5cbmZ1bmN0aW9uIGdldENvbXBhcmVGdW5jKHNvcnRCeSkge1xuICBzd2l0Y2ggKHNvcnRCeSkge1xuICAgIGNhc2Ugc29ydEtpbmQuYmVzdE1hdGNoOlxuICAgICAgcmV0dXJuIGNvbXBhcmVJdGVtc0Jlc3RTY29yZTtcblxuICAgIGNhc2Ugc29ydEtpbmQuaW5zZXJ0T3JkZXI6XG4gICAgICByZXR1cm4gY29tcGFyZUl0ZW1zSW5zZXJ0T3JkZXI7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHNvcnRCeSBtZXRob2QgJHtzb3J0Qnl9YCk7XG4gIH1cbn0gLy8gZGVkdXBlcyBhbmQgYWRkcyByZXN1bHRzIHRvIHRoZSByZXN1bHRzIGxpc3QvbWFwXG5cblxuZnVuY3Rpb24gYWRkUmVzdWx0KHJlc3VsdHMsIHJlc3VsdE1hcCwgY2FuZGlkYXRlLCBzY29yZSwgbWF0Y2gsIGxlbmd0aERpZmYsIGNvbXBhcmVJdGVtcykge1xuICBjb25zdCBzY29yZWRJdGVtID0ge1xuICAgIGl0ZW06IGNhbmRpZGF0ZS5pdGVtLFxuICAgIG5vcm1hbGl6ZWQ6IGNhbmRpZGF0ZS5ub3JtYWxpemVkLFxuICAgIHNjb3JlLFxuICAgIG1hdGNoLFxuICAgIGluZGV4OiBjYW5kaWRhdGUuaW5kZXgsXG4gICAga2V5SW5kZXg6IGNhbmRpZGF0ZS5rZXlJbmRleCxcbiAgICBsZW5ndGhEaWZmXG4gIH07XG5cbiAgaWYgKHJlc3VsdE1hcFtjYW5kaWRhdGUuaW5kZXhdID09IG51bGwpIHtcbiAgICByZXN1bHRNYXBbY2FuZGlkYXRlLmluZGV4XSA9IHJlc3VsdHMubGVuZ3RoO1xuICAgIHJlc3VsdHMucHVzaChzY29yZWRJdGVtKTtcbiAgfSBlbHNlIGlmIChjb21wYXJlSXRlbXMoc2NvcmVkSXRlbSwgcmVzdWx0c1tyZXN1bHRNYXBbY2FuZGlkYXRlLmluZGV4XV0pIDwgMCkge1xuICAgIHJlc3VsdHNbcmVzdWx0TWFwW2NhbmRpZGF0ZS5pbmRleF1dID0gc2NvcmVkSXRlbTtcbiAgfVxufVxuXG5jb25zdCBnZXRMZXZMZW5ndGggPSBNYXRoLm1heDtcblxuY29uc3QgZ2V0U2VsbGVyc0xlbmd0aCA9IHRlcm1MZW5ndGggPT4gdGVybUxlbmd0aDsgLy8gc2tpcCBhbnkgc3VidHJlZXMgZm9yIHdoaWNoIGl0IGlzIGltcG9zc2libGUgdG8gc2NvcmUgPj0gdGhyZXNob2xkXG5cblxuZnVuY3Rpb24gbGV2U2hvdWxkQ29udGludWUobm9kZSwgcG9zLCB0ZXJtLCB0aHJlc2hvbGQsIHNWYWx1ZSkge1xuICAvLyBlYXJsaWVzdCBwb2ludCAobGVuZ3RoKSBhdCB3aGljaCBzVmFsdWUgY291bGQgcmV0dXJuIHRvIDBcbiAgY29uc3QgcDEgPSBwb3MgKyBzVmFsdWU7IC8vIHBvaW50IChsZW5ndGgpIGF0IHdoaWNoIHN0cmluZyBsZW5ndGhzIHdvdWxkIG1hdGNoXG5cbiAgY29uc3QgcDIgPSBNYXRoLm1pbih0ZXJtLmxlbmd0aCwgcG9zICsgbm9kZS5kZXB0aCArIDEpOyAvLyB0aGUgYmVzdCBzY29yZSBwb3NzaWJsZSBpcyB0aGUgc3RyaW5nIHdoaWNoIG1pbmltaXplcyB0aGUgdmFsdWVcbiAgLy8gbWF4KHNWYWx1ZSwgc3RyTGVuRGlmZiksIHdoaWNoIGlzIGFsd2F5cyBoYWxmd2F5IGJldHdlZW4gcDEgYW5kIHAyXG5cbiAgY29uc3QgbGVuZ3RoID0gTWF0aC5jZWlsKChwMSArIHAyKSAvIDIpO1xuICBjb25zdCBiZXN0UG9zc2libGVWYWx1ZSA9IGxlbmd0aCAtIHAyO1xuICByZXR1cm4gMSAtIGJlc3RQb3NzaWJsZVZhbHVlIC8gbGVuZ3RoID49IHRocmVzaG9sZDtcbn1cblxuZnVuY3Rpb24gc2VsbGVyc1Nob3VsZENvbnRpbnVlKG5vZGUsIF8sIHRlcm0sIHRocmVzaG9sZCwgc1ZhbHVlLCBsYXN0VmFsdWUpIHtcbiAgY29uc3QgYmVzdFBvc3NpYmxlVmFsdWUgPSBNYXRoLm1pbihzVmFsdWUsIGxhc3RWYWx1ZSAtIChub2RlLmRlcHRoICsgMSkpO1xuICByZXR1cm4gMSAtIGJlc3RQb3NzaWJsZVZhbHVlIC8gdGVybS5sZW5ndGggPj0gdGhyZXNob2xkO1xufSAvLyAocHNldWRvKSByZWN1cnNpdmVseSB3YWxrIHRoZSB0cmllXG5cblxuZnVuY3Rpb24gc2VhcmNoUmVjdXJzZSh0cmllLCB0ZXJtLCBzY29yZU1ldGhvZHMsIHJvd3MsIHJlc3VsdHMsIHJlc3VsdE1hcCwgb3B0aW9ucykge1xuICBjb25zdCBzdGFjayA9IFtdO1xuXG4gIGZvciAoY29uc3Qga2V5IGluIHRyaWUuY2hpbGRyZW4pIHtcbiAgICBjb25zdCBub2RlID0gdHJpZS5jaGlsZHJlbltrZXldO1xuICAgIHN0YWNrLnB1c2goW25vZGUsIDEsIGtleSwgMCwgdGVybS5sZW5ndGhdKTtcbiAgfVxuXG4gIGNvbnN0IGFjYyA9IG5ldyBBcnJheSh0cmllLmRlcHRoKTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoICE9PSAwKSB7XG4gICAgY29uc3QgW25vZGUsIGxlbiwgY2hhciwgc2ksIHN2XSA9IHN0YWNrLnBvcCgpO1xuICAgIGFjY1tsZW4gLSAxXSA9IGNoYXI7IC8vIGJ1aWxkIHJvd3NcblxuICAgIHNjb3JlTWV0aG9kcy5zY29yZSh0ZXJtLCBhY2MsIHJvd3MsIGxlbiAtIDEpOyAvLyB0cmFjayBiZXN0IHNjb3JlIGFuZCBwb3NpdGlvblxuXG4gICAgY29uc3QgbGFzdEluZGV4ID0gbGVuO1xuICAgIGNvbnN0IGxhc3RWYWx1ZSA9IHJvd3Nbcm93cy5sZW5ndGggLSAxXVtsYXN0SW5kZXhdO1xuICAgIGxldCBzSW5kZXggPSBzaSxcbiAgICAgICAgc1ZhbHVlID0gc3Y7XG5cbiAgICBpZiAoc2NvcmVNZXRob2RzLnNob3VsZFVwZGF0ZVNjb3JlKGxhc3RWYWx1ZSwgc3YpKSB7XG4gICAgICBzSW5kZXggPSBsYXN0SW5kZXg7XG4gICAgICBzVmFsdWUgPSBsYXN0VmFsdWU7XG4gICAgfSAvLyBpbnNlcnQgcmVzdWx0c1xuXG5cbiAgICBpZiAobm9kZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IHNjb3JlTWV0aG9kcy5nZXRMZW5ndGgodGVybS5sZW5ndGgsIGxlbik7XG4gICAgICBjb25zdCBzY29yZSA9IDEgLSBzVmFsdWUgLyBsZW5ndGg7XG5cbiAgICAgIGlmIChzY29yZSA+PSBvcHRpb25zLnRocmVzaG9sZCkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHdhbGtCYWNrKHJvd3MsIHNJbmRleCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aERpZmYgPSBNYXRoLmFicyhsZW4gLSB0ZXJtLmxlbmd0aCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2Ygbm9kZS5jYW5kaWRhdGVzKSB7XG4gICAgICAgICAgYWRkUmVzdWx0KHJlc3VsdHMsIHJlc3VsdE1hcCwgY2FuZGlkYXRlLCBzY29yZSwgbWF0Y2gsIGxlbmd0aERpZmYsIHNjb3JlTWV0aG9kcy5jb21wYXJlSXRlbXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyByZWN1cnNlIGZvciBjaGlsZHJlblxuXG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBub2RlLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGRyZW5ba2V5XTtcblxuICAgICAgaWYgKHNjb3JlTWV0aG9kcy5zaG91bGRDb250aW51ZShjaGlsZCwgbGVuLCB0ZXJtLCBvcHRpb25zLnRocmVzaG9sZCwgc1ZhbHVlLCBsYXN0VmFsdWUpKSB7XG4gICAgICAgIHN0YWNrLnB1c2goW2NoaWxkLCBsZW4gKyAxLCBrZXksIHNJbmRleCwgc1ZhbHVlXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59IC8vIHRoZSBjb3JlIG1hdGNoIGZpbmRlcjogcmV0dXJucyBhIHNvcnRlZCwgZmlsdGVyZWQgbGlzdCBvZiBtYXRjaGVzXG4vLyB0aGlzIGRvZXMgbm90IG5vcm1hbGl6ZSBpbnB1dCwgcmVxdWlyaW5nIHVzZXJzIHRvIG5vcm1hbGl6ZSB0aGVtc2VsdmVzXG5cblxuZnVuY3Rpb24gc2VhcmNoQ29yZSh0ZXJtLCB0cmllLCBvcHRpb25zKSB7XG4gIGNvbnN0IGluaXRNZXRob2QgPSBvcHRpb25zLnVzZVNlbGxlcnMgPyBpbml0U2VsbGVyc1Jvd3MgOiBpbml0TGV2Um93cztcbiAgY29uc3Qgc2NvcmVNZXRob2RzID0ge1xuICAgIHNjb3JlOiBvcHRpb25zLnVzZURhbWVyYXUgPyBkYW1lcmF1TGV2ZW5zaHRlaW4gOiBsZXZlbnNodGVpbixcbiAgICBnZXRMZW5ndGg6IG9wdGlvbnMudXNlU2VsbGVycyA/IGdldFNlbGxlcnNMZW5ndGggOiBnZXRMZXZMZW5ndGgsXG4gICAgc2hvdWxkVXBkYXRlU2NvcmU6IG9wdGlvbnMudXNlU2VsbGVycyA/IHNlbGxlcnNVcGRhdGVTY29yZSA6IGxldlVwZGF0ZVNjb3JlLFxuICAgIHNob3VsZENvbnRpbnVlOiBvcHRpb25zLnVzZVNlbGxlcnMgPyBzZWxsZXJzU2hvdWxkQ29udGludWUgOiBsZXZTaG91bGRDb250aW51ZSxcbiAgICB3YWxrQmFjazogb3B0aW9ucy51c2VTZWxsZXJzID8gd2Fsa0JhY2sgOiBub29wV2Fsa2JhY2ssXG4gICAgY29tcGFyZUl0ZW1zOiBnZXRDb21wYXJlRnVuYyhvcHRpb25zLnNvcnRCeSlcbiAgfTsgLy8gd2FsayB0aGUgdHJpZSwgc2NvcmluZyBhbmQgc3RvcmluZyB0aGUgY2FuZGlkYXRlc1xuXG4gIGNvbnN0IHJlc3VsdE1hcCA9IHt9O1xuICBjb25zdCByZXN1bHRzID0gW107XG4gIGNvbnN0IHJvd3MgPSBpbml0TWV0aG9kKHRlcm0ubGVuZ3RoICsgMSwgdHJpZS5kZXB0aCArIDEpO1xuXG4gIGlmIChvcHRpb25zLnRocmVzaG9sZCA8PSAwIHx8IHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgdHJpZS5jYW5kaWRhdGVzKSB7XG4gICAgICBhZGRSZXN1bHQocmVzdWx0cywgcmVzdWx0TWFwLCBjYW5kaWRhdGUsIDAsIHtcbiAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgIGxlbmd0aDogMFxuICAgICAgfSwgdGVybS5sZW5ndGgsIHNjb3JlTWV0aG9kcy5jb21wYXJlSXRlbXMpO1xuICAgIH1cbiAgfVxuXG4gIHNlYXJjaFJlY3Vyc2UodHJpZSwgdGVybSwgc2NvcmVNZXRob2RzLCByb3dzLCByZXN1bHRzLCByZXN1bHRNYXAsIG9wdGlvbnMpO1xuICBjb25zdCBzb3J0ZWQgPSByZXN1bHRzLnNvcnQoc2NvcmVNZXRob2RzLmNvbXBhcmVJdGVtcyk7XG5cbiAgaWYgKG9wdGlvbnMucmV0dXJuTWF0Y2hEYXRhKSB7XG4gICAgY29uc3QgZGVub3JtYWxpemUgPSBvcHRpb25zLnVzZVNlbGxlcnMgPyBkZW5vcm1hbGl6ZU1hdGNoUG9zaXRpb24gOiBub29wO1xuICAgIHJldHVybiBzb3J0ZWQubWFwKGNhbmRpZGF0ZSA9PiAoe1xuICAgICAgaXRlbTogY2FuZGlkYXRlLml0ZW0sXG4gICAgICBvcmlnaW5hbDogY2FuZGlkYXRlLm5vcm1hbGl6ZWQub3JpZ2luYWwsXG4gICAgICBrZXk6IGNhbmRpZGF0ZS5ub3JtYWxpemVkLm5vcm1hbC5qb2luKFwiXCIpLFxuICAgICAgc2NvcmU6IGNhbmRpZGF0ZS5zY29yZSxcbiAgICAgIG1hdGNoOiBkZW5vcm1hbGl6ZShjYW5kaWRhdGUubWF0Y2gsIGNhbmRpZGF0ZS5ub3JtYWxpemVkLm1hcClcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gc29ydGVkLm1hcChjYW5kaWRhdGUgPT4gY2FuZGlkYXRlLml0ZW0pO1xufSAvLyB3cmFwcGVyIGZvciBleHBvcnRpbmcgc2VsbGVycyB3aGlsZSBhbGxvd2luZyBvcHRpb25zIHRvIGJlIHBhc3NlZCBpblxuXG5cbmZ1bmN0aW9uIGZ1enp5KHRlcm0sIGNhbmRpZGF0ZSwgb3B0aW9ucykge1xuICBvcHRpb25zID0geyAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5vcHRpb25zXG4gIH07XG4gIGNvbnN0IGluaXRNZXRob2QgPSBvcHRpb25zLnVzZVNlbGxlcnMgPyBpbml0U2VsbGVyc1Jvd3MgOiBpbml0TGV2Um93cztcbiAgY29uc3Qgc2NvcmVNZXRob2QgPSBvcHRpb25zLnVzZURhbWVyYXUgPyBkYW1lcmF1TGV2ZW5zaHRlaW4gOiBsZXZlbnNodGVpbjtcbiAgY29uc3QgZ2V0U2NvcmUgPSBvcHRpb25zLnVzZVNlbGxlcnMgPyBnZXRTZWxsZXJzU2NvcmUgOiBnZXRMZXZTY29yZTtcbiAgdGVybSA9IG5vcm1hbGl6ZSh0ZXJtLCBvcHRpb25zKS5ub3JtYWw7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemUoY2FuZGlkYXRlLCBvcHRpb25zKTtcbiAgY29uc3Qgcm93cyA9IGluaXRNZXRob2QodGVybS5sZW5ndGggKyAxLCBub3JtYWxpemVkLm5vcm1hbC5sZW5ndGggKyAxKTtcblxuICBmb3IgKGxldCBqID0gMDsgaiA8IG5vcm1hbGl6ZWQubm9ybWFsLmxlbmd0aDsgaisrKSB7XG4gICAgc2NvcmVNZXRob2QodGVybSwgbm9ybWFsaXplZC5ub3JtYWwsIHJvd3MsIGopO1xuICB9XG5cbiAgY29uc3Qgc2NvcmVSZXN1bHQgPSBnZXRTY29yZShyb3dzLCBub3JtYWxpemVkLm5vcm1hbC5sZW5ndGggKyAxKTtcbiAgcmV0dXJuIG9wdGlvbnMucmV0dXJuTWF0Y2hEYXRhID8ge1xuICAgIGl0ZW06IGNhbmRpZGF0ZSxcbiAgICBvcmlnaW5hbDogbm9ybWFsaXplZC5vcmlnaW5hbCxcbiAgICBrZXk6IG5vcm1hbGl6ZWQubm9ybWFsLmpvaW4oXCJcIiksXG4gICAgc2NvcmU6IHNjb3JlUmVzdWx0LnNjb3JlLFxuICAgIG1hdGNoOiBvcHRpb25zLnVzZVNlbGxlcnMgPyBkZW5vcm1hbGl6ZU1hdGNoUG9zaXRpb24od2Fsa0JhY2socm93cywgc2NvcmVSZXN1bHQuc2NvcmVJbmRleCksIG5vcm1hbGl6ZWQubWFwKSA6IG5vb3AoKVxuICB9IDogc2NvcmVSZXN1bHQuc2NvcmU7XG59IC8vIHNpbXBsZSBvbmUtb2ZmIHNlYXJjaC4gVXNlZnVsIGlmIHlvdSBkb24ndCBleHBlY3QgdG8gdXNlIHRoZSBzYW1lIGNhbmRpZGF0ZSBsaXN0IGFnYWluXG5cbmZ1bmN0aW9uIHNlYXJjaCh0ZXJtLCBjYW5kaWRhdGVzLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbiAgY29uc3QgdHJpZSA9IHtcbiAgICBjaGlsZHJlbjoge30sXG4gICAgY2FuZGlkYXRlczogW10sXG4gICAgZGVwdGg6IDBcbiAgfTtcbiAgY3JlYXRlU2VhcmNoVHJpZSh0cmllLCAwLCBjYW5kaWRhdGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIHNlYXJjaENvcmUobm9ybWFsaXplKHRlcm0sIG9wdGlvbnMpLm5vcm1hbCwgdHJpZSwgb3B0aW9ucyk7XG59IC8vIGNsYXNzIHRoYXQgaW1wcm92ZXMgcGVyZm9ybWFuY2Ugb2Ygc2VhcmNoaW5nIHRoZSBzYW1lIHNldCBtdWx0aXBsZSB0aW1lc1xuLy8gbm9ybWFsaXplcyB0aGUgc3RyaW5ncyBhbmQgY2FjaGVzIHRoZSByZXN1bHQgZm9yIGZ1dHVyZSBjYWxsc1xuXG5jbGFzcyBTZWFyY2hlciB7XG4gIGNvbnN0cnVjdG9yKGNhbmRpZGF0ZXMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgdGhpcy50cmllID0ge1xuICAgICAgY2hpbGRyZW46IHt9LFxuICAgICAgY2FuZGlkYXRlczogW10sXG4gICAgICBkZXB0aDogMFxuICAgIH07XG4gICAgY3JlYXRlU2VhcmNoVHJpZSh0aGlzLnRyaWUsIDAsIGNhbmRpZGF0ZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgdGhpcy5jb3VudCA9IGNhbmRpZGF0ZXMubGVuZ3RoO1xuICB9XG5cbiAgYWRkKC4uLmNhbmRpZGF0ZXMpIHtcbiAgICBjcmVhdGVTZWFyY2hUcmllKHRoaXMudHJpZSwgdGhpcy5jb3VudCwgY2FuZGlkYXRlcywgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLmNvdW50ICs9IGNhbmRpZGF0ZXMubGVuZ3RoO1xuICB9XG5cbiAgc2VhcmNoKHRlcm0sIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICByZXR1cm4gc2VhcmNoQ29yZShub3JtYWxpemUodGVybSwgdGhpcy5vcHRpb25zKS5ub3JtYWwsIHRoaXMudHJpZSwgb3B0aW9ucyk7XG4gIH1cblxufVxuXG5leHBvcnQgeyBTZWFyY2hlciwgZnV6enksIHNlYXJjaCwgc29ydEtpbmQgfTtcbiIsICJpbXBvcnQgeyBMaXN0LCBJY29uIH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHsgRk9MREVSX09QVElPTlMgfSBmcm9tIFwifi9jb25zdGFudHMvZ2VuZXJhbFwiO1xuaW1wb3J0IHsgdXNlVmF1bHRDb250ZXh0IH0gZnJvbSBcIn4vY29udGV4dC92YXVsdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMaXN0Rm9sZGVyRHJvcGRvd24oKSB7XG4gIGNvbnN0IHsgZm9sZGVycywgY3VycmVudEZvbGRlcklkLCBzZXRDdXJyZW50Rm9sZGVyIH0gPSB1c2VWYXVsdENvbnRleHQoKTtcblxuICBpZiAoZm9sZGVycy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPExpc3QuRHJvcGRvd25cbiAgICAgIHRvb2x0aXA9XCJTZWxlY3QgYSBmb2xkZXJcIlxuICAgICAgcGxhY2Vob2xkZXI9XCJTZWFyY2ggZm9sZGVyc1wiXG4gICAgICBkZWZhdWx0VmFsdWU9e2N1cnJlbnRGb2xkZXJJZCA/PyBGT0xERVJfT1BUSU9OUy5BTEx9XG4gICAgICBvbkNoYW5nZT17c2V0Q3VycmVudEZvbGRlcn1cbiAgICAgIHRocm90dGxlXG4gICAgPlxuICAgICAgPExpc3QuRHJvcGRvd24uSXRlbSB2YWx1ZT17Rk9MREVSX09QVElPTlMuQUxMfSB0aXRsZT1cIkFsbFwiIGljb249e0ljb24uRm9sZGVyfSAvPlxuICAgICAge2ZvbGRlcnMubWFwKChmb2xkZXIpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBmb2xkZXIuaWQgfHwgRk9MREVSX09QVElPTlMuTk9fRk9MREVSO1xuXG4gICAgICAgIHJldHVybiA8TGlzdC5Ecm9wZG93bi5JdGVtIGtleT17aWR9IHZhbHVlPXtpZH0gdGl0bGU9e2ZvbGRlci5uYW1lfSBpY29uPXtJY29uLkZvbGRlcn0gLz47XG4gICAgICB9KX1cbiAgICA8L0xpc3QuRHJvcGRvd24+XG4gICk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLGtDQUFBQSxVQUFBQyxTQUFBO0FBQUEsSUFB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O0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBO0FBQUEsTUFHUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsYUFBYTtBQUFBLE1BQ2IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLFFBQVE7QUFBQTtBQUFBLE1BQ1IsUUFBUTtBQUFBO0FBQUEsTUFDUixRQUFRO0FBQUE7QUFBQSxNQUNSLGdCQUFnQjtBQUFBO0FBQUEsTUFHaEIsV0FBVztBQUFBO0FBQUEsTUFDWCxXQUFXO0FBQUE7QUFBQSxNQUNYLGdCQUFnQjtBQUFBLE1BQ2hCLFdBQVc7QUFBQTtBQUFBO0FBQUEsTUFHWCxVQUFVO0FBQUE7QUFBQSxNQUNWLFVBQVU7QUFBQTtBQUFBLE1BQ1YsZUFBZTtBQUFBLE1BQ2YsVUFBVTtBQUFBO0FBQUEsTUFDVixVQUFVO0FBQUE7QUFBQSxNQUNWLFVBQVU7QUFBQSxNQUNWLFVBQVU7QUFBQTtBQUFBLE1BR1YsUUFBUTtBQUFBO0FBQUEsTUFD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TztBQUFBLEVBRWhCO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBTztBQUFBLEVBRWhCO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBTztBQUFBLEVBRWhCO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsSUFDVCxRQUFPO0FBQUEsRUFBSTtBQUFBLEVBRVg7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxJQUNULFFBQU87QUFBQSxFQUFJO0FBQUEsRUFFWDtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQUs7QUFBQSxFQUVkO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBSztBQUFBLEVBRWQ7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFLO0FBQUEsRUFFZDtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQUs7QUFBQSxFQUVkO0FBQUEsSUFDQSxNQUFLO0FBQUEsSUFDTCxRQUFPO0FBQUEsSUFDUCxRQUFPO0FBQUEsSUFDUCxhQUFZO0FBQUEsSUFDWixVQUFTO0FBQUEsRUFBSztBQUFBLEVBRWQ7QUFBQSxJQUNBLE1BQUs7QUFBQSxJQUNMLFFBQU87QUFBQSxJQUNQLFFBQU87QUFBQSxJQUNQLGFBQVk7QUFBQSxJQUNaLFVBQVM7QUFBQSxFQUFLO0FBQUEsRUFFZDtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQU87QUFBQSxFQUVoQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElBQ1AsUUFBTztBQUFBLElBQ1AsYUFBWTtBQUFBLElBQ1osVUFBUztBQUFBLEVBQVM7QUFBQSxFQUVsQjtBQUFBLElBQ0EsTUFBSztBQUFBLElBQ0wsUUFBTztBQUFBLElB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QTtBQUFBLEVBRUo7QUFFSjtBQUVBLFNBQVMsY0FBYyxFQUFFLE9BQU8sUUFBUSxHQUF5QztBQUMvRSxTQUNFLCtFQUNHLGdCQUFNLElBQUksQ0FBQyxTQUNWLDhDQUFDLGdCQUF3QixNQUFZLFFBQVEsY0FBYyxTQUFTLElBQUksS0FBeEQsS0FBSyxFQUFzRCxDQUM1RSxHQUNIO0FBRUo7QUFFQSxTQUFTLGNBQWMsWUFBc0IsTUFBWTtBQUN2RCxTQUFPLFdBQVcsS0FBSyxDQUFDLFdBQVcsT0FBTyxPQUFPLEtBQUssUUFBUTtBQUNoRTtBQUVBLElBQU8saUJBQVE7IiwKICAibmFtZXMiOiBbImV4cG9ydHMiLCAibW9kdWxlIiwgInBhdGgiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXRoIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInBhdGgiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aEtleSIsICJlbnZpcm9ubWVudCIsICJwbGF0Zm9ybSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXRoIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInBhdGgiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwcm9jZXNzIiwgInVubG9hZCIsICJlbWl0IiwgImxvYWQiLCAicHJvY2Vzc1JlYWxseUV4aXQiLCAicHJvY2Vzc0VtaXQiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicHJvbWlzaWZ5IiwgImdldFN0cmVhbSIsICJzdHJlYW0iLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJvcGVuIiwgImVyciIsICJlbnRyeSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJsZW5ndGhzIiwgIm9mZnMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZ2xvYmFsIiwgImVuY29kZVVSSSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJCYXNlNjQiLCAic3BsaXQiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9ub2RlX3BhdGgiLCAiaW1wb3J0X25vZGVfcHJvY2VzcyIsICJwbGF0Zm9ybSIsICJwcm9jZXNzIiwgInVybCIsICJwYXRoIiwgIm9uZXRpbWUiLCAiaW1wb3J0X25vZGVfb3MiLCAiaW1wb3J0X25vZGVfb3MiLCAib3MiLCAib25FeGl0IiwgIm1lcmdlU3RyZWFtIiwgImdldFN0cmVhbSIsICJwcm9jZXNzIiwgImNyb3NzU3Bhd24iLCAicGF0aCIsICJjaGlsZFByb2Nlc3MiLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcGF0aCIsICJpbXBvcnRfcHJvbWlzZXMiLCAicGF0aCIsICJzdHJlYW1aaXAiLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJjYXB0dXJlRXhjZXB0aW9uUmF5Y2FzdCIsICJpbXBvcnRfZnMiLCAiaW1wb3J0X2NyeXB0byIsICJ1cmwiLCAicGF0aCIsICJodHRwcyIsICJodHRwIiwgImltcG9ydF9hcGkiLCAiUmF5Y2FzdENhY2hlIiwgInVybCIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImVycm9yIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9hcGkiLCAiJGhnVVcxJHVzZVJlZiIsICIkaGdVVzEkdXNlTWVtbyIsICIkaGdVVzEkc2hvd1RvYXN0IiwgIiRoZ1VXMSRUb2FzdCIsICIkaGdVVzEkcmVhZEZpbGVTeW5jIiwgIiRoZ1VXMSRqb2luIiwgIiRoZ1VXMSRlbnZpcm9ubWVudCIsICIkaGdVVzEkQ2xpcGJvYXJkIiwgIiRoZ1VXMSRvcGVuIiwgIiRoZ1VXMSR1c2VTdGF0ZSIsICIkaGdVVzEkdXNlQ2FsbGJhY2siLCAiYXJncyIsICIkaGdVVzEkTGF1bmNoVHlwZSIsICJvcHRpb25zIiwgIiRoZ1VXMSR1c2VFZmZlY3QiLCAiaW5pdGlhbFN0YXRlIiwgIiRoZ1VXMSRDYWNoZSIsICIkaGdVVzEkdXNlU3luY0V4dGVybmFsU3RvcmUiLCAiJGhnVVcxJHVzZU1lbW8iLCAiJGhnVVcxJHVzZUNhbGxiYWNrIiwgInZhbHVlIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJlcnJvciIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJjYWxsYmFja0V4ZWMiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfY2hpbGRfcHJvY2VzcyIsICJpbXBvcnRfdXRpbCIsICJpbXBvcnRfZnMiLCAiaW1wb3J0X3BhdGgiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImV4ZWMiLCAiZXhlY1dpdGhDYWxsYmFja3MiLCAic3VwcG9ydFBhdGgiLCAiZmV0Y2hGYXZpY29ucyIsICJ0cnlFeGVjIiwgInBhdGgiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X3JlYWN0IiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpdGVtIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfY3J5cHRvIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAicHJvcHMiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9yZWFjdCIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2pzeF9ydW50aW1lIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJpbXBvcnRfcmVhY3QiLCAiaW1wb3J0X2FwaSIsICJzcGxpdCIsICJpbXBvcnRfcmVhY3QiLCAidXJsIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9qc3hfcnVudGltZSIsICJpbXBvcnRfanN4X3J1bnRpbWUiXQp9Cg==
